const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["angular-html.js","html.js","javascript.js","css.js","angular-ts.js","scss.js","apl.js","xml.js","java.js","json.js","astro.js","typescript.js","postcss.js","tsx.js","blade.js","html-derivative.js","sql.js","bsl.js","sdbl.js","cairo.js","python.js","cobol.js","coffee.js","cpp.js","regexp.js","glsl.js","c.js","crystal.js","shellscript.js","edge.js","elixir.js","elm.js","erb.js","ruby.js","haml.js","graphql.js","jsx.js","lua.js","yaml.js","erlang.js","markdown.js","fortran-fixed-form.js","fortran-free-form.js","fsharp.js","gdresource.js","gdshader.js","gdscript.js","git-commit.js","diff.js","git-rebase.js","glimmer-js.js","glimmer-ts.js","hack.js","handlebars.js","http.js","hxml.js","haxe.js","jinja.js","jison.js","julia.js","r.js","latex.js","tex.js","liquid.js","marko.js","less.js","mdc.js","nginx.js","nim.js","perl.js","php.js","pug.js","qml.js","razor.js","csharp.js","rst.js","cmake.js","sas.js","shaderlab.js","hlsl.js","shellsession.js","soy.js","sparql.js","turtle.js","stata.js","svelte.js","templ.js","go.js","ts-tags.js","twig.js","vue.js","vue-html.js","vue-vine.js","stylus.js","xsl.js"])))=>i.map(i=>d[i]);
function mK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var x2={exports:{}},fd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XP;function gK(){if(XP)return fd;XP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return fd.Fragment=e,fd.jsx=n,fd.jsxs=n,fd}var JP;function yK(){return JP||(JP=1,x2.exports=gK()),x2.exports}var C=yK(),w2={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP;function bK(){if(QP)return Xe;QP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function m(T){return T===null||typeof T!="object"?null:(T=d&&T[d]||T["@@iterator"],typeof T=="function"?T:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function S(T,Z,ue){this.props=T,this.context=Z,this.refs=w,this.updater=ue||y}S.prototype.isReactComponent={},S.prototype.setState=function(T,Z){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,Z,"setState")},S.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function _(){}_.prototype=S.prototype;function A(T,Z,ue){this.props=T,this.context=Z,this.refs=w,this.updater=ue||y}var k=A.prototype=new _;k.constructor=A,b(k,S.prototype),k.isPureReactComponent=!0;var P=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function L(T,Z,ue,I,pe,Ee){return ue=Ee.ref,{$$typeof:t,type:T,key:Z,ref:ue!==void 0?ue:null,props:Ee}}function N(T,Z){return L(T.type,Z,void 0,void 0,void 0,T.props)}function z(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function j(T){var Z={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ue){return Z[ue]})}var U=/\/+/g;function W(T,Z){return typeof T=="object"&&T!==null&&T.key!=null?j(""+T.key):Z.toString(36)}function X(){}function G(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(X,X):(T.status="pending",T.then(function(Z){T.status==="pending"&&(T.status="fulfilled",T.value=Z)},function(Z){T.status==="pending"&&(T.status="rejected",T.reason=Z)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function ie(T,Z,ue,I,pe){var Ee=typeof T;(Ee==="undefined"||Ee==="boolean")&&(T=null);var ye=!1;if(T===null)ye=!0;else switch(Ee){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(T.$$typeof){case t:case e:ye=!0;break;case f:return ye=T._init,ie(ye(T._payload),Z,ue,I,pe)}}if(ye)return pe=pe(T),ye=I===""?"."+W(T,0):I,P(pe)?(ue="",ye!=null&&(ue=ye.replace(U,"$&/")+"/"),ie(pe,Z,ue,"",function(Pt){return Pt})):pe!=null&&(z(pe)&&(pe=N(pe,ue+(pe.key==null||T&&T.key===pe.key?"":(""+pe.key).replace(U,"$&/")+"/")+ye)),Z.push(pe)),1;ye=0;var ke=I===""?".":I+":";if(P(T))for(var He=0;He<T.length;He++)I=T[He],Ee=ke+W(I,He),ye+=ie(I,Z,ue,Ee,pe);else if(He=m(T),typeof He=="function")for(T=He.call(T),He=0;!(I=T.next()).done;)I=I.value,Ee=ke+W(I,He++),ye+=ie(I,Z,ue,Ee,pe);else if(Ee==="object"){if(typeof T.then=="function")return ie(G(T),Z,ue,I,pe);throw Z=String(T),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ye}function F(T,Z,ue){if(T==null)return T;var I=[],pe=0;return ie(T,I,"","",function(Ee){return Z.call(ue,Ee,pe++)}),I}function Y(T){if(T._status===-1){var Z=T._result;Z=Z(),Z.then(function(ue){(T._status===0||T._status===-1)&&(T._status=1,T._result=ue)},function(ue){(T._status===0||T._status===-1)&&(T._status=2,T._result=ue)}),T._status===-1&&(T._status=0,T._result=Z)}if(T._status===1)return T._result.default;throw T._result}var q=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function se(){}return Xe.Children={map:F,forEach:function(T,Z,ue){F(T,function(){Z.apply(this,arguments)},ue)},count:function(T){var Z=0;return F(T,function(){Z++}),Z},toArray:function(T){return F(T,function(Z){return Z})||[]},only:function(T){if(!z(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Xe.Component=S,Xe.Fragment=n,Xe.Profiler=i,Xe.PureComponent=A,Xe.StrictMode=r,Xe.Suspense=c,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(T){return M.H.useMemoCache(T)}},Xe.cache=function(T){return function(){return T.apply(null,arguments)}},Xe.cloneElement=function(T,Z,ue){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var I=b({},T.props),pe=T.key,Ee=void 0;if(Z!=null)for(ye in Z.ref!==void 0&&(Ee=void 0),Z.key!==void 0&&(pe=""+Z.key),Z)!O.call(Z,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Z.ref===void 0||(I[ye]=Z[ye]);var ye=arguments.length-2;if(ye===1)I.children=ue;else if(1<ye){for(var ke=Array(ye),He=0;He<ye;He++)ke[He]=arguments[He+2];I.children=ke}return L(T.type,pe,void 0,void 0,Ee,I)},Xe.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:s,_context:T},T},Xe.createElement=function(T,Z,ue){var I,pe={},Ee=null;if(Z!=null)for(I in Z.key!==void 0&&(Ee=""+Z.key),Z)O.call(Z,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(pe[I]=Z[I]);var ye=arguments.length-2;if(ye===1)pe.children=ue;else if(1<ye){for(var ke=Array(ye),He=0;He<ye;He++)ke[He]=arguments[He+2];pe.children=ke}if(T&&T.defaultProps)for(I in ye=T.defaultProps,ye)pe[I]===void 0&&(pe[I]=ye[I]);return L(T,Ee,void 0,void 0,null,pe)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(T){return{$$typeof:a,render:T}},Xe.isValidElement=z,Xe.lazy=function(T){return{$$typeof:f,_payload:{_status:-1,_result:T},_init:Y}},Xe.memo=function(T,Z){return{$$typeof:h,type:T,compare:Z===void 0?null:Z}},Xe.startTransition=function(T){var Z=M.T,ue={};M.T=ue;try{var I=T(),pe=M.S;pe!==null&&pe(ue,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(se,q)}catch(Ee){q(Ee)}finally{M.T=Z}},Xe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Xe.use=function(T){return M.H.use(T)},Xe.useActionState=function(T,Z,ue){return M.H.useActionState(T,Z,ue)},Xe.useCallback=function(T,Z){return M.H.useCallback(T,Z)},Xe.useContext=function(T){return M.H.useContext(T)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(T,Z){return M.H.useDeferredValue(T,Z)},Xe.useEffect=function(T,Z,ue){var I=M.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(T,Z)},Xe.useId=function(){return M.H.useId()},Xe.useImperativeHandle=function(T,Z,ue){return M.H.useImperativeHandle(T,Z,ue)},Xe.useInsertionEffect=function(T,Z){return M.H.useInsertionEffect(T,Z)},Xe.useLayoutEffect=function(T,Z){return M.H.useLayoutEffect(T,Z)},Xe.useMemo=function(T,Z){return M.H.useMemo(T,Z)},Xe.useOptimistic=function(T,Z){return M.H.useOptimistic(T,Z)},Xe.useReducer=function(T,Z,ue){return M.H.useReducer(T,Z,ue)},Xe.useRef=function(T){return M.H.useRef(T)},Xe.useState=function(T){return M.H.useState(T)},Xe.useSyncExternalStore=function(T,Z,ue){return M.H.useSyncExternalStore(T,Z,ue)},Xe.useTransition=function(){return M.H.useTransition()},Xe.version="19.1.1",Xe}var ZP;function bk(){return ZP||(ZP=1,w2.exports=bK()),w2.exports}var E=bk();const xe=Mc(E),xB=mK({__proto__:null,default:xe},[E]);var S2={exports:{}},dd={},_2={exports:{}},C2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eD;function vK(){return eD||(eD=1,(function(t){function e(F,Y){var q=F.length;F.push(Y);e:for(;0<q;){var se=q-1>>>1,T=F[se];if(0<i(T,Y))F[se]=Y,F[q]=T,q=se;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],q=F.pop();if(q!==Y){F[0]=q;e:for(var se=0,T=F.length,Z=T>>>1;se<Z;){var ue=2*(se+1)-1,I=F[ue],pe=ue+1,Ee=F[pe];if(0>i(I,q))pe<T&&0>i(Ee,I)?(F[se]=Ee,F[pe]=q,se=pe):(F[se]=I,F[ue]=q,se=ue);else if(pe<T&&0>i(Ee,q))F[se]=Ee,F[pe]=q,se=pe;else break e}}return Y}function i(F,Y){var q=F.sortIndex-Y.sortIndex;return q!==0?q:F.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,d=null,m=3,y=!1,b=!1,w=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function P(F){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=F)r(h),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(h)}}function M(F){if(w=!1,P(F),!b)if(n(c)!==null)b=!0,O||(O=!0,W());else{var Y=n(h);Y!==null&&ie(M,Y.startTime-F)}}var O=!1,L=-1,N=5,z=-1;function j(){return S?!0:!(t.unstable_now()-z<N)}function U(){if(S=!1,O){var F=t.unstable_now();z=F;var Y=!0;try{e:{b=!1,w&&(w=!1,A(L),L=-1),y=!0;var q=m;try{t:{for(P(F),d=n(c);d!==null&&!(d.expirationTime>F&&j());){var se=d.callback;if(typeof se=="function"){d.callback=null,m=d.priorityLevel;var T=se(d.expirationTime<=F);if(F=t.unstable_now(),typeof T=="function"){d.callback=T,P(F),Y=!0;break t}d===n(c)&&r(c),P(F)}else r(c);d=n(c)}if(d!==null)Y=!0;else{var Z=n(h);Z!==null&&ie(M,Z.startTime-F),Y=!1}}break e}finally{d=null,m=q,y=!1}Y=void 0}}finally{Y?W():O=!1}}}var W;if(typeof k=="function")W=function(){k(U)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,G=X.port2;X.port1.onmessage=U,W=function(){G.postMessage(null)}}else W=function(){_(U,0)};function ie(F,Y){L=_(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var q=m;m=Y;try{return F()}finally{m=q}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=m;m=F;try{return Y()}finally{m=q}},t.unstable_scheduleCallback=function(F,Y,q){var se=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,F){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=q+T,F={id:f++,callback:Y,priorityLevel:F,startTime:q,expirationTime:T,sortIndex:-1},q>se?(F.sortIndex=q,e(h,F),n(c)===null&&F===n(h)&&(w?(A(L),L=-1):w=!0,ie(M,q-se))):(F.sortIndex=T,e(c,F),b||y||(b=!0,O||(O=!0,W()))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var Y=m;return function(){var q=m;m=Y;try{return F.apply(this,arguments)}finally{m=q}}}})(C2)),C2}var tD;function xK(){return tD||(tD=1,_2.exports=vK()),_2.exports}var A2={exports:{}},cr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nD;function wK(){if(nD)return cr;nD=1;var t=bk();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,h,f){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:c,containerInfo:h,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cr.createPortal=function(c,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(c,h,null,f)},cr.flushSync=function(c){var h=o.T,f=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=h,r.p=f,r.d.f()}},cr.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},cr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},cr.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var f=h.as,d=a(f,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:d,integrity:m,fetchPriority:y}):f==="script"&&r.d.X(c,{crossOrigin:d,integrity:m,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},cr.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=a(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},cr.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,d=a(f,h.crossOrigin);r.d.L(c,f,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},cr.preloadModule=function(c,h){if(typeof c=="string")if(h){var f=a(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},cr.requestFormReset=function(c){r.d.r(c)},cr.unstable_batchedUpdates=function(c,h){return c(h)},cr.useFormState=function(c,h,f){return o.H.useFormState(c,h,f)},cr.useFormStatus=function(){return o.H.useHostTransitionStatus()},cr.version="19.1.1",cr}var rD;function wB(){if(rD)return A2.exports;rD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),A2.exports=wK(),A2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD;function SK(){if(iD)return dd;iD=1;var t=xK(),e=bk(),n=wB();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function a(l){if(s(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=s(l),u===null)throw Error(r(188));return u!==l?null:l}for(var p=l,g=u;;){var v=p.return;if(v===null)break;var x=v.alternate;if(x===null){if(g=v.return,g!==null){p=g;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===p)return a(v),l;if(x===g)return a(v),u;x=x.sibling}throw Error(r(188))}if(p.return!==g.return)p=v,g=x;else{for(var R=!1,D=v.child;D;){if(D===p){R=!0,p=v,g=x;break}if(D===g){R=!0,g=v,p=x;break}D=D.sibling}if(!R){for(D=x.child;D;){if(D===p){R=!0,p=x,g=v;break}if(D===g){R=!0,g=x,p=v;break}D=D.sibling}if(!R)throw Error(r(189))}}if(p.alternate!==g)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,d=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),k=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function W(l){return l===null||typeof l!="object"?null:(l=U&&l[U]||l["@@iterator"],typeof l=="function"?l:null)}var X=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===X?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case M:return"Suspense";case O:return"SuspenseList";case z:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case k:return(l.displayName||"Context")+".Provider";case A:return(l._context.displayName||"Context")+".Consumer";case P:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return u=l.displayName||null,u!==null?u:G(l.type)||"Memo";case N:u=l._payload,l=l._init;try{return G(l(u))}catch{}}return null}var ie=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},se=[],T=-1;function Z(l){return{current:l}}function ue(l){0>T||(l.current=se[T],se[T]=null,T--)}function I(l,u){T++,se[T]=l.current,l.current=u}var pe=Z(null),Ee=Z(null),ye=Z(null),ke=Z(null);function He(l,u){switch(I(ye,u),I(Ee,l),I(pe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?CP(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=CP(u),l=AP(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ue(pe),I(pe,l)}function Pt(){ue(pe),ue(Ee),ue(ye)}function Kt(l){l.memoizedState!==null&&I(ke,l);var u=pe.current,p=AP(u,l.type);u!==p&&(I(Ee,l),I(pe,p))}function Yt(l){Ee.current===l&&(ue(pe),ue(Ee)),ke.current===l&&(ue(ke),ad._currentValue=q)}var er=Object.prototype.hasOwnProperty,tr=t.unstable_scheduleCallback,ei=t.unstable_cancelCallback,_o=t.unstable_shouldYield,ns=t.unstable_requestPaint,nr=t.unstable_now,af=t.unstable_getCurrentPriorityLevel,Al=t.unstable_ImmediatePriority,Ms=t.unstable_UserBlockingPriority,Os=t.unstable_NormalPriority,$c=t.unstable_LowPriority,kl=t.unstable_IdlePriority,Ri=t.log,aa=t.unstable_setDisableYieldValue,oe=null,me=null;function De(l){if(typeof Ri=="function"&&aa(l),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(oe,l)}catch{}}var Be=Math.clz32?Math.clz32:rs,gt=Math.log,Sr=Math.LN2;function rs(l){return l>>>=0,l===0?32:31-(gt(l)/Sr|0)|0}var rr=256,ti=4194304;function _r(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function sn(l,u,p){var g=l.pendingLanes;if(g===0)return 0;var v=0,x=l.suspendedLanes,R=l.pingedLanes;l=l.warmLanes;var D=g&134217727;return D!==0?(g=D&~x,g!==0?v=_r(g):(R&=D,R!==0?v=_r(R):p||(p=D&~l,p!==0&&(v=_r(p))))):(D=g&~x,D!==0?v=_r(D):R!==0?v=_r(R):p||(p=g&~l,p!==0&&(v=_r(p)))),v===0?0:u!==0&&u!==v&&(u&x)===0&&(x=v&-v,p=u&-u,x>=p||x===32&&(p&4194048)!==0)?u:v}function ir(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function $n(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vc(){var l=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),l}function Fc(){var l=ti;return ti<<=1,(ti&62914560)===0&&(ti=4194304),l}function El(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function is(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function x1(l,u,p,g,v,x){var R=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var D=l.entanglements,V=l.expirationTimes,ee=l.hiddenUpdates;for(p=R&~p;0<p;){var ae=31-Be(p),he=1<<ae;D[ae]=0,V[ae]=-1;var ne=ee[ae];if(ne!==null)for(ee[ae]=null,ae=0;ae<ne.length;ae++){var re=ne[ae];re!==null&&(re.lane&=-536870913)}p&=~he}g!==0&&sg(l,g,0),x!==0&&v===0&&l.tag!==0&&(l.suspendedLanes|=x&~(R&~u))}function sg(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-Be(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|p&4194090}function og(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var g=31-Be(p),v=1<<g;v&u|l[g]&u&&(l[g]|=u),p&=~v}}function lf(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function cf(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function uf(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:UP(l.type))}function ag(l,u){var p=Y.p;try{return Y.p=l,u()}finally{Y.p=p}}var sr=Math.random().toString(36).slice(2),Rn="__reactFiber$"+sr,or="__reactProps$"+sr,la="__reactContainer$"+sr,hf="__reactEvents$"+sr,w1="__reactListeners$"+sr,ss="__reactHandles$"+sr,lg="__reactResources$"+sr,Tl="__reactMarker$"+sr;function ff(l){delete l[Rn],delete l[or],delete l[hf],delete l[w1],delete l[ss]}function ca(l){var u=l[Rn];if(u)return u;for(var p=l.parentNode;p;){if(u=p[la]||p[Rn]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(l=RP(l);l!==null;){if(p=l[Rn])return p;l=RP(l)}return u}l=p,p=l.parentNode}return null}function ua(l){if(l=l[Rn]||l[la]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Mi(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function ha(l){var u=l[lg];return u||(u=l[lg]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function on(l){l[Tl]=!0}var cg=new Set,ug={};function Co(l,u){ni(l,u),ni(l+"Capture",u)}function ni(l,u){for(ug[l]=u,l=0;l<u.length;l++)cg.add(u[l])}var S1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hg={},fg={};function _1(l){return er.call(fg,l)?!0:er.call(hg,l)?!1:S1.test(l)?fg[l]=!0:(hg[l]=!0,!1)}function zc(l,u,p){if(_1(u))if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+p)}}function Hc(l,u,p){if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+p)}}function Oi(l,u,p,g){if(g===null)l.removeAttribute(p);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(u,p,""+g)}}var fa,dg;function Ps(l){if(fa===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);fa=u&&u[1]||"",dg=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fa+l+dg}var df=!1;function pf(l,u){if(!l||df)return"";df=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ne=re}Reflect.construct(l,[],he)}else{try{he.call()}catch(re){ne=re}l.call(he.prototype)}}else{try{throw Error()}catch(re){ne=re}(he=l())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=g.DetermineComponentFrameRoot(),R=x[0],D=x[1];if(R&&D){var V=R.split(`
`),ee=D.split(`
`);for(v=g=0;g<V.length&&!V[g].includes("DetermineComponentFrameRoot");)g++;for(;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;if(g===V.length||v===ee.length)for(g=V.length-1,v=ee.length-1;1<=g&&0<=v&&V[g]!==ee[v];)v--;for(;1<=g&&0<=v;g--,v--)if(V[g]!==ee[v]){if(g!==1||v!==1)do if(g--,v--,0>v||V[g]!==ee[v]){var ae=`
`+V[g].replace(" at new "," at ");return l.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",l.displayName)),ae}while(1<=g&&0<=v);break}}}finally{df=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Ps(p):""}function C1(l){switch(l.tag){case 26:case 27:case 5:return Ps(l.type);case 16:return Ps("Lazy");case 13:return Ps("Suspense");case 19:return Ps("SuspenseList");case 0:case 15:return pf(l.type,!1);case 11:return pf(l.type.render,!1);case 1:return pf(l.type,!0);case 31:return Ps("Activity");default:return""}}function pg(l){try{var u="";do u+=C1(l),l=l.return;while(l);return u}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Br(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function mg(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function mf(l){var u=mg(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),g=""+l[u];if(!l.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,x=p.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return v.call(this)},set:function(R){g=""+R,x.call(this,R)}}),Object.defineProperty(l,u,{enumerable:p.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Uc(l){l._valueTracker||(l._valueTracker=mf(l))}function gg(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var p=u.getValue(),g="";return l&&(g=mg(l)?l.checked?"true":"false":l.value),l=g,l!==p?(u.setValue(l),!0):!1}function qc(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var A1=/[\n"\\]/g;function jr(l){return l.replace(A1,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function gf(l,u,p,g,v,x,R,D){l.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?l.type=R:l.removeAttribute("type"),u!=null?R==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Br(u)):l.value!==""+Br(u)&&(l.value=""+Br(u)):R!=="submit"&&R!=="reset"||l.removeAttribute("value"),u!=null?Wc(l,R,Br(u)):p!=null?Wc(l,R,Br(p)):g!=null&&l.removeAttribute("value"),v==null&&x!=null&&(l.defaultChecked=!!x),v!=null&&(l.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.name=""+Br(D):l.removeAttribute("name")}function yg(l,u,p,g,v,x,R,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(l.type=x),u!=null||p!=null){if(!(x!=="submit"&&x!=="reset"||u!=null))return;p=p!=null?""+Br(p):"",u=u!=null?""+Br(u):p,D||u===l.value||(l.value=u),l.defaultValue=u}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=D?l.checked:!!g,l.defaultChecked=!!g,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(l.name=R)}function Wc(l,u,p){u==="number"&&qc(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function da(l,u,p,g){if(l=l.options,u){u={};for(var v=0;v<p.length;v++)u["$"+p[v]]=!0;for(p=0;p<l.length;p++)v=u.hasOwnProperty("$"+l[p].value),l[p].selected!==v&&(l[p].selected=v),v&&g&&(l[p].defaultSelected=!0)}else{for(p=""+Br(p),u=null,v=0;v<l.length;v++){if(l[v].value===p){l[v].selected=!0,g&&(l[v].defaultSelected=!0);return}u!==null||l[v].disabled||(u=l[v])}u!==null&&(u.selected=!0)}}function bg(l,u,p){if(u!=null&&(u=""+Br(u),u!==l.value&&(l.value=u),p==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=p!=null?""+Br(p):""}function Rl(l,u,p,g){if(u==null){if(g!=null){if(p!=null)throw Error(r(92));if(ie(g)){if(1<g.length)throw Error(r(93));g=g[0]}p=g}p==null&&(p=""),u=p}p=Br(u),l.defaultValue=p,g=l.textContent,g===p&&g!==""&&g!==null&&(l.value=g)}function ri(l,u){if(u){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=u;return}}l.textContent=u}var vg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ds(l,u,p){var g=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,p):typeof p!="number"||p===0||vg.has(u)?u==="float"?l.cssFloat=p:l[u]=(""+p).trim():l[u]=p+"px"}function xg(l,u,p){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,p!=null){for(var g in p)!p.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var v in u)g=u[v],u.hasOwnProperty(v)&&p[v]!==g&&Ds(l,v,g)}else for(var x in u)u.hasOwnProperty(x)&&Ds(l,x,u[x])}function yf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gc(l){return E1.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var bf=null;function Kc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var $r=null,pa=null;function vf(l){var u=ua(l);if(u&&(l=u.stateNode)){var p=l[or]||null;e:switch(l=u.stateNode,u.type){case"input":if(gf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+jr(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var g=p[u];if(g!==l&&g.form===l.form){var v=g[or]||null;if(!v)throw Error(r(90));gf(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(u=0;u<p.length;u++)g=p[u],g.form===l.form&&gg(g)}break e;case"textarea":bg(l,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&da(l,!!p.multiple,u,!1)}}}var xf=!1;function Yc(l,u,p){if(xf)return l(u,p);xf=!0;try{var g=l(u);return g}finally{if(xf=!1,($r!==null||pa!==null)&&(n0(),$r&&(u=$r,l=pa,pa=$r=null,vf(u),l)))for(u=0;u<l.length;u++)vf(l[u])}}function ma(l,u){var p=l.stateNode;if(p===null)return null;var g=p[or]||null;if(g===null)return null;p=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,u,typeof p));return p}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wf=!1;if(os)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){wf=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{wf=!1}var Ls=null,ya=null,Xc=null;function Jc(){if(Xc)return Xc;var l,u=ya,p=u.length,g,v="value"in Ls?Ls.value:Ls.textContent,x=v.length;for(l=0;l<p&&u[l]===v[l];l++);var R=p-l;for(g=1;g<=R&&u[p-g]===v[x-g];g++);return Xc=v.slice(l,1<g?1-g:void 0)}function Qc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Zc(){return!0}function B(){return!1}function Q(l){function u(p,g,v,x,R){this._reactName=p,this._targetInst=v,this.type=g,this.nativeEvent=x,this.target=R,this.currentTarget=null;for(var D in l)l.hasOwnProperty(D)&&(p=l[D],this[D]=p?p(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Zc:B,this.isPropagationStopped=B,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),u}var le={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oe=Q(le),qt=f({},le,{view:0,detail:0}),ar=Q(qt),ii,Mn,ba,as=f({},qt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T1,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ba&&(ba&&l.type==="mousemove"?(ii=l.screenX-ba.screenX,Mn=l.screenY-ba.screenY):Mn=ii=0,ba=l),ii)},movementY:function(l){return"movementY"in l?l.movementY:Mn}}),Sf=Q(as),wg=f({},as,{dataTransfer:0}),Sg=Q(wg),_f=f({},qt,{relatedTarget:0}),va=Q(_f),vW=f({},le,{animationName:0,elapsedTime:0,pseudoElement:0}),xW=Q(vW),wW=f({},le,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),SW=Q(wW),_W=f({},le,{data:0}),OR=Q(_W),CW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EW(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=kW[l])?!!u[l]:!1}function T1(){return EW}var TW=f({},qt,{key:function(l){if(l.key){var u=CW[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Qc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?AW[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T1,charCode:function(l){return l.type==="keypress"?Qc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Qc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),RW=Q(TW),MW=f({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PR=Q(MW),OW=f({},qt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T1}),PW=Q(OW),DW=f({},le,{propertyName:0,elapsedTime:0,pseudoElement:0}),LW=Q(DW),IW=f({},as,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),NW=Q(IW),BW=f({},le,{newState:0,oldState:0}),jW=Q(BW),$W=[9,13,27,32],R1=os&&"CompositionEvent"in window,Cf=null;os&&"documentMode"in document&&(Cf=document.documentMode);var VW=os&&"TextEvent"in window&&!Cf,DR=os&&(!R1||Cf&&8<Cf&&11>=Cf),LR=" ",IR=!1;function NR(l,u){switch(l){case"keyup":return $W.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BR(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var eu=!1;function FW(l,u){switch(l){case"compositionend":return BR(u);case"keypress":return u.which!==32?null:(IR=!0,LR);case"textInput":return l=u.data,l===LR&&IR?null:l;default:return null}}function zW(l,u){if(eu)return l==="compositionend"||!R1&&NR(l,u)?(l=Jc(),Xc=ya=Ls=null,eu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return DR&&u.locale!=="ko"?null:u.data;default:return null}}var HW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jR(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!HW[l.type]:u==="textarea"}function $R(l,u,p,g){$r?pa?pa.push(g):pa=[g]:$r=g,u=l0(u,"onChange"),0<u.length&&(p=new Oe("onChange","change",null,p,g),l.push({event:p,listeners:u}))}var Af=null,kf=null;function UW(l){vP(l,0)}function _g(l){var u=Mi(l);if(gg(u))return l}function VR(l,u){if(l==="change")return u}var FR=!1;if(os){var M1;if(os){var O1="oninput"in document;if(!O1){var zR=document.createElement("div");zR.setAttribute("oninput","return;"),O1=typeof zR.oninput=="function"}M1=O1}else M1=!1;FR=M1&&(!document.documentMode||9<document.documentMode)}function HR(){Af&&(Af.detachEvent("onpropertychange",UR),kf=Af=null)}function UR(l){if(l.propertyName==="value"&&_g(kf)){var u=[];$R(u,kf,l,Kc(l)),Yc(UW,u)}}function qW(l,u,p){l==="focusin"?(HR(),Af=u,kf=p,Af.attachEvent("onpropertychange",UR)):l==="focusout"&&HR()}function WW(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return _g(kf)}function GW(l,u){if(l==="click")return _g(u)}function KW(l,u){if(l==="input"||l==="change")return _g(u)}function YW(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var si=typeof Object.is=="function"?Object.is:YW;function Ef(l,u){if(si(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),g=Object.keys(u);if(p.length!==g.length)return!1;for(g=0;g<p.length;g++){var v=p[g];if(!er.call(u,v)||!si(l[v],u[v]))return!1}return!0}function qR(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function WR(l,u){var p=qR(l);l=0;for(var g;p;){if(p.nodeType===3){if(g=l+p.textContent.length,l<=u&&g>=u)return{node:p,offset:u-l};l=g}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=qR(p)}}function GR(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?GR(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function KR(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=qc(l.document);u instanceof l.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)l=u.contentWindow;else break;u=qc(l.document)}return u}function P1(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var XW=os&&"documentMode"in document&&11>=document.documentMode,tu=null,D1=null,Tf=null,L1=!1;function YR(l,u,p){var g=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;L1||tu==null||tu!==qc(g)||(g=tu,"selectionStart"in g&&P1(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Tf&&Ef(Tf,g)||(Tf=g,g=l0(D1,"onSelect"),0<g.length&&(u=new Oe("onSelect","select",null,u,p),l.push({event:u,listeners:g}),u.target=tu)))}function Ml(l,u){var p={};return p[l.toLowerCase()]=u.toLowerCase(),p["Webkit"+l]="webkit"+u,p["Moz"+l]="moz"+u,p}var nu={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionrun:Ml("Transition","TransitionRun"),transitionstart:Ml("Transition","TransitionStart"),transitioncancel:Ml("Transition","TransitionCancel"),transitionend:Ml("Transition","TransitionEnd")},I1={},XR={};os&&(XR=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function Ol(l){if(I1[l])return I1[l];if(!nu[l])return l;var u=nu[l],p;for(p in u)if(u.hasOwnProperty(p)&&p in XR)return I1[l]=u[p];return l}var JR=Ol("animationend"),QR=Ol("animationiteration"),ZR=Ol("animationstart"),JW=Ol("transitionrun"),QW=Ol("transitionstart"),ZW=Ol("transitioncancel"),eM=Ol("transitionend"),tM=new Map,N1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");N1.push("scrollEnd");function ls(l,u){tM.set(l,u),Co(u,[l])}var nM=new WeakMap;function Pi(l,u){if(typeof l=="object"&&l!==null){var p=nM.get(l);return p!==void 0?p:(u={value:l,source:u,stack:pg(u)},nM.set(l,u),u)}return{value:l,source:u,stack:pg(u)}}var Di=[],ru=0,B1=0;function Cg(){for(var l=ru,u=B1=ru=0;u<l;){var p=Di[u];Di[u++]=null;var g=Di[u];Di[u++]=null;var v=Di[u];Di[u++]=null;var x=Di[u];if(Di[u++]=null,g!==null&&v!==null){var R=g.pending;R===null?v.next=v:(v.next=R.next,R.next=v),g.pending=v}x!==0&&rM(p,v,x)}}function Ag(l,u,p,g){Di[ru++]=l,Di[ru++]=u,Di[ru++]=p,Di[ru++]=g,B1|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function j1(l,u,p,g){return Ag(l,u,p,g),kg(l)}function iu(l,u){return Ag(l,null,null,u),kg(l)}function rM(l,u,p){l.lanes|=p;var g=l.alternate;g!==null&&(g.lanes|=p);for(var v=!1,x=l.return;x!==null;)x.childLanes|=p,g=x.alternate,g!==null&&(g.childLanes|=p),x.tag===22&&(l=x.stateNode,l===null||l._visibility&1||(v=!0)),l=x,x=x.return;return l.tag===3?(x=l.stateNode,v&&u!==null&&(v=31-Be(p),l=x.hiddenUpdates,g=l[v],g===null?l[v]=[u]:g.push(u),u.lane=p|536870912),x):null}function kg(l){if(50<Zf)throw Zf=0,Uw=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var su={};function eG(l,u,p,g){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(l,u,p,g){return new eG(l,u,p,g)}function $1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ao(l,u){var p=l.alternate;return p===null?(p=oi(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function iM(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Eg(l,u,p,g,v,x){var R=0;if(g=l,typeof l=="function")$1(l)&&(R=1);else if(typeof l=="string")R=nK(l,p,pe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case z:return l=oi(31,p,u,v),l.elementType=z,l.lanes=x,l;case b:return Pl(p.children,v,x,u);case w:R=8,v|=24;break;case S:return l=oi(12,p,u,v|2),l.elementType=S,l.lanes=x,l;case M:return l=oi(13,p,u,v),l.elementType=M,l.lanes=x,l;case O:return l=oi(19,p,u,v),l.elementType=O,l.lanes=x,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case _:case k:R=10;break e;case A:R=9;break e;case P:R=11;break e;case L:R=14;break e;case N:R=16,g=null;break e}R=29,p=Error(r(130,l===null?"null":typeof l,"")),g=null}return u=oi(R,p,u,v),u.elementType=l,u.type=g,u.lanes=x,u}function Pl(l,u,p,g){return l=oi(7,l,g,u),l.lanes=p,l}function V1(l,u,p){return l=oi(6,l,null,u),l.lanes=p,l}function F1(l,u,p){return u=oi(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var ou=[],au=0,Tg=null,Rg=0,Li=[],Ii=0,Dl=null,ko=1,Eo="";function Ll(l,u){ou[au++]=Rg,ou[au++]=Tg,Tg=l,Rg=u}function sM(l,u,p){Li[Ii++]=ko,Li[Ii++]=Eo,Li[Ii++]=Dl,Dl=l;var g=ko;l=Eo;var v=32-Be(g)-1;g&=~(1<<v),p+=1;var x=32-Be(u)+v;if(30<x){var R=v-v%5;x=(g&(1<<R)-1).toString(32),g>>=R,v-=R,ko=1<<32-Be(u)+v|p<<v|g,Eo=x+l}else ko=1<<x|p<<v|g,Eo=l}function z1(l){l.return!==null&&(Ll(l,1),sM(l,1,0))}function H1(l){for(;l===Tg;)Tg=ou[--au],ou[au]=null,Rg=ou[--au],ou[au]=null;for(;l===Dl;)Dl=Li[--Ii],Li[Ii]=null,Eo=Li[--Ii],Li[Ii]=null,ko=Li[--Ii],Li[Ii]=null}var Cr=null,Xt=null,yt=!1,Il=null,Is=!1,U1=Error(r(519));function Nl(l){var u=Error(r(418,""));throw Of(Pi(u,l)),U1}function oM(l){var u=l.stateNode,p=l.type,g=l.memoizedProps;switch(u[Rn]=l,u[or]=g,p){case"dialog":at("cancel",u),at("close",u);break;case"iframe":case"object":case"embed":at("load",u);break;case"video":case"audio":for(p=0;p<td.length;p++)at(td[p],u);break;case"source":at("error",u);break;case"img":case"image":case"link":at("error",u),at("load",u);break;case"details":at("toggle",u);break;case"input":at("invalid",u),yg(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Uc(u);break;case"select":at("invalid",u);break;case"textarea":at("invalid",u),Rl(u,g.value,g.defaultValue,g.children),Uc(u)}p=g.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||g.suppressHydrationWarning===!0||_P(u.textContent,p)?(g.popover!=null&&(at("beforetoggle",u),at("toggle",u)),g.onScroll!=null&&at("scroll",u),g.onScrollEnd!=null&&at("scrollend",u),g.onClick!=null&&(u.onclick=c0),u=!0):u=!1,u||Nl(l)}function aM(l){for(Cr=l.return;Cr;)switch(Cr.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:Cr=Cr.return}}function Rf(l){if(l!==Cr)return!1;if(!yt)return aM(l),yt=!0,!1;var u=l.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||o2(l.type,l.memoizedProps)),p=!p),p&&Xt&&Nl(l),aM(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(u===0){Xt=us(l.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++;l=l.nextSibling}Xt=null}}else u===27?(u=Xt,Ia(l.type)?(l=u2,u2=null,Xt=l):Xt=u):Xt=Cr?us(l.stateNode.nextSibling):null;return!0}function Mf(){Xt=Cr=null,yt=!1}function lM(){var l=Il;return l!==null&&(zr===null?zr=l:zr.push.apply(zr,l),Il=null),l}function Of(l){Il===null?Il=[l]:Il.push(l)}var q1=Z(null),Bl=null,To=null;function xa(l,u,p){I(q1,u._currentValue),u._currentValue=p}function Ro(l){l._currentValue=q1.current,ue(q1)}function W1(l,u,p){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===p)break;l=l.return}}function G1(l,u,p,g){var v=l.child;for(v!==null&&(v.return=l);v!==null;){var x=v.dependencies;if(x!==null){var R=v.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=v;for(var V=0;V<u.length;V++)if(D.context===u[V]){x.lanes|=p,D=x.alternate,D!==null&&(D.lanes|=p),W1(x.return,p,l),g||(R=null);break e}x=D.next}}else if(v.tag===18){if(R=v.return,R===null)throw Error(r(341));R.lanes|=p,x=R.alternate,x!==null&&(x.lanes|=p),W1(R,p,l),R=null}else R=v.child;if(R!==null)R.return=v;else for(R=v;R!==null;){if(R===l){R=null;break}if(v=R.sibling,v!==null){v.return=R.return,R=v;break}R=R.return}v=R}}function Pf(l,u,p,g){l=null;for(var v=u,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var R=v.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var D=v.type;si(v.pendingProps.value,R.value)||(l!==null?l.push(D):l=[D])}}else if(v===ke.current){if(R=v.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(l!==null?l.push(ad):l=[ad])}v=v.return}l!==null&&G1(u,l,p,g),u.flags|=262144}function Mg(l){for(l=l.firstContext;l!==null;){if(!si(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function jl(l){Bl=l,To=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function lr(l){return cM(Bl,l)}function Og(l,u){return Bl===null&&jl(l),cM(l,u)}function cM(l,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},To===null){if(l===null)throw Error(r(308));To=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else To=To.next=u;return p}var tG=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},nG=t.unstable_scheduleCallback,rG=t.unstable_NormalPriority,bn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function K1(){return{controller:new tG,data:new Map,refCount:0}}function Df(l){l.refCount--,l.refCount===0&&nG(rG,function(){l.controller.abort()})}var Lf=null,Y1=0,lu=0,cu=null;function iG(l,u){if(Lf===null){var p=Lf=[];Y1=0,lu=Jw(),cu={status:"pending",value:void 0,then:function(g){p.push(g)}}}return Y1++,u.then(uM,uM),u}function uM(){if(--Y1===0&&Lf!==null){cu!==null&&(cu.status="fulfilled");var l=Lf;Lf=null,lu=0,cu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function sG(l,u){var p=[],g={status:"pending",value:null,reason:null,then:function(v){p.push(v)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var v=0;v<p.length;v++)(0,p[v])(u)},function(v){for(g.status="rejected",g.reason=v,v=0;v<p.length;v++)(0,p[v])(void 0)}),g}var hM=F.S;F.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&iG(l,u),hM!==null&&hM(l,u)};var $l=Z(null);function X1(){var l=$l.current;return l!==null?l:Dt.pooledCache}function Pg(l,u){u===null?I($l,$l.current):I($l,u.pool)}function fM(){var l=X1();return l===null?null:{parent:bn._currentValue,pool:l}}var If=Error(r(460)),dM=Error(r(474)),Dg=Error(r(542)),J1={then:function(){}};function pM(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Lg(){}function mM(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(Lg,Lg),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,yM(l),l;default:if(typeof u.status=="string")u.then(Lg,Lg);else{if(l=Dt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var v=u;v.status="fulfilled",v.value=g}},function(g){if(u.status==="pending"){var v=u;v.status="rejected",v.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,yM(l),l}throw Nf=u,If}}var Nf=null;function gM(){if(Nf===null)throw Error(r(459));var l=Nf;return Nf=null,l}function yM(l){if(l===If||l===Dg)throw Error(r(483))}var wa=!1;function Q1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Z1(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Sa(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function _a(l,u,p){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(bt&2)!==0){var v=g.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),g.pending=u,u=kg(l),rM(l,null,p),u}return Ag(l,g,u,p),kg(l)}function Bf(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,p|=g,u.lanes=p,og(l,p)}}function ew(l,u){var p=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,p===g)){var v=null,x=null;if(p=p.firstBaseUpdate,p!==null){do{var R={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};x===null?v=x=R:x=x.next=R,p=p.next}while(p!==null);x===null?v=x=u:x=x.next=u}else v=x=u;p={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:g.shared,callbacks:g.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}var tw=!1;function jf(){if(tw){var l=cu;if(l!==null)throw l}}function $f(l,u,p,g){tw=!1;var v=l.updateQueue;wa=!1;var x=v.firstBaseUpdate,R=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var V=D,ee=V.next;V.next=null,R===null?x=ee:R.next=ee,R=V;var ae=l.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==R&&(D===null?ae.firstBaseUpdate=ee:D.next=ee,ae.lastBaseUpdate=V))}if(x!==null){var he=v.baseState;R=0,ae=ee=V=null,D=x;do{var ne=D.lane&-536870913,re=ne!==D.lane;if(re?(ct&ne)===ne:(g&ne)===ne){ne!==0&&ne===lu&&(tw=!0),ae!==null&&(ae=ae.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var qe=l,$e=D;ne=u;var St=p;switch($e.tag){case 1:if(qe=$e.payload,typeof qe=="function"){he=qe.call(St,he,ne);break e}he=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=$e.payload,ne=typeof qe=="function"?qe.call(St,he,ne):qe,ne==null)break e;he=f({},he,ne);break e;case 2:wa=!0}}ne=D.callback,ne!==null&&(l.flags|=64,re&&(l.flags|=8192),re=v.callbacks,re===null?v.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(ee=ae=re,V=he):ae=ae.next=re,R|=ne;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;re=D,D=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);ae===null&&(V=he),v.baseState=V,v.firstBaseUpdate=ee,v.lastBaseUpdate=ae,x===null&&(v.shared.lanes=0),Oa|=R,l.lanes=R,l.memoizedState=he}}function bM(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function vM(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)bM(p[l],u)}var uu=Z(null),Ig=Z(0);function xM(l,u){l=No,I(Ig,l),I(uu,u),No=l|u.baseLanes}function nw(){I(Ig,No),I(uu,uu.current)}function rw(){No=Ig.current,ue(uu),ue(Ig)}var Ca=0,et=null,xt=null,an=null,Ng=!1,hu=!1,Vl=!1,Bg=0,Vf=0,fu=null,oG=0;function en(){throw Error(r(321))}function iw(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!si(l[p],u[p]))return!1;return!0}function sw(l,u,p,g,v,x){return Ca=x,et=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,F.H=l===null||l.memoizedState===null?rO:iO,Vl=!1,x=p(g,v),Vl=!1,hu&&(x=SM(u,p,g,v)),wM(l),x}function wM(l){F.H=Hg;var u=xt!==null&&xt.next!==null;if(Ca=0,an=xt=et=null,Ng=!1,Vf=0,fu=null,u)throw Error(r(300));l===null||On||(l=l.dependencies,l!==null&&Mg(l)&&(On=!0))}function SM(l,u,p,g){et=l;var v=0;do{if(hu&&(fu=null),Vf=0,hu=!1,25<=v)throw Error(r(301));if(v+=1,an=xt=null,l.updateQueue!=null){var x=l.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}F.H=dG,x=u(p,g)}while(hu);return x}function aG(){var l=F.H,u=l.useState()[0];return u=typeof u.then=="function"?Ff(u):u,l=l.useState()[0],(xt!==null?xt.memoizedState:null)!==l&&(et.flags|=1024),u}function ow(){var l=Bg!==0;return Bg=0,l}function aw(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function lw(l){if(Ng){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Ng=!1}Ca=0,an=xt=et=null,hu=!1,Vf=Bg=0,fu=null}function Vr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?et.memoizedState=an=l:an=an.next=l,an}function ln(){if(xt===null){var l=et.alternate;l=l!==null?l.memoizedState:null}else l=xt.next;var u=an===null?et.memoizedState:an.next;if(u!==null)an=u,xt=l;else{if(l===null)throw et.alternate===null?Error(r(467)):Error(r(310));xt=l,l={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},an===null?et.memoizedState=an=l:an=an.next=l}return an}function cw(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ff(l){var u=Vf;return Vf+=1,fu===null&&(fu=[]),l=mM(fu,l,u),u=et,(an===null?u.memoizedState:an.next)===null&&(u=u.alternate,F.H=u===null||u.memoizedState===null?rO:iO),l}function jg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ff(l);if(l.$$typeof===k)return lr(l)}throw Error(r(438,String(l)))}function uw(l){var u=null,p=et.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var g=et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(v){return v.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=cw(),et.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),g=0;g<l;g++)p[g]=j;return u.index++,p}function Mo(l,u){return typeof u=="function"?u(l):u}function $g(l){var u=ln();return hw(u,xt,l)}function hw(l,u,p){var g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=p;var v=l.baseQueue,x=g.pending;if(x!==null){if(v!==null){var R=v.next;v.next=x.next,x.next=R}u.baseQueue=v=x,g.pending=null}if(x=l.baseState,v===null)l.memoizedState=x;else{u=v.next;var D=R=null,V=null,ee=u,ae=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(ct&he)===he:(Ca&he)===he){var ne=ee.revertLane;if(ne===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===lu&&(ae=!0);else if((Ca&ne)===ne){ee=ee.next,ne===lu&&(ae=!0);continue}else he={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(D=V=he,R=x):V=V.next=he,et.lanes|=ne,Oa|=ne;he=ee.action,Vl&&p(x,he),x=ee.hasEagerState?ee.eagerState:p(x,he)}else ne={lane:he,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(D=V=ne,R=x):V=V.next=ne,et.lanes|=he,Oa|=he;ee=ee.next}while(ee!==null&&ee!==u);if(V===null?R=x:V.next=D,!si(x,l.memoizedState)&&(On=!0,ae&&(p=cu,p!==null)))throw p;l.memoizedState=x,l.baseState=R,l.baseQueue=V,g.lastRenderedState=x}return v===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function fw(l){var u=ln(),p=u.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var g=p.dispatch,v=p.pending,x=u.memoizedState;if(v!==null){p.pending=null;var R=v=v.next;do x=l(x,R.action),R=R.next;while(R!==v);si(x,u.memoizedState)||(On=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),p.lastRenderedState=x}return[x,g]}function _M(l,u,p){var g=et,v=ln(),x=yt;if(x){if(p===void 0)throw Error(r(407));p=p()}else p=u();var R=!si((xt||v).memoizedState,p);R&&(v.memoizedState=p,On=!0),v=v.queue;var D=kM.bind(null,g,v,l);if(zf(2048,8,D,[l]),v.getSnapshot!==u||R||an!==null&&an.memoizedState.tag&1){if(g.flags|=2048,du(9,Vg(),AM.bind(null,g,v,p,u),null),Dt===null)throw Error(r(349));x||(Ca&124)!==0||CM(g,u,p)}return p}function CM(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=et.updateQueue,u===null?(u=cw(),et.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function AM(l,u,p,g){u.value=p,u.getSnapshot=g,EM(u)&&TM(l)}function kM(l,u,p){return p(function(){EM(u)&&TM(l)})}function EM(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!si(l,p)}catch{return!0}}function TM(l){var u=iu(l,2);u!==null&&hi(u,l,2)}function dw(l){var u=Vr();if(typeof l=="function"){var p=l;if(l=p(),Vl){De(!0);try{p()}finally{De(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:l},u}function RM(l,u,p,g){return l.baseState=p,hw(l,xt,typeof g=="function"?g:Mo)}function lG(l,u,p,g,v){if(zg(l))throw Error(r(485));if(l=u.action,l!==null){var x={payload:v,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){x.listeners.push(R)}};F.T!==null?p(!0):x.isTransition=!1,g(x),p=u.pending,p===null?(x.next=u.pending=x,MM(u,x)):(x.next=p.next,u.pending=p.next=x)}}function MM(l,u){var p=u.action,g=u.payload,v=l.state;if(u.isTransition){var x=F.T,R={};F.T=R;try{var D=p(v,g),V=F.S;V!==null&&V(R,D),OM(l,u,D)}catch(ee){pw(l,u,ee)}finally{F.T=x}}else try{x=p(v,g),OM(l,u,x)}catch(ee){pw(l,u,ee)}}function OM(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(g){PM(l,u,g)},function(g){return pw(l,u,g)}):PM(l,u,p)}function PM(l,u,p){u.status="fulfilled",u.value=p,DM(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,MM(l,p)))}function pw(l,u,p){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=p,DM(u),u=u.next;while(u!==g)}l.action=null}function DM(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function LM(l,u){return u}function IM(l,u){if(yt){var p=Dt.formState;if(p!==null){e:{var g=et;if(yt){if(Xt){t:{for(var v=Xt,x=Is;v.nodeType!==8;){if(!x){v=null;break t}if(v=us(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){Xt=us(v.nextSibling),g=v.data==="F!";break e}}Nl(g)}g=!1}g&&(u=p[0])}}return p=Vr(),p.memoizedState=p.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:LM,lastRenderedState:u},p.queue=g,p=eO.bind(null,et,g),g.dispatch=p,g=dw(!1),x=vw.bind(null,et,!1,g.queue),g=Vr(),v={state:u,dispatch:null,action:l,pending:null},g.queue=v,p=lG.bind(null,et,v,x,p),v.dispatch=p,g.memoizedState=l,[u,p,!1]}function NM(l){var u=ln();return BM(u,xt,l)}function BM(l,u,p){if(u=hw(l,u,LM)[0],l=$g(Mo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Ff(u)}catch(R){throw R===If?Dg:R}else g=u;u=ln();var v=u.queue,x=v.dispatch;return p!==u.memoizedState&&(et.flags|=2048,du(9,Vg(),cG.bind(null,v,p),null)),[g,x,l]}function cG(l,u){l.action=u}function jM(l){var u=ln(),p=xt;if(p!==null)return BM(u,p,l);ln(),u=u.memoizedState,p=ln();var g=p.queue.dispatch;return p.memoizedState=l,[u,g,!1]}function du(l,u,p,g){return l={tag:l,create:p,deps:g,inst:u,next:null},u=et.updateQueue,u===null&&(u=cw(),et.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(g=p.next,p.next=l,l.next=g,u.lastEffect=l),l}function Vg(){return{destroy:void 0,resource:void 0}}function $M(){return ln().memoizedState}function Fg(l,u,p,g){var v=Vr();g=g===void 0?null:g,et.flags|=l,v.memoizedState=du(1|u,Vg(),p,g)}function zf(l,u,p,g){var v=ln();g=g===void 0?null:g;var x=v.memoizedState.inst;xt!==null&&g!==null&&iw(g,xt.memoizedState.deps)?v.memoizedState=du(u,x,p,g):(et.flags|=l,v.memoizedState=du(1|u,x,p,g))}function VM(l,u){Fg(8390656,8,l,u)}function FM(l,u){zf(2048,8,l,u)}function zM(l,u){return zf(4,2,l,u)}function HM(l,u){return zf(4,4,l,u)}function UM(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function qM(l,u,p){p=p!=null?p.concat([l]):null,zf(4,4,UM.bind(null,u,l),p)}function mw(){}function WM(l,u){var p=ln();u=u===void 0?null:u;var g=p.memoizedState;return u!==null&&iw(u,g[1])?g[0]:(p.memoizedState=[l,u],l)}function GM(l,u){var p=ln();u=u===void 0?null:u;var g=p.memoizedState;if(u!==null&&iw(u,g[1]))return g[0];if(g=l(),Vl){De(!0);try{l()}finally{De(!1)}}return p.memoizedState=[g,u],g}function gw(l,u,p){return p===void 0||(Ca&1073741824)!==0?l.memoizedState=u:(l.memoizedState=p,l=XO(),et.lanes|=l,Oa|=l,p)}function KM(l,u,p,g){return si(p,u)?p:uu.current!==null?(l=gw(l,p,g),si(l,u)||(On=!0),l):(Ca&42)===0?(On=!0,l.memoizedState=p):(l=XO(),et.lanes|=l,Oa|=l,u)}function YM(l,u,p,g,v){var x=Y.p;Y.p=x!==0&&8>x?x:8;var R=F.T,D={};F.T=D,vw(l,!1,u,p);try{var V=v(),ee=F.S;if(ee!==null&&ee(D,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ae=sG(V,g);Hf(l,u,ae,ui(l))}else Hf(l,u,g,ui(l))}catch(he){Hf(l,u,{then:function(){},status:"rejected",reason:he},ui())}finally{Y.p=x,F.T=R}}function uG(){}function yw(l,u,p,g){if(l.tag!==5)throw Error(r(476));var v=XM(l).queue;YM(l,v,u,q,p===null?uG:function(){return JM(l),p(g)})}function XM(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:q},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function JM(l){var u=XM(l).next.queue;Hf(l,u,{},ui())}function bw(){return lr(ad)}function QM(){return ln().memoizedState}function ZM(){return ln().memoizedState}function hG(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=ui();l=Sa(p);var g=_a(u,l,p);g!==null&&(hi(g,u,p),Bf(g,u,p)),u={cache:K1()},l.payload=u;return}u=u.return}}function fG(l,u,p){var g=ui();p={lane:g,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},zg(l)?tO(u,p):(p=j1(l,u,p,g),p!==null&&(hi(p,l,g),nO(p,u,g)))}function eO(l,u,p){var g=ui();Hf(l,u,p,g)}function Hf(l,u,p,g){var v={lane:g,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(zg(l))tO(u,v);else{var x=l.alternate;if(l.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var R=u.lastRenderedState,D=x(R,p);if(v.hasEagerState=!0,v.eagerState=D,si(D,R))return Ag(l,u,v,0),Dt===null&&Cg(),!1}catch{}finally{}if(p=j1(l,u,v,g),p!==null)return hi(p,l,g),nO(p,u,g),!0}return!1}function vw(l,u,p,g){if(g={lane:2,revertLane:Jw(),action:g,hasEagerState:!1,eagerState:null,next:null},zg(l)){if(u)throw Error(r(479))}else u=j1(l,p,g,2),u!==null&&hi(u,l,2)}function zg(l){var u=l.alternate;return l===et||u!==null&&u===et}function tO(l,u){hu=Ng=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function nO(l,u,p){if((p&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,p|=g,u.lanes=p,og(l,p)}}var Hg={readContext:lr,use:jg,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en},rO={readContext:lr,use:jg,useCallback:function(l,u){return Vr().memoizedState=[l,u===void 0?null:u],l},useContext:lr,useEffect:VM,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,Fg(4194308,4,UM.bind(null,u,l),p)},useLayoutEffect:function(l,u){return Fg(4194308,4,l,u)},useInsertionEffect:function(l,u){Fg(4,2,l,u)},useMemo:function(l,u){var p=Vr();u=u===void 0?null:u;var g=l();if(Vl){De(!0);try{l()}finally{De(!1)}}return p.memoizedState=[g,u],g},useReducer:function(l,u,p){var g=Vr();if(p!==void 0){var v=p(u);if(Vl){De(!0);try{p(u)}finally{De(!1)}}}else v=u;return g.memoizedState=g.baseState=v,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:v},g.queue=l,l=l.dispatch=fG.bind(null,et,l),[g.memoizedState,l]},useRef:function(l){var u=Vr();return l={current:l},u.memoizedState=l},useState:function(l){l=dw(l);var u=l.queue,p=eO.bind(null,et,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:mw,useDeferredValue:function(l,u){var p=Vr();return gw(p,l,u)},useTransition:function(){var l=dw(!1);return l=YM.bind(null,et,l.queue,!0,!1),Vr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var g=et,v=Vr();if(yt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=u(),Dt===null)throw Error(r(349));(ct&124)!==0||CM(g,u,p)}v.memoizedState=p;var x={value:p,getSnapshot:u};return v.queue=x,VM(kM.bind(null,g,x,l),[l]),g.flags|=2048,du(9,Vg(),AM.bind(null,g,x,p,u),null),p},useId:function(){var l=Vr(),u=Dt.identifierPrefix;if(yt){var p=Eo,g=ko;p=(g&~(1<<32-Be(g)-1)).toString(32)+p,u=""+u+"R"+p,p=Bg++,0<p&&(u+="H"+p.toString(32)),u+=""}else p=oG++,u=""+u+"r"+p.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:bw,useFormState:IM,useActionState:IM,useOptimistic:function(l){var u=Vr();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=vw.bind(null,et,!0,p),p.dispatch=u,[l,u]},useMemoCache:uw,useCacheRefresh:function(){return Vr().memoizedState=hG.bind(null,et)}},iO={readContext:lr,use:jg,useCallback:WM,useContext:lr,useEffect:FM,useImperativeHandle:qM,useInsertionEffect:zM,useLayoutEffect:HM,useMemo:GM,useReducer:$g,useRef:$M,useState:function(){return $g(Mo)},useDebugValue:mw,useDeferredValue:function(l,u){var p=ln();return KM(p,xt.memoizedState,l,u)},useTransition:function(){var l=$g(Mo)[0],u=ln().memoizedState;return[typeof l=="boolean"?l:Ff(l),u]},useSyncExternalStore:_M,useId:QM,useHostTransitionStatus:bw,useFormState:NM,useActionState:NM,useOptimistic:function(l,u){var p=ln();return RM(p,xt,l,u)},useMemoCache:uw,useCacheRefresh:ZM},dG={readContext:lr,use:jg,useCallback:WM,useContext:lr,useEffect:FM,useImperativeHandle:qM,useInsertionEffect:zM,useLayoutEffect:HM,useMemo:GM,useReducer:fw,useRef:$M,useState:function(){return fw(Mo)},useDebugValue:mw,useDeferredValue:function(l,u){var p=ln();return xt===null?gw(p,l,u):KM(p,xt.memoizedState,l,u)},useTransition:function(){var l=fw(Mo)[0],u=ln().memoizedState;return[typeof l=="boolean"?l:Ff(l),u]},useSyncExternalStore:_M,useId:QM,useHostTransitionStatus:bw,useFormState:jM,useActionState:jM,useOptimistic:function(l,u){var p=ln();return xt!==null?RM(p,xt,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:uw,useCacheRefresh:ZM},pu=null,Uf=0;function Ug(l){var u=Uf;return Uf+=1,pu===null&&(pu=[]),mM(pu,l,u)}function qf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function qg(l,u){throw u.$$typeof===d?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function sO(l){var u=l._init;return u(l._payload)}function oO(l){function u(K,H){if(l){var J=K.deletions;J===null?(K.deletions=[H],K.flags|=16):J.push(H)}}function p(K,H){if(!l)return null;for(;H!==null;)u(K,H),H=H.sibling;return null}function g(K){for(var H=new Map;K!==null;)K.key!==null?H.set(K.key,K):H.set(K.index,K),K=K.sibling;return H}function v(K,H){return K=Ao(K,H),K.index=0,K.sibling=null,K}function x(K,H,J){return K.index=J,l?(J=K.alternate,J!==null?(J=J.index,J<H?(K.flags|=67108866,H):J):(K.flags|=67108866,H)):(K.flags|=1048576,H)}function R(K){return l&&K.alternate===null&&(K.flags|=67108866),K}function D(K,H,J,ce){return H===null||H.tag!==6?(H=V1(J,K.mode,ce),H.return=K,H):(H=v(H,J),H.return=K,H)}function V(K,H,J,ce){var Te=J.type;return Te===b?ae(K,H,J.props.children,ce,J.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&sO(Te)===H.type)?(H=v(H,J.props),qf(H,J),H.return=K,H):(H=Eg(J.type,J.key,J.props,null,K.mode,ce),qf(H,J),H.return=K,H)}function ee(K,H,J,ce){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=F1(J,K.mode,ce),H.return=K,H):(H=v(H,J.children||[]),H.return=K,H)}function ae(K,H,J,ce,Te){return H===null||H.tag!==7?(H=Pl(J,K.mode,ce,Te),H.return=K,H):(H=v(H,J),H.return=K,H)}function he(K,H,J){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=V1(""+H,K.mode,J),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case m:return J=Eg(H.type,H.key,H.props,null,K.mode,J),qf(J,H),J.return=K,J;case y:return H=F1(H,K.mode,J),H.return=K,H;case N:var ce=H._init;return H=ce(H._payload),he(K,H,J)}if(ie(H)||W(H))return H=Pl(H,K.mode,J,null),H.return=K,H;if(typeof H.then=="function")return he(K,Ug(H),J);if(H.$$typeof===k)return he(K,Og(K,H),J);qg(K,H)}return null}function ne(K,H,J,ce){var Te=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Te!==null?null:D(K,H,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case m:return J.key===Te?V(K,H,J,ce):null;case y:return J.key===Te?ee(K,H,J,ce):null;case N:return Te=J._init,J=Te(J._payload),ne(K,H,J,ce)}if(ie(J)||W(J))return Te!==null?null:ae(K,H,J,ce,null);if(typeof J.then=="function")return ne(K,H,Ug(J),ce);if(J.$$typeof===k)return ne(K,H,Og(K,J),ce);qg(K,J)}return null}function re(K,H,J,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(J)||null,D(H,K,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case m:return K=K.get(ce.key===null?J:ce.key)||null,V(H,K,ce,Te);case y:return K=K.get(ce.key===null?J:ce.key)||null,ee(H,K,ce,Te);case N:var rt=ce._init;return ce=rt(ce._payload),re(K,H,J,ce,Te)}if(ie(ce)||W(ce))return K=K.get(J)||null,ae(H,K,ce,Te,null);if(typeof ce.then=="function")return re(K,H,J,Ug(ce),Te);if(ce.$$typeof===k)return re(K,H,J,Og(H,ce),Te);qg(H,ce)}return null}function qe(K,H,J,ce){for(var Te=null,rt=null,Pe=H,ze=H=0,Dn=null;Pe!==null&&ze<J.length;ze++){Pe.index>ze?(Dn=Pe,Pe=null):Dn=Pe.sibling;var mt=ne(K,Pe,J[ze],ce);if(mt===null){Pe===null&&(Pe=Dn);break}l&&Pe&&mt.alternate===null&&u(K,Pe),H=x(mt,H,ze),rt===null?Te=mt:rt.sibling=mt,rt=mt,Pe=Dn}if(ze===J.length)return p(K,Pe),yt&&Ll(K,ze),Te;if(Pe===null){for(;ze<J.length;ze++)Pe=he(K,J[ze],ce),Pe!==null&&(H=x(Pe,H,ze),rt===null?Te=Pe:rt.sibling=Pe,rt=Pe);return yt&&Ll(K,ze),Te}for(Pe=g(Pe);ze<J.length;ze++)Dn=re(Pe,K,ze,J[ze],ce),Dn!==null&&(l&&Dn.alternate!==null&&Pe.delete(Dn.key===null?ze:Dn.key),H=x(Dn,H,ze),rt===null?Te=Dn:rt.sibling=Dn,rt=Dn);return l&&Pe.forEach(function(Va){return u(K,Va)}),yt&&Ll(K,ze),Te}function $e(K,H,J,ce){if(J==null)throw Error(r(151));for(var Te=null,rt=null,Pe=H,ze=H=0,Dn=null,mt=J.next();Pe!==null&&!mt.done;ze++,mt=J.next()){Pe.index>ze?(Dn=Pe,Pe=null):Dn=Pe.sibling;var Va=ne(K,Pe,mt.value,ce);if(Va===null){Pe===null&&(Pe=Dn);break}l&&Pe&&Va.alternate===null&&u(K,Pe),H=x(Va,H,ze),rt===null?Te=Va:rt.sibling=Va,rt=Va,Pe=Dn}if(mt.done)return p(K,Pe),yt&&Ll(K,ze),Te;if(Pe===null){for(;!mt.done;ze++,mt=J.next())mt=he(K,mt.value,ce),mt!==null&&(H=x(mt,H,ze),rt===null?Te=mt:rt.sibling=mt,rt=mt);return yt&&Ll(K,ze),Te}for(Pe=g(Pe);!mt.done;ze++,mt=J.next())mt=re(Pe,K,ze,mt.value,ce),mt!==null&&(l&&mt.alternate!==null&&Pe.delete(mt.key===null?ze:mt.key),H=x(mt,H,ze),rt===null?Te=mt:rt.sibling=mt,rt=mt);return l&&Pe.forEach(function(pK){return u(K,pK)}),yt&&Ll(K,ze),Te}function St(K,H,J,ce){if(typeof J=="object"&&J!==null&&J.type===b&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case m:e:{for(var Te=J.key;H!==null;){if(H.key===Te){if(Te=J.type,Te===b){if(H.tag===7){p(K,H.sibling),ce=v(H,J.props.children),ce.return=K,K=ce;break e}}else if(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&sO(Te)===H.type){p(K,H.sibling),ce=v(H,J.props),qf(ce,J),ce.return=K,K=ce;break e}p(K,H);break}else u(K,H);H=H.sibling}J.type===b?(ce=Pl(J.props.children,K.mode,ce,J.key),ce.return=K,K=ce):(ce=Eg(J.type,J.key,J.props,null,K.mode,ce),qf(ce,J),ce.return=K,K=ce)}return R(K);case y:e:{for(Te=J.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){p(K,H.sibling),ce=v(H,J.children||[]),ce.return=K,K=ce;break e}else{p(K,H);break}else u(K,H);H=H.sibling}ce=F1(J,K.mode,ce),ce.return=K,K=ce}return R(K);case N:return Te=J._init,J=Te(J._payload),St(K,H,J,ce)}if(ie(J))return qe(K,H,J,ce);if(W(J)){if(Te=W(J),typeof Te!="function")throw Error(r(150));return J=Te.call(J),$e(K,H,J,ce)}if(typeof J.then=="function")return St(K,H,Ug(J),ce);if(J.$$typeof===k)return St(K,H,Og(K,J),ce);qg(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,H!==null&&H.tag===6?(p(K,H.sibling),ce=v(H,J),ce.return=K,K=ce):(p(K,H),ce=V1(J,K.mode,ce),ce.return=K,K=ce),R(K)):p(K,H)}return function(K,H,J,ce){try{Uf=0;var Te=St(K,H,J,ce);return pu=null,Te}catch(Pe){if(Pe===If||Pe===Dg)throw Pe;var rt=oi(29,Pe,null,K.mode);return rt.lanes=ce,rt.return=K,rt}finally{}}}var mu=oO(!0),aO=oO(!1),Ni=Z(null),Ns=null;function Aa(l){var u=l.alternate;I(vn,vn.current&1),I(Ni,l),Ns===null&&(u===null||uu.current!==null||u.memoizedState!==null)&&(Ns=l)}function lO(l){if(l.tag===22){if(I(vn,vn.current),I(Ni,l),Ns===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Ns=l)}}else ka()}function ka(){I(vn,vn.current),I(Ni,Ni.current)}function Oo(l){ue(Ni),Ns===l&&(Ns=null),ue(vn)}var vn=Z(0);function Wg(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||c2(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function xw(l,u,p,g){u=l.memoizedState,p=p(g,u),p=p==null?u:f({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var ww={enqueueSetState:function(l,u,p){l=l._reactInternals;var g=ui(),v=Sa(g);v.payload=u,p!=null&&(v.callback=p),u=_a(l,v,g),u!==null&&(hi(u,l,g),Bf(u,l,g))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var g=ui(),v=Sa(g);v.tag=1,v.payload=u,p!=null&&(v.callback=p),u=_a(l,v,g),u!==null&&(hi(u,l,g),Bf(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=ui(),g=Sa(p);g.tag=2,u!=null&&(g.callback=u),u=_a(l,g,p),u!==null&&(hi(u,l,p),Bf(u,l,p))}};function cO(l,u,p,g,v,x,R){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,x,R):u.prototype&&u.prototype.isPureReactComponent?!Ef(p,g)||!Ef(v,x):!0}function uO(l,u,p,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,g),u.state!==l&&ww.enqueueReplaceState(u,u.state,null)}function Fl(l,u){var p=u;if("ref"in u){p={};for(var g in u)g!=="ref"&&(p[g]=u[g])}if(l=l.defaultProps){p===u&&(p=f({},p));for(var v in l)p[v]===void 0&&(p[v]=l[v])}return p}var Gg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function hO(l){Gg(l)}function fO(l){console.error(l)}function dO(l){Gg(l)}function Kg(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function pO(l,u,p){try{var g=l.onCaughtError;g(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Sw(l,u,p){return p=Sa(p),p.tag=3,p.payload={element:null},p.callback=function(){Kg(l,u)},p}function mO(l){return l=Sa(l),l.tag=3,l}function gO(l,u,p,g){var v=p.type.getDerivedStateFromError;if(typeof v=="function"){var x=g.value;l.payload=function(){return v(x)},l.callback=function(){pO(u,p,g)}}var R=p.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(l.callback=function(){pO(u,p,g),typeof v!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var D=g.stack;this.componentDidCatch(g.value,{componentStack:D!==null?D:""})})}function pG(l,u,p,g,v){if(p.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=p.alternate,u!==null&&Pf(u,p,v,!0),p=Ni.current,p!==null){switch(p.tag){case 13:return Ns===null?Ww():p.alternate===null&&Jt===0&&(Jt=3),p.flags&=-257,p.flags|=65536,p.lanes=v,g===J1?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([g]):u.add(g),Kw(l,g,v)),!1;case 22:return p.flags|=65536,g===J1?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([g]):p.add(g)),Kw(l,g,v)),!1}throw Error(r(435,p.tag))}return Kw(l,g,v),Ww(),!1}if(yt)return u=Ni.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=v,g!==U1&&(l=Error(r(422),{cause:g}),Of(Pi(l,p)))):(g!==U1&&(u=Error(r(423),{cause:g}),Of(Pi(u,p))),l=l.current.alternate,l.flags|=65536,v&=-v,l.lanes|=v,g=Pi(g,p),v=Sw(l.stateNode,g,v),ew(l,v),Jt!==4&&(Jt=2)),!1;var x=Error(r(520),{cause:g});if(x=Pi(x,p),Qf===null?Qf=[x]:Qf.push(x),Jt!==4&&(Jt=2),u===null)return!0;g=Pi(g,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=v&-v,p.lanes|=l,l=Sw(p.stateNode,g,l),ew(p,l),!1;case 1:if(u=p.type,x=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Pa===null||!Pa.has(x))))return p.flags|=65536,v&=-v,p.lanes|=v,v=mO(v),gO(v,l,p,g),ew(p,v),!1}p=p.return}while(p!==null);return!1}var yO=Error(r(461)),On=!1;function Vn(l,u,p,g){u.child=l===null?aO(u,null,p,g):mu(u,l.child,p,g)}function bO(l,u,p,g,v){p=p.render;var x=u.ref;if("ref"in g){var R={};for(var D in g)D!=="ref"&&(R[D]=g[D])}else R=g;return jl(u),g=sw(l,u,p,R,x,v),D=ow(),l!==null&&!On?(aw(l,u,v),Po(l,u,v)):(yt&&D&&z1(u),u.flags|=1,Vn(l,u,g,v),u.child)}function vO(l,u,p,g,v){if(l===null){var x=p.type;return typeof x=="function"&&!$1(x)&&x.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=x,xO(l,u,x,g,v)):(l=Eg(p.type,null,g,u,u.mode,v),l.ref=u.ref,l.return=u,u.child=l)}if(x=l.child,!Mw(l,v)){var R=x.memoizedProps;if(p=p.compare,p=p!==null?p:Ef,p(R,g)&&l.ref===u.ref)return Po(l,u,v)}return u.flags|=1,l=Ao(x,g),l.ref=u.ref,l.return=u,u.child=l}function xO(l,u,p,g,v){if(l!==null){var x=l.memoizedProps;if(Ef(x,g)&&l.ref===u.ref)if(On=!1,u.pendingProps=g=x,Mw(l,v))(l.flags&131072)!==0&&(On=!0);else return u.lanes=l.lanes,Po(l,u,v)}return _w(l,u,p,g,v)}function wO(l,u,p){var g=u.pendingProps,v=g.children,x=l!==null?l.memoizedState:null;if(g.mode==="hidden"){if((u.flags&128)!==0){if(g=x!==null?x.baseLanes|p:p,l!==null){for(v=u.child=l.child,x=0;v!==null;)x=x|v.lanes|v.childLanes,v=v.sibling;u.childLanes=x&~g}else u.childLanes=0,u.child=null;return SO(l,u,g,p)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Pg(u,x!==null?x.cachePool:null),x!==null?xM(u,x):nw(),lO(u);else return u.lanes=u.childLanes=536870912,SO(l,u,x!==null?x.baseLanes|p:p,p)}else x!==null?(Pg(u,x.cachePool),xM(u,x),ka(),u.memoizedState=null):(l!==null&&Pg(u,null),nw(),ka());return Vn(l,u,v,p),u.child}function SO(l,u,p,g){var v=X1();return v=v===null?null:{parent:bn._currentValue,pool:v},u.memoizedState={baseLanes:p,cachePool:v},l!==null&&Pg(u,null),nw(),lO(u),l!==null&&Pf(l,u,g,!0),null}function Yg(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function _w(l,u,p,g,v){return jl(u),p=sw(l,u,p,g,void 0,v),g=ow(),l!==null&&!On?(aw(l,u,v),Po(l,u,v)):(yt&&g&&z1(u),u.flags|=1,Vn(l,u,p,v),u.child)}function _O(l,u,p,g,v,x){return jl(u),u.updateQueue=null,p=SM(u,g,p,v),wM(l),g=ow(),l!==null&&!On?(aw(l,u,x),Po(l,u,x)):(yt&&g&&z1(u),u.flags|=1,Vn(l,u,p,x),u.child)}function CO(l,u,p,g,v){if(jl(u),u.stateNode===null){var x=su,R=p.contextType;typeof R=="object"&&R!==null&&(x=lr(R)),x=new p(g,x),u.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=ww,u.stateNode=x,x._reactInternals=u,x=u.stateNode,x.props=g,x.state=u.memoizedState,x.refs={},Q1(u),R=p.contextType,x.context=typeof R=="object"&&R!==null?lr(R):su,x.state=u.memoizedState,R=p.getDerivedStateFromProps,typeof R=="function"&&(xw(u,p,R,g),x.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(R=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),R!==x.state&&ww.enqueueReplaceState(x,x.state,null),$f(u,g,x,v),jf(),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){x=u.stateNode;var D=u.memoizedProps,V=Fl(p,D);x.props=V;var ee=x.context,ae=p.contextType;R=su,typeof ae=="object"&&ae!==null&&(R=lr(ae));var he=p.getDerivedStateFromProps;ae=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=u.pendingProps!==D,ae||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||ee!==R)&&uO(u,x,g,R),wa=!1;var ne=u.memoizedState;x.state=ne,$f(u,g,x,v),jf(),ee=u.memoizedState,D||ne!==ee||wa?(typeof he=="function"&&(xw(u,p,he,g),ee=u.memoizedState),(V=wa||cO(u,p,V,g,ne,ee,R))?(ae||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(u.flags|=4194308)):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=ee),x.props=g,x.state=ee,x.context=R,g=V):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{x=u.stateNode,Z1(l,u),R=u.memoizedProps,ae=Fl(p,R),x.props=ae,he=u.pendingProps,ne=x.context,ee=p.contextType,V=su,typeof ee=="object"&&ee!==null&&(V=lr(ee)),D=p.getDerivedStateFromProps,(ee=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R!==he||ne!==V)&&uO(u,x,g,V),wa=!1,ne=u.memoizedState,x.state=ne,$f(u,g,x,v),jf();var re=u.memoizedState;R!==he||ne!==re||wa||l!==null&&l.dependencies!==null&&Mg(l.dependencies)?(typeof D=="function"&&(xw(u,p,D,g),re=u.memoizedState),(ae=wa||cO(u,p,ae,g,ne,re,V)||l!==null&&l.dependencies!==null&&Mg(l.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(g,re,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(g,re,V)),typeof x.componentDidUpdate=="function"&&(u.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof x.componentDidUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=re),x.props=g,x.state=re,x.context=V,g=ae):(typeof x.componentDidUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=1024),g=!1)}return x=g,Yg(l,u),g=(u.flags&128)!==0,x||g?(x=u.stateNode,p=g&&typeof p.getDerivedStateFromError!="function"?null:x.render(),u.flags|=1,l!==null&&g?(u.child=mu(u,l.child,null,v),u.child=mu(u,null,p,v)):Vn(l,u,p,v),u.memoizedState=x.state,l=u.child):l=Po(l,u,v),l}function AO(l,u,p,g){return Mf(),u.flags|=256,Vn(l,u,p,g),u.child}var Cw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Aw(l){return{baseLanes:l,cachePool:fM()}}function kw(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=Bi),l}function kO(l,u,p){var g=u.pendingProps,v=!1,x=(u.flags&128)!==0,R;if((R=x)||(R=l!==null&&l.memoizedState===null?!1:(vn.current&2)!==0),R&&(v=!0,u.flags&=-129),R=(u.flags&32)!==0,u.flags&=-33,l===null){if(yt){if(v?Aa(u):ka(),yt){var D=Xt,V;if(V=D){e:{for(V=D,D=Is;V.nodeType!==8;){if(!D){D=null;break e}if(V=us(V.nextSibling),V===null){D=null;break e}}D=V}D!==null?(u.memoizedState={dehydrated:D,treeContext:Dl!==null?{id:ko,overflow:Eo}:null,retryLane:536870912,hydrationErrors:null},V=oi(18,null,null,0),V.stateNode=D,V.return=u,u.child=V,Cr=u,Xt=null,V=!0):V=!1}V||Nl(u)}if(D=u.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return c2(D)?u.lanes=32:u.lanes=536870912,null;Oo(u)}return D=g.children,g=g.fallback,v?(ka(),v=u.mode,D=Xg({mode:"hidden",children:D},v),g=Pl(g,v,p,null),D.return=u,g.return=u,D.sibling=g,u.child=D,v=u.child,v.memoizedState=Aw(p),v.childLanes=kw(l,R,p),u.memoizedState=Cw,g):(Aa(u),Ew(u,D))}if(V=l.memoizedState,V!==null&&(D=V.dehydrated,D!==null)){if(x)u.flags&256?(Aa(u),u.flags&=-257,u=Tw(l,u,p)):u.memoizedState!==null?(ka(),u.child=l.child,u.flags|=128,u=null):(ka(),v=g.fallback,D=u.mode,g=Xg({mode:"visible",children:g.children},D),v=Pl(v,D,p,null),v.flags|=2,g.return=u,v.return=u,g.sibling=v,u.child=g,mu(u,l.child,null,p),g=u.child,g.memoizedState=Aw(p),g.childLanes=kw(l,R,p),u.memoizedState=Cw,u=v);else if(Aa(u),c2(D)){if(R=D.nextSibling&&D.nextSibling.dataset,R)var ee=R.dgst;R=ee,g=Error(r(419)),g.stack="",g.digest=R,Of({value:g,source:null,stack:null}),u=Tw(l,u,p)}else if(On||Pf(l,u,p,!1),R=(p&l.childLanes)!==0,On||R){if(R=Dt,R!==null&&(g=p&-p,g=(g&42)!==0?1:lf(g),g=(g&(R.suspendedLanes|p))!==0?0:g,g!==0&&g!==V.retryLane))throw V.retryLane=g,iu(l,g),hi(R,l,g),yO;D.data==="$?"||Ww(),u=Tw(l,u,p)}else D.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=V.treeContext,Xt=us(D.nextSibling),Cr=u,yt=!0,Il=null,Is=!1,l!==null&&(Li[Ii++]=ko,Li[Ii++]=Eo,Li[Ii++]=Dl,ko=l.id,Eo=l.overflow,Dl=u),u=Ew(u,g.children),u.flags|=4096);return u}return v?(ka(),v=g.fallback,D=u.mode,V=l.child,ee=V.sibling,g=Ao(V,{mode:"hidden",children:g.children}),g.subtreeFlags=V.subtreeFlags&65011712,ee!==null?v=Ao(ee,v):(v=Pl(v,D,p,null),v.flags|=2),v.return=u,g.return=u,g.sibling=v,u.child=g,g=v,v=u.child,D=l.child.memoizedState,D===null?D=Aw(p):(V=D.cachePool,V!==null?(ee=bn._currentValue,V=V.parent!==ee?{parent:ee,pool:ee}:V):V=fM(),D={baseLanes:D.baseLanes|p,cachePool:V}),v.memoizedState=D,v.childLanes=kw(l,R,p),u.memoizedState=Cw,g):(Aa(u),p=l.child,l=p.sibling,p=Ao(p,{mode:"visible",children:g.children}),p.return=u,p.sibling=null,l!==null&&(R=u.deletions,R===null?(u.deletions=[l],u.flags|=16):R.push(l)),u.child=p,u.memoizedState=null,p)}function Ew(l,u){return u=Xg({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Xg(l,u){return l=oi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Tw(l,u,p){return mu(u,l.child,null,p),l=Ew(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function EO(l,u,p){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),W1(l.return,u,p)}function Rw(l,u,p,g,v){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:p,tailMode:v}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=p,x.tailMode=v)}function TO(l,u,p){var g=u.pendingProps,v=g.revealOrder,x=g.tail;if(Vn(l,u,g.children,p),g=vn.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&EO(l,p,u);else if(l.tag===19)EO(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}switch(I(vn,g),v){case"forwards":for(p=u.child,v=null;p!==null;)l=p.alternate,l!==null&&Wg(l)===null&&(v=p),p=p.sibling;p=v,p===null?(v=u.child,u.child=null):(v=p.sibling,p.sibling=null),Rw(u,!1,v,p,x);break;case"backwards":for(p=null,v=u.child,u.child=null;v!==null;){if(l=v.alternate,l!==null&&Wg(l)===null){u.child=v;break}l=v.sibling,v.sibling=p,p=v,v=l}Rw(u,!0,p,null,x);break;case"together":Rw(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Po(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Oa|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(Pf(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,p=Ao(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=Ao(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function Mw(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Mg(l)))}function mG(l,u,p){switch(u.tag){case 3:He(u,u.stateNode.containerInfo),xa(u,bn,l.memoizedState.cache),Mf();break;case 27:case 5:Kt(u);break;case 4:He(u,u.stateNode.containerInfo);break;case 10:xa(u,u.type,u.memoizedProps.value);break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Aa(u),u.flags|=128,null):(p&u.child.childLanes)!==0?kO(l,u,p):(Aa(u),l=Po(l,u,p),l!==null?l.sibling:null);Aa(u);break;case 19:var v=(l.flags&128)!==0;if(g=(p&u.childLanes)!==0,g||(Pf(l,u,p,!1),g=(p&u.childLanes)!==0),v){if(g)return TO(l,u,p);u.flags|=128}if(v=u.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),I(vn,vn.current),g)break;return null;case 22:case 23:return u.lanes=0,wO(l,u,p);case 24:xa(u,bn,l.memoizedState.cache)}return Po(l,u,p)}function RO(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)On=!0;else{if(!Mw(l,p)&&(u.flags&128)===0)return On=!1,mG(l,u,p);On=(l.flags&131072)!==0}else On=!1,yt&&(u.flags&1048576)!==0&&sM(u,Rg,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var g=u.elementType,v=g._init;if(g=v(g._payload),u.type=g,typeof g=="function")$1(g)?(l=Fl(g,l),u.tag=1,u=CO(null,u,g,l,p)):(u.tag=0,u=_w(null,u,g,l,p));else{if(g!=null){if(v=g.$$typeof,v===P){u.tag=11,u=bO(null,u,g,l,p);break e}else if(v===L){u.tag=14,u=vO(null,u,g,l,p);break e}}throw u=G(g)||g,Error(r(306,u,""))}}return u;case 0:return _w(l,u,u.type,u.pendingProps,p);case 1:return g=u.type,v=Fl(g,u.pendingProps),CO(l,u,g,v,p);case 3:e:{if(He(u,u.stateNode.containerInfo),l===null)throw Error(r(387));g=u.pendingProps;var x=u.memoizedState;v=x.element,Z1(l,u),$f(u,g,null,p);var R=u.memoizedState;if(g=R.cache,xa(u,bn,g),g!==x.cache&&G1(u,[bn],p,!0),jf(),g=R.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:R.cache},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){u=AO(l,u,g,p);break e}else if(g!==v){v=Pi(Error(r(424)),u),Of(v),u=AO(l,u,g,p);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Xt=us(l.firstChild),Cr=u,yt=!0,Il=null,Is=!0,p=aO(u,null,g,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Mf(),g===v){u=Po(l,u,p);break e}Vn(l,u,g,p)}u=u.child}return u;case 26:return Yg(l,u),l===null?(p=DP(u.type,null,u.pendingProps,null))?u.memoizedState=p:yt||(p=u.type,l=u.pendingProps,g=u0(ye.current).createElement(p),g[Rn]=u,g[or]=l,zn(g,p,l),on(g),u.stateNode=g):u.memoizedState=DP(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Kt(u),l===null&&yt&&(g=u.stateNode=MP(u.type,u.pendingProps,ye.current),Cr=u,Is=!0,v=Xt,Ia(u.type)?(u2=v,Xt=us(g.firstChild)):Xt=v),Vn(l,u,u.pendingProps.children,p),Yg(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&yt&&((v=g=Xt)&&(g=HG(g,u.type,u.pendingProps,Is),g!==null?(u.stateNode=g,Cr=u,Xt=us(g.firstChild),Is=!1,v=!0):v=!1),v||Nl(u)),Kt(u),v=u.type,x=u.pendingProps,R=l!==null?l.memoizedProps:null,g=x.children,o2(v,x)?g=null:R!==null&&o2(v,R)&&(u.flags|=32),u.memoizedState!==null&&(v=sw(l,u,aG,null,null,p),ad._currentValue=v),Yg(l,u),Vn(l,u,g,p),u.child;case 6:return l===null&&yt&&((l=p=Xt)&&(p=UG(p,u.pendingProps,Is),p!==null?(u.stateNode=p,Cr=u,Xt=null,l=!0):l=!1),l||Nl(u)),null;case 13:return kO(l,u,p);case 4:return He(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=mu(u,null,g,p):Vn(l,u,g,p),u.child;case 11:return bO(l,u,u.type,u.pendingProps,p);case 7:return Vn(l,u,u.pendingProps,p),u.child;case 8:return Vn(l,u,u.pendingProps.children,p),u.child;case 12:return Vn(l,u,u.pendingProps.children,p),u.child;case 10:return g=u.pendingProps,xa(u,u.type,g.value),Vn(l,u,g.children,p),u.child;case 9:return v=u.type._context,g=u.pendingProps.children,jl(u),v=lr(v),g=g(v),u.flags|=1,Vn(l,u,g,p),u.child;case 14:return vO(l,u,u.type,u.pendingProps,p);case 15:return xO(l,u,u.type,u.pendingProps,p);case 19:return TO(l,u,p);case 31:return g=u.pendingProps,p=u.mode,g={mode:g.mode,children:g.children},l===null?(p=Xg(g,p),p.ref=u.ref,u.child=p,p.return=u,u=p):(p=Ao(l.child,g),p.ref=u.ref,u.child=p,p.return=u,u=p),u;case 22:return wO(l,u,p);case 24:return jl(u),g=lr(bn),l===null?(v=X1(),v===null&&(v=Dt,x=K1(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=p),v=x),u.memoizedState={parent:g,cache:v},Q1(u),xa(u,bn,v)):((l.lanes&p)!==0&&(Z1(l,u),$f(u,null,null,p),jf()),v=l.memoizedState,x=u.memoizedState,v.parent!==g?(v={parent:g,cache:g},u.memoizedState=v,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=v),xa(u,bn,g)):(g=x.cache,xa(u,bn,g),g!==v.cache&&G1(u,[bn],p,!0))),Vn(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Do(l){l.flags|=4}function MO(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!jP(u)){if(u=Ni.current,u!==null&&((ct&4194048)===ct?Ns!==null:(ct&62914560)!==ct&&(ct&536870912)===0||u!==Ns))throw Nf=J1,dM;l.flags|=8192}}function Jg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Fc():536870912,l.lanes|=u,vu|=u)}function Wf(l,u){if(!yt)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var g=null;p!==null;)p.alternate!==null&&(g=p),p=p.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Wt(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,g=0;if(u)for(var v=l.child;v!==null;)p|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=l,v=v.sibling;else for(v=l.child;v!==null;)p|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=l,v=v.sibling;return l.subtreeFlags|=g,l.childLanes=p,u}function gG(l,u,p){var g=u.pendingProps;switch(H1(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(u),null;case 1:return Wt(u),null;case 3:return p=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Ro(bn),Pt(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Rf(u)?Do(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,lM())),Wt(u),null;case 26:return p=u.memoizedState,l===null?(Do(u),p!==null?(Wt(u),MO(u,p)):(Wt(u),u.flags&=-16777217)):p?p!==l.memoizedState?(Do(u),Wt(u),MO(u,p)):(Wt(u),u.flags&=-16777217):(l.memoizedProps!==g&&Do(u),Wt(u),u.flags&=-16777217),null;case 27:Yt(u),p=ye.current;var v=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Do(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return Wt(u),null}l=pe.current,Rf(u)?oM(u):(l=MP(v,g,p),u.stateNode=l,Do(u))}return Wt(u),null;case 5:if(Yt(u),p=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Do(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return Wt(u),null}if(l=pe.current,Rf(u))oM(u);else{switch(v=u0(ye.current),l){case 1:l=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=v.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?l.multiple=!0:g.size&&(l.size=g.size);break;default:l=typeof g.is=="string"?v.createElement(p,{is:g.is}):v.createElement(p)}}l[Rn]=u,l[or]=g;e:for(v=u.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break e;for(;v.sibling===null;){if(v.return===null||v.return===u)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}u.stateNode=l;e:switch(zn(l,p,g),p){case"button":case"input":case"select":case"textarea":l=!!g.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Do(u)}}return Wt(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&Do(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(r(166));if(l=ye.current,Rf(u)){if(l=u.stateNode,p=u.memoizedProps,g=null,v=Cr,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}l[Rn]=u,l=!!(l.nodeValue===p||g!==null&&g.suppressHydrationWarning===!0||_P(l.nodeValue,p)),l||Nl(u)}else l=u0(l).createTextNode(g),l[Rn]=u,u.stateNode=l}return Wt(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(v=Rf(u),g!==null&&g.dehydrated!==null){if(l===null){if(!v)throw Error(r(318));if(v=u.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Rn]=u}else Mf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Wt(u),v=!1}else v=lM(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),v=!0;if(!v)return u.flags&256?(Oo(u),u):(Oo(u),null)}if(Oo(u),(u.flags&128)!==0)return u.lanes=p,u;if(p=g!==null,l=l!==null&&l.memoizedState!==null,p){g=u.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var x=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(x=g.memoizedState.cachePool.pool),x!==v&&(g.flags|=2048)}return p!==l&&p&&(u.child.flags|=8192),Jg(u,u.updateQueue),Wt(u),null;case 4:return Pt(),l===null&&t2(u.stateNode.containerInfo),Wt(u),null;case 10:return Ro(u.type),Wt(u),null;case 19:if(ue(vn),v=u.memoizedState,v===null)return Wt(u),null;if(g=(u.flags&128)!==0,x=v.rendering,x===null)if(g)Wf(v,!1);else{if(Jt!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(x=Wg(l),x!==null){for(u.flags|=128,Wf(v,!1),l=x.updateQueue,u.updateQueue=l,Jg(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)iM(p,l),p=p.sibling;return I(vn,vn.current&1|2),u.child}l=l.sibling}v.tail!==null&&nr()>e0&&(u.flags|=128,g=!0,Wf(v,!1),u.lanes=4194304)}else{if(!g)if(l=Wg(x),l!==null){if(u.flags|=128,g=!0,l=l.updateQueue,u.updateQueue=l,Jg(u,l),Wf(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!yt)return Wt(u),null}else 2*nr()-v.renderingStartTime>e0&&p!==536870912&&(u.flags|=128,g=!0,Wf(v,!1),u.lanes=4194304);v.isBackwards?(x.sibling=u.child,u.child=x):(l=v.last,l!==null?l.sibling=x:u.child=x,v.last=x)}return v.tail!==null?(u=v.tail,v.rendering=u,v.tail=u.sibling,v.renderingStartTime=nr(),u.sibling=null,l=vn.current,I(vn,g?l&1|2:l&1),u):(Wt(u),null);case 22:case 23:return Oo(u),rw(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(p&536870912)!==0&&(u.flags&128)===0&&(Wt(u),u.subtreeFlags&6&&(u.flags|=8192)):Wt(u),p=u.updateQueue,p!==null&&Jg(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048),l!==null&&ue($l),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ro(bn),Wt(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function yG(l,u){switch(H1(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ro(bn),Pt(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Yt(u),null;case 13:if(Oo(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Mf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ue(vn),null;case 4:return Pt(),null;case 10:return Ro(u.type),null;case 22:case 23:return Oo(u),rw(),l!==null&&ue($l),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Ro(bn),null;case 25:return null;default:return null}}function OO(l,u){switch(H1(u),u.tag){case 3:Ro(bn),Pt();break;case 26:case 27:case 5:Yt(u);break;case 4:Pt();break;case 13:Oo(u);break;case 19:ue(vn);break;case 10:Ro(u.type);break;case 22:case 23:Oo(u),rw(),l!==null&&ue($l);break;case 24:Ro(bn)}}function Gf(l,u){try{var p=u.updateQueue,g=p!==null?p.lastEffect:null;if(g!==null){var v=g.next;p=v;do{if((p.tag&l)===l){g=void 0;var x=p.create,R=p.inst;g=x(),R.destroy=g}p=p.next}while(p!==v)}}catch(D){Ct(u,u.return,D)}}function Ea(l,u,p){try{var g=u.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var x=v.next;g=x;do{if((g.tag&l)===l){var R=g.inst,D=R.destroy;if(D!==void 0){R.destroy=void 0,v=u;var V=p,ee=D;try{ee()}catch(ae){Ct(v,V,ae)}}}g=g.next}while(g!==x)}}catch(ae){Ct(u,u.return,ae)}}function PO(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{vM(u,p)}catch(g){Ct(l,l.return,g)}}}function DO(l,u,p){p.props=Fl(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(g){Ct(l,u,g)}}function Kf(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof p=="function"?l.refCleanup=p(g):p.current=g}}catch(v){Ct(l,u,v)}}function Bs(l,u){var p=l.ref,g=l.refCleanup;if(p!==null)if(typeof g=="function")try{g()}catch(v){Ct(l,u,v)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(v){Ct(l,u,v)}else p.current=null}function LO(l){var u=l.type,p=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&g.focus();break e;case"img":p.src?g.src=p.src:p.srcSet&&(g.srcset=p.srcSet)}}catch(v){Ct(l,l.return,v)}}function Ow(l,u,p){try{var g=l.stateNode;jG(g,l.type,p,u),g[or]=u}catch(v){Ct(l,l.return,v)}}function IO(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ia(l.type)||l.tag===4}function Pw(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||IO(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ia(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Dw(l,u,p){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(l),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=c0));else if(g!==4&&(g===27&&Ia(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(Dw(l,u,p),l=l.sibling;l!==null;)Dw(l,u,p),l=l.sibling}function Qg(l,u,p){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?p.insertBefore(l,u):p.appendChild(l);else if(g!==4&&(g===27&&Ia(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Qg(l,u,p),l=l.sibling;l!==null;)Qg(l,u,p),l=l.sibling}function NO(l){var u=l.stateNode,p=l.memoizedProps;try{for(var g=l.type,v=u.attributes;v.length;)u.removeAttributeNode(v[0]);zn(u,g,p),u[Rn]=l,u[or]=p}catch(x){Ct(l,l.return,x)}}var Lo=!1,tn=!1,Lw=!1,BO=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function bG(l,u){if(l=l.containerInfo,i2=g0,l=KR(l),P1(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var g=p.getSelection&&p.getSelection();if(g&&g.rangeCount!==0){p=g.anchorNode;var v=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{p.nodeType,x.nodeType}catch{p=null;break e}var R=0,D=-1,V=-1,ee=0,ae=0,he=l,ne=null;t:for(;;){for(var re;he!==p||v!==0&&he.nodeType!==3||(D=R+v),he!==x||g!==0&&he.nodeType!==3||(V=R+g),he.nodeType===3&&(R+=he.nodeValue.length),(re=he.firstChild)!==null;)ne=he,he=re;for(;;){if(he===l)break t;if(ne===p&&++ee===v&&(D=R),ne===x&&++ae===g&&(V=R),(re=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=re}p=D===-1||V===-1?null:{start:D,end:V}}else p=null}p=p||{start:0,end:0}}else p=null;for(s2={focusedElem:l,selectionRange:p},g0=!1,Pn=u;Pn!==null;)if(u=Pn,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Pn=l;else for(;Pn!==null;){switch(u=Pn,x=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&x!==null){l=void 0,p=u,v=x.memoizedProps,x=x.memoizedState,g=p.stateNode;try{var qe=Fl(p.type,v,p.elementType===p.type);l=g.getSnapshotBeforeUpdate(qe,x),g.__reactInternalSnapshotBeforeUpdate=l}catch($e){Ct(p,p.return,$e)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,p=l.nodeType,p===9)l2(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":l2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Pn=l;break}Pn=u.return}}function jO(l,u,p){var g=p.flags;switch(p.tag){case 0:case 11:case 15:Ta(l,p),g&4&&Gf(5,p);break;case 1:if(Ta(l,p),g&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(R){Ct(p,p.return,R)}else{var v=Fl(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(v,u,l.__reactInternalSnapshotBeforeUpdate)}catch(R){Ct(p,p.return,R)}}g&64&&PO(p),g&512&&Kf(p,p.return);break;case 3:if(Ta(l,p),g&64&&(l=p.updateQueue,l!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{vM(l,u)}catch(R){Ct(p,p.return,R)}}break;case 27:u===null&&g&4&&NO(p);case 26:case 5:Ta(l,p),u===null&&g&4&&LO(p),g&512&&Kf(p,p.return);break;case 12:Ta(l,p);break;case 13:Ta(l,p),g&4&&FO(l,p),g&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=EG.bind(null,p),qG(l,p))));break;case 22:if(g=p.memoizedState!==null||Lo,!g){u=u!==null&&u.memoizedState!==null||tn,v=Lo;var x=tn;Lo=g,(tn=u)&&!x?Ra(l,p,(p.subtreeFlags&8772)!==0):Ta(l,p),Lo=v,tn=x}break;case 30:break;default:Ta(l,p)}}function $O(l){var u=l.alternate;u!==null&&(l.alternate=null,$O(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&ff(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var $t=null,Fr=!1;function Io(l,u,p){for(p=p.child;p!==null;)VO(l,u,p),p=p.sibling}function VO(l,u,p){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(oe,p)}catch{}switch(p.tag){case 26:tn||Bs(p,u),Io(l,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:tn||Bs(p,u);var g=$t,v=Fr;Ia(p.type)&&($t=p.stateNode,Fr=!1),Io(l,u,p),rd(p.stateNode),$t=g,Fr=v;break;case 5:tn||Bs(p,u);case 6:if(g=$t,v=Fr,$t=null,Io(l,u,p),$t=g,Fr=v,$t!==null)if(Fr)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(p.stateNode)}catch(x){Ct(p,u,x)}else try{$t.removeChild(p.stateNode)}catch(x){Ct(p,u,x)}break;case 18:$t!==null&&(Fr?(l=$t,TP(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),hd(l)):TP($t,p.stateNode));break;case 4:g=$t,v=Fr,$t=p.stateNode.containerInfo,Fr=!0,Io(l,u,p),$t=g,Fr=v;break;case 0:case 11:case 14:case 15:tn||Ea(2,p,u),tn||Ea(4,p,u),Io(l,u,p);break;case 1:tn||(Bs(p,u),g=p.stateNode,typeof g.componentWillUnmount=="function"&&DO(p,u,g)),Io(l,u,p);break;case 21:Io(l,u,p);break;case 22:tn=(g=tn)||p.memoizedState!==null,Io(l,u,p),tn=g;break;default:Io(l,u,p)}}function FO(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{hd(l)}catch(p){Ct(u,u.return,p)}}function vG(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new BO),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new BO),u;default:throw Error(r(435,l.tag))}}function Iw(l,u){var p=vG(l);u.forEach(function(g){var v=TG.bind(null,l,g);p.has(g)||(p.add(g),g.then(v,v))})}function ai(l,u){var p=u.deletions;if(p!==null)for(var g=0;g<p.length;g++){var v=p[g],x=l,R=u,D=R;e:for(;D!==null;){switch(D.tag){case 27:if(Ia(D.type)){$t=D.stateNode,Fr=!1;break e}break;case 5:$t=D.stateNode,Fr=!1;break e;case 3:case 4:$t=D.stateNode.containerInfo,Fr=!0;break e}D=D.return}if($t===null)throw Error(r(160));VO(x,R,v),$t=null,Fr=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)zO(u,l),u=u.sibling}var cs=null;function zO(l,u){var p=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ai(u,l),li(l),g&4&&(Ea(3,l,l.return),Gf(3,l),Ea(5,l,l.return));break;case 1:ai(u,l),li(l),g&512&&(tn||p===null||Bs(p,p.return)),g&64&&Lo&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?g:p.concat(g))));break;case 26:var v=cs;if(ai(u,l),li(l),g&512&&(tn||p===null||Bs(p,p.return)),g&4){var x=p!==null?p.memoizedState:null;if(g=l.memoizedState,p===null)if(g===null)if(l.stateNode===null){e:{g=l.type,p=l.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":x=v.getElementsByTagName("title")[0],(!x||x[Tl]||x[Rn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(g),v.head.insertBefore(x,v.querySelector("head > title"))),zn(x,g,p),x[Rn]=l,on(x),g=x;break e;case"link":var R=NP("link","href",v).get(g+(p.href||""));if(R){for(var D=0;D<R.length;D++)if(x=R[D],x.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&x.getAttribute("rel")===(p.rel==null?null:p.rel)&&x.getAttribute("title")===(p.title==null?null:p.title)&&x.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){R.splice(D,1);break t}}x=v.createElement(g),zn(x,g,p),v.head.appendChild(x);break;case"meta":if(R=NP("meta","content",v).get(g+(p.content||""))){for(D=0;D<R.length;D++)if(x=R[D],x.getAttribute("content")===(p.content==null?null:""+p.content)&&x.getAttribute("name")===(p.name==null?null:p.name)&&x.getAttribute("property")===(p.property==null?null:p.property)&&x.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&x.getAttribute("charset")===(p.charSet==null?null:p.charSet)){R.splice(D,1);break t}}x=v.createElement(g),zn(x,g,p),v.head.appendChild(x);break;default:throw Error(r(468,g))}x[Rn]=l,on(x),g=x}l.stateNode=g}else BP(v,l.type,l.stateNode);else l.stateNode=IP(v,g,l.memoizedProps);else x!==g?(x===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):x.count--,g===null?BP(v,l.type,l.stateNode):IP(v,g,l.memoizedProps)):g===null&&l.stateNode!==null&&Ow(l,l.memoizedProps,p.memoizedProps)}break;case 27:ai(u,l),li(l),g&512&&(tn||p===null||Bs(p,p.return)),p!==null&&g&4&&Ow(l,l.memoizedProps,p.memoizedProps);break;case 5:if(ai(u,l),li(l),g&512&&(tn||p===null||Bs(p,p.return)),l.flags&32){v=l.stateNode;try{ri(v,"")}catch(re){Ct(l,l.return,re)}}g&4&&l.stateNode!=null&&(v=l.memoizedProps,Ow(l,v,p!==null?p.memoizedProps:v)),g&1024&&(Lw=!0);break;case 6:if(ai(u,l),li(l),g&4){if(l.stateNode===null)throw Error(r(162));g=l.memoizedProps,p=l.stateNode;try{p.nodeValue=g}catch(re){Ct(l,l.return,re)}}break;case 3:if(d0=null,v=cs,cs=h0(u.containerInfo),ai(u,l),cs=v,li(l),g&4&&p!==null&&p.memoizedState.isDehydrated)try{hd(u.containerInfo)}catch(re){Ct(l,l.return,re)}Lw&&(Lw=!1,HO(l));break;case 4:g=cs,cs=h0(l.stateNode.containerInfo),ai(u,l),li(l),cs=g;break;case 12:ai(u,l),li(l);break;case 13:ai(u,l),li(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Fw=nr()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Iw(l,g)));break;case 22:v=l.memoizedState!==null;var V=p!==null&&p.memoizedState!==null,ee=Lo,ae=tn;if(Lo=ee||v,tn=ae||V,ai(u,l),tn=ae,Lo=ee,li(l),g&8192)e:for(u=l.stateNode,u._visibility=v?u._visibility&-2:u._visibility|1,v&&(p===null||V||Lo||tn||zl(l)),p=null,u=l;;){if(u.tag===5||u.tag===26){if(p===null){V=p=u;try{if(x=V.stateNode,v)R=x.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{D=V.stateNode;var he=V.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){Ct(V,V.return,re)}}}else if(u.tag===6){if(p===null){V=u;try{V.stateNode.nodeValue=v?"":V.memoizedProps}catch(re){Ct(V,V.return,re)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(p=g.retryQueue,p!==null&&(g.retryQueue=null,Iw(l,p))));break;case 19:ai(u,l),li(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Iw(l,g)));break;case 30:break;case 21:break;default:ai(u,l),li(l)}}function li(l){var u=l.flags;if(u&2){try{for(var p,g=l.return;g!==null;){if(IO(g)){p=g;break}g=g.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var v=p.stateNode,x=Pw(l);Qg(l,x,v);break;case 5:var R=p.stateNode;p.flags&32&&(ri(R,""),p.flags&=-33);var D=Pw(l);Qg(l,D,R);break;case 3:case 4:var V=p.stateNode.containerInfo,ee=Pw(l);Dw(l,ee,V);break;default:throw Error(r(161))}}catch(ae){Ct(l,l.return,ae)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function HO(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;HO(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ta(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)jO(l,u.alternate,u),u=u.sibling}function zl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Ea(4,u,u.return),zl(u);break;case 1:Bs(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&DO(u,u.return,p),zl(u);break;case 27:rd(u.stateNode);case 26:case 5:Bs(u,u.return),zl(u);break;case 22:u.memoizedState===null&&zl(u);break;case 30:zl(u);break;default:zl(u)}l=l.sibling}}function Ra(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,v=l,x=u,R=x.flags;switch(x.tag){case 0:case 11:case 15:Ra(v,x,p),Gf(4,x);break;case 1:if(Ra(v,x,p),g=x,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ee){Ct(g,g.return,ee)}if(g=x,v=g.updateQueue,v!==null){var D=g.stateNode;try{var V=v.shared.hiddenCallbacks;if(V!==null)for(v.shared.hiddenCallbacks=null,v=0;v<V.length;v++)bM(V[v],D)}catch(ee){Ct(g,g.return,ee)}}p&&R&64&&PO(x),Kf(x,x.return);break;case 27:NO(x);case 26:case 5:Ra(v,x,p),p&&g===null&&R&4&&LO(x),Kf(x,x.return);break;case 12:Ra(v,x,p);break;case 13:Ra(v,x,p),p&&R&4&&FO(v,x);break;case 22:x.memoizedState===null&&Ra(v,x,p),Kf(x,x.return);break;case 30:break;default:Ra(v,x,p)}u=u.sibling}}function Nw(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Df(p))}function Bw(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Df(l))}function js(l,u,p,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)UO(l,u,p,g),u=u.sibling}function UO(l,u,p,g){var v=u.flags;switch(u.tag){case 0:case 11:case 15:js(l,u,p,g),v&2048&&Gf(9,u);break;case 1:js(l,u,p,g);break;case 3:js(l,u,p,g),v&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Df(l)));break;case 12:if(v&2048){js(l,u,p,g),l=u.stateNode;try{var x=u.memoizedProps,R=x.id,D=x.onPostCommit;typeof D=="function"&&D(R,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(V){Ct(u,u.return,V)}}else js(l,u,p,g);break;case 13:js(l,u,p,g);break;case 23:break;case 22:x=u.stateNode,R=u.alternate,u.memoizedState!==null?x._visibility&2?js(l,u,p,g):Yf(l,u):x._visibility&2?js(l,u,p,g):(x._visibility|=2,gu(l,u,p,g,(u.subtreeFlags&10256)!==0)),v&2048&&Nw(R,u);break;case 24:js(l,u,p,g),v&2048&&Bw(u.alternate,u);break;default:js(l,u,p,g)}}function gu(l,u,p,g,v){for(v=v&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var x=l,R=u,D=p,V=g,ee=R.flags;switch(R.tag){case 0:case 11:case 15:gu(x,R,D,V,v),Gf(8,R);break;case 23:break;case 22:var ae=R.stateNode;R.memoizedState!==null?ae._visibility&2?gu(x,R,D,V,v):Yf(x,R):(ae._visibility|=2,gu(x,R,D,V,v)),v&&ee&2048&&Nw(R.alternate,R);break;case 24:gu(x,R,D,V,v),v&&ee&2048&&Bw(R.alternate,R);break;default:gu(x,R,D,V,v)}u=u.sibling}}function Yf(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,g=u,v=g.flags;switch(g.tag){case 22:Yf(p,g),v&2048&&Nw(g.alternate,g);break;case 24:Yf(p,g),v&2048&&Bw(g.alternate,g);break;default:Yf(p,g)}u=u.sibling}}var Xf=8192;function yu(l){if(l.subtreeFlags&Xf)for(l=l.child;l!==null;)qO(l),l=l.sibling}function qO(l){switch(l.tag){case 26:yu(l),l.flags&Xf&&l.memoizedState!==null&&iK(cs,l.memoizedState,l.memoizedProps);break;case 5:yu(l);break;case 3:case 4:var u=cs;cs=h0(l.stateNode.containerInfo),yu(l),cs=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Xf,Xf=16777216,yu(l),Xf=u):yu(l));break;default:yu(l)}}function WO(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Jf(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];Pn=g,KO(g,l)}WO(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)GO(l),l=l.sibling}function GO(l){switch(l.tag){case 0:case 11:case 15:Jf(l),l.flags&2048&&Ea(9,l,l.return);break;case 3:Jf(l);break;case 12:Jf(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Zg(l)):Jf(l);break;default:Jf(l)}}function Zg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];Pn=g,KO(g,l)}WO(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Ea(8,u,u.return),Zg(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Zg(u));break;default:Zg(u)}l=l.sibling}}function KO(l,u){for(;Pn!==null;){var p=Pn;switch(p.tag){case 0:case 11:case 15:Ea(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var g=p.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Df(p.memoizedState.cache)}if(g=p.child,g!==null)g.return=p,Pn=g;else e:for(p=l;Pn!==null;){g=Pn;var v=g.sibling,x=g.return;if($O(g),g===p){Pn=null;break e}if(v!==null){v.return=x,Pn=v;break e}Pn=x}}}var xG={getCacheForType:function(l){var u=lr(bn),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p}},wG=typeof WeakMap=="function"?WeakMap:Map,bt=0,Dt=null,ot=null,ct=0,vt=0,ci=null,Ma=!1,bu=!1,jw=!1,No=0,Jt=0,Oa=0,Hl=0,$w=0,Bi=0,vu=0,Qf=null,zr=null,Vw=!1,Fw=0,e0=1/0,t0=null,Pa=null,Fn=0,Da=null,xu=null,wu=0,zw=0,Hw=null,YO=null,Zf=0,Uw=null;function ui(){if((bt&2)!==0&&ct!==0)return ct&-ct;if(F.T!==null){var l=lu;return l!==0?l:Jw()}return uf()}function XO(){Bi===0&&(Bi=(ct&536870912)===0||yt?Vc():536870912);var l=Ni.current;return l!==null&&(l.flags|=32),Bi}function hi(l,u,p){(l===Dt&&(vt===2||vt===9)||l.cancelPendingCommit!==null)&&(Su(l,0),La(l,ct,Bi,!1)),is(l,p),((bt&2)===0||l!==Dt)&&(l===Dt&&((bt&2)===0&&(Hl|=p),Jt===4&&La(l,ct,Bi,!1)),$s(l))}function JO(l,u,p){if((bt&6)!==0)throw Error(r(327));var g=!p&&(u&124)===0&&(u&l.expiredLanes)===0||ir(l,u),v=g?CG(l,u):Gw(l,u,!0),x=g;do{if(v===0){bu&&!g&&La(l,u,0,!1);break}else{if(p=l.current.alternate,x&&!SG(p)){v=Gw(l,u,!1),x=!1;continue}if(v===2){if(x=u,l.errorRecoveryDisabledLanes&x)var R=0;else R=l.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){u=R;e:{var D=l;v=Qf;var V=D.current.memoizedState.isDehydrated;if(V&&(Su(D,R).flags|=256),R=Gw(D,R,!1),R!==2){if(jw&&!V){D.errorRecoveryDisabledLanes|=x,Hl|=x,v=4;break e}x=zr,zr=v,x!==null&&(zr===null?zr=x:zr.push.apply(zr,x))}v=R}if(x=!1,v!==2)continue}}if(v===1){Su(l,0),La(l,u,0,!0);break}e:{switch(g=l,x=v,x){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:La(g,u,Bi,!Ma);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(v=Fw+300-nr(),10<v)){if(La(g,u,Bi,!Ma),sn(g,0,!0)!==0)break e;g.timeoutHandle=kP(QO.bind(null,g,p,zr,t0,Vw,u,Bi,Hl,vu,Ma,x,2,-0,0),v);break e}QO(g,p,zr,t0,Vw,u,Bi,Hl,vu,Ma,x,0,-0,0)}}break}while(!0);$s(l)}function QO(l,u,p,g,v,x,R,D,V,ee,ae,he,ne,re){if(l.timeoutHandle=-1,he=u.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(od={stylesheets:null,count:0,unsuspend:rK},qO(u),he=sK(),he!==null)){l.cancelPendingCommit=he(sP.bind(null,l,u,x,p,g,v,R,D,V,ae,1,ne,re)),La(l,x,R,!ee);return}sP(l,u,x,p,g,v,R,D,V)}function SG(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var g=0;g<p.length;g++){var v=p[g],x=v.getSnapshot;v=v.value;try{if(!si(x(),v))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function La(l,u,p,g){u&=~$w,u&=~Hl,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var v=u;0<v;){var x=31-Be(v),R=1<<x;g[x]=-1,v&=~R}p!==0&&sg(l,p,u)}function n0(){return(bt&6)===0?(ed(0),!1):!0}function qw(){if(ot!==null){if(vt===0)var l=ot.return;else l=ot,To=Bl=null,lw(l),pu=null,Uf=0,l=ot;for(;l!==null;)OO(l.alternate,l),l=l.return;ot=null}}function Su(l,u){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,VG(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),qw(),Dt=l,ot=p=Ao(l.current,null),ct=u,vt=0,ci=null,Ma=!1,bu=ir(l,u),jw=!1,vu=Bi=$w=Hl=Oa=Jt=0,zr=Qf=null,Vw=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var v=31-Be(g),x=1<<v;u|=l[v],g&=~x}return No=u,Cg(),p}function ZO(l,u){et=null,F.H=Hg,u===If||u===Dg?(u=gM(),vt=3):u===dM?(u=gM(),vt=4):vt=u===yO?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ci=u,ot===null&&(Jt=1,Kg(l,Pi(u,l.current)))}function eP(){var l=F.H;return F.H=Hg,l===null?Hg:l}function tP(){var l=F.A;return F.A=xG,l}function Ww(){Jt=4,Ma||(ct&4194048)!==ct&&Ni.current!==null||(bu=!0),(Oa&134217727)===0&&(Hl&134217727)===0||Dt===null||La(Dt,ct,Bi,!1)}function Gw(l,u,p){var g=bt;bt|=2;var v=eP(),x=tP();(Dt!==l||ct!==u)&&(t0=null,Su(l,u)),u=!1;var R=Jt;e:do try{if(vt!==0&&ot!==null){var D=ot,V=ci;switch(vt){case 8:qw(),R=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(u=!0);var ee=vt;if(vt=0,ci=null,_u(l,D,V,ee),p&&bu){R=0;break e}break;default:ee=vt,vt=0,ci=null,_u(l,D,V,ee)}}_G(),R=Jt;break}catch(ae){ZO(l,ae)}while(!0);return u&&l.shellSuspendCounter++,To=Bl=null,bt=g,F.H=v,F.A=x,ot===null&&(Dt=null,ct=0,Cg()),R}function _G(){for(;ot!==null;)nP(ot)}function CG(l,u){var p=bt;bt|=2;var g=eP(),v=tP();Dt!==l||ct!==u?(t0=null,e0=nr()+500,Su(l,u)):bu=ir(l,u);e:do try{if(vt!==0&&ot!==null){u=ot;var x=ci;t:switch(vt){case 1:vt=0,ci=null,_u(l,u,x,1);break;case 2:case 9:if(pM(x)){vt=0,ci=null,rP(u);break}u=function(){vt!==2&&vt!==9||Dt!==l||(vt=7),$s(l)},x.then(u,u);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:pM(x)?(vt=0,ci=null,rP(u)):(vt=0,ci=null,_u(l,u,x,7));break;case 5:var R=null;switch(ot.tag){case 26:R=ot.memoizedState;case 5:case 27:var D=ot;if(!R||jP(R)){vt=0,ci=null;var V=D.sibling;if(V!==null)ot=V;else{var ee=D.return;ee!==null?(ot=ee,r0(ee)):ot=null}break t}}vt=0,ci=null,_u(l,u,x,5);break;case 6:vt=0,ci=null,_u(l,u,x,6);break;case 8:qw(),Jt=6;break e;default:throw Error(r(462))}}AG();break}catch(ae){ZO(l,ae)}while(!0);return To=Bl=null,F.H=g,F.A=v,bt=p,ot!==null?0:(Dt=null,ct=0,Cg(),Jt)}function AG(){for(;ot!==null&&!_o();)nP(ot)}function nP(l){var u=RO(l.alternate,l,No);l.memoizedProps=l.pendingProps,u===null?r0(l):ot=u}function rP(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=_O(p,u,u.pendingProps,u.type,void 0,ct);break;case 11:u=_O(p,u,u.pendingProps,u.type.render,u.ref,ct);break;case 5:lw(u);default:OO(p,u),u=ot=iM(u,No),u=RO(p,u,No)}l.memoizedProps=l.pendingProps,u===null?r0(l):ot=u}function _u(l,u,p,g){To=Bl=null,lw(u),pu=null,Uf=0;var v=u.return;try{if(pG(l,v,u,p,ct)){Jt=1,Kg(l,Pi(p,l.current)),ot=null;return}}catch(x){if(v!==null)throw ot=v,x;Jt=1,Kg(l,Pi(p,l.current)),ot=null;return}u.flags&32768?(yt||g===1?l=!0:bu||(ct&536870912)!==0?l=!1:(Ma=l=!0,(g===2||g===9||g===3||g===6)&&(g=Ni.current,g!==null&&g.tag===13&&(g.flags|=16384))),iP(u,l)):r0(u)}function r0(l){var u=l;do{if((u.flags&32768)!==0){iP(u,Ma);return}l=u.return;var p=gG(u.alternate,u,No);if(p!==null){ot=p;return}if(u=u.sibling,u!==null){ot=u;return}ot=u=l}while(u!==null);Jt===0&&(Jt=5)}function iP(l,u){do{var p=yG(l.alternate,l);if(p!==null){p.flags&=32767,ot=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){ot=l;return}ot=l=p}while(l!==null);Jt=6,ot=null}function sP(l,u,p,g,v,x,R,D,V){l.cancelPendingCommit=null;do i0();while(Fn!==0);if((bt&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(x=u.lanes|u.childLanes,x|=B1,x1(l,p,x,R,D,V),l===Dt&&(ot=Dt=null,ct=0),xu=u,Da=l,wu=p,zw=x,Hw=v,YO=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,RG(Os,function(){return uP(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=F.T,F.T=null,v=Y.p,Y.p=2,R=bt,bt|=4;try{bG(l,u,p)}finally{bt=R,Y.p=v,F.T=g}}Fn=1,oP(),aP(),lP()}}function oP(){if(Fn===1){Fn=0;var l=Da,u=xu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=F.T,F.T=null;var g=Y.p;Y.p=2;var v=bt;bt|=4;try{zO(u,l);var x=s2,R=KR(l.containerInfo),D=x.focusedElem,V=x.selectionRange;if(R!==D&&D&&D.ownerDocument&&GR(D.ownerDocument.documentElement,D)){if(V!==null&&P1(D)){var ee=V.start,ae=V.end;if(ae===void 0&&(ae=ee),"selectionStart"in D)D.selectionStart=ee,D.selectionEnd=Math.min(ae,D.value.length);else{var he=D.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),qe=D.textContent.length,$e=Math.min(V.start,qe),St=V.end===void 0?$e:Math.min(V.end,qe);!re.extend&&$e>St&&(R=St,St=$e,$e=R);var K=WR(D,$e),H=WR(D,St);if(K&&H&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==H.node||re.focusOffset!==H.offset)){var J=he.createRange();J.setStart(K.node,K.offset),re.removeAllRanges(),$e>St?(re.addRange(J),re.extend(H.node,H.offset)):(J.setEnd(H.node,H.offset),re.addRange(J))}}}}for(he=[],re=D;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<he.length;D++){var ce=he[D];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}g0=!!i2,s2=i2=null}finally{bt=v,Y.p=g,F.T=p}}l.current=u,Fn=2}}function aP(){if(Fn===2){Fn=0;var l=Da,u=xu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=F.T,F.T=null;var g=Y.p;Y.p=2;var v=bt;bt|=4;try{jO(l,u.alternate,u)}finally{bt=v,Y.p=g,F.T=p}}Fn=3}}function lP(){if(Fn===4||Fn===3){Fn=0,ns();var l=Da,u=xu,p=wu,g=YO;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Fn=5:(Fn=0,xu=Da=null,cP(l,l.pendingLanes));var v=l.pendingLanes;if(v===0&&(Pa=null),cf(p),u=u.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(oe,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=F.T,v=Y.p,Y.p=2,F.T=null;try{for(var x=l.onRecoverableError,R=0;R<g.length;R++){var D=g[R];x(D.value,{componentStack:D.stack})}}finally{F.T=u,Y.p=v}}(wu&3)!==0&&i0(),$s(l),v=l.pendingLanes,(p&4194090)!==0&&(v&42)!==0?l===Uw?Zf++:(Zf=0,Uw=l):Zf=0,ed(0)}}function cP(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Df(u)))}function i0(l){return oP(),aP(),lP(),uP()}function uP(){if(Fn!==5)return!1;var l=Da,u=zw;zw=0;var p=cf(wu),g=F.T,v=Y.p;try{Y.p=32>p?32:p,F.T=null,p=Hw,Hw=null;var x=Da,R=wu;if(Fn=0,xu=Da=null,wu=0,(bt&6)!==0)throw Error(r(331));var D=bt;if(bt|=4,GO(x.current),UO(x,x.current,R,p),bt=D,ed(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(oe,x)}catch{}return!0}finally{Y.p=v,F.T=g,cP(l,u)}}function hP(l,u,p){u=Pi(p,u),u=Sw(l.stateNode,u,2),l=_a(l,u,2),l!==null&&(is(l,2),$s(l))}function Ct(l,u,p){if(l.tag===3)hP(l,l,p);else for(;u!==null;){if(u.tag===3){hP(u,l,p);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Pa===null||!Pa.has(g))){l=Pi(p,l),p=mO(2),g=_a(u,p,2),g!==null&&(gO(p,g,u,l),is(g,2),$s(g));break}}u=u.return}}function Kw(l,u,p){var g=l.pingCache;if(g===null){g=l.pingCache=new wG;var v=new Set;g.set(u,v)}else v=g.get(u),v===void 0&&(v=new Set,g.set(u,v));v.has(p)||(jw=!0,v.add(p),l=kG.bind(null,l,u,p),u.then(l,l))}function kG(l,u,p){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Dt===l&&(ct&p)===p&&(Jt===4||Jt===3&&(ct&62914560)===ct&&300>nr()-Fw?(bt&2)===0&&Su(l,0):$w|=p,vu===ct&&(vu=0)),$s(l)}function fP(l,u){u===0&&(u=Fc()),l=iu(l,u),l!==null&&(is(l,u),$s(l))}function EG(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),fP(l,p)}function TG(l,u){var p=0;switch(l.tag){case 13:var g=l.stateNode,v=l.memoizedState;v!==null&&(p=v.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(u),fP(l,p)}function RG(l,u){return tr(l,u)}var s0=null,Cu=null,Yw=!1,o0=!1,Xw=!1,Ul=0;function $s(l){l!==Cu&&l.next===null&&(Cu===null?s0=Cu=l:Cu=Cu.next=l),o0=!0,Yw||(Yw=!0,OG())}function ed(l,u){if(!Xw&&o0){Xw=!0;do for(var p=!1,g=s0;g!==null;){if(l!==0){var v=g.pendingLanes;if(v===0)var x=0;else{var R=g.suspendedLanes,D=g.pingedLanes;x=(1<<31-Be(42|l)+1)-1,x&=v&~(R&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(p=!0,gP(g,x))}else x=ct,x=sn(g,g===Dt?x:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(x&3)===0||ir(g,x)||(p=!0,gP(g,x));g=g.next}while(p);Xw=!1}}function MG(){dP()}function dP(){o0=Yw=!1;var l=0;Ul!==0&&($G()&&(l=Ul),Ul=0);for(var u=nr(),p=null,g=s0;g!==null;){var v=g.next,x=pP(g,u);x===0?(g.next=null,p===null?s0=v:p.next=v,v===null&&(Cu=p)):(p=g,(l!==0||(x&3)!==0)&&(o0=!0)),g=v}ed(l)}function pP(l,u){for(var p=l.suspendedLanes,g=l.pingedLanes,v=l.expirationTimes,x=l.pendingLanes&-62914561;0<x;){var R=31-Be(x),D=1<<R,V=v[R];V===-1?((D&p)===0||(D&g)!==0)&&(v[R]=$n(D,u)):V<=u&&(l.expiredLanes|=D),x&=~D}if(u=Dt,p=ct,p=sn(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,p===0||l===u&&(vt===2||vt===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&ei(g),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||ir(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(g!==null&&ei(g),cf(p)){case 2:case 8:p=Ms;break;case 32:p=Os;break;case 268435456:p=kl;break;default:p=Os}return g=mP.bind(null,l),p=tr(p,g),l.callbackPriority=u,l.callbackNode=p,u}return g!==null&&g!==null&&ei(g),l.callbackPriority=2,l.callbackNode=null,2}function mP(l,u){if(Fn!==0&&Fn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(i0()&&l.callbackNode!==p)return null;var g=ct;return g=sn(l,l===Dt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(JO(l,g,u),pP(l,nr()),l.callbackNode!=null&&l.callbackNode===p?mP.bind(null,l):null)}function gP(l,u){if(i0())return null;JO(l,u,!0)}function OG(){FG(function(){(bt&6)!==0?tr(Al,MG):dP()})}function Jw(){return Ul===0&&(Ul=Vc()),Ul}function yP(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Gc(""+l)}function bP(l,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,l.id&&p.setAttribute("form",l.id),u.parentNode.insertBefore(p,u),l=new FormData(l),p.parentNode.removeChild(p),l}function PG(l,u,p,g,v){if(u==="submit"&&p&&p.stateNode===v){var x=yP((v[or]||null).action),R=g.submitter;R&&(u=(u=R[or]||null)?yP(u.formAction):R.getAttribute("formAction"),u!==null&&(x=u,R=null));var D=new Oe("action","action",null,g,v);l.push({event:D,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Ul!==0){var V=R?bP(v,R):new FormData(v);yw(p,{pending:!0,data:V,method:v.method,action:x},null,V)}}else typeof x=="function"&&(D.preventDefault(),V=R?bP(v,R):new FormData(v),yw(p,{pending:!0,data:V,method:v.method,action:x},x,V))},currentTarget:v}]})}}for(var Qw=0;Qw<N1.length;Qw++){var Zw=N1[Qw],DG=Zw.toLowerCase(),LG=Zw[0].toUpperCase()+Zw.slice(1);ls(DG,"on"+LG)}ls(JR,"onAnimationEnd"),ls(QR,"onAnimationIteration"),ls(ZR,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(JW,"onTransitionRun"),ls(QW,"onTransitionStart"),ls(ZW,"onTransitionCancel"),ls(eM,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Co("onBeforeInput",["compositionend","keypress","textInput","paste"]),Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(td));function vP(l,u){u=(u&4)!==0;for(var p=0;p<l.length;p++){var g=l[p],v=g.event;g=g.listeners;e:{var x=void 0;if(u)for(var R=g.length-1;0<=R;R--){var D=g[R],V=D.instance,ee=D.currentTarget;if(D=D.listener,V!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=ee;try{x(v)}catch(ae){Gg(ae)}v.currentTarget=null,x=V}else for(R=0;R<g.length;R++){if(D=g[R],V=D.instance,ee=D.currentTarget,D=D.listener,V!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=ee;try{x(v)}catch(ae){Gg(ae)}v.currentTarget=null,x=V}}}}function at(l,u){var p=u[hf];p===void 0&&(p=u[hf]=new Set);var g=l+"__bubble";p.has(g)||(xP(u,l,2,!1),p.add(g))}function e2(l,u,p){var g=0;u&&(g|=4),xP(p,l,g,u)}var a0="_reactListening"+Math.random().toString(36).slice(2);function t2(l){if(!l[a0]){l[a0]=!0,cg.forEach(function(p){p!=="selectionchange"&&(IG.has(p)||e2(p,!1,l),e2(p,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[a0]||(u[a0]=!0,e2("selectionchange",!1,u))}}function xP(l,u,p,g){switch(UP(u)){case 2:var v=lK;break;case 8:v=cK;break;default:v=m2}p=v.bind(null,u,p,l),v=void 0,!wf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(v=!0),g?v!==void 0?l.addEventListener(u,p,{capture:!0,passive:v}):l.addEventListener(u,p,!0):v!==void 0?l.addEventListener(u,p,{passive:v}):l.addEventListener(u,p,!1)}function n2(l,u,p,g,v){var x=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var R=g.tag;if(R===3||R===4){var D=g.stateNode.containerInfo;if(D===v)break;if(R===4)for(R=g.return;R!==null;){var V=R.tag;if((V===3||V===4)&&R.stateNode.containerInfo===v)return;R=R.return}for(;D!==null;){if(R=ca(D),R===null)return;if(V=R.tag,V===5||V===6||V===26||V===27){g=x=R;continue e}D=D.parentNode}}g=g.return}Yc(function(){var ee=x,ae=Kc(p),he=[];e:{var ne=tM.get(l);if(ne!==void 0){var re=Oe,qe=l;switch(l){case"keypress":if(Qc(p)===0)break e;case"keydown":case"keyup":re=RW;break;case"focusin":qe="focus",re=va;break;case"focusout":qe="blur",re=va;break;case"beforeblur":case"afterblur":re=va;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Sf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Sg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=PW;break;case JR:case QR:case ZR:re=xW;break;case eM:re=LW;break;case"scroll":case"scrollend":re=ar;break;case"wheel":re=NW;break;case"copy":case"cut":case"paste":re=SW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=PR;break;case"toggle":case"beforetoggle":re=jW}var $e=(u&4)!==0,St=!$e&&(l==="scroll"||l==="scrollend"),K=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var H=ee,J;H!==null;){var ce=H;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||K===null||(ce=ma(H,K),ce!=null&&$e.push(nd(H,ce,J))),St)break;H=H.return}0<$e.length&&(ne=new re(ne,qe,null,p,ae),he.push({event:ne,listeners:$e}))}}if((u&7)===0){e:{if(ne=l==="mouseover"||l==="pointerover",re=l==="mouseout"||l==="pointerout",ne&&p!==bf&&(qe=p.relatedTarget||p.fromElement)&&(ca(qe)||qe[la]))break e;if((re||ne)&&(ne=ae.window===ae?ae:(ne=ae.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(qe=p.relatedTarget||p.toElement,re=ee,qe=qe?ca(qe):null,qe!==null&&(St=s(qe),$e=qe.tag,qe!==St||$e!==5&&$e!==27&&$e!==6)&&(qe=null)):(re=null,qe=ee),re!==qe)){if($e=Sf,ce="onMouseLeave",K="onMouseEnter",H="mouse",(l==="pointerout"||l==="pointerover")&&($e=PR,ce="onPointerLeave",K="onPointerEnter",H="pointer"),St=re==null?ne:Mi(re),J=qe==null?ne:Mi(qe),ne=new $e(ce,H+"leave",re,p,ae),ne.target=St,ne.relatedTarget=J,ce=null,ca(ae)===ee&&($e=new $e(K,H+"enter",qe,p,ae),$e.target=J,$e.relatedTarget=St,ce=$e),St=ce,re&&qe)t:{for($e=re,K=qe,H=0,J=$e;J;J=Au(J))H++;for(J=0,ce=K;ce;ce=Au(ce))J++;for(;0<H-J;)$e=Au($e),H--;for(;0<J-H;)K=Au(K),J--;for(;H--;){if($e===K||K!==null&&$e===K.alternate)break t;$e=Au($e),K=Au(K)}$e=null}else $e=null;re!==null&&wP(he,ne,re,$e,!1),qe!==null&&St!==null&&wP(he,St,qe,$e,!0)}}e:{if(ne=ee?Mi(ee):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Te=VR;else if(jR(ne))if(FR)Te=KW;else{Te=WW;var rt=qW}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&yf(ee.elementType)&&(Te=VR):Te=GW;if(Te&&(Te=Te(l,ee))){$R(he,Te,p,ae);break e}rt&&rt(l,ne,ee),l==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Wc(ne,"number",ne.value)}switch(rt=ee?Mi(ee):window,l){case"focusin":(jR(rt)||rt.contentEditable==="true")&&(tu=rt,D1=ee,Tf=null);break;case"focusout":Tf=D1=tu=null;break;case"mousedown":L1=!0;break;case"contextmenu":case"mouseup":case"dragend":L1=!1,YR(he,p,ae);break;case"selectionchange":if(XW)break;case"keydown":case"keyup":YR(he,p,ae)}var Pe;if(R1)e:{switch(l){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else eu?NR(l,p)&&(ze="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(ze="onCompositionStart");ze&&(DR&&p.locale!=="ko"&&(eu||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&eu&&(Pe=Jc()):(Ls=ae,ya="value"in Ls?Ls.value:Ls.textContent,eu=!0)),rt=l0(ee,ze),0<rt.length&&(ze=new OR(ze,l,null,p,ae),he.push({event:ze,listeners:rt}),Pe?ze.data=Pe:(Pe=BR(p),Pe!==null&&(ze.data=Pe)))),(Pe=VW?FW(l,p):zW(l,p))&&(ze=l0(ee,"onBeforeInput"),0<ze.length&&(rt=new OR("onBeforeInput","beforeinput",null,p,ae),he.push({event:rt,listeners:ze}),rt.data=Pe)),PG(he,l,ee,p,ae)}vP(he,u)})}function nd(l,u,p){return{instance:l,listener:u,currentTarget:p}}function l0(l,u){for(var p=u+"Capture",g=[];l!==null;){var v=l,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=ma(l,p),v!=null&&g.unshift(nd(l,v,x)),v=ma(l,u),v!=null&&g.push(nd(l,v,x))),l.tag===3)return g;l=l.return}return[]}function Au(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function wP(l,u,p,g,v){for(var x=u._reactName,R=[];p!==null&&p!==g;){var D=p,V=D.alternate,ee=D.stateNode;if(D=D.tag,V!==null&&V===g)break;D!==5&&D!==26&&D!==27||ee===null||(V=ee,v?(ee=ma(p,x),ee!=null&&R.unshift(nd(p,ee,V))):v||(ee=ma(p,x),ee!=null&&R.push(nd(p,ee,V)))),p=p.return}R.length!==0&&l.push({event:u,listeners:R})}var NG=/\r\n?/g,BG=/\u0000|\uFFFD/g;function SP(l){return(typeof l=="string"?l:""+l).replace(NG,`
`).replace(BG,"")}function _P(l,u){return u=SP(u),SP(l)===u}function c0(){}function wt(l,u,p,g,v,x){switch(p){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||ri(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&ri(l,""+g);break;case"className":Hc(l,"class",g);break;case"tabIndex":Hc(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Hc(l,p,g);break;case"style":xg(l,g,x);break;case"data":if(u!=="object"){Hc(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||p!=="href")){l.removeAttribute(p);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(p);break}g=Gc(""+g),l.setAttribute(p,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(p==="formAction"?(u!=="input"&&wt(l,u,"name",v.name,v,null),wt(l,u,"formEncType",v.formEncType,v,null),wt(l,u,"formMethod",v.formMethod,v,null),wt(l,u,"formTarget",v.formTarget,v,null)):(wt(l,u,"encType",v.encType,v,null),wt(l,u,"method",v.method,v,null),wt(l,u,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(p);break}g=Gc(""+g),l.setAttribute(p,g);break;case"onClick":g!=null&&(l.onclick=c0);break;case"onScroll":g!=null&&at("scroll",l);break;case"onScrollEnd":g!=null&&at("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(p=g.__html,p!=null){if(v.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}p=Gc(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(p,""+g):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":g===!0?l.setAttribute(p,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(p,g):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(p,g):l.removeAttribute(p);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(p):l.setAttribute(p,g);break;case"popover":at("beforetoggle",l),at("toggle",l),zc(l,"popover",g);break;case"xlinkActuate":Oi(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Oi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Oi(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Oi(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Oi(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Oi(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":zc(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=k1.get(p)||p,zc(l,p,g))}}function r2(l,u,p,g,v,x){switch(p){case"style":xg(l,g,x);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(p=g.__html,p!=null){if(v.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof g=="string"?ri(l,g):(typeof g=="number"||typeof g=="bigint")&&ri(l,""+g);break;case"onScroll":g!=null&&at("scroll",l);break;case"onScrollEnd":g!=null&&at("scrollend",l);break;case"onClick":g!=null&&(l.onclick=c0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ug.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(v=p.endsWith("Capture"),u=p.slice(2,v?p.length-7:void 0),x=l[or]||null,x=x!=null?x[p]:null,typeof x=="function"&&l.removeEventListener(u,x,v),typeof g=="function")){typeof x!="function"&&x!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(u,g,v);break e}p in l?l[p]=g:g===!0?l.setAttribute(p,""):zc(l,p,g)}}}function zn(l,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",l),at("load",l);var g=!1,v=!1,x;for(x in p)if(p.hasOwnProperty(x)){var R=p[x];if(R!=null)switch(x){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:wt(l,u,x,R,p,null)}}v&&wt(l,u,"srcSet",p.srcSet,p,null),g&&wt(l,u,"src",p.src,p,null);return;case"input":at("invalid",l);var D=x=R=v=null,V=null,ee=null;for(g in p)if(p.hasOwnProperty(g)){var ae=p[g];if(ae!=null)switch(g){case"name":v=ae;break;case"type":R=ae;break;case"checked":V=ae;break;case"defaultChecked":ee=ae;break;case"value":x=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,u));break;default:wt(l,u,g,ae,p,null)}}yg(l,x,D,V,ee,R,v,!1),Uc(l);return;case"select":at("invalid",l),g=R=x=null;for(v in p)if(p.hasOwnProperty(v)&&(D=p[v],D!=null))switch(v){case"value":x=D;break;case"defaultValue":R=D;break;case"multiple":g=D;default:wt(l,u,v,D,p,null)}u=x,p=R,l.multiple=!!g,u!=null?da(l,!!g,u,!1):p!=null&&da(l,!!g,p,!0);return;case"textarea":at("invalid",l),x=v=g=null;for(R in p)if(p.hasOwnProperty(R)&&(D=p[R],D!=null))switch(R){case"value":g=D;break;case"defaultValue":v=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:wt(l,u,R,D,p,null)}Rl(l,g,v,x),Uc(l);return;case"option":for(V in p)if(p.hasOwnProperty(V)&&(g=p[V],g!=null))switch(V){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:wt(l,u,V,g,p,null)}return;case"dialog":at("beforetoggle",l),at("toggle",l),at("cancel",l),at("close",l);break;case"iframe":case"object":at("load",l);break;case"video":case"audio":for(g=0;g<td.length;g++)at(td[g],l);break;case"image":at("error",l),at("load",l);break;case"details":at("toggle",l);break;case"embed":case"source":case"link":at("error",l),at("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in p)if(p.hasOwnProperty(ee)&&(g=p[ee],g!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:wt(l,u,ee,g,p,null)}return;default:if(yf(u)){for(ae in p)p.hasOwnProperty(ae)&&(g=p[ae],g!==void 0&&r2(l,u,ae,g,p,void 0));return}}for(D in p)p.hasOwnProperty(D)&&(g=p[D],g!=null&&wt(l,u,D,g,p,null))}function jG(l,u,p,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,R=null,D=null,V=null,ee=null,ae=null;for(re in p){var he=p[re];if(p.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":V=he;default:g.hasOwnProperty(re)||wt(l,u,re,null,g,he)}}for(var ne in g){var re=g[ne];if(he=p[ne],g.hasOwnProperty(ne)&&(re!=null||he!=null))switch(ne){case"type":x=re;break;case"name":v=re;break;case"checked":ee=re;break;case"defaultChecked":ae=re;break;case"value":R=re;break;case"defaultValue":D=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,u));break;default:re!==he&&wt(l,u,ne,re,g,he)}}gf(l,R,D,V,ee,ae,x,v);return;case"select":re=R=D=ne=null;for(x in p)if(V=p[x],p.hasOwnProperty(x)&&V!=null)switch(x){case"value":break;case"multiple":re=V;default:g.hasOwnProperty(x)||wt(l,u,x,null,g,V)}for(v in g)if(x=g[v],V=p[v],g.hasOwnProperty(v)&&(x!=null||V!=null))switch(v){case"value":ne=x;break;case"defaultValue":D=x;break;case"multiple":R=x;default:x!==V&&wt(l,u,v,x,g,V)}u=D,p=R,g=re,ne!=null?da(l,!!p,ne,!1):!!g!=!!p&&(u!=null?da(l,!!p,u,!0):da(l,!!p,p?[]:"",!1));return;case"textarea":re=ne=null;for(D in p)if(v=p[D],p.hasOwnProperty(D)&&v!=null&&!g.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:wt(l,u,D,null,g,v)}for(R in g)if(v=g[R],x=p[R],g.hasOwnProperty(R)&&(v!=null||x!=null))switch(R){case"value":ne=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==x&&wt(l,u,R,v,g,x)}bg(l,ne,re);return;case"option":for(var qe in p)if(ne=p[qe],p.hasOwnProperty(qe)&&ne!=null&&!g.hasOwnProperty(qe))switch(qe){case"selected":l.selected=!1;break;default:wt(l,u,qe,null,g,ne)}for(V in g)if(ne=g[V],re=p[V],g.hasOwnProperty(V)&&ne!==re&&(ne!=null||re!=null))switch(V){case"selected":l.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:wt(l,u,V,ne,g,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in p)ne=p[$e],p.hasOwnProperty($e)&&ne!=null&&!g.hasOwnProperty($e)&&wt(l,u,$e,null,g,ne);for(ee in g)if(ne=g[ee],re=p[ee],g.hasOwnProperty(ee)&&ne!==re&&(ne!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:wt(l,u,ee,ne,g,re)}return;default:if(yf(u)){for(var St in p)ne=p[St],p.hasOwnProperty(St)&&ne!==void 0&&!g.hasOwnProperty(St)&&r2(l,u,St,void 0,g,ne);for(ae in g)ne=g[ae],re=p[ae],!g.hasOwnProperty(ae)||ne===re||ne===void 0&&re===void 0||r2(l,u,ae,ne,g,re);return}}for(var K in p)ne=p[K],p.hasOwnProperty(K)&&ne!=null&&!g.hasOwnProperty(K)&&wt(l,u,K,null,g,ne);for(he in g)ne=g[he],re=p[he],!g.hasOwnProperty(he)||ne===re||ne==null&&re==null||wt(l,u,he,ne,g,re)}var i2=null,s2=null;function u0(l){return l.nodeType===9?l:l.ownerDocument}function CP(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function AP(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function o2(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var a2=null;function $G(){var l=window.event;return l&&l.type==="popstate"?l===a2?!1:(a2=l,!0):(a2=null,!1)}var kP=typeof setTimeout=="function"?setTimeout:void 0,VG=typeof clearTimeout=="function"?clearTimeout:void 0,EP=typeof Promise=="function"?Promise:void 0,FG=typeof queueMicrotask=="function"?queueMicrotask:typeof EP<"u"?function(l){return EP.resolve(null).then(l).catch(zG)}:kP;function zG(l){setTimeout(function(){throw l})}function Ia(l){return l==="head"}function TP(l,u){var p=u,g=0,v=0;do{var x=p.nextSibling;if(l.removeChild(p),x&&x.nodeType===8)if(p=x.data,p==="/$"){if(0<g&&8>g){p=g;var R=l.ownerDocument;if(p&1&&rd(R.documentElement),p&2&&rd(R.body),p&4)for(p=R.head,rd(p),R=p.firstChild;R;){var D=R.nextSibling,V=R.nodeName;R[Tl]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&R.rel.toLowerCase()==="stylesheet"||p.removeChild(R),R=D}}if(v===0){l.removeChild(x),hd(u);return}v--}else p==="$"||p==="$?"||p==="$!"?v++:g=p.charCodeAt(0)-48;else g=0;p=x}while(p);hd(u)}function l2(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":l2(p),ff(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function HG(l,u,p,g){for(;l.nodeType===1;){var v=p;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[Tl])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(x=l.getAttribute("rel"),x==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(x!==v.rel||l.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||l.getAttribute("title")!==(v.title==null?null:v.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(x=l.getAttribute("src"),(x!==(v.src==null?null:v.src)||l.getAttribute("type")!==(v.type==null?null:v.type)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&l.getAttribute("name")===x)return l}else return l;if(l=us(l.nextSibling),l===null)break}return null}function UG(l,u,p){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=us(l.nextSibling),l===null))return null;return l}function c2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function qG(l,u){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")u();else{var g=function(){u(),p.removeEventListener("DOMContentLoaded",g)};p.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function us(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var u2=null;function RP(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return l;u--}else p==="/$"&&u++}l=l.previousSibling}return null}function MP(l,u,p){switch(u=u0(p),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function rd(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);ff(l)}var ji=new Map,OP=new Set;function h0(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Bo=Y.d;Y.d={f:WG,r:GG,D:KG,C:YG,L:XG,m:JG,X:ZG,S:QG,M:eK};function WG(){var l=Bo.f(),u=n0();return l||u}function GG(l){var u=ua(l);u!==null&&u.tag===5&&u.type==="form"?JM(u):Bo.r(l)}var ku=typeof document>"u"?null:document;function PP(l,u,p){var g=ku;if(g&&typeof u=="string"&&u){var v=jr(u);v='link[rel="'+l+'"][href="'+v+'"]',typeof p=="string"&&(v+='[crossorigin="'+p+'"]'),OP.has(v)||(OP.add(v),l={rel:l,crossOrigin:p,href:u},g.querySelector(v)===null&&(u=g.createElement("link"),zn(u,"link",l),on(u),g.head.appendChild(u)))}}function KG(l){Bo.D(l),PP("dns-prefetch",l,null)}function YG(l,u){Bo.C(l,u),PP("preconnect",l,u)}function XG(l,u,p){Bo.L(l,u,p);var g=ku;if(g&&l&&u){var v='link[rel="preload"][as="'+jr(u)+'"]';u==="image"&&p&&p.imageSrcSet?(v+='[imagesrcset="'+jr(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(v+='[imagesizes="'+jr(p.imageSizes)+'"]')):v+='[href="'+jr(l)+'"]';var x=v;switch(u){case"style":x=Eu(l);break;case"script":x=Tu(l)}ji.has(x)||(l=f({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:l,as:u},p),ji.set(x,l),g.querySelector(v)!==null||u==="style"&&g.querySelector(id(x))||u==="script"&&g.querySelector(sd(x))||(u=g.createElement("link"),zn(u,"link",l),on(u),g.head.appendChild(u)))}}function JG(l,u){Bo.m(l,u);var p=ku;if(p&&l){var g=u&&typeof u.as=="string"?u.as:"script",v='link[rel="modulepreload"][as="'+jr(g)+'"][href="'+jr(l)+'"]',x=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Tu(l)}if(!ji.has(x)&&(l=f({rel:"modulepreload",href:l},u),ji.set(x,l),p.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(sd(x)))return}g=p.createElement("link"),zn(g,"link",l),on(g),p.head.appendChild(g)}}}function QG(l,u,p){Bo.S(l,u,p);var g=ku;if(g&&l){var v=ha(g).hoistableStyles,x=Eu(l);u=u||"default";var R=v.get(x);if(!R){var D={loading:0,preload:null};if(R=g.querySelector(id(x)))D.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},p),(p=ji.get(x))&&h2(l,p);var V=R=g.createElement("link");on(V),zn(V,"link",l),V._p=new Promise(function(ee,ae){V.onload=ee,V.onerror=ae}),V.addEventListener("load",function(){D.loading|=1}),V.addEventListener("error",function(){D.loading|=2}),D.loading|=4,f0(R,u,g)}R={type:"stylesheet",instance:R,count:1,state:D},v.set(x,R)}}}function ZG(l,u){Bo.X(l,u);var p=ku;if(p&&l){var g=ha(p).hoistableScripts,v=Tu(l),x=g.get(v);x||(x=p.querySelector(sd(v)),x||(l=f({src:l,async:!0},u),(u=ji.get(v))&&f2(l,u),x=p.createElement("script"),on(x),zn(x,"link",l),p.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(v,x))}}function eK(l,u){Bo.M(l,u);var p=ku;if(p&&l){var g=ha(p).hoistableScripts,v=Tu(l),x=g.get(v);x||(x=p.querySelector(sd(v)),x||(l=f({src:l,async:!0,type:"module"},u),(u=ji.get(v))&&f2(l,u),x=p.createElement("script"),on(x),zn(x,"link",l),p.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(v,x))}}function DP(l,u,p,g){var v=(v=ye.current)?h0(v):null;if(!v)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Eu(p.href),p=ha(v).hoistableStyles,g=p.get(u),g||(g={type:"style",instance:null,count:0,state:null},p.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Eu(p.href);var x=ha(v).hoistableStyles,R=x.get(l);if(R||(v=v.ownerDocument||v,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(l,R),(x=v.querySelector(id(l)))&&!x._p&&(R.instance=x,R.state.loading=5),ji.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ji.set(l,p),x||tK(v,l,p,R.state))),u&&g===null)throw Error(r(528,""));return R}if(u&&g!==null)throw Error(r(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Tu(p),p=ha(v).hoistableScripts,g=p.get(u),g||(g={type:"script",instance:null,count:0,state:null},p.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Eu(l){return'href="'+jr(l)+'"'}function id(l){return'link[rel="stylesheet"]['+l+"]"}function LP(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function tK(l,u,p,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),zn(u,"link",p),on(u),l.head.appendChild(u))}function Tu(l){return'[src="'+jr(l)+'"]'}function sd(l){return"script[async]"+l}function IP(l,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+jr(p.href)+'"]');if(g)return u.instance=g,on(g),g;var v=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),on(g),zn(g,"style",v),f0(g,p.precedence,l),u.instance=g;case"stylesheet":v=Eu(p.href);var x=l.querySelector(id(v));if(x)return u.state.loading|=4,u.instance=x,on(x),x;g=LP(p),(v=ji.get(v))&&h2(g,v),x=(l.ownerDocument||l).createElement("link"),on(x);var R=x;return R._p=new Promise(function(D,V){R.onload=D,R.onerror=V}),zn(x,"link",g),u.state.loading|=4,f0(x,p.precedence,l),u.instance=x;case"script":return x=Tu(p.src),(v=l.querySelector(sd(x)))?(u.instance=v,on(v),v):(g=p,(v=ji.get(x))&&(g=f({},p),f2(g,v)),l=l.ownerDocument||l,v=l.createElement("script"),on(v),zn(v,"link",g),l.head.appendChild(v),u.instance=v);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,f0(g,p.precedence,l));return u.instance}function f0(l,u,p){for(var g=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,x=v,R=0;R<g.length;R++){var D=g[R];if(D.dataset.precedence===u)x=D;else if(x!==v)break}x?x.parentNode.insertBefore(l,x.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(l,u.firstChild))}function h2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function f2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var d0=null;function NP(l,u,p){if(d0===null){var g=new Map,v=d0=new Map;v.set(p,g)}else v=d0,g=v.get(p),g||(g=new Map,v.set(p,g));if(g.has(l))return g;for(g.set(l,null),p=p.getElementsByTagName(l),v=0;v<p.length;v++){var x=p[v];if(!(x[Tl]||x[Rn]||l==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var R=x.getAttribute(u)||"";R=l+R;var D=g.get(R);D?D.push(x):g.set(R,[x])}}return g}function BP(l,u,p){l=l.ownerDocument||l,l.head.insertBefore(p,u==="title"?l.querySelector("head > title"):null)}function nK(l,u,p){if(p===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function jP(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var od=null;function rK(){}function iK(l,u,p){if(od===null)throw Error(r(475));var g=od;if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Eu(p.href),x=l.querySelector(id(v));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(g.count++,g=p0.bind(g),l.then(g,g)),u.state.loading|=4,u.instance=x,on(x);return}x=l.ownerDocument||l,p=LP(p),(v=ji.get(v))&&h2(p,v),x=x.createElement("link"),on(x);var R=x;R._p=new Promise(function(D,V){R.onload=D,R.onerror=V}),zn(x,"link",p),u.instance=x}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(g.count++,u=p0.bind(g),l.addEventListener("load",u),l.addEventListener("error",u))}}function sK(){if(od===null)throw Error(r(475));var l=od;return l.stylesheets&&l.count===0&&d2(l,l.stylesheets),0<l.count?function(u){var p=setTimeout(function(){if(l.stylesheets&&d2(l,l.stylesheets),l.unsuspend){var g=l.unsuspend;l.unsuspend=null,g()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(p)}}:null}function p0(){if(this.count--,this.count===0){if(this.stylesheets)d2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var m0=null;function d2(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,m0=new Map,u.forEach(oK,l),m0=null,p0.call(l))}function oK(l,u){if(!(u.state.loading&4)){var p=m0.get(l);if(p)var g=p.get(null);else{p=new Map,m0.set(l,p);for(var v=l.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var R=v[x];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(p.set(R.dataset.precedence,R),g=R)}g&&p.set(null,g)}v=u.instance,R=v.getAttribute("data-precedence"),x=p.get(R)||g,x===g&&p.set(null,v),p.set(R,v),this.count++,g=p0.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),x?x.parentNode.insertBefore(v,x.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(v,l.firstChild)),u.state.loading|=4}}var ad={$$typeof:k,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function aK(l,u,p,g,v,x,R,D){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=El(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.hiddenUpdates=El(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function $P(l,u,p,g,v,x,R,D,V,ee,ae,he){return l=new aK(l,u,p,R,D,V,ee,he),u=1,x===!0&&(u|=24),x=oi(3,null,null,u),l.current=x,x.stateNode=l,u=K1(),u.refCount++,l.pooledCache=u,u.refCount++,x.memoizedState={element:g,isDehydrated:p,cache:u},Q1(x),l}function VP(l){return l?(l=su,l):su}function FP(l,u,p,g,v,x){v=VP(v),g.context===null?g.context=v:g.pendingContext=v,g=Sa(u),g.payload={element:p},x=x===void 0?null:x,x!==null&&(g.callback=x),p=_a(l,g,u),p!==null&&(hi(p,l,u),Bf(p,l,u))}function zP(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function p2(l,u){zP(l,u),(l=l.alternate)&&zP(l,u)}function HP(l){if(l.tag===13){var u=iu(l,67108864);u!==null&&hi(u,l,67108864),p2(l,67108864)}}var g0=!0;function lK(l,u,p,g){var v=F.T;F.T=null;var x=Y.p;try{Y.p=2,m2(l,u,p,g)}finally{Y.p=x,F.T=v}}function cK(l,u,p,g){var v=F.T;F.T=null;var x=Y.p;try{Y.p=8,m2(l,u,p,g)}finally{Y.p=x,F.T=v}}function m2(l,u,p,g){if(g0){var v=g2(g);if(v===null)n2(l,u,g,y0,p),qP(l,g);else if(hK(v,l,u,p,g))g.stopPropagation();else if(qP(l,g),u&4&&-1<uK.indexOf(l)){for(;v!==null;){var x=ua(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var R=_r(x.pendingLanes);if(R!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;R;){var V=1<<31-Be(R);D.entanglements[1]|=V,R&=~V}$s(x),(bt&6)===0&&(e0=nr()+500,ed(0))}}break;case 13:D=iu(x,2),D!==null&&hi(D,x,2),n0(),p2(x,2)}if(x=g2(g),x===null&&n2(l,u,g,y0,p),x===v)break;v=x}v!==null&&g.stopPropagation()}else n2(l,u,g,null,p)}}function g2(l){return l=Kc(l),y2(l)}var y0=null;function y2(l){if(y0=null,l=ca(l),l!==null){var u=s(l);if(u===null)l=null;else{var p=u.tag;if(p===13){if(l=o(u),l!==null)return l;l=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return y0=l,null}function UP(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(af()){case Al:return 2;case Ms:return 8;case Os:case $c:return 32;case kl:return 268435456;default:return 32}default:return 32}}var b2=!1,Na=null,Ba=null,ja=null,ld=new Map,cd=new Map,$a=[],uK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qP(l,u){switch(l){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":ld.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":cd.delete(u.pointerId)}}function ud(l,u,p,g,v,x){return l===null||l.nativeEvent!==x?(l={blockedOn:u,domEventName:p,eventSystemFlags:g,nativeEvent:x,targetContainers:[v]},u!==null&&(u=ua(u),u!==null&&HP(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,v!==null&&u.indexOf(v)===-1&&u.push(v),l)}function hK(l,u,p,g,v){switch(u){case"focusin":return Na=ud(Na,l,u,p,g,v),!0;case"dragenter":return Ba=ud(Ba,l,u,p,g,v),!0;case"mouseover":return ja=ud(ja,l,u,p,g,v),!0;case"pointerover":var x=v.pointerId;return ld.set(x,ud(ld.get(x)||null,l,u,p,g,v)),!0;case"gotpointercapture":return x=v.pointerId,cd.set(x,ud(cd.get(x)||null,l,u,p,g,v)),!0}return!1}function WP(l){var u=ca(l.target);if(u!==null){var p=s(u);if(p!==null){if(u=p.tag,u===13){if(u=o(p),u!==null){l.blockedOn=u,ag(l.priority,function(){if(p.tag===13){var g=ui();g=lf(g);var v=iu(p,g);v!==null&&hi(v,p,g),p2(p,g)}});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function b0(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var p=g2(l.nativeEvent);if(p===null){p=l.nativeEvent;var g=new p.constructor(p.type,p);bf=g,p.target.dispatchEvent(g),bf=null}else return u=ua(p),u!==null&&HP(u),l.blockedOn=p,!1;u.shift()}return!0}function GP(l,u,p){b0(l)&&p.delete(u)}function fK(){b2=!1,Na!==null&&b0(Na)&&(Na=null),Ba!==null&&b0(Ba)&&(Ba=null),ja!==null&&b0(ja)&&(ja=null),ld.forEach(GP),cd.forEach(GP)}function v0(l,u){l.blockedOn===u&&(l.blockedOn=null,b2||(b2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fK)))}var x0=null;function KP(l){x0!==l&&(x0=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){x0===l&&(x0=null);for(var u=0;u<l.length;u+=3){var p=l[u],g=l[u+1],v=l[u+2];if(typeof g!="function"){if(y2(g||p)===null)continue;break}var x=ua(p);x!==null&&(l.splice(u,3),u-=3,yw(x,{pending:!0,data:v,method:p.method,action:g},g,v))}}))}function hd(l){function u(V){return v0(V,l)}Na!==null&&v0(Na,l),Ba!==null&&v0(Ba,l),ja!==null&&v0(ja,l),ld.forEach(u),cd.forEach(u);for(var p=0;p<$a.length;p++){var g=$a[p];g.blockedOn===l&&(g.blockedOn=null)}for(;0<$a.length&&(p=$a[0],p.blockedOn===null);)WP(p),p.blockedOn===null&&$a.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(g=0;g<p.length;g+=3){var v=p[g],x=p[g+1],R=v[or]||null;if(typeof x=="function")R||KP(p);else if(R){var D=null;if(x&&x.hasAttribute("formAction")){if(v=x,R=x[or]||null)D=R.formAction;else if(y2(v)!==null)continue}else D=R.action;typeof D=="function"?p[g+1]=D:(p.splice(g,3),g-=3),KP(p)}}}function v2(l){this._internalRoot=l}w0.prototype.render=v2.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var p=u.current,g=ui();FP(p,g,l,u,null,null)},w0.prototype.unmount=v2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;FP(l.current,2,null,l,null,null),n0(),u[la]=null}};function w0(l){this._internalRoot=l}w0.prototype.unstable_scheduleHydration=function(l){if(l){var u=uf();l={blockedOn:null,target:l,priority:u};for(var p=0;p<$a.length&&u!==0&&u<$a[p].priority;p++);$a.splice(p,0,l),p===0&&WP(l)}};var YP=e.version;if(YP!=="19.1.1")throw Error(r(527,YP,"19.1.1"));Y.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var dK={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var S0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!S0.isDisabled&&S0.supportsFiber)try{oe=S0.inject(dK),me=S0}catch{}}return dd.createRoot=function(l,u){if(!i(l))throw Error(r(299));var p=!1,g="",v=hO,x=fO,R=dO,D=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(D=u.unstable_transitionCallbacks)),u=$P(l,1,!1,null,null,p,g,v,x,R,D,null),l[la]=u.current,t2(l),new v2(u)},dd.hydrateRoot=function(l,u,p){if(!i(l))throw Error(r(299));var g=!1,v="",x=hO,R=fO,D=dO,V=null,ee=null;return p!=null&&(p.unstable_strictMode===!0&&(g=!0),p.identifierPrefix!==void 0&&(v=p.identifierPrefix),p.onUncaughtError!==void 0&&(x=p.onUncaughtError),p.onCaughtError!==void 0&&(R=p.onCaughtError),p.onRecoverableError!==void 0&&(D=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(V=p.unstable_transitionCallbacks),p.formState!==void 0&&(ee=p.formState)),u=$P(l,1,!0,u,p??null,g,v,x,R,D,V,ee),u.context=VP(null),p=u.current,g=ui(),g=lf(g),v=Sa(g),v.callback=null,_a(p,v,g),p=g,u.current.lanes=p,is(u,p),$s(u),l[la]=u.current,t2(l),new w0(u)},dd.version="19.1.1",dd}var sD;function _K(){if(sD)return S2.exports;sD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),S2.exports=SK(),S2.exports}var CK=_K(),AK=t=>Array.from(t).map(n=>n.getModelContext()).sort((n,r)=>(r.priority??0)-(n.priority??0)).reduce((n,r)=>{if(r.system&&(n.system?n.system+=`

${r.system}`:n.system=r.system),r.tools)for(const[i,s]of Object.entries(r.tools)){const o=n.tools?.[i];if(o&&o!==s)throw new Error(`You tried to define a tool with the name ${i}, but it already exists.`);n.tools||(n.tools={}),n.tools[i]=s}return r.config&&(n.config={...n.config,...r.config}),r.callSettings&&(n.callSettings={...n.callSettings,...r.callSettings}),n},{}),SB=class{_providers=new Set;getModelContext(){return AK(this._providers)}registerModelContextProvider(t){this._providers.add(t);const e=t.subscribe?.(()=>{this.notifySubscribers()});return this.notifySubscribers(),()=>{this._providers.delete(t),e?.(),this.notifySubscribers()}}_subscribers=new Set;notifySubscribers(){for(const t of this._subscribers)t()}subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}},_B=class{_contextProvider=new SB;registerModelContextProvider(t){return this._contextProvider.registerModelContextProvider(t)}},kK=class{_subscribers=new Set;subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}waitForUpdate(){return new Promise(t=>{const e=this.subscribe(()=>{e(),t()})})}_notifySubscribers(){const t=[];for(const e of this._subscribers)try{e()}catch(n){t.push(n)}if(t.length>0)throw t.length===1?t[0]:new AggregateError(t)}},EK=t=>t.status.type==="complete",CB=class extends kK{isEditing=!0;get attachmentAccept(){return this.getAttachmentAdapter()?.accept??"*"}_attachments=[];get attachments(){return this._attachments}setAttachments(t){this._attachments=t,this._notifySubscribers()}get isEmpty(){return!this.text.trim()&&!this.attachments.length}_text="";get text(){return this._text}_role="user";get role(){return this._role}_runConfig={};get runConfig(){return this._runConfig}setText(t){this._text!==t&&(this._text=t,this._notifySubscribers())}setRole(t){this._role!==t&&(this._role=t,this._notifySubscribers())}setRunConfig(t){this._runConfig!==t&&(this._runConfig=t,this._notifySubscribers())}_emptyTextAndAttachments(){this._attachments=[],this._text="",this._notifySubscribers()}async _onClearAttachments(){const t=this.getAttachmentAdapter();t&&await Promise.all(this._attachments.map(e=>t.remove(e)))}async reset(){if(this._attachments.length===0&&this._text===""&&this._role==="user"&&Object.keys(this._runConfig).length===0)return;this._role="user",this._runConfig={};const t=this._onClearAttachments();this._emptyTextAndAttachments(),await t}async clearAttachments(){const t=this._onClearAttachments();this.setAttachments([]),await t}async send(){const t=this.getAttachmentAdapter(),e=t&&this.attachments.length>0?Promise.all(this.attachments.map(async i=>EK(i)?i:await t.send(i))):[],n=this.text;this._emptyTextAndAttachments();const r={createdAt:new Date,role:this.role,content:n?[{type:"text",text:n}]:[],attachments:await e,runConfig:this.runConfig,metadata:{custom:{}}};this.handleSend(r),this._notifyEventSubscribers("send")}cancel(){this.handleCancel()}async addAttachment(t){const e=this.getAttachmentAdapter();if(!e)throw new Error("Attachments are not supported");const n=i=>{const s=this._attachments.findIndex(o=>o.id===i.id);s!==-1?this._attachments=[...this._attachments.slice(0,s),i,...this._attachments.slice(s+1)]:this._attachments=[...this._attachments,i],this._notifySubscribers()},r=e.add({file:t});if(Symbol.asyncIterator in r)for await(const i of r)n(i);else n(await r);this._notifyEventSubscribers("attachment-add"),this._notifySubscribers()}async removeAttachment(t){const e=this.getAttachmentAdapter();if(!e)throw new Error("Attachments are not supported");const n=this._attachments.findIndex(i=>i.id===t);if(n===-1)throw new Error("Attachment not found");const r=this._attachments[n];await e.remove(r),this._attachments=[...this._attachments.slice(0,n),...this._attachments.slice(n+1)],this._notifySubscribers()}_eventSubscribers=new Map;_notifyEventSubscribers(t){const e=this._eventSubscribers.get(t);if(e)for(const n of e)n()}unstable_on(t,e){const n=this._eventSubscribers.get(t);return n?n.add(e):this._eventSubscribers.set(t,new Set([e])),()=>{const r=this._eventSubscribers.get(t);r&&r.delete(e)}}},AB=class extends CB{constructor(t){super(),this.runtime=t,this.connect()}_canCancel=!1;get canCancel(){return this._canCancel}get attachments(){return super.attachments}getAttachmentAdapter(){return this.runtime.adapters?.attachments}connect(){return this.runtime.subscribe(()=>{this.canCancel!==this.runtime.capabilities.cancel&&(this._canCancel=this.runtime.capabilities.cancel,this._notifySubscribers())})}async handleSend(t){this.runtime.append({...t,parentId:this.runtime.messages.at(-1)?.id??null,sourceId:null})}async handleCancel(){this.runtime.cancelRun()}};let TK=(t,e=21)=>(n=e)=>{let r="",i=n|0;for(;i--;)r+=t[Math.random()*t.length|0];return r};var cx=TK("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),RK="__optimistic__",MK=()=>`${RK}${cx()}`,kB=Object.freeze({type:"running"}),EB=Object.freeze({type:"complete",reason:"unknown"}),OK=Object.freeze({type:"requires-action",reason:"tool-calls"}),PK=t=>t===kB||t===EB,vk=(t,e,n)=>t&&e?kB:n?OK:EB,ql={exports:{}},oD;function DK(){if(oD)return ql.exports;oD=1;const t=typeof Buffer<"u",e=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(a,c,h){h==null&&c!==null&&typeof c=="object"&&(h=c,c=void 0),t&&Buffer.isBuffer(a)&&(a=a.toString()),a&&a.charCodeAt(0)===65279&&(a=a.slice(1));const f=JSON.parse(a,c);if(f===null||typeof f!="object")return f;const d=h&&h.protoAction||"error",m=h&&h.constructorAction||"error";if(d==="ignore"&&m==="ignore")return f;if(d!=="ignore"&&m!=="ignore"){if(e.test(a)===!1&&n.test(a)===!1)return f}else if(d!=="ignore"&&m==="ignore"){if(e.test(a)===!1)return f}else if(n.test(a)===!1)return f;return i(f,{protoAction:d,constructorAction:m,safe:h&&h.safe})}function i(a,{protoAction:c="error",constructorAction:h="error",safe:f}={}){let d=[a];for(;d.length;){const m=d;d=[];for(const y of m){if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"__proto__")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.__proto__}if(h!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"constructor")&&Object.prototype.hasOwnProperty.call(y.constructor,"prototype")){if(f===!0)return null;if(h==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.constructor}for(const b in y){const w=y[b];w&&typeof w=="object"&&d.push(w)}}}return a}function s(a,c,h){const{stackTraceLimit:f}=Error;Error.stackTraceLimit=0;try{return r(a,c,h)}finally{Error.stackTraceLimit=f}}function o(a,c){const{stackTraceLimit:h}=Error;Error.stackTraceLimit=0;try{return r(a,c,{safe:!0})}catch{return}finally{Error.stackTraceLimit=h}}return ql.exports=s,ql.exports.default=s,ql.exports.parse=s,ql.exports.safeParse=o,ql.exports.scan=i,ql.exports}var LK=DK();const aD=Mc(LK);function IK(t){const e=["ROOT"];let n=-1,r=null;const i=[];let s;function o(){s!==void 0&&(i.push(JSON.parse('"'+s+'"')),s=void 0)}function a(d,m,y){switch(d){case'"':{n=m,e.pop(),e.push(y),e.push("INSIDE_STRING"),o();break}case"f":case"t":case"n":{n=m,r=m,e.pop(),e.push(y),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(y),e.push("INSIDE_NUMBER"),o();break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=m,e.pop(),e.push(y),e.push("INSIDE_NUMBER"),o();break}case"{":{n=m,e.pop(),e.push(y),e.push("INSIDE_OBJECT_START"),o();break}case"[":{n=m,e.pop(),e.push(y),e.push("INSIDE_ARRAY_START"),o();break}}}function c(d,m){switch(d){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=m,e.pop(),s=i.pop();break}}}function h(d,m){switch(d){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA"),s=(Number(s)+1).toString();break}case"]":{n=m,e.pop(),s=i.pop();break}}}for(let d=0;d<t.length;d++){const m=t[d];switch(e[e.length-1]){case"ROOT":a(m,d,"FINISH");break;case"INSIDE_OBJECT_START":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY"),s="";break}case"}":{n=d,e.pop(),s=i.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY"),s="";break}}break}case"INSIDE_OBJECT_KEY":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}case"\\":{e.push("INSIDE_STRING_ESCAPE"),s+=m;break}default:{s+=m;break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(m){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(m,d,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{c(m,d);break}case"INSIDE_STRING":{switch(m){case'"':{e.pop(),n=d,s=i.pop();break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=d}break}case"INSIDE_ARRAY_START":{switch(m){case"]":{n=d,e.pop(),s=i.pop();break}default:{n=d,s="0",a(m,d,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(m){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA"),s=(Number(s)+1).toString();break}case"]":{n=d,e.pop(),s=i.pop();break}default:{n=d;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(m,d,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),e[e.length-1]==="INSIDE_STRING"?n=d:e[e.length-1]==="INSIDE_OBJECT_KEY"&&(s+=m);break}case"INSIDE_NUMBER":{switch(m){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=d;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),s=i.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(m,d),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&c(m,d);break}case"}":{e.pop(),s=i.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&c(m,d);break}case"]":{e.pop(),s=i.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(m,d);break}default:{e.pop(),s=i.pop();break}}break}case"INSIDE_LITERAL":{const b=t.substring(r,d+1);!"false".startsWith(b)&&!"true".startsWith(b)&&!"null".startsWith(b)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?c(m,d):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(m,d)):n=d;break}}}let f=t.slice(0,n+1);for(let d=e.length-1;d>=0;d--)switch(e[d]){case"INSIDE_STRING":{f+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{f+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{f+="]";break}case"INSIDE_LITERAL":{const y=t.substring(r,t.length);"true".startsWith(y)?f+="true".slice(y.length):"false".startsWith(y)?f+="false".slice(y.length):"null".startsWith(y)&&(f+="null".slice(y.length))}}return[f,i]}var k2=Symbol("aui.parse-partial-json-object.meta"),NK=t=>{if(t.length===0)return{[k2]:{state:"partial",partialPath:[]}};try{const e=aD.parse(t);if(typeof e!="object"||e===null)throw new Error("argsText is expected to be an object");return e[k2]={state:"complete",partialPath:[]},e}catch{try{const[e,n]=IK(t),r=aD.parse(e);if(typeof r!="object"||r===null)throw new Error("argsText is expected to be an object");return r[k2]={state:"partial",partialPath:n},r}catch{return}}},ux=(t,e,n)=>{const{role:r,id:i,createdAt:s,attachments:o,status:a,metadata:c}=t,h={id:i??e,createdAt:s??new Date},f=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content,d=({image:m,...y})=>m.match(/^data:image\/(png|jpeg|jpg|gif|webp);base64,(.*)$/)?{...y,image:m}:(console.warn("Invalid image data format detected"),null);if(r!=="user"&&o?.length)throw new Error("attachments are only supported for user messages");if(r!=="assistant"&&a)throw new Error("status is only supported for assistant messages");if(r!=="assistant"&&c?.steps)throw new Error("metadata.steps is only supported for assistant messages");switch(r){case"assistant":return{...h,role:r,content:f.map(m=>{const y=m.type;switch(y){case"text":case"reasoning":return m.text.trim().length===0?null:m;case"file":case"source":return m;case"image":return d(m);case"tool-call":{const{parentId:b,...w}=m,S={...w,toolCallId:m.toolCallId??"tool-"+cx(),...b!==void 0&&{parentId:b}};return m.args?{...S,args:m.args,argsText:m.argsText??JSON.stringify(m.args)}:{...S,args:NK(m.argsText??"")??{},argsText:m.argsText??""}}default:{const b=y;throw new Error(`Unsupported assistant message part type: ${b}`)}}}).filter(m=>!!m),status:a??n,metadata:{unstable_state:c?.unstable_state??null,unstable_annotations:c?.unstable_annotations??[],unstable_data:c?.unstable_data??[],custom:c?.custom??{},steps:c?.steps??[]}};case"user":return{...h,role:r,content:f.map(m=>{const y=m.type;switch(y){case"text":case"image":case"audio":case"file":return m;default:{const b=y;throw new Error(`Unsupported user message part type: ${b}`)}}}),attachments:o??[],metadata:{custom:c?.custom??{}}};case"system":if(f.length!==1||f[0].type!=="text")throw new Error("System messages must have exactly one text message part.");return{...h,role:r,content:f,metadata:{custom:c?.custom??{}}};default:{const m=r;throw new Error(`Unknown message role: ${m}`)}}},xk={fromArray:t=>{const e=t.map(n=>ux(n,cx(),vk(!1,!1,!1)));return{messages:e.map((n,r)=>({parentId:r>0?e[r-1].id:null,message:n}))}}},Yy=t=>t.next?Yy(t.next):"current"in t?t:null,BK=class{constructor(t){this.func=t}_value=null;get value(){return this._value===null&&(this._value=this.func()),this._value}dirty(){this._value=null}},wk=class{messages=new Map;head=null;root={children:[],next:null};performOp(t,e,n){const r=e.prev??this.root,i=t??this.root;if(!(n==="relink"&&r===i)){if(n!=="link"&&(r.children=r.children.filter(s=>s!==e.current.id),r.next===e)){const s=r.children.at(-1),o=s?this.messages.get(s):null;if(o===void 0)throw new Error("MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.");r.next=o}if(n!=="cut"){for(let s=t;s;s=s.prev)if(s.current.id===e.current.id)throw new Error("MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.");i.children=[...i.children,e.current.id],(Yy(e)===this.head||i.next===null)&&(i.next=e),e.prev=t}}}_messages=new BK(()=>{const t=new Array(this.head?.level??0);for(let e=this.head;e;e=e.prev)t[e.level]=e.current;return t});get headId(){return this.head?.current.id??null}getMessages(){return this._messages.value}addOrUpdateMessage(t,e){const n=this.messages.get(e.id),r=t?this.messages.get(t):null;if(r===void 0)throw new Error("MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.");if(n){n.current=e,this.performOp(r,n,"relink"),this._messages.dirty();return}const i={prev:r,current:e,next:null,children:[],level:r?r.level+1:0};this.messages.set(e.id,i),this.performOp(r,i,"link"),this.head===r&&(this.head=i),this._messages.dirty()}getMessage(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.");return{parentId:e.prev?.current.id??null,message:e.current}}appendOptimisticMessage(t,e){let n;do n=MK();while(this.messages.has(n));return this.addOrUpdateMessage(t,ux(e,n,{type:"running"})),n}deleteMessage(t,e){const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.");const r=e===void 0?n.prev:e===null?null:this.messages.get(e);if(r===void 0)throw new Error("MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.");for(const i of n.children){const s=this.messages.get(i);if(!s)throw new Error("MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.");this.performOp(r,s,"relink")}this.performOp(null,n,"cut"),this.messages.delete(t),this.head===n&&(this.head=Yy(r??this.root)),this._messages.dirty()}getBranches(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.");const{children:n}=e.prev??this.root;return n}switchToBranch(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.");const n=e.prev??this.root;n.next=e,this.head=Yy(e),this._messages.dirty()}resetHead(t){if(t===null){this.clear();return}const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.");if(e.children.length>0){const n=r=>{for(const i of r.children){const s=this.messages.get(i);s&&(n(s),this.messages.delete(i))}};n(e),e.children=[],e.next=null}this.head=e;for(let n=e;n;n=n.prev)n.prev&&(n.prev.next=n);this._messages.dirty()}clear(){this.messages.clear(),this.head=null,this.root={children:[],next:null},this._messages.dirty()}export(){const t=[];for(const[,e]of this.messages)t.push({message:e.current,parentId:e.prev?.current.id??null});return{headId:this.head?.current.id??null,messages:t}}import({headId:t,messages:e}){for(const{message:n,parentId:r}of e)this.addOrUpdateMessage(r,n);this.resetHead(t??e.at(-1)?.message.id??null)}},hx=class{_subscriptions=new Set;_connection;get isConnected(){return!!this._connection}notifySubscribers(){for(const t of this._subscriptions)t()}_updateConnection(){if(this._subscriptions.size>0){if(this._connection)return;this._connection=this._connect()}else this._connection?.(),this._connection=void 0}subscribe(t){return this._subscriptions.add(t),this._updateConnection(),()=>{this._subscriptions.delete(t),this._updateConnection()}}},bs=Symbol("skip-update"),Sk=class extends hx{constructor(t){super(),this.binding=t}get path(){return this.binding.path}_previousStateDirty=!0;_previousState;getState=()=>{if(!this.isConnected||this._previousStateDirty){const t=this.binding.getState();t!==bs&&(this._previousState=t),this._previousStateDirty=!1}if(this._previousState===void 0)throw new Error("Entry not available in the store");return this._previousState};_connect(){const t=()=>{this._previousStateDirty=!0,this.notifySubscribers()};return this.binding.subscribe(t)}},C0=class{constructor(t,e){this._core=t,this._threadListBinding=e,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.switchTo=this.switchTo.bind(this),this.rename=this.rename.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this),this.delete=this.delete.bind(this),this.initialize=this.initialize.bind(this),this.generateTitle=this.generateTitle.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getState=this.getState.bind(this),this.detach=this.detach.bind(this)}getState(){return this._core.getState()}switchTo(){const t=this._core.getState();return this._threadListBinding.switchToThread(t.id)}rename(t){const e=this._core.getState();return this._threadListBinding.rename(e.id,t)}archive(){const t=this._core.getState();return this._threadListBinding.archive(t.id)}unarchive(){const t=this._core.getState();return this._threadListBinding.unarchive(t.id)}delete(){const t=this._core.getState();return this._threadListBinding.delete(t.id)}initialize(){const t=this._core.getState();return this._threadListBinding.initialize(t.id)}generateTitle(){const t=this._core.getState();return this._threadListBinding.generateTitle(t.id)}unstable_on(t,e){let n=this._core.getState().isMain,r=this._core.getState().id;return this.subscribe(()=>{const i=this._core.getState(),s=i.isMain,o=i.id;n===s&&r===o||(n=s,r=o,!(t==="switched-to"&&!s)&&(t==="switched-away"&&s||e()))})}subscribe(t){return this._core.subscribe(t)}detach(){const t=this._core.getState();this._threadListBinding.detach(t.id)}__internal_getRuntime(){return this}};function jK(t,e){if(t===void 0&&e===void 0)return!0;if(t===void 0||e===void 0)return!1;for(const n of Object.keys(t)){const r=t[n],i=e[n];if(!Object.is(r,i))return!1}return!0}var ds=class extends hx{constructor(t){super(),this.binding=t;const e=t.getState();if(e===bs)throw new Error("Entry not available in the store");this._previousState=e}get path(){return this.binding.path}_previousState;getState=()=>(this.isConnected||this._syncState(),this._previousState);_syncState(){const t=this.binding.getState();return t===bs||jK(t,this._previousState)?!1:(this._previousState=t,!0)}_connect(){const t=()=>{this._syncState()&&this.notifySubscribers()};return this.binding.subscribe(t)}},Eh=Symbol("innerMessage"),$K=t=>t[Eh],Fp=t=>t.content.filter(n=>n.type==="text").map(n=>n.text).join(`

`),TB=class{constructor(t){this._core=t,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.getState=this.getState.bind(this),this.remove=this.remove.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this._core.getState()}subscribe(t){return this._core.subscribe(t)}},RB=class extends TB{constructor(t,e){super(t),this._composerApi=e}remove(){const t=this._composerApi.getState();if(!t)throw new Error("Composer is not available");return t.removeAttachment(this.getState().id)}},VK=class extends RB{get source(){return"thread-composer"}},FK=class extends RB{get source(){return"edit-composer"}},zK=class extends TB{get source(){return"message"}constructor(t){super(t)}remove(){throw new Error("Message attachments cannot be removed")}},MB=class extends hx{constructor(t){super(),this.config=t}getState(){return this.config.binding.getState()}outerSubscribe(t){return this.config.binding.subscribe(t)}_connect(){const t=()=>{this.notifySubscribers()};let e=this.config.binding.getState(),n=e?.unstable_on(this.config.event,t);const r=()=>{const s=this.config.binding.getState();s!==e&&(e=s,n?.(),n=this.config.binding.getState()?.unstable_on(this.config.event,t))},i=this.outerSubscribe(r);return()=>{i?.(),n?.()}}},OB=Object.freeze([]),PB=Object.freeze({}),HK=t=>Object.freeze({type:"thread",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,attachments:t?.attachments??OB,text:t?.text??"",role:t?.role??"user",runConfig:t?.runConfig??PB,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""}),UK=t=>Object.freeze({type:"edit",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,text:t?.text??"",role:t?.role??"user",attachments:t?.attachments??OB,runConfig:t?.runConfig??PB,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""}),DB=class{constructor(t){this._core=t}get path(){return this._core.path}__internal_bindMethods(){this.setText=this.setText.bind(this),this.setRunConfig=this.setRunConfig.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.addAttachment=this.addAttachment.bind(this),this.reset=this.reset.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.send=this.send.bind(this),this.cancel=this.cancel.bind(this),this.setRole=this.setRole.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_on=this.unstable_on.bind(this)}setText(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setText(t)}setRunConfig(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setRunConfig(t)}addAttachment(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");return e.addAttachment(t)}reset(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.reset()}clearAttachments(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.clearAttachments()}send(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.send()}cancel(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.cancel()}setRole(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setRole(t)}subscribe(t){return this._core.subscribe(t)}_eventSubscriptionSubjects=new Map;unstable_on(t,e){let n=this._eventSubscriptionSubjects.get(t);return n||(n=new MB({event:t,binding:this._core}),this._eventSubscriptionSubjects.set(t,n)),n.subscribe(e)}},qK=class extends DB{get path(){return this._core.path}get type(){return"thread"}_getState;constructor(t){const e=new Sk({path:t.path,getState:()=>HK(t.getState()),subscribe:n=>t.subscribe(n)});super({path:t.path,getState:()=>t.getState(),subscribe:n=>e.subscribe(n)}),this._getState=e.getState.bind(e),this.__internal_bindMethods()}getState(){return this._getState()}getAttachmentByIndex(t){return new VK(new ds({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:t},ref:this.path.ref+`${this.path.ref}.attachments[${t}]`},getState:()=>{const n=this.getState().attachments[t];return n?{...n,source:"thread-composer"}:bs},subscribe:e=>this._core.subscribe(e)}),this._core)}},WK=class extends DB{constructor(t,e){const n=new Sk({path:t.path,getState:()=>UK(t.getState()),subscribe:r=>t.subscribe(r)});super({path:t.path,getState:()=>t.getState(),subscribe:r=>n.subscribe(r)}),this._beginEdit=e,this._getState=n.getState.bind(n),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"edit"}_getState;__internal_bindMethods(){super.__internal_bindMethods(),this.beginEdit=this.beginEdit.bind(this)}getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(t){return new FK(new ds({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:t},ref:this.path.ref+`${this.path.ref}.attachments[${t}]`},getState:()=>{const n=this.getState().attachments[t];return n?{...n,source:"edit-composer"}:bs},subscribe:e=>this._core.subscribe(e)}),this._core)}},lD=Symbol.for("aui.tool-response"),GK=class P_{get[lD](){return!0}artifact;result;isError;constructor(e){e.artifact!==void 0&&(this.artifact=e.artifact),this.result=e.result,this.isError=e.isError??!1}static[Symbol.hasInstance](e){return typeof e=="object"&&e!==null&&lD in e}static toResponse(e){return e instanceof P_?e:new P_({result:e===void 0?"<no result>":e})}},cD=class{constructor(t,e,n){this.contentBinding=t,this.messageApi=e,this.threadApi=n,this.__internal_bindMethods()}get path(){return this.contentBinding.path}__internal_bindMethods(){this.addToolResult=this.addToolResult.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this.contentBinding.getState()}addToolResult(t){const e=this.contentBinding.getState();if(!e)throw new Error("Message part is not available");if(e.type!=="tool-call")throw new Error("Tried to add tool result to non-tool message part");if(!this.messageApi)throw new Error("Message API is not available. This is likely a bug in assistant-ui.");if(!this.threadApi)throw new Error("Thread API is not available");const n=this.messageApi.getState();if(!n)throw new Error("Message is not available");const r=e.toolName,i=e.toolCallId,s=GK.toResponse(t);this.threadApi.getState().addToolResult({messageId:n.id,toolName:r,toolCallId:i,result:s.result,artifact:s.artifact,isError:s.isError})}subscribe(t){return this.contentBinding.subscribe(t)}},jb=class extends hx{constructor(t){super(),this.binding=t}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(t){return this.binding.subscribe(t)}_connect(){const t=()=>{this.notifySubscribers()};let e=this.binding.getState(),n=e?.subscribe(t);const r=()=>{const s=this.binding.getState();s!==e&&(e=s,n?.(),n=this.binding.getState()?.subscribe(t),t())},i=this.outerSubscribe(r);return()=>{i?.(),n?.()}}},A0=Object.freeze({type:"complete"}),KK=(t,e,n)=>{if(t.role!=="assistant")return A0;if(n.type==="tool-call")return n.result?A0:t.status;const r=e===Math.max(0,t.content.length-1);return t.status.type==="requires-action"?A0:r?t.status:A0},uD=(t,e)=>{const n=t.content[e];if(!n)return bs;const r=KK(t,e,n);return Object.freeze({...n,[Eh]:n[Eh],status:r})},YK=class{constructor(t,e){this._core=t,this._threadBinding=e,this.composer=new WK(new jb({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"edit"},getState:this._getEditComposerRuntimeCore,subscribe:n=>this._threadBinding.subscribe(n)}),()=>this._threadBinding.getState().beginEdit(this._core.getState().id)),this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.reload=this.reload.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getMessagePartByIndex=this.getMessagePartByIndex.bind(this),this.getMessagePartByToolCallId=this.getMessagePartByToolCallId.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_getCopyText=this.unstable_getCopyText.bind(this),this.speak=this.speak.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.submitFeedback=this.submitFeedback.bind(this),this.switchToBranch=this.switchToBranch.bind(this)}composer;_getEditComposerRuntimeCore=()=>this._threadBinding.getState().getEditComposer(this._core.getState().id);getState(){return this._core.getState()}reload(t={}){const e=this._getEditComposerRuntimeCore(),n=e??this._threadBinding.getState().composer,r=e??n,{runConfig:i=r.runConfig}=t,s=this._core.getState();if(s.role!=="assistant")throw new Error("Can only reload assistant messages");this._threadBinding.getState().startRun({parentId:s.parentId,sourceId:s.id,runConfig:i})}speak(){const t=this._core.getState();return this._threadBinding.getState().speak(t.id)}stopSpeaking(){const t=this._core.getState();if(this._threadBinding.getState().speech?.messageId===t.id)this._threadBinding.getState().stopSpeaking();else throw new Error("Message is not being spoken")}submitFeedback({type:t}){const e=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:e.id,type:t})}switchToBranch({position:t,branchId:e}){const n=this._core.getState();if(e&&t)throw new Error("May not specify both branchId and position");if(!e&&!t)throw new Error("Must specify either branchId or position");const i=this._threadBinding.getState().getBranches(n.id);let s=e;if(t==="previous"?s=i[n.branchNumber-2]:t==="next"&&(s=i[n.branchNumber]),!s)throw new Error("Branch not found");this._threadBinding.getState().switchToBranch(s)}unstable_getCopyText(){return Fp(this.getState())}subscribe(t){return this._core.subscribe(t)}getMessagePartByIndex(t){if(t<0)throw new Error("Message part index must be >= 0");return new cD(new ds({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[${t}]`,messagePartSelector:{type:"index",index:t}},getState:()=>uD(this.getState(),t),subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getMessagePartByToolCallId(t){return new cD(new ds({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(t)}]`,messagePartSelector:{type:"toolCallId",toolCallId:t}},getState:()=>{const e=this._core.getState(),n=e.content.findIndex(r=>r.type==="tool-call"&&r.toolCallId===t);return n===-1?bs:uD(e,n)},subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getAttachmentByIndex(t){return new zK(new ds({path:{...this.path,ref:this.path.ref+`${this.path.ref}.attachments[${t}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:t}},getState:()=>{const n=this.getState().attachments?.[t];return n?{...n,source:"message"}:bs},subscribe:e=>this._core.subscribe(e)}))}},XK=t=>({parentId:t.parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{},...t.stream?{stream:t.stream}:{}}),JK=t=>({parentId:t.parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{}}),QK=(t,e)=>typeof e=="string"?{createdAt:new Date,parentId:t.at(-1)?.id??null,sourceId:null,runConfig:{},role:"user",content:[{type:"text",text:e}],attachments:[],metadata:{custom:{}}}:{createdAt:e.createdAt??new Date,parentId:e.parentId??t.at(-1)?.id??null,sourceId:e.sourceId??null,role:e.role??"user",content:e.content,attachments:e.attachments??[],metadata:e.metadata??{custom:{}},runConfig:e.runConfig??{},startRun:e.startRun},ZK=(t,e)=>{const n=t.messages.at(-1);return Object.freeze({threadId:e.id,metadata:e,capabilities:t.capabilities,isDisabled:t.isDisabled,isLoading:t.isLoading,isRunning:n?.role!=="assistant"?!1:n.status.type==="running",messages:t.messages,state:t.state,suggestions:t.suggestions,extras:t.extras,speech:t.speech})},LB=class{get path(){return this._threadBinding.path}get __internal_threadBinding(){return this._threadBinding}_threadBinding;constructor(t,e){const n=new ds({path:t.path,getState:()=>ZK(t.getState(),e.getState()),subscribe:r=>{const i=t.subscribe(r),s=e.subscribe(r);return()=>{i(),s()}}});this._threadBinding={path:t.path,getState:()=>t.getState(),getStateState:()=>n.getState(),outerSubscribe:r=>t.outerSubscribe(r),subscribe:r=>t.subscribe(r)},this.composer=new qK(new jb({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:r=>this._threadBinding.subscribe(r)})),this.__internal_bindMethods()}__internal_bindMethods(){this.append=this.append.bind(this),this.unstable_resumeRun=this.unstable_resumeRun.bind(this),this.unstable_loadExternalState=this.unstable_loadExternalState.bind(this),this.startRun=this.startRun.bind(this),this.cancelRun=this.cancelRun.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.export=this.export.bind(this),this.import=this.import.bind(this),this.reset=this.reset.bind(this),this.getMessageByIndex=this.getMessageByIndex.bind(this),this.getMessageById=this.getMessageById.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getModelContext=this.getModelContext.bind(this),this.getModelConfig=this.getModelConfig.bind(this),this.getState=this.getState.bind(this)}composer;getState(){return this._threadBinding.getStateState()}append(t){this._threadBinding.getState().append(QK(this._threadBinding.getState().messages,t))}subscribe(t){return this._threadBinding.subscribe(t)}getModelContext(){return this._threadBinding.getState().getModelContext()}getModelConfig(){return this.getModelContext()}startRun(t){const e=t===null||typeof t=="string"?{parentId:t}:t;return this._threadBinding.getState().startRun(JK(e))}unstable_resumeRun(t){return this._threadBinding.getState().resumeRun(XK(t))}unstable_loadExternalState(t){this._threadBinding.getState().unstable_loadExternalState(t)}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}export(){return this._threadBinding.getState().export()}import(t){this._threadBinding.getState().import(t)}reset(t){this._threadBinding.getState().reset(t)}getMessageByIndex(t){if(t<0)throw new Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[${t}]`,messageSelector:{type:"index",index:t}},()=>{const e=this._threadBinding.getState().messages,n=e[t];if(n)return{message:n,parentId:e[t-1]?.id??null}})}getMessageById(t){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(t)}]`,messageSelector:{type:"messageId",messageId:t}},()=>this._threadBinding.getState().getMessageById(t))}_getMessageRuntime(t,e){return new YK(new ds({path:t,getState:()=>{const{message:n,parentId:r}=e()??{},{messages:i,speech:s}=this._threadBinding.getState();if(!n||r===void 0)return bs;const o=this._threadBinding.getState(),a=o.getBranches(n.id),c=o.getSubmittedFeedback(n.id);return{...n,[Eh]:n[Eh],isLast:i.at(-1)?.id===n.id,parentId:r,branchNumber:a.indexOf(n.id)+1,branchCount:a.length,speech:s?.messageId===n.id?s:void 0,submittedFeedback:c}},subscribe:n=>this._threadBinding.subscribe(n)}),this._threadBinding)}_eventSubscriptionSubjects=new Map;unstable_on(t,e){let n=this._eventSubscriptionSubjects.get(t);return n||(n=new MB({event:t,binding:this._threadBinding}),this._eventSubscriptionSubjects.set(t,n)),n.subscribe(e)}},eY=t=>({mainThreadId:t.mainThreadId,newThread:t.newThreadId,threads:t.threadIds,archivedThreads:t.archivedThreadIds,isLoading:t.isLoading,threadItems:t.threadData}),k0=(t,e)=>{if(e===void 0)return bs;const n=t.getItemById(e);return n?{id:n.id,threadId:n.id,remoteId:n.remoteId,externalId:n.externalId,title:n.title,status:n.status,isMain:n.id===t.mainThreadId}:bs},tY=class{constructor(t,e=LB){this._core=t,this._runtimeFactory=e;const n=new Sk({path:{},getState:()=>eY(t),subscribe:r=>t.subscribe(r)});this._getState=n.getState.bind(n),this._mainThreadListItemRuntime=new C0(new ds({path:{ref:"threadItems[main]",threadSelector:{type:"main"}},getState:()=>k0(this._core,this._core.mainThreadId),subscribe:r=>this._core.subscribe(r)}),this._core),this.main=new e(new jb({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>t.getMainThreadRuntimeCore(),subscribe:r=>t.subscribe(r)}),this._mainThreadListItemRuntime),this.__internal_bindMethods()}_getState;__internal_bindMethods(){this.switchToThread=this.switchToThread.bind(this),this.switchToNewThread=this.switchToNewThread.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getById=this.getById.bind(this),this.getItemById=this.getItemById.bind(this),this.getItemByIndex=this.getItemByIndex.bind(this),this.getArchivedItemByIndex=this.getArchivedItemByIndex.bind(this)}switchToThread(t){return this._core.switchToThread(t)}switchToNewThread(){return this._core.switchToNewThread()}getState(){return this._getState()}subscribe(t){return this._core.subscribe(t)}_mainThreadListItemRuntime;main;get mainItem(){return this._mainThreadListItemRuntime}getById(t){return new this._runtimeFactory(new jb({path:{ref:"threads[threadId="+JSON.stringify(t)+"]",threadSelector:{type:"threadId",threadId:t}},getState:()=>this._core.getThreadRuntimeCore(t),subscribe:e=>this._core.subscribe(e)}),this.mainItem)}getItemByIndex(t){return new C0(new ds({path:{ref:`threadItems[${t}]`,threadSelector:{type:"index",index:t}},getState:()=>k0(this._core,this._core.threadIds[t]),subscribe:e=>this._core.subscribe(e)}),this._core)}getArchivedItemByIndex(t){return new C0(new ds({path:{ref:`archivedThreadItems[${t}]`,threadSelector:{type:"archiveIndex",index:t}},getState:()=>k0(this._core,this._core.archivedThreadIds[t]),subscribe:e=>this._core.subscribe(e)}),this._core)}getItemById(t){return new C0(new ds({path:{ref:`threadItems[threadId=${t}]`,threadSelector:{type:"threadId",threadId:t}},getState:()=>k0(this._core,t),subscribe:e=>this._core.subscribe(e)}),this._core)}},nY=class{accept="image/*";async add(t){return{id:t.file.name,type:"image",name:t.file.name,contentType:t.file.type,file:t.file,status:{type:"requires-action",reason:"composer-send"}}}async send(t){return{...t,status:{type:"complete"},content:[{type:"image",image:await rY(t.file)}]}}async remove(){}},rY=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)}),iY=class{accept="text/plain,text/html,text/markdown,text/csv,text/xml,text/json,text/css";async add(t){return{id:t.file.name,type:"document",name:t.file.name,contentType:t.file.type,file:t.file,status:{type:"requires-action",reason:"composer-send"}}}async send(t){return{...t,status:{type:"complete"},content:[{type:"text",text:`<attachment name=${t.name}>
${await sY(t.file)}
</attachment>`}]}}async remove(){}},sY=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsText(t)});function E2(t,e){if(e==="*")return!0;const n=e.split(",").map(s=>s.trim().toLowerCase()),r="."+t.name.split(".").pop().toLowerCase(),i=t.type.toLowerCase();for(const s of n){if(s.startsWith(".")&&s===r||s.includes("/")&&s===i)return!0;if((s==="image/*"||s==="video/*"||s==="audio/*")&&s.endsWith("/*")){const o=s.split("/")[0];if(i.startsWith(o+"/"))return!0}}return!1}var oY=class{_adapters;accept;constructor(t){this._adapters=t;const e=t.findIndex(n=>n.accept==="*");if(e!==-1){if(e!==t.length-1)throw new Error("A wildcard adapter (handling all files) can only be specified as the last adapter.");this.accept="*"}else this.accept=t.map(n=>n.accept).join(",")}add(t){for(const e of this._adapters)if(E2(t.file,e.accept))return e.add(t);throw new Error("No matching adapter found for file")}async send(t){const e=this._adapters.slice();for(const n of e)if(E2(t.file,n.accept))return n.send(t);throw new Error("No matching adapter found for attachment")}async remove(t){const e=this._adapters.slice();for(const n of e)if(E2({name:t.name,type:t.contentType},n.accept))return n.remove(t);throw new Error("No matching adapter found for attachment")}},aY=E.createContext(null),lY=()=>E.useContext(aY),Wl=Object.freeze([]),oc="DEFAULT_THREAD_ID",cY=Object.freeze([oc]),IB=Object.freeze({id:oc,remoteId:void 0,externalId:void 0,status:"regular"}),uY=Promise.resolve(),hD=Object.freeze({[oc]:IB}),hY=class{constructor(t={},e){this.adapter=t,this.threadFactory=e,this._mainThread=this.threadFactory(),this.__internal_setAdapter(t,!0)}_mainThreadId=oc;_threads=cY;_archivedThreads=Wl;_threadData=hD;get isLoading(){return this.adapter.isLoading??!1}get newThreadId(){}get threadIds(){return this._threads}get archivedThreadIds(){return this._archivedThreads}get threadData(){return this._threadData}getLoadThreadsPromise(){return uY}_mainThread;get mainThreadId(){return this._mainThreadId}getMainThreadRuntimeCore(){return this._mainThread}getThreadRuntimeCore(){throw new Error("Method not implemented.")}getItemById(t){for(const e of this.adapter.threads??[])if(e.id===t)return e;for(const e of this.adapter.archivedThreads??[])if(e.id===t)return e;if(t===oc)return IB}__internal_setAdapter(t,e=!1){const n=this.adapter;this.adapter=t;const r=t.threadId??oc,i=t.threads??Wl,s=t.archivedThreads??Wl,o=n.threadId??oc,a=n.threads??Wl,c=n.archivedThreads??Wl;!e&&o===r&&a===i&&c===s||(this._threadData={...hD,...Object.fromEntries(t.threads?.map(h=>[h.id,{...h,remoteId:h.remoteId,externalId:h.externalId,status:"regular"}])??[]),...Object.fromEntries(t.archivedThreads?.map(h=>[h.id,{...h,remoteId:h.remoteId,externalId:h.externalId,status:"archived"}])??[])},a!==i&&(this._threads=this.adapter.threads?.map(h=>h.id)??Wl),c!==s&&(this._archivedThreads=this.adapter.archivedThreads?.map(h=>h.id)??Wl),o!==r&&(this._mainThreadId=r,this._mainThread=this.threadFactory()),this._notifySubscribers())}async switchToThread(t){if(this._mainThreadId===t)return;const e=this.adapter.onSwitchToThread;if(!e)throw new Error("External store adapter does not support switching to thread");e(t)}async switchToNewThread(){const t=this.adapter.onSwitchToNewThread;if(!t)throw new Error("External store adapter does not support switching to new thread");t()}async rename(t,e){const n=this.adapter.onRename;if(!n)throw new Error("External store adapter does not support renaming");n(t,e)}async detach(){}async archive(t){const e=this.adapter.onArchive;if(!e)throw new Error("External store adapter does not support archiving");e(t)}async unarchive(t){const e=this.adapter.onUnarchive;if(!e)throw new Error("External store adapter does not support unarchiving");e(t)}async delete(t){const e=this.adapter.onDelete;if(!e)throw new Error("External store adapter does not support deleting");e(t)}initialize(){throw new Error("Method not implemented.")}generateTitle(){throw new Error("Method not implemented.")}_subscriptions=new Set;subscribe(t){return this._subscriptions.add(t),()=>this._subscriptions.delete(t)}_notifySubscribers(){for(const t of this._subscriptions)t()}},fD=class{cache=new WeakMap;convertMessages(t,e){return t.map((n,r)=>{const i=this.cache.get(n),s=e(i,n,r);return this.cache.set(n,s),s})}},fY=class extends CB{constructor(t,e,{parentId:n,message:r}){super(),this.runtime=t,this.endEditCallback=e,this._parentId=n,this._sourceId=r.id,this._previousText=Fp(r),this.setText(this._previousText),this.setRole(r.role),this.setAttachments(r.attachments??[]),this._nonTextParts=r.content.filter(i=>i.type!=="text"),this.setRunConfig({...t.composer.runConfig})}get canCancel(){return!0}getAttachmentAdapter(){return this.runtime.adapters?.attachments}_nonTextParts;_previousText;_parentId;_sourceId;async handleSend(t){Fp(t)!==this._previousText&&this.runtime.append({...t,content:[...t.content,...this._nonTextParts],parentId:this._parentId,sourceId:this._sourceId}),this.handleCancel()}handleCancel(){this.endEditCallback(),this._notifySubscribers()}},dY=class{constructor(t){this._contextProvider=t}_subscriptions=new Set;_isInitialized=!1;repository=new wk;get messages(){return this.repository.getMessages()}get state(){let t;for(const e of this.messages)if(e.role==="assistant"){t=e;break}return t?.metadata.unstable_state??null}composer=new AB(this);getModelContext(){return this._contextProvider.getModelContext()}_editComposers=new Map;getEditComposer(t){return this._editComposers.get(t)}beginEdit(t){if(this._editComposers.has(t))throw new Error("Edit already in progress");this._editComposers.set(t,new fY(this,()=>this._editComposers.delete(t),this.repository.getMessage(t))),this._notifySubscribers()}getMessageById(t){try{return this.repository.getMessage(t)}catch{return}}getBranches(t){return this.repository.getBranches(t)}switchToBranch(t){this.repository.switchToBranch(t),this._notifySubscribers()}_notifySubscribers(){for(const t of this._subscriptions)t()}_notifyEventSubscribers(t){const e=this._eventSubscribers.get(t);if(e)for(const n of e)n()}subscribe(t){return this._subscriptions.add(t),()=>this._subscriptions.delete(t)}_submittedFeedback={};getSubmittedFeedback(t){return this._submittedFeedback[t]}submitFeedback({messageId:t,type:e}){const n=this.adapters?.feedback;if(!n)throw new Error("Feedback adapter not configured");const{message:r}=this.repository.getMessage(t);n.submit({message:r,type:e}),this._submittedFeedback[t]={type:e},this._notifySubscribers()}_stopSpeaking;speech;speak(t){const e=this.adapters?.speech;if(!e)throw new Error("Speech adapter not configured");const{message:n}=this.repository.getMessage(t);this._stopSpeaking?.();const r=e.speak(Fp(n)),i=r.subscribe(()=>{r.status.type==="ended"?(this._stopSpeaking=void 0,this.speech=void 0):this.speech={messageId:t,status:r.status},this._notifySubscribers()});this.speech={messageId:t,status:r.status},this._notifySubscribers(),this._stopSpeaking=()=>{r.cancel(),i(),this.speech=void 0,this._stopSpeaking=void 0}}stopSpeaking(){if(!this._stopSpeaking)throw new Error("No message is being spoken");this._stopSpeaking(),this._notifySubscribers()}ensureInitialized(){this._isInitialized||(this._isInitialized=!0,this._notifyEventSubscribers("initialize"))}export(){return this.repository.export()}import(t){this.ensureInitialized(),this.repository.clear(),this.repository.import(t),this._notifySubscribers()}reset(t){this.import(xk.fromArray(t??[]))}_eventSubscribers=new Map;unstable_on(t,e){if(t==="model-context-update")return this._contextProvider.subscribe?.(e)??(()=>{});const n=this._eventSubscribers.get(t);return n?n.add(e):this._eventSubscribers.set(t,new Set([e])),()=>{this._eventSubscribers.get(t).delete(e)}}},pY=Object.freeze([]),mY=(t,e)=>t&&e[e.length-1]?.role!=="assistant",gY=class extends dY{_assistantOptimisticId=null;_capabilities={switchToBranch:!1,edit:!1,reload:!1,cancel:!1,unstable_copy:!1,speech:!1,attachments:!1,feedback:!1};get capabilities(){return this._capabilities}_messages;isDisabled;get isLoading(){return this._store.isLoading??!1}get messages(){return this._messages}get adapters(){return this._store.adapters}suggestions=[];extras=void 0;_converter=new fD;_store;beginEdit(t){if(!this._store.onEdit)throw new Error("Runtime does not support editing.");super.beginEdit(t)}constructor(t,e){super(t),this.__internal_setAdapter(e)}__internal_setAdapter(t){if(this._store===t)return;const e=t.isRunning??!1;this.isDisabled=t.isDisabled??!1;const n=this._store;this._store=t,this.extras=t.extras,this.suggestions=t.suggestions??pY,this._capabilities={switchToBranch:this._store.setMessages!==void 0,edit:this._store.onEdit!==void 0,reload:this._store.onReload!==void 0,cancel:this._store.onCancel!==void 0,speech:this._store.adapters?.speech!==void 0,unstable_copy:this._store.unstable_capabilities?.copy!==!1,attachments:!!this._store.adapters?.attachments,feedback:!!this._store.adapters?.feedback};let r;if(t.messageRepository){if(n&&n.isRunning===t.isRunning&&n.messageRepository===t.messageRepository){this._notifySubscribers();return}this.repository.clear(),this._assistantOptimisticId=null,this.repository.import(t.messageRepository),r=this.repository.getMessages()}else if(t.messages){if(n){if(n.convertMessage!==t.convertMessage)this._converter=new fD;else if(n.isRunning===t.isRunning&&n.messages===t.messages){this._notifySubscribers();return}}r=t.convertMessage?this._converter.convertMessages(t.messages,(i,s,o)=>{if(!t.convertMessage)return s;const a=o===t.messages.length-1,c=vk(a,e,!1);if(i&&(i.role!=="assistant"||!PK(i.status)||i.status===c))return i;const h=t.convertMessage(s,o),f=ux(h,o.toString(),c);return f[Eh]=s,f}):t.messages;for(let i=0;i<r.length;i++){const s=r[i],o=r[i-1];this.repository.addOrUpdateMessage(o?.id??null,s)}}else throw new Error("ExternalStoreAdapter must provide either 'messages' or 'messageRepository'");r.length>0&&this.ensureInitialized(),(n?.isRunning??!1)!==(t.isRunning??!1)&&(t.isRunning?this._notifyEventSubscribers("run-start"):this._notifyEventSubscribers("run-end")),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null),mY(e,r)&&(this._assistantOptimisticId=this.repository.appendOptimisticMessage(r.at(-1)?.id??null,{role:"assistant",content:[]})),this.repository.resetHead(this._assistantOptimisticId??r.at(-1)?.id??null),this._messages=this.repository.getMessages(),this._notifySubscribers()}switchToBranch(t){if(!this._store.setMessages)throw new Error("Runtime does not support switching branches.");this.repository.switchToBranch(t),this.updateMessages(this.repository.getMessages())}async append(t){if(t.parentId!==(this.messages.at(-1)?.id??null)){if(!this._store.onEdit)throw new Error("Runtime does not support editing messages.");await this._store.onEdit(t)}else await this._store.onNew(t)}async startRun(t){if(!this._store.onReload)throw new Error("Runtime does not support reloading messages.");await this._store.onReload(t.parentId,t)}async resumeRun(t){if(!this._store.onResume)throw new Error("Runtime does not support resuming runs.");await this._store.onResume(t)}unstable_loadExternalState(t){if(!this._store.onLoadExternalState)throw new Error("Runtime does not support importing states.");this._store.onLoadExternalState(t)}cancelRun(){if(!this._store.onCancel)throw new Error("Runtime does not support cancelling runs.");this._store.onCancel(),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null);let t=this.repository.getMessages();const e=t[t.length-1];e?.role==="user"&&e.id===t.at(-1)?.id?(this.repository.deleteMessage(e.id),this.composer.text.trim()||this.composer.setText(Fp(e)),t=this.repository.getMessages()):this._notifySubscribers(),setTimeout(()=>{this.updateMessages(t)},0)}addToolResult(t){if(!this._store.onAddToolResult&&!this._store.onAddToolResult)throw new Error("Runtime does not support tool results.");this._store.onAddToolResult?.(t)}reset(t){const e=new wk;e.import(xk.fromArray(t??[])),this.updateMessages(e.getMessages())}import(t){this._assistantOptimisticId=null,super.import(t),this._store.onImport&&this._store.onImport(this.repository.getMessages())}updateMessages=t=>{this._store.convertMessage!==void 0?this._store.setMessages?.(t.flatMap($K).filter(n=>n!=null)):this._store.setMessages?.(t)}},dD=t=>t.adapters?.threadList??{},yY=class extends _B{threads;constructor(t){super(),this.threads=new hY(dD(t),()=>new gY(this._contextProvider,t))}setAdapter(t){this.threads.__internal_setAdapter(dD(t)),this.threads.getMainThreadRuntimeCore().__internal_setAdapter(t)}},bY=t=>{const[e]=E.useState(()=>new yY(t));E.useEffect(()=>{e.setAdapter(t)});const{modelContext:n}=lY()??{};return E.useEffect(()=>{if(n)return e.registerModelContextProvider(n)},[n,e]),E.useMemo(()=>new KB(e),[e])},fx=t=>typeof t=="string"?{scope:t.split(".")[0],event:t}:{scope:t.scope,event:t.event},mp=(t,e,n)=>e===t;const pD=t=>{let e;const n=new Set,r=(h,f)=>{const d=typeof h=="function"?h(e):h;if(!Object.is(d,e)){const m=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(y=>y(e,m))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h))},c=e=t(r,i,a);return a},vY=(t=>t?pD(t):pD),xY=t=>t;function wY(t,e=xY){const n=xe.useSyncExternalStore(t.subscribe,xe.useCallback(()=>e(t.getState()),[t,e]),xe.useCallback(()=>e(t.getInitialState()),[t,e]));return xe.useDebugValue(n),n}const mD=t=>{const e=vY(t),n=r=>wY(e,r);return Object.assign(n,e),n},na=(t=>t?mD(t):mD);var SY=()=>{const t=new Set;return na(()=>({isAtBottom:!0,scrollToBottom:()=>{for(const e of t)e()},onScrollToBottom:e=>(t.add(e),()=>{t.delete(e)})}))};function _Y(t,e){function n(r){const i=E.useContext(t);if(!r?.optional&&!i)throw new Error(`This component must be used within ${e}.`);return i}return n}function NB(t,e){function n(i){const s=t(i);return s?s[e]:null}function r(i){let s=!1,o;typeof i=="function"?o=i:i&&typeof i=="object"&&(s=!!i.optional,o=i.selector);const a=n({optional:s});return a?o?a(o):a():null}return{[e]:r,[`${e}Store`]:n}}var BB=E.createContext(null),CY=_Y(BB,"ThreadPrimitive.Viewport"),{useThreadViewport:AY,useThreadViewportStore:jB}=NB(CY,"useThreadViewport"),$b=t=>t,kY=()=>{const t=jB({optional:!0}),[e]=E.useState(()=>SY());return E.useEffect(()=>t?.getState().onScrollToBottom(()=>{e.getState().scrollToBottom()}),[t,e]),E.useEffect(()=>{if(t)return e.subscribe(n=>{t.getState().isAtBottom!==n.isAtBottom&&$b(t).setState({isAtBottom:n.isAtBottom})})},[e,t]),e},$B=({children:t})=>{const e=kY(),[n]=E.useState(()=>({useThreadViewport:e}));return C.jsx(BB.Provider,{value:n,children:t})},Gn=t=>{const e=t.get;return e.source=t.source,e.query=t.query,e},ul=()=>()=>{},VB=E.createContext({threads:Gn({source:null,query:{},get:()=>{throw new Error("Threads is only available inside <AssistantProvider />")}}),toolUIs:Gn({source:null,query:{},get:()=>{throw new Error("ToolUIs is only available inside <AssistantProvider />")}}),threadListItem:Gn({source:null,query:{},get:()=>{throw new Error("ThreadListItem is only available inside <AssistantProvider />")}}),thread:Gn({source:null,query:{},get:()=>{throw new Error("Thread is only available inside <AssistantProvider />")}}),composer:Gn({source:null,query:{},get:()=>{throw new Error("Composer is only available inside <AssistantProvider />")}}),message:Gn({source:null,query:{},get:()=>{throw new Error("Message is only available inside <ThreadPrimitive.Messages />")}}),part:Gn({source:null,query:{},get:()=>{throw new Error("Part is only available inside <MessagePrimitive.Parts />")}}),attachment:Gn({source:null,query:{},get:()=>{throw new Error("Attachment is only available inside <MessagePrimitive.Attachments /> or <ComposerPrimitive.Attachments />")}}),subscribe:ul,flushSync:ul,on:t=>{const{scope:e}=fx(t);throw new Error(`Event scope is not available in this component: ${e}`)},registerModelContextProvider:()=>{throw new Error("Registering model context providers is only available inside <AssistantProvider />")},__internal_getRuntime:()=>null}),Ei=()=>E.useContext(VB),EY=(t,e)=>t===ul?e:e===ul?t:(...n)=>{t(...n),e(...n)},TY=(t,e)=>t===ul?e:e===ul?t:(...n)=>{const r=t(...n),i=e(...n);return()=>{r(),i()}},RY=(t,e)=>{const n=e.subscribe,r=e.flushSync;return{...t,...e,subscribe:TY(t.subscribe,n??ul),flushSync:EY(t.flushSync,r??ul)}},dx=({api:t,children:e})=>{const n=Ei(),r=E.useMemo(()=>RY(n,t),[n,t]);return C.jsx(VB,{value:r,children:C.jsx($B,{children:e})})};function Jn(t){return(e,n)=>({type:t,props:e,...n?.key!==void 0&&{key:n.key}})}var gp=null;function MY(t,e){t.currentIndex=0;const n=gp;gp=t;try{if(e(),t.isFirstRender=!1,t.cells.length!==t.currentIndex)throw new Error(`Rendered ${t.currentIndex} hooks but expected ${t.cells.length}. Hooks must be called in the exact same order in every render.`)}finally{gp=n}}function _k(){if(!gp)throw new Error("No resource fiber available");return gp}var OY=t=>{if(t.renderContext)throw new Error("Resource updated during render");if(t.isNeverMounted)throw new Error("Resource updated before mount");t.isMounted&&t.scheduleRerender()};function PY(t){const e=_k(),n=e.currentIndex++;if(!e.isFirstRender&&n>=e.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!e.cells[n]){const s={type:"state",value:typeof t=="function"?t():t,set:o=>{const a=s.value,c=typeof o=="function"?o(a):o;Object.is(a,c)||(s.value=c,OY(e))}};e.cells[n]=s}const r=e.cells[n];if(r.type!=="state")throw new Error("Hook order changed between renders");return r}function Go(t){const e=PY(t);return[e.value,e.set]}function DY(){const t=_k(),e=t.currentIndex++;if(!t.isFirstRender&&e>=t.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!t.cells[e]){const r={type:"effect",mounted:!1};t.cells[e]=r}if(t.cells[e].type!=="effect")throw new Error("Hook order changed between renders");return e}function vs(t,e){const n=_k(),r=DY();n.renderContext.commitTasks.push({effect:t,deps:e,cellIndex:r})}function Vb(t){const[e]=Go(()=>({current:t!==void 0&&typeof t=="function"?t():t}));return e}var LY=(t,e)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0},Ut=(t,e)=>{const n=Vb(()=>({value:t(),deps:e}));return LY(n.current.deps,e)||(n.current.value=t(),n.current.deps=e),n.current.value};function IY(t,e){t.commitTasks.forEach(n=>{const r=n.cellIndex,i=e.cells[r];if(i.type!=="effect")throw new Error("Cannot find effect cell");let s=!0;if(i.deps!==void 0&&n.deps!==void 0&&(s=i.deps.length!==n.deps.length||i.deps.some((o,a)=>!Object.is(o,n.deps[a]))),s){if(i.mounted){if(typeof i.deps!=typeof n.deps)throw new Error("tapEffect called with and without dependencies across re-renders");try{i.mounted&&i.cleanup&&i.cleanup()}finally{i.mounted=!1}}try{const o=n.effect();if(o!==void 0&&typeof o!="function")throw new Error(`An effect function must either return a cleanup function or nothing. Received: ${typeof o}`);i.mounted=!0,i.cleanup=typeof o=="function"?o:void 0,i.deps=n.deps}catch(o){throw o}}})}function NY(t){let e=null;for(let n=t.cells.length-1;n>=0;n--){const r=t.cells[n];if(r?.type==="effect"&&r.mounted&&r.cleanup)try{r.cleanup()}catch(i){e==null&&(e=i)}finally{r.mounted=!1}}if(e!=null)throw e}function px(t,e){return{resourceFn:t,scheduleRerender:e,cells:[],currentIndex:0,renderContext:void 0,isFirstRender:!0,isMounted:!1,isNeverMounted:!0}}function hh(t){t.isMounted=!1,NY(t)}function zp(t,e){const n={commitTasks:[],props:e,state:void 0};return MY(t,()=>{t.renderContext=n;try{n.state=t.resourceFn(e)}finally{t.renderContext=void 0}}),n}function fh(t,e){t.isMounted=!0,t.isNeverMounted=!1,IY(e,t)}function BY(t,e){const[n,r]=Go({}),i=Ut(()=>px(t.type,()=>r({})),[t.type]),s=e?Ut(()=>t.props,e):t.props,o=Ut(()=>zp(i,s),[i,s,n]);return vs(()=>()=>hh(i),[i]),vs(()=>{fh(i,o)},[i,o]),o.state}function xs(t){return t.type(t.props)}function jY(t){const e=new Set;t.forEach((a,c)=>{if(a.key===void 0)throw new Error(`tapResources: All resource elements must have a key. Element at index ${c} is missing a key.`);if(e.has(a.key))throw new Error(`tapResources: Duplicate key "${a.key}" found. All keys must be unique.`);e.add(a.key)});const[n,r]=Go({}),i=Ut(()=>new Map(t.map(a=>[a.key,a])),[t]),[s]=Go(()=>new Map),o=Ut(()=>{const a=new Map,c=new Set;return i.forEach((h,f)=>{c.add(f);let d=s.get(f);(!d||d.resourceFn!==h.type)&&(d&&hh(d),d=px(h.type,()=>r({})),s.set(f,d));const m=zp(d,h.props);a.set(f,m)}),s.forEach((h,f)=>{c.has(f)||(hh(h),s.delete(f))}),a},[i,n]);return vs(()=>{o.forEach((a,c)=>{const h=s.get(c);h&&fh(h,a)})},[o,s]),vs(()=>()=>{s.forEach(a=>{hh(a)}),s.clear()},[s]),Ut(()=>t.map(a=>o.get(a.key)?.state),[t,o])}var D_=[],L_=!1;function $Y(){L_=!1;const t=D_;D_=[];for(const e of t)try{e()}catch(n){console.error("Error in scheduled task:",n)}}function VY(t){D_.push(t),L_||(L_=!0,queueMicrotask($Y))}var FY=class FB{constructor(e){this._task=e}_isDirty=!1;_hasScheduledTask=!1;_isFlushing=!1;static MAX_FLUSH_DEPTH=50;get isDirty(){return this._isDirty}markDirty(){this._isDirty=!0,!(this._hasScheduledTask||this._isFlushing)&&(this._hasScheduledTask=!0,VY(()=>{this._hasScheduledTask=!1,this.flushSync()}))}flushSync(){if(this._isFlushing)return;this._isFlushing=!0;let e=0;try{for(;this._isDirty;){if(e++,e>FB.MAX_FLUSH_DEPTH)throw new Error("Maximum update depth exceeded. This can happen when a resource repeatedly calls setState inside tapEffect.");this._isDirty=!1,this._task()}}finally{this._isFlushing=!1}}},zY=({element:t,onUpdateInput:e,onFlushSync:n,onDispose:r})=>{const[i,s]=Go(t.props),o=xs({type:t.type,props:i}),a=Vb(new Set).current,c=Vb(o);return vs(()=>{o!==c.current&&(c.current=o,a.forEach(f=>f()))}),Ut(()=>({getState:()=>c.current,subscribe:f=>(a.add(f),()=>a.delete(f)),updateInput:f=>{e(),s(()=>f)},flushSync:n,dispose:r}),[])},HY=(t,e=!1)=>{let n=!e;const r={element:t,onUpdateInput:()=>{n||(n=!0,fh(s,o))},onFlushSync:()=>{i.flushSync()},onDispose:()=>hh(s)},i=new FY(()=>{o=zp(s,r),n&&fh(s,o)}),s=px(zY,()=>i.markDirty());let o=zp(s,r);return n&&fh(s,o),o.state},yp=Symbol("tap.Context"),UY=t=>({[yp]:t}),qY=(t,e,n)=>{const r=t[yp];t[yp]=e;try{return n()}finally{t[yp]=r}},WY=t=>t[yp],zB=Jn(t=>{const e=Ut(()=>HY(t,!0),[t.type]);return vs(()=>{e.updateInput(t.props)}),e}),GY=class{constructor(t){this.getApi=t}get(t,e){return this.getApi()[e]}ownKeys(){return Object.keys(this.getApi())}has(t,e){return e in this.getApi()}getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(this.getApi(),e)}set(){return!1}defineProperty(){return!1}deleteProperty(){return!1}},yo=(t,e)=>{const n=Vb(()=>t);vs(()=>{n.current=t});const r=Ut(()=>new Proxy({},new GY(()=>n.current)),[]),i=e?.key,s=t.getState();return Ut(()=>({key:i,state:s,api:r}),[s,i])},KY=globalThis.__ASSISTANT_UI_DISABLE_LAYOUT_EFFECT__===!0,gD=KY?E.useEffect:E.useLayoutEffect;function HB(t){const[,e]=E.useState({}),n=E.useMemo(()=>px(t.type,()=>e({})),[t.type]),r=zp(n,t.props);return gD(()=>()=>hh(n),[]),gD(()=>{fh(n,r)}),r.state}var YY=Jn(()=>Ut(()=>{const e=new Map;return{on:(n,r)=>{e.has(n)||e.set(n,new Set);const i=e.get(n);return i.add(r),()=>{i.delete(r),i.size===0&&e.delete(n)}},emit:(n,r)=>{const i=e.get(n),s=e.get("*");!i&&!s||queueMicrotask(()=>{if(i)for(const o of i)o(r);if(s)for(const o of s)o({event:n,payload:r})})}}},[])),XY=Jn(()=>{const[t,e]=Go(()=>({}));return yo({getState:()=>t,setToolUI:(n,r)=>(e(i=>({...i,[n]:[...i[n]??[],r]})),()=>{e(i=>({...i,[n]:i[n]?.filter(s=>s!==r)??[]}))})})}),UB=UY(null),JY=(t,e)=>qY(UB,t,e),Ck=()=>{const t=WY(UB);if(!t)throw new Error("Events context is not available");return t},QY=Jn(({threads:t,registerModelContextProvider:e,__internal_runtime:n})=>{const r=xs(YY()),{threads:i,toolUIs:s}=JY(r,()=>({toolUIs:xs(XY()),threads:BY(t,[t])})),o=Ut(()=>({threads:i.state,toolUIs:s.state}),[i.state,s.state]);return yo({getState:()=>o,threads:i.api,toolUIs:s.api,on:r.on,registerModelContextProvider:e,__internal_getRuntime:()=>n??null})}),ZY=t=>{const e=()=>t.getState().api.threads.item("main");return{threads:Gn({source:"root",query:{},get:()=>t.getState().api.threads}),toolUIs:Gn({source:"root",query:{},get:()=>t.getState().api.toolUIs}),thread:Gn({source:"threads",query:{type:"main"},get:()=>t.getState().api.threads.thread("main")}),threadListItem:Gn({source:"threads",query:{type:"main"},get:()=>e()}),composer:Gn({source:"thread",query:{},get:()=>t.getState().api.threads.thread("main").composer}),registerModelContextProvider(n){return t.getState().api.registerModelContextProvider(n)},__internal_getRuntime(){return t.getState().api.__internal_getRuntime()},on(n,r){const{event:i,scope:s}=fx(n);if(s==="*")return t.getState().api.on(i,r);if(mp("thread",s)||mp("thread-list-item",s)||mp("composer",s))return t.getState().api.on(i,o=>{o.threadId===e().getState().id&&r(o)});throw new Error(`Event scope is not available in this component: ${s}`)},subscribe:t.subscribe,flushSync:t.flushSync}},eX=t=>{const e=HB(zB(QY(t)));return E.useMemo(()=>ZY(e),[e])},Oc=t=>{const[,e]=Go(t.getState);return vs(()=>(e(t.getState()),t.subscribe(()=>{e(t.getState())})),[t]),t.getState()},tX=Jn(({runtime:t})=>{const e=Oc(t),n=Ck();return vs(()=>{const r=[],i=["switched-to","switched-away"];for(const s of i){const o=t.unstable_on(s,()=>{n.emit(`thread-list-item.${s}`,{threadId:t.getState().id})});r.push(o)}return()=>{for(const s of r)s()}},[t,n]),yo({getState:()=>e,switchTo:t.switchTo,rename:t.rename,archive:t.archive,unarchive:t.unarchive,delete:t.delete,generateTitle:t.generateTitle,initialize:t.initialize,detach:t.detach,__internal_getRuntime:()=>t},{key:e.id})}),Hp=t=>{const e=jY(t);return{state:e.map(n=>n.state),api:n=>{const r="index"in n?e[n.index]?.api:e.find(i=>i.key===n.key)?.api;if(!r)throw new Error(`tapLookupResources: Resource not found for lookup: ${JSON.stringify(n)}`);return r}}},qB=Jn(({runtime:t})=>{const e=Oc(t);return yo({getState:()=>e,remove:t.remove,__internal_getRuntime:()=>t},{key:e.id})}),nX=Jn(({runtime:t,index:e})=>{const n=Ut(()=>t.getAttachmentByIndex(e),[t,e]);return xs(qB({runtime:n}))}),WB=Jn(({threadIdRef:t,messageIdRef:e,runtime:n})=>{const r=Oc(n),i=Ck();vs(()=>{const a=[],c=["send","attachment-add"];for(const h of c){const f=n.unstable_on(h,()=>{i.emit(`composer.${h}`,{threadId:t.current,...e&&{messageId:e.current}})});a.push(f)}return()=>{for(const h of a)h()}},[n,i,t,e]);const s=Hp(r.attachments.map((a,c)=>nX({runtime:n,index:c},{key:c}))),o=Ut(()=>({text:r.text,role:r.role,attachments:s.state,runConfig:r.runConfig,isEditing:r.isEditing,canCancel:r.canCancel,attachmentAccept:r.attachmentAccept,isEmpty:r.isEmpty,type:r.type??"thread"}),[r,s.state]);return yo({getState:()=>o,setText:n.setText,setRole:n.setRole,setRunConfig:n.setRunConfig,addAttachment:n.addAttachment,reset:n.reset,clearAttachments:n.clearAttachments,send:n.send,cancel:n.cancel,beginEdit:n.beginEdit??(()=>{throw new Error("beginEdit is not supported in this runtime")}),attachment:a=>"id"in a?s.api({key:a.id}):s.api(a),__internal_getRuntime:()=>n})}),rX=Jn(({runtime:t})=>{const e=Oc(t);return yo({getState:()=>e,addToolResult:n=>t.addToolResult(n),__internal_getRuntime:()=>t},{key:e.type==="tool-call"?"toolCallId-"+e.toolCallId:void 0})}),iX=Jn(({runtime:t,index:e})=>{const n=Ut(()=>t.getAttachmentByIndex(e),[t,e]);return xs(qB({runtime:n}))}),sX=Jn(({runtime:t,index:e})=>{const n=Ut(()=>t.getMessagePartByIndex(e),[t,e]);return xs(rX({runtime:n}))}),oX=Jn(({runtime:t,threadIdRef:e})=>{const n=Oc(t),[r,i]=Go(!1),[s,o]=Go(!1),a=Ut(()=>({get current(){return t.getState().id}}),[t]),c=xs(WB({runtime:t.composer,threadIdRef:e,messageIdRef:a})),h=Hp(n.content.map((m,y)=>sX({runtime:t,index:y},{key:y}))),f=Hp(n.attachments?.map((m,y)=>iX({runtime:t,index:y},{key:y}))??[]),d=Ut(()=>({...n,parts:h.state,composer:c.state,isCopied:r,isHovering:s}),[n,h.state,c.state,r,s]);return yo({getState:()=>d,composer:c.api,reload:m=>t.reload(m),speak:()=>t.speak(),stopSpeaking:()=>t.stopSpeaking(),submitFeedback:m=>t.submitFeedback(m),switchToBranch:m=>t.switchToBranch(m),getCopyText:()=>t.unstable_getCopyText(),part:m=>"index"in m?h.api({index:m.index}):h.api({key:"toolCallId-"+m.toolCallId}),attachment:m=>"id"in m?f.api({key:m.id}):f.api(m),setIsCopied:i,setIsHovering:o,__internal_getRuntime:()=>t},{key:n.id})}),aX=Jn(({runtime:t,id:e,threadIdRef:n})=>{const r=Ut(()=>t.getMessageById(e),[t,e]);return xs(oX({runtime:r,threadIdRef:n}))}),lX=Jn(({runtime:t})=>{const e=Oc(t),n=Ck();vs(()=>{const a=[],c=["run-start","run-end","initialize","model-context-update"];for(const h of c){const f=t.unstable_on(h,()=>{const d=t.getState()?.threadId||"unknown";n.emit(`thread.${h}`,{threadId:d})});a.push(f)}return()=>{for(const h of a)h()}},[t]);const r=Ut(()=>({get current(){return t.getState().threadId}}),[t]),i=xs(WB({runtime:t.composer,threadIdRef:r})),s=Hp(e.messages.map(a=>aX({runtime:t,id:a.id,threadIdRef:r},{key:a.id}))),o=Ut(()=>({isDisabled:e.isDisabled,isLoading:e.isLoading,isRunning:e.isRunning,capabilities:e.capabilities,state:e.state,suggestions:e.suggestions,extras:e.extras,speech:e.speech,composer:i.state,messages:s.state}),[e,s,i.state]);return yo({getState:()=>o,composer:i.api,append:t.append,startRun:t.startRun,unstable_resumeRun:t.unstable_resumeRun,cancelRun:t.cancelRun,getModelContext:t.getModelContext,export:t.export,import:t.import,reset:t.reset,stopSpeaking:t.stopSpeaking,message:a=>"id"in a?s.api({key:a.id}):s.api(a),__internal_getRuntime:()=>t})}),cX=Jn(({runtime:t,id:e})=>{const n=Ut(()=>t.getItemById(e),[t,e]);return xs(tX({runtime:n}))}),uX=Jn(({runtime:t})=>{const e=Oc(t),n=xs(lX({runtime:t.main})),r=Hp(Object.keys(e.threadItems).map(s=>cX({runtime:t,id:s},{key:s}))),i=Ut(()=>({mainThreadId:e.mainThreadId,newThreadId:e.newThread??null,isLoading:e.isLoading,threadIds:e.threads,archivedThreadIds:e.archivedThreads,threadItems:r.state,main:n.state}),[e,r.state,n.state]);return yo({getState:()=>i,thread:()=>n.api,item:s=>{if(s==="main")return r.api({key:i.mainThreadId});if("id"in s)return r.api({key:s.id});const{index:o,archived:a=!1}=s,c=a?i.archivedThreadIds[o]:i.threadIds[o];return r.api({key:c})},switchToThread:s=>{t.switchToThread(s)},switchToNewThread:()=>{t.switchToNewThread()}})}),hX=t=>t._core?.RenderComponent,fX=({children:t,runtime:e})=>{const n=eX({threads:uX({runtime:e.threads}),registerModelContextProvider:e.registerModelContextProvider,__internal_runtime:e}),r=hX(e);return C.jsxs(dx,{api:n,children:[r&&C.jsx(r,{}),t]})},dX=E.memo(fX),pX=({index:t,children:e})=>{const n=Ei(),r=E.useMemo(()=>{const i=()=>n.thread().message({index:t});return{message:Gn({source:"thread",query:{type:"index",index:t},get:()=>i()}),composer:Gn({source:"message",query:{},get:()=>i().composer}),on(s,o){const{event:a,scope:c}=fx(s);return!mp("composer",c)&&!mp("message",c)?n.on(s,o):n.on({scope:"thread",event:a},h=>{h.messageId===i().getState().id&&o(h)})}}},[n,t]);return C.jsx(dx,{api:r,children:e})},mX=({index:t,children:e})=>{const n=Ei(),r=E.useMemo(()=>({part:Gn({source:"message",query:{type:"index",index:t},get:()=>n.message().part({index:t})})}),[n,t]);return C.jsx(dx,{api:r,children:e})},gX=Jn(({text:t,isRunning:e})=>{const n=Ut(()=>({type:"text",text:t,status:e?{type:"running"}:{type:"complete"}}),[t,e]);return yo({getState:()=>n,addToolResult:()=>{throw new Error("Not supported")},__internal_getRuntime:()=>null})}),yX=({text:t,isRunning:e=!1,children:n})=>{const r=HB(zB(gX({text:t,isRunning:e}))),i=E.useMemo(()=>({part:Gn({source:"root",query:{},get:()=>r.getState().api}),subscribe:r.subscribe,flushSync:r.flushSync}),[r]);return C.jsx(dx,{api:i,children:n})},yD=class{#e;constructor(t){this.#e=t}get threads(){return this.#e.threads().getState()}get toolUIs(){return this.#e.toolUIs().getState()}get threadListItem(){return this.#e.threadListItem().getState()}get thread(){return this.#e.thread().getState()}get composer(){return this.#e.composer().getState()}get message(){return this.#e.message().getState()}get part(){return this.#e.part().getState()}get attachment(){return this.#e.attachment().getState()}},Rt=t=>{const e=Ei(),n=E.useMemo(()=>new yD(e),[e]),r=E.useSyncExternalStore(e.subscribe,()=>t(n),()=>t(n));if(E.useDebugValue(r),r instanceof yD)throw new Error("You tried to return the entire AssistantState. This is not supported due to technical limitations.");return r},bX=(t,e)=>{const n=Ei(),r=E.useRef(e);E.useEffect(()=>{r.current=e});const{scope:i,event:s}=fx(t);E.useEffect(()=>n.on({scope:i,event:s},o=>r.current(o)),[n,i,s])},vX=t=>{const e=t;e.__isBound||(e.__internal_bindMethods?.(),e.__isBound=!0)};function xX(t,e=wX){vX(t);const n=E.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getState()));return E.useDebugValue(n),n}var wX=t=>t;function SX(t){function e(n){let r=!1,i;typeof n=="function"?i=n:n&&(r=!!n.optional,i=n.selector);const s=t({optional:r});return s?xX(s,i):null}return e}function _X(t){const e=Ei(),n=e.message.source?e.message().__internal_getRuntime():null;if(!n&&!t?.optional)throw new Error("MessageRuntime is not available");return n}var GB=SX(_X),KB=class{constructor(t){this._core=t,this.threads=new tY(t.threads),this._thread=this.threads.main,this.__internal_bindMethods()}threads;get threadList(){return this.threads}_thread;__internal_bindMethods(){this.switchToNewThread=this.switchToNewThread.bind(this),this.switchToThread=this.switchToThread.bind(this),this.registerModelContextProvider=this.registerModelContextProvider.bind(this),this.registerModelConfigProvider=this.registerModelConfigProvider.bind(this),this.reset=this.reset.bind(this)}get thread(){return this._thread}switchToNewThread(){return this._core.threads.switchToNewThread()}switchToThread(t){return this._core.threads.switchToThread(t)}registerModelContextProvider(t){return this._core.registerModelContextProvider(t)}registerModelConfigProvider(t){return this.registerModelContextProvider(t)}reset({initialMessages:t}={}){return this._core.threads.getMainThreadRuntimeCore().import(xk.fromArray(t??[]))}},CX=t=>{const{cloud:e,initialMessages:n,maxSteps:r,adapters:i,unstable_humanToolNames:s,...o}=t;return{localRuntimeOptions:{cloud:e,initialMessages:n,maxSteps:r,adapters:i,unstable_humanToolNames:s},otherOptions:o}};function Ir(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}var YB=E.createContext(null),AX=t=>({useSmoothStatus:na(()=>t)}),kX=({children:t})=>{const e=XB({optional:!0}),n=Ei(),[r]=E.useState(()=>AX(n.part().getState().status));return e?t:C.jsx(YB.Provider,{value:r,children:t})},EX=t=>{const e=E.forwardRef((n,r)=>C.jsx(kX,{children:C.jsx(t,{...n,ref:r})}));return e.displayName=t.displayName,e};function XB(t){const e=E.useContext(YB);if(!t?.optional&&!e)throw new Error("This component must be used within a SmoothContextProvider.");return e}var{useSmoothStatus:TX,useSmoothStatusStore:RX}=NB(XB,"useSmoothStatus"),MX=class{constructor(t,e){this.currentText=t,this.setText=e}animationFrameId=null;lastUpdateTime=Date.now();targetText="";start(){this.animationFrameId===null&&(this.lastUpdateTime=Date.now(),this.animate())}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}animate=()=>{const t=Date.now();let n=t-this.lastUpdateTime;const r=this.targetText.length-this.currentText.length,i=Math.min(5,250/r);let s=0;for(;n>=i&&s<r;)s++,n-=i;s!==r?this.animationFrameId=requestAnimationFrame(this.animate):this.animationFrameId=null,s!==0&&(this.currentText=this.targetText.slice(0,this.currentText.length+s),this.lastUpdateTime=t-n,this.setText(this.currentText))}},T2=Object.freeze({type:"running"}),JB=(t,e=!1)=>{const{text:n}=t,r=Rt(({message:f})=>f.id),i=E.useRef(r),[s,o]=E.useState(n),a=RX({optional:!0}),c=Ir(f=>{if(o(f),a){const d=s!==f||t.status.type==="running"?T2:t.status;$b(a).setState(d,!0)}});E.useEffect(()=>{if(a){const f=s!==n||t.status.type==="running"?T2:t.status;$b(a).setState(f,!0)}},[a,n,s,t.status]);const[h]=E.useState(new MX(n,c));return E.useEffect(()=>{if(!e){h.stop();return}if(i.current!==r||!n.startsWith(h.targetText)){i.current=r,c(n),h.currentText=n,h.targetText=n,h.stop();return}h.targetText=n,h.start()},[c,h,r,e,n]),E.useEffect(()=>()=>{h.stop()},[h]),E.useMemo(()=>e?{type:"text",text:s,status:n===s?t.status:T2}:t,[e,s,t,n])};const OX=Object.freeze(Object.defineProperty({__proto__:null,AssistantRuntimeImpl:KB,BaseAssistantRuntimeCore:_B,CompositeContextProvider:SB,DefaultThreadComposerRuntimeCore:AB,MessageRepository:wk,ThreadRuntimeImpl:LB,fromThreadMessageLike:ux,generateId:cx,getAutoStatus:vk,splitLocalRuntimeOptions:CX,useSmooth:JB,useSmoothStatus:TX,withSmoothContextProvider:EX},Symbol.toStringTag,{value:"Module"}));function bD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function mx(...t){return e=>{let n=!1;const r=t.map(i=>{const s=bD(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():bD(t[i],null)}}}}function jt(...t){return E.useCallback(mx(...t),t)}var Ak=wB();const PX=Mc(Ak);function Th(t){const e=DX(t),n=E.forwardRef((r,i)=>{const{children:s,...o}=r,a=E.Children.toArray(s),c=a.find(IX);if(c){const h=c.props.children,f=a.map(d=>d===c?E.Children.count(h)>1?E.Children.only(null):E.isValidElement(h)?h.props.children:null:d);return C.jsx(e,{...o,ref:i,children:E.isValidElement(h)?E.cloneElement(h,void 0,f):null})}return C.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var QB=Th("Slot");function DX(t){const e=E.forwardRef((n,r)=>{const{children:i,...s}=n;if(E.isValidElement(i)){const o=BX(i),a=NX(s,i.props);return i.type!==E.Fragment&&(a.ref=r?mx(r,o):o),E.cloneElement(i,a)}return E.Children.count(i)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ZB=Symbol("radix.slottable");function LX(t){const e=({children:n})=>C.jsx(C.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=ZB,e}function IX(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ZB}function NX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function BX(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var jX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=jX.reduce((t,e)=>{const n=Th(`Primitive.${e}`),r=E.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function e6(t,e){t&&Ak.flushSync(()=>t.dispatchEvent(e))}var I_=(t=>(t.Hidden="hidden",t.Floating="floating",t.Normal="normal",t))(I_||{}),$X=({hideWhenRunning:t,autohide:e,autohideFloat:n})=>Rt(({thread:r,message:i})=>t&&r.isRunning?"hidden":e==="always"||e==="not-last"&&!i.isLast?i.isHovering?n==="always"||n==="single-branch"&&i.branchCount<=1?"floating":"normal":"hidden":"normal"),t6=E.forwardRef(({hideWhenRunning:t,autohide:e,autohideFloat:n,...r},i)=>{const s=$X({hideWhenRunning:t,autohide:e,autohideFloat:n});return s===I_.Hidden?null:C.jsx(st.div,{...s===I_.Floating?{"data-floating":"true"}:null,...r,ref:i})});t6.displayName="ActionBarPrimitive.Root";function Ie(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}var VX=({copiedDuration:t=3e3}={})=>{const e=Ei(),n=Rt(({message:o})=>(o.role!=="assistant"||o.status?.type!=="running")&&o.parts.some(a=>a.type==="text"&&a.text.length>0)),r=Rt(({composer:o})=>o.isEditing),i=Rt(({composer:o})=>o.text),s=E.useCallback(()=>{const o=r?i:e.message().getCopyText();o&&navigator.clipboard.writeText(o).then(()=>{e.message().setIsCopied(!0),setTimeout(()=>e.message().setIsCopied(!1),t)})},[e,r,i,t]);return n?s:null},n6=E.forwardRef(({copiedDuration:t,onClick:e,disabled:n,...r},i)=>{const s=Rt(({message:a})=>a.isCopied),o=VX({copiedDuration:t});return C.jsx(st.button,{type:"button",...s?{"data-copied":"true"}:{},...r,ref:i,disabled:n||!o,onClick:Ie(e,()=>{o?.()})})});n6.displayName="ActionBarPrimitive.Copy";var r6=(t,e,n=[])=>{const r=E.forwardRef((i,s)=>{const o={},a={};Object.keys(i).forEach(h=>{n.includes(h)?o[h]=i[h]:a[h]=i[h]});const c=e(o)??void 0;return C.jsx(st.button,{type:"button",...a,ref:s,disabled:a.disabled||!c,onClick:Ie(a.onClick,c)})});return r.displayName=t,r};function i6(t,e=globalThis?.document){const n=Ir(t);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}function FX(t,e){const n=E.createContext(e),r=s=>{const{children:o,...a}=s,c=E.useMemo(()=>a,Object.values(a));return C.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=E.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function ra(t,e=[]){let n=[];function r(s,o){const a=E.createContext(o),c=n.length;n=[...n,o];const h=d=>{const{scope:m,children:y,...b}=d,w=m?.[t]?.[c]||a,S=E.useMemo(()=>b,Object.values(b));return C.jsx(w.Provider,{value:S,children:y})};h.displayName=s+"Provider";function f(d,m){const y=m?.[t]?.[c]||a,b=E.useContext(y);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[h,f]}const i=()=>{const s=n.map(o=>E.createContext(o));return function(a){const c=a?.[t]||s;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return i.scopeName=t,[r,zX(i,...e)]}function zX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:h})=>{const d=c(s)[`__scope${h}`];return{...a,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var HX="DismissableLayer",N_="dismissableLayer.update",UX="dismissableLayer.pointerDownOutside",qX="dismissableLayer.focusOutside",vD,s6=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gx=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,h=E.useContext(s6),[f,d]=E.useState(null),m=f?.ownerDocument??globalThis?.document,[,y]=E.useState({}),b=jt(e,L=>d(L)),w=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),_=w.indexOf(S),A=f?w.indexOf(f):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,P=A>=_,M=KX(L=>{const N=L.target,z=[...h.branches].some(j=>j.contains(N));!P||z||(i?.(L),o?.(L),L.defaultPrevented||a?.())},m),O=YX(L=>{const N=L.target;[...h.branches].some(j=>j.contains(N))||(s?.(L),o?.(L),L.defaultPrevented||a?.())},m);return i6(L=>{A===h.layers.size-1&&(r?.(L),!L.defaultPrevented&&a&&(L.preventDefault(),a()))},m),E.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(vD=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),xD(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=vD)}},[f,m,n,h]),E.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),xD())},[f,h]),E.useEffect(()=>{const L=()=>y({});return document.addEventListener(N_,L),()=>document.removeEventListener(N_,L)},[]),C.jsx(st.div,{...c,ref:b,style:{pointerEvents:k?P?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,O.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,M.onPointerDownCapture)})});gx.displayName=HX;var WX="DismissableLayerBranch",GX=E.forwardRef((t,e)=>{const n=E.useContext(s6),r=E.useRef(null),i=jt(e,r);return E.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),C.jsx(st.div,{...t,ref:i})});GX.displayName=WX;function KX(t,e=globalThis?.document){const n=Ir(t),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){o6(UX,n,h,{discrete:!0})};const h={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function YX(t,e=globalThis?.document){const n=Ir(t),r=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!r.current&&o6(qX,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xD(){const t=new CustomEvent(N_);document.dispatchEvent(t)}function o6(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?e6(i,s):i.dispatchEvent(s)}var R2=0;function a6(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wD()),document.body.insertAdjacentElement("beforeend",t[1]??wD()),R2++,()=>{R2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),R2--}},[])}function wD(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var M2="focusScope.autoFocusOnMount",O2="focusScope.autoFocusOnUnmount",SD={bubbles:!1,cancelable:!0},XX="FocusScope",kk=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=E.useState(null),h=Ir(i),f=Ir(s),d=E.useRef(null),m=jt(e,w=>c(w)),y=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let w=function(k){if(y.paused||!a)return;const P=k.target;a.contains(P)?d.current=P:Ka(d.current,{select:!0})},S=function(k){if(y.paused||!a)return;const P=k.relatedTarget;P!==null&&(a.contains(P)||Ka(d.current,{select:!0}))},_=function(k){if(document.activeElement===document.body)for(const M of k)M.removedNodes.length>0&&Ka(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",S);const A=new MutationObserver(_);return a&&A.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",S),A.disconnect()}}},[r,a,y.paused]),E.useEffect(()=>{if(a){CD.add(y);const w=document.activeElement;if(!a.contains(w)){const _=new CustomEvent(M2,SD);a.addEventListener(M2,h),a.dispatchEvent(_),_.defaultPrevented||(JX(nJ(l6(a)),{select:!0}),document.activeElement===w&&Ka(a))}return()=>{a.removeEventListener(M2,h),setTimeout(()=>{const _=new CustomEvent(O2,SD);a.addEventListener(O2,f),a.dispatchEvent(_),_.defaultPrevented||Ka(w??document.body,{select:!0}),a.removeEventListener(O2,f),CD.remove(y)},0)}}},[a,h,f,y]);const b=E.useCallback(w=>{if(!n&&!r||y.paused)return;const S=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,_=document.activeElement;if(S&&_){const A=w.currentTarget,[k,P]=QX(A);k&&P?!w.shiftKey&&_===P?(w.preventDefault(),n&&Ka(k,{select:!0})):w.shiftKey&&_===k&&(w.preventDefault(),n&&Ka(P,{select:!0})):_===A&&w.preventDefault()}},[n,r,y.paused]);return C.jsx(st.div,{tabIndex:-1,...o,ref:m,onKeyDown:b})});kk.displayName=XX;function JX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ka(r,{select:e}),document.activeElement!==n)return}function QX(t){const e=l6(t),n=_D(e,t),r=_D(e.reverse(),t);return[n,r]}function l6(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _D(t,e){for(const n of t)if(!ZX(n,{upTo:e}))return n}function ZX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function eJ(t){return t instanceof HTMLInputElement&&"select"in t}function Ka(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&eJ(t)&&e&&t.select()}}var CD=tJ();function tJ(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=AD(t,e),t.unshift(e)},remove(e){t=AD(t,e),t[0]?.resume()}}}function AD(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function nJ(t){return t.filter(e=>e.tagName!=="A")}var hl=globalThis?.document?E.useLayoutEffect:()=>{},rJ=xB[" useId ".trim().toString()]||(()=>{}),iJ=0;function ol(t){const[e,n]=E.useState(rJ());return hl(()=>{n(r=>r??String(iJ++))},[t]),e?`radix-${e}`:""}const sJ=["top","right","bottom","left"],fl=Math.min,_i=Math.max,Fb=Math.round,E0=Math.floor,oo=t=>({x:t,y:t}),oJ={left:"right",right:"left",bottom:"top",top:"bottom"},aJ={start:"end",end:"start"};function B_(t,e,n){return _i(t,fl(e,n))}function Ko(t,e){return typeof t=="function"?t(e):t}function Yo(t){return t.split("-")[0]}function Hh(t){return t.split("-")[1]}function Ek(t){return t==="x"?"y":"x"}function Tk(t){return t==="y"?"height":"width"}const lJ=new Set(["top","bottom"]);function to(t){return lJ.has(Yo(t))?"y":"x"}function Rk(t){return Ek(to(t))}function cJ(t,e,n){n===void 0&&(n=!1);const r=Hh(t),i=Rk(t),s=Tk(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=zb(o)),[o,zb(o)]}function uJ(t){const e=zb(t);return[j_(t),e,j_(e)]}function j_(t){return t.replace(/start|end/g,e=>aJ[e])}const kD=["left","right"],ED=["right","left"],hJ=["top","bottom"],fJ=["bottom","top"];function dJ(t,e,n){switch(t){case"top":case"bottom":return n?e?ED:kD:e?kD:ED;case"left":case"right":return e?hJ:fJ;default:return[]}}function pJ(t,e,n,r){const i=Hh(t);let s=dJ(Yo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(j_)))),s}function zb(t){return t.replace(/left|right|bottom|top/g,e=>oJ[e])}function mJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function c6(t){return typeof t!="number"?mJ(t):{top:t,right:t,bottom:t,left:t}}function Hb(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function TD(t,e,n){let{reference:r,floating:i}=t;const s=to(e),o=Rk(e),a=Tk(o),c=Yo(e),h=s==="y",f=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let y;switch(c){case"top":y={x:f,y:r.y-i.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:d};break;case"left":y={x:r.x-i.width,y:d};break;default:y={x:r.x,y:r.y}}switch(Hh(e)){case"start":y[o]-=m*(n&&h?-1:1);break;case"end":y[o]+=m*(n&&h?-1:1);break}return y}const gJ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:d}=TD(h,r,c),m=r,y={},b=0;for(let w=0;w<a.length;w++){const{name:S,fn:_}=a[w],{x:A,y:k,data:P,reset:M}=await _({x:f,y:d,initialPlacement:r,placement:m,strategy:i,middlewareData:y,rects:h,platform:o,elements:{reference:t,floating:e}});f=A??f,d=k??d,y={...y,[S]:{...y[S],...P}},M&&b<=50&&(b++,typeof M=="object"&&(M.placement&&(m=M.placement),M.rects&&(h=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):M.rects),{x:f,y:d}=TD(h,m,c)),w=-1)}return{x:f,y:d,placement:m,strategy:i,middlewareData:y}};async function Up(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:m=!1,padding:y=0}=Ko(e,t),b=c6(y),S=a[m?d==="floating"?"reference":"floating":d],_=Hb(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(S)))==null||n?S:S.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:h,rootBoundary:f,strategy:c})),A=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),P=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},M=Hb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:A,offsetParent:k,strategy:c}):A);return{top:(_.top-M.top+b.top)/P.y,bottom:(M.bottom-_.bottom+b.bottom)/P.y,left:(_.left-M.left+b.left)/P.x,right:(M.right-_.right+b.right)/P.x}}const yJ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:h,padding:f=0}=Ko(t,e)||{};if(h==null)return{};const d=c6(f),m={x:n,y:r},y=Rk(i),b=Tk(y),w=await o.getDimensions(h),S=y==="y",_=S?"top":"left",A=S?"bottom":"right",k=S?"clientHeight":"clientWidth",P=s.reference[b]+s.reference[y]-m[y]-s.floating[b],M=m[y]-s.reference[y],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let L=O?O[k]:0;(!L||!await(o.isElement==null?void 0:o.isElement(O)))&&(L=a.floating[k]||s.floating[b]);const N=P/2-M/2,z=L/2-w[b]/2-1,j=fl(d[_],z),U=fl(d[A],z),W=j,X=L-w[b]-U,G=L/2-w[b]/2+N,ie=B_(W,G,X),F=!c.arrow&&Hh(i)!=null&&G!==ie&&s.reference[b]/2-(G<W?j:U)-w[b]/2<0,Y=F?G<W?G-W:G-X:0;return{[y]:m[y]+Y,data:{[y]:ie,centerOffset:G-ie-Y,...F&&{alignmentOffset:Y}},reset:F}}}),bJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:h}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...S}=Ko(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=Yo(i),A=to(a),k=Yo(a)===a,P=await(c.isRTL==null?void 0:c.isRTL(h.floating)),M=m||(k||!w?[zb(a)]:uJ(a)),O=b!=="none";!m&&O&&M.push(...pJ(a,w,b,P));const L=[a,...M],N=await Up(e,S),z=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&z.push(N[_]),d){const G=cJ(i,o,P);z.push(N[G[0]],N[G[1]])}if(j=[...j,{placement:i,overflows:z}],!z.every(G=>G<=0)){var U,W;const G=(((U=s.flip)==null?void 0:U.index)||0)+1,ie=L[G];if(ie&&(!(d==="alignment"?A!==to(ie):!1)||j.every(q=>to(q.placement)===A?q.overflows[0]>0:!0)))return{data:{index:G,overflows:j},reset:{placement:ie}};let F=(W=j.filter(Y=>Y.overflows[0]<=0).sort((Y,q)=>Y.overflows[1]-q.overflows[1])[0])==null?void 0:W.placement;if(!F)switch(y){case"bestFit":{var X;const Y=(X=j.filter(q=>{if(O){const se=to(q.placement);return se===A||se==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(se=>se>0).reduce((se,T)=>se+T,0)]).sort((q,se)=>q[1]-se[1])[0])==null?void 0:X[0];Y&&(F=Y);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function RD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function MD(t){return sJ.some(e=>t[e]>=0)}const vJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ko(t,e);switch(r){case"referenceHidden":{const s=await Up(e,{...i,elementContext:"reference"}),o=RD(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:MD(o)}}}case"escaped":{const s=await Up(e,{...i,altBoundary:!0}),o=RD(s,n.floating);return{data:{escapedOffsets:o,escaped:MD(o)}}}default:return{}}}}},u6=new Set(["left","top"]);async function xJ(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yo(n),a=Hh(n),c=to(n)==="y",h=u6.has(o)?-1:1,f=s&&c?-1:1,d=Ko(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof b=="number"&&(y=a==="end"?b*-1:b),c?{x:y*f,y:m*h}:{x:m*h,y:y*f}}const wJ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await xJ(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},SJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x:_,y:A}=S;return{x:_,y:A}}},...c}=Ko(t,e),h={x:n,y:r},f=await Up(e,c),d=to(Yo(i)),m=Ek(d);let y=h[m],b=h[d];if(s){const S=m==="y"?"top":"left",_=m==="y"?"bottom":"right",A=y+f[S],k=y-f[_];y=B_(A,y,k)}if(o){const S=d==="y"?"top":"left",_=d==="y"?"bottom":"right",A=b+f[S],k=b-f[_];b=B_(A,b,k)}const w=a.fn({...e,[m]:y,[d]:b});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:s,[d]:o}}}}}},_J=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:h=!0}=Ko(t,e),f={x:n,y:r},d=to(i),m=Ek(d);let y=f[m],b=f[d];const w=Ko(a,e),S=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const k=m==="y"?"height":"width",P=s.reference[m]-s.floating[k]+S.mainAxis,M=s.reference[m]+s.reference[k]-S.mainAxis;y<P?y=P:y>M&&(y=M)}if(h){var _,A;const k=m==="y"?"width":"height",P=u6.has(Yo(i)),M=s.reference[d]-s.floating[k]+(P&&((_=o.offset)==null?void 0:_[d])||0)+(P?0:S.crossAxis),O=s.reference[d]+s.reference[k]+(P?0:((A=o.offset)==null?void 0:A[d])||0)-(P?S.crossAxis:0);b<M?b=M:b>O&&(b=O)}return{[m]:y,[d]:b}}}},CJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...h}=Ko(t,e),f=await Up(e,h),d=Yo(i),m=Hh(i),y=to(i)==="y",{width:b,height:w}=s.floating;let S,_;d==="top"||d==="bottom"?(S=d,_=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=d,S=m==="end"?"top":"bottom");const A=w-f.top-f.bottom,k=b-f.left-f.right,P=fl(w-f[S],A),M=fl(b-f[_],k),O=!e.middlewareData.shift;let L=P,N=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(L=A),O&&!m){const j=_i(f.left,0),U=_i(f.right,0),W=_i(f.top,0),X=_i(f.bottom,0);y?N=b-2*(j!==0||U!==0?j+U:_i(f.left,f.right)):L=w-2*(W!==0||X!==0?W+X:_i(f.top,f.bottom))}await c({...e,availableWidth:N,availableHeight:L});const z=await o.getDimensions(a.floating);return b!==z.width||w!==z.height?{reset:{rects:!0}}:{}}}};function yx(){return typeof window<"u"}function Uh(t){return h6(t)?(t.nodeName||"").toLowerCase():"#document"}function Ai(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function bo(t){var e;return(e=(h6(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function h6(t){return yx()?t instanceof Node||t instanceof Ai(t).Node:!1}function ws(t){return yx()?t instanceof Element||t instanceof Ai(t).Element:!1}function fo(t){return yx()?t instanceof HTMLElement||t instanceof Ai(t).HTMLElement:!1}function OD(t){return!yx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ai(t).ShadowRoot}const AJ=new Set(["inline","contents"]);function Rm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ss(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!AJ.has(i)}const kJ=new Set(["table","td","th"]);function EJ(t){return kJ.has(Uh(t))}const TJ=[":popover-open",":modal"];function bx(t){return TJ.some(e=>{try{return t.matches(e)}catch{return!1}})}const RJ=["transform","translate","scale","rotate","perspective"],MJ=["transform","translate","scale","rotate","perspective","filter"],OJ=["paint","layout","strict","content"];function Mk(t){const e=Ok(),n=ws(t)?Ss(t):t;return RJ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||MJ.some(r=>(n.willChange||"").includes(r))||OJ.some(r=>(n.contain||"").includes(r))}function PJ(t){let e=dl(t);for(;fo(e)&&!Rh(e);){if(Mk(e))return e;if(bx(e))return null;e=dl(e)}return null}function Ok(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const DJ=new Set(["html","body","#document"]);function Rh(t){return DJ.has(Uh(t))}function Ss(t){return Ai(t).getComputedStyle(t)}function vx(t){return ws(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function dl(t){if(Uh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||OD(t)&&t.host||bo(t);return OD(e)?e.host:e}function f6(t){const e=dl(t);return Rh(e)?t.ownerDocument?t.ownerDocument.body:t.body:fo(e)&&Rm(e)?e:f6(e)}function qp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=f6(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ai(i);if(s){const a=$_(o);return e.concat(o,o.visualViewport||[],Rm(i)?i:[],a&&n?qp(a):[])}return e.concat(i,qp(i,[],n))}function $_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function d6(t){const e=Ss(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=fo(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Fb(n)!==s||Fb(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Pk(t){return ws(t)?t:t.contextElement}function dh(t){const e=Pk(t);if(!fo(e))return oo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=d6(e);let o=(s?Fb(n.width):n.width)/r,a=(s?Fb(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const LJ=oo(0);function p6(t){const e=Ai(t);return!Ok()||!e.visualViewport?LJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function IJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ai(t)?!1:e}function vc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Pk(t);let o=oo(1);e&&(r?ws(r)&&(o=dh(r)):o=dh(t));const a=IJ(s,n,r)?p6(s):oo(0);let c=(i.left+a.x)/o.x,h=(i.top+a.y)/o.y,f=i.width/o.x,d=i.height/o.y;if(s){const m=Ai(s),y=r&&ws(r)?Ai(r):r;let b=m,w=$_(b);for(;w&&r&&y!==b;){const S=dh(w),_=w.getBoundingClientRect(),A=Ss(w),k=_.left+(w.clientLeft+parseFloat(A.paddingLeft))*S.x,P=_.top+(w.clientTop+parseFloat(A.paddingTop))*S.y;c*=S.x,h*=S.y,f*=S.x,d*=S.y,c+=k,h+=P,b=Ai(w),w=$_(b)}}return Hb({width:f,height:d,x:c,y:h})}function xx(t,e){const n=vx(t).scrollLeft;return e?e.left+n:vc(bo(t)).left+n}function m6(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-xx(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function NJ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=bo(r),a=e?bx(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},h=oo(1);const f=oo(0),d=fo(r);if((d||!d&&!s)&&((Uh(r)!=="body"||Rm(o))&&(c=vx(r)),fo(r))){const y=vc(r);h=dh(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const m=o&&!d&&!s?m6(o,c):oo(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-c.scrollLeft*h.x+f.x+m.x,y:n.y*h.y-c.scrollTop*h.y+f.y+m.y}}function BJ(t){return Array.from(t.getClientRects())}function jJ(t){const e=bo(t),n=vx(t),r=t.ownerDocument.body,i=_i(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=_i(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+xx(t);const a=-n.scrollTop;return Ss(r).direction==="rtl"&&(o+=_i(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const PD=25;function $J(t,e){const n=Ai(t),r=bo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const f=Ok();(!f||f&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}const h=xx(r);if(h<=0){const f=r.ownerDocument,d=f.body,m=getComputedStyle(d),y=f.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,b=Math.abs(r.clientWidth-d.clientWidth-y);b<=PD&&(s-=b)}else h<=PD&&(s+=h);return{width:s,height:o,x:a,y:c}}const VJ=new Set(["absolute","fixed"]);function FJ(t,e){const n=vc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=fo(t)?dh(t):oo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,h=r*s.y;return{width:o,height:a,x:c,y:h}}function DD(t,e,n){let r;if(e==="viewport")r=$J(t,n);else if(e==="document")r=jJ(bo(t));else if(ws(e))r=FJ(e,n);else{const i=p6(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Hb(r)}function g6(t,e){const n=dl(t);return n===e||!ws(n)||Rh(n)?!1:Ss(n).position==="fixed"||g6(n,e)}function zJ(t,e){const n=e.get(t);if(n)return n;let r=qp(t,[],!1).filter(a=>ws(a)&&Uh(a)!=="body"),i=null;const s=Ss(t).position==="fixed";let o=s?dl(t):t;for(;ws(o)&&!Rh(o);){const a=Ss(o),c=Mk(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&VJ.has(i.position)||Rm(o)&&!c&&g6(t,o))?r=r.filter(f=>f!==o):i=a,o=dl(o)}return e.set(t,r),r}function HJ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?bx(e)?[]:zJ(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((h,f)=>{const d=DD(e,f,i);return h.top=_i(d.top,h.top),h.right=fl(d.right,h.right),h.bottom=fl(d.bottom,h.bottom),h.left=_i(d.left,h.left),h},DD(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function UJ(t){const{width:e,height:n}=d6(t);return{width:e,height:n}}function qJ(t,e,n){const r=fo(e),i=bo(e),s=n==="fixed",o=vc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=oo(0);function h(){c.x=xx(i)}if(r||!r&&!s)if((Uh(e)!=="body"||Rm(i))&&(a=vx(e)),r){const y=vc(e,!0,s,e);c.x=y.x+e.clientLeft,c.y=y.y+e.clientTop}else i&&h();s&&!r&&i&&h();const f=i&&!r&&!s?m6(i,a):oo(0),d=o.left+a.scrollLeft-c.x-f.x,m=o.top+a.scrollTop-c.y-f.y;return{x:d,y:m,width:o.width,height:o.height}}function P2(t){return Ss(t).position==="static"}function LD(t,e){if(!fo(t)||Ss(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return bo(t)===n&&(n=n.ownerDocument.body),n}function y6(t,e){const n=Ai(t);if(bx(t))return n;if(!fo(t)){let i=dl(t);for(;i&&!Rh(i);){if(ws(i)&&!P2(i))return i;i=dl(i)}return n}let r=LD(t,e);for(;r&&EJ(r)&&P2(r);)r=LD(r,e);return r&&Rh(r)&&P2(r)&&!Mk(r)?n:r||PJ(t)||n}const WJ=async function(t){const e=this.getOffsetParent||y6,n=this.getDimensions,r=await n(t.floating);return{reference:qJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function GJ(t){return Ss(t).direction==="rtl"}const KJ={convertOffsetParentRelativeRectToViewportRelativeRect:NJ,getDocumentElement:bo,getClippingRect:HJ,getOffsetParent:y6,getElementRects:WJ,getClientRects:BJ,getDimensions:UJ,getScale:dh,isElement:ws,isRTL:GJ};function b6(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function YJ(t,e){let n=null,r;const i=bo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const h=t.getBoundingClientRect(),{left:f,top:d,width:m,height:y}=h;if(a||e(),!m||!y)return;const b=E0(d),w=E0(i.clientWidth-(f+m)),S=E0(i.clientHeight-(d+y)),_=E0(f),k={rootMargin:-b+"px "+-w+"px "+-S+"px "+-_+"px",threshold:_i(0,fl(1,c))||1};let P=!0;function M(O){const L=O[0].intersectionRatio;if(L!==c){if(!P)return o();L?o(!1,L):r=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!b6(h,t.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(M,{...k,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,k)}n.observe(t)}return o(!0),s}function XJ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,h=Pk(t),f=i||s?[...h?qp(h):[],...qp(e)]:[];f.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const d=h&&a?YJ(h,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(_=>{let[A]=_;A&&A.target===h&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=y)==null||k.observe(e)})),n()}),h&&!c&&y.observe(h),y.observe(e));let b,w=c?vc(t):null;c&&S();function S(){const _=vc(t);w&&!b6(w,_)&&n(),w=_,b=requestAnimationFrame(S)}return n(),()=>{var _;f.forEach(A=>{i&&A.removeEventListener("scroll",n),s&&A.removeEventListener("resize",n)}),d?.(),(_=y)==null||_.disconnect(),y=null,c&&cancelAnimationFrame(b)}}const JJ=wJ,QJ=SJ,ZJ=bJ,eQ=CJ,tQ=vJ,ID=yJ,nQ=_J,rQ=(t,e,n)=>{const r=new Map,i={platform:KJ,...n},s={...i.platform,_c:r};return gJ(t,e,{...i,platform:s})};var iQ=typeof document<"u",sQ=function(){},Xy=iQ?E.useLayoutEffect:sQ;function Ub(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ub(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Ub(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function v6(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ND(t,e){const n=v6(t);return Math.round(e*n)/n}function D2(t){const e=E.useRef(t);return Xy(()=>{e.current=t}),e}function oQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:h}=t,[f,d]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=E.useState(r);Ub(m,r)||y(r);const[b,w]=E.useState(null),[S,_]=E.useState(null),A=E.useCallback(q=>{q!==O.current&&(O.current=q,w(q))},[]),k=E.useCallback(q=>{q!==L.current&&(L.current=q,_(q))},[]),P=s||b,M=o||S,O=E.useRef(null),L=E.useRef(null),N=E.useRef(f),z=c!=null,j=D2(c),U=D2(i),W=D2(h),X=E.useCallback(()=>{if(!O.current||!L.current)return;const q={placement:e,strategy:n,middleware:m};U.current&&(q.platform=U.current),rQ(O.current,L.current,q).then(se=>{const T={...se,isPositioned:W.current!==!1};G.current&&!Ub(N.current,T)&&(N.current=T,Ak.flushSync(()=>{d(T)}))})},[m,e,n,U,W]);Xy(()=>{h===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[h]);const G=E.useRef(!1);Xy(()=>(G.current=!0,()=>{G.current=!1}),[]),Xy(()=>{if(P&&(O.current=P),M&&(L.current=M),P&&M){if(j.current)return j.current(P,M,X);X()}},[P,M,X,j,z]);const ie=E.useMemo(()=>({reference:O,floating:L,setReference:A,setFloating:k}),[A,k]),F=E.useMemo(()=>({reference:P,floating:M}),[P,M]),Y=E.useMemo(()=>{const q={position:n,left:0,top:0};if(!F.floating)return q;const se=ND(F.floating,f.x),T=ND(F.floating,f.y);return a?{...q,transform:"translate("+se+"px, "+T+"px)",...v6(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:T}},[n,a,F.floating,f.x,f.y]);return E.useMemo(()=>({...f,update:X,refs:ie,elements:F,floatingStyles:Y}),[f,X,ie,F,Y])}const aQ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?ID({element:r.current,padding:i}).fn(n):{}:r?ID({element:r,padding:i}).fn(n):{}}}},lQ=(t,e)=>({...JJ(t),options:[t,e]}),cQ=(t,e)=>({...QJ(t),options:[t,e]}),uQ=(t,e)=>({...nQ(t),options:[t,e]}),hQ=(t,e)=>({...ZJ(t),options:[t,e]}),fQ=(t,e)=>({...eQ(t),options:[t,e]}),dQ=(t,e)=>({...tQ(t),options:[t,e]}),pQ=(t,e)=>({...aQ(t),options:[t,e]});var mQ="Arrow",x6=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return C.jsx(st.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});x6.displayName=mQ;var gQ=x6;function w6(t){const[e,n]=E.useState(void 0);return hl(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,h=Array.isArray(c)?c[0]:c;o=h.inlineSize,a=h.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Dk="Popper",[S6,wx]=ra(Dk),[yQ,_6]=S6(Dk),C6=t=>{const{__scopePopper:e,children:n}=t,[r,i]=E.useState(null);return C.jsx(yQ,{scope:e,anchor:r,onAnchorChange:i,children:n})};C6.displayName=Dk;var A6="PopperAnchor",k6=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=_6(A6,n),o=E.useRef(null),a=jt(e,o),c=E.useRef(null);return E.useEffect(()=>{const h=c.current;c.current=r?.current||o.current,h!==c.current&&s.onAnchorChange(c.current)}),r?null:C.jsx(st.div,{...i,ref:a})});k6.displayName=A6;var Lk="PopperContent",[bQ,vQ]=S6(Lk),E6=E.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:b,...w}=t,S=_6(Lk,n),[_,A]=E.useState(null),k=jt(e,ke=>A(ke)),[P,M]=E.useState(null),O=w6(P),L=O?.width??0,N=O?.height??0,z=r+(s!=="center"?"-"+s:""),j=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},U=Array.isArray(h)?h:[h],W=U.length>0,X={padding:j,boundary:U.filter(wQ),altBoundary:W},{refs:G,floatingStyles:ie,placement:F,isPositioned:Y,middlewareData:q}=oQ({strategy:"fixed",placement:z,whileElementsMounted:(...ke)=>XJ(...ke,{animationFrame:y==="always"}),elements:{reference:S.anchor},middleware:[lQ({mainAxis:i+N,alignmentAxis:o}),c&&cQ({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?uQ():void 0,...X}),c&&hQ({...X}),fQ({...X,apply:({elements:ke,rects:He,availableWidth:Pt,availableHeight:Kt})=>{const{width:Yt,height:er}=He.reference,tr=ke.floating.style;tr.setProperty("--radix-popper-available-width",`${Pt}px`),tr.setProperty("--radix-popper-available-height",`${Kt}px`),tr.setProperty("--radix-popper-anchor-width",`${Yt}px`),tr.setProperty("--radix-popper-anchor-height",`${er}px`)}}),P&&pQ({element:P,padding:a}),SQ({arrowWidth:L,arrowHeight:N}),m&&dQ({strategy:"referenceHidden",...X})]}),[se,T]=M6(F),Z=Ir(b);hl(()=>{Y&&Z?.()},[Y,Z]);const ue=q.arrow?.x,I=q.arrow?.y,pe=q.arrow?.centerOffset!==0,[Ee,ye]=E.useState();return hl(()=>{_&&ye(window.getComputedStyle(_).zIndex)},[_]),C.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:Y?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[q.transformOrigin?.x,q.transformOrigin?.y].join(" "),...q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:C.jsx(bQ,{scope:n,placedSide:se,onArrowChange:M,arrowX:ue,arrowY:I,shouldHideArrow:pe,children:C.jsx(st.div,{"data-side":se,"data-align":T,...w,ref:k,style:{...w.style,animation:Y?void 0:"none"}})})})});E6.displayName=Lk;var T6="PopperArrow",xQ={top:"bottom",right:"left",bottom:"top",left:"right"},R6=E.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=vQ(T6,r),o=xQ[s.placedSide];return C.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:C.jsx(gQ,{...i,ref:n,style:{...i.style,display:"block"}})})});R6.displayName=T6;function wQ(t){return t!==null}var SQ=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[h,f]=M6(n),d={start:"0%",center:"50%",end:"100%"}[f],m=(i.arrow?.x??0)+a/2,y=(i.arrow?.y??0)+c/2;let b="",w="";return h==="bottom"?(b=o?d:`${m}px`,w=`${-c}px`):h==="top"?(b=o?d:`${m}px`,w=`${r.floating.height+c}px`):h==="right"?(b=`${-c}px`,w=o?d:`${y}px`):h==="left"&&(b=`${r.floating.width+c}px`,w=o?d:`${y}px`),{data:{x:b,y:w}}}});function M6(t){const[e,n="center"]=t.split("-");return[e,n]}var O6=C6,P6=k6,D6=E6,L6=R6,_Q="Portal",Sx=E.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=E.useState(!1);hl(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?PX.createPortal(C.jsx(st.div,{...r,ref:e}),o):null});Sx.displayName=_Q;function CQ(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var As=t=>{const{present:e,children:n}=t,r=AQ(e),i=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),s=jt(r.ref,kQ(i));return typeof n=="function"||r.isPresent?E.cloneElement(i,{ref:s}):null};As.displayName="Presence";function AQ(t){const[e,n]=E.useState(),r=E.useRef(null),i=E.useRef(t),s=E.useRef("none"),o=t?"mounted":"unmounted",[a,c]=CQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const h=T0(r.current);s.current=a==="mounted"?h:"none"},[a]),hl(()=>{const h=r.current,f=i.current;if(f!==t){const m=s.current,y=T0(h);t?c("MOUNT"):y==="none"||h?.display==="none"?c("UNMOUNT"):c(f&&m!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),hl(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,d=y=>{const w=T0(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&w&&(c("ANIMATION_END"),!i.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},m=y=>{y.target===e&&(s.current=T0(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function T0(t){return t?.animationName||"none"}function kQ(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var EQ=xB[" useInsertionEffect ".trim().toString()]||hl;function qh({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=TQ({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:i;{const f=E.useRef(t!==void 0);E.useEffect(()=>{const d=f.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,r])}const h=E.useCallback(f=>{if(a){const d=RQ(f)?f(t):f;d!==t&&o.current?.(d)}else s(f)},[a,t,s,o]);return[c,h]}function TQ({defaultProp:t,onChange:e}){const[n,r]=E.useState(t),i=E.useRef(n),s=E.useRef(e);return EQ(()=>{s.current=e},[e]),E.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function RQ(t){return typeof t=="function"}var MQ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ru=new WeakMap,R0=new WeakMap,M0={},L2=0,I6=function(t){return t&&(t.host||I6(t.parentNode))},OQ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=I6(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},PQ=function(t,e,n,r){var i=OQ(e,Array.isArray(t)?t:[t]);M0[n]||(M0[n]=new WeakMap);var s=M0[n],o=[],a=new Set,c=new Set(i),h=function(d){!d||a.has(d)||(a.add(d),h(d.parentNode))};i.forEach(h);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(m){if(a.has(m))f(m);else try{var y=m.getAttribute(r),b=y!==null&&y!=="false",w=(Ru.get(m)||0)+1,S=(s.get(m)||0)+1;Ru.set(m,w),s.set(m,S),o.push(m),w===1&&b&&R0.set(m,!0),S===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return f(e),a.clear(),L2++,function(){o.forEach(function(d){var m=Ru.get(d)-1,y=s.get(d)-1;Ru.set(d,m),s.set(d,y),m||(R0.has(d)||d.removeAttribute(r),R0.delete(d)),y||d.removeAttribute(n)}),L2--,L2||(Ru=new WeakMap,Ru=new WeakMap,R0=new WeakMap,M0={})}},N6=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=MQ(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),PQ(r,i,n,"aria-hidden")):function(){return null}},Js=function(){return Js=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Js.apply(this,arguments)};function B6(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Jy(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Qy="right-scroll-bar-position",Zy="width-before-scroll-bar",DQ="with-scroll-bars-hidden",LQ="--removed-body-scroll-bar-size";function I2(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function IQ(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var NQ=typeof window<"u"?E.useLayoutEffect:E.useEffect,BD=new WeakMap;function BQ(t,e){var n=IQ(null,function(r){return t.forEach(function(i){return I2(i,r)})});return NQ(function(){var r=BD.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||I2(a,null)}),s.forEach(function(a){i.has(a)||I2(a,o)})}BD.set(n,t)},[t]),n}function jQ(t){return t}function $Q(t,e){e===void 0&&(e=jQ);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var f=o;o=[],f.forEach(s)},h=function(){return Promise.resolve().then(c)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return i}function VQ(t){t===void 0&&(t={});var e=$Q(null);return e.options=Js({async:!0,ssr:!1},t),e}var j6=function(t){var e=t.sideCar,n=B6(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Js({},n))};j6.isSideCarExport=!0;function FQ(t,e){return t.useMedium(e),j6}var $6=VQ(),N2=function(){},_x=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:N2,onWheelCapture:N2,onTouchMoveCapture:N2}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,h=t.removeScrollBar,f=t.enabled,d=t.shards,m=t.sideCar,y=t.noRelative,b=t.noIsolation,w=t.inert,S=t.allowPinchZoom,_=t.as,A=_===void 0?"div":_,k=t.gapMode,P=B6(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=m,O=BQ([n,e]),L=Js(Js({},P),i);return E.createElement(E.Fragment,null,f&&E.createElement(M,{sideCar:$6,removeScrollBar:h,shards:d,noRelative:y,noIsolation:b,inert:w,setCallbacks:s,allowPinchZoom:!!S,lockRef:n,gapMode:k}),o?E.cloneElement(E.Children.only(a),Js(Js({},L),{ref:O})):E.createElement(A,Js({},L,{className:c,ref:O}),a))});_x.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_x.classNames={fullWidth:Zy,zeroRight:Qy};var zQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function HQ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=zQ();return e&&t.setAttribute("nonce",e),t}function UQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function qQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var WQ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=HQ())&&(UQ(e,n),qQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},GQ=function(){var t=WQ();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},V6=function(){var t=GQ(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},KQ={left:0,top:0,right:0,gap:0},B2=function(t){return parseInt(t||"",10)||0},YQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[B2(n),B2(r),B2(i)]},XQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return KQ;var e=YQ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},JQ=V6(),ph="data-scroll-locked",QQ=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(DQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ph,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qy,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Zy,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Qy," .").concat(Qy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Zy," .").concat(Zy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ph,`] {
    `).concat(LQ,": ").concat(a,`px;
  }
`)},jD=function(){var t=parseInt(document.body.getAttribute(ph)||"0",10);return isFinite(t)?t:0},ZQ=function(){E.useEffect(function(){return document.body.setAttribute(ph,(jD()+1).toString()),function(){var t=jD()-1;t<=0?document.body.removeAttribute(ph):document.body.setAttribute(ph,t.toString())}},[])},eZ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;ZQ();var s=E.useMemo(function(){return XQ(i)},[i]);return E.createElement(JQ,{styles:QQ(s,!e,i,n?"":"!important")})},V_=!1;if(typeof window<"u")try{var O0=Object.defineProperty({},"passive",{get:function(){return V_=!0,!0}});window.addEventListener("test",O0,O0),window.removeEventListener("test",O0,O0)}catch{V_=!1}var Mu=V_?{passive:!1}:!1,tZ=function(t){return t.tagName==="TEXTAREA"},F6=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!tZ(t)&&n[e]==="visible")},nZ=function(t){return F6(t,"overflowY")},rZ=function(t){return F6(t,"overflowX")},$D=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=z6(t,r);if(i){var s=H6(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},iZ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},sZ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},z6=function(t,e){return t==="v"?nZ(e):rZ(e)},H6=function(t,e){return t==="v"?iZ(e):sZ(e)},oZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},aZ=function(t,e,n,r,i){var s=oZ(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,c=e.contains(a),h=!1,f=o>0,d=0,m=0;do{if(!a)break;var y=H6(t,a),b=y[0],w=y[1],S=y[2],_=w-S-s*b;(b||_)&&z6(t,a)&&(d+=_,m+=b);var A=a.parentNode;a=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(f&&Math.abs(d)<1||!f&&Math.abs(m)<1)&&(h=!0),h},P0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},VD=function(t){return[t.deltaX,t.deltaY]},FD=function(t){return t&&"current"in t?t.current:t},lZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},cZ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},uZ=0,Ou=[];function hZ(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),i=E.useState(uZ++)[0],s=E.useState(V6)[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=Jy([t.lockRef.current],(t.shards||[]).map(FD),!0).filter(Boolean);return w.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=E.useCallback(function(w,S){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var _=P0(w),A=n.current,k="deltaX"in w?w.deltaX:A[0]-_[0],P="deltaY"in w?w.deltaY:A[1]-_[1],M,O=w.target,L=Math.abs(k)>Math.abs(P)?"h":"v";if("touches"in w&&L==="h"&&O.type==="range")return!1;var N=$D(L,O);if(!N)return!0;if(N?M=L:(M=L==="v"?"h":"v",N=$D(L,O)),!N)return!1;if(!r.current&&"changedTouches"in w&&(k||P)&&(r.current=M),!M)return!0;var z=r.current||M;return aZ(z,S,w,z==="h"?k:P)},[]),c=E.useCallback(function(w){var S=w;if(!(!Ou.length||Ou[Ou.length-1]!==s)){var _="deltaY"in S?VD(S):P0(S),A=e.current.filter(function(M){return M.name===S.type&&(M.target===S.target||S.target===M.shadowParent)&&lZ(M.delta,_)})[0];if(A&&A.should){S.cancelable&&S.preventDefault();return}if(!A){var k=(o.current.shards||[]).map(FD).filter(Boolean).filter(function(M){return M.contains(S.target)}),P=k.length>0?a(S,k[0]):!o.current.noIsolation;P&&S.cancelable&&S.preventDefault()}}},[]),h=E.useCallback(function(w,S,_,A){var k={name:w,delta:S,target:_,should:A,shadowParent:fZ(_)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(P){return P!==k})},1)},[]),f=E.useCallback(function(w){n.current=P0(w),r.current=void 0},[]),d=E.useCallback(function(w){h(w.type,VD(w),w.target,a(w,t.lockRef.current))},[]),m=E.useCallback(function(w){h(w.type,P0(w),w.target,a(w,t.lockRef.current))},[]);E.useEffect(function(){return Ou.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Mu),document.addEventListener("touchmove",c,Mu),document.addEventListener("touchstart",f,Mu),function(){Ou=Ou.filter(function(w){return w!==s}),document.removeEventListener("wheel",c,Mu),document.removeEventListener("touchmove",c,Mu),document.removeEventListener("touchstart",f,Mu)}},[]);var y=t.removeScrollBar,b=t.inert;return E.createElement(E.Fragment,null,b?E.createElement(s,{styles:cZ(i)}):null,y?E.createElement(eZ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function fZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const dZ=FQ($6,hZ);var Ik=E.forwardRef(function(t,e){return E.createElement(_x,Js({},t,{ref:e,sideCar:dZ}))});Ik.classNames=_x.classNames;var Nk=t=>{const e=E.useRef(void 0);return E.useCallback(r=>{e.current&&e.current(),r&&(e.current=t(r))},[t])},pZ=()=>{const t=Ei(),e=Rt(()=>t.message()),n=E.useCallback(r=>{const i=()=>{e.setIsHovering(!0)},s=()=>{e.setIsHovering(!1)};return r.addEventListener("mouseenter",i),r.addEventListener("mouseleave",s),r.matches(":hover")&&e.setIsHovering(!0),()=>{r.removeEventListener("mouseenter",i),r.removeEventListener("mouseleave",s),e.setIsHovering(!1)}},[e]);return Nk(n)},Bk=E.forwardRef((t,e)=>{const n=pZ(),r=jt(e,n);return C.jsx(st.div,{...t,ref:r})});Bk.displayName="MessagePrimitive.Root";var U6=()=>Rt(({part:e})=>{if(e.type!=="text"&&e.type!=="reasoning")throw new Error("MessagePartText can only be used inside text or reasoning message parts.");return e}),q6=E.forwardRef(({smooth:t=!0,component:e="span",...n},r)=>{const{text:i,status:s}=JB(U6(),t);return C.jsx(e,{"data-status":s.type,...n,ref:r,children:i})});q6.displayName="MessagePartPrimitive.Text";var mZ=()=>Rt(({part:e})=>{if(e.type!=="image")throw new Error("MessagePartImage can only be used inside image message parts.");return e}),W6=E.forwardRef((t,e)=>{const{image:n}=mZ();return C.jsx(st.img,{src:n,...t,ref:e})});W6.displayName="MessagePartPrimitive.Image";var G6=({children:t})=>Rt(({part:n})=>n.status.type==="running")?t:null;G6.displayName="MessagePartPrimitive.InProgress";const zD=t=>Symbol.iterator in t,HD=t=>"entries"in t,UD=(t,e)=>{const n=t instanceof Map?t:new Map(t.entries()),r=e instanceof Map?e:new Map(e.entries());if(n.size!==r.size)return!1;for(const[i,s]of n)if(!r.has(i)||!Object.is(s,r.get(i)))return!1;return!0},gZ=(t,e)=>{const n=t[Symbol.iterator](),r=e[Symbol.iterator]();let i=n.next(),s=r.next();for(;!i.done&&!s.done;){if(!Object.is(i.value,s.value))return!1;i=n.next(),s=r.next()}return!!i.done&&!!s.done};function yZ(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:zD(t)&&zD(e)?HD(t)&&HD(e)?UD(t,e):gZ(t,e):UD({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function bZ(t){const e=xe.useRef(void 0);return n=>{const r=t(n);return yZ(e.current,r)?e.current:e.current=r}}var vZ=t=>{const e=[];let n=-1;for(let r=0;r<t.length;r++)t[r]==="tool-call"?n===-1&&(n=r):(n!==-1&&(e.push({type:"toolGroup",startIndex:n,endIndex:r-1}),n=-1),e.push({type:"single",index:r}));return n!==-1&&e.push({type:"toolGroup",startIndex:n,endIndex:t.length-1}),e},xZ=()=>{const t=Rt(bZ(e=>e.message.parts.map(n=>n.type)));return E.useMemo(()=>t.length===0?[]:vZ(t),[t])},wZ=({Fallback:t,...e})=>{const n=Rt(({toolUIs:r})=>{const i=r[e.toolName]??t;return Array.isArray(i)?i[0]:i});return n?C.jsx(n,{...e}):null},Xa={Text:()=>C.jsxs("p",{style:{whiteSpace:"pre-line"},children:[C.jsx(q6,{}),C.jsx(G6,{children:C.jsx("span",{style:{fontFamily:"revert"},children:" "})})]}),Reasoning:()=>null,Source:()=>null,Image:()=>C.jsx(W6,{}),File:()=>null,Unstable_Audio:()=>null,ToolGroup:({children:t})=>t},SZ=({components:{Text:t=Xa.Text,Reasoning:e=Xa.Reasoning,Image:n=Xa.Image,Source:r=Xa.Source,File:i=Xa.File,Unstable_Audio:s=Xa.Unstable_Audio,tools:o={}}={}})=>{const a=Ei(),c=Rt(({part:f})=>f),h=c.type;if(h==="tool-call"){const f=m=>a.part().addToolResult(m);if("Override"in o)return C.jsx(o.Override,{...c,addResult:f});const d=o.by_name?.[c.toolName]??o.Fallback;return C.jsx(wZ,{...c,Fallback:d,addResult:f})}if(c.status?.type==="requires-action")throw new Error("Encountered unexpected requires-action status");switch(h){case"text":return C.jsx(t,{...c});case"reasoning":return C.jsx(e,{...c});case"source":return C.jsx(r,{...c});case"image":return C.jsx(n,{...c});case"file":return C.jsx(i,{...c});case"audio":return C.jsx(s,{...c});default:const f=h;throw new Error(`Unknown message part type: ${f}`)}},F_=E.memo(({index:t,components:e})=>C.jsx(mX,{index:t,children:C.jsx(SZ,{components:e})}),(t,e)=>t.index===e.index&&t.components?.Text===e.components?.Text&&t.components?.Reasoning===e.components?.Reasoning&&t.components?.Source===e.components?.Source&&t.components?.Image===e.components?.Image&&t.components?.File===e.components?.File&&t.components?.Unstable_Audio===e.components?.Unstable_Audio&&t.components?.tools===e.components?.tools&&t.components?.ToolGroup===e.components?.ToolGroup);F_.displayName="MessagePrimitive.PartByIndex";var _Z=({status:t,component:e})=>C.jsx(yX,{text:"",isRunning:t.type==="running",children:C.jsx(e,{type:"text",text:"",status:t})}),CZ=Object.freeze({type:"complete"}),AZ=({components:t})=>{const e=Rt(n=>n.message.status??CZ);return t?.Empty?C.jsx(t.Empty,{status:e}):C.jsx(_Z,{status:e,component:t?.Text??Xa.Text})},kZ=E.memo(AZ,(t,e)=>t.components?.Empty===e.components?.Empty&&t.components?.Text===e.components?.Text),jk=({components:t})=>{const e=Rt(({message:i})=>i.parts.length),n=xZ(),r=E.useMemo(()=>e===0?C.jsx(kZ,{components:t}):n.map(i=>{if(i.type==="single")return C.jsx(F_,{index:i.index,components:t},i.index);{const s=t.ToolGroup??Xa.ToolGroup;return C.jsx(s,{startIndex:i.startIndex,endIndex:i.endIndex,children:Array.from({length:i.endIndex-i.startIndex+1},(o,a)=>C.jsx(F_,{index:i.startIndex+a,components:t},a))},i.startIndex)}}),[n,t,e]);return C.jsx(C.Fragment,{children:r})};jk.displayName="MessagePrimitive.Parts";var EZ=t=>Rt(({message:e})=>{const{role:n,attachments:r,parts:i,branchCount:s,isLast:o,speech:a,submittedFeedback:c,isCopied:h,isHovering:f}=e;return!(t.hasBranches===!0&&s<2||t.user&&n!=="user"||t.assistant&&n!=="assistant"||t.system&&n!=="system"||t.lastOrHover===!0&&!f&&!o||t.last!==void 0&&t.last!==o||t.copied===!0&&!h||t.copied===!1&&h||t.speaking===!0&&a==null||t.speaking===!1&&a!=null||t.hasAttachments===!0&&(n!=="user"||!r?.length)||t.hasAttachments===!1&&n==="user"&&r?.length||t.hasContent===!0&&i.length===0||t.hasContent===!1&&i.length>0||t.submittedFeedback!==void 0&&(c?.type??null)!==t.submittedFeedback)}),z_=({children:t,...e})=>EZ(e)?t:null;z_.displayName="MessagePrimitive.If";var K6=({children:t})=>Rt(({message:n})=>n.status?.type==="incomplete"&&n.status.reason==="error")?C.jsx(C.Fragment,{children:t}):null;K6.displayName="MessagePrimitive.Error";var Y6=()=>{const t=Ei(),e=Rt(r=>r.thread.isRunning||!r.composer.isEditing||r.composer.isEmpty),n=E.useCallback(()=>{t.composer().send()},[t]);return e?null:n},TZ=r6("ComposerPrimitive.Send",Y6),X6=E.forwardRef(({onSubmit:t,...e},n)=>{const r=Y6(),i=s=>{s.preventDefault(),r&&r()};return C.jsx(st.form,{...e,ref:n,onSubmit:Ie(t,i)})});X6.displayName="ComposerPrimitive.Root";function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wp.apply(null,arguments)}function J6(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var RZ=E.useLayoutEffect,MZ=function(e){var n=xe.useRef(e);return RZ(function(){n.current=e}),n},qD=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},OZ=function(e,n){var r=xe.useRef();return xe.useCallback(function(i){e.current=i,r.current&&qD(r.current,null),r.current=n,n&&qD(n,i)},[n])},WD={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},PZ=function(e){Object.keys(WD).forEach(function(n){e.style.setProperty(n,WD[n],"important")})},GD=PZ,Ar=null,KD=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function DZ(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ar||(Ar=document.createElement("textarea"),Ar.setAttribute("tabindex","-1"),Ar.setAttribute("aria-hidden","true"),GD(Ar)),Ar.parentNode===null&&document.body.appendChild(Ar);var i=t.paddingSize,s=t.borderSize,o=t.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(m){var y=m;Ar.style[y]=o[y]}),GD(Ar),Ar.value=e;var c=KD(Ar,t);Ar.value=e,c=KD(Ar,t),Ar.value="x";var h=Ar.scrollHeight-i,f=h*n;a==="border-box"&&(f=f+i+s),c=Math.max(f,c);var d=h*r;return a==="border-box"&&(d=d+i+s),c=Math.min(d,c),[c,h]}var YD=function(){},LZ=function(e,n){return e.reduce(function(r,i){return r[i]=n[i],r},{})},IZ=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],NZ=!!document.documentElement.currentStyle,BZ=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=LZ(IZ,n),i=r.boxSizing;if(i==="")return null;NZ&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},jZ=BZ;function $k(t,e,n){var r=MZ(n);E.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(t)return t.addEventListener(e,i),function(){return t.removeEventListener(e,i)}},[])}var $Z=function(e,n){$k(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},VZ=function(e){$k(window,"resize",e)},FZ=function(e){$k(document.fonts,"loadingdone",e)},zZ=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],HZ=function(e,n){var r=e.cacheMeasurements,i=e.maxRows,s=e.minRows,o=e.onChange,a=o===void 0?YD:o,c=e.onHeightChange,h=c===void 0?YD:c,f=J6(e,zZ),d=f.value!==void 0,m=E.useRef(null),y=OZ(m,n),b=E.useRef(0),w=E.useRef(),S=function(){var k=m.current,P=r&&w.current?w.current:jZ(k);if(P){w.current=P;var M=DZ(P,k.value||k.placeholder||"x",s,i),O=M[0],L=M[1];b.current!==O&&(b.current=O,k.style.setProperty("height",O+"px","important"),h(O,{rowHeight:L}))}},_=function(k){d||S(),a(k)};return E.useLayoutEffect(S),$Z(m,function(){if(!d){var A=m.current.value;requestAnimationFrame(function(){var k=m.current;k&&A!==k.value&&S()})}}),VZ(S),FZ(S),E.createElement("textarea",Wp({},f,{onChange:_,ref:y}))},UZ=E.forwardRef(HZ),Q6=t=>{const e=Ir(t),n=AY(r=>r.onScrollToBottom);E.useEffect(()=>n(e),[n,e])},Z6=E.forwardRef(({autoFocus:t=!1,asChild:e,disabled:n,onChange:r,onKeyDown:i,onPaste:s,submitOnEnter:o=!0,cancelOnEscape:a=!0,unstable_focusOnRunStart:c=!0,unstable_focusOnScrollToBottom:h=!0,unstable_focusOnThreadSwitched:f=!0,addAttachmentOnPaste:d=!0,...m},y)=>{const b=Ei(),w=Rt(({composer:N})=>N.isEditing?N.text:""),S=e?QB:UZ,_=Rt(({thread:N})=>N.isDisabled)||n,A=E.useRef(null),k=jt(y,A);i6(N=>{if(!a)return;const z=b.composer();z.getState().canCancel&&(z.cancel(),N.preventDefault())});const P=N=>{_||!o||N.nativeEvent.isComposing||N.key==="Enter"&&N.shiftKey===!1&&(b.thread().getState().isRunning||(N.preventDefault(),A.current?.closest("form")?.requestSubmit()))},M=async N=>{if(!d)return;const z=b.thread().getState().capabilities,j=Array.from(N.clipboardData?.files||[]);if(z.attachments&&j.length>0)try{N.preventDefault(),await Promise.all(j.map(U=>b.composer().addAttachment(U)))}catch(U){console.error("Error adding attachment:",U)}},O=t&&!_,L=E.useCallback(()=>{const N=A.current;!N||!O||(N.focus({preventScroll:!0}),N.setSelectionRange(N.value.length,N.value.length))},[O]);return E.useEffect(()=>L(),[L]),Q6(()=>{b.composer().getState().type==="thread"&&h&&L()}),E.useEffect(()=>{if(!(b.composer().getState().type!=="thread"||!c))return b.on("thread.run-start",L)},[c,L,b]),E.useEffect(()=>{if(!(b.composer().getState().type!=="thread"||!f))return b.on("thread-list-item.switched-to",L)},[f,L,b]),C.jsx(S,{name:"input",value:w,...m,ref:k,disabled:_,onChange:Ie(r,N=>{b.composer().getState().isEditing&&(b.composer().setText(N.target.value),b.flushSync())}),onKeyDown:Ie(i,P),onPaste:Ie(s,M)})});Z6.displayName="ComposerPrimitive.Input";var qZ=()=>{const t=Ei(),e=Rt(({composer:r})=>!r.canCancel),n=E.useCallback(()=>{t.composer().cancel()},[t]);return e?null:n},WZ=r6("ComposerPrimitive.Cancel",qZ),ej=E.forwardRef((t,e)=>C.jsx(st.div,{role:"alert",...t,ref:e}));ej.displayName="ErrorPrimitive.Root";var tj=E.forwardRef(({children:t,...e},n)=>{const r=Rt(({message:i})=>i.status?.type==="incomplete"&&i.status.reason==="error"?i.status.error:void 0);return r===void 0?null:C.jsx(st.span,{...e,ref:n,children:t??String(r)})});tj.displayName="ErrorPrimitive.Message";var nj=E.forwardRef((t,e)=>C.jsx(st.div,{...t,ref:e}));nj.displayName="ThreadPrimitive.Root";var rj=({children:t})=>Rt(({thread:n})=>n.messages.length===0)?t:null;rj.displayName="ThreadPrimitive.Empty";var GZ=t=>Rt(({thread:e})=>!(t.empty===!0&&e.messages.length!==0||t.empty===!1&&e.messages.length===0||t.running===!0&&!e.isRunning||t.running===!1&&e.isRunning||t.disabled===!0&&!e.isDisabled||t.disabled===!1&&e.isDisabled)),qb=({children:t,...e})=>GZ(e)?t:null;qb.displayName="ThreadPrimitive.If";var KZ=t=>{const e=Ir(t),n=E.useCallback(r=>{const i=new ResizeObserver(()=>{e()}),s=new MutationObserver(()=>{e()});return i.observe(r),s.observe(r,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{i.disconnect(),s.disconnect()}},[e]);return Nk(n)},YZ=({autoScroll:t=!0})=>{const e=E.useRef(null),n=jB(),r=E.useRef(0),i=E.useRef(!1),s=E.useCallback(f=>{const d=e.current;!d||!t||(i.current=!0,d.scrollTo({top:d.scrollHeight,behavior:f}))},[t]),o=()=>{const f=e.current;if(!f)return;const d=n.getState().isAtBottom,m=f.scrollHeight-f.scrollTop<=f.clientHeight+1;!m&&r.current<f.scrollTop||(m&&(i.current=!1),m!==d&&$b(n).setState({isAtBottom:m})),r.current=f.scrollTop},a=KZ(()=>{(i.current||n.getState().isAtBottom)&&s("instant"),o()}),c=Nk(f=>(f.addEventListener("scroll",o),()=>{f.removeEventListener("scroll",o)}));return Q6(()=>{s("auto")}),bX("thread.run-start",()=>s("auto")),jt(a,c,e)},ij=E.forwardRef(({autoScroll:t,children:e,...n},r)=>{const i=YZ({autoScroll:t}),s=jt(r,i);return C.jsx(st.div,{...n,ref:s,children:e})});ij.displayName="ThreadPrimitive.ViewportScrollable";var H_=E.forwardRef((t,e)=>C.jsx($B,{children:C.jsx(ij,{...t,ref:e})}));H_.displayName="ThreadPrimitive.Viewport";var sj=(t,e)=>t.Message===e.Message&&t.EditComposer===e.EditComposer&&t.UserEditComposer===e.UserEditComposer&&t.AssistantEditComposer===e.AssistantEditComposer&&t.SystemEditComposer===e.SystemEditComposer&&t.UserMessage===e.UserMessage&&t.AssistantMessage===e.AssistantMessage&&t.SystemMessage===e.SystemMessage,XZ=()=>null,JZ=(t,e,n)=>{switch(e){case"user":return n?t.UserEditComposer??t.EditComposer??t.UserMessage??t.Message:t.UserMessage??t.Message;case"assistant":return n?t.AssistantEditComposer??t.EditComposer??t.AssistantMessage??t.Message:t.AssistantMessage??t.Message;case"system":return n?t.SystemEditComposer??t.EditComposer??t.SystemMessage??t.Message:t.SystemMessage??XZ;default:const r=e;throw new Error(`Unknown message role: ${r}`)}},QZ=({components:t})=>{const e=Rt(({message:i})=>i.role),n=Rt(({message:i})=>i.composer.isEditing),r=JZ(t,e,n);return C.jsx(r,{})},oj=E.memo(({index:t,components:e})=>C.jsx(pX,{index:t,children:C.jsx(QZ,{components:e})}),(t,e)=>t.index===e.index&&sj(t.components,e.components));oj.displayName="ThreadPrimitive.MessageByIndex";var aj=({components:t})=>{const e=Rt(({thread:r})=>r.messages.length);return E.useMemo(()=>e===0?null:Array.from({length:e},(r,i)=>C.jsx(oj,{index:i,components:t},i)),[e,t])};aj.displayName="ThreadPrimitive.Messages";var ZZ=E.memo(aj,(t,e)=>sj(t.components,e.components));function Ye(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function de(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let lj=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return lj=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Gp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const U_=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class nt extends Error{}let Ti=class q_ extends nt{constructor(e,n,r,i){super(`${q_.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i?.get("request-id"),this.error=n}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Cx({message:r,cause:U_(n)});const s=n;return e===400?new uj(e,s,r,i):e===401?new hj(e,s,r,i):e===403?new fj(e,s,r,i):e===404?new dj(e,s,r,i):e===409?new pj(e,s,r,i):e===422?new mj(e,s,r,i):e===429?new gj(e,s,r,i):e>=500?new yj(e,s,r,i):new q_(e,s,r,i)}},ps=class extends Ti{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Cx=class extends Ti{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},cj=class extends Cx{constructor({message:e}={}){super({message:e??"Request timed out."})}},uj=class extends Ti{},hj=class extends Ti{},fj=class extends Ti{},dj=class extends Ti{},pj=class extends Ti{},mj=class extends Ti{},gj=class extends Ti{},yj=class extends Ti{};const eee=/^[a-z][a-z0-9+.-]*:/i,tee=t=>eee.test(t);let W_=t=>(W_=Array.isArray,W_(t)),XD=W_;function JD(t){return typeof t!="object"?{}:t??{}}function nee(t){if(!t)return!0;for(const e in t)return!1;return!0}function ree(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const iee=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new nt(`${t} must be an integer`);if(e<0)throw new nt(`${t} must be a positive integer`);return e},bj=t=>{try{return JSON.parse(t)}catch{return}},see=t=>new Promise(e=>setTimeout(e,t)),Hu="0.60.0",oee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function aee(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const lee=()=>{const t=aee();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hu,"X-Stainless-OS":ZD(Deno.build.os),"X-Stainless-Arch":QD(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hu,"X-Stainless-OS":ZD(globalThis.process.platform??"unknown"),"X-Stainless-Arch":QD(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=cee();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function cee(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const QD=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ZD=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let eL;const uee=()=>eL??(eL=lee());function hee(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function vj(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function xj(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return vj({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){await e.return?.()}})}function Vk(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function fee(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const dee=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function pee(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let tL;function Fk(t){let e;return(tL??(e=new globalThis.TextEncoder,tL=e.encode.bind(e)))(t)}let nL;function rL(t){let e;return(nL??(e=new globalThis.TextDecoder,nL=e.decode.bind(e)))(t)}var pi,mi;let Mm=class{constructor(){pi.set(this,void 0),mi.set(this,void 0),Ye(this,pi,new Uint8Array),Ye(this,mi,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Fk(e):e;Ye(this,pi,pee([de(this,pi,"f"),n]));const r=[];let i;for(;(i=mee(de(this,pi,"f"),de(this,mi,"f")))!=null;){if(i.carriage&&de(this,mi,"f")==null){Ye(this,mi,i.index);continue}if(de(this,mi,"f")!=null&&(i.index!==de(this,mi,"f")+1||i.carriage)){r.push(rL(de(this,pi,"f").subarray(0,de(this,mi,"f")-1))),Ye(this,pi,de(this,pi,"f").subarray(de(this,mi,"f"))),Ye(this,mi,null);continue}const s=de(this,mi,"f")!==null?i.preceding-1:i.preceding,o=rL(de(this,pi,"f").subarray(0,s));r.push(o),Ye(this,pi,de(this,pi,"f").subarray(i.index)),Ye(this,mi,null)}return r}flush(){return de(this,pi,"f").length?this.decode(`
`):[]}};pi=new WeakMap,mi=new WeakMap;Mm.NEWLINE_CHARS=new Set([`
`,"\r"]);Mm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mee(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function gee(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Wb={off:0,error:200,warn:300,info:400,debug:500},iL=(t,e,n)=>{if(t){if(ree(Wb,t))return t;Er(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Wb))}`)}};function zd(){}function D0(t,e,n){return!e||Wb[t]>Wb[n]?zd:e[t].bind(e)}const yee={error:zd,warn:zd,info:zd,debug:zd};let sL=new WeakMap;function Er(t){const e=t.logger,n=t.logLevel??"off";if(!e)return yee;const r=sL.get(e);if(r&&r[0]===n)return r[1];const i={error:D0("error",e,n),warn:D0("warn",e,n),info:D0("info",e,n),debug:D0("debug",e,n)};return sL.set(e,[n,i]),i}const Jl=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var pd;let Kp=class Hd{constructor(e,n,r){this.iterator=e,pd.set(this,void 0),this.controller=n,Ye(this,pd,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Er(r):console;async function*o(){if(i)throw new nt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of bee(e,n)){if(c.event==="completion")try{yield JSON.parse(c.data)}catch(h){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),h}if(c.event==="message_start"||c.event==="message_delta"||c.event==="message_stop"||c.event==="content_block_start"||c.event==="content_block_delta"||c.event==="content_block_stop")try{yield JSON.parse(c.data)}catch(h){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),h}if(c.event!=="ping"&&c.event==="error")throw new Ti(void 0,bj(c.data)??c.data,void 0,e.headers)}a=!0}catch(c){if(Gp(c))return;throw c}finally{a||n.abort()}}return new Hd(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new Mm,c=Vk(e);for await(const h of c)for(const f of a.decode(h))yield f;for(const h of a.flush())yield h}async function*o(){if(i)throw new nt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of s())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(Gp(c))return;throw c}finally{a||n.abort()}}return new Hd(o,n,r)}[(pd=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Hd(()=>i(e),this.controller,de(this,pd,"f")),new Hd(()=>i(n),this.controller,de(this,pd,"f"))]}toReadableStream(){const e=this;let n;return vj({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=Fk(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}};async function*bee(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new nt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new nt("Attempted to iterate over a response with no body");const n=new xee,r=new Mm,i=Vk(t.body);for await(const s of vee(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*vee(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Fk(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=gee(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}let xee=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=wee(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function wee(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function wj(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{if(e.options.stream)return Er(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):Kp.fromSSEResponse(n,e.controller);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type")?.split(";")[0]?.trim();if(c?.includes("application/json")||c?.endsWith("+json")){const d=await n.json();return Sj(d,n)}return await n.text()})();return Er(t).debug(`[${r}] response parsed`,Jl({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function Sj(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var Ud;let _j=class Cj extends Promise{constructor(e,n,r=wj){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,Ud.set(this,void 0),Ye(this,Ud,e)}_thenUnwrap(e){return new Cj(de(this,Ud,"f"),this.responsePromise,async(n,r)=>Sj(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(de(this,Ud,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Ud=new WeakMap;var L0;let See=class{constructor(e,n,r,i){L0.set(this,void 0),Ye(this,L0,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new nt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await de(this,L0,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(L0=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}},_ee=class extends _j{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await wj(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}},Om=class extends See{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const n=this.first_id;return n?{...this.options,query:{...JD(this.options.query),before_id:n}}:null}const e=this.last_id;return e?{...this.options,query:{...JD(this.options.query),after_id:e}}:null}};const Aj=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function mh(t,e,n){return Aj(),new File(t,e??"unknown_file",n)}function eb(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const kj=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Cee=async(t,e)=>({...t,body:await kee(t.body,e)}),oL=new WeakMap;function Aee(t){const e=typeof t=="function"?t:t.fetch,n=oL.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return oL.set(e,r),r}const kee=async(t,e)=>{if(!await Aee(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>G_(n,r,i))),n},Eee=t=>t instanceof Blob&&"name"in t,G_=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response){let r={};const i=n.headers.get("Content-Type");i&&(r={type:i}),t.append(e,mh([await n.blob()],eb(n),r))}else if(kj(n))t.append(e,mh([await new Response(xj(n)).blob()],eb(n)));else if(Eee(n))t.append(e,mh([n],eb(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(r=>G_(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>G_(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Ej=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Tee=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Ej(t),Ree=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Mee(t,e,n){if(Aj(),t=await t,e||(e=eb(t)),Tee(t))return t instanceof File&&e==null&&n==null?t:mh([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...n});if(Ree(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),mh(await K_(i),e,n)}const r=await K_(t);if(!n?.type){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return mh(r,e,n)}async function K_(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Ej(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(kj(t))for await(const n of t)e.push(...await K_(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Oee(t)}`)}return e}function Oee(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let ia=class{constructor(e){this._client=e}};const Tj=Symbol.for("brand.privateNullableHeaders");function*Pee(t){if(!t)return;if(Tj in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():XD(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=XD(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Ft=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Pee(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[Tj]:!0,values:e,nulls:n}};function Rj(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const aL=Object.freeze(Object.create(null)),Dee=(t=Rj)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((f,d,m)=>{/[?#]/.test(d)&&(i=!0);const y=r[m];let b=(i?encodeURIComponent:t)(""+y);return m!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??aL)??aL)?.toString)&&(b=y+"",s.push({start:f.length+d.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+d+(m===r.length?"":b)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=c.exec(a))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((f,d)=>f.start-d.start),s.length>0){let f=0;const d=s.reduce((m,y)=>{const b=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,m+b+w},"");throw new nt(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${d}`)}return o},gs=Dee(Rj);let Mj=class extends ia{list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/files",Om,{query:i,...n,headers:Ft([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(gs`/v1/files/${e}`,{...r,headers:Ft([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r?.headers])})}download(e,n={},r){const{betas:i}=n??{};return this._client.get(gs`/v1/files/${e}/content`,{...r,headers:Ft([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}retrieveMetadata(e,n={},r){const{betas:i}=n??{};return this._client.get(gs`/v1/files/${e}`,{...r,headers:Ft([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r?.headers])})}upload(e,n){const{betas:r,...i}=e;return this._client.post("/v1/files",Cee({body:i,...n,headers:Ft([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])},this._client))}},Oj=class extends ia{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(gs`/v1/models/${e}?beta=true`,{...r,headers:Ft([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},r?.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models?beta=true",Om,{query:i,...n,headers:Ft([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}};class Ax{constructor(e,n){this.iterator=e,this.controller=n}async*decoder(){const e=new Mm;for await(const n of this.iterator)for(const r of e.decode(n))yield JSON.parse(r);for(const n of e.flush())yield JSON.parse(n)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,n){if(!e.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new nt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new nt("Attempted to iterate over a response with no body");return new Ax(Vk(e.body),n)}}let Pj=class extends ia{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/messages/batches?beta=true",{body:i,...n,headers:Ft([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(gs`/v1/messages/batches/${e}?beta=true`,{...r,headers:Ft([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r?.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",Om,{query:i,...n,headers:Ft([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(gs`/v1/messages/batches/${e}?beta=true`,{...r,headers:Ft([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r?.headers])})}cancel(e,n={},r){const{betas:i}=n??{};return this._client.post(gs`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:Ft([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r?.headers])})}async results(e,n={},r){const i=await this.retrieve(e);if(!i.results_url)throw new nt(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);const{betas:s}=n??{};return this._client.get(i.results_url,{...r,headers:Ft([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,a)=>Ax.fromResponse(a.response,a.controller))}};const Lee=t=>{let e=0,n=[];for(;e<t.length;){let r=t[e];if(r==="\\"){e++;continue}if(r==="{"){n.push({type:"brace",value:"{"}),e++;continue}if(r==="}"){n.push({type:"brace",value:"}"}),e++;continue}if(r==="["){n.push({type:"paren",value:"["}),e++;continue}if(r==="]"){n.push({type:"paren",value:"]"}),e++;continue}if(r===":"){n.push({type:"separator",value:":"}),e++;continue}if(r===","){n.push({type:"delimiter",value:","}),e++;continue}if(r==='"'){let a="",c=!1;for(r=t[++e];r!=='"';){if(e===t.length){c=!0;break}if(r==="\\"){if(e++,e===t.length){c=!0;break}a+=r+t[e],r=t[++e]}else a+=r,r=t[++e]}r=t[++e],c||n.push({type:"string",value:a});continue}if(r&&/\s/.test(r)){e++;continue}let s=/[0-9]/;if(r&&s.test(r)||r==="-"||r==="."){let a="";for(r==="-"&&(a+=r,r=t[++e]);r&&s.test(r)||r===".";)a+=r,r=t[++e];n.push({type:"number",value:a});continue}let o=/[a-z]/i;if(r&&o.test(r)){let a="";for(;r&&o.test(r)&&e!==t.length;)a+=r,r=t[++e];if(a=="true"||a=="false"||a==="null")n.push({type:"name",value:a});else{e++;continue}continue}e++}return n},Uu=t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),Uu(t);case"number":let n=e.value[e.value.length-1];if(n==="."||n==="-")return t=t.slice(0,t.length-1),Uu(t);case"string":let r=t[t.length-2];if(r?.type==="delimiter")return t=t.slice(0,t.length-1),Uu(t);if(r?.type==="brace"&&r.value==="{")return t=t.slice(0,t.length-1),Uu(t);break;case"delimiter":return t=t.slice(0,t.length-1),Uu(t)}return t},Iee=t=>{let e=[];return t.map(n=>{n.type==="brace"&&(n.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),n.type==="paren"&&(n.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(n=>{n==="}"?t.push({type:"brace",value:"}"}):n==="]"&&t.push({type:"paren",value:"]"})}),t},Nee=t=>{let e="";return t.map(n=>{switch(n.type){case"string":e+='"'+n.value+'"';break;default:e+=n.value;break}}),e},Dj=t=>JSON.parse(Nee(Iee(Uu(Lee(t)))));var $i,Fa,md,I0,gd,yd,N0,bd,jo,vd,B0,j0,Pu,$0,V0,j2,lL,F0,$2,V2,F2,cL;const uL="__json_buf";function hL(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}class Gb{constructor(){$i.add(this),this.messages=[],this.receivedMessages=[],Fa.set(this,void 0),this.controller=new AbortController,md.set(this,void 0),I0.set(this,()=>{}),gd.set(this,()=>{}),yd.set(this,void 0),N0.set(this,()=>{}),bd.set(this,()=>{}),jo.set(this,{}),vd.set(this,!1),B0.set(this,!1),j0.set(this,!1),Pu.set(this,!1),$0.set(this,void 0),V0.set(this,void 0),F0.set(this,e=>{if(Ye(this,B0,!0),Gp(e)&&(e=new ps),e instanceof ps)return Ye(this,j0,!0),this._emit("abort",e);if(e instanceof nt)return this._emit("error",e);if(e instanceof Error){const n=new nt(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new nt(String(e)))}),Ye(this,md,new Promise((e,n)=>{Ye(this,I0,e,"f"),Ye(this,gd,n,"f")})),Ye(this,yd,new Promise((e,n)=>{Ye(this,N0,e,"f"),Ye(this,bd,n,"f")})),de(this,md,"f").catch(()=>{}),de(this,yd,"f").catch(()=>{})}get response(){return de(this,$0,"f")}get request_id(){return de(this,V0,"f")}async withResponse(){const e=await de(this,md,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new Gb;return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r){const i=new Gb;for(const s of n.messages)i._addMessageParam(s);return i._run(()=>i._createMessage(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},de(this,F0,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){const i=r?.signal;let s;i&&(i.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),i.addEventListener("abort",s));try{de(this,$i,"m",$2).call(this);const{response:o,data:a}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of a)de(this,$i,"m",V2).call(this,c);if(a.controller.signal?.aborted)throw new ps;de(this,$i,"m",F2).call(this)}finally{i&&s&&i.removeEventListener("abort",s)}}_connected(e){this.ended||(Ye(this,$0,e),Ye(this,V0,e?.headers.get("request-id")),de(this,I0,"f").call(this,e),this._emit("connect"))}get ended(){return de(this,vd,"f")}get errored(){return de(this,B0,"f")}get aborted(){return de(this,j0,"f")}abort(){this.controller.abort()}on(e,n){return(de(this,jo,"f")[e]||(de(this,jo,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=de(this,jo,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(de(this,jo,"f")[e]||(de(this,jo,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ye(this,Pu,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ye(this,Pu,!0),await de(this,yd,"f")}get currentMessage(){return de(this,Fa,"f")}async finalMessage(){return await this.done(),de(this,$i,"m",j2).call(this)}async finalText(){return await this.done(),de(this,$i,"m",lL).call(this)}_emit(e,...n){if(de(this,vd,"f"))return;e==="end"&&(Ye(this,vd,!0),de(this,N0,"f").call(this));const r=de(this,jo,"f")[e];if(r&&(de(this,jo,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!de(this,Pu,"f")&&!r?.length&&Promise.reject(i),de(this,gd,"f").call(this,i),de(this,bd,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!de(this,Pu,"f")&&!r?.length&&Promise.reject(i),de(this,gd,"f").call(this,i),de(this,bd,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",de(this,$i,"m",j2).call(this))}async _fromReadableStream(e,n){const r=n?.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{de(this,$i,"m",$2).call(this),this._connected(null);const s=Kp.fromReadableStream(e,this.controller);for await(const o of s)de(this,$i,"m",V2).call(this,o);if(s.controller.signal?.aborted)throw new ps;de(this,$i,"m",F2).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(Fa=new WeakMap,md=new WeakMap,I0=new WeakMap,gd=new WeakMap,yd=new WeakMap,N0=new WeakMap,bd=new WeakMap,jo=new WeakMap,vd=new WeakMap,B0=new WeakMap,j0=new WeakMap,Pu=new WeakMap,$0=new WeakMap,V0=new WeakMap,F0=new WeakMap,$i=new WeakSet,j2=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},lL=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new nt("stream ended without producing a content block with type=text");return n.join(" ")},$2=function(){this.ended||Ye(this,Fa,void 0)},V2=function(n){if(this.ended)return;const r=de(this,$i,"m",cL).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{hL(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Ye(this,Fa,r);break}}},F2=function(){if(this.ended)throw new nt("stream has ended, this shouldn't happen");const n=de(this,Fa,"f");if(!n)throw new nt("request ended without sending any chunks");return Ye(this,Fa,void 0),n},cL=function(n){let r=de(this,Fa,"f");if(n.type==="message_start"){if(r)throw new nt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new nt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.container=n.delta.container,r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push(n.content_block),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{i?.type==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{i?.type==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&hL(i)){let s=i[uL]||"";s+=n.delta.partial_json;const o={...i};if(Object.defineProperty(o,uL,{value:s,enumerable:!1,writable:!0}),s)try{o.input=Dj(s)}catch(a){const c=new nt(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${a}. JSON: ${s}`);de(this,F0,"f").call(this,c)}r.content[n.index]=o}break}case"thinking_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Kp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const Lj={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192},fL={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};let zk=class extends ia{constructor(){super(...arguments),this.batches=new Pj(this._client)}create(e,n){const{betas:r,...i}=e;i.model in fL&&console.warn(`The model '${i.model}' is deprecated and will reach end-of-life on ${fL[i.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!i.stream&&s==null){const o=Lj[i.model]??void 0;s=this._client.calculateNonstreamingTimeout(i.max_tokens,o)}return this._client.post("/v1/messages?beta=true",{body:i,timeout:s??6e5,...n,headers:Ft([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:e.stream??!1})}stream(e,n){return Gb.createMessage(this,e,n)}countTokens(e,n){const{betas:r,...i}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:i,...n,headers:Ft([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},n?.headers])})}};zk.Batches=Pj;let Pm=class extends ia{constructor(){super(...arguments),this.models=new Oj(this._client),this.messages=new zk(this._client),this.files=new Mj(this._client)}};Pm.Models=Oj;Pm.Messages=zk;Pm.Files=Mj;let Ij=class extends ia{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/complete",{body:i,timeout:this._client._options.timeout??6e5,...n,headers:Ft([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:e.stream??!1})}};var Vi,za,xd,z0,wd,Sd,H0,_d,$o,Cd,U0,q0,Du,W0,G0,z2,dL,H2,U2,q2,W2,pL;const mL="__json_buf";function gL(t){return t.type==="tool_use"||t.type==="server_tool_use"}class Kb{constructor(){Vi.add(this),this.messages=[],this.receivedMessages=[],za.set(this,void 0),this.controller=new AbortController,xd.set(this,void 0),z0.set(this,()=>{}),wd.set(this,()=>{}),Sd.set(this,void 0),H0.set(this,()=>{}),_d.set(this,()=>{}),$o.set(this,{}),Cd.set(this,!1),U0.set(this,!1),q0.set(this,!1),Du.set(this,!1),W0.set(this,void 0),G0.set(this,void 0),H2.set(this,e=>{if(Ye(this,U0,!0),Gp(e)&&(e=new ps),e instanceof ps)return Ye(this,q0,!0),this._emit("abort",e);if(e instanceof nt)return this._emit("error",e);if(e instanceof Error){const n=new nt(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new nt(String(e)))}),Ye(this,xd,new Promise((e,n)=>{Ye(this,z0,e,"f"),Ye(this,wd,n,"f")})),Ye(this,Sd,new Promise((e,n)=>{Ye(this,H0,e,"f"),Ye(this,_d,n,"f")})),de(this,xd,"f").catch(()=>{}),de(this,Sd,"f").catch(()=>{})}get response(){return de(this,W0,"f")}get request_id(){return de(this,G0,"f")}async withResponse(){const e=await de(this,xd,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new Kb;return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r){const i=new Kb;for(const s of n.messages)i._addMessageParam(s);return i._run(()=>i._createMessage(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},de(this,H2,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){const i=r?.signal;let s;i&&(i.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),i.addEventListener("abort",s));try{de(this,Vi,"m",U2).call(this);const{response:o,data:a}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of a)de(this,Vi,"m",q2).call(this,c);if(a.controller.signal?.aborted)throw new ps;de(this,Vi,"m",W2).call(this)}finally{i&&s&&i.removeEventListener("abort",s)}}_connected(e){this.ended||(Ye(this,W0,e),Ye(this,G0,e?.headers.get("request-id")),de(this,z0,"f").call(this,e),this._emit("connect"))}get ended(){return de(this,Cd,"f")}get errored(){return de(this,U0,"f")}get aborted(){return de(this,q0,"f")}abort(){this.controller.abort()}on(e,n){return(de(this,$o,"f")[e]||(de(this,$o,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=de(this,$o,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(de(this,$o,"f")[e]||(de(this,$o,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ye(this,Du,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ye(this,Du,!0),await de(this,Sd,"f")}get currentMessage(){return de(this,za,"f")}async finalMessage(){return await this.done(),de(this,Vi,"m",z2).call(this)}async finalText(){return await this.done(),de(this,Vi,"m",dL).call(this)}_emit(e,...n){if(de(this,Cd,"f"))return;e==="end"&&(Ye(this,Cd,!0),de(this,H0,"f").call(this));const r=de(this,$o,"f")[e];if(r&&(de(this,$o,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!de(this,Du,"f")&&!r?.length&&Promise.reject(i),de(this,wd,"f").call(this,i),de(this,_d,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!de(this,Du,"f")&&!r?.length&&Promise.reject(i),de(this,wd,"f").call(this,i),de(this,_d,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",de(this,Vi,"m",z2).call(this))}async _fromReadableStream(e,n){const r=n?.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{de(this,Vi,"m",U2).call(this),this._connected(null);const s=Kp.fromReadableStream(e,this.controller);for await(const o of s)de(this,Vi,"m",q2).call(this,o);if(s.controller.signal?.aborted)throw new ps;de(this,Vi,"m",W2).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(za=new WeakMap,xd=new WeakMap,z0=new WeakMap,wd=new WeakMap,Sd=new WeakMap,H0=new WeakMap,_d=new WeakMap,$o=new WeakMap,Cd=new WeakMap,U0=new WeakMap,q0=new WeakMap,Du=new WeakMap,W0=new WeakMap,G0=new WeakMap,H2=new WeakMap,Vi=new WeakSet,z2=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},dL=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new nt("stream ended without producing a content block with type=text");return n.join(" ")},U2=function(){this.ended||Ye(this,za,void 0)},q2=function(n){if(this.ended)return;const r=de(this,Vi,"m",pL).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{gL(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Ye(this,za,r);break}}},W2=function(){if(this.ended)throw new nt("stream has ended, this shouldn't happen");const n=de(this,za,"f");if(!n)throw new nt("request ended without sending any chunks");return Ye(this,za,void 0),n},pL=function(n){let r=de(this,za,"f");if(n.type==="message_start"){if(r)throw new nt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new nt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push({...n.content_block}),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{i?.type==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{i?.type==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&gL(i)){let s=i[mL]||"";s+=n.delta.partial_json;const o={...i};Object.defineProperty(o,mL,{value:s,enumerable:!1,writable:!0}),s&&(o.input=Dj(s)),r.content[n.index]=o}break}case"thinking_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Kp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}let Nj=class extends ia{create(e,n){return this._client.post("/v1/messages/batches",{body:e,...n})}retrieve(e,n){return this._client.get(gs`/v1/messages/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/v1/messages/batches",Om,{query:e,...n})}delete(e,n){return this._client.delete(gs`/v1/messages/batches/${e}`,n)}cancel(e,n){return this._client.post(gs`/v1/messages/batches/${e}/cancel`,n)}async results(e,n){const r=await this.retrieve(e);if(!r.results_url)throw new nt(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...n,headers:Ft([{Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,s)=>Ax.fromResponse(s.response,s.controller))}},Hk=class extends ia{constructor(){super(...arguments),this.batches=new Nj(this._client)}create(e,n){e.model in yL&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${yL[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!e.stream&&r==null){const i=Lj[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,i)}return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...n,stream:e.stream??!1})}stream(e,n){return Kb.createMessage(this,e,n)}countTokens(e,n){return this._client.post("/v1/messages/count_tokens",{body:e,...n})}};const yL={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};Hk.Batches=Nj;let Bj=class extends ia{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(gs`/v1/models/${e}`,{...r,headers:Ft([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},r?.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models",Om,{query:i,...n,headers:Ft([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}};var Bee={};const K0=t=>{if(typeof globalThis.process<"u")return Bee?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Y_,Uk,tb,jj;class yn{constructor({baseURL:e=K0("ANTHROPIC_BASE_URL"),apiKey:n=K0("ANTHROPIC_API_KEY")??null,authToken:r=K0("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){Y_.add(this),tb.set(this,void 0);const s={apiKey:n,authToken:r,...i,baseURL:e||"https://api.anthropic.com"};if(!s.dangerouslyAllowBrowser&&oee())throw new nt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=s.baseURL,this.timeout=s.timeout??Uk.DEFAULT_TIMEOUT,this.logger=s.logger??console;const o="warn";this.logLevel=o,this.logLevel=iL(s.logLevel,"ClientOptions.logLevel",this)??iL(K0("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??o,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??hee(),Ye(this,tb,dee),this._options=s,this.apiKey=n,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-api-key"))&&!n.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Ft([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return Ft([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return Ft([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new nt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Hu}`}defaultIdempotencyKey(){return`stainless-node-retry-${lj()}`}makeStatusError(e,n,r,i){return Ti.generate(e,n,r,i)}buildURL(e,n,r){const i=!de(this,Y_,"m",jj).call(this)&&r||this.baseURL,s=tee(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return nee(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new nt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new _j(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:c}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Er(this).debug(`[${h}] sending request`,Jl({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),i.signal?.aborted)throw new ps;const m=new AbortController,y=await this.fetchWithTimeout(a,o,c,m).catch(U_),b=Date.now();if(y instanceof Error){const _=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new ps;const A=Gp(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Er(this).info(`[${h}] connection ${A?"timed out":"failed"} - ${_}`),Er(this).debug(`[${h}] connection ${A?"timed out":"failed"} (${_})`,Jl({retryOfRequestLogID:r,url:a,durationMs:b-d,message:y.message})),this.retryRequest(i,n,r??h);throw Er(this).info(`[${h}] connection ${A?"timed out":"failed"} - error; no more retries left`),Er(this).debug(`[${h}] connection ${A?"timed out":"failed"} (error; no more retries left)`,Jl({retryOfRequestLogID:r,url:a,durationMs:b-d,message:y.message})),A?new cj:new Cx({cause:y})}const w=[...y.headers.entries()].filter(([_])=>_==="request-id").map(([_,A])=>", "+_+": "+JSON.stringify(A)).join(""),S=`[${h}${f}${w}] ${o.method} ${a} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${b-d}ms`;if(!y.ok){const _=await this.shouldRetry(y);if(n&&_){const L=`retrying, ${n} attempts remaining`;return await fee(y.body),Er(this).info(`${S} - ${L}`),Er(this).debug(`[${h}] response error (${L})`,Jl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:b-d})),this.retryRequest(i,n,r??h,y.headers)}const A=_?"error; no more retries left":"error; not retryable";Er(this).info(`${S} - ${A}`);const k=await y.text().catch(L=>U_(L).message),P=bj(k),M=P?void 0:k;throw Er(this).debug(`[${h}] response error (${A})`,Jl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:M,durationMs:Date.now()-d})),this.makeStatusError(y.status,P,M,y.headers)}return Er(this).info(S),Er(this).debug(`[${h}] response start`,Jl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:b-d})),{response:y,options:i,controller:m,requestLogID:h,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new _ee(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i?.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(s=c)}const a=i?.get("retry-after");if(a&&!s){const c=parseFloat(a);Number.isNaN(c)?s=Date.parse(a)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await see(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}calculateNonstreamingTimeout(e,n){if(36e5*e/128e3>6e5||n!=null&&e>n)throw new nt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,c=this.buildURL(s,o,a);"timeout"in r&&iee("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=Ft([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...uee(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ft([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:xj(e)}:de(this,tb,"f").call(this,{body:e,headers:r})}}Uk=yn,tb=new WeakMap,Y_=new WeakSet,jj=function(){return this.baseURL!=="https://api.anthropic.com"};yn.Anthropic=Uk;yn.HUMAN_PROMPT=`

Human:`;yn.AI_PROMPT=`

Assistant:`;yn.DEFAULT_TIMEOUT=6e5;yn.AnthropicError=nt;yn.APIError=Ti;yn.APIConnectionError=Cx;yn.APIConnectionTimeoutError=cj;yn.APIUserAbortError=ps;yn.NotFoundError=dj;yn.ConflictError=pj;yn.RateLimitError=gj;yn.BadRequestError=uj;yn.AuthenticationError=hj;yn.InternalServerError=yj;yn.PermissionDeniedError=fj;yn.UnprocessableEntityError=mj;yn.toFile=Mee;class al extends yn{constructor(){super(...arguments),this.completions=new Ij(this),this.messages=new Hk(this),this.models=new Bj(this),this.beta=new Pm(this)}}al.Completions=Ij;al.Messages=Hk;al.Models=Bj;al.Beta=Pm;const{HUMAN_PROMPT:SOe,AI_PROMPT:_Oe}=al;var qd={exports:{}};qd.exports;var bL;function jee(){return bL||(bL=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",d="[object GeneratorFunction]",m="[object Map]",y="[object Number]",b="[object Object]",w="[object Promise]",S="[object RegExp]",_="[object Set]",A="[object String]",k="[object Symbol]",P="[object WeakMap]",M="[object ArrayBuffer]",O="[object DataView]",L="[object Float32Array]",N="[object Float64Array]",z="[object Int8Array]",j="[object Int16Array]",U="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",G="[object Uint16Array]",ie="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,Y=/\w*$/,q=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,T={};T[s]=T[o]=T[M]=T[O]=T[a]=T[c]=T[L]=T[N]=T[z]=T[j]=T[U]=T[m]=T[y]=T[b]=T[S]=T[_]=T[A]=T[k]=T[W]=T[X]=T[G]=T[ie]=!0,T[h]=T[f]=T[P]=!1;var Z=typeof _0=="object"&&_0&&_0.Object===Object&&_0,ue=typeof self=="object"&&self&&self.Object===Object&&self,I=Z||ue||Function("return this")(),pe=e&&!e.nodeType&&e,Ee=pe&&!0&&t&&!t.nodeType&&t,ye=Ee&&Ee.exports===pe;function ke(B,Q){return B.set(Q[0],Q[1]),B}function He(B,Q){return B.add(Q),B}function Pt(B,Q){for(var le=-1,Oe=B?B.length:0;++le<Oe&&Q(B[le],le,B)!==!1;);return B}function Kt(B,Q){for(var le=-1,Oe=Q.length,qt=B.length;++le<Oe;)B[qt+le]=Q[le];return B}function Yt(B,Q,le,Oe){for(var qt=-1,ar=B?B.length:0;++qt<ar;)le=Q(le,B[qt],qt,B);return le}function er(B,Q){for(var le=-1,Oe=Array(B);++le<B;)Oe[le]=Q(le);return Oe}function tr(B,Q){return B?.[Q]}function ei(B){var Q=!1;if(B!=null&&typeof B.toString!="function")try{Q=!!(B+"")}catch{}return Q}function _o(B){var Q=-1,le=Array(B.size);return B.forEach(function(Oe,qt){le[++Q]=[qt,Oe]}),le}function ns(B,Q){return function(le){return B(Q(le))}}function nr(B){var Q=-1,le=Array(B.size);return B.forEach(function(Oe){le[++Q]=Oe}),le}var af=Array.prototype,Al=Function.prototype,Ms=Object.prototype,Os=I["__core-js_shared__"],$c=(function(){var B=/[^.]+$/.exec(Os&&Os.keys&&Os.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""})(),kl=Al.toString,Ri=Ms.hasOwnProperty,aa=Ms.toString,oe=RegExp("^"+kl.call(Ri).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=ye?I.Buffer:void 0,De=I.Symbol,Be=I.Uint8Array,gt=ns(Object.getPrototypeOf,Object),Sr=Object.create,rs=Ms.propertyIsEnumerable,rr=af.splice,ti=Object.getOwnPropertySymbols,_r=me?me.isBuffer:void 0,sn=ns(Object.keys,Object),ir=ri(I,"DataView"),$n=ri(I,"Map"),Vc=ri(I,"Promise"),Fc=ri(I,"Set"),El=ri(I,"WeakMap"),is=ri(Object,"create"),x1=$r(ir),sg=$r($n),og=$r(Vc),lf=$r(Fc),cf=$r(El),uf=De?De.prototype:void 0,ag=uf?uf.valueOf:void 0;function sr(B){var Q=-1,le=B?B.length:0;for(this.clear();++Q<le;){var Oe=B[Q];this.set(Oe[0],Oe[1])}}function Rn(){this.__data__=is?is(null):{}}function or(B){return this.has(B)&&delete this.__data__[B]}function la(B){var Q=this.__data__;if(is){var le=Q[B];return le===r?void 0:le}return Ri.call(Q,B)?Q[B]:void 0}function hf(B){var Q=this.__data__;return is?Q[B]!==void 0:Ri.call(Q,B)}function w1(B,Q){var le=this.__data__;return le[B]=is&&Q===void 0?r:Q,this}sr.prototype.clear=Rn,sr.prototype.delete=or,sr.prototype.get=la,sr.prototype.has=hf,sr.prototype.set=w1;function ss(B){var Q=-1,le=B?B.length:0;for(this.clear();++Q<le;){var Oe=B[Q];this.set(Oe[0],Oe[1])}}function lg(){this.__data__=[]}function Tl(B){var Q=this.__data__,le=fa(Q,B);if(le<0)return!1;var Oe=Q.length-1;return le==Oe?Q.pop():rr.call(Q,le,1),!0}function ff(B){var Q=this.__data__,le=fa(Q,B);return le<0?void 0:Q[le][1]}function ca(B){return fa(this.__data__,B)>-1}function ua(B,Q){var le=this.__data__,Oe=fa(le,B);return Oe<0?le.push([B,Q]):le[Oe][1]=Q,this}ss.prototype.clear=lg,ss.prototype.delete=Tl,ss.prototype.get=ff,ss.prototype.has=ca,ss.prototype.set=ua;function Mi(B){var Q=-1,le=B?B.length:0;for(this.clear();++Q<le;){var Oe=B[Q];this.set(Oe[0],Oe[1])}}function ha(){this.__data__={hash:new sr,map:new($n||ss),string:new sr}}function on(B){return Rl(this,B).delete(B)}function cg(B){return Rl(this,B).get(B)}function ug(B){return Rl(this,B).has(B)}function Co(B,Q){return Rl(this,B).set(B,Q),this}Mi.prototype.clear=ha,Mi.prototype.delete=on,Mi.prototype.get=cg,Mi.prototype.has=ug,Mi.prototype.set=Co;function ni(B){this.__data__=new ss(B)}function S1(){this.__data__=new ss}function hg(B){return this.__data__.delete(B)}function fg(B){return this.__data__.get(B)}function _1(B){return this.__data__.has(B)}function zc(B,Q){var le=this.__data__;if(le instanceof ss){var Oe=le.__data__;if(!$n||Oe.length<n-1)return Oe.push([B,Q]),this;le=this.__data__=new Mi(Oe)}return le.set(B,Q),this}ni.prototype.clear=S1,ni.prototype.delete=hg,ni.prototype.get=fg,ni.prototype.has=_1,ni.prototype.set=zc;function Hc(B,Q){var le=Yc(B)||xf(B)?er(B.length,String):[],Oe=le.length,qt=!!Oe;for(var ar in B)Ri.call(B,ar)&&!(qt&&(ar=="length"||E1(ar,Oe)))&&le.push(ar);return le}function Oi(B,Q,le){var Oe=B[Q];(!(Ri.call(B,Q)&&vf(Oe,le))||le===void 0&&!(Q in B))&&(B[Q]=le)}function fa(B,Q){for(var le=B.length;le--;)if(vf(B[le][0],Q))return le;return-1}function dg(B,Q){return B&&Wc(Q,Jc(Q),B)}function Ps(B,Q,le,Oe,qt,ar,ii){var Mn;if(Oe&&(Mn=ar?Oe(B,qt,ar,ii):Oe(B)),Mn!==void 0)return Mn;if(!ya(B))return B;var ba=Yc(B);if(ba){if(Mn=xg(B),!Q)return yg(B,Mn)}else{var as=Ds(B),Sf=as==f||as==d;if(wf(B))return mg(B,Q);if(as==b||as==s||Sf&&!ar){if(ei(B))return ar?B:{};if(Mn=yf(Sf?{}:B),!Q)return da(B,dg(Mn,B))}else{if(!T[as])return ar?B:{};Mn=k1(B,as,Ps,Q)}}ii||(ii=new ni);var wg=ii.get(B);if(wg)return wg;if(ii.set(B,Mn),!ba)var Sg=le?bg(B):Jc(B);return Pt(Sg||B,function(_f,va){Sg&&(va=_f,_f=B[va]),Oi(Mn,va,Ps(_f,Q,le,Oe,va,B,ii))}),Mn}function df(B){return ya(B)?Sr(B):{}}function pf(B,Q,le){var Oe=Q(B);return Yc(B)?Oe:Kt(Oe,le(B))}function C1(B){return aa.call(B)}function pg(B){if(!ya(B)||bf(B))return!1;var Q=ga(B)||ei(B)?oe:q;return Q.test($r(B))}function Br(B){if(!Kc(B))return sn(B);var Q=[];for(var le in Object(B))Ri.call(B,le)&&le!="constructor"&&Q.push(le);return Q}function mg(B,Q){if(Q)return B.slice();var le=new B.constructor(B.length);return B.copy(le),le}function mf(B){var Q=new B.constructor(B.byteLength);return new Be(Q).set(new Be(B)),Q}function Uc(B,Q){var le=Q?mf(B.buffer):B.buffer;return new B.constructor(le,B.byteOffset,B.byteLength)}function gg(B,Q,le){var Oe=Q?le(_o(B),!0):_o(B);return Yt(Oe,ke,new B.constructor)}function qc(B){var Q=new B.constructor(B.source,Y.exec(B));return Q.lastIndex=B.lastIndex,Q}function A1(B,Q,le){var Oe=Q?le(nr(B),!0):nr(B);return Yt(Oe,He,new B.constructor)}function jr(B){return ag?Object(ag.call(B)):{}}function gf(B,Q){var le=Q?mf(B.buffer):B.buffer;return new B.constructor(le,B.byteOffset,B.length)}function yg(B,Q){var le=-1,Oe=B.length;for(Q||(Q=Array(Oe));++le<Oe;)Q[le]=B[le];return Q}function Wc(B,Q,le,Oe){le||(le={});for(var qt=-1,ar=Q.length;++qt<ar;){var ii=Q[qt],Mn=void 0;Oi(le,ii,Mn===void 0?B[ii]:Mn)}return le}function da(B,Q){return Wc(B,vg(B),Q)}function bg(B){return pf(B,Jc,vg)}function Rl(B,Q){var le=B.__data__;return Gc(Q)?le[typeof Q=="string"?"string":"hash"]:le.map}function ri(B,Q){var le=tr(B,Q);return pg(le)?le:void 0}var vg=ti?ns(ti,Object):Qc,Ds=C1;(ir&&Ds(new ir(new ArrayBuffer(1)))!=O||$n&&Ds(new $n)!=m||Vc&&Ds(Vc.resolve())!=w||Fc&&Ds(new Fc)!=_||El&&Ds(new El)!=P)&&(Ds=function(B){var Q=aa.call(B),le=Q==b?B.constructor:void 0,Oe=le?$r(le):void 0;if(Oe)switch(Oe){case x1:return O;case sg:return m;case og:return w;case lf:return _;case cf:return P}return Q});function xg(B){var Q=B.length,le=B.constructor(Q);return Q&&typeof B[0]=="string"&&Ri.call(B,"index")&&(le.index=B.index,le.input=B.input),le}function yf(B){return typeof B.constructor=="function"&&!Kc(B)?df(gt(B)):{}}function k1(B,Q,le,Oe){var qt=B.constructor;switch(Q){case M:return mf(B);case a:case c:return new qt(+B);case O:return Uc(B,Oe);case L:case N:case z:case j:case U:case W:case X:case G:case ie:return gf(B,Oe);case m:return gg(B,Oe,le);case y:case A:return new qt(B);case S:return qc(B);case _:return A1(B,Oe,le);case k:return jr(B)}}function E1(B,Q){return Q=Q??i,!!Q&&(typeof B=="number"||se.test(B))&&B>-1&&B%1==0&&B<Q}function Gc(B){var Q=typeof B;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?B!=="__proto__":B===null}function bf(B){return!!$c&&$c in B}function Kc(B){var Q=B&&B.constructor,le=typeof Q=="function"&&Q.prototype||Ms;return B===le}function $r(B){if(B!=null){try{return kl.call(B)}catch{}try{return B+""}catch{}}return""}function pa(B){return Ps(B,!0,!0)}function vf(B,Q){return B===Q||B!==B&&Q!==Q}function xf(B){return os(B)&&Ri.call(B,"callee")&&(!rs.call(B,"callee")||aa.call(B)==s)}var Yc=Array.isArray;function ma(B){return B!=null&&Ls(B.length)&&!ga(B)}function os(B){return Xc(B)&&ma(B)}var wf=_r||Zc;function ga(B){var Q=ya(B)?aa.call(B):"";return Q==f||Q==d}function Ls(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=i}function ya(B){var Q=typeof B;return!!B&&(Q=="object"||Q=="function")}function Xc(B){return!!B&&typeof B=="object"}function Jc(B){return ma(B)?Hc(B):Br(B)}function Qc(){return[]}function Zc(){return!1}t.exports=pa})(qd,qd.exports)),qd.exports}var $ee=jee();const po=Mc($ee),Vee=t=>{const e=[];return t.forEach(({content:n})=>{n.forEach(r=>{if(r.type==="image"){const i=r.image,s=i.split(",")[1],o=i.split(";")[0].split(":")[1];let a;o==="image/jpeg"||o==="image/jpg"?a="image/jpeg":o==="image/png"?a="image/png":o==="image/gif"?a="image/gif":o==="image/webp"?a="image/webp":a="image/jpeg",e.push({type:"image",source:{type:"base64",media_type:a,data:s}})}})}),e},Fee=t=>t.map(e=>({name:e.name,description:e.description,input_schema:{type:"object",...e.inputSchema}})),Y0=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?{type:"text",text:i.text}:i.type==="file"?{type:"document",source:{type:"text",media_type:"text/plain",data:i.data},context:JSON.parse(i.mimeType).path}:{type:"text",text:""});if(n.attachments?.length){const i=Vee(n.attachments);Array.isArray(r)&&r.push(...i)}e.push({role:"user",content:r})}else if(n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?{type:"text",text:i.text}:{type:"text",text:""});e.push({role:"user",content:r})}else{const r=typeof n.content=="string"?n.content:[],i=[];Array.isArray(n.content)&&n.content.forEach(s=>{if(Array.isArray(r)&&(s.type==="text"&&r.push({type:"text",text:s.text}),s.type==="tool-call")){s.result&&i.push({type:"tool_result",content:s.result,tool_use_id:s.toolCallId}),r.push({type:"tool_use",id:s.toolCallId,name:s.toolName,input:s.args||{}});return}}),e.push({role:"assistant",content:r}),i.length&&e.push({role:"user",content:i})}}),e},zee=t=>{const{message:e}=t;return{role:e.role,content:[]}},Hee=(t,e)=>{const n={...e},{content_block:r}=t;if(r.type==="text"&&Array.isArray(n.content)){const i={type:"text",text:r.text};n.content.push(i)}if(r.type==="tool_use"&&Array.isArray(n.content)){const i={type:"tool-call",toolCallId:r.id,toolName:r.name,args:{},argsText:""};n.content.push(i)}return n},Uee=(t,e)=>{const n={...e},{delta:r}=t;if(r.type==="text_delta"&&Array.isArray(n.content)){const i=n.content[n.content.length-1];if(i.type!=="text")return n;const s={type:"text",text:i.text+r.text};n.content[n.content.length-1]=s}if(r.type==="input_json_delta"&&Array.isArray(n.content)){const i=n.content[n.content.length-1];if(i.type!=="tool-call")return n;const s=i.argsText+r.partial_json;let o={};if(s.trim().endsWith("}"))try{o=JSON.parse(s)}catch(c){console.log(c)}const a={...i,args:o,argsText:s};n.content[n.content.length-1]=a}return n};class qee{modelKey="claude-3-7-sonnet-latest";systemPrompt="";apiKey;url;provider;messageStopped=!1;prevMessages=[];tools=[];client;constructor(){}setProvider=e=>{this.provider=e,this.client=new al({apiKey:e.key,baseURL:e.baseUrl,dangerouslyAllowBrowser:!0}),e.key&&this.setApiKey(e.key),e.baseUrl&&this.setUrl(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setApiKey=e=>{this.apiKey=e,this.client&&(this.client.apiKey=e)};setUrl=e=>{this.url=e,this.client&&(this.client.baseURL=e)};setPrevMessages=e=>{this.prevMessages=Y0(e)};setTools=e=>{this.tools=Fee(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=Y0(e),s=await this.client.messages.create({messages:[...this.prevMessages,...i],model:this.modelKey,system:this.systemPrompt,tools:this.tools,stream:!0,max_tokens:2048});this.prevMessages.push(...i);let o=n&&r?po(r):{role:"assistant",content:[]};for await(const a of s){const{type:c}=a;if(this.messageStopped&&(this.messageStopped=!1,s.controller.abort()),c==="message_start"){if(n&&r){yield r;continue}o=zee(a)}if(c==="content_block_start"&&(o=Hee(a,o)),c==="content_block_delta"&&(o=Uee(a,o)),c==="message_stop"){if(n&&r){const f=o.content.slice(r.content.length),d={...o,content:f},m=Y0([d]);this.prevMessages.push(...m),yield{isEnd:!0,responseMessage:o};continue}const h=Y0([o]);this.prevMessages.push(...h),yield{isEnd:!0,responseMessage:o};continue}yield o}}catch(i){yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r={type:"tool_result",content:n.result,tool_use_id:n.toolCallId};return this.prevMessages.push({role:"user",content:[r]}),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.messageStopped=!0};getBaseUrl=()=>"https://api.anthropic.com";getName=()=>"Anthropic";checkProvider=async e=>{const n=new al({apiKey:e.apiKey,baseURL:e.url,dangerouslyAllowBrowser:!0});try{return await n.models.list(),!0}catch(r){if(typeof r=="object"&&r){if("status"in r&&r.status===401)return{field:"key",message:"Invalid API key"};if("status"in r&&r.status===404)return{field:"url",message:"Invalid URL"};if(e.apiKey)return{field:"url",message:"Invalid URL"}}return{field:"key",message:"Empty key"}}};getProviderModels=async e=>{const n=new al({apiKey:e.apiKey,baseURL:e.url,dangerouslyAllowBrowser:!0});try{return(await n.models.list()).data.map(s=>({id:s.id,name:s.display_name,provider:"anthropic"}))}catch(r){return console.log(r),[]}}}const vL=new qee;var Kn=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},Rr={searchParams:"URLSearchParams"in Kn,iterable:"Symbol"in Kn&&"iterator"in Symbol,blob:"FileReader"in Kn&&"Blob"in Kn&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in Kn,arrayBuffer:"ArrayBuffer"in Kn};function Wee(t){return t&&DataView.prototype.isPrototypeOf(t)}if(Rr.arrayBuffer)var Gee=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Kee=ArrayBuffer.isView||function(t){return t&&Gee.indexOf(Object.prototype.toString.call(t))>-1};function Wh(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function qk(t){return typeof t!="string"&&(t=String(t)),t}function Wk(t){var e={next:function(){var n=t.shift();return{done:n===void 0,value:n}}};return Rr.iterable&&(e[Symbol.iterator]=function(){return e}),e}function En(t){this.map={},t instanceof En?t.forEach(function(e,n){this.append(n,e)},this):Array.isArray(t)?t.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}En.prototype.append=function(t,e){t=Wh(t),e=qk(e);var n=this.map[t];this.map[t]=n?n+", "+e:e};En.prototype.delete=function(t){delete this.map[Wh(t)]};En.prototype.get=function(t){return t=Wh(t),this.has(t)?this.map[t]:null};En.prototype.has=function(t){return this.map.hasOwnProperty(Wh(t))};En.prototype.set=function(t,e){this.map[Wh(t)]=qk(e)};En.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)};En.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),Wk(t)};En.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),Wk(t)};En.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),Wk(t)};Rr.iterable&&(En.prototype[Symbol.iterator]=En.prototype.entries);function G2(t){if(!t._noBody){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}}function $j(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function Yee(t){var e=new FileReader,n=$j(e);return e.readAsArrayBuffer(t),n}function Xee(t){var e=new FileReader,n=$j(e),r=/charset=([A-Za-z0-9_-]+)/.exec(t.type),i=r?r[1]:"utf-8";return e.readAsText(t,i),n}function Jee(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function xL(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Vj(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:Rr.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:Rr.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:Rr.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():Rr.arrayBuffer&&Rr.blob&&Wee(t)?(this._bodyArrayBuffer=xL(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Rr.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||Kee(t))?this._bodyArrayBuffer=xL(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Rr.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Rr.blob&&(this.blob=function(){var t=G2(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=G2(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Rr.blob)return this.blob().then(Yee);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var t=G2(this);if(t)return t;if(this._bodyBlob)return Xee(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Jee(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Rr.formData&&(this.formData=function(){return this.text().then(ete)}),this.json=function(){return this.text().then(JSON.parse)},this}var Qee=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Zee(t){var e=t.toUpperCase();return Qee.indexOf(e)>-1?e:t}function xc(t,e){if(!(this instanceof xc))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(t instanceof xc){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new En(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!n&&t._bodyInit!=null&&(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new En(e.headers)),this.method=Zee(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||(function(){if("AbortController"in Kn){var s=new AbortController;return s.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}xc.prototype.clone=function(){return new xc(this,{body:this._bodyInit})};function ete(t){var e=new FormData;return t.trim().split("&").forEach(function(n){if(n){var r=n.split("="),i=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(s))}}),e}function tte(t){var e=new En,n=t.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var i=r.split(":"),s=i.shift().trim();if(s){var o=i.join(":").trim();try{e.append(s,o)}catch(a){console.warn("Response "+a.message)}}}),e}Vj.call(xc.prototype);function mo(t,e){if(!(this instanceof mo))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new En(e.headers),this.url=e.url||"",this._initBody(t)}Vj.call(mo.prototype);mo.prototype.clone=function(){return new mo(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new En(this.headers),url:this.url})};mo.error=function(){var t=new mo(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var nte=[301,302,303,307,308];mo.redirect=function(t,e){if(nte.indexOf(e)===-1)throw new RangeError("Invalid status code");return new mo(null,{status:e,headers:{location:t}})};var nc=Kn.DOMException;try{new nc}catch{nc=function(e,n){this.message=e,this.name=n;var r=Error(e);this.stack=r.stack},nc.prototype=Object.create(Error.prototype),nc.prototype.constructor=nc}function Fj(t,e){return new Promise(function(n,r){var i=new xc(t,e);if(i.signal&&i.signal.aborted)return r(new nc("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var h={statusText:s.statusText,headers:tte(s.getAllResponseHeaders()||"")};i.url.indexOf("file://")===0&&(s.status<200||s.status>599)?h.status=200:h.status=s.status,h.url="responseURL"in s?s.responseURL:h.headers.get("X-Request-URL");var f="response"in s?s.response:s.responseText;setTimeout(function(){n(new mo(f,h))},0)},s.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request timed out"))},0)},s.onabort=function(){setTimeout(function(){r(new nc("Aborted","AbortError"))},0)};function a(h){try{return h===""&&Kn.location.href?Kn.location.href:h}catch{return h}}if(s.open(i.method,a(i.url),!0),i.credentials==="include"?s.withCredentials=!0:i.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(Rr.blob?s.responseType="blob":Rr.arrayBuffer&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof En||Kn.Headers&&e.headers instanceof Kn.Headers)){var c=[];Object.getOwnPropertyNames(e.headers).forEach(function(h){c.push(Wh(h)),s.setRequestHeader(h,qk(e.headers[h]))}),i.headers.forEach(function(h,f){c.indexOf(f)===-1&&s.setRequestHeader(f,h)})}else i.headers.forEach(function(h,f){s.setRequestHeader(f,h)});i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){s.readyState===4&&i.signal.removeEventListener("abort",o)}),s.send(typeof i._bodyInit>"u"?null:i._bodyInit)})}Fj.polyfill=!0;Kn.fetch||(Kn.fetch=Fj,Kn.Headers=En,Kn.Request=xc,Kn.Response=mo);const zj="11434",Hj=`http://127.0.0.1:${zj}`,rte="0.5.18";var ite=Object.defineProperty,ste=(t,e,n)=>e in t?ite(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K2=(t,e,n)=>(ste(t,typeof e!="symbol"?e+"":e,n),n);class Gk extends Error{constructor(e,n){super(e),this.error=e,this.status_code=n,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,Gk)}}class ote{constructor(e,n,r){K2(this,"abortController"),K2(this,"itr"),K2(this,"doneCallback"),this.abortController=e,this.itr=n,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(const e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}}const Kk=async t=>{if(t.ok)return;let e=`Error ${t.status}: ${t.statusText}`,n=null;if(t.headers.get("content-type")?.includes("application/json"))try{n=await t.json(),e=n.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await t.text()||e}catch{console.log("Failed to get text from error response")}throw new Gk(e,t.status)};function ate(){if(typeof window<"u"&&window.navigator){const t=navigator;return"userAgentData"in t&&t.userAgentData?.platform?`${t.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function lte(t){if(t instanceof Headers){const e={};return t.forEach((n,r)=>{e[r]=n}),e}else return Array.isArray(t)?Object.fromEntries(t):t||{}}const Yk=async(t,e,n={})=>{const r={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${rte} (${ate()})`};n.headers=lte(n.headers);const i=Object.fromEntries(Object.entries(n.headers).filter(([s])=>!Object.keys(r).some(o=>o.toLowerCase()===s.toLowerCase())));return n.headers={...r,...i},t(e,n)},wL=async(t,e,n)=>{const r=await Yk(t,e,{headers:n?.headers});return await Kk(r),r},Lu=async(t,e,n,r)=>{const s=(a=>a!==null&&typeof a=="object"&&!Array.isArray(a))(n)?JSON.stringify(n):n,o=await Yk(t,e,{method:"POST",body:s,signal:r?.signal,headers:r?.headers});return await Kk(o),o},cte=async(t,e,n,r)=>{const i=await Yk(t,e,{method:"DELETE",body:JSON.stringify(n),headers:r?.headers});return await Kk(i),i},ute=async function*(t){const e=new TextDecoder("utf-8");let n="";const r=t.getReader();for(;;){const{done:i,value:s}=await r.read();if(i)break;n+=e.decode(s);const o=n.split(`
`);n=o.pop()??"";for(const a of o)try{yield JSON.parse(a)}catch{console.warn("invalid json: ",a)}}for(const i of n.split(`
`).filter(s=>s!==""))try{yield JSON.parse(i)}catch{console.warn("invalid json: ",i)}},hte=t=>{if(!t)return Hj;let e=t.includes("://");t.startsWith(":")&&(t=`http://127.0.0.1${t}`,e=!0),e||(t=`http://${t}`);const n=new URL(t);let r=n.port;r||(e?r=n.protocol==="https:"?"443":"80":r=zj);let i="";n.username&&(i=n.username,n.password&&(i+=`:${n.password}`),i+="@");let s=`${n.protocol}//${i}${n.hostname}:${r}${n.pathname}`;return s.endsWith("/")&&(s=s.slice(0,-1)),s};var fte=Object.defineProperty,dte=(t,e,n)=>e in t?fte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y2=(t,e,n)=>(dte(t,typeof e!="symbol"?e+"":e,n),n);let nb=class{constructor(e){Y2(this,"config"),Y2(this,"fetch"),Y2(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e?.headers},e?.proxy||(this.config.host=hte(e?.host??Hj)),this.fetch=e?.fetch??fetch}abort(){for(const e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,n){n.stream=n.stream??!1;const r=`${this.config.host}/api/${e}`;if(n.stream){const s=new AbortController,o=await Lu(this.fetch,r,n,{signal:s.signal,headers:this.config.headers});if(!o.body)throw new Error("Missing body");const a=ute(o.body),c=new ote(s,a,()=>{const h=this.ongoingStreamedRequests.indexOf(c);h>-1&&this.ongoingStreamedRequests.splice(h,1)});return this.ongoingStreamedRequests.push(c),c}return await(await Lu(this.fetch,r,n,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){const n=new Uint8Array(e);let r="";const i=n.byteLength;for(let s=0;s<i;s++)r+=String.fromCharCode(n[s]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(const n of e.messages)n.images&&(n.images=await Promise.all(n.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await cte(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await Lu(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await wL(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await Lu(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await Lu(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await Lu(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await wL(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}};new nb;const bp="<TOOL_CALL>",Yb="</TOOL_CALL>",pte=t=>t.map(e=>({type:"string",function:{name:e.name,description:e.description,parameters:e.inputSchema}})),mte=t=>{let e=`

Available tools:

`;const n=JSON.stringify(t);e+=n;const i=JSON.stringify({name:"toolName",args:{arg1:"arg1",arg2:"arg2"}});return e+=`

 When you call a tool, output must look EXACTLY like this: 
${bp}
${i}
${Yb}

 Do not add explanations, markdown, or extra text outside the tags.`,e},SL=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?i.text:i.type==="file"?`File: ${JSON.parse(i.mimeType).path.split("/").pop()}
File content:
${i.data}`:"").filter(i=>i!=="").join(`

`);e.push({role:"user",content:r})}else if(n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.find(i=>i.type==="text")?.text??"";e.push({role:"user",content:r})}else{let r="";const i=Array.isArray(n.content)?n.content.map(o=>{if(o.type==="text")return o.text;if(o.type==="tool-call"){const a={name:o.toolName,result:o.result};return r=`${JSON.stringify(a)}
`,`${bp}${o.argsText}${Yb}`}}).join(""):"",s=typeof n.content=="string"?n.content:i;e.push({role:"assistant",content:s}),r&&e.push({role:"user",content:r})}}),e},gte=t=>{let e=!1,n=!1,r="";if(t.includes(bp)&&(e=!0,r=t.split(bp)[1]),!e)return{content:t};t.includes(Yb)&&(n=!0,r=r.split(Yb)[0]);const i=t.split(bp)[0];if(n){const o={type:"tool-call",toolCallId:"",toolName:JSON.parse(r).name,args:JSON.parse(r).args,argsText:r};return{content:i,toolContent:o}}return{toolContent:{type:"tool-call",toolCallId:"",toolName:"",args:{},argsText:r},content:i}};class yte{modelKey="";systemPrompt="";apiKey;url;provider;prevMessages=[];tools=[];client;constructor(){}setProvider=e=>{this.provider=e,this.client=new nb({host:e.baseUrl}),e.key&&this.setAPIKey(e.key),e.baseUrl&&this.setURL(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setAPIKey=e=>{this.apiKey=e};setURL=e=>{this.url=e};setPrevMessages=e=>{this.prevMessages=SL(e)};setTools=e=>{this.tools=pte(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=SL(e),s=mte(this.tools),o={role:"system",content:this.systemPrompt+s},a=await this.client.chat({model:this.modelKey,messages:[o,...this.prevMessages,...i],stream:!0});this.prevMessages.push(...i);const c=n&&r?po(r):{role:"assistant",content:[]};let h="";for await(const f of a){h+=f.message.content;const{toolContent:d,content:m}=gte(h);Array.isArray(c.content)&&(c.content.length===0?c.content.push({type:"text",text:m}):d?c.content[c.content.length-1].type!=="tool-call"?(c.content[c.content.length-1]={type:"text",text:m},c.content.push(d)):c.content[c.content.length-1]=d:c.content[c.content.length-1].type==="tool-call"?c.content.push({type:"text",text:m}):c.content[c.content.length-1]={type:"text",text:m}),f.done&&(this.prevMessages.push({role:"assistant",content:h}),yield{isEnd:!0,responseMessage:c}),yield c}}catch(i){yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r=JSON.stringify({name:n.toolName,result:n.result});return this.prevMessages.push({role:"user",content:r}),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.client&&this.client.abort()};getName=()=>"Ollama";getBaseUrl=()=>"http://localhost:11434";checkProvider=async e=>{const n=new nb({host:e.url});try{return await n.list(),!0}catch(r){return console.log(r),{field:"url",message:"Invalid URL"}}};getProviderModels=async e=>(await new nb({host:e.url}).list()).models.map(i=>({id:i.model,name:i.name,provider:"ollama"}))}const _L=new yte;function Ge(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function te(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let Uj=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return Uj=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function X_(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const J_=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Le extends Error{}let Jr=class Q_ extends Le{constructor(e,n,r,i){super(`${Q_.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=n;const s=n;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new kx({message:r,cause:J_(n)});const s=n?.error;return e===400?new qj(e,s,r,i):e===401?new Wj(e,s,r,i):e===403?new Gj(e,s,r,i):e===404?new Kj(e,s,r,i):e===409?new Yj(e,s,r,i):e===422?new Xj(e,s,r,i):e===429?new Jj(e,s,r,i):e>=500?new Qj(e,s,r,i):new Q_(e,s,r,i)}},Wi=class extends Jr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},kx=class extends Jr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},Xk=class extends kx{constructor({message:e}={}){super({message:e??"Request timed out."})}},qj=class extends Jr{},Wj=class extends Jr{},Gj=class extends Jr{},Kj=class extends Jr{},Yj=class extends Jr{},Xj=class extends Jr{},Jj=class extends Jr{},Qj=class extends Jr{};class Zj extends Le{constructor(){super("Could not parse response content as the length limit was reached")}}class e8 extends Le{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Wd extends Error{constructor(e){super(e)}}const bte=/^[a-z][a-z0-9+.-]*:/i,vte=t=>bte.test(t);let Ur=t=>(Ur=Array.isArray,Ur(t)),CL=Ur;function t8(t){return typeof t!="object"?{}:t??{}}function xte(t){if(!t)return!0;for(const e in t)return!1;return!0}function wte(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function X2(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Ste=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Le(`${t} must be an integer`);if(e<0)throw new Le(`${t} must be a positive integer`);return e},_te=t=>{try{return JSON.parse(t)}catch{return}},Dm=t=>new Promise(e=>setTimeout(e,t)),qu="5.22.0",Cte=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Ate(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const kte=()=>{const t=Ate();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":kL(Deno.build.os),"X-Stainless-Arch":AL(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":kL(globalThis.process.platform??"unknown"),"X-Stainless-Arch":AL(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Ete();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ete(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const AL=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",kL=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let EL;const Tte=()=>EL??(EL=kte());function Rte(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function n8(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function r8(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return n8({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){await e.return?.()}})}function i8(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Mte(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Ote=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),s8="RFC3986",o8=t=>String(t),TL={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:o8},Pte="RFC1738";let Z_=(t,e)=>(Z_=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Z_(t,e));const Vs=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),J2=1024,Dte=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=J2){const c=s.length>=J2?s.slice(a,a+J2):s,h=[];for(let f=0;f<c.length;++f){let d=c.charCodeAt(f);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Pte&&(d===40||d===41)){h[h.length]=c.charAt(f);continue}if(d<128){h[h.length]=Vs[d];continue}if(d<2048){h[h.length]=Vs[192|d>>6]+Vs[128|d&63];continue}if(d<55296||d>=57344){h[h.length]=Vs[224|d>>12]+Vs[128|d>>6&63]+Vs[128|d&63];continue}f+=1,d=65536+((d&1023)<<10|c.charCodeAt(f)&1023),h[h.length]=Vs[240|d>>18]+Vs[128|d>>12&63]+Vs[128|d>>6&63]+Vs[128|d&63]}o+=h.join("")}return o};function Lte(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function RL(t,e){if(Ur(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const a8={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},l8=function(t,e){Array.prototype.push.apply(t,Ur(e)?e:[e])};let ML;const _n={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Dte,encodeValuesOnly:!1,format:s8,formatter:o8,indices:!1,serializeDate(t){return(ML??(ML=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Ite(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Q2={};function c8(t,e,n,r,i,s,o,a,c,h,f,d,m,y,b,w,S,_){let A=t,k=_,P=0,M=!1;for(;(k=k.get(Q2))!==void 0&&!M;){const j=k.get(t);if(P+=1,typeof j<"u"){if(j===P)throw new RangeError("Cyclic object value");M=!0}typeof k.get(Q2)>"u"&&(P=0)}if(typeof h=="function"?A=h(e,A):A instanceof Date?A=m?.(A):n==="comma"&&Ur(A)&&(A=RL(A,function(j){return j instanceof Date?m?.(j):j})),A===null){if(s)return c&&!w?c(e,_n.encoder,S,"key",y):e;A=""}if(Ite(A)||Lte(A)){if(c){const j=w?e:c(e,_n.encoder,S,"key",y);return[b?.(j)+"="+b?.(c(A,_n.encoder,S,"value",y))]}return[b?.(e)+"="+b?.(String(A))]}const O=[];if(typeof A>"u")return O;let L;if(n==="comma"&&Ur(A))w&&c&&(A=RL(A,c)),L=[{value:A.length>0?A.join(",")||null:void 0}];else if(Ur(h))L=h;else{const j=Object.keys(A);L=f?j.sort(f):j}const N=a?String(e).replace(/\./g,"%2E"):String(e),z=r&&Ur(A)&&A.length===1?N+"[]":N;if(i&&Ur(A)&&A.length===0)return z+"[]";for(let j=0;j<L.length;++j){const U=L[j],W=typeof U=="object"&&typeof U.value<"u"?U.value:A[U];if(o&&W===null)continue;const X=d&&a?U.replace(/\./g,"%2E"):U,G=Ur(A)?typeof n=="function"?n(z,X):z:z+(d?"."+X:"["+X+"]");_.set(t,P);const ie=new WeakMap;ie.set(Q2,_),l8(O,c8(W,G,n,r,i,s,o,a,n==="comma"&&w&&Ur(A)?null:c,h,f,d,m,y,b,w,S,ie))}return O}function Nte(t=_n){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||_n.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=s8;if(typeof t.format<"u"){if(!Z_(TL,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=TL[n];let i=_n.filter;(typeof t.filter=="function"||Ur(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in a8?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=_n.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:_n.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:_n.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:_n.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:_n.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?_n.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:_n.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:_n.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:_n.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:_n.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:_n.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:_n.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:_n.strictNullHandling}}function Bte(t,e={}){let n=t;const r=Nte(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Ur(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=a8[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const h=new WeakMap;for(let m=0;m<i.length;++m){const y=i[m];r.skipNulls&&n[y]===null||l8(o,c8(n[y],y,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const f=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),f.length>0?d+f:""}function jte(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let OL;function Jk(t){let e;return(OL??(e=new globalThis.TextEncoder,OL=e.encode.bind(e)))(t)}let PL;function DL(t){let e;return(PL??(e=new globalThis.TextDecoder,PL=e.decode.bind(e)))(t)}var gi,yi;let Ex=class{constructor(){gi.set(this,void 0),yi.set(this,void 0),Ge(this,gi,new Uint8Array),Ge(this,yi,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Jk(e):e;Ge(this,gi,jte([te(this,gi,"f"),n]));const r=[];let i;for(;(i=$te(te(this,gi,"f"),te(this,yi,"f")))!=null;){if(i.carriage&&te(this,yi,"f")==null){Ge(this,yi,i.index);continue}if(te(this,yi,"f")!=null&&(i.index!==te(this,yi,"f")+1||i.carriage)){r.push(DL(te(this,gi,"f").subarray(0,te(this,yi,"f")-1))),Ge(this,gi,te(this,gi,"f").subarray(te(this,yi,"f"))),Ge(this,yi,null);continue}const s=te(this,yi,"f")!==null?i.preceding-1:i.preceding,o=DL(te(this,gi,"f").subarray(0,s));r.push(o),Ge(this,gi,te(this,gi,"f").subarray(i.index)),Ge(this,yi,null)}return r}flush(){return te(this,gi,"f").length?this.decode(`
`):[]}};gi=new WeakMap,yi=new WeakMap;Ex.NEWLINE_CHARS=new Set([`
`,"\r"]);Ex.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function $te(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Vte(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Xb={off:0,error:200,warn:300,info:400,debug:500},LL=(t,e,n)=>{if(t){if(wte(Xb,t))return t;Hn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Xb))}`)}};function Gd(){}function X0(t,e,n){return!e||Xb[t]>Xb[n]?Gd:e[t].bind(e)}const Fte={error:Gd,warn:Gd,info:Gd,debug:Gd};let IL=new WeakMap;function Hn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Fte;const r=IL.get(e);if(r&&r[0]===n)return r[1];const i={error:X0("error",e,n),warn:X0("warn",e,n),info:X0("info",e,n),debug:X0("debug",e,n)};return IL.set(e,[n,i]),i}const Ql=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ad;let Yp=class Kd{constructor(e,n,r){this.iterator=e,Ad.set(this,void 0),this.controller=n,Ge(this,Ad,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Hn(r):console;async function*o(){if(i)throw new Le("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of zte(e,n))if(!a){if(c.data.startsWith("[DONE]")){a=!0;continue}if(c.event===null||!c.event.startsWith("thread.")){let h;try{h=JSON.parse(c.data)}catch(f){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),f}if(h&&h.error)throw new Jr(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(c.data)}catch(f){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),f}if(c.event=="error")throw new Jr(void 0,h.error,h.message,void 0);yield{event:c.event,data:h}}}a=!0}catch(c){if(X_(c))return;throw c}finally{a||n.abort()}}return new Kd(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new Ex,c=i8(e);for await(const h of c)for(const f of a.decode(h))yield f;for(const h of a.flush())yield h}async function*o(){if(i)throw new Le("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of s())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(X_(c))return;throw c}finally{a||n.abort()}}return new Kd(o,n,r)}[(Ad=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Kd(()=>i(e),this.controller,te(this,Ad,"f")),new Kd(()=>i(n),this.controller,te(this,Ad,"f"))]}toReadableStream(){const e=this;let n;return n8({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=Jk(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}};async function*zte(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Le("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Le("Attempted to iterate over a response with no body");const n=new Ute,r=new Ex,i=i8(t.body);for await(const s of Hte(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*Hte(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Jk(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=Vte(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}let Ute=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=qte(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function qte(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function u8(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{if(e.options.stream)return Hn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Yp.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type")?.split(";")[0]?.trim();if(c?.includes("application/json")||c?.endsWith("+json")){const d=await n.json();return h8(d,n)}return await n.text()})();return Hn(t).debug(`[${r}] response parsed`,Ql({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function h8(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Yd;let f8=class d8 extends Promise{constructor(e,n,r=u8){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,Yd.set(this,void 0),Ge(this,Yd,e)}_thenUnwrap(e){return new d8(te(this,Yd,"f"),this.responsePromise,async(n,r)=>h8(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(te(this,Yd,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Yd=new WeakMap;var J0;class Qk{constructor(e,n,r,i){J0.set(this,void 0),Ge(this,J0,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Le("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await te(this,J0,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(J0=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Wte extends f8{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await u8(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Tx extends Qk{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class pn extends Qk{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...t8(this.options.query),after:n}}:null}}class Gte extends Qk{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...t8(this.options.query),after:e}}:null}}const p8=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function vp(t,e,n){return p8(),new File(t,e??"unknown_file",n)}function rb(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const m8=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",wc=async(t,e)=>({...t,body:await Yte(t.body,e)}),NL=new WeakMap;function Kte(t){const e=typeof t=="function"?t:t.fetch,n=NL.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return NL.set(e,r),r}const Yte=async(t,e)=>{if(!await Kte(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>eC(n,r,i))),n},Xte=t=>t instanceof Blob&&"name"in t,eC=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,vp([await n.blob()],rb(n)));else if(m8(n))t.append(e,vp([await new Response(r8(n)).blob()],rb(n)));else if(Xte(n))t.append(e,n,rb(n));else if(Array.isArray(n))await Promise.all(n.map(r=>eC(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>eC(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},g8=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Jte=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&g8(t),Qte=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Zte(t,e,n){if(p8(),t=await t,Jte(t))return t instanceof File?t:vp([await t.arrayBuffer()],t.name);if(Qte(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),vp(await tC(i),e,n)}const r=await tC(t);if(e||(e=rb(t)),!n?.type){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return vp(r,e,n)}async function tC(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(g8(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(m8(t))for await(const n of t)e.push(...await tC(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${ene(t)}`)}return e}function ene(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let Fe=class{constructor(e){this._client=e}};function y8(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const BL=Object.freeze(Object.create(null)),tne=(t=y8)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((f,d,m)=>{/[?#]/.test(d)&&(i=!0);const y=r[m];let b=(i?encodeURIComponent:t)(""+y);return m!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??BL)??BL)?.toString)&&(b=y+"",s.push({start:f.length+d.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+d+(m===r.length?"":b)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=c.exec(a))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((f,d)=>f.start-d.start),s.length>0){let f=0;const d=s.reduce((m,y)=>{const b=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,m+b+w},"");throw new Le(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${d}`)}return o},be=tne(y8);let b8=class extends Fe{list(e,n={},r){return this._client.getAPIList(be`/chat/completions/${e}/messages`,pn,{query:n,...r})}};function Jb(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Zk(t){return t?.$brand==="auto-parseable-response-format"}function Lm(t){return t?.$brand==="auto-parseable-tool"}function nne(t,e){return!e||!v8(e)?{...t,choices:t.choices.map(n=>(x8(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:eE(t,e)}function eE(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new Zj;if(r.finish_reason==="content_filter")throw new e8;return x8(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>ine(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?rne(e,r.message.content):null}}});return{...t,choices:n}}function rne(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function ine(t,e){const n=t.tools?.find(r=>Jb(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Lm(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function sne(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Jb(r)&&r.function?.name===e.function.name);return Jb(n)&&(Lm(n)||n?.function.strict||!1)}function v8(t){return Zk(t.response_format)?!0:t.tools?.some(e=>Lm(e)||e.type==="function"&&e.function.strict===!0)??!1}function x8(t){for(const e of t||[])if(e.type!=="function")throw new Le(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function one(t){for(const e of t??[]){if(e.type!=="function")throw new Le(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Le(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Qb=t=>t?.role==="assistant",w8=t=>t?.role==="tool";var nC,ib,sb,Xd,Jd,ob,Qd,zo,Zd,Zb,ev,Wu,S8;class tE{constructor(){nC.add(this),this.controller=new AbortController,ib.set(this,void 0),sb.set(this,()=>{}),Xd.set(this,()=>{}),Jd.set(this,void 0),ob.set(this,()=>{}),Qd.set(this,()=>{}),zo.set(this,{}),Zd.set(this,!1),Zb.set(this,!1),ev.set(this,!1),Wu.set(this,!1),Ge(this,ib,new Promise((e,n)=>{Ge(this,sb,e,"f"),Ge(this,Xd,n,"f")})),Ge(this,Jd,new Promise((e,n)=>{Ge(this,ob,e,"f"),Ge(this,Qd,n,"f")})),te(this,ib,"f").catch(()=>{}),te(this,Jd,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},te(this,nC,"m",S8).bind(this))},0)}_connected(){this.ended||(te(this,sb,"f").call(this),this._emit("connect"))}get ended(){return te(this,Zd,"f")}get errored(){return te(this,Zb,"f")}get aborted(){return te(this,ev,"f")}abort(){this.controller.abort()}on(e,n){return(te(this,zo,"f")[e]||(te(this,zo,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=te(this,zo,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(te(this,zo,"f")[e]||(te(this,zo,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ge(this,Wu,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ge(this,Wu,!0),await te(this,Jd,"f")}_emit(e,...n){if(te(this,Zd,"f"))return;e==="end"&&(Ge(this,Zd,!0),te(this,ob,"f").call(this));const r=te(this,zo,"f")[e];if(r&&(te(this,zo,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!te(this,Wu,"f")&&!r?.length&&Promise.reject(i),te(this,Xd,"f").call(this,i),te(this,Qd,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!te(this,Wu,"f")&&!r?.length&&Promise.reject(i),te(this,Xd,"f").call(this,i),te(this,Qd,"f").call(this,i),this._emit("end")}}_emitFinal(){}}ib=new WeakMap,sb=new WeakMap,Xd=new WeakMap,Jd=new WeakMap,ob=new WeakMap,Qd=new WeakMap,zo=new WeakMap,Zd=new WeakMap,Zb=new WeakMap,ev=new WeakMap,Wu=new WeakMap,nC=new WeakSet,S8=function(e){if(Ge(this,Zb,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Wi),e instanceof Wi)return Ge(this,ev,!0),this._emit("abort",e);if(e instanceof Le)return this._emit("error",e);if(e instanceof Error){const n=new Le(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Le(String(e)))};function ane(t){return typeof t.parse=="function"}var kr,rC,tv,iC,sC,oC,_8,C8;const lne=10;let A8=class extends tE{constructor(){super(...arguments),kr.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),w8(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Qb(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Le("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),te(this,kr,"m",rC).call(this)}async finalMessage(){return await this.done(),te(this,kr,"m",tv).call(this)}async finalFunctionToolCall(){return await this.done(),te(this,kr,"m",iC).call(this)}async finalFunctionToolCallResult(){return await this.done(),te(this,kr,"m",sC).call(this)}async totalUsage(){return await this.done(),te(this,kr,"m",oC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=te(this,kr,"m",tv).call(this);n&&this._emit("finalMessage",n);const r=te(this,kr,"m",rC).call(this);r&&this._emit("finalContent",r);const i=te(this,kr,"m",iC).call(this);i&&this._emit("finalFunctionToolCall",i);const s=te(this,kr,"m",sC).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",te(this,kr,"m",oC).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),te(this,kr,"m",_8).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(eE(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const i="tool",{tool_choice:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s.type==="function"&&s?.function?.name,{maxChatCompletions:h=lne}=r||{},f=n.tools.map(y=>{if(Lm(y)){if(!y.$callback)throw new Le("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),d={};for(const y of f)y.type==="function"&&(d[y.function.name||y.function.function.name]=y.function);const m="tools"in n?f.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<h;++y){const w=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:m,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new Le("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const S of w.tool_calls){if(S.type!=="function")continue;const _=S.id,{name:A,arguments:k}=S.function,P=d[A];if(P){if(c&&c!==A){const N=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:_,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${Object.keys(d).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:_,content:N});continue}let M;try{M=ane(P)?await P.parse(k):k}catch(N){const z=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:_,content:z});continue}const O=await P.function(M,this),L=te(this,kr,"m",C8).call(this,O);if(this._addMessage({role:i,tool_call_id:_,content:L}),c)return}}}};kr=new WeakSet,rC=function(){return te(this,kr,"m",tv).call(this).content??null},tv=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Qb(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Le("stream ended without producing a ChatCompletionMessage with role=assistant")},iC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Qb(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},sC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(w8(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},oC=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},_8=function(e){if(e.n!=null&&e.n>1)throw new Le("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},C8=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class nE extends A8{static runTools(e,n,r){const i=new nE,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),Qb(e)&&e.content&&this._emit("content",e.content)}}const k8=1,E8=2,T8=4,R8=8,M8=16,O8=32,P8=64,D8=128,L8=256,I8=D8|L8,N8=M8|O8|I8|P8,B8=k8|E8|N8,j8=T8|R8,cne=B8|j8,Ln={STR:k8,NUM:E8,ARR:T8,OBJ:R8,NULL:M8,BOOL:O8,NAN:P8,INFINITY:D8,MINUS_INFINITY:L8,INF:I8,SPECIAL:N8,ATOM:B8,COLLECTION:j8,ALL:cne};class une extends Error{}class hne extends Error{}function fne(t,e=Ln.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return dne(t.trim(),e)}const dne=(t,e)=>{const n=t.length;let r=0;const i=m=>{throw new une(`${m} at position ${r}`)},s=m=>{throw new hne(`${m} at position ${r}`)},o=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?h():t.substring(r,r+4)==="null"||Ln.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Ln.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Ln.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Ln.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Ln.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Ln.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),a=()=>{const m=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(y)))}catch(b){s(String(b))}else if(Ln.STR&e)try{return JSON.parse(t.substring(m,r-Number(y))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,d();const m={};try{for(;t[r]!=="}";){if(d(),r>=n&&Ln.OBJ&e)return m;const y=a();d(),r++;try{const b=o();Object.defineProperty(m,y,{value:b,writable:!0,enumerable:!0,configurable:!0})}catch(b){if(Ln.OBJ&e)return m;throw b}d(),t[r]===","&&r++}}catch{if(Ln.OBJ&e)return m;i("Expected '}' at end of object")}return r++,m},h=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(o()),d(),t[r]===","&&r++}catch{if(Ln.ARR&e)return m;i("Expected ']' at end of array")}return r++,m},f=()=>{if(r===0){t==="-"&&Ln.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Ln.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(y))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Ln.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&Ln.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(b){s(String(b))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},jL=t=>fne(t,Ln.ALL^Ln.NUM);var xn,Vo,Iu,Ha,Z2,Q0,eS,tS,nS,Z0,rS,$L;let $8=class aC extends A8{constructor(e){super(),xn.add(this),Vo.set(this,void 0),Iu.set(this,void 0),Ha.set(this,void 0),Ge(this,Vo,e),Ge(this,Iu,[])}get currentChatCompletionSnapshot(){return te(this,Ha,"f")}static fromReadableStream(e){const n=new aC(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new aC(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),te(this,xn,"m",Z2).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)te(this,xn,"m",eS).call(this,o);if(s.controller.signal?.aborted)throw new Wi;return this._addChatCompletion(te(this,xn,"m",Z0).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),te(this,xn,"m",Z2).call(this),this._connected();const i=Yp.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(te(this,xn,"m",Z0).call(this)),te(this,xn,"m",eS).call(this,o),s=o.id;if(i.controller.signal?.aborted)throw new Wi;return this._addChatCompletion(te(this,xn,"m",Z0).call(this))}[(Vo=new WeakMap,Iu=new WeakMap,Ha=new WeakMap,xn=new WeakSet,Z2=function(){this.ended||Ge(this,Ha,void 0)},Q0=function(n){let r=te(this,Iu,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},te(this,Iu,"f")[n.index]=r,r)},eS=function(n){if(this.ended)return;const r=te(this,xn,"m",$L).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const s=r.choices[i.index];i.delta.content!=null&&s.message?.role==="assistant"&&s.message?.content&&(this._emit("content",i.delta.content,s.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:s.message.content,parsed:s.message.parsed})),i.delta.refusal!=null&&s.message?.role==="assistant"&&s.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:s.message.refusal}),i.logprobs?.content!=null&&s.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:s.logprobs?.content??[]}),i.logprobs?.refusal!=null&&s.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:s.logprobs?.refusal??[]});const o=te(this,xn,"m",Q0).call(this,s);s.finish_reason&&(te(this,xn,"m",nS).call(this,s),o.current_tool_call_index!=null&&te(this,xn,"m",tS).call(this,s,o.current_tool_call_index));for(const a of i.delta.tool_calls??[])o.current_tool_call_index!==a.index&&(te(this,xn,"m",nS).call(this,s),o.current_tool_call_index!=null&&te(this,xn,"m",tS).call(this,s,o.current_tool_call_index)),o.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const c=s.message.tool_calls?.[a.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:a.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(c?.type,void 0))}}},tS=function(n,r){if(te(this,xn,"m",Q0).call(this,n).done_tool_calls.has(r))return;const s=n.message.tool_calls?.[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const o=te(this,Vo,"f")?.tools?.find(a=>Jb(a)&&a.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Lm(o)?o.$parseRaw(s.function.arguments):o?.function.strict?JSON.parse(s.function.arguments):null})}else s.type},nS=function(n){const r=te(this,xn,"m",Q0).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=te(this,xn,"m",rS).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Z0=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");const n=te(this,Ha,"f");if(!n)throw new Le("request ended without sending any chunks");return Ge(this,Ha,void 0),Ge(this,Iu,[]),pne(n,te(this,Vo,"f"))},rS=function(){const n=te(this,Vo,"f")?.response_format;return Zk(n)?n:null},$L=function(n){var r,i,s,o;let a=te(this,Ha,"f");const{choices:c,...h}=n;a?Object.assign(a,h):a=Ge(this,Ha,{...h,choices:[]});for(const{delta:f,finish_reason:d,index:m,logprobs:y=null,...b}of n.choices){let w=a.choices[m];if(w||(w=a.choices[m]={finish_reason:d,index:m,message:{},logprobs:y,...b}),y)if(!w.logprobs)w.logprobs=Object.assign({},y);else{const{content:O,refusal:L,...N}=y;Object.assign(w.logprobs,N),O&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...O)),L&&((i=w.logprobs).refusal??(i.refusal=[]),w.logprobs.refusal.push(...L))}if(d&&(w.finish_reason=d,te(this,Vo,"f")&&v8(te(this,Vo,"f")))){if(d==="length")throw new Zj;if(d==="content_filter")throw new e8}if(Object.assign(w,b),!f)continue;const{content:S,refusal:_,function_call:A,role:k,tool_calls:P,...M}=f;if(Object.assign(w.message,M),_&&(w.message.refusal=(w.message.refusal||"")+_),k&&(w.message.role=k),A&&(w.message.function_call?(A.name&&(w.message.function_call.name=A.name),A.arguments&&((s=w.message.function_call).arguments??(s.arguments=""),w.message.function_call.arguments+=A.arguments)):w.message.function_call=A),S&&(w.message.content=(w.message.content||"")+S,!w.message.refusal&&te(this,xn,"m",rS).call(this)&&(w.message.parsed=jL(w.message.content))),P){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:O,id:L,type:N,function:z,...j}of P){const U=(o=w.message.tool_calls)[O]??(o[O]={});Object.assign(U,j),L&&(U.id=L),N&&(U.type=N),z&&(U.function??(U.function={name:z.name??"",arguments:""})),z?.name&&(U.function.name=z.name),z?.arguments&&(U.function.arguments+=z.arguments,sne(te(this,Vo,"f"),U)&&(U.function.parsed_arguments=jL(U.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Yp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function pne(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,c={...a,id:n,choices:r.map(({message:h,finish_reason:f,index:d,logprobs:m,...y})=>{if(!f)throw new Le(`missing finish_reason for choice ${d}`);const{content:b=null,function_call:w,tool_calls:S,..._}=h,A=h.role;if(!A)throw new Le(`missing role for choice ${d}`);if(w){const{arguments:k,name:P}=w;if(k==null)throw new Le(`missing function_call.arguments for choice ${d}`);if(!P)throw new Le(`missing function_call.name for choice ${d}`);return{...y,message:{content:b,function_call:{arguments:k,name:P},role:A,refusal:h.refusal??null},finish_reason:f,index:d,logprobs:m}}return S?{...y,index:d,finish_reason:f,logprobs:m,message:{..._,role:A,content:b,refusal:h.refusal??null,tool_calls:S.map((k,P)=>{const{function:M,type:O,id:L,...N}=k,{arguments:z,name:j,...U}=M||{};if(L==null)throw new Le(`missing choices[${d}].tool_calls[${P}].id
${ey(t)}`);if(O==null)throw new Le(`missing choices[${d}].tool_calls[${P}].type
${ey(t)}`);if(j==null)throw new Le(`missing choices[${d}].tool_calls[${P}].function.name
${ey(t)}`);if(z==null)throw new Le(`missing choices[${d}].tool_calls[${P}].function.arguments
${ey(t)}`);return{...N,id:L,type:O,function:{...U,name:j,arguments:z}}})}}:{...y,message:{..._,content:b,role:A,refusal:h.refusal??null},finish_reason:f,index:d,logprobs:m}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return nne(c,e)}function ey(t){return JSON.stringify(t)}class nv extends $8{static fromReadableStream(e){const n=new nv(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new nv(n),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let rE=class extends Fe{constructor(){super(...arguments),this.messages=new b8(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(be`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(be`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/chat/completions/${e}`,n)}parse(e,n){return one(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>eE(r,e))}runTools(e,n){return e.stream?nv.runTools(this._client,e,n):nE.runTools(this._client,e,n)}stream(e,n){return $8.createChatCompletion(this._client,e,n)}};rE.Messages=b8;let iE=class extends Fe{constructor(){super(...arguments),this.completions=new rE(this._client)}};iE.Completions=rE;const V8=Symbol("brand.privateNullableHeaders");function*mne(t){if(!t)return;if(V8 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():CL(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=CL(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Ne=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of mne(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[V8]:!0,values:e,nulls:n}};class F8 extends Fe{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ne([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}let z8=class extends Fe{create(e,n){return this._client.post("/audio/transcriptions",wc({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}},H8=class extends Fe{create(e,n){return this._client.post("/audio/translations",wc({body:e,...n,__metadata:{model:e.model}},this._client))}},Im=class extends Fe{constructor(){super(...arguments),this.transcriptions=new z8(this._client),this.translations=new H8(this._client),this.speech=new F8(this._client)}};Im.Transcriptions=z8;Im.Translations=H8;Im.Speech=F8;let U8=class extends Fe{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(be`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",pn,{query:e,...n})}cancel(e,n){return this._client.post(be`/batches/${e}/cancel`,n)}};class q8 extends Fe{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(be`/assistants/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(be`/assistants/${e}`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",pn,{query:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(be`/assistants/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let W8=class extends Fe{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class G8 extends Fe{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Rx=class extends Fe{constructor(){super(...arguments),this.sessions=new W8(this._client),this.transcriptionSessions=new G8(this._client)}};Rx.Sessions=W8;Rx.TranscriptionSessions=G8;class K8 extends Fe{create(e,n,r){return this._client.post(be`/threads/${e}/messages`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(be`/threads/${i}/messages/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(be`/threads/${i}/messages/${e}`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(be`/threads/${e}/messages`,pn,{query:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(be`/threads/${i}/messages/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Y8 extends Fe{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(be`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(be`/threads/${i}/runs/${e}/steps`,pn,{query:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const gne=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var yne={};const Nu=t=>{if(typeof globalThis.process<"u")return yne?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var qn,ac,lC,Xs,ab,fs,lc,eh,rc,rv,wi,lb,cb,xp,ep,tp,VL,FL,zL,HL,UL,qL,WL;class wp extends tE{constructor(){super(...arguments),qn.add(this),lC.set(this,[]),Xs.set(this,{}),ab.set(this,{}),fs.set(this,void 0),lc.set(this,void 0),eh.set(this,void 0),rc.set(this,void 0),rv.set(this,void 0),wi.set(this,void 0),lb.set(this,void 0),cb.set(this,void 0),xp.set(this,void 0)}[(lC=new WeakMap,Xs=new WeakMap,ab=new WeakMap,fs=new WeakMap,lc=new WeakMap,eh=new WeakMap,rc=new WeakMap,rv=new WeakMap,wi=new WeakMap,lb=new WeakMap,cb=new WeakMap,xp=new WeakMap,qn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ac;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Yp.fromReadableStream(e,this.controller);for await(const s of i)te(this,qn,"m",ep).call(this,s);if(i.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,qn,"m",tp).call(this))}toReadableStream(){return new Yp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new ac;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){const s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const c of a)te(this,qn,"m",ep).call(this,c);if(a.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,qn,"m",tp).call(this))}static createThreadAssistantStream(e,n,r){const i=new ac;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new ac;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return te(this,lb,"f")}currentRun(){return te(this,cb,"f")}currentMessageSnapshot(){return te(this,fs,"f")}currentRunStepSnapshot(){return te(this,xp,"f")}async finalRunSteps(){return await this.done(),Object.values(te(this,Xs,"f"))}async finalMessages(){return await this.done(),Object.values(te(this,ab,"f"))}async finalRun(){if(await this.done(),!te(this,lc,"f"))throw Error("Final run was not received.");return te(this,lc,"f")}async _createThreadAssistantStream(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const a of o)te(this,qn,"m",ep).call(this,a);if(o.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,qn,"m",tp).call(this))}async _createAssistantStream(e,n,r,i){const s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const c of a)te(this,qn,"m",ep).call(this,c);if(a.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,qn,"m",tp).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(X2(s)&&X2(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!X2(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=s[a];c==null?s.push(o):s[a]=this.accumulateDelta(c,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}ac=wp,ep=function(e){if(!this.ended)switch(Ge(this,lb,e),te(this,qn,"m",zL).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":te(this,qn,"m",WL).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":te(this,qn,"m",FL).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":te(this,qn,"m",VL).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},tp=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");if(!te(this,lc,"f"))throw Error("Final run has not been received");return te(this,lc,"f")},VL=function(e){const[n,r]=te(this,qn,"m",UL).call(this,e,te(this,fs,"f"));Ge(this,fs,n),te(this,ab,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=te(this,eh,"f")){if(te(this,rc,"f"))switch(te(this,rc,"f").type){case"text":this._emit("textDone",te(this,rc,"f").text,te(this,fs,"f"));break;case"image_file":this._emit("imageFileDone",te(this,rc,"f").image_file,te(this,fs,"f"));break}Ge(this,eh,i.index)}Ge(this,rc,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(te(this,eh,"f")!==void 0){const i=e.data.content[te(this,eh,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,te(this,fs,"f"));break;case"text":this._emit("textDone",i.text,te(this,fs,"f"));break}}te(this,fs,"f")&&this._emit("messageDone",e.data),Ge(this,fs,void 0)}},FL=function(e){const n=te(this,qn,"m",HL).call(this,e);switch(Ge(this,xp,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==te(this,rv,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(te(this,wi,"f")&&this._emit("toolCallDone",te(this,wi,"f")),Ge(this,rv,s.index),Ge(this,wi,n.step_details.tool_calls[s.index]),te(this,wi,"f")&&this._emit("toolCallCreated",te(this,wi,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ge(this,xp,void 0),e.data.step_details.type=="tool_calls"&&te(this,wi,"f")&&(this._emit("toolCallDone",te(this,wi,"f")),Ge(this,wi,void 0)),this._emit("runStepDone",e.data,n);break}},zL=function(e){te(this,lC,"f").push(e),this._emit("event",e)},HL=function(e){switch(e.event){case"thread.run.step.created":return te(this,Xs,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=te(this,Xs,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=ac.accumulateDelta(n,r.delta);te(this,Xs,"f")[e.data.id]=i}return te(this,Xs,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":te(this,Xs,"f")[e.data.id]=e.data;break}if(te(this,Xs,"f")[e.data.id])return te(this,Xs,"f")[e.data.id];throw new Error("No snapshot available")},UL=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=te(this,qn,"m",qL).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},qL=function(e,n){return ac.accumulateDelta(n,e)},WL=function(e){switch(Ge(this,cb,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ge(this,lc,e.data),te(this,wi,"f")&&(this._emit("toolCallDone",te(this,wi,"f")),Ge(this,wi,void 0));break}};let sE=class extends Fe{constructor(){super(...arguments),this.steps=new Y8(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(be`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(be`/threads/${i}/runs/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(be`/threads/${i}/runs/${e}`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(be`/threads/${e}/runs`,pn,{query:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(be`/threads/${i}/runs/${e}/cancel`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return wp.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i=Ne([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:s,response:o}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(a=h)}}await Dm(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return wp.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(be`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return wp.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};sE.Steps=Y8;class Mx extends Fe{constructor(){super(...arguments),this.runs=new sE(this._client),this.messages=new K8(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(be`/threads/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(be`/threads/${e}`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(be`/threads/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return wp.createThreadAssistantStream(e,this._client.beta.threads,n)}}Mx.Runs=sE;Mx.Messages=K8;class Nm extends Fe{constructor(){super(...arguments),this.realtime=new Rx(this._client),this.assistants=new q8(this._client),this.threads=new Mx(this._client)}}Nm.Realtime=Rx;Nm.Assistants=q8;Nm.Threads=Mx;let X8=class extends Fe{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}},J8=class extends Fe{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(be`/containers/${i}/files/${e}/content`,{...r,headers:Ne([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}},oE=class extends Fe{constructor(){super(...arguments),this.content=new J8(this._client)}create(e,n,r){return this._client.post(be`/containers/${e}/files`,wc({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(be`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(be`/containers/${e}/files`,pn,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(be`/containers/${i}/files/${e}`,{...r,headers:Ne([{Accept:"*/*"},r?.headers])})}};oE.Content=J8;class aE extends Fe{constructor(){super(...arguments),this.files=new oE(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(be`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/containers/${e}`,{...n,headers:Ne([{Accept:"*/*"},n?.headers])})}}aE.Files=oE;class Q8 extends Fe{create(e,n,r){const{include:i,...s}=n;return this._client.post(be`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(be`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(be`/conversations/${e}/items`,Gte,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(be`/conversations/${i}/items/${e}`,r)}}class lE extends Fe{constructor(){super(...arguments),this.items=new Q8(this._client)}create(e,n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(be`/conversations/${e}`,n)}update(e,n,r){return this._client.post(be`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(be`/conversations/${e}`,n)}}lE.Items=Q8;let Z8=class extends Fe{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&Hn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(Hn(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const c=a.embedding;a.embedding=gne(c)}),o)))}};class e9 extends Fe{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(be`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(be`/evals/${i}/runs/${e}/output_items`,pn,{query:s,...r})}}class cE extends Fe{constructor(){super(...arguments),this.outputItems=new e9(this._client)}create(e,n,r){return this._client.post(be`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(be`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(be`/evals/${e}/runs`,pn,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(be`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(be`/evals/${i}/runs/${e}`,r)}}cE.OutputItems=e9;class uE extends Fe{constructor(){super(...arguments),this.runs=new cE(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(be`/evals/${e}`,n)}update(e,n,r){return this._client.post(be`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/evals/${e}`,n)}}uE.Runs=cE;let t9=class extends Fe{create(e,n){return this._client.post("/files",wc({body:e,...n},this._client))}retrieve(e,n){return this._client.get(be`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/files/${e}`,n)}content(e,n){return this._client.get(be`/files/${e}/content`,{...n,headers:Ne([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Dm(n),o=await this.retrieve(e),Date.now()-s>r)throw new Xk({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class n9 extends Fe{}let r9=class extends Fe{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class hE extends Fe{constructor(){super(...arguments),this.graders=new r9(this._client)}}hE.Graders=r9;class i9 extends Fe{create(e,n,r){return this._client.getAPIList(be`/fine_tuning/checkpoints/${e}/permissions`,Tx,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(be`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(be`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let fE=class extends Fe{constructor(){super(...arguments),this.permissions=new i9(this._client)}};fE.Permissions=i9;class s9 extends Fe{list(e,n={},r){return this._client.getAPIList(be`/fine_tuning/jobs/${e}/checkpoints`,pn,{query:n,...r})}}let dE=class extends Fe{constructor(){super(...arguments),this.checkpoints=new s9(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(be`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",pn,{query:e,...n})}cancel(e,n){return this._client.post(be`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(be`/fine_tuning/jobs/${e}/events`,pn,{query:n,...r})}pause(e,n){return this._client.post(be`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(be`/fine_tuning/jobs/${e}/resume`,n)}};dE.Checkpoints=s9;class Gh extends Fe{constructor(){super(...arguments),this.methods=new n9(this._client),this.jobs=new dE(this._client),this.checkpoints=new fE(this._client),this.alpha=new hE(this._client)}}Gh.Methods=n9;Gh.Jobs=dE;Gh.Checkpoints=fE;Gh.Alpha=hE;class o9 extends Fe{}class pE extends Fe{constructor(){super(...arguments),this.graderModels=new o9(this._client)}}pE.GraderModels=o9;let a9=class extends Fe{createVariation(e,n){return this._client.post("/images/variations",wc({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",wc({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}},l9=class extends Fe{retrieve(e,n){return this._client.get(be`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Tx,e)}delete(e,n){return this._client.delete(be`/models/${e}`,n)}};class c9 extends Fe{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class u9 extends Fe{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class mE extends Fe{constructor(){super(...arguments),this.clientSecrets=new u9(this._client)}}mE.ClientSecrets=u9;function bne(t,e){return!e||!xne(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:h9(t,e)}function h9(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:_ne(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:vne(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||cC(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function vne(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function xne(t){return!!Zk(t.text?.format)}function wne(t){return t?.$brand==="auto-parseable-tool"}function Sne(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function _ne(t,e){const n=Sne(t.tools??[],e.name);return{...e,...e,parsed_arguments:wne(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function cC(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Bu,ty,Ua,ny,GL,KL,YL,XL;class gE extends tE{constructor(e){super(),Bu.add(this),ty.set(this,void 0),Ua.set(this,void 0),ny.set(this,void 0),Ge(this,ty,e)}static createResponse(e,n,r){const i=new gE(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),te(this,Bu,"m",GL).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of s)te(this,Bu,"m",KL).call(this,a,o);if(s.controller.signal?.aborted)throw new Wi;return te(this,Bu,"m",YL).call(this)}[(ty=new WeakMap,Ua=new WeakMap,ny=new WeakMap,Bu=new WeakSet,GL=function(){this.ended||Ge(this,Ua,void 0)},KL=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=te(this,Bu,"m",XL).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new Le(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new Le(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Le(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new Le(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},YL=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");const n=te(this,Ua,"f");if(!n)throw new Le("request ended without sending any events");Ge(this,Ua,void 0);const r=Cne(n,te(this,ty,"f"));return Ge(this,ny,r),r},XL=function(n){let r=te(this,Ua,"f");if(!r){if(n.type!=="response.created")throw new Le(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Ge(this,Ua,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);const s=i.type,o=n.part;s==="message"&&o.type!=="reasoning_text"?i.content.push(o):s==="reasoning"&&o.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(o));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new Le(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new Le(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const s=i.content?.[n.content_index];if(!s)throw new Le(`missing content at index ${n.content_index}`);if(s.type!=="reasoning_text")throw new Le(`expected content to be 'reasoning_text', got ${s.type}`);s.text+=n.delta}break}case"response.completed":{Ge(this,Ua,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=te(this,ny,"f");if(!e)throw new Le("stream ended without producing a ChatCompletion");return e}}function Cne(t,e){return bne(t,e)}class f9 extends Fe{list(e,n={},r){return this._client.getAPIList(be`/responses/${e}/input_items`,pn,{query:n,...r})}}class yE extends Fe{constructor(){super(...arguments),this.inputItems=new f9(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&cC(r),r))}retrieve(e,n={},r){return this._client.get(be`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&cC(i),i))}delete(e,n){return this._client.delete(be`/responses/${e}`,{...n,headers:Ne([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>h9(r,e))}stream(e,n){return gE.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(be`/responses/${e}/cancel`,n)}}yE.InputItems=f9;class d9 extends Fe{create(e,n,r){return this._client.post(be`/uploads/${e}/parts`,wc({body:n,...r},this._client))}}class bE extends Fe{constructor(){super(...arguments),this.parts=new d9(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(be`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(be`/uploads/${e}/complete`,{body:n,...r})}}bE.Parts=d9;const Ane=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class p9 extends Fe{create(e,n,r){return this._client.post(be`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(be`/vector_stores/${i}/file_batches/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(be`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(be`/vector_stores/${i}/file_batches/${e}/files`,pn,{query:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const i=Ne([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:s,response:o}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(a=h)}}await Dm(a);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=i?.maxConcurrency??5,o=Math.min(s,n.length),a=this._client,c=n.values(),h=[...r];async function f(m){for(let y of m){const b=await a.files.create({file:y,purpose:"assistants"},i);h.push(b.id)}}const d=Array(o).fill(c).map(f);return await Ane(d),await this.createAndPoll(e,{file_ids:h})}}let m9=class extends Fe{create(e,n,r){return this._client.post(be`/vector_stores/${e}/files`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(be`/vector_stores/${i}/files/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(be`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(be`/vector_stores/${e}/files`,pn,{query:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(be`/vector_stores/${i}/files/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i=Ne([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const s=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),o=s.data;switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.response.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(a=h)}}await Dm(a);break;case"failed":case"completed":return o}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(be`/vector_stores/${i}/files/${e}/content`,Tx,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};class Ox extends Fe{constructor(){super(...arguments),this.files=new m9(this._client),this.fileBatches=new p9(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(be`/vector_stores/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(be`/vector_stores/${e}`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",pn,{query:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(be`/vector_stores/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(be`/vector_stores/${e}/search`,Tx,{body:n,method:"post",...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Ox.Files=m9;Ox.FileBatches=p9;var Gu,g9,ub;class y9 extends Fe{constructor(){super(...arguments),Gu.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");te(this,Gu,"m",g9).call(this,r);const s=Ne([n]).values,o=te(this,Gu,"m",ub).call(this,s,"webhook-signature"),a=te(this,Gu,"m",ub).call(this,s,"webhook-timestamp"),c=te(this,Gu,"m",ub).call(this,s,"webhook-id"),h=parseInt(a,10);if(isNaN(h))throw new Wd("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-h>i)throw new Wd("Webhook timestamp is too old");if(h>f+i)throw new Wd("Webhook timestamp is too new");const d=o.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=c?`${c}.${a}.${e}`:`${a}.${e}`,b=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of d)try{const S=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",b,S,new TextEncoder().encode(y)))return}catch{continue}throw new Wd("The given webhook signature does not match the expected signature")}}Gu=new WeakSet,g9=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},ub=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var uC,vE,hb,b9;class Ze{constructor({baseURL:e=Nu("OPENAI_BASE_URL"),apiKey:n=Nu("OPENAI_API_KEY"),organization:r=Nu("OPENAI_ORG_ID")??null,project:i=Nu("OPENAI_PROJECT_ID")??null,webhookSecret:s=Nu("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(uC.add(this),hb.set(this,void 0),this.completions=new X8(this),this.chat=new iE(this),this.embeddings=new Z8(this),this.files=new t9(this),this.images=new a9(this),this.audio=new Im(this),this.moderations=new c9(this),this.models=new l9(this),this.fineTuning=new Gh(this),this.graders=new pE(this),this.vectorStores=new Ox(this),this.webhooks=new y9(this),this.beta=new Nm(this),this.batches=new U8(this),this.uploads=new bE(this),this.responses=new yE(this),this.realtime=new mE(this),this.conversations=new lE(this),this.evals=new uE(this),this.containers=new aE(this),n===void 0)throw new Le("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Cte())throw new Le(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??vE.DEFAULT_TIMEOUT,this.logger=a.logger??console;const c="warn";this.logLevel=c,this.logLevel=LL(a.logLevel,"ClientOptions.logLevel",this)??LL(Nu("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??c,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Rte(),Ge(this,hb,Ote),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ne([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Bte(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${qu}`}defaultIdempotencyKey(){return`stainless-node-retry-${Uj()}`}makeStatusError(e,n,r,i){return Jr.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Le?r:new Le(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Le(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!te(this,uC,"m",b9).call(this)&&r||this.baseURL,s=vte(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return xte(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new f8(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:c}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Hn(this).debug(`[${h}] sending request`,Ql({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),i.signal?.aborted)throw new Wi;const m=new AbortController,y=await this.fetchWithTimeout(a,o,c,m).catch(J_),b=Date.now();if(y instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new Wi;const A=X_(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Hn(this).info(`[${h}] connection ${A?"timed out":"failed"} - ${_}`),Hn(this).debug(`[${h}] connection ${A?"timed out":"failed"} (${_})`,Ql({retryOfRequestLogID:r,url:a,durationMs:b-d,message:y.message})),this.retryRequest(i,n,r??h);throw Hn(this).info(`[${h}] connection ${A?"timed out":"failed"} - error; no more retries left`),Hn(this).debug(`[${h}] connection ${A?"timed out":"failed"} (error; no more retries left)`,Ql({retryOfRequestLogID:r,url:a,durationMs:b-d,message:y.message})),A?new Xk:new kx({cause:y})}const w=[...y.headers.entries()].filter(([_])=>_==="x-request-id").map(([_,A])=>", "+_+": "+JSON.stringify(A)).join(""),S=`[${h}${f}${w}] ${o.method} ${a} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${b-d}ms`;if(!y.ok){const _=await this.shouldRetry(y);if(n&&_){const L=`retrying, ${n} attempts remaining`;return await Mte(y.body),Hn(this).info(`${S} - ${L}`),Hn(this).debug(`[${h}] response error (${L})`,Ql({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:b-d})),this.retryRequest(i,n,r??h,y.headers)}const A=_?"error; no more retries left":"error; not retryable";Hn(this).info(`${S} - ${A}`);const k=await y.text().catch(L=>J_(L).message),P=_te(k),M=P?void 0:k;throw Hn(this).debug(`[${h}] response error (${A})`,Ql({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:M,durationMs:Date.now()-d})),this.makeStatusError(y.status,P,M,y.headers)}return Hn(this).info(S),Hn(this).debug(`[${h}] response start`,Ql({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:b-d})),{response:y,options:i,controller:m,requestLogID:h,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Wte(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i?.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(s=c)}const a=i?.get("retry-after");if(a&&!s){const c=parseFloat(a);Number.isNaN(c)?s=Date.parse(a)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Dm(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,c=this.buildURL(s,o,a);"timeout"in r&&Ste("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=Ne([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Tte(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ne([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:r8(e)}:te(this,hb,"f").call(this,{body:e,headers:r})}}vE=Ze,hb=new WeakMap,uC=new WeakSet,b9=function(){return this.baseURL!=="https://api.openai.com/v1"};Ze.OpenAI=vE;Ze.DEFAULT_TIMEOUT=6e5;Ze.OpenAIError=Le;Ze.APIError=Jr;Ze.APIConnectionError=kx;Ze.APIConnectionTimeoutError=Xk;Ze.APIUserAbortError=Wi;Ze.NotFoundError=Kj;Ze.ConflictError=Yj;Ze.RateLimitError=Jj;Ze.BadRequestError=qj;Ze.AuthenticationError=Wj;Ze.InternalServerError=Qj;Ze.PermissionDeniedError=Gj;Ze.UnprocessableEntityError=Xj;Ze.InvalidWebhookSignatureError=Wd;Ze.toFile=Zte;Ze.Completions=X8;Ze.Chat=iE;Ze.Embeddings=Z8;Ze.Files=t9;Ze.Images=a9;Ze.Audio=Im;Ze.Moderations=c9;Ze.Models=l9;Ze.FineTuning=Gh;Ze.Graders=pE;Ze.VectorStores=Ox;Ze.Webhooks=y9;Ze.Beta=Nm;Ze.Batches=U8;Ze.Uploads=bE;Ze.Responses=yE;Ze.Realtime=mE;Ze.Conversations=lE;Ze.Evals=uE;Ze.Containers=aE;const kne=t=>t.map(e=>({type:"function",function:{name:e.name,description:e.description,input_schema:{type:"object",...e.inputSchema}}})),iS=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"||n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?{type:"text",text:i.text}:i.type==="file"?{type:"text",text:JSON.stringify({file_data:i.data,filename:JSON.parse(i.mimeType).path,file_id:JSON.parse(i.mimeType).path})}:{type:"text",text:""});e.push({role:"user",content:r})}else{const r=typeof n.content=="string"?n.content:[],i=[],s=[],o=n.content;typeof o!="string"&&typeof r!="string"&&o.forEach(c=>{if(Array.isArray(r)&&(c.type==="text"&&r.push({type:"text",text:c.text}),c.type==="tool-call")){c.result&&i.push({role:"tool",content:c.result,tool_call_id:c.toolCallId}),s.push({id:c.toolCallId,type:"function",function:{arguments:c.argsText??"",name:c.toolName}});return}});const a={role:"assistant",content:r};s.length&&(a.tool_calls=s),e.push(a),i.length&&e.push(...i)}}),e},Ene=(t,e,n)=>{if(!e.delta.content)return t;let r=po(t);const i=r.content;if(typeof i=="string")return r;const s=i[i.length-1];if((!s||n)&&typeof t.content!="string"&&(r={...r,content:[...i,{type:"text",text:e.delta.content}]}),s&&typeof s!="string"&&typeof i!="string"&&s.type==="text"){const o=s.text+e.delta.content,a=po({...s,text:o});r={...r,content:[...i.slice(0,-1),a]}}return r},Tne=(t,e)=>{let n=po(t);if(!e.delta.tool_calls||typeof n.content=="string")return n;const r=e.delta.tool_calls[0],i=n.content[n.content.length-1];if(!i||i?.type!=="tool-call"){const s={type:"tool-call",args:{},argsText:r?.function?.arguments??"",toolName:r?.function?.name??"",toolCallId:r?.id??""};n={...n,content:[...n.content,s]}}else{const s=i,o=s.argsText+(r?.function?.arguments??""),a=s.toolName||r?.function?.name||"",c=s.toolCallId||r?.id||"",h={...s,args:{},argsText:o,toolName:a,toolCallId:c};n={...n,content:[...n.content.slice(0,-1),h]}}return n};class Rne{modelKey="";systemPrompt="";apiKey;url;provider;prevMessages=[];tools=[];client;stopStream=!1;constructor(){}setProvider=e=>{this.provider=e,this.client=new Ze({apiKey:e.key,baseURL:e.baseUrl,dangerouslyAllowBrowser:!0}),e.key&&this.setApiKey(e.key),e.baseUrl&&this.setUrl(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setApiKey=e=>{this.apiKey=e,this.client&&(this.client.apiKey=e)};setUrl=e=>{this.url=e,this.client&&(this.client.baseURL=e)};setPrevMessages=e=>{this.prevMessages=iS(e)};setTools=e=>{this.tools=kne(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=iS(e),s={role:"system",content:this.systemPrompt},o=await this.client.chat.completions.create({messages:[s,...this.prevMessages,...i],model:this.modelKey,tools:this.tools,stream:!0,max_tokens:2048});this.prevMessages.push(...i);let a=n&&r?po(r):{role:"assistant",content:[]},c=!1;for await(const h of o){if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(h.choices.forEach(d=>{if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(!c){if(d.finish_reason){c=!0;const m=n?{...a,content:a.content.slice(r?.content.length??0)}:a,y=iS([m]);this.prevMessages.push(...y);return}d.delta.content&&(a=Ene(a,d,n)),d.delta.tool_calls&&typeof a.content!="string"&&(a=Tne(a,d))}}),c){yield{isEnd:!0,responseMessage:a};continue}else yield a}}catch(i){console.log(i),yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r={role:"tool",content:n.result,tool_call_id:n.toolCallId};return this.prevMessages.push(r),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.stopStream=!0};getName=()=>"OpenAI";getBaseUrl=()=>"https://api.openai.com/v1";checkProvider=async e=>{const n=new Ze({baseURL:e.url,apiKey:e.apiKey,dangerouslyAllowBrowser:!0});try{return await n.models.list(),!0}catch(r){if(console.log(r),r.code==="invalid_api_key")return{field:"key",message:"Invalid API Key"};if(e.apiKey)return{field:"url",message:"Invalid URL"}}return{field:"key",message:"Empty key"}};getProviderModels=async e=>(await new Ze({baseURL:e.url,apiKey:e.apiKey,dangerouslyAllowBrowser:!0}).models.list()).data.map(i=>({id:i.id,name:i.id,provider:"openai"}))}const JL=new Rne;function It(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function Ae(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let v9=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return v9=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function hC(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const fC=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class _t extends Error{}class yr extends _t{constructor(e,n,r,i){super(`${yr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Px({message:r,cause:fC(n)});const s=n;return e===400?new w9(e,s,r,i):e===401?new S9(e,s,r,i):e===403?new _9(e,s,r,i):e===404?new C9(e,s,r,i):e===409?new A9(e,s,r,i):e===422?new k9(e,s,r,i):e===429?new E9(e,s,r,i):e>=500?new T9(e,s,r,i):new yr(e,s,r,i)}}class Sc extends yr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Px extends yr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class x9 extends Px{constructor({message:e}={}){super({message:e??"Request timed out."})}}class w9 extends yr{}class S9 extends yr{}class _9 extends yr{}class C9 extends yr{}class A9 extends yr{}class k9 extends yr{}class E9 extends yr{}class T9 extends yr{}const Mne=/^[a-z][a-z0-9+.-]*:/i,One=t=>Mne.test(t);let dC=t=>(dC=Array.isArray,dC(t)),QL=dC;function Pne(t){if(!t)return!0;for(const e in t)return!1;return!0}function Dne(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Lne=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _t(`${t} must be an integer`);if(e<0)throw new _t(`${t} must be a positive integer`);return e},Ine=t=>{try{return JSON.parse(t)}catch{return}},Nne=t=>new Promise(e=>setTimeout(e,t)),Ku="0.22.0";function Bne(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const jne=()=>{const t=Bne();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":eI(Deno.build.os),"X-Stainless-Arch":ZL(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":eI(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ZL(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=$ne();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $ne(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const ZL=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",eI=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let tI;const Vne=()=>tI??(tI=jne());function Fne(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Together({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function R9(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function M9(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return R9({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){await e.return?.()}})}function O9(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function zne(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Hne=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),P9=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sp(t,e,n){return P9(),new File(t,e??"unknown_file",n)}function fb(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const D9=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",L9=async(t,e)=>({...t,body:await qne(t.body,e)}),nI=new WeakMap;function Une(t){const e=typeof t=="function"?t:t.fetch,n=nI.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return nI.set(e,r),r}const qne=async(t,e)=>{if(!await Une(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>pC(n,r,i))),n},Wne=t=>t instanceof Blob&&"name"in t,pC=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Sp([await n.blob()],fb(n)));else if(D9(n))t.append(e,Sp([await new Response(M9(n)).blob()],fb(n)));else if(Wne(n))t.append(e,n,fb(n));else if(Array.isArray(n))await Promise.all(n.map(r=>pC(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>pC(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},I9=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Gne=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&I9(t),Kne=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Yne(t,e,n){if(P9(),t=await t,Gne(t))return t instanceof File?t:Sp([await t.arrayBuffer()],t.name);if(Kne(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Sp(await mC(i),e,n)}const r=await mC(t);if(e||(e=fb(t)),!n?.type){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return Sp(r,e,n)}async function mC(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(I9(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(D9(t))for await(const n of t)e.push(...await mC(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Xne(t)}`)}return e}function Xne(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Qn{constructor(e){this._client=e}}class N9 extends Qn{create(e,n){return this._client.post("/audio/transcriptions",L9({body:e,...n},this._client))}}class B9 extends Qn{create(e,n){return this._client.post("/audio/translations",L9({body:e,...n},this._client))}}const j9=Symbol("brand.privateNullableHeaders");function*Jne(t){if(!t)return;if(j9 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():QL(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=QL(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const gh=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Jne(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[j9]:!0,values:e,nulls:n}};class Dx extends Qn{constructor(){super(...arguments),this.transcriptions=new N9(this._client),this.translations=new B9(this._client)}create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:gh([{Accept:"application/octet-stream"},n?.headers]),stream:e.stream??!1,__binaryResponse:!0})}}Dx.Transcriptions=N9;Dx.Translations=B9;function $9(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const rI=Object.freeze(Object.create(null)),Qne=(t=$9)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((f,d,m)=>{/[?#]/.test(d)&&(i=!0);const y=r[m];let b=(i?encodeURIComponent:t)(""+y);return m!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??rI)??rI)?.toString)&&(b=y+"",s.push({start:f.length+d.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+d+(m===r.length?"":b)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=c.exec(a))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((f,d)=>f.start-d.start),s.length>0){let f=0;const d=s.reduce((m,y)=>{const b=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,m+b+w},"");throw new _t(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${d}`)}return o},Gi=Qne($9);class V9 extends Qn{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(Gi`/batches/${e}`,n)}list(e){return this._client.get("/batches",e)}}function iI(t){return typeof t.parse=="function"}const _p=t=>t?.role==="assistant",F9=t=>t?.role==="function",z9=t=>t?.role==="tool";var hr,db,pb,np,rp,mb,ip,Ho,sp,gb,yb,Yu,gC,iv,yC,bC,vC,xC,H9,wC;const sI=10;class Zne{constructor(){hr.add(this),this.controller=new AbortController,db.set(this,void 0),pb.set(this,()=>{}),np.set(this,()=>{}),rp.set(this,void 0),mb.set(this,()=>{}),ip.set(this,()=>{}),Ho.set(this,{}),this._chatCompletions=[],this.messages=[],sp.set(this,!1),gb.set(this,!1),yb.set(this,!1),Yu.set(this,!1),xC.set(this,e=>{if(It(this,gb,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Sc),e instanceof Sc)return It(this,yb,!0),this._emit("abort",e);if(e instanceof _t)return this._emit("error",e);if(e instanceof Error){const n=new n(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new _t(String(e)))}),It(this,db,new Promise((e,n)=>{It(this,pb,e,"f"),It(this,np,n,"f")})),It(this,rp,new Promise((e,n)=>{It(this,mb,e,"f"),It(this,ip,n,"f")})),Ae(this,db,"f").catch(()=>{}),Ae(this,rp,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Ae(this,xC,"f"))},0)}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(F9(e)||z9(e))&&e.content)this._emit("functionCallResult",e.content);else if(_p(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(_p(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}_connected(){this.ended||(Ae(this,pb,"f").call(this),this._emit("connect"))}get ended(){return Ae(this,sp,"f")}get errored(){return Ae(this,gb,"f")}get aborted(){return Ae(this,yb,"f")}abort(){this.controller.abort()}on(e,n){return(Ae(this,Ho,"f")[e]||(Ae(this,Ho,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Ae(this,Ho,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(Ae(this,Ho,"f")[e]||(Ae(this,Ho,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{It(this,Yu,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){It(this,Yu,!0),await Ae(this,rp,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new _t("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ae(this,hr,"m",gC).call(this)}async finalMessage(){return await this.done(),Ae(this,hr,"m",iv).call(this)}async finalFunctionCall(){return await this.done(),Ae(this,hr,"m",yC).call(this)}async finalFunctionCallResult(){return await this.done(),Ae(this,hr,"m",bC).call(this)}async totalUsage(){return await this.done(),Ae(this,hr,"m",vC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...n){if(Ae(this,sp,"f"))return;e==="end"&&(It(this,sp,!0),Ae(this,mb,"f").call(this));const r=Ae(this,Ho,"f")[e];if(r&&(Ae(this,Ho,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!Ae(this,Yu,"f")&&!r?.length&&Promise.reject(i),Ae(this,np,"f").call(this,i),Ae(this,ip,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!Ae(this,Yu,"f")&&!r?.length&&Promise.reject(i),Ae(this,np,"f").call(this,i),Ae(this,ip,"f").call(this,i),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Ae(this,hr,"m",iv).call(this);n&&this._emit("finalMessage",n);const r=Ae(this,hr,"m",gC).call(this);r&&this._emit("finalContent",r);const i=Ae(this,hr,"m",yC).call(this);i&&this._emit("finalFunctionCall",i);const s=Ae(this,hr,"m",bC).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Ae(this,hr,"m",vC).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ae(this,hr,"m",H9).call(this,n);const s=await e.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const i="function",{function_call:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s?.name,{maxChatCompletions:h=sI}=r||{},f={};for(const m of n.functions)f[m.name||m.function.name]=m;const d=n.functions.map(m=>({name:m.name||m.function.name,parameters:m.parameters,description:m.description}));for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<h;++m){const b=(await this._createChatCompletion(e,{...a,function_call:s,functions:d,messages:[...this.messages]},r)).choices[0]?.message;if(!b)throw new _t("missing message in ChatCompletion response");if(!b.function_call)return;const{name:w,arguments:S}=b.function_call,_=f[w];if(_){if(c&&c!==w){const M=`Invalid function_call: ${JSON.stringify(w)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,name:w,content:M});continue}}else{const M=`Invalid function_call: ${JSON.stringify(w)}. Available options are: ${d.map(O=>JSON.stringify(O.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:w,content:M});continue}let A;try{A=iI(_)?await _.parse(S):S}catch(M){this._addMessage({role:i,name:w,content:M instanceof Error?M.message:String(M)});continue}const k=await _.function(A,this),P=Ae(this,hr,"m",wC).call(this,k);if(this._addMessage({role:i,name:w,content:P}),c)return}}async _runTools(e,n,r){const i="tool",{tool_choice:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s?.function?.name,{maxChatCompletions:h=sI}=r||{},f={};for(const m of n.tools)m.type==="function"&&(f[m.function.name||m.function.function.name]=m.function);const d="tools"in n?n.tools.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description}}:m):void 0;for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<h;++m){const b=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0]?.message;if(!b)throw new _t("missing message in ChatCompletion response");if(!b.tool_calls)return;for(const w of b.tool_calls){if(w.type!=="function")continue;const S=w.id,{name:_,arguments:A}=w.function,k=f[_];if(k){if(c&&c!==_){const L=`Invalid tool_call: ${JSON.stringify(_)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:S,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(_)}. Available options are: ${d.map(N=>JSON.stringify(N.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:S,content:L});continue}let P;try{P=iI(k)?await k.parse(A):A}catch(L){const N=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:S,content:N});continue}const M=await k.function(P,this),O=Ae(this,hr,"m",wC).call(this,M);if(this._addMessage({role:i,tool_call_id:S,content:O}),c)return}}}}db=new WeakMap,pb=new WeakMap,np=new WeakMap,rp=new WeakMap,mb=new WeakMap,ip=new WeakMap,Ho=new WeakMap,sp=new WeakMap,gb=new WeakMap,yb=new WeakMap,Yu=new WeakMap,xC=new WeakMap,hr=new WeakSet,gC=function(){return Ae(this,hr,"m",iv).call(this).content??null},iv=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(_p(n))return{...n,content:n.content??null}}throw new _t("stream ended without producing a ChatCompletionMessage with role=assistant")},yC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(_p(n)&&n?.function_call)return n.function_call;if(_p(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},bC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(F9(n)&&n.content!=null||z9(n)&&n.content!=null&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},vC=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},H9=function(e){if(e.n!=null&&e.n>1)throw new _t("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},wC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};function ere(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let oI;function xE(t){let e;return(oI??(e=new globalThis.TextEncoder,oI=e.encode.bind(e)))(t)}let aI;function lI(t){let e;return(aI??(e=new globalThis.TextDecoder,aI=e.decode.bind(e)))(t)}var bi,vi;class Lx{constructor(){bi.set(this,void 0),vi.set(this,void 0),It(this,bi,new Uint8Array),It(this,vi,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xE(e):e;It(this,bi,ere([Ae(this,bi,"f"),n]));const r=[];let i;for(;(i=tre(Ae(this,bi,"f"),Ae(this,vi,"f")))!=null;){if(i.carriage&&Ae(this,vi,"f")==null){It(this,vi,i.index);continue}if(Ae(this,vi,"f")!=null&&(i.index!==Ae(this,vi,"f")+1||i.carriage)){r.push(lI(Ae(this,bi,"f").subarray(0,Ae(this,vi,"f")-1))),It(this,bi,Ae(this,bi,"f").subarray(Ae(this,vi,"f"))),It(this,vi,null);continue}const s=Ae(this,vi,"f")!==null?i.preceding-1:i.preceding,o=lI(Ae(this,bi,"f").subarray(0,s));r.push(o),It(this,bi,Ae(this,bi,"f").subarray(i.index)),It(this,vi,null)}return r}flush(){return Ae(this,bi,"f").length?this.decode(`
`):[]}}bi=new WeakMap,vi=new WeakMap;Lx.NEWLINE_CHARS=new Set([`
`,"\r"]);Lx.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function tre(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function nre(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const sv={off:0,error:200,warn:300,info:400,debug:500},cI=(t,e,n)=>{if(t){if(Dne(sv,t))return t;Tr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(sv))}`)}};function op(){}function ry(t,e,n){return!e||sv[t]>sv[n]?op:e[t].bind(e)}const rre={error:op,warn:op,info:op,debug:op};let uI=new WeakMap;function Tr(t){const e=t.logger,n=t.logLevel??"off";if(!e)return rre;const r=uI.get(e);if(r&&r[0]===n)return r[1];const i={error:ry("error",e,n),warn:ry("warn",e,n),info:ry("info",e,n),debug:ry("debug",e,n)};return uI.set(e,[n,i]),i}const Zl=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var kd;class tl{constructor(e,n,r){this.iterator=e,kd.set(this,void 0),this.controller=n,It(this,kd,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Tr(r):console;async function*o(){if(i)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of ire(e,n))if(!a){if(c.data.startsWith("[DONE]")){a=!0;continue}if(c.event===null){let h;try{h=JSON.parse(c.data)}catch(f){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),f}if(h&&h.error)throw new yr(void 0,h.error,void 0,e.headers);yield h}}a=!0}catch(c){if(hC(c))return;throw c}finally{a||n.abort()}}return new tl(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new Lx,c=O9(e);for await(const h of c)for(const f of a.decode(h))yield f;for(const h of a.flush())yield h}async function*o(){if(i)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of s())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(hC(c))return;throw c}finally{a||n.abort()}}return new tl(o,n,r)}[(kd=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new tl(()=>i(e),this.controller,Ae(this,kd,"f")),new tl(()=>i(n),this.controller,Ae(this,kd,"f"))]}toReadableStream(){const e=this;let n;return R9({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=xE(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}}async function*ire(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _t("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _t("Attempted to iterate over a response with no body");const n=new ore,r=new Lx,i=O9(t.body);for await(const s of sre(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*sre(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?xE(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=nre(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class ore{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=are(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function are(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}var Fs,qa,sS,oS,iy,hI;class ov extends Zne{constructor(){super(...arguments),Fs.add(this),qa.set(this,void 0)}get currentChatCompletionSnapshot(){return Ae(this,qa,"f")}static fromReadableStream(e){const n=new ov;return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new ov;return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ae(this,Fs,"m",sS).call(this);const s=await e.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)Ae(this,Fs,"m",oS).call(this,o);if(s.controller.signal?.aborted)throw new Sc;return this._addChatCompletion(Ae(this,Fs,"m",iy).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Ae(this,Fs,"m",sS).call(this),this._connected();const i=tl.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(Ae(this,Fs,"m",iy).call(this)),Ae(this,Fs,"m",oS).call(this,o),s=o.id;if(i.controller.signal?.aborted)throw new Sc;return this._addChatCompletion(Ae(this,Fs,"m",iy).call(this))}[(qa=new WeakMap,Fs=new WeakSet,sS=function(){this.ended||It(this,qa,void 0)},oS=function(n){if(this.ended)return;const r=Ae(this,Fs,"m",hI).call(this,n);this._emit("chunk",n,r);const i=n.choices[0]?.delta?.content,s=r.choices[0]?.message;i!=null&&s?.role==="assistant"&&s?.content&&this._emit("content",i,s.content)},iy=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");const n=Ae(this,qa,"f");if(!n)throw new _t("request ended without sending any chunks");return It(this,qa,void 0),lre(n)},hI=function(n){var r,i,s,o,a;let c=Ae(this,qa,"f");const{choices:h,...f}=n;c?Object.assign(c,f):c=It(this,qa,{...f,choices:[]});for(const{delta:d,finish_reason:m,index:y,logprobs:b=null,...w}of n.choices){let S=c.choices[y];if(S||(S=c.choices[y]={finish_reason:m,index:y,message:{},logprobs:{token_ids:[],token_logprobs:[],tokens:[]},...w}),b&&(console.log({logprobs:b}),S.logprobs||(S.logprobs={token_ids:[],token_logprobs:[],tokens:[]}),(r=S.logprobs).token_ids??(r.token_ids=[]),S.logprobs.token_ids.push(d.token_id??null),(i=S.logprobs).token_logprobs??(i.token_logprobs=[]),S.logprobs.token_logprobs.push(b??null),(s=S.logprobs).tokens??(s.tokens=[]),S.logprobs.tokens.push(d.content??null)),m&&(S.finish_reason=m),Object.assign(S,w),!d)continue;const{content:_,function_call:A,role:k,tool_calls:P,...M}=d;if(Object.assign(S.message,M),_&&(S.message.content=(S.message.content||"")+_),k&&(S.message.role=k),A&&(S.message.function_call?(A.name&&(S.message.function_call.name=A.name),A.arguments&&((o=S.message.function_call).arguments??(o.arguments=""),S.message.function_call.arguments+=A.arguments)):S.message.function_call=A),P){S.message.tool_calls||(S.message.tool_calls=[]);for(const{index:O,id:L,type:N,function:z,...j}of P){const U=(a=S.message.tool_calls)[O]??(a[O]={});Object.assign(U,j),L&&(U.id=L),N&&(U.type=N),z&&(U.function??(U.function={arguments:""})),z?.name&&(U.function.name=z.name),z?.arguments&&(U.function.arguments+=z.arguments)}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tl(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function lre(t){const{id:e,choices:n,created:r,model:i,system_fingerprint:s,...o}=t;return{...o,id:e,choices:n.map(({message:a,finish_reason:c,index:h,logprobs:f,...d})=>{if(!c)throw new _t(`missing finish_reason for choice ${h}`);const{content:m=null,function_call:y,tool_calls:b,...w}=a,S=a.role;if(!S)throw new _t(`missing role for choice ${h}`);if(y){const{arguments:_,name:A}=y;if(_==null)throw new _t(`missing function_call.arguments for choice ${h}`);if(!A)throw new _t(`missing function_call.name for choice ${h}`);return{...d,message:{content:m,function_call:{arguments:_,name:A},role:S},finish_reason:c,index:h,logprobs:f}}return b?{...d,index:h,finish_reason:c,logprobs:f,message:{...w,role:S,content:m,tool_calls:b.map((_,A)=>{const{function:k,type:P,id:M,...O}=_,{arguments:L,name:N,...z}=k||{};if(M==null)throw new _t(`missing choices[${h}].tool_calls[${A}].id
${sy(t)}`);if(P==null)throw new _t(`missing choices[${h}].tool_calls[${A}].type
${sy(t)}`);if(N==null)throw new _t(`missing choices[${h}].tool_calls[${A}].function.name
${sy(t)}`);if(L==null)throw new _t(`missing choices[${h}].tool_calls[${A}].function.arguments
${sy(t)}`);return{...O,id:M,type:P,function:{...z,name:N,arguments:L}}})}}:{...d,message:{...w,content:m,role:S},finish_reason:c,index:h,logprobs:f}}),created:r,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}}}function sy(t){return JSON.stringify(t)}let U9=class extends Qn{create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}stream(e,n){return ov.createChatCompletion(this._client.chat.completions,e,n)}};class wE extends Qn{constructor(){super(...arguments),this.completions=new U9(this._client)}}wE.Completions=U9;class q9 extends Qn{list(e){return this._client.get("/tci/sessions",e)}}class SE extends Qn{constructor(){super(...arguments),this.sessions=new q9(this._client)}execute(e,n){return this._client.post("/tci/execute",{body:e,...n})}}SE.Sessions=q9;class W9 extends Qn{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class G9 extends Qn{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}class K9 extends Qn{create(e,n){return this._client.post("/endpoints",{body:e,...n})}retrieve(e,n){return this._client.get(Gi`/endpoints/${e}`,n)}update(e,n,r){return this._client.patch(Gi`/endpoints/${e}`,{body:n,...r})}list(e={},n){return this._client.get("/endpoints",{query:e,...n})}delete(e,n){return this._client.delete(Gi`/endpoints/${e}`,{...n,headers:gh([{Accept:"*/*"},n?.headers])})}}class Y9 extends Qn{retrieve(e,n){return this._client.get(Gi`/files/${e}`,n)}list(e){return this._client.get("/files",e)}delete(e,n){return this._client.delete(Gi`/files/${e}`,n)}content(e,n){return this._client.get(Gi`/files/${e}/content`,{...n,headers:gh([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}upload(e){throw"please use together-ai/lib/upload"}}class X9 extends Qn{create(e,n){return this._client.post("/fine-tunes",{body:e,...n})}retrieve(e,n){return this._client.get(Gi`/fine-tunes/${e}`,n)}list(e){return this._client.get("/fine-tunes",e)}cancel(e,n){return this._client.post(Gi`/fine-tunes/${e}/cancel`,n)}download(e,n){return this._client.get("/finetune/download",{query:e,...n})}listEvents(e,n){return this._client.get(Gi`/fine-tunes/${e}/events`,n)}retrieveCheckpoints(e,n){return this._client.get(Gi`/fine-tunes/${e}/checkpoints`,n)}}class J9 extends Qn{list(e={},n){return this._client.get("/hardware",{query:e,...n})}}class Q9 extends Qn{create(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Z9 extends Qn{retrieve(e,n){return this._client.get(Gi`/jobs/${e}`,n)}list(e){return this._client.get("/jobs",e)}}class e$ extends Qn{list(e){return this._client.get("/models",e)}upload(e,n){return this._client.post("/models",{body:e,...n})}}async function cre(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{if(e.options.stream)return Tr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):tl.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type")?.split(";")[0]?.trim();return c?.includes("application/json")||c?.endsWith("+json")?await n.json():await n.text()})();return Tr(t).debug(`[${r}] response parsed`,Zl({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}var ap;class _E extends Promise{constructor(e,n,r=cre){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,ap.set(this,void 0),It(this,ap,e)}_thenUnwrap(e){return new _E(Ae(this,ap,"f"),this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Ae(this,ap,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ap=new WeakMap;var ure={};const aS=t=>{if(typeof globalThis.process<"u")return ure?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var SC,CE,bb,t$;class pt{constructor({baseURL:e=aS("TOGETHER_BASE_URL"),apiKey:n=aS("TOGETHER_API_KEY"),...r}={}){if(SC.add(this),bb.set(this,void 0),this.chat=new wE(this),this.completions=new W9(this),this.embeddings=new G9(this),this.files=new Y9(this),this.fineTune=new X9(this),this.codeInterpreter=new SE(this),this.images=new Q9(this),this.audio=new Dx(this),this.models=new e$(this),this.jobs=new Z9(this),this.endpoints=new K9(this),this.hardware=new J9(this),this.batches=new V9(this),n===void 0)throw new _t("The TOGETHER_API_KEY environment variable is missing or empty; either provide it, or instantiate the Together client with an apiKey option, like new Together({ apiKey: 'My API Key' }).");const i={apiKey:n,...r,baseURL:e||"https://api.together.xyz/v1"};this.baseURL=i.baseURL,this.timeout=i.timeout??CE.DEFAULT_TIMEOUT,this.logger=i.logger??console;const s="warn";this.logLevel=s,this.logLevel=cI(i.logLevel,"ClientOptions.logLevel",this)??cI(aS("TOGETHER_LOG"),"process.env['TOGETHER_LOG']",this)??s,this.fetchOptions=i.fetchOptions,this.maxRetries=i.maxRetries??5,this.fetch=i.fetch??Fne(),It(this,bb,Hne),this._options=i,this.apiKey=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,...e})}rerank(e,n){return this.post("/rerank",{body:e,...n})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return gh([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new _t(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ku}`}defaultIdempotencyKey(){return`stainless-node-retry-${v9()}`}makeStatusError(e,n,r,i){return yr.generate(e,n,r,i)}buildURL(e,n,r){const i=!Ae(this,SC,"m",t$).call(this)&&r||this.baseURL,s=One(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Pne(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new _E(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:c}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Tr(this).debug(`[${h}] sending request`,Zl({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),i.signal?.aborted)throw new Sc;const m=new AbortController,y=await this.fetchWithTimeout(a,o,c,m).catch(fC),b=Date.now();if(y instanceof Error){const S=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new Sc;const _=hC(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Tr(this).info(`[${h}] connection ${_?"timed out":"failed"} - ${S}`),Tr(this).debug(`[${h}] connection ${_?"timed out":"failed"} (${S})`,Zl({retryOfRequestLogID:r,url:a,durationMs:b-d,message:y.message})),this.retryRequest(i,n,r??h);throw Tr(this).info(`[${h}] connection ${_?"timed out":"failed"} - error; no more retries left`),Tr(this).debug(`[${h}] connection ${_?"timed out":"failed"} (error; no more retries left)`,Zl({retryOfRequestLogID:r,url:a,durationMs:b-d,message:y.message})),_?new x9:new Px({cause:y})}const w=`[${h}${f}] ${o.method} ${a} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${b-d}ms`;if(!y.ok){const S=await this.shouldRetry(y);if(n&&S){const O=`retrying, ${n} attempts remaining`;return await zne(y.body),Tr(this).info(`${w} - ${O}`),Tr(this).debug(`[${h}] response error (${O})`,Zl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:b-d})),this.retryRequest(i,n,r??h,y.headers)}const _=S?"error; no more retries left":"error; not retryable";Tr(this).info(`${w} - ${_}`);const A=await y.text().catch(O=>fC(O).message),k=Ine(A),P=k?void 0:A;throw Tr(this).debug(`[${h}] response error (${_})`,Zl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:P,durationMs:Date.now()-d})),this.makeStatusError(y.status,k,P,y.headers)}return Tr(this).info(w),Tr(this).debug(`[${h}] response start`,Zl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:b-d})),{response:y,options:i,controller:m,requestLogID:h,retryOfRequestLogID:r,startTime:d}}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i?.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(s=c)}const a=i?.get("retry-after");if(a&&!s){const c=parseFloat(a);Number.isNaN(c)?s=Date.parse(a)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Nne(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(1*Math.pow(2,s),10),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,c=this.buildURL(s,o,a);"timeout"in r&&Lne("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=gh([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Vne()},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=gh([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:M9(e)}:Ae(this,bb,"f").call(this,{body:e,headers:r})}}CE=pt,bb=new WeakMap,SC=new WeakSet,t$=function(){return this.baseURL!=="https://api.together.xyz/v1"};pt.Together=CE;pt.DEFAULT_TIMEOUT=6e4;pt.TogetherError=_t;pt.APIError=yr;pt.APIConnectionError=Px;pt.APIConnectionTimeoutError=x9;pt.APIUserAbortError=Sc;pt.NotFoundError=C9;pt.ConflictError=A9;pt.RateLimitError=E9;pt.BadRequestError=w9;pt.AuthenticationError=S9;pt.InternalServerError=T9;pt.PermissionDeniedError=_9;pt.UnprocessableEntityError=k9;pt.toFile=Yne;pt.Chat=wE;pt.Completions=W9;pt.Embeddings=G9;pt.Files=Y9;pt.FineTuneResource=X9;pt.CodeInterpreter=SE;pt.Images=Q9;pt.Audio=Dx;pt.Models=e$;pt.Jobs=Z9;pt.Endpoints=K9;pt.Hardware=J9;pt.Batches=V9;const hre=t=>t.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:{type:"object",...e.inputSchema}}})),lS=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"||n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?i.text:i.type==="file"?`File: ${JSON.parse(i.mimeType).path.split("/").pop()}
File content:
${i.data}`:"").filter(i=>i!=="").join(`

`);e.push({role:"user",content:r})}else{let r=typeof n.content=="string"?n.content:"";const i=[],s=[];let o=0;const a=n.content;typeof a!="string"&&typeof r!="string"&&a.forEach(h=>{if(h.type==="text"&&(r+=h.text),h.type==="tool-call"){h.result&&i.push({role:"tool",content:h.result,tool_call_id:h.toolCallId}),s.push({id:h.toolCallId,index:o++,type:"function",function:{arguments:h.argsText??"",name:h.toolName}});return}});const c={role:"assistant",content:r};s.length&&(c.tool_calls=s),e.push(c),i.length&&e.push(...i)}}),e},fre=(t,e,n)=>{if(!e.delta.content)return t;let r=po(t);const i=r.content;if(typeof i=="string")return r;const s=i[i.length-1];if((!s||n)&&typeof t.content!="string"&&(r={...r,content:[...i,{type:"text",text:e.delta.content}]}),s&&typeof s!="string"&&typeof i!="string"&&s.type==="text"){const o=s.text+e.delta.content,a=po({...s,text:o});r={...r,content:[...i.slice(0,-1),a]}}return r},dre=(t,e)=>{let n=po(t);if(!e.delta.tool_calls||typeof n.content=="string")return n;const r=e.delta.tool_calls[0],i=n.content[n.content.length-1];if(!i||i?.type!=="tool-call"){const s={type:"tool-call",args:{},argsText:r?.function?.arguments??"",toolName:r?.function?.name??"",toolCallId:r?.id??""};n={...n,content:[...n.content,s]}}else{const s=i,o=s.argsText+(r?.function?.arguments??""),a=s.toolName||r?.function?.name||"",c=s.toolCallId||r?.id||"",h={...s,args:{},argsText:o,toolName:a,toolCallId:c};n={...n,content:[...n.content.slice(0,-1),h]}}return n};class pre{modelKey="";systemPrompt="";apiKey;url;provider;prevMessages=[];tools=[];client;stopStream=!1;constructor(){}setProvider=e=>{this.provider=e,this.client=new pt({apiKey:e.key,baseURL:e.baseUrl}),e.key&&this.setApiKey(e.key),e.baseUrl&&this.setUrl(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setApiKey=e=>{this.apiKey=e,this.client&&(this.client.apiKey=e)};setUrl=e=>{this.url=e,this.client&&(this.client.baseURL=e)};setPrevMessages=e=>{this.prevMessages=lS(e)};setTools=e=>{this.tools=hre(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=lS(e),s={role:"system",content:this.systemPrompt},o=await this.client.chat.completions.create({messages:[s,...this.prevMessages,...i],model:this.modelKey,tools:this.tools,stream:!0,max_tokens:2048});this.prevMessages.push(...i);let a=n&&r?po(r):{role:"assistant",content:[]},c=!1;for await(const h of o){if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(h.choices.forEach(d=>{if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(!c){if(d.finish_reason){c=!0;const m=n?{...a,content:a.content.slice(r?.content.length??0)}:a,y=lS([m]);this.prevMessages.push(...y);return}d.delta.content&&(a=fre(a,d,n)),d.delta.tool_calls&&typeof a.content!="string"&&(a=dre(a,d))}}),c){yield{isEnd:!0,responseMessage:a};continue}else yield a}}catch(i){console.log(i),yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r={role:"tool",content:n.result||"",tool_call_id:n.toolCallId};return this.prevMessages.push(r),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.stopStream=!0};getName=()=>"TogetherAI";getBaseUrl=()=>"https://api.together.xyz/v1";checkProvider=async e=>{const n=new pt({baseURL:e.url,apiKey:e.apiKey});try{return await n.models.list(),!0}catch(r){if(console.log(r),r.status===401)return{field:"key",message:"Invalid API Key"};if(e.apiKey)return{field:"url",message:"Invalid URL"}}return{field:"key",message:"Empty key"}};getProviderModels=async e=>(await new pt({baseURL:e.url,apiKey:e.apiKey}).models.list()).filter(i=>i.type==="chat").map(i=>({id:i.id,name:i.display_name??i.id,provider:"openai"}))}const fI=new pre,mre=`You are an AI assistant with access to a set of MCP tools.
Your default behavior is to act as a helpful, conversational LLM assistant: answer questions, explain concepts, brainstorm, or chat naturally.
Only call a tool when the users request clearly indicates the need for it (e.g., "search", "open URL", "analyze file", "plot data", etc.).
If the users intent is ambiguous, respond conversationally instead of calling a tool.
Do not push the user toward tools unnecessarily.
When you do use a tool, explain in natural language what youre doing if appropriate.
Otherwise, behave as if you are a standalone LLM chat without tools`;let gre=class{currentProvider;currentProviderInfo;currentProviderType;anthropicProvider;ollamaProvider;openaiProvider;togetherProvider;constructor(){this.anthropicProvider=vL,this.ollamaProvider=_L,this.openaiProvider=JL,this.togetherProvider=fI}setCurrentProvider=e=>{if(!e){this.currentProvider=void 0,this.currentProviderInfo=void 0,this.currentProviderType=void 0;return}switch(this.currentProviderInfo=e,e.type){case"anthropic":this.currentProvider=vL,this.currentProviderType="anthropic";break;case"ollama":this.currentProvider=_L,this.currentProviderType="ollama";break;case"openai":this.currentProvider=JL,this.currentProviderType="openai";break;case"together":this.currentProvider=fI,this.currentProviderType="together";break;default:this.currentProvider=void 0,this.currentProviderType=void 0}this.currentProvider&&(this.currentProvider.setProvider(e),this.currentProvider.setSystemPrompt(mre))};setCurrentProviderModel=e=>{this.currentProvider&&this.currentProvider.setModelKey(e)};setCurrentProviderTools=e=>{this.currentProvider&&this.currentProvider.setTools(e)};setCurrentProviderPrevMessages=e=>{this.currentProvider&&this.currentProvider.setPrevMessages(e)};getCurrentProviderModel=()=>{if(this.currentProvider)return this.currentProvider.modelKey};sendMessage=e=>{if(this.currentProvider)return this.currentProvider.sendMessage(e)};sendMessageAfterToolCall=e=>{if(this.currentProvider)return this.currentProvider.sendMessageAfterToolCall(e)};stopMessage=()=>{this.currentProvider&&this.currentProvider.stopMessage()};getProvidersInfo=()=>{const e={type:"anthropic",name:this.anthropicProvider.getName(),baseUrl:this.anthropicProvider.getBaseUrl()},n={type:"ollama",name:this.ollamaProvider.getName(),baseUrl:this.ollamaProvider.getBaseUrl()},r={type:"openai",name:this.openaiProvider.getName(),baseUrl:this.openaiProvider.getBaseUrl()},i={type:"together",name:this.togetherProvider.getName(),baseUrl:this.togetherProvider.getBaseUrl()};return[e,n,r,i]};getProviderInfo=e=>e==="anthropic"?{type:e,name:this.anthropicProvider.getName(),baseUrl:this.anthropicProvider.getBaseUrl()}:e==="ollama"?{type:e,name:this.ollamaProvider.getName(),baseUrl:this.ollamaProvider.getBaseUrl()}:e==="openai"?{type:e,name:this.openaiProvider.getName(),baseUrl:this.openaiProvider.getBaseUrl()}:e==="together"?{type:e,name:this.togetherProvider.getName(),baseUrl:this.togetherProvider.getBaseUrl()}:{name:"",baseUrl:""};checkNewProvider=(e,n)=>e==="anthropic"?this.anthropicProvider.checkProvider(n):e==="ollama"?this.ollamaProvider.checkProvider(n):e==="openai"?this.openaiProvider.checkProvider(n):e==="together"?this.togetherProvider.checkProvider(n):!1;getProvidersModels=async e=>{const n=new Map,r=e.map(o=>o.type==="anthropic"?this.anthropicProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):o.type==="ollama"?this.ollamaProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):o.type==="openai"?this.openaiProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):o.type==="together"?this.togetherProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):null).filter(o=>o!==null),i=await Promise.allSettled(r);let s=0;return e.forEach(o=>{if(o.type==="anthropic"||o.type==="ollama"||o.type==="openai"||o.type==="together"){const a=i[s];a.status==="fulfilled"&&a.value&&a.value.length>0&&n.set(o.name,a.value),s++}}),n}};const Vt=new gre;class yre{dbName="ChatHistory";version=1;db=null;async init(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>n(r.error),r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(s.objectStoreNames.contains("threads")||s.createObjectStore("threads",{keyPath:"threadId"}).createIndex("updatedAt","updatedAt",{unique:!1}),!s.objectStoreNames.contains("messages")){const o=s.createObjectStore("messages",{keyPath:"id"});o.createIndex("threadId","threadId",{unique:!1}),o.createIndex("timestamp","timestamp",{unique:!1})}}})}getDB(){if(!this.db)throw new Error("Database not initialized");return this.db}async close(){this.db&&(this.db.close(),this.db=null)}}const ks=new yre,bre=()=>ks.init(),dI=async(t,e,n)=>{const r=ks.getDB(),i={id:e,threadId:t,message:n,timestamp:Date.now()};return new Promise((s,o)=>{const h=r.transaction(["messages"],"readwrite").objectStore("messages").put(i);h.onerror=()=>o(h.error),h.onsuccess=()=>s()})},n$=async(t,e)=>{const n=ks.getDB();return new Promise((r,i)=>{const c=n.transaction(["messages"],"readonly").objectStore("messages").index("threadId").getAll(IDBKeyRange.only(t));c.onerror=()=>i(c.error),c.onsuccess=()=>{let h=c.result.sort((f,d)=>f.timestamp-d.timestamp).map(f=>f.message);r(h)}})},vre=async(t,e)=>{const n=ks.getDB();return new Promise((r,i)=>{const o=n.transaction(["messages"],"readwrite").objectStore("messages"),a=o.get(t);a.onerror=()=>i(a.error),a.onsuccess=()=>{const c=a.result;if(!c){i(new Error("Message not found"));return}const h={...c,message:e,timestamp:Date.now()},f=o.put(h);f.onerror=()=>i(f.error),f.onsuccess=()=>r()}})},xre=async t=>{const e=ks.getDB();return new Promise((n,r)=>{const a=e.transaction(["messages"],"readwrite").objectStore("messages").index("threadId").openCursor(IDBKeyRange.only(t));a.onsuccess=c=>{const h=c.target.result;h?(h.delete(),h.continue()):n()},a.onerror=()=>r(a.error)})},Kh=na((t,e)=>({messages:[],isStreamRunning:!1,isRequestRunning:!1,attachmentFiles:[],fetchPrevMessages:async n=>{const r=await n$(n);t({messages:r}),Vt.setCurrentProviderPrevMessages(r)},setIsStreamRunning:n=>{t({isStreamRunning:n})},setIsRequestRunning:n=>{t({isRequestRunning:n})},addMessage:n=>{const r=e();if(r.messages.length&&r.messages[r.messages.length-1].status?.type==="incomplete"){t({messages:[...r.messages.slice(0,-1),{...n}]});return}t({messages:[...r.messages,n]})},updateLastMessage:n=>{const r=e();t({messages:[...r.messages.slice(0,-1),n]})},addAttachmentFile:n=>{t({attachmentFiles:[...e().attachmentFiles,n]})},clearAttachmentFiles:()=>{t({attachmentFiles:[]})},stopMessage:()=>{e().setIsStreamRunning(!1),Vt.stopMessage()}})),Bm=na(t=>({currentPage:"chat",setCurrentPage:e=>t({currentPage:e}),goToChat:()=>t({currentPage:"chat"}),goToSettings:()=>t({currentPage:"settings"})})),oy="providers",Ed="current-provider",cS="current-model",yh=100,vb=yh+2,Es=na()((t,e)=>({providers:(()=>{const n=localStorage.getItem(oy);return n?JSON.parse(n):[]})(),currentProvider:(()=>{const n=localStorage.getItem(Ed);if(!n)return null;const r=JSON.parse(n);Vt.setCurrentProvider(r);const i=Vt.checkNewProvider(r.type,{url:r.baseUrl,apiKey:r.key});if(i instanceof Promise)i.then(s=>{(typeof s!="boolean"||!s)&&localStorage.removeItem(Ed)}).catch(s=>{console.error("Provider validation error:",s),localStorage.removeItem(Ed)});else if(!i)return localStorage.removeItem(Ed),null;return r})(),providersModels:new Map,fetchProvidersModels:async()=>{const n=e().providers,r=await Vt.getProvidersModels(n);t({providersModels:r})},setCurrentProvider:n=>{t({currentProvider:n}),Vt.setCurrentProvider(n),localStorage.setItem(Ed,JSON.stringify(n))},addProvider:async n=>{if(e().providers.some(o=>o.name.toLowerCase()===n.name.toLowerCase()))return{field:"name",message:"Duplicate name"};const s=await Vt.checkNewProvider(n.type,{url:n.baseUrl,apiKey:n.key});return typeof s=="boolean"&&s?(t(o=>{const a=[...o.providers,n];return localStorage.setItem(oy,JSON.stringify(a)),{providers:a}}),!0):s},editProvider:async(n,r)=>{if(e().providers.some(a=>a.name.toLowerCase()===n.name.toLowerCase()&&a.baseUrl!==n.baseUrl&&a.key!==n.key&&a.type!==n.type))return{field:"name",message:"Duplicate name"};const o=await Vt.checkNewProvider(n.type,{url:n.baseUrl,apiKey:n.key});return typeof o=="boolean"&&o?(t(a=>{const c=a.providers.map(h=>h.name===r?n:h);return localStorage.setItem(oy,JSON.stringify(c)),{providers:c}}),!0):o},deleteProvider:async n=>{t(r=>{const i=r.providers.filter(s=>s.name!==n.name);return r.currentProvider?.name===n.name&&(r.currentProvider=null,Vt.setCurrentProvider()),localStorage.setItem(oy,JSON.stringify(i)),{providers:i}})}})),pI="allowAlwaysDesktopTools";class wre{tools;allowAlways=!1;constructor(){this.tools=[],this.initTools(),this.allowAlways=localStorage.getItem(pI)==="true"}setAllowAlways=e=>{this.allowAlways=e,localStorage.setItem(pI,e.toString())};getAllowAlways=()=>this.allowAlways;setTools=e=>{this.tools=e};getTools=()=>[...this.tools];callTools=async(e,n)=>{const r={...n};return await window.AscDesktopEditor?.callToolFunction(e,JSON.stringify(r))};initTools=()=>{try{const e=window.AscDesktopEditor?.getToolFunctions()??"",n=JSON.parse(e).map(r=>({name:r.name,description:r.description,inputSchema:r.parameters}));this.setTools(n)}catch(e){console.error("Error parsing tools:",e)}}}const mI=t=>{let e="";const n={};let r="";return Object.entries(t).map(([s,o])=>{s=="env"&&Object.entries(o).forEach(([a,c])=>{n[a]=c}),s==="command"&&(e=o),s=="args"&&(r=o.join(" "))}),{commandLine:e+" "+r,env:n}},gI="allowAlwaysCustomServers";class Sre{customServers;startedCustomServers;initedCustomServers;stopedCustomServers;customServersProcesses;customServersLogs;tools;constructor(){this.customServers={},this.startedCustomServers={},this.initedCustomServers={},this.customServersProcesses={},this.customServersLogs={},this.tools={},this.stopedCustomServers=[]}checkAllowAlways=e=>localStorage.getItem(gI+e)==="true";setAllowAlways=(e,n)=>{localStorage.setItem(gI+n,e.toString())};onProcess=(e,n,r)=>{try{const i=JSON.parse(r);i.jsonrpc==="2.0"&&i.id&&i.id.includes("init-"+e)&&(this.initedCustomServers[e]=!0,this.stopedCustomServers=this.stopedCustomServers.filter(s=>s!==e)),i.jsonrpc==="2.0"&&i.id&&i.id.includes("tools-"+e)&&(this.tools[e]=i.result.tools)}catch{}switch(n){case 0:{this.customServersLogs[e].push(`${new Date().toLocaleString()}: ${r}
`);break}case 1:{this.customServersLogs[e].push(`${new Date().toLocaleString()}: ${r}
`);break}case 2:{this.customServersLogs[e].push(`${new Date().toLocaleString()}: [stop] ${r}
`),this.stopedCustomServers.push(e);break}}};setCustomServers=e=>{this.customServers=e.mcpServers};startCustomServers=()=>{const e=[];Object.entries(this.customServers).forEach(([n,r])=>{e.push(n);const{commandLine:i,env:s}=mI(r);if(this.startedCustomServers[n]&&this.startedCustomServers[n]===i)return;this.customServersProcesses[n]&&(this.customServersProcesses[n].end(),console.log("stop server",n)),this.customServersLogs[n]=[`${new Date().toLocaleString()}: ${i}
`];const o=new window.ExternalProcess(i,s);o.onprocess=this.onProcess.bind(this,n),this.customServersProcesses[n]=o,o.start(),this.initCustomServer(n)}),Object.keys(this.customServersProcesses).forEach(n=>{e.includes(n)||this.deleteCustomServer(n)})};restartCustomServer=e=>{Object.entries(this.customServers).forEach(([n,r])=>{if(e!==n)return;const{commandLine:i,env:s}=mI(r);this.customServersLogs[e]=[`${new Date().toLocaleString()}: ${i}
`],this.tools[e]=[];const o=new window.ExternalProcess(i,s);o.onprocess=this.onProcess.bind(this,e),this.customServersProcesses[e]=o,o.start(),this.initCustomServer(e)})};deleteCustomServer=e=>{this.customServersProcesses[e]&&(this.customServersProcesses[e].end(),delete this.customServersProcesses[e]),this.customServersLogs[e]&&delete this.customServersLogs[e],this.startedCustomServers[e]&&delete this.startedCustomServers[e],this.customServers[e]&&delete this.customServers[e],this.tools[e]&&delete this.tools[e]};initCustomServer=e=>{const n=this.customServersProcesses[e];if(!n)return;const r=setInterval(()=>{if(this.initedCustomServers[e]){clearInterval(r),this.getToolsFromMCP(e);return}try{const i={jsonrpc:"2.0",id:`init-${e}`,method:"initialize",params:{protocolVersion:"2024-11-05",capabilities:{tools:{}},clientInfo:{name:"ai-agent",version:"1.0.0"}}},o=`${JSON.stringify(i)}
`;n.stdin(o)}catch(i){console.error(`Error initializing custom server ${e}:`,i)}},1e3)};getToolsFromMCP=async e=>{const n=this.customServersProcesses[e];try{const r={jsonrpc:"2.0",id:`tools-${e}-${Date.now()}`,method:"tools/list",params:{}},s=`${JSON.stringify(r)}
`;n.stdin(s)}catch(r){console.error(`Error getting tools from MCP server ${e}:`,r)}};callToolFromMCP=async(e,n,r)=>{const i=this.customServersProcesses[e];if(!i)throw new Error(`MCP server ${e} is not running`);if(!(this.tools[e]||[]).find(a=>a.name===n))throw new Error(`Tool ${n} not found on server ${e}`);try{const a={jsonrpc:"2.0",id:`call-${e}-${n}-${Date.now()}`,method:"tools/call",params:{name:n,arguments:r}},h=`${JSON.stringify(a)}
`;return i.stdin(h),new Promise((f,d)=>{const m=setTimeout(()=>{d(new Error(`Timeout waiting for tool response from ${e}`))},3e4),y=i.onprocess;i.onprocess=(b,w)=>{if(y(b,w),b===0)try{const S=JSON.parse(w);S.id&&S.id.startsWith(`call-${e}-${n}`)&&(i.onprocess=y,clearTimeout(m),S.error?(console.error("MCP tool error response:",S.error),d(new Error(`MCP tool error (${S.error.code}): ${S.error.message}`))):(console.log("MCP tool success response:",S.result),f(JSON.stringify(S.result))))}catch{}}})}catch(a){throw new Error(`Error calling MCP tool ${n} on server ${e}: ${a}`)}};getTools=()=>this.tools}const yI="webSearchProviderData";let _re=class{tools;webSearchData=null;constructor(){this.tools=[];const e=localStorage.getItem(yI);e?this.webSearchData=JSON.parse(e):this.webSearchData=null,this.initTools()}setAllowAlways=()=>{};getAllowAlways=()=>!0;setWebSearchData=e=>{this.webSearchData=e,localStorage.setItem(yI,e?JSON.stringify(e):""),this.initTools()};getWebSearchData=()=>this.webSearchData;setTools=e=>{this.tools=e};getTools=()=>[...this.tools];webSearch=async e=>{if(this.webSearchData?.provider==="exa")try{const n=await new Promise(r=>{window.AscSimpleRequest.createRequest({url:"https://api.exa.ai/search",method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.webSearchData.key},body:JSON.stringify({query:e.query,text:!0,numResults:5,livecrawl:"preferred"}),complete:function(i){const s=JSON.parse(i.responseText).results;r({data:s})},error:function(i){console.log("Request failed with status:",i.statusCode),i.statusCode==-102&&(i.statusCode=404),r({error:i.statusCode,message:`Network error: ${i.statusCode}`})}})});return JSON.stringify(n)}catch(n){console.error("WebSearch error:",n)}return JSON.stringify(e)};webCrawling=async e=>{if(this.webSearchData?.provider==="exa")try{const n=await new Promise(r=>{window.AscSimpleRequest.createRequest({url:"https://api.exa.ai/contents",method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.webSearchData.key},body:JSON.stringify({urls:e.urls,text:!0}),complete:function(i){const s=JSON.parse(i.responseText).results;r({data:s})},error:function(i){console.log("Request failed with status:",i.statusCode),i.statusCode==-102&&(i.statusCode=404),r({error:i.statusCode,message:`Network error: ${i.statusCode}`})}})});return JSON.stringify(n)}catch(n){console.error(n)}return JSON.stringify(e)};callTools=async(e,n)=>{if(e==="web_search")return await this.webSearch(n);if(e==="web_crawling")return await this.webCrawling(n)};initTools=()=>{if(!this.webSearchData){this.setTools([]);return}this.setTools([{name:"web_search",description:"The search endpoint lets you intelligently search the web and extract contents from the results.",inputSchema:{query:{type:"string",description:"The query string for the search."}}},{name:"web_crawling",description:"Get the full page contents, summaries, and metadata for a list of URLs.",inputSchema:{urls:{type:"array",items:{type:"string"},description:"Array of URLs to crawl"}}}])};getWebSearchEnabled=()=>!!this.webSearchData},Cre=class{desktopEditorTool;customServers;webSearch;constructor(){this.desktopEditorTool=new wre,this.customServers=new Sre,this.webSearch=new _re}checkAllowAlways=e=>e==="desktop-editor"?this.desktopEditorTool.getAllowAlways():e==="web-search"?this.webSearch.getAllowAlways():this.customServers.checkAllowAlways(e);setAllowAlways=(e,n)=>{if(n==="desktop-editor"){this.desktopEditorTool.setAllowAlways(e);return}if(n==="web-search"){this.webSearch.setAllowAlways();return}this.customServers.setAllowAlways(e,n)};getTools=async()=>{const[e,n,r]=await Promise.all([this.desktopEditorTool.getTools(),this.webSearch.getTools(),this.customServers.getTools()]);return{"desktop-editor":e,"web-search":n,...r}};callTools=async(e,n,r)=>e==="desktop-editor"?this.desktopEditorTool.callTools(n,r):e==="web-search"?await this.webSearch.callTools(n,r):await this.customServers.callToolFromMCP(e,n,r);setCustomServers=e=>{this.customServers.setCustomServers(e)};startCustomServers=()=>{this.customServers.startCustomServers()};restartCustomServer=e=>{this.customServers.restartCustomServer(e)};deleteCustomServer=e=>{this.customServers.deleteCustomServer(e)};getCustomServers=()=>this.customServers.customServers;getCustomServersStoped=()=>this.customServers.stopedCustomServers;getCustomServersLogs=()=>this.customServers.customServersLogs;setWebSearchData=e=>{this.webSearch.setWebSearchData(e)};getWebSearchData=()=>this.webSearch.getWebSearchData();getWebSearchEnabled=()=>this.webSearch.getWebSearchEnabled()};const Nn=new Cre,ay="disabledTools",ly="mcpServers",vo=na((t,e)=>({servers:{},tools:[],disabledTools:{},manageToolData:void 0,webSearchEnabled:!1,initServers:()=>{const n=localStorage.getItem(ly);if(n){const r=JSON.parse(n);Nn.setCustomServers(r),Nn.startCustomServers()}},getTools:async()=>{const n=await Nn.getTools(),r=localStorage.getItem(ay),i=[],s={};let o=!1;if(r){const a=JSON.parse(r);Object.entries(n).map(([c,h])=>{if(c==="web-search"){if(s[c]=[...h],a["web-search"].length){t({webSearchEnabled:!1});return}const f=h.map(d=>({...d,name:`${c}_${d.name}`}));a[c]=[],i.push(...f),t({webSearchEnabled:!0}),o=!0;return}s[c]=h.map(f=>{a[c]||(a[c]=[]);const d=!a[c].includes(f.name);return(d&&o?i.length===vb:i.length===yh)?(a[c].push(f.name),{...f,enabled:!1}):(d&&i.push({...f,name:`${c}_${f.name}`}),{...f,enabled:d})})}),t({disabledTools:a})}else{const a={};let c=!1;Object.entries(n).map(([h,f])=>{if(a[h]=[],h==="web-search"){s[h]=[...f];const m=f.map(y=>({...y,name:`${h}_${y.name}`,enabled:!0}));i.push(...m),t({webSearchEnabled:!0}),c=!0;return}const d=f.map((m,y)=>i.length+y>=(c?vb:yh)?(a[h].push(m.name),{...m,enabled:!1}):{...m,enabled:!0});s[h]=d,i.push(...d.map(m=>({...m,name:`${h}_${m.name}`})))}),t({disabledTools:a})}t({tools:i,servers:s})},changeToolStatus:(n,r,i)=>{const s=e(),o=s.servers,a=o[n].find(c=>c.name===r);if(a){if(i){if(n==="web-search"){const h={...s.disabledTools,[n]:[]};t({disabledTools:h}),t({webSearchEnabled:!0}),t({servers:{...o,[n]:o[n].map(f=>({...f,enabled:!0}))}}),localStorage.setItem(ay,JSON.stringify(h));return}if(s.tools.length>=(s.webSearchEnabled?vb:yh))return;const c={...s.disabledTools,[n]:s.disabledTools[n].filter(h=>h!==r)};t({tools:[...s.tools,{...a,name:`${n}_${a.name}`}],disabledTools:c}),localStorage.setItem(ay,JSON.stringify(c))}else{const c=[...s.disabledTools[n],r],h={...s.disabledTools,[n]:c};let f=[];n==="web-search"?(h[n]=[...s.servers[n].map(d=>d.name)],t({webSearchEnabled:!1}),f=s.tools.filter(d=>!d.name.includes(n))):f=s.tools.filter(d=>d.name!==`${n}_${r}`),t({tools:f,disabledTools:h}),localStorage.setItem(ay,JSON.stringify(h))}t({servers:{...o,[n]:o[n].map(c=>c.name===r?{...c,enabled:i}:c)}})}},checkAllowAlways:n=>Nn.checkAllowAlways(n),setAllowAlways:(n,r)=>{Nn.setAllowAlways(n,r)},callTools:async(n,r)=>{const i=e(),s=n.split("_")[0],o=n.replace(s+"_","");if(!i.disabledTools[s].find(c=>c===o))return await Nn.callTools(s,o,r)},setManageToolData:n=>{t({manageToolData:n})},getConfig:()=>JSON.parse(localStorage.getItem(ly)||JSON.stringify({mcpServers:{}})),saveConfig:n=>{localStorage.setItem(ly,JSON.stringify(n)),Nn.setCustomServers(n),Nn.startCustomServers()},deleteCustomServer:n=>{Nn.deleteCustomServer(n);const r=e().getConfig();delete r.mcpServers[n],localStorage.setItem(ly,JSON.stringify(r))},getCustomServersLogs:()=>Nn.getCustomServersLogs(),getWebSearchEnabled:()=>Nn.getWebSearchEnabled()})),Are=(t,e,n,r)=>{const i=[n,{code:e,...r||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);pc(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...i):console?.warn&&console.warn(...i)},bI={},_C=(t,e,n,r)=>{pc(n)&&bI[n]||(pc(n)&&(bI[n]=new Date),Are(t,e,n,r))},r$=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},CC=(t,e,n)=>{t.loadNamespaces(e,r$(t,n))},vI=(t,e,n,r)=>{if(pc(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return CC(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,r$(t,r))},kre=(t,e,n={})=>!e.languages||!e.languages.length?(_C(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),pc=t=>typeof t=="string",Ere=t=>typeof t=="object"&&t!==null,Tre=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Rre={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Mre=t=>Rre[t],Ore=t=>t.replace(Tre,Mre);let AC={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Ore};const Pre=(t={})=>{AC={...AC,...t}},Dre=()=>AC;let i$;const Lre=t=>{i$=t},Ire=()=>i$,Nre={type:"3rdParty",init(t){Pre(t.options.react),Lre(t)}},Bre=E.createContext();class jre{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const $re=(t,e)=>{const n=E.useRef();return E.useEffect(()=>{n.current=t},[t,e]),n.current},s$=(t,e,n,r)=>t.getFixedT(e,n,r),Vre=(t,e,n,r)=>E.useCallback(s$(t,e,n,r),[t,e,n,r]),Ot=(t,e={})=>{const{i18n:n}=e,{i18n:r,defaultNS:i}=E.useContext(Bre)||{},s=n||r||Ire();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new jre),!s){_C(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const P=(O,L)=>pc(L)?L:Ere(L)&&pc(L.defaultValue)?L.defaultValue:Array.isArray(O)?O[O.length-1]:O,M=[P,{},!1];return M.t=P,M.i18n={},M.ready=!1,M}s.options.react?.wait&&_C(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Dre(),...s.options.react,...e},{useSuspense:a,keyPrefix:c}=o;let h=i||s.options?.defaultNS;h=pc(h)?[h]:h||["translation"],s.reportNamespaces.addUsedNamespaces?.(h);const f=(s.isInitialized||s.initializedStoreOnce)&&h.every(P=>kre(P,s,o)),d=Vre(s,e.lng||null,o.nsMode==="fallback"?h:h[0],c),m=()=>d,y=()=>s$(s,e.lng||null,o.nsMode==="fallback"?h:h[0],c),[b,w]=E.useState(m);let S=h.join();e.lng&&(S=`${e.lng}${S}`);const _=$re(S),A=E.useRef(!0);E.useEffect(()=>{const{bindI18n:P,bindI18nStore:M}=o;A.current=!0,!f&&!a&&(e.lng?vI(s,e.lng,h,()=>{A.current&&w(y)}):CC(s,h,()=>{A.current&&w(y)})),f&&_&&_!==S&&A.current&&w(y);const O=()=>{A.current&&w(y)};return P&&s?.on(P,O),M&&s?.store.on(M,O),()=>{A.current=!1,s&&P&&P?.split(" ").forEach(L=>s.off(L,O)),M&&s&&M.split(" ").forEach(L=>s.store.off(L,O))}},[s,S]),E.useEffect(()=>{A.current&&f&&w(m)},[s,c,f]);const k=[b,s,f];if(k.t=b,k.i18n=s,k.ready=f,f||!f&&!a)return k;throw new Promise(P=>{e.lng?vI(s,e.lng,h,()=>P()):CC(s,h,()=>P())})};function o$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=o$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function av(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=o$(t))&&(r&&(r+=" "),r+=e);return r}const xI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,wI=av,Fre=(t,e)=>n=>{var r;if(e?.variants==null)return wI(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(h=>{const f=n?.[h],d=s?.[h];if(f===null)return null;const m=xI(f)||xI(d);return i[h][m]}),a=n&&Object.entries(n).reduce((h,f)=>{let[d,m]=f;return m===void 0||(h[d]=m),h},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:d,className:m,...y}=f;return Object.entries(y).every(b=>{let[w,S]=b;return Array.isArray(S)?S.includes({...s,...a}[w]):{...s,...a}[w]===S})?[...h,d,m]:h},[]);return wI(t,o,c,n?.class,n?.className)},AE="-",zre=t=>{const e=Ure(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(AE);return a[0]===""&&a.length!==1&&a.shift(),a$(a,e)||Hre(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},a$=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?a$(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(AE);return e.validators.find(({validator:o})=>o(s))?.classGroupId},SI=/^\[(.+)\]$/,Hre=t=>{if(SI.test(t)){const e=SI.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Ure=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)kC(n[i],r,i,e);return r},kC=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:_I(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(qre(i)){kC(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{kC(o,_I(e,s),n,r)})})},_I=(t,e)=>{let n=t;return e.split(AE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qre=t=>t.isThemeGetter,Wre=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},EC="!",TC=":",Gre=TC.length,Kre=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,c=0,h;for(let b=0;b<i.length;b++){let w=i[b];if(o===0&&a===0){if(w===TC){s.push(i.slice(c,b)),c=b+Gre;continue}if(w==="/"){h=b;continue}}w==="["?o++:w==="]"?o--:w==="("?a++:w===")"&&a--}const f=s.length===0?i:i.substring(c),d=Yre(f),m=d!==f,y=h&&h>c?h-c:void 0;return{modifiers:s,hasImportantModifier:m,baseClassName:d,maybePostfixModifierPosition:y}};if(e){const i=e+TC,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},Yre=t=>t.endsWith(EC)?t.substring(0,t.length-1):t.startsWith(EC)?t.substring(1):t,Xre=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},Jre=t=>({cache:Wre(t.cacheSize),parseClassName:Kre(t),sortModifiers:Xre(t),...zre(t)}),Qre=/\s+/,Zre=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(Qre);let c="";for(let h=a.length-1;h>=0;h-=1){const f=a[h],{isExternal:d,modifiers:m,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:w}=n(f);if(d){c=f+(c.length>0?" "+c:c);continue}let S=!!w,_=r(S?b.substring(0,w):b);if(!_){if(!S){c=f+(c.length>0?" "+c:c);continue}if(_=r(b),!_){c=f+(c.length>0?" "+c:c);continue}S=!1}const A=s(m).join(":"),k=y?A+EC:A,P=k+_;if(o.includes(P))continue;o.push(P);const M=i(_,S);for(let O=0;O<M.length;++O){const L=M[O];o.push(k+L)}c=f+(c.length>0?" "+c:c)}return c};function eie(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=l$(e))&&(r&&(r+=" "),r+=n);return r}const l$=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=l$(t[r]))&&(n&&(n+=" "),n+=e);return n};function tie(t,...e){let n,r,i,s=o;function o(c){const h=e.reduce((f,d)=>d(f),t());return n=Jre(h),r=n.cache.get,i=n.cache.set,s=a,a(c)}function a(c){const h=r(c);if(h)return h;const f=Zre(c,n);return i(c,f),f}return function(){return s(eie.apply(null,arguments))}}const wn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},c$=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,u$=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nie=/^\d+\/\d+$/,rie=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iie=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sie=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,oie=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aie=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ju=t=>nie.test(t),tt=t=>!!t&&!Number.isNaN(Number(t)),Wa=t=>!!t&&Number.isInteger(Number(t)),uS=t=>t.endsWith("%")&&tt(t.slice(0,-1)),Fo=t=>rie.test(t),lie=()=>!0,cie=t=>iie.test(t)&&!sie.test(t),h$=()=>!1,uie=t=>oie.test(t),hie=t=>aie.test(t),fie=t=>!Re(t)&&!Me(t),die=t=>Yh(t,p$,h$),Re=t=>c$.test(t),Gl=t=>Yh(t,m$,cie),hS=t=>Yh(t,bie,tt),CI=t=>Yh(t,f$,h$),pie=t=>Yh(t,d$,hie),cy=t=>Yh(t,g$,uie),Me=t=>u$.test(t),Td=t=>Xh(t,m$),mie=t=>Xh(t,vie),AI=t=>Xh(t,f$),gie=t=>Xh(t,p$),yie=t=>Xh(t,d$),uy=t=>Xh(t,g$,!0),Yh=(t,e,n)=>{const r=c$.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Xh=(t,e,n=!1)=>{const r=u$.exec(t);return r?r[1]?e(r[1]):n:!1},f$=t=>t==="position"||t==="percentage",d$=t=>t==="image"||t==="url",p$=t=>t==="length"||t==="size"||t==="bg-size",m$=t=>t==="length",bie=t=>t==="number",vie=t=>t==="family-name",g$=t=>t==="shadow",xie=()=>{const t=wn("color"),e=wn("font"),n=wn("text"),r=wn("font-weight"),i=wn("tracking"),s=wn("leading"),o=wn("breakpoint"),a=wn("container"),c=wn("spacing"),h=wn("radius"),f=wn("shadow"),d=wn("inset-shadow"),m=wn("text-shadow"),y=wn("drop-shadow"),b=wn("blur"),w=wn("perspective"),S=wn("aspect"),_=wn("ease"),A=wn("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...P(),Me,Re],O=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],N=()=>[Me,Re,c],z=()=>[ju,"full","auto",...N()],j=()=>[Wa,"none","subgrid",Me,Re],U=()=>["auto",{span:["full",Wa,Me,Re]},Wa,Me,Re],W=()=>[Wa,"auto",Me,Re],X=()=>["auto","min","max","fr",Me,Re],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ie=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...N()],Y=()=>[ju,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],q=()=>[t,Me,Re],se=()=>[...P(),AI,CI,{position:[Me,Re]}],T=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",gie,die,{size:[Me,Re]}],ue=()=>[uS,Td,Gl],I=()=>["","none","full",h,Me,Re],pe=()=>["",tt,Td,Gl],Ee=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[tt,uS,AI,CI],He=()=>["","none",b,Me,Re],Pt=()=>["none",tt,Me,Re],Kt=()=>["none",tt,Me,Re],Yt=()=>[tt,Me,Re],er=()=>[ju,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Fo],breakpoint:[Fo],color:[lie],container:[Fo],"drop-shadow":[Fo],ease:["in","out","in-out"],font:[fie],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Fo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Fo],shadow:[Fo],spacing:["px",tt],text:[Fo],"text-shadow":[Fo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ju,Re,Me,S]}],container:["container"],columns:[{columns:[tt,Re,Me,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[Wa,"auto",Me,Re]}],basis:[{basis:[ju,"full","auto",a,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,ju,"auto","initial","none",Re]}],grow:[{grow:["",tt,Me,Re]}],shrink:[{shrink:["",tt,Me,Re]}],order:[{order:[Wa,"first","last","none",Me,Re]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":X()}],"auto-rows":[{"auto-rows":X()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...ie(),"normal"]}],"justify-self":[{"justify-self":["auto",...ie()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...ie(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ie(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...ie(),"baseline"]}],"place-self":[{"place-self":["auto",...ie()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[a,"screen",...Y()]}],"min-w":[{"min-w":[a,"screen","none",...Y()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",n,Td,Gl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Me,hS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",uS,Re]}],"font-family":[{font:[mie,Re,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Me,Re]}],"line-clamp":[{"line-clamp":[tt,"none",Me,hS]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",Me,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",Me,Gl]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[tt,"auto",Me,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:T()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wa,Me,Re],radial:["",Me,Re],conic:[Wa,Me,Re]},yie,pie]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:ue()}],"gradient-via-pos":[{via:ue()}],"gradient-to-pos":[{to:ue()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:I()}],"rounded-s":[{"rounded-s":I()}],"rounded-e":[{"rounded-e":I()}],"rounded-t":[{"rounded-t":I()}],"rounded-r":[{"rounded-r":I()}],"rounded-b":[{"rounded-b":I()}],"rounded-l":[{"rounded-l":I()}],"rounded-ss":[{"rounded-ss":I()}],"rounded-se":[{"rounded-se":I()}],"rounded-ee":[{"rounded-ee":I()}],"rounded-es":[{"rounded-es":I()}],"rounded-tl":[{"rounded-tl":I()}],"rounded-tr":[{"rounded-tr":I()}],"rounded-br":[{"rounded-br":I()}],"rounded-bl":[{"rounded-bl":I()}],"border-w":[{border:pe()}],"border-w-x":[{"border-x":pe()}],"border-w-y":[{"border-y":pe()}],"border-w-s":[{"border-s":pe()}],"border-w-e":[{"border-e":pe()}],"border-w-t":[{"border-t":pe()}],"border-w-r":[{"border-r":pe()}],"border-w-b":[{"border-b":pe()}],"border-w-l":[{"border-l":pe()}],"divide-x":[{"divide-x":pe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":pe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ee(),"hidden","none"]}],"divide-style":[{divide:[...Ee(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...Ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,Me,Re]}],"outline-w":[{outline:["",tt,Td,Gl]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",f,uy,cy]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",d,uy,cy]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[tt,Gl]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":pe()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",m,uy,cy]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[tt,Me,Re]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[Me,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:T()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Me,Re]}],filter:[{filter:["","none",Me,Re]}],blur:[{blur:He()}],brightness:[{brightness:[tt,Me,Re]}],contrast:[{contrast:[tt,Me,Re]}],"drop-shadow":[{"drop-shadow":["","none",y,uy,cy]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",tt,Me,Re]}],"hue-rotate":[{"hue-rotate":[tt,Me,Re]}],invert:[{invert:["",tt,Me,Re]}],saturate:[{saturate:[tt,Me,Re]}],sepia:[{sepia:["",tt,Me,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,Re]}],"backdrop-blur":[{"backdrop-blur":He()}],"backdrop-brightness":[{"backdrop-brightness":[tt,Me,Re]}],"backdrop-contrast":[{"backdrop-contrast":[tt,Me,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,Me,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,Me,Re]}],"backdrop-invert":[{"backdrop-invert":["",tt,Me,Re]}],"backdrop-opacity":[{"backdrop-opacity":[tt,Me,Re]}],"backdrop-saturate":[{"backdrop-saturate":[tt,Me,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,Me,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",Me,Re]}],ease:[{ease:["linear","initial",_,Me,Re]}],delay:[{delay:[tt,Me,Re]}],animate:[{animate:["none",A,Me,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Me,Re]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:Pt()}],"rotate-x":[{"rotate-x":Pt()}],"rotate-y":[{"rotate-y":Pt()}],"rotate-z":[{"rotate-z":Pt()}],scale:[{scale:Kt()}],"scale-x":[{"scale-x":Kt()}],"scale-y":[{"scale-y":Kt()}],"scale-z":[{"scale-z":Kt()}],"scale-3d":["scale-3d"],skew:[{skew:Yt()}],"skew-x":[{"skew-x":Yt()}],"skew-y":[{"skew-y":Yt()}],transform:[{transform:[Me,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:er()}],"translate-x":[{"translate-x":er()}],"translate-y":[{"translate-y":er()}],"translate-z":[{"translate-z":er()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,Re]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[tt,Td,Gl,hS]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},wie=tie(xie),Ve=(...t)=>wie(av(t)),y$=t=>{let e="";return t.forEach((n,r)=>{const i=n.role==="user"?"**User**":"**Assistant**";e+=`## ${i}

`,Array.isArray(n.content)?n.content.forEach(s=>{if(typeof s=="string"){e+=`${s}

`;return}!s||typeof s!="object"||!("type"in s)||(s.type==="text"&&"text"in s?e+=`${s.text}

`:s.type==="tool-call"&&"toolName"in s&&(e+=`*Tool Call: ${s.toolName}*
`,"args"in s&&s.args&&(e+=`\`\`\`json
${JSON.stringify(s.args,null,2)}
\`\`\`

`),"result"in s&&s.result!==void 0&&(e+=`*Tool Result:*
`,e+=`\`\`\`json
${s.result}
\`\`\`

`)))}):typeof n.content=="string"&&(e+=`${n.content}

`),r<t.length-1&&(e+=`---

`)}),e},Sie="inline-flex items-center justify-center rounded-[4px]",_ie="outline-none focus:outline-none focus-visible:outline-none",Cie="bg-[var(--button-default-background-color)] border border-[var(--button-default-border-color)] text-[var(--button-default-color)]",Aie="hover:enabled:bg-[var(--button-default-hover-background-color)]",kie="active:enabled:bg-[var(--button-default-pressed-background-color)]",Eie="focus:enabled:bg-[var(--button-default-focus-background-color)] focus:shadow-[var(--button-default-focus-shadow)]",Tie="disabled:bg-[var(--button-default-disabled-background-color)] disabled:text-[var(--button-default-disabled-color)] disabled:opacity-40 disabled:cursor-not-allowed",Rie="bg-[var(--button-background-color)] text-[var(--button-color)]",Mie="hover:enabled:bg-[var(--button-background-hover-color)]",Oie="active:enabled:bg-[var(--button-background-pressed-color)]",Pie="focus:bg-[var(--button-background-color)] focus:border-[var(--button-border-focus-color)] focus:shadow-[var(--button-shadow-focus)]",Die="disabled:bg-[var(--button-background-disabled-color)] disabled:text-[var(--button-disabled-color)] disabled:cursor-not-allowed",Lie="h-[32px] px-[12px] text-[14px] font-semibold leading-[16px]",Iie=Fre(`${Sie} ${_ie}`,{variants:{variant:{default:Ve(Cie,Aie,kie,Eie,Tie),primary:Ve(Rie,Mie,Oie,Pie,Die)},size:{default:Lie},scale:{default:"w-fit",scale:"w-full"}},defaultVariants:{variant:"primary",size:"default",scale:"default"}}),mn=({className:t,variant:e,size:n,asChild:r=!1,...i})=>{const s=r?QB:"button";return C.jsx(s,{"data-slot":"button",className:Ve("cursor-pointer",Iie({variant:e,size:n,className:t})),...i})},Nie=()=>{const{t}=Ot(),{setCurrentPage:e}=Bm();return C.jsx("div",{className:"flex items-center justify-center h-full",children:C.jsxs("div",{className:"max-w-[573px] text-center flex flex-col items-center gap-[40px]",children:[C.jsxs("div",{className:"flex flex-col gap-[16px]",children:[C.jsx("h1",{className:"select-none text-center text-[32px] font-bold leading-[24px] text-[var(--empty-screen-color)]",children:t("ConnectAIModel")}),C.jsx("p",{className:"select-none text-center text-[16px] font-normal leading-[24px] text-[var(--empty-screen-description-color)]",children:t("ConnectAIModelDescription")})]}),C.jsx(mn,{onClick:()=>e("settings"),children:t("ConnectAIModelBtn")})]})})};function b$(t){const e=t+"CollectionProvider",[n,r]=ra(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:S,children:_}=w,A=xe.useRef(null),k=xe.useRef(new Map).current;return C.jsx(i,{scope:S,itemMap:k,collectionRef:A,children:_})};o.displayName=e;const a=t+"CollectionSlot",c=Th(a),h=xe.forwardRef((w,S)=>{const{scope:_,children:A}=w,k=s(a,_),P=jt(S,k.collectionRef);return C.jsx(c,{ref:P,children:A})});h.displayName=a;const f=t+"CollectionItemSlot",d="data-radix-collection-item",m=Th(f),y=xe.forwardRef((w,S)=>{const{scope:_,children:A,...k}=w,P=xe.useRef(null),M=jt(S,P),O=s(f,_);return xe.useEffect(()=>(O.itemMap.set(P,{ref:P,...k}),()=>void O.itemMap.delete(P))),C.jsx(m,{[d]:"",ref:M,children:A})});y.displayName=f;function b(w){const S=s(t+"CollectionConsumer",w);return xe.useCallback(()=>{const A=S.collectionRef.current;if(!A)return[];const k=Array.from(A.querySelectorAll(`[${d}]`));return Array.from(S.itemMap.values()).sort((O,L)=>k.indexOf(O.ref.current)-k.indexOf(L.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:h,ItemSlot:y},b,r]}var Bie=E.createContext(void 0);function kE(t){const e=E.useContext(Bie);return t||e||"ltr"}var fS="rovingFocusGroup.onEntryFocus",jie={bubbles:!1,cancelable:!0},jm="RovingFocusGroup",[RC,v$,$ie]=b$(jm),[Vie,Ix]=ra(jm,[$ie]),[Fie,zie]=Vie(jm),x$=E.forwardRef((t,e)=>C.jsx(RC.Provider,{scope:t.__scopeRovingFocusGroup,children:C.jsx(RC.Slot,{scope:t.__scopeRovingFocusGroup,children:C.jsx(Hie,{...t,ref:e})})}));x$.displayName=jm;var Hie=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...d}=t,m=E.useRef(null),y=jt(e,m),b=kE(s),[w,S]=qh({prop:o,defaultProp:a??null,onChange:c,caller:jm}),[_,A]=E.useState(!1),k=Ir(h),P=v$(n),M=E.useRef(!1),[O,L]=E.useState(0);return E.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(fS,k),()=>N.removeEventListener(fS,k)},[k]),C.jsx(Fie,{scope:n,orientation:r,dir:b,loop:i,currentTabStopId:w,onItemFocus:E.useCallback(N=>S(N),[S]),onItemShiftTab:E.useCallback(()=>A(!0),[]),onFocusableItemAdd:E.useCallback(()=>L(N=>N+1),[]),onFocusableItemRemove:E.useCallback(()=>L(N=>N-1),[]),children:C.jsx(st.div,{tabIndex:_||O===0?-1:0,"data-orientation":r,...d,ref:y,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{M.current=!0}),onFocus:Ie(t.onFocus,N=>{const z=!M.current;if(N.target===N.currentTarget&&z&&!_){const j=new CustomEvent(fS,jie);if(N.currentTarget.dispatchEvent(j),!j.defaultPrevented){const U=P().filter(F=>F.focusable),W=U.find(F=>F.active),X=U.find(F=>F.id===w),ie=[W,X,...U].filter(Boolean).map(F=>F.ref.current);_$(ie,f)}}M.current=!1}),onBlur:Ie(t.onBlur,()=>A(!1))})})}),w$="RovingFocusGroupItem",S$=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,c=ol(),h=s||c,f=zie(w$,n),d=f.currentTabStopId===h,m=v$(n),{onFocusableItemAdd:y,onFocusableItemRemove:b,currentTabStopId:w}=f;return E.useEffect(()=>{if(r)return y(),()=>b()},[r,y,b]),C.jsx(RC.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:C.jsx(st.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...a,ref:e,onMouseDown:Ie(t.onMouseDown,S=>{r?f.onItemFocus(h):S.preventDefault()}),onFocus:Ie(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:Ie(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){f.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const _=Wie(S,f.orientation,f.dir);if(_!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let k=m().filter(P=>P.focusable).map(P=>P.ref.current);if(_==="last")k.reverse();else if(_==="prev"||_==="next"){_==="prev"&&k.reverse();const P=k.indexOf(S.currentTarget);k=f.loop?Gie(k,P+1):k.slice(P+1)}setTimeout(()=>_$(k))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:w!=null}):o})})});S$.displayName=w$;var Uie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qie(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Wie(t,e,n){const r=qie(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Uie[r]}function _$(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Gie(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var C$=x$,A$=S$,Nx="Tabs",[Kie]=ra(Nx,[Ix]),k$=Ix(),[Yie,EE]=Kie(Nx),E$=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...h}=t,f=kE(a),[d,m]=qh({prop:r,onChange:i,defaultProp:s??"",caller:Nx});return C.jsx(Yie,{scope:n,baseId:ol(),value:d,onValueChange:m,orientation:o,dir:f,activationMode:c,children:C.jsx(st.div,{dir:f,"data-orientation":o,...h,ref:e})})});E$.displayName=Nx;var T$="TabsList",R$=E.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=EE(T$,n),o=k$(n);return C.jsx(C$,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:C.jsx(st.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});R$.displayName=T$;var M$="TabsTrigger",O$=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=EE(M$,n),a=k$(n),c=L$(o.baseId,r),h=I$(o.baseId,r),f=r===o.value;return C.jsx(A$,{asChild:!0,...a,focusable:!i,active:f,children:C.jsx(st.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:Ie(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ie(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ie(t.onFocus,()=>{const d=o.activationMode!=="manual";!f&&!i&&d&&o.onValueChange(r)})})})});O$.displayName=M$;var P$="TabsContent",D$=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=EE(P$,n),c=L$(a.baseId,r),h=I$(a.baseId,r),f=r===a.value,d=E.useRef(f);return E.useEffect(()=>{const m=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(m)},[]),C.jsx(As,{present:i||f,children:({present:m})=>C.jsx(st.div,{"data-state":f?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:h,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:m&&s})})});D$.displayName=P$;function L$(t,e){return`${t}-trigger-${e}`}function I$(t,e){return`${t}-content-${e}`}var Xie=E$,Jie=R$,Qie=O$,Zie=D$;const ese=({items:t,defaultValue:e,value:n,onValueChange:r,className:i})=>C.jsxs(Xie,{defaultValue:e||t[0]?.value,value:n,onValueChange:r,className:Ve("w-full",i),children:[C.jsx(Jie,{className:"w-full inline-flex h-[32px] gap-[20px] items-center border-b-[1px] border-[var(--tabs-border-color)]",children:t.map(s=>C.jsx(Qie,{value:s.value,className:Ve("font-normal text-[14px] leading-[20px] text-[var(--tabs-color)] cursor-pointer pb-[3px] relative","hover:data-[state=inactive]:after:content-[''] hover:data-[state=inactive]:after:absolute hover:data-[state=inactive]:after:bottom-[-5px] hover:data-[state=inactive]:after:left-1/2 hover:data-[state=inactive]:after:transform hover:data-[state=inactive]:after:-translate-x-1/2 hover:data-[state=inactive]:after:w-[24px] hover:data-[state=inactive]:after:h-[4px] hover:data-[state=inactive]:after:bg-[var(--tabs-hover-border-color)] hover:data-[state=inactive]:after:rounded-t-[3px]","data-[state=active]:font-bold data-[state=active]:after:content-[''] data-[state=active]:after:absolute data-[state=active]:after:bottom-[-5px] data-[state=active]:after:left-0 data-[state=active]:after:right-0 data-[state=active]:after:h-[4px] data-[state=active]:after:bg-[var(--tabs-active-border-color)] data-[state=active]:after:rounded-t-[3px]","disabled:opacity-50 disabled:cursor-not-allowed"),children:s.label},s.value))}),t.map(s=>C.jsx(Zie,{value:s.value,className:"mt-[24px]",children:s.content},s.value))]}),TE="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='14.9998'%20cy='9.99975'%20r='0.999754'%20fill='%231C1B1F'/%3e%3ccircle%20cx='4.99975'%20cy='9.99975'%20r='0.999754'%20fill='%231C1B1F'/%3e%3ccircle%20cx='9.99975'%20cy='9.99975'%20r='0.999754'%20fill='%231C1B1F'/%3e%3c/svg%3e",RE="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.5%205C14.3284%205%2015%205.67157%2015%206.5V8H17.5C17.7761%208%2018%208.22386%2018%208.5C18%208.77614%2017.7761%209%2017.5%209H17V17.5C17%2018.3284%2016.3284%2019%2015.5%2019H8.5C7.67157%2019%207%2018.3284%207%2017.5V9H6.5C6.22386%209%206%208.77614%206%208.5C6%208.22386%206.22386%208%206.5%208H9V6.5C9%205.67157%209.67157%205%2010.5%205H13.5ZM8%2017.5C8%2017.7761%208.22386%2018%208.5%2018H15.5C15.7761%2018%2016%2017.7761%2016%2017.5V9H8V17.5ZM10.5%2011C10.7761%2011%2011%2011.2239%2011%2011.5V15.5C11%2015.7761%2010.7761%2016%2010.5%2016C10.2239%2016%2010%2015.7761%2010%2015.5V11.5C10%2011.2239%2010.2239%2011%2010.5%2011ZM13.5%2011C13.7761%2011%2014%2011.2239%2014%2011.5V15.5C14%2015.7761%2013.7761%2016%2013.5%2016C13.2239%2016%2013%2015.7761%2013%2015.5V11.5C13%2011.2239%2013.2239%2011%2013.5%2011ZM10.5%206C10.2239%206%2010%206.22386%2010%206.5V8H14V6.5C14%206.22386%2013.7761%206%2013.5%206H10.5Z'%20fill='%23383838'/%3e%3c/svg%3e",tse="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.5%207.49985L5.5%2014.4998V17.4998H8.5L15.5%2010.4998M12.5%207.49985L14.7929%205.20696C15.1834%204.81643%2015.8166%204.81643%2016.2071%205.20696L17.7929%206.79274C18.1834%207.18327%2018.1834%207.81643%2017.7929%208.20696L15.5%2010.4998M12.5%207.49985L15.5%2010.4998M12.5%2017.4998H18.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function MC(t,e){return MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},MC(t,e)}function nse(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,MC(t,e)}var hy={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var kI;function rse(){if(kI)return hy;kI=1;var t=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;hy.format=o,hy.parse=a;function o(d){if(!d||typeof d!="object")throw new TypeError("argument obj is required");var m=d.parameters,y=d.type;if(!y||!s.test(y))throw new TypeError("invalid type");var b=y;if(m&&typeof m=="object")for(var w,S=Object.keys(m).sort(),_=0;_<S.length;_++){if(w=S[_],!n.test(w))throw new TypeError("invalid parameter name");b+="; "+w+"="+h(m[w])}return b}function a(d){if(!d)throw new TypeError("argument string is required");var m=typeof d=="object"?c(d):d;if(typeof m!="string")throw new TypeError("argument string is required to be a string");var y=m.indexOf(";"),b=y!==-1?m.slice(0,y).trim():m.trim();if(!s.test(b))throw new TypeError("invalid media type");var w=new f(b.toLowerCase());if(y!==-1){var S,_,A;for(t.lastIndex=y;_=t.exec(m);){if(_.index!==y)throw new TypeError("invalid parameter format");y+=_[0].length,S=_[1].toLowerCase(),A=_[2],A.charCodeAt(0)===34&&(A=A.slice(1,-1),A.indexOf("\\")!==-1&&(A=A.replace(r,"$1"))),w.parameters[S]=A}if(y!==m.length)throw new TypeError("invalid parameter format")}return w}function c(d){var m;if(typeof d.getHeader=="function"?m=d.getHeader("content-type"):typeof d.headers=="object"&&(m=d.headers&&d.headers["content-type"]),typeof m!="string")throw new TypeError("content-type header is missing from object");return m}function h(d){var m=String(d);if(n.test(m))return m;if(m.length>0&&!e.test(m))throw new TypeError("invalid parameter value");return'"'+m.replace(i,"\\$1")+'"'}function f(d){this.parameters=Object.create(null),this.type=d}return hy}var ise=rse(),Xu=new Map,N$=function(e){return e.cloneNode(!0)},EI=function(){return window.location.protocol==="file:"},B$=function(e,n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&i.readyState===2){var s=i.getResponseHeader("Content-Type");if(!s)throw new Error("Content type not found");var o=ise.parse(s).type;if(!(o==="image/svg+xml"||o==="text/plain"))throw new Error("Invalid content type: ".concat(o))}if(i.readyState===4){if(i.status===404||i.responseXML===null)throw new Error(EI()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(i.status===200||EI()&&i.status===0)r(null,i);else throw new Error("There was a problem injecting the SVG: "+i.status+" "+i.statusText)}}catch(a){if(i.abort(),a instanceof Error)r(a,i);else throw a}},i.open("GET",e),i.withCredentials=n,i.overrideMimeType&&i.overrideMimeType("text/xml"),i.send()},Za={},TI=function(e,n){Za[e]=Za[e]||[],Za[e].push(n)},sse=function(e){for(var n=function(o,a){setTimeout(function(){if(Array.isArray(Za[e])){var c=Xu.get(e),h=Za[e][o];c instanceof SVGSVGElement&&h(null,N$(c)),c instanceof Error&&h(c),o===Za[e].length-1&&delete Za[e]}},0)},r=0,i=Za[e].length;r<i;r++)n(r)},ose=function(e,n,r){if(Xu.has(e)){var i=Xu.get(e);if(i===void 0){TI(e,r);return}if(i instanceof SVGSVGElement){r(null,N$(i));return}}Xu.set(e,void 0),TI(e,r),B$(e,n,function(s,o){var a;s?Xu.set(e,s):((a=o.responseXML)===null||a===void 0?void 0:a.documentElement)instanceof SVGSVGElement&&Xu.set(e,o.responseXML.documentElement),sse(e)})},ase=function(e,n,r){B$(e,n,function(i,s){var o;i?r(i):((o=s.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&r(null,s.responseXML.documentElement)})},lse=0,cse=function(){return++lse},zs=[],RI={},use="http://www.w3.org/2000/svg",dS="http://www.w3.org/1999/xlink",MI=function(e,n,r,i,s,o,a){var c=e.getAttribute("data-src")||e.getAttribute("src");if(!c){a(new Error("Invalid data-src or src attribute"));return}if(zs.indexOf(e)!==-1){zs.splice(zs.indexOf(e),1),e=null;return}zs.push(e),e.setAttribute("src","");var h=i?ose:ase;h(c,s,function(f,d){if(!d){zs.splice(zs.indexOf(e),1),e=null,a(f);return}var m=e.getAttribute("id");m&&d.setAttribute("id",m);var y=e.getAttribute("title");y&&d.setAttribute("title",y);var b=e.getAttribute("width");b&&d.setAttribute("width",b);var w=e.getAttribute("height");w&&d.setAttribute("height",w);var S=Array.from(new Set(Jy(Jy(Jy([],(d.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();d.setAttribute("class",S);var _=e.getAttribute("style");_&&d.setAttribute("style",_),d.setAttribute("data-src",c);var A=[].filter.call(e.attributes,function(q){return/^data-\w[\w-]*$/.test(q.name)});if(Array.prototype.forEach.call(A,function(q){q.name&&q.value&&d.setAttribute(q.name,q.value)}),r){var k={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},P,M,O,L,N;Object.keys(k).forEach(function(q){P=q,O=k[q],M=d.querySelectorAll(P+"[id]");for(var se=function(I,pe){L=M[I].id,N=L+"-"+cse();var Ee;Array.prototype.forEach.call(O,function(tr){Ee=d.querySelectorAll("["+tr+'*="'+L+'"]');for(var ei=0,_o=Ee.length;ei<_o;ei++){var ns=Ee[ei].getAttribute(tr);ns&&!ns.match(new RegExp('url\\("?#'+L+'"?\\)'))||Ee[ei].setAttribute(tr,"url(#"+N+")")}});for(var ye=d.querySelectorAll("[*|href]"),ke=[],He=0,Pt=ye.length;He<Pt;He++){var Kt=ye[He].getAttributeNS(dS,"href");Kt&&Kt.toString()==="#"+M[I].id&&ke.push(ye[He])}for(var Yt=0,er=ke.length;Yt<er;Yt++)ke[Yt].setAttributeNS(dS,"href","#"+N);M[I].id=N},T=0,Z=M.length;T<Z;T++)se(T)})}d.removeAttribute("xmlns:a");for(var z=d.querySelectorAll("script"),j=[],U,W,X=0,G=z.length;X<G;X++)W=z[X].getAttribute("type"),(!W||W==="application/ecmascript"||W==="application/javascript"||W==="text/javascript")&&(U=z[X].innerText||z[X].textContent,U&&j.push(U),d.removeChild(z[X]));if(j.length>0&&(n==="always"||n==="once"&&!RI[c])){for(var ie=0,F=j.length;ie<F;ie++)new Function(j[ie])(window);RI[c]=!0}var Y=d.querySelectorAll("style");if(Array.prototype.forEach.call(Y,function(q){q.textContent+=""}),d.setAttribute("xmlns",use),d.setAttribute("xmlns:xlink",dS),o(d),!e.parentNode){zs.splice(zs.indexOf(e),1),e=null,a(new Error("Parent node is null"));return}e.parentNode.replaceChild(d,e),zs.splice(zs.indexOf(e),1),e=null,a(null,d)})},hse=function(e,n){var r=n===void 0?{}:n,i=r.afterAll,s=i===void 0?function(){}:i,o=r.afterEach,a=o===void 0?function(){}:o,c=r.beforeEach,h=c===void 0?function(){}:c,f=r.cacheRequests,d=f===void 0?!0:f,m=r.evalScripts,y=m===void 0?"never":m,b=r.httpRequestWithCredentials,w=b===void 0?!1:b,S=r.renumerateIRIElements,_=S===void 0?!0:S;if(e&&"length"in e)for(var A=0,k=0,P=e.length;k<P;k++)MI(e[k],y,_,d,w,h,function(M,O){a(M,O),e&&"length"in e&&e.length===++A&&s(A)});else e?MI(e,y,_,d,w,h,function(M,O){a(M,O),s(1),e=null}):s(0)},pS={exports:{}},mS,OI;function fse(){if(OI)return mS;OI=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mS=t,mS}var gS,PI;function dse(){if(PI)return gS;PI=1;var t=fse();function e(){}function n(){}return n.resetWarningCache=e,gS=function(){function r(o,a,c,h,f,d){if(d!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},gS}var DI;function pse(){return DI||(DI=1,pS.exports=dse()()),pS.exports}var Sn=pse(),mse=function(e){var n=e?.ownerDocument||document;return n.defaultView||window},gse=function(e,n){for(var r in e)if(!(r in n))return!0;for(var i in n)if(e[i]!==n[i])return!0;return!1},yse=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],fy="http://www.w3.org/2000/svg",LI="http://www.w3.org/1999/xlink",Zt=(function(t){function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.initialState={hasError:!1,isLoading:!0},r.state=r.initialState,r._isMounted=!1,r.reactWrapper=void 0,r.nonReactWrapper=void 0,r.refCallback=function(a){r.reactWrapper=a},r}nse(e,t);var n=e.prototype;return n.renderSVG=function(){var i=this;if(this.reactWrapper instanceof mse(this.reactWrapper).Node){var s=this.props,o=s.desc,a=s.evalScripts,c=s.httpRequestWithCredentials,h=s.renumerateIRIElements,f=s.src,d=s.title,m=s.useRequestCache,y=this.props.onError,b=this.props.beforeInjection,w=this.props.afterInjection,S=this.props.wrapper,_,A;S==="svg"?(_=document.createElementNS(fy,S),_.setAttribute("xmlns",fy),_.setAttribute("xmlns:xlink",LI),A=document.createElementNS(fy,S)):(_=document.createElement(S),A=document.createElement(S)),_.appendChild(A),A.dataset.src=f,this.nonReactWrapper=this.reactWrapper.appendChild(_);var k=function(L){if(i.removeSVG(),!i._isMounted){y(L);return}i.setState(function(){return{hasError:!0,isLoading:!1}},function(){y(L)})},P=function(L,N){if(L){k(L);return}i._isMounted&&i.setState(function(){return{isLoading:!1}},function(){try{w(N)}catch(z){k(z)}})},M=function(L){if(L.setAttribute("role","img"),o){var N=L.querySelector(":scope > desc");N&&L.removeChild(N);var z=document.createElement("desc");z.innerHTML=o,L.prepend(z)}if(d){var j=L.querySelector(":scope > title");j&&L.removeChild(j);var U=document.createElement("title");U.innerHTML=d,L.prepend(U)}try{b(L)}catch(W){k(W)}};hse(A,{afterEach:P,beforeEach:M,cacheRequests:m,evalScripts:a,httpRequestWithCredentials:c,renumerateIRIElements:h})}},n.removeSVG=function(){var i;(i=this.nonReactWrapper)!=null&&i.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},n.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},n.componentDidUpdate=function(i){var s=this;gse(Wp({},i),this.props)&&this.setState(function(){return s.initialState},function(){s.removeSVG(),s.renderSVG()})},n.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},n.render=function(){var i=this.props;i.afterInjection,i.beforeInjection,i.desc,i.evalScripts;var s=i.fallback;i.httpRequestWithCredentials;var o=i.loading;i.renumerateIRIElements,i.src,i.title,i.useRequestCache;var a=i.wrapper,c=J6(i,yse),h=a;return E.createElement(h,Wp({},c,{ref:this.refCallback},a==="svg"?{xmlns:fy,xmlnsXlink:LI}:{}),this.state.isLoading&&o&&E.createElement(o,null),this.state.hasError&&s&&E.createElement(s,null))},e})(E.Component);Zt.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};Zt.propTypes={afterInjection:Sn.func,beforeInjection:Sn.func,desc:Sn.string,evalScripts:Sn.oneOf(["always","once","never"]),fallback:Sn.oneOfType([Sn.func,Sn.object,Sn.string]),httpRequestWithCredentials:Sn.bool,loading:Sn.oneOfType([Sn.func,Sn.object,Sn.string]),onError:Sn.func,renumerateIRIElements:Sn.bool,src:Sn.string.isRequired,title:Sn.string,useRequestCache:Sn.bool,wrapper:Sn.oneOf(["div","span","svg"])};const Et=({iconName:t,size:e,isStroke:n,isTransform:r,isActive:i,className:s,insideElement:o,disableHover:a,color:c,...h})=>{const f=a?void 0:o?"hover:enabled:bg-[var(--icon-button-hover-on-active-background-color)]":"hover:enabled:bg-[var(--icon-button-hover-background-color)]",d=a?void 0:"active:enabled:bg-[var(--icon-button-pressed-background-color)]";return C.jsx("button",{className:Ve("border-none cursor-pointer rounded-[4px] bg-none p-0 m-0","flex items-center justify-center",f,d,"disabled:cursor-not-allowed disabled:opacity-[0.5]","outline-none focus:outline-none focus-visible:outline-none",s),style:{width:`${e}px`,height:`${e}px`,...i?{backgroundColor:"var(--icon-button-pressed-background-color)"}:{}},...h,children:C.jsx(Zt,{src:t,className:`flex items-center justify-center ${r?"rotate-90":""}`,beforeInjection:S=>{S.querySelectorAll("path").forEach(A=>{n?A.setAttribute("stroke",c||"var(--icon-button-color)"):A.setAttribute("fill",c||"var(--icon-button-color)")})}})})};var OC=["Enter"," "],bse=["ArrowDown","PageUp","Home"],j$=["ArrowUp","PageDown","End"],vse=[...bse,...j$],xse={ltr:[...OC,"ArrowRight"],rtl:[...OC,"ArrowLeft"]},wse={ltr:["ArrowLeft"],rtl:["ArrowRight"]},$m="Menu",[Xp,Sse,_se]=b$($m),[Pc,$$]=ra($m,[_se,wx,Ix]),Bx=wx(),V$=Ix(),[Cse,Dc]=Pc($m),[Ase,Vm]=Pc($m),F$=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Bx(e),[c,h]=E.useState(null),f=E.useRef(!1),d=Ir(s),m=kE(i);return E.useEffect(()=>{const y=()=>{f.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>f.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),C.jsx(O6,{...a,children:C.jsx(Cse,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:h,children:C.jsx(Ase,{scope:e,onClose:E.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};F$.displayName=$m;var kse="MenuAnchor",ME=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Bx(n);return C.jsx(P6,{...i,...r,ref:e})});ME.displayName=kse;var OE="MenuPortal",[Ese,z$]=Pc(OE,{forceMount:void 0}),H$=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Dc(OE,e);return C.jsx(Ese,{scope:e,forceMount:n,children:C.jsx(As,{present:n||s.open,children:C.jsx(Sx,{asChild:!0,container:i,children:r})})})};H$.displayName=OE;var Xi="MenuContent",[Tse,PE]=Pc(Xi),U$=E.forwardRef((t,e)=>{const n=z$(Xi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Dc(Xi,t.__scopeMenu),o=Vm(Xi,t.__scopeMenu);return C.jsx(Xp.Provider,{scope:t.__scopeMenu,children:C.jsx(As,{present:r||s.open,children:C.jsx(Xp.Slot,{scope:t.__scopeMenu,children:o.modal?C.jsx(Rse,{...i,ref:e}):C.jsx(Mse,{...i,ref:e})})})})}),Rse=E.forwardRef((t,e)=>{const n=Dc(Xi,t.__scopeMenu),r=E.useRef(null),i=jt(e,r);return E.useEffect(()=>{const s=r.current;if(s)return N6(s)},[]),C.jsx(DE,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ie(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Mse=E.forwardRef((t,e)=>{const n=Dc(Xi,t.__scopeMenu);return C.jsx(DE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ose=Th("MenuContent.ScrollLock"),DE=E.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:m,onDismiss:y,disableOutsideScroll:b,...w}=t,S=Dc(Xi,n),_=Vm(Xi,n),A=Bx(n),k=V$(n),P=Sse(n),[M,O]=E.useState(null),L=E.useRef(null),N=jt(e,L,S.onContentChange),z=E.useRef(0),j=E.useRef(""),U=E.useRef(0),W=E.useRef(null),X=E.useRef("right"),G=E.useRef(0),ie=b?Ik:E.Fragment,F=b?{as:Ose,allowPinchZoom:!0}:void 0,Y=se=>{const T=j.current+se,Z=P().filter(ke=>!ke.disabled),ue=document.activeElement,I=Z.find(ke=>ke.ref.current===ue)?.textValue,pe=Z.map(ke=>ke.textValue),Ee=Hse(pe,T,I),ye=Z.find(ke=>ke.textValue===Ee)?.ref.current;(function ke(He){j.current=He,window.clearTimeout(z.current),He!==""&&(z.current=window.setTimeout(()=>ke(""),1e3))})(T),ye&&setTimeout(()=>ye.focus())};E.useEffect(()=>()=>window.clearTimeout(z.current),[]),a6();const q=E.useCallback(se=>X.current===W.current?.side&&qse(se,W.current?.area),[]);return C.jsx(Tse,{scope:n,searchRef:j,onItemEnter:E.useCallback(se=>{q(se)&&se.preventDefault()},[q]),onItemLeave:E.useCallback(se=>{q(se)||(L.current?.focus(),O(null))},[q]),onTriggerLeave:E.useCallback(se=>{q(se)&&se.preventDefault()},[q]),pointerGraceTimerRef:U,onPointerGraceIntentChange:E.useCallback(se=>{W.current=se},[]),children:C.jsx(ie,{...F,children:C.jsx(kk,{asChild:!0,trapped:i,onMountAutoFocus:Ie(s,se=>{se.preventDefault(),L.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:C.jsx(gx,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:m,onDismiss:y,children:C.jsx(C$,{asChild:!0,...k,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:O,onEntryFocus:Ie(c,se=>{_.isUsingKeyboardRef.current||se.preventDefault()}),preventScrollOnEntryFocus:!0,children:C.jsx(D6,{role:"menu","aria-orientation":"vertical","data-state":o7(S.open),"data-radix-menu-content":"",dir:_.dir,...A,...w,ref:N,style:{outline:"none",...w.style},onKeyDown:Ie(w.onKeyDown,se=>{const Z=se.target.closest("[data-radix-menu-content]")===se.currentTarget,ue=se.ctrlKey||se.altKey||se.metaKey,I=se.key.length===1;Z&&(se.key==="Tab"&&se.preventDefault(),!ue&&I&&Y(se.key));const pe=L.current;if(se.target!==pe||!vse.includes(se.key))return;se.preventDefault();const ye=P().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);j$.includes(se.key)&&ye.reverse(),Fse(ye)}),onBlur:Ie(t.onBlur,se=>{se.currentTarget.contains(se.target)||(window.clearTimeout(z.current),j.current="")}),onPointerMove:Ie(t.onPointerMove,Jp(se=>{const T=se.target,Z=G.current!==se.clientX;if(se.currentTarget.contains(T)&&Z){const ue=se.clientX>G.current?"right":"left";X.current=ue,G.current=se.clientX}}))})})})})})})});U$.displayName=Xi;var Pse="MenuGroup",LE=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(st.div,{role:"group",...r,ref:e})});LE.displayName=Pse;var Dse="MenuLabel",q$=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(st.div,{...r,ref:e})});q$.displayName=Dse;var lv="MenuItem",II="menu.itemSelect",jx=E.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=E.useRef(null),o=Vm(lv,t.__scopeMenu),a=PE(lv,t.__scopeMenu),c=jt(e,s),h=E.useRef(!1),f=()=>{const d=s.current;if(!n&&d){const m=new CustomEvent(II,{bubbles:!0,cancelable:!0});d.addEventListener(II,y=>r?.(y),{once:!0}),e6(d,m),m.defaultPrevented?h.current=!1:o.onClose()}};return C.jsx(W$,{...i,ref:c,disabled:n,onClick:Ie(t.onClick,f),onPointerDown:d=>{t.onPointerDown?.(d),h.current=!0},onPointerUp:Ie(t.onPointerUp,d=>{h.current||d.currentTarget?.click()}),onKeyDown:Ie(t.onKeyDown,d=>{const m=a.searchRef.current!=="";n||m&&d.key===" "||OC.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});jx.displayName=lv;var W$=E.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=PE(lv,n),a=V$(n),c=E.useRef(null),h=jt(e,c),[f,d]=E.useState(!1),[m,y]=E.useState("");return E.useEffect(()=>{const b=c.current;b&&y((b.textContent??"").trim())},[s.children]),C.jsx(Xp.ItemSlot,{scope:n,disabled:r,textValue:i??m,children:C.jsx(A$,{asChild:!0,...a,focusable:!r,children:C.jsx(st.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:h,onPointerMove:Ie(t.onPointerMove,Jp(b=>{r?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(t.onPointerLeave,Jp(b=>o.onItemLeave(b))),onFocus:Ie(t.onFocus,()=>d(!0)),onBlur:Ie(t.onBlur,()=>d(!1))})})})}),Lse="MenuCheckboxItem",G$=E.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return C.jsx(Q$,{scope:t.__scopeMenu,checked:n,children:C.jsx(jx,{role:"menuitemcheckbox","aria-checked":cv(n)?"mixed":n,...i,ref:e,"data-state":NE(n),onSelect:Ie(i.onSelect,()=>r?.(cv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});G$.displayName=Lse;var K$="MenuRadioGroup",[Ise,Nse]=Pc(K$,{value:void 0,onValueChange:()=>{}}),Y$=E.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Ir(r);return C.jsx(Ise,{scope:t.__scopeMenu,value:n,onValueChange:s,children:C.jsx(LE,{...i,ref:e})})});Y$.displayName=K$;var X$="MenuRadioItem",J$=E.forwardRef((t,e)=>{const{value:n,...r}=t,i=Nse(X$,t.__scopeMenu),s=n===i.value;return C.jsx(Q$,{scope:t.__scopeMenu,checked:s,children:C.jsx(jx,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":NE(s),onSelect:Ie(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});J$.displayName=X$;var IE="MenuItemIndicator",[Q$,Bse]=Pc(IE,{checked:!1}),Z$=E.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=Bse(IE,n);return C.jsx(As,{present:r||cv(s.checked)||s.checked===!0,children:C.jsx(st.span,{...i,ref:e,"data-state":NE(s.checked)})})});Z$.displayName=IE;var jse="MenuSeparator",e7=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});e7.displayName=jse;var $se="MenuArrow",t7=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Bx(n);return C.jsx(L6,{...i,...r,ref:e})});t7.displayName=$se;var Vse="MenuSub",[hPe,n7]=Pc(Vse),lp="MenuSubTrigger",r7=E.forwardRef((t,e)=>{const n=Dc(lp,t.__scopeMenu),r=Vm(lp,t.__scopeMenu),i=n7(lp,t.__scopeMenu),s=PE(lp,t.__scopeMenu),o=E.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,h={__scopeMenu:t.__scopeMenu},f=E.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return E.useEffect(()=>f,[f]),E.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),C.jsx(ME,{asChild:!0,...h,children:C.jsx(W$,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":o7(n.open),...t,ref:mx(e,i.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ie(t.onPointerMove,Jp(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ie(t.onPointerLeave,Jp(d=>{f();const m=n.content?.getBoundingClientRect();if(m){const y=n.content?.dataset.side,b=y==="right",w=b?-5:5,S=m[b?"left":"right"],_=m[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+w,y:d.clientY},{x:S,y:m.top},{x:_,y:m.top},{x:_,y:m.bottom},{x:S,y:m.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(t.onKeyDown,d=>{const m=s.searchRef.current!=="";t.disabled||m&&d.key===" "||xse[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});r7.displayName=lp;var i7="MenuSubContent",s7=E.forwardRef((t,e)=>{const n=z$(Xi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Dc(Xi,t.__scopeMenu),o=Vm(Xi,t.__scopeMenu),a=n7(i7,t.__scopeMenu),c=E.useRef(null),h=jt(e,c);return C.jsx(Xp.Provider,{scope:t.__scopeMenu,children:C.jsx(As,{present:r||s.open,children:C.jsx(Xp.Slot,{scope:t.__scopeMenu,children:C.jsx(DE,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{o.isUsingKeyboardRef.current&&c.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ie(t.onFocusOutside,f=>{f.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ie(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ie(t.onKeyDown,f=>{const d=f.currentTarget.contains(f.target),m=wse[o.dir].includes(f.key);d&&m&&(s.onOpenChange(!1),a.trigger?.focus(),f.preventDefault())})})})})})});s7.displayName=i7;function o7(t){return t?"open":"closed"}function cv(t){return t==="indeterminate"}function NE(t){return cv(t)?"indeterminate":t?"checked":"unchecked"}function Fse(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function zse(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Hse(t,e,n){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=zse(t,Math.max(s,0));i.length===1&&(o=o.filter(h=>h!==n));const c=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function Use(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],h=a.x,f=a.y,d=c.x,m=c.y;f>r!=m>r&&n<(d-h)*(r-f)/(m-f)+h&&(i=!i)}return i}function qse(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Use(n,e)}function Jp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Wse=F$,Gse=ME,Kse=H$,Yse=U$,Xse=LE,Jse=q$,Qse=jx,Zse=G$,eoe=Y$,toe=J$,noe=Z$,roe=e7,ioe=t7,soe=r7,ooe=s7,$x="DropdownMenu",[aoe]=ra($x,[$$]),Nr=$$(),[loe,a7]=aoe($x),l7=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=Nr(e),h=E.useRef(null),[f,d]=qh({prop:i,defaultProp:s??!1,onChange:o,caller:$x});return C.jsx(loe,{scope:e,triggerId:ol(),triggerRef:h,contentId:ol(),open:f,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(m=>!m),[d]),modal:a,children:C.jsx(Wse,{...c,open:f,onOpenChange:d,dir:r,modal:a,children:n})})};l7.displayName=$x;var c7="DropdownMenuTrigger",u7=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=a7(c7,n),o=Nr(n);return C.jsx(Gse,{asChild:!0,...o,children:C.jsx(st.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:mx(e,s.triggerRef),onPointerDown:Ie(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Ie(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});u7.displayName=c7;var coe="DropdownMenuPortal",h7=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Nr(e);return C.jsx(Kse,{...r,...n})};h7.displayName=coe;var f7="DropdownMenuContent",d7=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=a7(f7,n),s=Nr(n),o=E.useRef(!1);return C.jsx(Yse,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Ie(t.onCloseAutoFocus,a=>{o.current||i.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ie(t.onInteractOutside,a=>{const c=a.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0,f=c.button===2||h;(!i.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});d7.displayName=f7;var uoe="DropdownMenuGroup",hoe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Xse,{...i,...r,ref:e})});hoe.displayName=uoe;var foe="DropdownMenuLabel",doe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Jse,{...i,...r,ref:e})});doe.displayName=foe;var poe="DropdownMenuItem",p7=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Qse,{...i,...r,ref:e})});p7.displayName=poe;var moe="DropdownMenuCheckboxItem",goe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Zse,{...i,...r,ref:e})});goe.displayName=moe;var yoe="DropdownMenuRadioGroup",boe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(eoe,{...i,...r,ref:e})});boe.displayName=yoe;var voe="DropdownMenuRadioItem",xoe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(toe,{...i,...r,ref:e})});xoe.displayName=voe;var woe="DropdownMenuItemIndicator",Soe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(noe,{...i,...r,ref:e})});Soe.displayName=woe;var _oe="DropdownMenuSeparator",Coe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(roe,{...i,...r,ref:e})});Coe.displayName=_oe;var Aoe="DropdownMenuArrow",koe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(ioe,{...i,...r,ref:e})});koe.displayName=Aoe;var Eoe="DropdownMenuSubTrigger",Toe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(soe,{...i,...r,ref:e})});Toe.displayName=Eoe;var Roe="DropdownMenuSubContent",Moe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(ooe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Moe.displayName=Roe;var Ooe=l7,Poe=u7,Doe=h7,Loe=d7,Ioe=p7;const BE="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.5%209.5L7.5%206.5L4.5%203.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Mh="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5%208.5L10.5%2015.5L7.5%2012.5'%20stroke='%23444444'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function Noe(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Vx="Switch",[Boe]=ra(Vx),[joe,$oe]=Boe(Vx),m7=E.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c="on",onCheckedChange:h,form:f,...d}=t,[m,y]=E.useState(null),b=jt(e,k=>y(k)),w=E.useRef(!1),S=m?f||!!m.closest("form"):!0,[_,A]=qh({prop:i,defaultProp:s??!1,onChange:h,caller:Vx});return C.jsxs(joe,{scope:n,checked:_,disabled:a,children:[C.jsx(st.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":v7(_),"data-disabled":a?"":void 0,disabled:a,value:c,...d,ref:b,onClick:Ie(t.onClick,k=>{A(P=>!P),S&&(w.current=k.isPropagationStopped(),w.current||k.stopPropagation())})}),S&&C.jsx(b7,{control:m,bubbles:!w.current,name:r,value:c,checked:_,required:o,disabled:a,form:f,style:{transform:"translateX(-100%)"}})]})});m7.displayName=Vx;var g7="SwitchThumb",y7=E.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=$oe(g7,n);return C.jsx(st.span,{"data-state":v7(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});y7.displayName=g7;var Voe="SwitchBubbleInput",b7=E.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=E.useRef(null),a=jt(o,s),c=Noe(n),h=w6(e);return E.useEffect(()=>{const f=o.current;if(!f)return;const d=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==n&&y){const b=new Event("click",{bubbles:r});y.call(f,n),f.dispatchEvent(b)}},[c,n,r]),C.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});b7.displayName=Voe;function v7(t){return t?"checked":"unchecked"}var Foe=m7,zoe=y7;const x7=({checked:t,onCheckedChange:e,disabled:n=!1,id:r,className:i})=>C.jsx("div",{className:"flex items-center gap-2",children:C.jsx(Foe,{id:r,checked:t,onCheckedChange:e,disabled:n,className:Ve("relative inline-flex align-center shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out","focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50","bg-[var(--toggle-button-off-backround-color)] data-[state=checked]:bg-[var(--toggle-button-backround-color)]","hover:enabled:bg-[var(--toggle-button-off-background-hover-color)] data-[state=checked]:hover:enabled:bg-[var(--toggle-button-backround-hover-color)]","w-[24px] h-[14px]",i),children:C.jsx(zoe,{className:Ve("pointer-events-none inline-block rounded-full bg-[var(--toggle-button-circle-color)] ring-0 transition-transform duration-200 ease-in-out","w-[10px] h-[10px] translate-x-[1px] data-[state=checked]:translate-x-[10px]")})})}),Hoe=({text:t,icon:e,iconSize:n=16,onClick:r,isActive:i,isSeparator:s,withToggle:o,toggleChecked:a,onToggleChange:c,toggleDisabled:h,subMenu:f,checked:d})=>{const[m,y]=E.useState(!1),b=E.useRef(null),w=E.useRef(null);if(s)return C.jsx("div",{className:"h-px min-h-[1px] w-full bg-[var(--drop-down-menu-separator-color)] my-[4px] flex-shrink-0"});const S=P=>{if(o){P.stopPropagation(),P.preventDefault();return}r(P)},_=P=>{P.stopPropagation(),P.preventDefault(),!h&&c?.(!a)},A=P=>{if(!b.current||!w.current)return;const M=P.clientX,O=P.clientY,L=b.current.getBoundingClientRect(),N=w.current?.getBoundingClientRect(),z=M>=L.left&&M<=L.right&&O>=L.top&&O<=L.bottom,j=N&&M>=N.left&&M<=N.right&&O>=N.top&&O<=N.bottom;!z&&!j&&(y(!1),window.removeEventListener("mousemove",A))},k=()=>{m||!f||(y(!0),window.addEventListener("mousemove",A))};return C.jsxs(Ioe,{className:Ve("dropdown-menu-item","flex items-center justify-between gap-[16px] min-w-0 w-full max-w-full min-h-[32px] h-[32px] px-[12px] select-none cursor-pointer","outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0 focus-visible:ring-0 border-0","hover:bg-[var(--drop-down-menu-item-hover-color)] hover:text-[var(--drop-down-menu-item-hover-color)]","data-[disabled]:opacity-50 data-[disabled]:pointer-events-none",i||f&&m?"bg-[var(--drop-down-menu-item-active-color)] text-[var(--drop-down-menu-item-active-color)]":""),onSelect:o?P=>P.preventDefault():S,onClick:o?_:void 0,onMouseEnter:k,ref:b,children:[C.jsxs("div",{className:"flex items-center gap-[8px] min-w-0 flex-1",children:[e&&typeof e=="string"?C.jsx(Et,{iconName:e,size:n,disableHover:!0}):e??null,C.jsx("span",{className:"truncate font-normal text-[14px] leading-[20px] text-[var(--drop-down-menu-item-color)]",children:t})]}),f?C.jsx(Lc,{trigger:C.jsx(Et,{iconName:BE,size:12,insideElement:!0,isStroke:!0}),items:f,side:"right",align:"start",sideOffset:0,open:m,contentClassName:"ms-[12px] mt-[-15px]",containerRef:b.current,dropdownRef:w}):null,d?C.jsx(Zt,{src:Mh}):null,o&&c?C.jsx("div",{onClick:P=>P.stopPropagation(),children:C.jsx(x7,{checked:a??!1,onCheckedChange:c,size:"small",disabled:h})}):null]})},Lc=({trigger:t,items:e,side:n,align:r,sideOffset:i,contentClassName:s,maxWidth:o,matchTriggerWidth:a,open:c,containerRef:h,dropdownRef:f,onOpenChange:d})=>{const m=document.getElementById("app");return C.jsxs(Ooe,{open:c,onOpenChange:d,children:[C.jsx(Poe,{asChild:!0,children:t}),C.jsx(Doe,{container:h??m,children:C.jsx(Loe,{ref:f,side:n??"bottom",align:r??"start",sideOffset:i??6,"data-side":n,"data-align":r,"data-orientation":"vertical",className:Ve("dropdown-menu z-50 border border-[var(--drop-down-menu-border-color)] rounded-[8px] shadow-[var(--drop-down-menu-shadow)] bg-[var(--drop-down-menu-background-color)] py-[8px] max-h-56 overflow-y-auto flex flex-col gap-[4px]",a?"w-[var(--radix-dropdown-menu-trigger-width)]":"w-fit",s),style:o?{maxWidth:o}:void 0,children:e.map((y,b)=>C.jsx(Hoe,{...y},y.id||y.text||`item-${b}`))})})]})};var Fx="Dialog",[w7]=ra(Fx),[Uoe,Ts]=w7(Fx),S7=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=E.useRef(null),c=E.useRef(null),[h,f]=qh({prop:r,defaultProp:i??!1,onChange:s,caller:Fx});return C.jsx(Uoe,{scope:e,triggerRef:a,contentRef:c,contentId:ol(),titleId:ol(),descriptionId:ol(),open:h,onOpenChange:f,onOpenToggle:E.useCallback(()=>f(d=>!d),[f]),modal:o,children:n})};S7.displayName=Fx;var _7="DialogTrigger",qoe=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ts(_7,n),s=jt(e,i.triggerRef);return C.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":VE(i.open),...r,ref:s,onClick:Ie(t.onClick,i.onOpenToggle)})});qoe.displayName=_7;var jE="DialogPortal",[Woe,C7]=w7(jE,{forceMount:void 0}),A7=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Ts(jE,e);return C.jsx(Woe,{scope:e,forceMount:n,children:E.Children.map(r,o=>C.jsx(As,{present:n||s.open,children:C.jsx(Sx,{asChild:!0,container:i,children:o})}))})};A7.displayName=jE;var uv="DialogOverlay",k7=E.forwardRef((t,e)=>{const n=C7(uv,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Ts(uv,t.__scopeDialog);return s.modal?C.jsx(As,{present:r||s.open,children:C.jsx(Koe,{...i,ref:e})}):null});k7.displayName=uv;var Goe=Th("DialogOverlay.RemoveScroll"),Koe=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ts(uv,n);return C.jsx(Ik,{as:Goe,allowPinchZoom:!0,shards:[i.contentRef],children:C.jsx(st.div,{"data-state":VE(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),_c="DialogContent",E7=E.forwardRef((t,e)=>{const n=C7(_c,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Ts(_c,t.__scopeDialog);return C.jsx(As,{present:r||s.open,children:s.modal?C.jsx(Yoe,{...i,ref:e}):C.jsx(Xoe,{...i,ref:e})})});E7.displayName=_c;var Yoe=E.forwardRef((t,e)=>{const n=Ts(_c,t.__scopeDialog),r=E.useRef(null),i=jt(e,n.contentRef,r);return E.useEffect(()=>{const s=r.current;if(s)return N6(s)},[]),C.jsx(T7,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ie(t.onFocusOutside,s=>s.preventDefault())})}),Xoe=E.forwardRef((t,e)=>{const n=Ts(_c,t.__scopeDialog),r=E.useRef(!1),i=E.useRef(!1);return C.jsx(T7,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),T7=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Ts(_c,n),c=E.useRef(null),h=jt(e,c);return a6(),C.jsxs(C.Fragment,{children:[C.jsx(kk,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:C.jsx(gx,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":VE(a.open),...o,ref:h,onDismiss:()=>a.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(Qoe,{titleId:a.titleId}),C.jsx(eae,{contentRef:c,descriptionId:a.descriptionId})]})]})}),$E="DialogTitle",R7=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ts($E,n);return C.jsx(st.h2,{id:i.titleId,...r,ref:e})});R7.displayName=$E;var M7="DialogDescription",O7=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ts(M7,n);return C.jsx(st.p,{id:i.descriptionId,...r,ref:e})});O7.displayName=M7;var P7="DialogClose",Joe=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Ts(P7,n);return C.jsx(st.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});Joe.displayName=P7;function VE(t){return t?"open":"closed"}var D7="DialogTitleWarning",[fPe,L7]=FX(D7,{contentName:_c,titleName:$E,docsSlug:"dialog"}),Qoe=({titleId:t})=>{const e=L7(D7),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Zoe="DialogDescriptionWarning",eae=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${L7(Zoe).contentName}}.`;return E.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},tae=S7,nae=A7,rae=k7,iae=E7,sae=R7,oae=O7;const Ic=({...t})=>C.jsx(tae,{"data-slot":"dialog",...t}),aae="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.1475%206.14844C17.3428%205.95347%2017.6593%205.95325%2017.8545%206.14844C18.0495%206.34361%2018.0494%206.66023%2017.8545%206.85547L12.707%2012.001L17.8545%2017.1465C18.0495%2017.3417%2018.0494%2017.6583%2017.8545%2017.8535C17.6593%2018.0488%2017.3428%2018.0486%2017.1475%2017.8535L12%2012.708L6.85352%2017.8535C6.65826%2018.0487%206.34173%2018.0487%206.14648%2017.8535C5.95128%2017.6583%205.95129%2017.3417%206.14648%2017.1465L11.293%2012.001L6.14648%206.85645C5.9512%206.66121%205.95125%206.34372%206.14648%206.14844C6.34167%205.95358%206.65832%205.95357%206.85352%206.14844L12%2011.2939L17.1475%206.14844Z'%20fill='%23383838'/%3e%3c/svg%3e",lae="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.62623%2016.5952L9.18302%203.47138C9.54492%202.84288%2010.4551%202.84287%2010.817%203.47138L18.3738%2016.5952C18.7339%2017.2206%2018.2806%2018%2017.5568%2018H2.44321C1.7194%2018%201.26612%2017.2206%201.62623%2016.5952Z'%20fill='%23FFD112'/%3e%3cpath%20d='M11%2014.5V16.5H9V14.5H11ZM11%207V10L10.5%2013.5H9.5L9%2010V7H11Z'%20fill='black'%20fill-opacity='0.8'/%3e%3c/svg%3e",cae=({...t})=>C.jsx(nae,{"data-slot":"dialog-portal",container:document.getElementById("app"),...t}),uae=({className:t,...e})=>C.jsx(rae,{"data-slot":"dialog-overlay",className:Ve("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-[var(--modal-dialog-overlay-background)]",t),...e}),hae=({className:t,withWarningIcon:e,...n})=>C.jsx(sae,{"data-slot":"dialog-title",className:Ve("font-bold text-[var(--modal-dialog-header-color)] select-none",t,e?"text-[14px] leading-[20px]":"text-[18px] leading-[24px]"),...n}),fae=()=>C.jsx(C.Fragment,{children:C.jsx(oae,{className:"hidden",children:"Dialog content"})}),dae="w-[348px]",pae="w-[548px]",mae=" box-border h-fit-content fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 rounded-[8px]",gae="w-[352px] box-border h-fit-content fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 rounded-[8px]",yae="bg-[var(--modal-dialog-background-color)]  shadow-[var(--modal-dialog-shadows)]",Nc=({className:t,children:e,header:n,onClose:r,isHuge:i=!1,withWarningIcon:s=!1,...o})=>{const a=i?pae:dae,c=s?gae:mae;return xe.useEffect(()=>{const h=f=>{f.key==="Escape"&&r()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[r]),C.jsxs(cae,{"data-slot":"dialog-portal",children:[C.jsx(uae,{}),C.jsxs(iae,{id:"dialog-content","data-slot":"dialog-content",className:Ve(a,c,yae,"flex flex-col",t),onInteractOutside:h=>h.preventDefault(),...o,children:[C.jsx(fae,{}),C.jsxs("div",{className:Ve("flex items-center justify-between align-center",s?"h-[40px]":"h-[56px]",s?"ps-[16px] pe-[8px]":"ps-[32px] pe-[16px]"),children:[C.jsxs("div",{className:"flex items-center gap-[4px]",children:[s?C.jsx(Zt,{src:lae}):null,C.jsx(hae,{withWarningIcon:s,children:n})]}),C.jsx(Et,{iconName:aae,size:24,onClick:r})]}),C.jsx("div",{className:Ve("flex-1 min-h-0",s?"px-[16px]":"px-[32px]"),children:e})]})]})},no=({children:t,header:e,error:n})=>C.jsxs("div",{className:"flex flex-col gap-[4px]",children:[C.jsx("p",{className:"select-none text-[14px] leading-[20px] text-[var(--field-container-header-color)]",children:e}),t,n&&C.jsx("p",{className:"text-[var(--field-container-error-color)]",children:n})]}),I7="data:image/svg+xml,%3csvg%20width='8'%20height='8'%20viewBox='0%200%208%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.5%203.66699L4.5%205.66699L6.5%203.66699'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",zx=({placeholder:t,value:e,className:n,isError:r,withoutBg:i,items:s})=>{const[o,a]=xe.useState(!1),c=xe.useRef(null);return C.jsx(Lc,{onOpenChange:h=>a(h),trigger:C.jsxs("div",{ref:c,className:Ve("h-[32px] rounded-[4px] ps-[12px] pe-[12px] box-border","cursor-pointer flex items-center justify-between","text-[var(--input-color)] text-[14px] leading-[16px]",o?"border bg-[var(--input-background-color)] border-[var(--input-active-border-color)]":i?"hover:bg-[var(--input-hover-background-color)] hover:border-[var(--input-hover-border-color)]":"border bg-[var(--input-background-color)] border-[var(--input-border-color)] hover:bg-[var(--input-hover-background-color)] hover:border-[var(--input-hover-border-color)]",n,s.length===0?"cursor-not-allowed pointer-events-none opacity-50":""),style:{borderColor:r?"var(--border-error)":void 0},children:[C.jsx("span",{className:Ve(e?"text-[var(--input-color)]":"text-[var(--input-placeholder-color)]"),children:e||t}),C.jsx(Zt,{src:I7,className:Ve("w-[15px] h-[24px] flex items-center justify-center transition-transform",o?"rotate-180":"")})]}),align:"start",side:"bottom",containerRef:c.current,matchTriggerWidth:!0,items:s})},ao=xe.forwardRef(({className:t,isError:e,icon:n,...r},i)=>C.jsxs("div",{className:`relative ${t}`,children:[n&&C.jsx(Zt,{className:"absolute left-[10px] top-[50%] translate-y-[-50%] w-[20px] h-[20px] flex items-center justify-center",src:n,beforeInjection:s=>{const o=s.querySelector("path");o&&o.setAttribute("stroke","var(--input-color)")}}),C.jsx("input",{ref:i,type:r.type??"text",className:Ve("h-[32px] rounded-[4px] pe-[2px] box-border border border-[var(--input-border-color)]","bg-[var(--input-background-color)]",r.disabled?"":"hover:bg-[var(--input-hover-background-color)] hover:border-[var(--input-hover-border-color)]","focus:bg-[var(--input-active-background-color)] focus:border focus:border-[var(--input-active-border-color)]","outline-none","placeholder:text-[var(--input-placeholder-color)] text-[var(--input-color)]",n?"ps-[40px]":"ps-[12px]",t),style:{border:e?"1px solid var(--input-error-color)":""},value:r.value,...r})]}));ao.displayName="Input";const N7="flex flex-col justify-between h-full",B7="flex flex-col gap-[12px] mb-[32px]",j7="flex flex-row justify-end items-center gap-[8px] h-[64px] border-t-[1px] border-[var(--border-divider)] mx-[-32px] px-[32px]",bae=({name:t,onClose:e})=>{const{t:n}=Ot(),{providers:r,editProvider:i}=Es(),[s,o]=xe.useState(()=>{const _=r.find(A=>A.name===t);return _||{name:"",type:"",icon:"",key:"",baseUrl:""}}),[a,c]=xe.useState({name:s.name,url:s.baseUrl,key:s.key}),[h,f]=xe.useState({key:"",url:"",name:""});xe.useEffect(()=>{const _=r.find(A=>A.name===t);_&&(o(_),c({name:_.name,url:_.baseUrl,key:_.key}))},[r,t]),xe.useEffect(()=>{c({name:s.name,url:s.baseUrl,key:s.key})},[s]);const d=xe.useRef(null),m=_=>{c(A=>({...A,[_.target.name]:_.target.value})),f(A=>({...A,[_.target.name]:""}))},y=async()=>{const _=await i({type:s.type,name:a.name,key:a.key,baseUrl:a.url},s.name);typeof _=="boolean"&&_?e():_&&f(A=>({...A,[_.field]:_.message}))},b=a.name===s.name&&a.url===s.baseUrl,S=a.key===s.key&&b||!!h.key||!!h.url||!!h.name;return C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:n("EditAIProvider"),onClose:e,ref:d,children:C.jsxs("div",{className:N7,children:[C.jsxs("div",{className:B7,children:[C.jsx(no,{header:n("Provider"),children:C.jsx(zx,{value:s.type,items:[]})}),C.jsx(no,{header:n("Name"),error:h.name,children:C.jsx(ao,{name:"name",onChange:m,value:a.name,isError:!!h.name,placeholder:n("EnterName"),className:"w-full"})}),C.jsx(no,{header:n("URL"),error:h.url,children:C.jsx(ao,{name:"url",onChange:m,value:a.url,isError:!!h.url,placeholder:n("EnterURL"),className:"w-full"})}),C.jsx(no,{header:n("APIKey"),error:h.key,children:C.jsx(ao,{name:"key",onChange:m,value:a.key,isError:!!h.key,placeholder:n("EnterKey"),className:"w-full",type:"password"})})]}),C.jsxs("div",{className:j7,children:[C.jsx(mn,{variant:"default",onClick:e,children:n("Cancel")}),C.jsx(mn,{onClick:y,disabled:S,children:n("Save")})]})]})})})},vae=({name:t,onClose:e})=>{const{providers:n,deleteProvider:r}=Es(),[i,s]=xe.useState(()=>{const c=n.find(h=>h.name===t);return c||{name:"",type:"",icon:"",key:"",baseUrl:""}}),{t:o}=Ot();xe.useEffect(()=>{const c=n.find(h=>h.name===t);c&&s(c)},[n,t]);const a=async()=>{await r(i),e()};return C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:o("Warning"),onClose:e,withWarningIcon:!0,children:C.jsxs("div",{className:"flex flex-col justify-between h-full",children:[C.jsx("p",{className:"select-none h-[40px] flex items-center text-[12px] leading-[16px]",children:o("WantDeleteProvider?")}),C.jsxs("div",{className:"flex flex-row justify-end items-center gap-[8px] h-[48px]",children:[C.jsx(mn,{size:"small",variant:"default",onClick:e,children:o("No")}),C.jsx(mn,{size:"small",onClick:a,children:o("Yes")})]})]})})})},xae=({provider:t})=>{const[e,n]=xe.useState(!1),[r,i]=xe.useState(!1),[s,o]=xe.useState(null),[a,c]=xe.useState(!1),h=xe.useCallback(d=>{o(d)},[]),{t:f}=Ot();return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"flex flex-row justify-between gap-[12px] px-[16px] py-[12px] min-w-[274px] max-w-[312px] flex-1 rounded-[8px] bg-[var(--ai-provider-item-background-color)] shadow-[var(--ai-provider-item-shadow)]",children:[C.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--ai-provider-item-color)] truncate",children:t.name}),C.jsxs("p",{className:"text-[12px] leading-[14px] text-[var(--ai-provider-item-description-color)]",children:[t.type,C.jsx("br",{}),t.baseUrl]})]}),C.jsx("div",{className:"flex items-center justify-end",ref:h,children:C.jsx(Lc,{onOpenChange:c,trigger:C.jsx(Et,{iconName:TE,size:20,isActive:a}),items:[{icon:C.jsx(Et,{iconName:tse,size:20,disableHover:!0,isStroke:!0}),text:f("Edit"),onClick:()=>n(!0)},{text:"",onClick:()=>{},isSeparator:!0},{icon:C.jsx(Et,{iconName:RE,size:20,disableHover:!0}),text:f("Delete"),onClick:()=>i(!0)}],side:"right",align:"start",sideOffset:0,containerRef:s})})]}),e?C.jsx(bae,{name:t.name,onClose:()=>n(!1)}):null,r?C.jsx(vae,{name:t.name,onClose:()=>i(!1)}):null]})},NI=Vt.getProvidersInfo(),wae=({onClose:t})=>{const{addProvider:e}=Es(),{t:n}=Ot(),[r,i]=xe.useState(NI[0]),[s,o]=xe.useState({name:"",url:r.baseUrl,key:""}),[a,c]=xe.useState({key:"",url:"",name:""}),h=xe.useRef(null),f=y=>{o(b=>({...b,[y.target.name]:y.target.value})),c(b=>({...b,[y.target.name]:""}))},d=async()=>{const y=await e({type:r.type,name:s.name,key:s.key,baseUrl:s.url});typeof y=="boolean"&&y?t():y&&c(b=>({...b,[y.field]:y.message}))};xe.useEffect(()=>{o(y=>({...y,url:r.baseUrl}))},[r]);const m=!s.name||!s.url||!!a.key||!!a.url||!!a.name;return C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:n("AIProvider"),onClose:t,ref:h,children:C.jsxs("div",{className:N7,children:[C.jsxs("div",{className:B7,children:[C.jsx(no,{header:n("Provider"),children:C.jsx(zx,{value:r.name,items:NI.map(y=>({text:y.name,id:y.name,onClick:()=>i(y)}))})}),C.jsx(no,{header:n("Name"),error:a.name,children:C.jsx(ao,{name:"name",onChange:f,value:s.name,isError:!!a.name,placeholder:n("EnterName"),className:"w-full"})}),C.jsx(no,{header:n("URL"),error:a.url,children:C.jsx(ao,{name:"url",onChange:f,value:s.url,isError:!!a.url,placeholder:n("EnterURL"),className:"w-full"})}),C.jsx(no,{header:n("APIKey"),error:a.key,children:C.jsx(ao,{name:"key",onChange:f,value:s.key,isError:!!a.key,placeholder:n("EnterKey"),className:"w-full",type:"password"})})]}),C.jsxs("div",{className:j7,children:[C.jsx(mn,{variant:"default",onClick:t,children:n("Cancel")}),C.jsx(mn,{onClick:d,disabled:m,children:n("AddProvider")})]})]})})})},Sae=({isActive:t})=>{const[e,n]=xe.useState(!1),{providers:r}=Es(),{t:i}=Ot();return C.jsxs(C.Fragment,{children:[C.jsx(mn,{className:"max-w-[fit-content]",onClick:()=>n(!0),disabled:!t,children:i("AddProvider")}),C.jsx("div",{className:Ve("flex flex-wrap gap-[16px]",t?"":"opacity-70 pointer-events-none"),children:r.map(s=>C.jsx(xae,{provider:s},s.name))}),e?C.jsx(wae,{onClose:()=>n(!1)}):null]})},_ae=({isActive:t})=>{const{t:e}=Ot();return C.jsx(mn,{className:"max-w-[fit-content]",disabled:!t,children:e("RegisterConnectWallet")})};let PC=[],$7=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?$7:PC).push(n=n+t[e])})();function Cae(t){if(t<768)return!1;for(let e=0,n=PC.length;;){let r=e+n>>1;if(t<PC[r])n=r;else if(t>=$7[r])e=r+1;else return!0;if(e==n)return!1}}function BI(t){return t>=127462&&t<=127487}const jI=8205;function Aae(t,e,n=!0,r=!0){return(n?V7:kae)(t,e,r)}function V7(t,e,n){if(e==t.length)return e;e&&F7(t.charCodeAt(e))&&z7(t.charCodeAt(e-1))&&e--;let r=yS(t,e);for(e+=$I(r);e<t.length;){let i=yS(t,e);if(r==jI||i==jI||n&&Cae(i))e+=$I(i),r=i;else if(BI(i)){let s=0,o=e-2;for(;o>=0&&BI(yS(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function kae(t,e,n){for(;e>0;){let r=V7(t,e-2,n);if(r<e)return r;e--}return 0}function yS(t,e){let n=t.charCodeAt(e);if(!z7(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return F7(r)?(n-55296<<10)+(r-56320)+65536:n}function F7(t){return t>=56320&&t<57344}function z7(t){return t>=55296&&t<56320}function $I(t){return t<65536?1:2}class dt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Oh(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Qs.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Oh(this,e,n);let r=[];return this.decompose(e,n,r,0),Qs.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Cp(this),s=new Cp(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Cp(this,e)}iterRange(e,n=this.length){return new H7(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new U7(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?dt.empty:e.length<=32?new rn(e):Qs.from(rn.split(e,[]))}}class rn extends dt{constructor(e,n=Eae(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new Tae(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new rn(VI(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=xb(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new rn(a,o.length+s.length));else{let c=a.length>>1;r.push(new rn(a.slice(0,c)),new rn(a.slice(c)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof rn))return super.replace(e,n,r);[e,n]=Oh(this,e,n);let i=xb(this.text,xb(r.text,VI(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new rn(i,s):Qs.from(rn.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=Oh(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],c=s+a.length;s>e&&o&&(i+=r),e<c&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=c+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new rn(r,i)),r=[],i=-1);return i>-1&&n.push(new rn(r,i)),n}}class Qs extends dt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,c=r+o.lines-1;if((n?c:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=c+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],c=o+a.length;if(e<=c&&n>=o){let h=i&((o<=e?1:0)|(c>=n?2:0));o>=e&&c<=n&&!h?r.push(a):a.decompose(e-o,n-o,r,h)}o=c+1}}replace(e,n,r){if([e,n]=Oh(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let c=o.replace(e-s,n-s,r),h=this.lines-o.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let f=this.children.slice();return f[i]=c,new Qs(f,this.length-(n-e)+r.length)}return super.replace(s,a,c)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Oh(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],c=o+a.length;o>e&&s&&(i+=r),e<c&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=c+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Qs))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let c=this.children[i],h=e.children[s];if(c!=h)return r+c.scanIdentical(h,n);r+=c.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let y of e)r+=y.lines;if(r<32){let y=[];for(let b of e)b.flatten(y);return new rn(y,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],c=0,h=-1,f=[];function d(y){let b;if(y.lines>s&&y instanceof Qs)for(let w of y.children)d(w);else y.lines>o&&(c>o||!c)?(m(),a.push(y)):y instanceof rn&&c&&(b=f[f.length-1])instanceof rn&&y.lines+b.lines<=32?(c+=y.lines,h+=y.length+1,f[f.length-1]=new rn(b.text.concat(y.text),b.length+1+y.length)):(c+y.lines>i&&m(),c+=y.lines,h+=y.length+1,f.push(y))}function m(){c!=0&&(a.push(f.length==1?f[0]:Qs.from(f,h)),h=-1,c=f.length=0)}for(let y of e)d(y);return m(),a.length==1?a[0]:new Qs(a,n)}}dt.empty=new rn([""],0);function Eae(t){let e=-1;for(let n of t)e+=n.length+1;return e}function xb(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],c=i+a.length;c>=n&&(c>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=c+1}return e}function VI(t,e,n){return xb(t,[""],e,n)}class Cp{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof rn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof rn?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof rn){let c=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,c.length>Math.max(0,e))return this.value=e==0?c:n>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=i.children[o+(n<0?-1:0)];e>c.length?(e-=c.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(c),this.offsets.push(n>0?1:(c instanceof rn?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class H7{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Cp(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class U7{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(dt.prototype[Symbol.iterator]=function(){return this.iter()},Cp.prototype[Symbol.iterator]=H7.prototype[Symbol.iterator]=U7.prototype[Symbol.iterator]=function(){return this});class Tae{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function Oh(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Xn(t,e,n=!0,r=!0){return Aae(t,e,n,r)}function Rae(t){return t>=56320&&t<57344}function Mae(t){return t>=55296&&t<56320}function qr(t,e){let n=t.charCodeAt(e);if(!Mae(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Rae(r)?(n-55296<<10)+(r-56320)+65536:n}function FE(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Zs(t){return t<65536?1:2}const DC=/\r\n?|\n/;var Mr=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(Mr||(Mr={}));class lo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){LC(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new lo(e)}composeDesc(e){return this.empty?e:e.empty?this:q7(this,e)}mapDesc(e,n=!1){return e.empty?this:IC(this,e,n)}mapPos(e,n=-1,r=Mr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],c=this.sections[o++],h=i+a;if(c<0){if(h>e)return s+(e-i);s+=a}else{if(r!=Mr.Simple&&h>=e&&(r==Mr.TrackDel&&i<e&&h>e||r==Mr.TrackBefore&&i<e||r==Mr.TrackAfter&&h>e))return null;if(h>e||h==e&&n<0&&!a)return e==i||n<0?s:s+c;s+=c}i=h}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new lo(e)}static create(e){return new lo(e)}}class An extends lo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return LC(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return IC(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let c=i>>1;for(;r.length<c;)r.push(dt.empty);r.push(o?e.slice(s,s+o):dt.empty)}s+=o}return new An(n,r)}compose(e){return this.empty?e:e.empty?this:q7(this,e,!0)}map(e,n=!1){return e.empty?this:IC(this,e,n,!0)}iterChanges(e,n=!1){LC(this,e,n)}get desc(){return lo.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Qp(this);e:for(let o=0,a=0;;){let c=o==e.length?1e9:e[o++];for(;a<c||a==c&&s.len==0;){if(s.done)break e;let f=Math.min(s.len,c-a);fr(i,f,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;fr(n,f,d),d>0&&nl(r,n,s.text),s.forward(f),a+=f}let h=e[o++];for(;a<h;){if(s.done)break e;let f=Math.min(s.len,h-a);fr(n,f,-1),fr(i,f,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(f),a+=f}}return{changes:new An(n,r),filtered:lo.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function c(f=!1){if(!f&&!i.length)return;o<n&&fr(i,n-o,-1);let d=new An(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function h(f){if(Array.isArray(f))for(let d of f)h(d);else if(f instanceof An){if(f.length!=n)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${n})`);c(),a=a?a.compose(f.map(a)):f}else{let{from:d,to:m=d,insert:y}=f;if(d>m||d<0||m>n)throw new RangeError(`Invalid change range ${d} to ${m} (in doc of length ${n})`);let b=y?typeof y=="string"?dt.of(y.split(r||DC)):y:dt.empty,w=b.length;if(d==m&&w==0)return;d<o&&c(),d>o&&fr(i,d-o,-1),fr(i,m-d,w),nl(s,i,b),o=m}}return h(e),c(!a),a}static empty(e){return new An(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(dt.empty);r[i]=dt.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new An(n,r)}static createSet(e,n){return new An(e,n)}}function fr(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function nl(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(dt.empty);t.push(n)}}function LC(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],c=t.sections[o++];if(c<0)i+=a,s+=a;else{let h=i,f=s,d=dt.empty;for(;h+=a,f+=c,c&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],c=t.sections[o++];e(i,h,s,f,d),i=h,s=f}}}function IC(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Qp(t),a=new Qp(e);for(let c=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let h=Math.min(o.len,a.len);fr(i,h,-1),o.forward(h),a.forward(h)}else if(a.ins>=0&&(o.ins<0||c==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let h=a.len;for(fr(i,a.ins,-1);h;){let f=Math.min(o.len,h);o.ins>=0&&c<o.i&&o.len<=f&&(fr(i,0,o.ins),s&&nl(s,i,o.text),c=o.i),o.forward(f),h-=f}a.next()}else if(o.ins>=0){let h=0,f=o.len;for(;f;)if(a.ins==-1){let d=Math.min(f,a.len);h+=d,f-=d,a.forward(d)}else if(a.ins==0&&a.len<f)f-=a.len,a.next();else break;fr(i,h,c<o.i?o.ins:0),s&&c<o.i&&nl(s,i,o.text),c=o.i,o.forward(o.len-f)}else{if(o.done&&a.done)return s?An.createSet(i,s):lo.create(i);throw new Error("Mismatched change set lengths")}}}function q7(t,e,n=!1){let r=[],i=n?[]:null,s=new Qp(t),o=new Qp(e);for(let a=!1;;){if(s.done&&o.done)return i?An.createSet(r,i):lo.create(r);if(s.ins==0)fr(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)fr(r,0,o.ins,a),i&&nl(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let c=Math.min(s.len2,o.len),h=r.length;if(s.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;fr(r,c,f,a),i&&f&&nl(i,r,o.text)}else o.ins==-1?(fr(r,s.off?0:s.len,c,a),i&&nl(i,r,s.textBit(c))):(fr(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&nl(i,r,o.text));a=(s.ins>c||o.ins>=0&&o.len>c)&&(a||r.length>h),s.forward2(c),o.forward(c)}}}}class Qp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?dt.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?dt.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class cc{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new cc(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return fe.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return fe.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,n,r){return new cc(e,n,r)}}class fe{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:fe.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,n=!0){return fe.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,fe.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(n=>cc.fromJSON(n)),e.main)}static single(e,n=e){return new fe([fe.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return fe.normalized(e.slice(),n);r=s.to}return new fe(e,n)}static cursor(e,n=0,r,i){return cc.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?cc.create(n,e,48|s):cc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,c=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?fe.range(c,a):fe.range(a,c))}}return new fe(e,n)}}function W7(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let zE=0;class Ce{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=zE++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ce(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:HE),!!e.static,e.enables)}of(e){return new wb([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new wb(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new wb(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function HE(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class wb{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=zE++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,c=!1,h=!1,f=[];for(let d of this.dependencies)d=="doc"?c=!0:d=="selection"?h=!0:(((n=e[d.id])!==null&&n!==void 0?n:1)&1)==0&&f.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,m){if(c&&m.docChanged||h&&(m.docChanged||m.selection)||NC(d,f)){let y=r(d);if(a?!FI(y,d.values[o],i):!i(y,d.values[o]))return d.values[o]=y,1}return 0},reconfigure:(d,m)=>{let y,b=m.config.address[s];if(b!=null){let w=fv(m,b);if(this.dependencies.every(S=>S instanceof Ce?m.facet(S)===d.facet(S):S instanceof Zn?m.field(S,!1)==d.field(S,!1):!0)||(a?FI(y=r(d),w,i):i(y=r(d),w)))return d.values[o]=w,0}else y=r(d);return d.values[o]=y,1}}}}function FI(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function NC(t,e){let n=!1;for(let r of e)Ap(t,r)&1&&(n=!0);return n}function Oae(t,e,n){let r=n.map(c=>t[c.id]),i=n.map(c=>c.type),s=r.filter(c=>!(c&1)),o=t[e.id]>>1;function a(c){let h=[];for(let f=0;f<r.length;f++){let d=fv(c,r[f]);if(i[f]==2)for(let m of d)h.push(m);else h.push(d)}return e.combine(h)}return{create(c){for(let h of r)Ap(c,h);return c.values[o]=a(c),1},update(c,h){if(!NC(c,s))return 0;let f=a(c);return e.compare(f,c.values[o])?0:(c.values[o]=f,1)},reconfigure(c,h){let f=NC(c,r),d=h.config.facets[e.id],m=h.facet(e);if(d&&!f&&HE(n,d))return c.values[o]=m,0;let y=a(c);return e.compare(y,m)?(c.values[o]=m,0):(c.values[o]=y,1)}}}const dy=Ce.define({static:!0});class Zn{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Zn(zE++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(dy).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(dy),o=i.facet(dy),a;return(a=s.find(c=>c.field==this))&&a!=o.find(c=>c.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,dy.of({field:this,create:e})]}get extension(){return this}}const ic={lowest:4,low:3,default:2,high:1,highest:0};function Rd(t){return e=>new G7(e,t)}const Bc={highest:Rd(ic.highest),high:Rd(ic.high),default:Rd(ic.default),low:Rd(ic.low),lowest:Rd(ic.lowest)};class G7{constructor(e,n){this.inner=e,this.prec=n}}class Hx{of(e){return new BC(this,e)}reconfigure(e){return Hx.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class BC{constructor(e,n){this.compartment=e,this.inner=n}}class hv{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let m of Pae(e,n,o))m instanceof Zn?i.push(m):(s[m.facet.id]||(s[m.facet.id]=[])).push(m);let a=Object.create(null),c=[],h=[];for(let m of i)a[m.id]=h.length<<1,h.push(y=>m.slot(y));let f=r?.config.facets;for(let m in s){let y=s[m],b=y[0].facet,w=f&&f[m]||[];if(y.every(S=>S.type==0))if(a[b.id]=c.length<<1|1,HE(w,y))c.push(r.facet(b));else{let S=b.combine(y.map(_=>_.value));c.push(r&&b.compare(S,r.facet(b))?r.facet(b):S)}else{for(let S of y)S.type==0?(a[S.id]=c.length<<1|1,c.push(S.value)):(a[S.id]=h.length<<1,h.push(_=>S.dynamicSlot(_)));a[b.id]=h.length<<1,h.push(S=>Oae(S,b,y))}}let d=h.map(m=>m(a));return new hv(e,o,d,a,c,s)}}function Pae(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let c=i.get(o);if(c!=null){if(c<=a)return;let h=r[c].indexOf(o);h>-1&&r[c].splice(h,1),o instanceof BC&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let h of o)s(h,a);else if(o instanceof BC){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;n.set(o.compartment,h),s(h,a)}else if(o instanceof G7)s(o.inner,o.prec);else if(o instanceof Zn)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof wb)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,ic.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,a)}}return s(t,ic.default),r.reduce((o,a)=>o.concat(a))}function Ap(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function fv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const K7=Ce.define(),jC=Ce.define({combine:t=>t.some(e=>e),static:!0}),Y7=Ce.define({combine:t=>t.length?t[0]:void 0,static:!0}),X7=Ce.define(),J7=Ce.define(),Q7=Ce.define(),Z7=Ce.define({combine:t=>t.length?t[0]:!1});class sa{constructor(e,n){this.type=e,this.value=n}static define(){return new Dae}}class Dae{of(e){return new sa(this,e)}}class Lae{constructor(e){this.map=e}of(e){return new Qe(this,e)}}class Qe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Qe(this.type,n)}is(e){return this.type==e}static define(e={}){return new Lae(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Qe.reconfigure=Qe.define();Qe.appendConfig=Qe.define();class kn{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&W7(r,n.newLength),s.some(a=>a.type==kn.time)||(this.annotations=s.concat(kn.time.of(Date.now())))}static create(e,n,r,i,s,o){return new kn(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(kn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}kn.time=sa.define();kn.userEvent=sa.define();kn.addToHistory=sa.define();kn.remote=sa.define();function Iae(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function eV(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=An.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Qe.mapEffects(t.effects,i).concat(Qe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function $C(t,e,n){let r=e.selection,i=bh(e.annotations);return e.userEvent&&(i=i.concat(kn.userEvent.of(e.userEvent))),{changes:e.changes instanceof An?e.changes:An.of(e.changes||[],n,t.facet(Y7)),selection:r&&(r instanceof fe?r:fe.single(r.anchor,r.head)),effects:bh(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function tV(t,e,n){let r=$C(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=eV(r,$C(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=kn.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Bae(n?Nae(i):i)}function Nae(t){let e=t.startState,n=!0;for(let i of e.facet(X7)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Iae(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=An.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=kn.create(e,i,t.selection&&t.selection.map(s),Qe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(J7);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof kn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof kn?t=s[0]:t=tV(e,bh(s),!1)}return t}function Bae(t){let e=t.startState,n=e.facet(Q7),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=eV(r,$C(e,s,t.changes.newLength),!0))}return r==t?t:kn.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const jae=[];function bh(t){return t==null?jae:Array.isArray(t)?t:[t]}var zt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(zt||(zt={}));const $ae=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let VC;try{VC=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Vae(t){if(VC)return VC.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||$ae.test(n)))return!0}return!1}function Fae(t){return e=>{if(!/\S/.test(e))return zt.Space;if(Vae(e))return zt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return zt.Word;return zt.Other}}class ht{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ap(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Ap(this,r),fv(this,r)}update(...e){return tV(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(Hx.reconfigure)?(n&&(i=new Map,n.compartments.forEach((c,h)=>i.set(h,c)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Qe.reconfigure)?(n=null,r=a.value):a.is(Qe.appendConfig)&&(n=null,r=bh(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=hv.resolve(r,i,this),s=new ht(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let o=e.startState.facet(jC)?e.newSelection:e.newSelection.asSingle();new ht(n,e.newDoc,o,s,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:fe.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=bh(r.effects);for(let a=1;a<n.ranges.length;a++){let c=e(n.ranges[a]),h=this.changes(c.changes),f=h.map(i);for(let m=0;m<a;m++)s[m]=s[m].map(f);let d=i.mapDesc(h,!0);s.push(c.range.map(d)),i=i.compose(f),o=Qe.mapEffects(o,f).concat(Qe.mapEffects(bh(c.effects),d))}return{changes:i,selection:fe.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof An?e:An.of(e,this.doc.length,this.facet(ht.lineSeparator))}toText(e){return dt.of(e.split(this.facet(ht.lineSeparator)||DC))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Ap(this,n),fv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Zn&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(c=>o.spec.fromJSON(a,c)))}}return ht.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=hv.resolve(e.extensions||[],new Map),r=e.doc instanceof dt?e.doc:dt.of((e.doc||"").split(n.staticFacet(ht.lineSeparator)||DC)),i=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return W7(i,r.length),n.staticFacet(jC)||(i=i.asSingle()),new ht(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ht.tabSize)}get lineBreak(){return this.facet(ht.lineSeparator)||`
`}get readOnly(){return this.facet(Z7)}phrase(e,...n){for(let r of this.facet(ht.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(K7))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return Fae(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let c=Xn(n,o,!1);if(s(n.slice(c,o))!=zt.Word)break;o=c}for(;a<i;){let c=Xn(n,a);if(s(n.slice(a,c))!=zt.Word)break;a=c}return o==a?null:fe.range(o+r,a+r)}}ht.allowMultipleSelections=jC;ht.tabSize=Ce.define({combine:t=>t.length?t[0]:4});ht.lineSeparator=Y7;ht.readOnly=Z7;ht.phrases=Ce.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ht.languageData=K7;ht.changeFilter=X7;ht.transactionFilter=J7;ht.transactionExtender=Q7;Hx.reconfigure=Qe.define();function xo(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Cc{eq(e){return this==e}range(e,n=e){return FC.create(e,n,this)}}Cc.prototype.startSide=Cc.prototype.endSide=0;Cc.prototype.point=!1;Cc.prototype.mapMode=Mr.TrackDel;let FC=class nV{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new nV(e,n,r)}};function zC(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class UE{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let c=o+a>>1,h=s[c]-e||(r?this.value[c].endSide:this.value[c].startSide)-n;if(c==o)return h>=0?o:a;h>=0?a=c:o=c+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],f=this.from[c]+e,d=this.to[c]+e,m,y;if(f==d){let b=n.mapPos(f,h.startSide,h.mapMode);if(b==null||(m=y=b,h.startSide!=h.endSide&&(y=n.mapPos(f,h.endSide),y<m)))continue}else if(m=n.mapPos(f,h.startSide),y=n.mapPos(d,h.endSide),m>y||m==y&&h.startSide>0&&h.endSide<=0)continue;(y-m||h.endSide-h.startSide)<0||(o<0&&(o=m),h.point&&(a=Math.max(a,y-m)),r.push(h),i.push(m-o),s.push(y-o))}return{mapped:r.length?new UE(i,s,r,a):null,pos:o}}}class ft{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ft(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(zC)),this.isEmpty)return n.length?ft.of(n):this;let a=new rV(this,null,-1).goto(0),c=0,h=[],f=new Xo;for(;a.value||c<n.length;)if(c<n.length&&(a.from-n[c].from||a.startSide-n[c].value.startSide)>=0){let d=n[c++];f.addInner(d.from,d.to,d.value)||h.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==n.length||this.chunkEnd(a.chunkIndex)<n[c].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&f.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(f.addInner(a.from,a.to,a.value)||h.push(FC.create(a.from,a.to,a.value))),a.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?ft.empty:this.nextLayer.update({add:h,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],c=this.chunk[o],h=e.touchesRange(a,a+c.length);if(h===!1)i=Math.max(i,c.maxPoint),n.push(c),r.push(e.mapPos(a));else if(h===!0){let{mapped:f,pos:d}=c.map(a,e);f&&(i=Math.max(i,f.maxPoint),n.push(f),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ft(r,n,s||ft.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Zp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Zp.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),c=zI(o,a,r),h=new Md(o,c,s),f=new Md(a,c,s);r.iterGaps((d,m,y)=>HI(h,d,f,m,y,i)),r.empty&&r.length==0&&HI(h,0,f,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(f=>!f.isEmpty&&n.indexOf(f)<0),o=n.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=zI(s,o),c=new Md(s,a,0).goto(r),h=new Md(o,a,0).goto(r);for(;;){if(c.to!=h.to||!HC(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>i)return!0;c.next(),h.next()}}static spans(e,n,r,i,s=-1){let o=new Md(e,null,s).goto(n),a=n,c=o.openStart;for(;;){let h=Math.min(o.to,r);if(o.point){let f=o.activeForPoint(o.to),d=o.pointFrom<n?f.length+1:o.point.startSide<0?f.length:Math.min(f.length,c);i.point(a,h,o.point,f,d,o.pointRank),c=Math.min(o.openEnd(h),f.length)}else h>a&&(i.span(a,h,o.active,c),c=o.openEnd(h));if(o.to>r)return c+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Xo;for(let i of e instanceof FC?[e]:n?zae(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ft.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ft.empty;i=i.nextLayer)n=new ft(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ft.empty=new ft([],[],null,-1);function zae(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(zC(e,r)>0)return t.slice().sort(zC);e=r}return t}ft.empty.nextLayer=ft.empty;class Xo{finishChunk(e){this.chunks.push(new UE(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Xo)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ft.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ft.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function zI(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class rV{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Zp{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new rV(o,n,r,s));return i.length==1?i[0]:new Zp(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)bS(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)bS(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),bS(this.heap,0)}}}function bS(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Md{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Zp.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){py(this.active,e),py(this.activeTo,e),py(this.activeRank,e),this.minActive=UI(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;my(this.active,n,r),my(this.activeTo,n,i),my(this.activeRank,n,s),e&&my(e,n,this.cursor.from),this.minActive=UI(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&py(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function HI(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,c=r-e;for(;;){let h=t.to+c-n.to,f=h||t.endSide-n.endSide,d=f<0?t.to+c:n.to,m=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&HC(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,m,t.point,n.point):m>a&&!HC(t.active,n.active)&&s.compareRange(a,m,t.active,n.active),d>o)break;(h||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,f<=0&&t.next(),f>=0&&n.next()}}function HC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function py(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function my(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function UI(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Jh(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Xn(t,i));return r}function UC(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Xn(t,i)}return r===!0?-1:t.length}const qC="",qI=typeof Symbol>"u"?"__"+qC:Symbol.for(qC),WC=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),WI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class pl{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,c,h){let f=[],d=/^@(\w+)\b/.exec(o[0]),m=d&&d[1]=="keyframes";if(d&&a==null)return c.push(o[0]+";");for(let y in a){let b=a[y];if(/&/.test(y))s(y.split(/,\s*/).map(w=>o.map(S=>w.replace(/&/,S))).reduce((w,S)=>w.concat(S)),b,c);else if(b&&typeof b=="object"){if(!d)throw new RangeError("The value of a property ("+y+") should be a primitive value.");s(i(y),b,f,m)}else b!=null&&f.push(y.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+b+";")}(f.length||m)&&c.push((r&&!d&&!h?o.map(r):o).join(", ")+" {"+f.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=WI[qI]||1;return WI[qI]=e+1,qC+e.toString(36)}static mount(e,n,r){let i=e[WC],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Hae(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let GI=new Map;class Hae{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=GI.get(r);if(s)return e[WC]=s;this.sheet=new i.CSSStyleSheet,GI.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[WC]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],c=this.modules.indexOf(a);if(c<s&&c>-1&&(this.modules.splice(c,1),s--,c=-1),c==-1){if(this.modules.splice(s++,0,a),r)for(let h=0;h<a.rules.length;h++)r.insertRule(a.rules[h],i++)}else{for(;s<c;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let c=0;c<this.modules.length;c++)o+=this.modules[c].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ml={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},em={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Uae=typeof navigator<"u"&&/Mac/.test(navigator.platform),qae=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Yn=0;Yn<10;Yn++)ml[48+Yn]=ml[96+Yn]=String(Yn);for(var Yn=1;Yn<=24;Yn++)ml[Yn+111]="F"+Yn;for(var Yn=65;Yn<=90;Yn++)ml[Yn]=String.fromCharCode(Yn+32),em[Yn]=String.fromCharCode(Yn);for(var vS in ml)em.hasOwnProperty(vS)||(em[vS]=ml[vS]);function Wae(t){var e=Uae&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||qae&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?em:ml)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function At(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)iV(t,arguments[e]);return t}function iV(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)iV(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function tm(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function GC(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Sb(t,e){if(!e.anchorNode)return!1;try{return GC(t,e.anchorNode)}catch{return!1}}function nm(t){return t.nodeType==3?kc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function kp(t,e,n,r){return n?KI(t,e,n,r,-1)||KI(t,e,n,r,1):!1}function Ac(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function dv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function KI(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:go(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Ac(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?go(t):0}else return!1}}function go(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ux(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Gae(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function sV(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Kae(t,e,n,r,i,s,o,a){let c=t.ownerDocument,h=c.defaultView||window;for(let f=t,d=!1;f&&!d;)if(f.nodeType==1){let m,y=f==c.body,b=1,w=1;if(y)m=Gae(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(d=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let A=f.getBoundingClientRect();({scaleX:b,scaleY:w}=sV(f,A)),m={left:A.left,right:A.left+f.clientWidth*b,top:A.top,bottom:A.top+f.clientHeight*w}}let S=0,_=0;if(i=="nearest")e.top<m.top?(_=e.top-(m.top+o),n>0&&e.bottom>m.bottom+_&&(_=e.bottom-m.bottom+o)):e.bottom>m.bottom&&(_=e.bottom-m.bottom+o,n<0&&e.top-_<m.top&&(_=e.top-(m.top+o)));else{let A=e.bottom-e.top,k=m.bottom-m.top;_=(i=="center"&&A<=k?e.top+A/2-k/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-k+o)-m.top}if(r=="nearest"?e.left<m.left?(S=e.left-(m.left+s),n>0&&e.right>m.right+S&&(S=e.right-m.right+s)):e.right>m.right&&(S=e.right-m.right+s,n<0&&e.left<m.left+S&&(S=e.left-(m.left+s))):S=(r=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:r=="start"==a?e.left-s:e.right-(m.right-m.left)+s)-m.left,S||_)if(y)h.scrollBy(S,_);else{let A=0,k=0;if(_){let P=f.scrollTop;f.scrollTop+=_/w,k=(f.scrollTop-P)*w}if(S){let P=f.scrollLeft;f.scrollLeft+=S/b,A=(f.scrollLeft-P)*b}e={left:e.left-A,top:e.top-k,right:e.right-A,bottom:e.bottom-k},A&&Math.abs(A-S)<1&&(r="nearest"),k&&Math.abs(k-_)<1&&(i="nearest")}if(y)break;(e.top<m.top||e.bottom>m.bottom||e.left<m.left||e.right>m.right)&&(e={left:Math.max(e.left,m.left),right:Math.min(e.right,m.right),top:Math.max(e.top,m.top),bottom:Math.min(e.bottom,m.bottom)}),f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function Yae(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Xae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?go(n):0),r,Math.min(e.focusOffset,r?go(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let $u=null;function oV(t){if(t.setActive)return t.setActive();if($u)return t.focus($u);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus($u==null?{get preventScroll(){return $u={preventScroll:!0},!0}}:void 0),!$u){$u=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let YI;function kc(t,e,n=e){let r=YI||(YI=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function vh(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Jae(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function aV(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Qae(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,go(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=go(n))}else{if(n==t)return!0;r=Ac(n),n=n.parentNode}}function lV(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function cV(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=go(n)}else if(n.parentNode&&!dv(n))r=Ac(n),n=n.parentNode;else return null}}function uV(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!dv(n))r=Ac(n)+1,n=n.parentNode;else return null}}class dr{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new dr(e.parentNode,Ac(e),n)}static after(e,n){return new dr(e.parentNode,Ac(e)+1,n)}}const qE=[];class Tt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Tt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=XI(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=XI(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=go(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Tt.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let c=0,h=r,f=r;c<this.children.length;c++){let d=this.children[c],m=h+d.length;if(h<e&&m>n)return d.domBoundsAround(e,n,h);if(m>=e&&i==-1&&(i=c,s=h),h>n&&d.dom.parentNode==this.dom){o=c,a=f;break}f=m,h=m+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=qE){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new hV(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Tt.prototype.breakAfter=0;function XI(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class hV{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function fV(t,e,n,r,i,s,o,a,c){let{children:h}=t,f=h.length?h[e]:null,d=s.length?s[s.length-1]:null,m=d?d.breakAfter:o;if(!(e==r&&f&&!o&&!m&&s.length<2&&f.merge(n,i,s.length?d:null,n==0,a,c))){if(r<h.length){let y=h[r];y&&(i<y.length||y.breakAfter&&d?.breakAfter)?(e==r&&(y=y.split(i),i=0),!m&&d&&y.merge(0,i,d,!0,0,c)?s[s.length-1]=y:((i||y.children.length&&!y.children[0].length)&&y.merge(0,i,null,!1,0,c),s.push(y))):y?.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(f&&(f.breakAfter=o,n>0&&(!o&&s.length&&f.merge(n,f.length,s[0],!1,a,0)?f.breakAfter=s.shift().breakAfter:(n<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(n,f.length,null,!1,a,0),e++));e<r&&s.length;)if(h[r-1].become(s[s.length-1]))r--,s.pop(),c=s.length?0:a;else if(h[e].become(s[0]))e++,s.shift(),a=s.length?0:c;else break;!s.length&&e&&r<h.length&&!h[e-1].breakAfter&&h[r].merge(0,0,h[e-1],!1,a,c)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function dV(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:c}=o.findPos(n,1),{i:h,off:f}=o.findPos(e,-1),d=e-n;for(let m of r)d+=m.length;t.length+=d,fV(t,h,f,a,c,r,0,i,s)}let Wr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},KC=typeof document<"u"?document:{documentElement:{style:{}}};const YC=/Edge\/(\d+)/.exec(Wr.userAgent),pV=/MSIE \d/.test(Wr.userAgent),XC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wr.userAgent),qx=!!(pV||XC||YC),JI=!qx&&/gecko\/(\d+)/i.test(Wr.userAgent),xS=!qx&&/Chrome\/(\d+)/.exec(Wr.userAgent),Zae="webkitFontSmoothing"in KC.documentElement.style,mV=!qx&&/Apple Computer/.test(Wr.vendor),QI=mV&&(/Mobile\/\w+/.test(Wr.userAgent)||Wr.maxTouchPoints>2);var Se={mac:QI||/Mac/.test(Wr.platform),windows:/Win/.test(Wr.platform),linux:/Linux|X11/.test(Wr.platform),ie:qx,ie_version:pV?KC.documentMode||6:XC?+XC[1]:YC?+YC[1]:0,gecko:JI,gecko_version:JI?+(/Firefox\/(\d+)/.exec(Wr.userAgent)||[0,0])[1]:0,chrome:!!xS,chrome_version:xS?+xS[1]:0,ios:QI,android:/Android\b/.test(Wr.userAgent),safari:mV,webkit_version:Zae?+(/\bAppleWebKit\/(\d+)/.exec(Wr.userAgent)||[0,0])[1]:0,tabSize:KC.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const ele=256;class _s extends Tt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof _s)||this.length-(n-e)+r.length>ele||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new _s(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new dr(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return tle(this.dom,e,n)}}class Jo extends Tt{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(aV(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof Jo&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(dV(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let c=r+a.length;c>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=c,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Jo(this.mark,n,o)}domAtPos(e){return gV(this,e)}coordsAt(e,n){return bV(this,e,n)}}function tle(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Se.chrome||Se.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=kc(t,i,s).getClientRects();if(!a.length)return null;let c=a[(o?o<0:n>=0)?0:a.length-1];return Se.safari&&!o&&c.width==0&&(c=Array.prototype.find.call(a,h=>h.width)||c),o?Ux(c,o<0):c||null}class rl extends Tt{static create(e,n,r){return new rl(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=rl.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof rl)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof rl&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return dt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):dt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?dr.before(this.dom):dr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Ux(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ph extends Tt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ph&&e.side==this.side}split(){return new Ph(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?dr.before(this.dom):dr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return dt.empty}get isHidden(){return!0}}_s.prototype.children=rl.prototype.children=Ph.prototype.children=qE;function gV(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new dr(n,0)}function yV(t,e,n){let r,{children:i}=t;n>0&&e instanceof Jo&&i.length&&(r=i[i.length-1])instanceof Jo&&r.mark.eq(e.mark)?yV(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function bV(t,e,n){let r=null,i=-1,s=null,o=-1;function a(h,f){for(let d=0,m=0;d<h.children.length&&m<=f;d++){let y=h.children[d],b=m+y.length;b>=f&&(y.children.length?a(y,f-m):(!s||s.isHidden&&(n>0||rle(s,y)))&&(b>f||m==b&&y.getSide()>0)?(s=y,o=f-m):(m<f||m==b&&y.getSide()<0&&!y.isHidden)&&(r=y,i=f-m)),m=b}}a(t,e);let c=(n<0?r:s)||r||s;return c?c.coordsAt(Math.max(0,c==r?i:o),n):nle(t)}function nle(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=nm(e);return n[n.length-1]||null}function rle(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function JC(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const ZI=Object.create(null);function pv(t,e,n){if(t==e)return!0;t||(t=ZI),e||(e=ZI);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function QC(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function ile(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class wl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Dr=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(Dr||(Dr={}));class Ue extends Cc{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Fm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new gl(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=vV(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new gl(e,r,i,n,e.widget||null,!0)}static line(e){return new zm(e)}static set(e,n=!1){return ft.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ue.none=ft.empty;class Fm extends Ue{constructor(e){let{start:n,end:r}=vV(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Fm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&pv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Fm.prototype.point=!1;class zm extends Ue{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof zm&&this.spec.class==e.spec.class&&pv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}zm.prototype.mapMode=Mr.TrackBefore;zm.prototype.point=!0;class gl extends Ue{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Mr.TrackBefore:Mr.TrackAfter:Mr.TrackDel}get type(){return this.startSide!=this.endSide?Dr.WidgetRange:this.startSide<=0?Dr.WidgetBefore:Dr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof gl&&sle(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}gl.prototype.point=!0;function vV(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function sle(t,e){return t==e||!!(t&&e&&t.compare(e))}function _b(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class un extends Tt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof un))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),dV(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new un;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){pv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){yV(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=JC(n,this.attrs||{})),r&&(this.attrs=JC({class:r},this.attrs||{}))}domAtPos(e){return gV(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(aV(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(QC(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Tt.get(i)instanceof Jo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Tt.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Se.ios||!this.children.some(s=>s instanceof _s))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof _s)||/[^ -~]/.test(r.text))return null;let i=nm(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=bV(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof un&&this.children.length==0&&e.children.length==0&&pv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof un)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Wo extends Tt{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Wo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?dr.before(this.dom):dr.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Wo(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return qE}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):dt.empty}domBoundsAround(){return null}become(e){return e instanceof Wo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof ZC?null:Ux(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class ZC extends wl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Ep{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Wo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new un),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(gy(new Ph(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Wo)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(gy(new _s(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof gl){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof gl)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Wo(r.widget||Dh.block,a,r));else{let c=rl.create(r.widget||Dh.inline,a,a?0:r.startSide),h=this.atCursorPos&&!c.isEditable&&s<=i.length&&(e<n||r.startSide>0),f=!c.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),h&&(d.append(gy(new Ph(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(gy(c,i),s),this.atCursorPos=f,this.pendingBuffer=f?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new Ep(e,n,r,s);return o.openEnd=ft.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function gy(t,e){for(let n of e)t=new Jo(n,[t],t.length);return t}class Dh extends wl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Dh.inline=new Dh("span");Dh.block=new Dh("div");var Bt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(Bt||(Bt={}));const Ec=Bt.LTR,WE=Bt.RTL;function xV(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const ole=xV("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ale=xV("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),eA=Object.create(null),Hs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);eA[e]=n,eA[n]=-e}function wV(t){return t<=247?ole[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?ale[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const lle=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class il{get dir(){return this.level%2?WE:Ec}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function SV(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!SV(r.inner,i.inner))return!1}return!0}const kt=[];function cle(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,c=s?256:i;for(let h=o,f=c,d=c;h<a;h++){let m=wV(t.charCodeAt(h));m==512?m=f:m==8&&d==4&&(m=16),kt[h]=m==4?2:m,m&7&&(d=m),f=m}for(let h=o,f=c,d=c;h<a;h++){let m=kt[h];if(m==128)h<a-1&&f==kt[h+1]&&f&24?m=kt[h]=f:kt[h]=256;else if(m==64){let y=h+1;for(;y<a&&kt[y]==64;)y++;let b=h&&f==8||y<n&&kt[y]==8?d==1?1:8:256;for(let w=h;w<y;w++)kt[w]=b;h=y-1}else m==8&&d==1&&(kt[h]=1);f=m,m&7&&(d=m)}}}function ule(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,c=0;o<=r.length;o++){let h=o?r[o-1].to:e,f=o<r.length?r[o].from:n;for(let d=h,m,y,b;d<f;d++)if(y=eA[m=t.charCodeAt(d)])if(y<0){for(let w=a-3;w>=0;w-=3)if(Hs[w+1]==-y){let S=Hs[w+2],_=S&2?i:S&4?S&1?s:i:0;_&&(kt[d]=kt[Hs[w]]=_),a=w;break}}else{if(Hs.length==189)break;Hs[a++]=d,Hs[a++]=m,Hs[a++]=c}else if((b=kt[d])==2||b==1){let w=b==i;c=w?0:1;for(let S=a-3;S>=0;S-=3){let _=Hs[S+2];if(_&2)break;if(w)Hs[S+2]|=2;else{if(_&4)break;Hs[S+2]|=4}}}}}function hle(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let c=o;c<a;){let h=kt[c];if(h==256){let f=c+1;for(;;)if(f==a){if(i==n.length)break;f=n[i++].to,a=i<n.length?n[i].from:e}else if(kt[f]==256)f++;else break;let d=s==1,m=(f<e?kt[f]:r)==1,y=d==m?d?1:2:r;for(let b=f,w=i,S=w?n[w-1].to:t;b>c;)b==S&&(b=n[--w].from,S=w?n[w-1].to:t),kt[--b]=y;c=f}else s=h,c++}}}function tA(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let c=e,h=0;c<n;){let f=!0,d=!1;if(h==s.length||c<s[h].from){let w=kt[c];w!=a&&(f=!1,d=w==16)}let m=!f&&a==1?[]:null,y=f?r:r+1,b=c;e:for(;;)if(h<s.length&&b==s[h].from){if(d)break e;let w=s[h];if(!f)for(let S=w.to,_=h+1;;){if(S==n)break e;if(_<s.length&&s[_].from==S)S=s[_++].to;else{if(kt[S]==a)break e;break}}if(h++,m)m.push(w);else{w.from>c&&o.push(new il(c,w.from,y));let S=w.direction==Ec!=!(y%2);nA(t,S?r+1:r,i,w.inner,w.from,w.to,o),c=w.to}b=w.to}else{if(b==n||(f?kt[b]!=a:kt[b]==a))break;b++}m?tA(t,c,b,r+1,i,m,o):c<b&&o.push(new il(c,b,y)),c=b}else for(let c=n,h=s.length;c>e;){let f=!0,d=!1;if(!h||c>s[h-1].to){let w=kt[c-1];w!=a&&(f=!1,d=w==16)}let m=!f&&a==1?[]:null,y=f?r:r+1,b=c;e:for(;;)if(h&&b==s[h-1].to){if(d)break e;let w=s[--h];if(!f)for(let S=w.from,_=h;;){if(S==e)break e;if(_&&s[_-1].to==S)S=s[--_].from;else{if(kt[S-1]==a)break e;break}}if(m)m.push(w);else{w.to<c&&o.push(new il(w.to,c,y));let S=w.direction==Ec!=!(y%2);nA(t,S?r+1:r,i,w.inner,w.from,w.to,o),c=w.from}b=w.from}else{if(b==e||(f?kt[b-1]!=a:kt[b-1]==a))break;b--}m?tA(t,b,c,r+1,i,m,o):b<c&&o.push(new il(b,c,y)),c=b}}function nA(t,e,n,r,i,s,o){let a=e%2?2:1;cle(t,i,s,r,a),ule(t,i,s,r,a),hle(i,s,r,a),tA(t,i,s,e,n,r,o)}function fle(t,e,n){if(!t)return[new il(0,0,e==WE?1:0)];if(e==Ec&&!n.length&&!lle.test(t))return _V(t.length);if(n.length)for(;t.length>kt.length;)kt[kt.length]=256;let r=[],i=e==Ec?0:1;return nA(t,i,i,n,0,t.length,r),r}function _V(t){return[new il(0,t,0)]}let CV="";function dle(t,e,n,r,i){var s;let o=r.head-t.from,a=il.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),c=e[a],h=c.side(i,n);if(o==h){let m=a+=i?1:-1;if(m<0||m>=e.length)return null;c=e[a=m],o=c.side(!i,n),h=c.side(i,n)}let f=Xn(t.text,o,c.forward(i,n));(f<c.from||f>c.to)&&(f=h),CV=t.text.slice(Math.min(o,f),Math.max(o,f));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&f==h&&d.level+(i?0:1)<c.level?fe.cursor(d.side(!i,n)+t.from,d.forward(i,n)?1:-1,d.level):fe.cursor(f+t.from,c.forward(i,n)?-1:1,c.level)}function ple(t,e,n){for(let r=e;r<n;r++){let i=wV(t.charCodeAt(r));if(i==1)return Ec;if(i==2||i==4)return WE}return Ec}const AV=Ce.define(),kV=Ce.define(),EV=Ce.define(),TV=Ce.define(),rA=Ce.define(),RV=Ce.define(),MV=Ce.define(),GE=Ce.define(),KE=Ce.define(),OV=Ce.define({combine:t=>t.some(e=>e)}),PV=Ce.define({combine:t=>t.some(e=>e)}),DV=Ce.define();class xh{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new xh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new xh(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const yy=Qe.define({map:(t,e)=>t.map(e)}),LV=Qe.define();function Kr(t,e,n){let r=t.facet(TV);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const qo=Ce.define({combine:t=>t.length?t[0]:!0});let mle=0;const th=Ce.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class gn{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(th.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(th.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new gn(mle++,e,r,i,a=>{let c=[];return o&&c.push(rm.of(h=>{let f=h.plugin(a);return f?o(f):Ue.none})),s&&c.push(s(a)),c})}static fromClass(e,n){return gn.define((r,i)=>new e(r,i),n)}}class wS{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Kr(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Kr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Kr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const IV=Ce.define(),YE=Ce.define(),rm=Ce.define(),NV=Ce.define(),Wx=Ce.define(),BV=Ce.define();function eN(t,e){let n=t.state.facet(BV);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ft.spans(r,e.from,e.to,{point(){},span(s,o,a,c){let h=s-e.from,f=o-e.from,d=i;for(let m=a.length-1;m>=0;m--,c--){let y=a[m].spec.bidiIsolate,b;if(y==null&&(y=ple(e.text,h,f)),c>0&&d.length&&(b=d[d.length-1]).to==h&&b.direction==y)b.to=f,d=b.inner;else{let w={from:h,to:f,direction:y,inner:[]};d.push(w),d=w.inner}}}}),i}const jV=Ce.define();function XE(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(jV)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const cp=Ce.define();class Ji{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Ji(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let c=i==e.length?null:e[i],h=o-a,f=c?c.fromB:1e9;for(;s<n.length&&n[s]<f;){let d=n[s],m=n[s+1],y=Math.max(a,d),b=Math.min(f,m);if(y<=b&&new Ji(y+h,b+h,y,b).addToSet(r),m>f)break;s+=2}if(!c)return r;new Ji(c.fromA,c.toA,c.fromB,c.toB).addToSet(r),o=c.toA,a=c.toB}}}class mv{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=An.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,c)=>i.push(new Ji(s,o,a,c))),this.changedRanges=i}static create(e,n,r){return new mv(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class tN extends Tt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ue.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new un],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ji(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:h,toA:f})=>f<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!Sle(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?yle(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:f}=this.hasComposition;r=new Ji(h,f,e.changes.mapPos(h,-1),e.changes.mapPos(f,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Se.ie||Se.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),c=xle(o,a,e.changes);return r=Ji.extendWithRanges(r,c),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Se.chrome||Se.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Wo&&o.widget instanceof ZC&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:c,toA:h,fromB:f,toB:d}=a,m,y,b,w;if(r&&r.range.fromB<d&&r.range.toB>f){let P=Ep.build(this.view.state.doc,f,r.range.fromB,this.decorations,this.dynamicDecorationMap),M=Ep.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);y=P.breakAtStart,b=P.openStart,w=M.openEnd;let O=this.compositionView(r);M.breakAtStart?O.breakAfter=1:M.content.length&&O.merge(O.length,O.length,M.content[0],!1,M.openStart,0)&&(O.breakAfter=M.content[0].breakAfter,M.content.shift()),P.content.length&&O.merge(0,0,P.content[P.content.length-1],!0,0,P.openEnd)&&P.content.pop(),m=P.content.concat(O).concat(M.content)}else({content:m,breakAtStart:y,openStart:b,openEnd:w}=Ep.build(this.view.state.doc,f,d,this.decorations,this.dynamicDecorationMap));let{i:S,off:_}=s.findPos(h,1),{i:A,off:k}=s.findPos(c,-1);fV(this,A,k,S,_,m,y,b,w)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(LV)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new _s(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Jo(i,[n],n.length);let r=new un;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(o);let a=Tt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(qo)||this.dom.tabIndex>-1)&&Sb(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(Se.gecko&&a.empty&&!this.hasComposition&&gle(c)){let d=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(d,c.node.childNodes[c.offset]||null)),c=h=new dr(d,0),o=!0}let f=this.view.observer.selectionRange;(o||!f.focusNode||(!kp(c.node,c.offset,f.anchorNode,f.anchorOffset)||!kp(h.node,h.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,a))&&(this.view.observer.ignore(()=>{Se.android&&Se.chrome&&this.dom.contains(f.focusNode)&&wle(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=tm(this.view.root);if(d)if(a.empty){if(Se.gecko){let m=ble(c.node,c.offset);if(m&&m!=3){let y=(m==1?cV:uV)(c.node,c.offset);y&&(c=new dr(y.node,y.offset))}}d.collapse(c.node,c.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(c.node,c.offset);try{d.extend(h.node,h.offset)}catch{}}else{let m=document.createRange();a.anchor>a.head&&([c,h]=[h,c]),m.setEnd(h.node,h.offset),m.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(m)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new dr(f.anchorNode,f.anchorOffset),this.impreciseHead=h.precise?null:new dr(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&kp(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=tm(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=un.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let c=this.coordsAt(n.head,-1),h=this.coordsAt(n.head,1);if(!c||!h||c.bottom>h.top)return;let f=this.domAtPos(n.head+n.assoc);r.collapse(f.node,f.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=Tt.get(n.childNodes[i]);s instanceof un&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Tt.get(n.childNodes[i]);s instanceof un&&(r=s.domAtPos(s.length))}return r?new dr(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=Tt.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof un)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],c=s-a.breakAfter,h=c-a.length;if(c<e)break;if(h<=e&&(h<e||a.covers(-1))&&(c>e||a.covers(1))&&(!r||a instanceof un&&!(r instanceof un&&n>=0)))r=a,i=h;else if(r&&h==e&&c==e&&a instanceof Wo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=h}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof un))return null;for(;i.children.length;){let{i:a,off:c}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=c}if(!(i instanceof _s))return null;let s=Xn(i.text,r);if(s==r)return null;let o=kc(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let c=o[a];if(a==o.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==Bt.LTR;for(let h=0,f=0;f<this.children.length;f++){let d=this.children[f],m=h+d.length;if(m>i)break;if(h>=r){let y=d.dom.getBoundingClientRect();if(n.push(y.height),o){let b=d.dom.lastChild,w=b?nm(b):[];if(w.length){let S=w[w.length-1],_=c?S.right-y.left:y.right-S.left;_>a&&(a=_,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=m)}}}h=m+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Bt.RTL:Bt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof un){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=nm(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new hV(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Ue.replace({widget:new ZC(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Ue.set(e)}updateDeco(){let e=1,n=this.view.state.facet(rm).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(NV).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(ft.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(DV))try{if(h(this.view,e.range,e))return!0}catch(f){Kr(this.view.state,f,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=XE(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;Kae(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==Bt.LTR)}}function gle(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function $V(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=cV(n.focusNode,n.focusOffset),i=uV(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Tt.get(i.node);if(!a||a instanceof _s&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let c=Tt.get(r.node);!c||c instanceof _s&&c.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function yle(t,e,n){let r=$V(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let c=e.invertedDesc,h=new Ji(c.mapPos(s),c.mapPos(o),s,o),f=[];for(let d=i.parentNode;;d=d.parentNode){let m=Tt.get(d);if(m instanceof Jo)f.push({node:d,deco:m.mark});else{if(m instanceof un||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:h,text:i,marks:f,line:d};if(d!=t.contentDOM)f.push({node:d,deco:new Fm({inclusive:!0,attributes:ile(d),tagName:d.tagName.toLowerCase()})});else return null}}}function ble(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let vle=class{constructor(){this.changes=[]}compareRange(e,n){_b(e,n,this.changes)}comparePoint(e,n){_b(e,n,this.changes)}boundChange(e){_b(e,e,this.changes)}};function xle(t,e,n){let r=new vle;return ft.compare(t,e,n,r),r.changes}function wle(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Sle(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function _le(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return fe.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Xn(i.text,s,!1):a=Xn(i.text,s);let c=r(i.text.slice(o,a));for(;o>0;){let h=Xn(i.text,o,!1);if(r(i.text.slice(h,o))!=c)break;o=h}for(;a<i.length;){let h=Xn(i.text,a);if(r(i.text.slice(a,h))!=c)break;a=h}return fe.range(o+i.from,a+i.from)}function Cle(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Ale(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function SS(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function nN(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function rN(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function iA(t,e,n){let r,i,s,o,a=!1,c,h,f,d;for(let b=t.firstChild;b;b=b.nextSibling){let w=nm(b);for(let S=0;S<w.length;S++){let _=w[S];i&&SS(i,_)&&(_=nN(rN(_,i.bottom),i.top));let A=Cle(e,_),k=Ale(n,_);if(A==0&&k==0)return b.nodeType==3?iN(b,e,n):iA(b,e,n);(!r||o>k||o==k&&s>A)&&(r=b,i=_,s=A,o=k,a=A?e<_.left?S>0:S<w.length-1:!0),A==0?n>_.bottom&&(!f||f.bottom<_.bottom)?(c=b,f=_):n<_.top&&(!d||d.top>_.top)&&(h=b,d=_):f&&SS(f,_)?f=rN(f,_.bottom):d&&SS(d,_)&&(d=nN(d,_.top))}}if(f&&f.bottom>=n?(r=c,i=f):d&&d.top<=n&&(r=h,i=d),!r)return{node:t,offset:0};let m=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return iN(r,m,n);if(a&&r.contentEditable!="false")return iA(r,m,n);let y=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:y}}function iN(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let c=kc(t,a,a+1).getClientRects();for(let h=0;h<c.length;h++){let f=c[h];if(f.top==f.bottom)continue;o||(o=e-f.left);let d=(f.top>n?f.top-n:n-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&d<s){let m=e>=(f.left+f.right)/2,y=m;if((Se.chrome||Se.gecko)&&kc(t,a).getBoundingClientRect().left==f.right&&(y=!m),d<=0)return{node:t,offset:a+(y?1:0)};i=a+(y?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function VV(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,c,{docHeight:h}=t.viewState,{x:f,y:d}=e,m=d-a;if(m<0)return 0;if(m>h)return t.state.doc.length;for(let P=t.viewState.heightOracle.textHeight/2,M=!1;c=t.elementAtHeight(m),c.type!=Dr.Text;)for(;m=r>0?c.bottom+P:c.top-P,!(m>=0&&m<=h);){if(M)return n?null:0;M=!0,r=-r}d=a+m;let y=c.from;if(y<t.viewport.from)return t.viewport.from==0?0:n?null:sN(t,o,c,f,d);if(y>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:sN(t,o,c,f,d);let b=t.dom.ownerDocument,w=t.root.elementFromPoint?t.root:b,S=w.elementFromPoint(f,d);S&&!t.contentDOM.contains(S)&&(S=null),S||(f=Math.max(o.left+1,Math.min(o.right-1,f)),S=w.elementFromPoint(f,d),S&&!t.contentDOM.contains(S)&&(S=null));let _,A=-1;if(S&&((i=t.docView.nearest(S))===null||i===void 0?void 0:i.isEditable)!=!1){if(b.caretPositionFromPoint){let P=b.caretPositionFromPoint(f,d);P&&({offsetNode:_,offset:A}=P)}else if(b.caretRangeFromPoint){let P=b.caretRangeFromPoint(f,d);P&&({startContainer:_,startOffset:A}=P,(!t.contentDOM.contains(_)||Se.safari&&kle(_,A,f)||Se.chrome&&Ele(_,A,f))&&(_=void 0))}_&&(A=Math.min(go(_),A))}if(!_||!t.docView.dom.contains(_)){let P=un.find(t.docView,y);if(!P)return m>c.top+c.height/2?c.to:c.from;({node:_,offset:A}=iA(P.dom,f,d))}let k=t.docView.nearest(_);if(!k)return null;if(k.isWidget&&((s=k.dom)===null||s===void 0?void 0:s.nodeType)==1){let P=k.dom.getBoundingClientRect();return e.y<P.top||e.y<=P.bottom&&e.x<=(P.left+P.right)/2?k.posAtStart:k.posAtEnd}else return k.localPosFromDOM(_,A)+k.posAtStart}function sN(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,c=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=c*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+UC(o,s,t.state.tabSize)}function kle(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return kc(t,r-1,r).getBoundingClientRect().right>n}function Ele(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():kc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function sA(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Dr.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function Tle(t,e,n,r){let i=sA(t,e.head,e.assoc||-1),s=!r||i.type!=Dr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),c=t.posAtCoords({x:n==(a==Bt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(c!=null)return fe.cursor(c,n?-1:1)}return fe.cursor(n?i.to:i.from,n?-1:1)}function oN(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,c=null;;){let h=dle(i,s,o,a,n),f=CV;if(!h){if(i.number==(n?t.state.doc.lines:1))return a;f=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),h=t.visualLineSide(i,!n)}if(c){if(!c(f))return a}else{if(!r)return h;c=r(f)}a=h}}function Rle(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==zt.Space&&(i=o),i==o}}function Mle(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return fe.cursor(i,e.assoc);let o=e.goalColumn,a,c=t.contentDOM.getBoundingClientRect(),h=t.coordsAtPos(i,e.assoc||-1),f=t.documentTop;if(h)o==null&&(o=h.left-c.left),a=s<0?h.top:h.bottom;else{let y=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(c.right-c.left,t.defaultCharacterWidth*(i-y.from))),a=(s<0?y.top:y.bottom)+f}let d=c.left+o,m=r??t.viewState.heightOracle.textHeight>>1;for(let y=0;;y+=10){let b=a+(m+y)*s,w=VV(t,{x:d,y:b},!1,s);if(b<c.top||b>c.bottom||(s<0?w<i:w>i)){let S=t.docView.coordsForChar(w),_=!S||b<S.top?-1:1;return fe.cursor(w,_,void 0,o)}}}function Cb(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let c=r||n||(e-s<o-e?-1:1);e=c<0?s:o,r=c}});if(!r)return e}}function FV(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Cb(t,i.from,0);o!=i.from&&(s=fe.cursor(o,-1))}else{let o=Cb(t,i.from,-1),a=Cb(t,i.to,1);(o!=i.from||a!=i.to)&&(s=fe.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?fe.create(n,e.mainIndex):e}function _S(t,e,n){let r=Cb(t.state.facet(Wx).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:fe.cursor(r,r<n.from?1:-1)}const up="";class Ole{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ht.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=up}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=Tt.get(i),c=Tt.get(o);(a&&c?a.breakAfter:(a?a.breakAfter:dv(i))||dv(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=Tt.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Ple(e,r.node,r.offset)?n:0))}}function Ple(t,e,n){for(;;){if(!e||n<go(e))return!1;if(e==t)return!0;n=Ac(e)+1,e=e.parentNode}}class aN{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Dle{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:Nle(e),c=new Ole(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=Ble(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!GC(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!GC(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),f=e.viewport;if((Se.ios||Se.chrome)&&e.state.selection.main.empty&&c!=h&&(f.from>0||f.to<e.state.doc.length)){let d=Math.min(c,h),m=Math.max(c,h),y=f.from-d,b=f.to-m;(y==0||y==1||d==0)&&(b==0||b==-1||m==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=fe.single(h,c)}}}function zV(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,c=i.from,h=null;(s===8||Se.android&&e.text.length<a-o)&&(c=i.to,h="end");let f=Ile(t.state.doc.sliceString(o,a,up),e.text,c-o,h);f&&(Se.chrome&&s==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==up+up&&f.toB--,n={from:o+f.from,to:o+f.toA,insert:dt.of(e.text.slice(f.from,f.toB).split(up))})}else r&&(!t.hasFocus&&t.state.facet(qo)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Se.mac||Se.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=fe.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:dt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:Se.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=fe.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:dt.of([" "])}),n)return JE(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(r=FV(t.state.facet(Wx).map(c=>c(t)),r))),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function JE(t,e,n,r=-1){if(Se.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Se.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&vh(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&vh(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&vh(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Lle(t,e,n));return t.state.facet(RV).some(c=>c(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function Lle(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",c=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+c))}else{let a=i.changes(e),c=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),f,d=n&&$V(t,n.main.head);if(d){let b=e.insert.length-(e.to-e.from);f={from:d.from,to:d.to-b}}else f=t.state.doc.lineAt(s.head);let m=s.to-e.to,y=s.to-s.from;r=i.changeByRange(b=>{if(b.from==s.from&&b.to==s.to)return{changes:a,range:c||b.map(a)};let w=b.to-m,S=w-h.length;if(b.to-b.from!=y||t.state.sliceDoc(S,w)!=h||b.to>=f.from&&b.from<=f.to)return{range:b};let _=i.changes({from:S,to:w,insert:e.insert}),A=b.to-s.to;return{changes:_,range:c?fe.range(Math.max(0,c.anchor+A),Math.max(0,c.head+A)):b.map(_)}})}else r={changes:a,selection:c&&i.selection.replaceRange(c)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Ile(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let c=Math.max(0,s-Math.min(o,a));n-=o+c-s}if(o<s&&t.length<e.length){let c=n<=s&&n>=o?s-n:0;s-=c,a=s+(a-o),o=s}else if(a<s){let c=n<=s&&n>=a?s-n:0;s-=c,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Nle(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new aN(n,r)),(i!=n||s!=r)&&e.push(new aN(i,s))),e}function Ble(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?fe.single(n+e,r+e):null}class jle{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Se.safari&&e.contentDOM.addEventListener("input",()=>null),Se.gecko&&ece(e.contentDOM.ownerDocument)}handleEvent(e){!Wle(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=$le(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&UV.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Se.android&&Se.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Se.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=HV.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Vle.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,vh(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Se.safari&&!Se.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function lN(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Kr(n.state,i)}}}function $le(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let c=s[a];c&&n(a).handlers.push(lN(r.value,c))}if(o)for(let a in o){let c=o[a];c&&n(a).observers.push(lN(r.value,c))}}for(let r in Cs)n(r).handlers.push(Cs[r]);for(let r in es)n(r).observers.push(es[r]);return e}const HV=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Vle="dthko",UV=[16,17,18,20,91,92,224,225],by=6;function vy(t){return Math.max(0,t)*.7+8}function Fle(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class zle{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Yae(e.contentDOM),this.atoms=e.state.facet(Wx).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ht.allowMultipleSelections)&&Hle(e,n),this.dragging=qle(e,n)&&GV(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Fle(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=XE(this.view);e.clientX-c.left<=i+by?n=-vy(i-e.clientX):e.clientX+c.right>=o-by&&(n=vy(e.clientX-o)),e.clientY-c.top<=s+by?r=-vy(s-e.clientY):e.clientY+c.bottom>=a-by&&(r=vy(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=FV(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Hle(t,e){let n=t.state.facet(AV);return n.length?n[0](e):Se.mac?e.metaKey:e.ctrlKey}function Ule(t,e){let n=t.state.facet(kV);return n.length?n[0](e):Se.mac?!e.altKey:!e.ctrlKey}function qle(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=tm(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Wle(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Tt.get(n))&&r.ignoreEvent(e))return!1;return!0}const Cs=Object.create(null),es=Object.create(null),qV=Se.ie&&Se.ie_version<15||Se.ios&&Se.webkit_version<604;function Gle(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),WV(t,n.value)},50)}function Gx(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function WV(t,e){e=Gx(t.state,GE,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(oA!=null&&n.selection.ranges.every(c=>c.empty)&&oA==s.toString()){let c=-1;r=n.changeByRange(h=>{let f=n.doc.lineAt(h.from);if(f.from==c)return{range:h};c=f.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:f.from,insert:d},range:fe.cursor(h.from+d.length)}})}else o?r=n.changeByRange(c=>{let h=s.line(i++);return{changes:{from:c.from,to:c.to,insert:h.text},range:fe.cursor(c.from+h.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}es.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Cs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);es.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};es.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Cs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(EV))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Xle(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new zle(t,e,n,r)),r&&t.observer.ignore(()=>{oV(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function cN(t,e,n,r){if(r==1)return fe.cursor(e,n);if(r==2)return _le(t.state,e,n);{let i=un.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,fe.range(o,a)}}let uN=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Kle(t,e,n,r){let i=un.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&uN(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&uN(n,r,a)?1:o&&o.bottom>=r?-1:1}function hN(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Kle(t,n,e.clientX,e.clientY)}}const Yle=Se.ie&&Se.ie_version<=11;let fN=null,dN=0,pN=0;function GV(t){if(!Yle)return t.detail;let e=fN,n=pN;return fN=t,pN=Date.now(),dN=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(dN+1)%3:1}function Xle(t,e){let n=hN(t,e),r=GV(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let c=hN(t,s),h,f=cN(t,c.pos,c.bias,r);if(n.pos!=c.pos&&!o){let d=cN(t,n.pos,n.bias,r),m=Math.min(d.from,f.from),y=Math.max(d.to,f.to);f=m<f.from?fe.range(m,y):fe.range(y,m)}return o?i.replaceRange(i.main.extend(f.from,f.to)):a&&r==1&&i.ranges.length>1&&(h=Jle(i,c.pos))?h:a?i.addRange(f):fe.create([f])}}}function Jle(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return fe.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Cs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=fe.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Gx(t.state,KE,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Cs.dragend=t=>(t.inputState.draggedContent=null,!1);function mN(t,e,n,r){if(n=Gx(t.state,GE,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&Ule(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},c=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:c,selection:{anchor:c.mapPos(i,-1),head:c.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Cs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&mN(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return mN(t,e,r,!0),!0}return!1};Cs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=qV?null:e.clipboardData;return n?(WV(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Gle(t),!1)};function Qle(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Zle(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Gx(t,KE,e.join(t.lineBreak)),ranges:n,linewise:r}}let oA=null;Cs.copy=Cs.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=Zle(t.state);if(!n&&!i)return!1;oA=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=qV?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Qle(t,n),!1)};const KV=sa.define();function YV(t,e){let n=[];for(let r of t.facet(MV)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:KV.of(!0)}):null}function XV(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=YV(t.state,e);n?t.dispatch(n):t.update([])}},10)}es.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),XV(t)};es.blur=t=>{t.observer.clearSelectionRange(),XV(t)};es.compositionstart=es.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};es.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Se.chrome&&Se.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};es.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Cs.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],c=t.posAtDOM(a.startContainer,a.startOffset),h=t.posAtDOM(a.endContainer,a.endOffset);return JE(t,{from:c,to:h,insert:t.state.toText(s)},null),!0}}let i;if(Se.chrome&&Se.android&&(i=HV.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Se.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Se.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>es.compositionend(t,e),20),!1};const gN=new Set;function ece(t){gN.has(t)||(gN.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const yN=["pre-wrap","normal","pre-line","break-spaces"];let Lh=!1;function bN(){Lh=!1}class tce{constructor(e){this.lineWrapping=e,this.doc=dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return yN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=yN.indexOf(e)>-1,c=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,c){this.heightSamples={};for(let h=0;h<o.length;h++){let f=o[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return c}}class nce{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class eo{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Dr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof gl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new eo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Nt=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(Nt||(Nt={}));const Ab=.001;class Lr{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ab&&(Lh=!0),this.height=e)}replace(e,n,r){return Lr.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:c,toA:h,fromB:f,toB:d}=i[a],m=s.lineAt(c,Nt.ByPosNoHeight,r.setDoc(n),0,0),y=m.to>=h?m:s.lineAt(h,Nt.ByPosNoHeight,r,0,0);for(d+=y.to-h,h=y.to;a>0&&m.from<=i[a-1].toA;)c=i[a-1].fromA,f=i[a-1].fromB,a--,c<m.from&&(m=s.lineAt(c,Nt.ByPosNoHeight,r,0,0));f+=m.from-c,c=m.from;let b=QE.build(r.setDoc(o),e,f,d);s=gv(s,s.replace(c,h,b))}return s.updateHeight(r,0)}static empty(){return new Si(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new rce(Lr.of(e.slice(0,n)),o,Lr.of(e.slice(r)))}}function gv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Lh=!0),e)}Lr.prototype.size=1;class JV extends Lr{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new eo(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Si extends JV{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new eo(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Si||i instanceof Wn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Wn?i=new Si(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Lr.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Wn extends Lr{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*s);o=c/s,this.length>s+1&&(a=(this.height-c)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:c}=this.heightMetrics(n,i);if(n.lineWrapping){let h=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),f=n.doc.lineAt(h),d=a+f.length*c,m=Math.max(r,e-d/2);return new eo(f.from,f.length,m,d,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:f,length:d}=n.doc.line(s+h);return new eo(f,d,r+a*h,a,0)}}lineAt(e,n,r,i,s){if(n==Nt.ByHeight)return this.blockAt(e,r,i,s);if(n==Nt.ByPosNoHeight){let{from:y,to:b}=r.doc.lineAt(e);return new eo(y,b-y,0,0,0)}let{firstLine:o,perLine:a,perChar:c}=this.heightMetrics(r,s),h=r.doc.lineAt(e),f=a+h.length*c,d=h.number-o,m=i+a*d+c*(h.from-s-d);return new eo(h.from,h.length,Math.max(i,Math.min(m,i+this.height-f)),f,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,s);for(let f=e,d=i;f<=n;){let m=r.doc.lineAt(f);if(f==e){let b=m.number-a;d+=c*b+h*(e-s-b)}let y=c+h*m.length;o(new eo(m.from,m.length,d,y,0)),d+=y,f=m.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof Wn?r[r.length-1]=new Wn(s.length+i):r.push(null,new Wn(i-1))}if(e>0){let s=r[0];s instanceof Wn?r[0]=new Wn(e+s.length):r.unshift(new Wn(e-1),null)}return Lr.of(r)}decomposeLeft(e,n){n.push(new Wn(e-1),null)}decomposeRight(e,n){n.push(null,new Wn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),c=-1;for(i.from>n&&o.push(new Wn(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let f=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];c==-1?c=d:Math.abs(d-c)>=Ab&&(c=-2);let m=new Si(f,d);m.outdated=!1,o.push(m),a+=f+1}a<=s&&o.push(null,new Wn(s-a).updateHeight(e,a));let h=Lr.of(o);return(c<0||Math.abs(h.height-this.height)>=Ab||Math.abs(c-this.heightMetrics(e,n).perLine)>=Ab)&&(Lh=!0),gv(this,h)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class rce extends Lr{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,c=n==Nt.ByHeight?e<o:e<a,h=c?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(c?h.to<a:h.from>a))return h;let f=n==Nt.ByPosNoHeight?Nt.ByPosNoHeight:Nt.ByPos;return c?h.join(this.right.lineAt(a,f,r,o,a)):this.left.lineAt(a,f,r,i,s).join(h)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,c=s+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,n,r,i,s,o),n>=c&&this.right.forEachLine(e,n,r,a,c,o);else{let h=this.lineAt(c,Nt.ByPos,r,i,s);e<h.from&&this.left.forEachLine(e,h.from-1,r,i,s,o),h.to>=e&&h.from<=n&&o(h),n>h.to&&this.right.forEachLine(h.to+1,n,r,a,c,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&vN(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),vN(s,a)}return Lr.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Lr.of(this.break?[e,null,n]:[e,n]):(this.left=gv(this.left,e),this.right=gv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,c=null;return i&&i.from<=n+s.length&&i.more?c=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?c=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),c?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function vN(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Wn&&(r=t[e+1])instanceof Wn&&t.splice(e-1,3,new Wn(n.length+1+r.length))}const ice=5;class QE{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Si?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Si(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new JV(o,i,r)):(o||s||i>=ice)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Si(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new Wn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Si)return e;let n=new Si(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Si)&&!this.isCovered?this.nodes.push(new Si(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Si&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new QE(r,e);return ft.spans(n,r,i,s,0),s.finish(r)}}function sce(t,e,n){let r=new oce;return ft.compare(t,e,n,r,0),r.changes}class oce{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&_b(e,n,this.changes,5)}}function ace(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),c=Math.min(i.innerHeight,n.bottom);for(let h=t.parentNode;h&&h!=r.body;)if(h.nodeType==1){let f=h,d=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&d.overflow!="visible"){let m=f.getBoundingClientRect();s=Math.max(s,m.left),o=Math.min(o,m.right),a=Math.max(a,m.top),c=Math.min(h==t.parentNode?i.innerHeight:c,m.bottom)}h=d.position=="absolute"||d.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,c)-(n.top+e)}}function lce(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function cce(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class CS{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Ue.replace({widget:new uce(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class uce extends wl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class xN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=wN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Bt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(YE).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new tce(n),this.stateDeco=e.facet(rm).filter(r=>typeof r!="function"),this.heightMap=Lr.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle.setDoc(e.doc),[new Ji(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ue.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new xy(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?wN:new ZE(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(hp(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(rm).filter(f=>typeof f!="function");let i=e.changedRanges,s=Ji.extendWithRanges(i,sce(r,this.stateDeco,e?e.changes:An.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);bN(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Lh)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let c=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<c.from||n.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,n));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(PV)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Bt.RTL:Bt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),c=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,f=0;if(a.width&&a.height){let{scaleX:P,scaleY:M}=sV(n,a);(P>.005&&Math.abs(this.scaleX-P)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=P,this.scaleY=M,h|=16,o=c=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,m=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=m)&&(this.paddingTop=d,this.paddingBottom=m,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let y=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=y&&(this.scrollAnchorHeight=-1,this.scrollTop=y),this.scrolledToBottom=lV(e.scrollDOM);let b=(this.printing?cce:ace)(n,this.paddingTop),w=b.top-this.pixelViewport.top,S=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(c=!0)),!this.inView&&!this.scrollTarget&&!lce(e.dom))return 0;let A=a.width;if((this.contentDOMWidth!=A||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let P=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(P)&&(o=!0),o||i.lineWrapping&&Math.abs(A-this.contentDOMWidth)>i.charWidth){let{lineHeight:M,charWidth:O,textHeight:L}=e.docView.measureTextSize();o=M>0&&i.refresh(s,M,O,L,Math.max(5,A/O),P),o&&(e.docView.minWidth=0,h|=16)}w>0&&S>0?f=Math.max(w,S):w<0&&S<0&&(f=Math.min(w,S)),bN();for(let M of this.viewports){let O=M.from==this.viewport.from?P:e.docView.measureVisibleLineHeights(M);this.heightMap=(o?Lr.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle,[new Ji(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new nce(M.from,O))}Lh&&(h|=2)}let k=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,c=new xy(i.lineAt(o-r*1e3,Nt.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,Nt.ByHeight,s,0,0).to);if(n){let{head:h}=n.range;if(h<c.from||h>c.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(h,Nt.ByPos,s,0,0),m;n.y=="center"?m=(d.top+d.bottom)/2-f/2:n.y=="start"||n.y=="nearest"&&h<c.from?m=d.top:m=d.bottom-f,c=new xy(i.lineAt(m-1e3/2,Nt.ByHeight,s,0,0).from,i.lineAt(m+f+1e3/2,Nt.ByHeight,s,0,0).to)}}return c}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new xy(this.heightMap.lineAt(r,Nt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Nt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Nt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Nt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new CS(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Bt.LTR&&!r)return[];let a=[],c=(f,d,m,y)=>{if(d-f<s)return;let b=this.state.selection.main,w=[b.from];b.empty||w.push(b.to);for(let _ of w)if(_>f&&_<d){c(f,_-10,m,y),c(_+10,d,m,y);return}let S=fce(e,_=>_.from>=m.from&&_.to<=m.to&&Math.abs(_.from-f)<s&&Math.abs(_.to-d)<s&&!w.some(A=>_.from<A&&_.to>A));if(!S){if(d<m.to&&n&&r&&n.visibleRanges.some(k=>k.from<=d&&k.to>=d)){let k=n.moveToLineBoundary(fe.cursor(d),!1,!0).head;k>f&&(d=k)}let _=this.gapSize(m,f,d,y),A=r||_<2e6?_:2e6;S=new CS(f,d,_,A)}a.push(S)},h=f=>{if(f.length<o||f.type!=Dr.Text)return;let d=hce(f.from,f.to,this.stateDeco);if(d.total<o)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,y,b;if(r){let w=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,_;if(m!=null){let A=Sy(d,m),k=((this.visibleBottom-this.visibleTop)/2+w)/f.height;S=A-k,_=A+k}else S=(this.visibleTop-f.top-w)/f.height,_=(this.visibleBottom-f.top+w)/f.height;y=wy(d,S),b=wy(d,_)}else{let w=d.total*this.heightOracle.charWidth,S=i*this.heightOracle.charWidth,_=0;if(w>2e6)for(let O of e)O.from>=f.from&&O.from<f.to&&O.size!=O.displaySize&&O.from*this.heightOracle.charWidth+_<this.pixelViewport.left&&(_=O.size-O.displaySize);let A=this.pixelViewport.left+_,k=this.pixelViewport.right+_,P,M;if(m!=null){let O=Sy(d,m),L=((k-A)/2+S)/w;P=O-L,M=O+L}else P=(A-S)/w,M=(k+S)/w;y=wy(d,P),b=wy(d,M)}y>f.from&&c(f.from,y,f,d),b<f.to&&c(b,f.to,f,d)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return a}gapSize(e,n,r,i){let s=Sy(i,r)-Sy(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){CS.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ue.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];ft.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||hp(this.heightMap.lineAt(e,Nt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||hp(this.heightMap.lineAt(this.scaler.fromDOM(e),Nt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return hp(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class xy{constructor(e,n){this.from=e,this.to=n}}function hce(t,e,n){let r=[],i=t,s=0;return ft.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function wy({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function Sy(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function fce(t,e){for(let n of t)if(e(n))return n}const wN={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class ZE{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:c})=>{let h=n.lineAt(a,Nt.ByPos,e,0,0).top,f=n.lineAt(c,Nt.ByPos,e,0,0).bottom;return i+=f-h,{from:a,to:c,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof ZE?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function hp(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new eo(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>hp(i,e)):t._content)}const _y=Ce.define({combine:t=>t.join(" ")}),aA=Ce.define({combine:t=>t.indexOf(!0)>-1}),lA=pl.newName(),QV=pl.newName(),ZV=pl.newName(),eF={"&light":"."+QV,"&dark":"."+ZV};function cA(t,e,n){return new pl(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const dce=cA("."+lA,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},eF),pce={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},AS=Se.ie&&Se.ie_version<=11;class mce{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Xae,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Se.ie&&Se.ie_version<=11||Se.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Se.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Se.chrome&&Se.chrome_version<126)&&(this.editContext=new yce(e),e.state.facet(qo)&&(e.contentDOM.editContext=this.editContext.editContext)),AS&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(qo)?r.root.activeElement!=this.dom:!Sb(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Se.ie&&Se.ie_version<=11||Se.android&&Se.chrome)&&!r.state.selection.main.empty&&i.focusNode&&kp(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=tm(e.root);if(!n)return!1;let r=Se.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&gce(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=Sb(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Qae(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,pce),AS&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),AS&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&vh(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Sb(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Dle(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=zV(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=SN(n,e.previousSibling||e.target.previousSibling,-1),i=SN(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(qo)!=e.state.facet(qo)&&(e.view.contentDOM.editContext=e.state.facet(qo)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function SN(t,e,n){for(;e;){let r=Tt.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function _N(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return kp(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function gce(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return _N(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?_N(t,n):null}class yce{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),c=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let h={from:a,to:c,insert:dt.of(r.text.split(`
`))};if(h.from==this.from&&s<this.from?h.from=s:h.to==this.to&&s>this.to&&(h.to=s),h.from==h.to&&!h.insert.length){let f=fe.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));f.main.eq(i)||e.dispatch({selection:f,userEvent:"select"});return}if((Se.mac||Se.android)&&h.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:a,to:c,insert:dt.of([r.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let f=this.to-this.from+(h.to-h.from+h.insert.length);JE(e,h,fe.single(this.toEditorPos(r.selectionStart,f),this.toEditorPos(r.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let c=e.coordsForChar(o);s=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let c=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(c<h){let f=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Ue.mark({attributes:{style:f}}).range(c,h))}}}e.dispatch({effects:LV.of(Ue.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=tm(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,c,h)=>{if(r)return;let f=h.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(h)){i=this.pendingContextChange=null,n+=f,this.to+=f;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=f,this.to+=f;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=f}n+=f}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class _e{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Jae(e.parent)||document,this.viewState=new xN(e.state||ht.create(e)),e.scrollTo&&e.scrollTo.is(yy)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(th).map(i=>new wS(i));for(let i of this.plugins)i.update(this);this.observer=new mce(this),this.inputState=new jle(this),this.inputState.ensureHandlers(this.plugins),this.docView=new tN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof kn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let m of e){if(m.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=m.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,c=null;e.some(m=>m.annotation(KV))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,c=YV(s,o),c||(a=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(ht.phrases)!=this.state.facet(ht.phrases))return this.setState(s);i=mv.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(d&&(d=d.map(m.changes)),m.scrollIntoView){let{main:y}=m.state.selection;d=new xh(y.empty?y:fe.cursor(y.head,y.head>y.anchor?-1:1))}for(let y of m.effects)y.is(yy)&&(d=y.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=yv.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(cp)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(_y)!=i.state.facet(_y)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let m of this.state.facet(rA))try{m(i)}catch(y){Kr(this.state,y,"update listener")}(c||f)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),f&&!zV(this,f)&&h.force&&vh(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new xN(e),this.plugins=e.facet(th).map(r=>new wS(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new tN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(th),r=e.state.facet(th);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new wS(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Kr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(lV(r))s=-1,o=this.viewState.heightMap.height;else{let y=this.viewState.scrollAnchorAt(i);s=y.from,o=y.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(y=>{try{return y.read(this)}catch(b){return Kr(this.state,b),CN}}),d=mv.create(this,this.state,[]),m=!1;d.flags|=c,n?n.flags|=c:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),m=this.docView.update(d),m&&this.docViewUpdate());for(let y=0;y<h.length;y++)if(f[y]!=CN)try{let b=h[y];b.write&&b.write(f[y],this)}catch(b){Kr(this.state,b)}if(m&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let b=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(b>1||b<-1){i=i+b,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(rA))a(n)}get themeClasses(){return lA+" "+(this.state.facet(aA)?ZV:QV)+" "+this.state.facet(_y)}updateAttrs(){let e=AN(this,IV,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(qo)?"true":"false",class:"cm-content",style:`${Se.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),AN(this,YE,n);let r=this.observer.ignore(()=>{let i=QC(this.contentDOM,this.contentAttrs,n),s=QC(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(_e.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(cp);let e=this.state.facet(_e.cspNonce);pl.mount(this.root,this.styleModules.concat(dce).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return _S(this,e,oN(this,e,n,r))}moveByGroup(e,n){return _S(this,e,oN(this,e,n,r=>Rle(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return fe.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return Tle(this,e,n,r)}moveVertically(e,n,r){return _S(this,e,Mle(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),VV(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[il.find(s,e-i.from,-1,n)];return Ux(r,o.dir==Bt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(OV)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>bce)return _V(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||SV(s.isolates,r=eN(this,e))))return s.order;r||(r=eN(this,e));let i=fle(e.text,n,r);return this.bidiCache.push(new yv(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Se.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{oV(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return yy.of(new xh(typeof e=="number"?fe.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return yy.of(new xh(fe.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return gn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return gn.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=pl.newName(),i=[_y.of(r),cp.of(cA(`.${r}`,e))];return n&&n.dark&&i.push(aA.of(!0)),i}static baseTheme(e){return Bc.lowest(cp.of(cA("."+lA,e,eF)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Tt.get(r)||Tt.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}}_e.styleModule=cp;_e.inputHandler=RV;_e.clipboardInputFilter=GE;_e.clipboardOutputFilter=KE;_e.scrollHandler=DV;_e.focusChangeEffect=MV;_e.perLineTextDirection=OV;_e.exceptionSink=TV;_e.updateListener=rA;_e.editable=qo;_e.mouseSelectionStyle=EV;_e.dragMovesSelection=kV;_e.clickAddsSelectionRange=AV;_e.decorations=rm;_e.outerDecorations=NV;_e.atomicRanges=Wx;_e.bidiIsolatedRanges=BV;_e.scrollMargins=jV;_e.darkTheme=aA;_e.cspNonce=Ce.define({combine:t=>t.length?t[0]:""});_e.contentAttributes=YE;_e.editorAttributes=IV;_e.lineWrapping=_e.contentAttributes.of({class:"cm-lineWrapping"});_e.announce=Qe.define();const bce=4096,CN={};class yv{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Bt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new yv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function AN(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&JC(o,n)}return n}const vce=Se.mac?"mac":Se.windows?"win":Se.linux?"linux":"key";function xce(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let c=0;c<n.length-1;++c){const h=n[c];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Cy(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const wce=Bc.default(_e.domEventHandlers({keydown(t,e){return nF(tF(e.state),t,e,"editor")}})),eT=Ce.define({enables:wce}),kN=new WeakMap;function tF(t){let e=t.facet(eT),n=kN.get(e);return n||kN.set(e,n=Cce(e.reduce((r,i)=>r.concat(i),[]))),n}function Sce(t,e,n){return nF(tF(t.state),e,t,n)}let el=null;const _ce=4e3;function Cce(t,e=vce){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let c=r[o];if(c==null)r[o]=a;else if(c!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,c,h,f)=>{var d,m;let y=n[o]||(n[o]=Object.create(null)),b=a.split(/ (?!$)/).map(_=>xce(_,e));for(let _=1;_<b.length;_++){let A=b.slice(0,_).join(" ");i(A,!0),y[A]||(y[A]={preventDefault:!0,stopPropagation:!1,run:[k=>{let P=el={view:k,prefix:A,scope:o};return setTimeout(()=>{el==P&&(el=null)},_ce),!0}]})}let w=b.join(" ");i(w,!1);let S=y[w]||(y[w]={preventDefault:!1,stopPropagation:!1,run:((m=(d=y._any)===null||d===void 0?void 0:d.run)===null||m===void 0?void 0:m.slice())||[]});c&&S.run.push(c),h&&(S.preventDefault=!0),f&&(S.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of a){let f=n[h]||(n[h]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let m in f)f[m].run.push(y=>d(y,uA))}let c=o[e]||o.key;if(c)for(let h of a)s(h,c,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+c,o.shift,o.preventDefault,o.stopPropagation)}return n}let uA=null;function nF(t,e,n,r){uA=e;let i=Wae(e),s=qr(i,0),o=Zs(s)==i.length&&i!=" ",a="",c=!1,h=!1,f=!1;el&&el.view==n&&el.scope==r&&(a=el.prefix+" ",UV.indexOf(e.keyCode)<0&&(h=!0,el=null));let d=new Set,m=S=>{if(S){for(let _ of S.run)if(!d.has(_)&&(d.add(_),_(n)))return S.stopPropagation&&(f=!0),!0;S.preventDefault&&(S.stopPropagation&&(f=!0),h=!0)}return!1},y=t[r],b,w;return y&&(m(y[a+Cy(i,e,!o)])?c=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Se.windows&&e.ctrlKey&&e.altKey)&&!(Se.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=ml[e.keyCode])&&b!=i?(m(y[a+Cy(b,e,!0)])||e.shiftKey&&(w=em[e.keyCode])!=i&&w!=b&&m(y[a+Cy(w,e,!1)]))&&(c=!0):o&&e.shiftKey&&m(y[a+Cy(i,e,!0)])&&(c=!0),!c&&m(y._any)&&(c=!0)),h&&(c=!0),c&&f&&e.stopPropagation(),uA=null,c}class Hm{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=rF(e);return[new Hm(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return Ace(e,n,r)}}function rF(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Bt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function EN(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),c=t.posAtCoords({x:s.right-1,y:o});return a==null||c==null?r:{from:Math.max(r.from,Math.min(a,c)),to:Math.min(r.to,Math.max(a,c))}}function Ace(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Bt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),c=rF(t),h=o.querySelector(".cm-line"),f=h&&window.getComputedStyle(h),d=a.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),m=a.right-(f?parseInt(f.paddingRight):0),y=sA(t,r,1),b=sA(t,i,-1),w=y.type==Dr.Text?y:null,S=b.type==Dr.Text?b:null;if(w&&(t.lineWrapping||y.widgetLineBreaks)&&(w=EN(t,r,1,w)),S&&(t.lineWrapping||b.widgetLineBreaks)&&(S=EN(t,i,-1,S)),w&&S&&w.from==S.from&&w.to==S.to)return A(k(n.from,n.to,w));{let M=w?k(n.from,null,w):P(y,!1),O=S?k(null,n.to,S):P(b,!0),L=[];return(w||y).to<(S||b).from-(w&&S?1:0)||y.widgetLineBreaks>1&&M.bottom+t.defaultLineHeight/2<O.top?L.push(_(d,M.bottom,m,O.top)):M.bottom<O.top&&t.elementAtHeight((M.bottom+O.top)/2).type==Dr.Text&&(M.bottom=O.top=(M.bottom+O.top)/2),A(M).concat(L).concat(A(O))}function _(M,O,L,N){return new Hm(e,M-c.left,O-c.top,L-M,N-O)}function A({top:M,bottom:O,horizontal:L}){let N=[];for(let z=0;z<L.length;z+=2)N.push(_(L[z],M,L[z+1],O));return N}function k(M,O,L){let N=1e9,z=-1e9,j=[];function U(G,ie,F,Y,q){let se=t.coordsAtPos(G,G==L.to?-2:2),T=t.coordsAtPos(F,F==L.from?2:-2);!se||!T||(N=Math.min(se.top,T.top,N),z=Math.max(se.bottom,T.bottom,z),q==Bt.LTR?j.push(s&&ie?d:se.left,s&&Y?m:T.right):j.push(!s&&Y?d:T.left,!s&&ie?m:se.right))}let W=M??L.from,X=O??L.to;for(let G of t.visibleRanges)if(G.to>W&&G.from<X)for(let ie=Math.max(G.from,W),F=Math.min(G.to,X);;){let Y=t.state.doc.lineAt(ie);for(let q of t.bidiSpans(Y)){let se=q.from+Y.from,T=q.to+Y.from;if(se>=F)break;T>ie&&U(Math.max(se,ie),M==null&&se<=W,Math.min(T,F),O==null&&T>=X,q.dir)}if(ie=Y.to+1,ie>=F)break}return j.length==0&&U(W,M==null,X,O==null,t.textDirection),{top:N,bottom:z,horizontal:j}}function P(M,O){let L=a.top+(O?M.top:M.bottom);return{top:L,bottom:L,horizontal:[]}}}function kce(t,e){return t.constructor==e.constructor&&t.eq(e)}class Ece{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(kb)!=e.state.facet(kb)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(kb);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!kce(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const kb=Ce.define();function iF(t){return[gn.define(e=>new Ece(e,t)),kb.of(t)]}const im=Ce.define({combine(t){return xo(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Tce(t={}){return[im.of(t),Rce,Mce,Oce,PV.of(!0)]}function sF(t){return t.startState.facet(im)!=t.state.facet(im)}const Rce=iF({above:!0,markers(t){let{state:e}=t,n=e.facet(im),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:fe.cursor(i.head,i.head>i.anchor?-1:1);for(let c of Hm.forRange(t,o,a))r.push(c)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=sF(t);return n&&TN(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){TN(e.state,t)},class:"cm-cursorLayer"});function TN(t,e){e.style.animationDuration=t.facet(im).cursorBlinkRate+"ms"}const Mce=iF({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Hm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||sF(t)},class:"cm-selectionLayer"}),Oce=Bc.highest(_e.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),oF=Qe.define({map(t,e){return t==null?null:e.mapPos(t)}}),fp=Zn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(oF)?r.value:n,t)}}),Pce=gn.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(fp);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(fp)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(fp),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(fp)!=t&&this.view.dispatch({effects:oF.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Dce(){return[fp,Pce]}function RN(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function Lce(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class Ice{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,c,h,f)=>i(f,h,h+a[0].length,a,c);else if(typeof r=="function")this.addMatch=(a,c,h,f)=>{let d=r(a,c,h);d&&f(h,h+a[0].length,d)};else if(r)this.addMatch=(a,c,h,f)=>f(h,h+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Xo,r=n.add.bind(n);for(let{from:i,to:s}of Lce(e,this.maxLength))RN(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(c,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let c=e.state.doc.lineAt(o),h=c.to<a?e.state.doc.lineAt(a):c,f=Math.max(s.from,c.from),d=Math.min(s.to,h.to);if(this.boundary){for(;o>c.from;o--)if(this.boundary.test(c.text[o-1-c.from])){f=o;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){d=a;break}}let m=[],y,b=(w,S,_)=>m.push(_.range(w,S));if(c==h)for(this.regexp.lastIndex=f-c.from;(y=this.regexp.exec(c.text))&&y.index<d-c.from;)this.addMatch(y,e,y.index+c.from,b);else RN(e.state.doc,this.regexp,f,d,(w,S)=>this.addMatch(S,e,w,b));n=n.update({filterFrom:f,filterTo:d,filter:(w,S)=>w<f||S>d,add:m})}}return n}}const hA=/x/.unicode!=null?"gu":"g",Nce=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,hA),Bce={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let kS=null;function jce(){var t;if(kS==null&&typeof document<"u"&&document.body){let e=document.body.style;kS=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return kS||!1}const Eb=Ce.define({combine(t){let e=xo(t,{render:null,specialChars:Nce,addSpecialChars:null});return(e.replaceTabs=!jce())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,hA)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,hA)),e}});function $ce(t={}){return[Eb.of(t),Vce()]}let MN=null;function Vce(){return MN||(MN=gn.fromClass(class{constructor(t){this.view=t,this.decorations=Ue.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Eb)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Ice({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=qr(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,c=Jh(o.text,a,r-o.from);return Ue.replace({widget:new Uce((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Ue.replace({widget:new Hce(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Eb);t.startState.facet(Eb)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Fce="";function zce(t){return t>=32?Fce:t==10?"":String.fromCharCode(9216+t)}class Hce extends wl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=zce(this.code),r=e.state.phrase("Control character")+" "+(Bce[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Uce extends wl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function qce(){return Gce}const Wce=Ue.line({class:"cm-activeLine"}),Gce=gn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(Wce.range(i.from)),e=i.from)}return Ue.set(n)}},{decorations:t=>t.decorations}),fA=2e3;function Kce(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>fA||n.off>fA||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let c=r;c<=i;c++){let h=t.doc.line(c);h.length<=a&&s.push(fe.range(h.from+o,h.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let c=r;c<=i;c++){let h=t.doc.line(c),f=UC(h.text,o,t.tabSize,!0);if(f<0)s.push(fe.cursor(h.to));else{let d=UC(h.text,a,t.tabSize);s.push(fe.range(h.from+f,h.from+d))}}}return s}function Yce(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function ON(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>fA?-1:i==r.length?Yce(t,e.clientX):Jh(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function Xce(t,e){let n=ON(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=ON(t,i);if(!a)return r;let c=Kce(t.state,n,a);return c.length?o?fe.create(c.concat(r.ranges)):fe.create(c):r}}:null}function Jce(t){let e=(n=>n.altKey&&n.button==0);return _e.mouseSelectionStyle.of((n,r)=>e(r)?Xce(n,r):null)}const Qce={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},Zce={style:"cursor: crosshair"};function eue(t={}){let[e,n]=Qce[t.key||"Alt"],r=gn.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,_e.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?Zce:null})]}const Od="-10000px";class aF{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(c=>c);if(i===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let o=[],a=n?[]:null;for(let c=0;c<s.length;c++){let h=s[c],f=-1;if(h){for(let d=0;d<this.tooltips.length;d++){let m=this.tooltips[d];m&&m.create==h.create&&(f=d)}if(f<0)o[c]=this.createTooltipView(h,c?o[c-1]:null),a&&(a[c]=!!h.above);else{let d=o[c]=this.tooltipViews[f];a&&(a[c]=n[f]),d.update&&d.update(e)}}}for(let c of this.tooltipViews)o.indexOf(c)<0&&(this.removeTooltipView(c),(r=c.destroy)===null||r===void 0||r.call(c));return n&&(a.forEach((c,h)=>n[h]=c),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function tue(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const ES=Ce.define({combine:t=>{var e,n,r;return{position:Se.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||tue}}}),PN=new WeakMap,tT=gn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(ES);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new aF(t,nT,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(ES);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=Od,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Se.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Od&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=XE(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(ES).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:f}=h,d=t.pos[a],m=t.size[a];if(!d||c.clip!==!1&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){f.style.top=Od;continue}let y=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,b=y?7:0,w=m.right-m.left,S=(e=PN.get(h))!==null&&e!==void 0?e:m.bottom-m.top,_=h.offset||rue,A=this.view.textDirection==Bt.LTR,k=m.width>r.right-r.left?A?r.left:r.right-m.width:A?Math.max(r.left,Math.min(d.left-(y?14:0)+_.x,r.right-w)):Math.min(Math.max(r.left,d.left-w+(y?14:0)-_.x),r.right-w),P=this.above[a];!c.strictSide&&(P?d.top-S-b-_.y<r.top:d.bottom+S+b+_.y>r.bottom)&&P==r.bottom-d.bottom>d.top-r.top&&(P=this.above[a]=!P);let M=(P?d.top-r.top:r.bottom-d.bottom)-b;if(M<S&&h.resize!==!1){if(M<this.view.defaultLineHeight){f.style.top=Od;continue}PN.set(h,S),f.style.height=(S=M)/s+"px"}else f.style.height&&(f.style.height="");let O=P?d.top-S-b-_.y:d.bottom+b+_.y,L=k+w;if(h.overlap!==!0)for(let N of o)N.left<L&&N.right>k&&N.top<O+S&&N.bottom>O&&(O=P?N.top-S-2-b:N.bottom+b+2);if(this.position=="absolute"?(f.style.top=(O-t.parent.top)/s+"px",DN(f,(k-t.parent.left)/i)):(f.style.top=O/s+"px",DN(f,k/i)),y){let N=d.left+(A?_.x:-_.x)-(k+14-7);y.style.left=N/i+"px"}h.overlap!==!0&&o.push({left:k,top:O,right:L,bottom:O+S}),f.classList.toggle("cm-tooltip-above",P),f.classList.toggle("cm-tooltip-below",!P),h.positioned&&h.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Od}},{eventObservers:{scroll(){this.maybeMeasure()}}});function DN(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const nue=_e.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),rue={x:0,y:0},nT=Ce.define({enables:[tT,nue]}),bv=Ce.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Kx{static create(e){return new Kx(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new aF(e,bv,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const iue=nT.compute([bv],t=>{let e=t.facet(bv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:Kx.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class sue{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof rl)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(i)).find(f=>f.from<=i&&f.to>=i),h=c&&c.dir==Bt.RTL?-1:1;s=n.x<a.left?-h:h}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>Kr(e.state,c,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(tT),n=e?e.manager.tooltips.findIndex(r=>r.create==Kx.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!oue(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!aue(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ay=4;function oue(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-Ay&&e.clientX<=r+Ay&&e.clientY>=i-Ay&&e.clientY<=s+Ay}function aue(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let c=t.posAtCoords({x:r,y:i},!1);return c>=e&&c<=n}function lue(t,e={}){let n=Qe.define(),r=Zn.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let c=s.changes.mapPos(a.pos,-1,Mr.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),a);h.pos=c,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(cue)&&(i=[]);return i},provide:i=>bv.from(i)});return{active:r,extension:[r,gn.define(i=>new sue(i,t,r,n,e.hoverTime||300)),iue]}}function lF(t,e){let n=t.plugin(tT);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const cue=Qe.define(),LN=Ce.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function sm(t,e){let n=t.plugin(cF),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const cF=gn.fromClass(class{constructor(t){this.input=t.state.facet(om),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(LN);this.top=new ky(t,!0,e.topContainer),this.bottom=new ky(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(LN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ky(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ky(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(om);if(n!=this.input){let r=n.filter(c=>c),i=[],s=[],o=[],a=[];for(let c of r){let h=this.specs.indexOf(c),f;h<0?(f=c(t.view),a.push(f)):(f=this.panels[h],f.update&&f.update(t)),i.push(f),(f.top?s:o).push(f)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>_e.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class ky{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=IN(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=IN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function IN(t){let e=t.nextSibling;return t.remove(),e}const om=Ce.define({enables:cF});class Qo extends Cc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Qo.prototype.elementClass="";Qo.prototype.toDOM=void 0;Qo.prototype.mapMode=Mr.TrackBefore;Qo.prototype.startSide=Qo.prototype.endSide=-1;Qo.prototype.point=!0;const Tb=Ce.define(),uue=Ce.define(),hue={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ft.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Tp=Ce.define();function fue(t){return[uF(),Tp.of({...hue,...t})]}const NN=Ce.define({combine:t=>t.some(e=>e)});function uF(t){return[due]}const due=gn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Tp).map(e=>new jN(t,e)),this.fixed=!t.state.facet(NN);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(NN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ft.iter(this.view.state.facet(Tb),this.view.viewport.from),r=[],i=this.gutters.map(s=>new pue(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Dr.Text&&o){dA(n,r,a.from);for(let c of i)c.line(this.view,a,r);o=!1}else if(a.widget)for(let c of i)c.widget(this.view,a)}else if(s.type==Dr.Text){dA(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Tp),n=t.state.facet(Tp),r=t.docChanged||t.heightChanged||t.viewportChanged||!ft.eq(t.startState.facet(Tb),t.state.facet(Tb),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new jN(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>_e.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Bt.LTR?{left:r,right:i}:{right:r,left:i}})});function BN(t){return Array.isArray(t)?t:[t]}function dA(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class pue{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ft.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new hF(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];dA(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(uue)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class jN{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let c=s.getBoundingClientRect();o=(c.top+c.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=BN(n.markers(e)),n.initialSpacer&&(this.spacer=new hF(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=BN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ft.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class hF{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),mue(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,c=s<n.length?n[s++]:null,h=!1;if(c){let f=c.elementClass;f&&(r+=" "+f);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(c)){a=d,h=!0;break}}else a=this.markers.length;for(;o<a;){let f=this.markers[o++];if(f.toDOM){f.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!c)break;c.toDOM&&(h?i=i.nextSibling:this.dom.insertBefore(c.toDOM(e),i)),h&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function mue(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const gue=Ce.define(),yue=Ce.define(),nh=Ce.define({combine(t){return xo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,c,h)=>s(a,c,h)||o(a,c,h):o}return r}})}});class TS extends Qo{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function RS(t,e){return t.state.facet(nh).formatNumber(e,t.state)}const bue=Tp.compute([nh],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(gue)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new TS(RS(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(yue)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(nh)!=e.state.facet(nh),initialSpacer(e){return new TS(RS(e,$N(e.state.doc.lines)))},updateSpacer(e,n){let r=RS(n.view,$N(n.view.state.doc.lines));return r==e.number?e:new TS(r)},domEventHandlers:t.facet(nh).domEventHandlers,side:"before"}));function vue(t={}){return[nh.of(t),uF(),bue]}function $N(t){let e=9;for(;e<t;)e=e*10+9;return e}const xue=new class extends Qo{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},wue=Tb.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(xue.range(i)))}return ft.of(e)});function Sue(){return wue}const fF=1024;let _ue=0;class MS{constructor(e,n){this.from=e,this.to=n}}class it{constructor(e={}){this.id=_ue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Qr.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}it.closedBy=new it({deserialize:t=>t.split(" ")});it.openedBy=new it({deserialize:t=>t.split(" ")});it.group=new it({deserialize:t=>t.split(" ")});it.isolate=new it({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});it.contextHash=new it({perNode:!0});it.lookAhead=new it({perNode:!0});it.mounted=new it({perNode:!0});class vv{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[it.mounted.id]}}const Cue=Object.create(null);class Qr{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):Cue,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Qr(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(it.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(it.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Qr.none=new Qr("",Object.create(null),0,8);class rT{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Qr(r.name,i,r.id,r.flags):r)}return new rT(n)}}const Ey=new WeakMap,VN=new WeakMap;var Bn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Bn||(Bn={}));class dn{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=vv.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new mA(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Ey.get(this)||this.topNode,s=new mA(i);return s.moveTo(e,n),Ey.set(this,s._tree),s}get topNode(){return new Qi(this,0,0,null)}resolve(e,n=0){let r=am(Ey.get(this)||this.topNode,e,n,!1);return Ey.set(this,r),r}resolveInner(e,n=0){let r=am(VN.get(this)||this.topNode,e,n,!0);return VN.set(this,r),r}resolveStack(e,n=0){return Eue(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Bn.IncludeAnonymous)>0;for(let c=this.cursor(o|Bn.IncludeAnonymous);;){let h=!1;if(c.from<=s&&c.to>=i&&(!a&&c.type.isAnonymous||n(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&r&&(a||!c.type.isAnonymous)&&r(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:oT(Qr.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new dn(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new dn(Qr.none,n,r,i)))}static build(e){return Tue(e)}}dn.empty=new dn(Qr.none,[],[],0);class iT{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new iT(this.buffer,this.index)}}class yl{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Qr.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let c=e;c!=n&&!(dF(s,i,o[c+1],o[c+2])&&(a=c,r>0));c=o[c+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,c=0;a<n;){s[c++]=i[a++],s[c++]=i[a++]-r;let h=s[c++]=i[a++]-r;s[c++]=i[a++]-e,o=Math.max(o,h)}return new yl(s,o,this.set)}}function dF(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function am(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Qi&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Bn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Qi&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class pF{cursor(e=0){return new mA(this,e)}getChild(e,n=null,r=null){let i=FN(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return FN(this,e,n,r)}resolve(e,n=0){return am(this,e,n,!1)}resolveInner(e,n=0){return am(this,e,n,!0)}matchContext(e){return pA(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Qi extends pF{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:c}=o._tree,h=n>0?a.length:-1;e!=h;e+=n){let f=a[e],d=c[e]+o.from;if(dF(i,r,d,d+f.length)){if(f instanceof yl){if(s&Bn.ExcludeBuffers)continue;let m=f.findChild(0,f.buffer.length,n,r-d,i);if(m>-1)return new sl(new Aue(o,f,e,d),null,m)}else if(s&Bn.IncludeAnonymous||!f.type.isAnonymous||sT(f)){let m;if(!(s&Bn.IgnoreMounts)&&(m=vv.get(f))&&!m.overlay)return new Qi(m.tree,d,e,o);let y=new Qi(f,d,e,o);return s&Bn.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(n<0?f.children.length-1:0,n,r,i)}}}if(s&Bn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Bn.IgnoreOverlays)&&(i=vv.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Qi(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function FN(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function pA(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class Aue{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class sl extends pF{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new sl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Bn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new sl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new sl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new sl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new dn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function mF(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Qi&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new kue(i,n)}class kue{constructor(e,n){this.heads=e,this.node=n}get next(){return mF(this.heads)}}function Eue(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Qi?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=vv.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Qi(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(am(a,e,n,!1))}}return i?mF(i):r}class mA{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Qi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Qi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Bn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Bn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Bn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Bn.IncludeAnonymous||a instanceof yl||!a.type.isAnonymous||sT(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new sl(this.buffer,n,this.stack[i]);return this.bufferNode=new sl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return pA(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return pA(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function sT(t){return t.children.some(e=>e instanceof yl||!e.type.isAnonymous||sT(e))}function Tue(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=fF,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new iT(n,n.length):n,c=r.types,h=0,f=0;function d(M,O,L,N,z,j){let{id:U,start:W,end:X,size:G}=a,ie=f,F=h;for(;G<0;)if(a.next(),G==-1){let Z=s[U];L.push(Z),N.push(W-M);return}else if(G==-3){h=U;return}else if(G==-4){f=U;return}else throw new RangeError(`Unrecognized record size: ${G}`);let Y=c[U],q,se,T=W-M;if(X-W<=i&&(se=S(a.pos-O,z))){let Z=new Uint16Array(se.size-se.skip),ue=a.pos-se.size,I=Z.length;for(;a.pos>ue;)I=_(se.start,Z,I);q=new yl(Z,X-se.start,r),T=se.start-M}else{let Z=a.pos-G;a.next();let ue=[],I=[],pe=U>=o?U:-1,Ee=0,ye=X;for(;a.pos>Z;)pe>=0&&a.id==pe&&a.size>=0?(a.end<=ye-i&&(b(ue,I,W,Ee,a.end,ye,pe,ie,F),Ee=ue.length,ye=a.end),a.next()):j>2500?m(W,Z,ue,I):d(W,Z,ue,I,pe,j+1);if(pe>=0&&Ee>0&&Ee<ue.length&&b(ue,I,W,Ee,W,ye,pe,ie,F),ue.reverse(),I.reverse(),pe>-1&&Ee>0){let ke=y(Y,F);q=oT(Y,ue,I,0,ue.length,0,X-W,ke,ke)}else q=w(Y,ue,I,X-W,ie-X,F)}L.push(q),N.push(T)}function m(M,O,L,N){let z=[],j=0,U=-1;for(;a.pos>O;){let{id:W,start:X,end:G,size:ie}=a;if(ie>4)a.next();else{if(U>-1&&X<U)break;U<0&&(U=G-i),z.push(W,X,G),j++,a.next()}}if(j){let W=new Uint16Array(j*4),X=z[z.length-2];for(let G=z.length-3,ie=0;G>=0;G-=3)W[ie++]=z[G],W[ie++]=z[G+1]-X,W[ie++]=z[G+2]-X,W[ie++]=ie;L.push(new yl(W,z[2]-X,r)),N.push(X-M)}}function y(M,O){return(L,N,z)=>{let j=0,U=L.length-1,W,X;if(U>=0&&(W=L[U])instanceof dn){if(!U&&W.type==M&&W.length==z)return W;(X=W.prop(it.lookAhead))&&(j=N[U]+W.length+X)}return w(M,L,N,z,j,O)}}function b(M,O,L,N,z,j,U,W,X){let G=[],ie=[];for(;M.length>N;)G.push(M.pop()),ie.push(O.pop()+L-z);M.push(w(r.types[U],G,ie,j-z,W-j,X)),O.push(z-L)}function w(M,O,L,N,z,j,U){if(j){let W=[it.contextHash,j];U=U?[W].concat(U):[W]}if(z>25){let W=[it.lookAhead,z];U=U?[W].concat(U):[W]}return new dn(M,O,L,N,U)}function S(M,O){let L=a.fork(),N=0,z=0,j=0,U=L.end-i,W={size:0,start:0,skip:0};e:for(let X=L.pos-M;L.pos>X;){let G=L.size;if(L.id==O&&G>=0){W.size=N,W.start=z,W.skip=j,j+=4,N+=4,L.next();continue}let ie=L.pos-G;if(G<0||ie<X||L.start<U)break;let F=L.id>=o?4:0,Y=L.start;for(L.next();L.pos>ie;){if(L.size<0)if(L.size==-3)F+=4;else break e;else L.id>=o&&(F+=4);L.next()}z=Y,N+=G,j+=F}return(O<0||N==M)&&(W.size=N,W.start=z,W.skip=j),W.size>4?W:void 0}function _(M,O,L){let{id:N,start:z,end:j,size:U}=a;if(a.next(),U>=0&&N<o){let W=L;if(U>4){let X=a.pos-(U-4);for(;a.pos>X;)L=_(M,O,L)}O[--L]=W,O[--L]=j-M,O[--L]=z-M,O[--L]=N}else U==-3?h=N:U==-4&&(f=N);return L}let A=[],k=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,A,k,-1,0);let P=(e=t.length)!==null&&e!==void 0?e:A.length?k[0]+A[0].length:0;return new dn(c[t.topID],A.reverse(),k.reverse(),P)}const zN=new WeakMap;function Rb(t,e){if(!t.isAnonymous||e instanceof yl||e.type!=t)return 1;let n=zN.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof dn)){n=1;break}n+=Rb(t,r)}zN.set(e,n)}return n}function oT(t,e,n,r,i,s,o,a,c){let h=0;for(let b=r;b<i;b++)h+=Rb(t,e[b]);let f=Math.ceil(h*1.5/8),d=[],m=[];function y(b,w,S,_,A){for(let k=S;k<_;){let P=k,M=w[k],O=Rb(t,b[k]);for(k++;k<_;k++){let L=Rb(t,b[k]);if(O+L>=f)break;O+=L}if(k==P+1){if(O>f){let L=b[P];y(L.children,L.positions,0,L.children.length,w[P]+A);continue}d.push(b[P])}else{let L=w[k-1]+b[k-1].length-M;d.push(oT(t,b,w,P,k,M,L,null,c))}m.push(M+A-s)}}return y(e,n,r,i,0),(a||c)(d,m,o)}class mc{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new mc(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,c=0,h=0;;a++){let f=a<n.length?n[a]:null,d=f?f.fromA:1e9;if(d-c>=r)for(;o&&o.from<d;){let m=o;if(c>=m.from||d<=m.to||h){let y=Math.max(m.from,c)-h,b=Math.min(m.to,d)-h;m=y>=b?null:new mc(y,b,m.tree,m.offset+h,a>0,!!f)}if(m&&i.push(m),o.to>d)break;o=s<e.length?e[s++]:null}if(!f)break;c=f.toA,h=f.toA-f.toB}return i}}class gF{startParse(e,n,r){return typeof e=="string"&&(e=new Rue(e)),r=r?r.length?r.map(i=>new MS(i.from,i.to)):[new MS(0,0)]:[new MS(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class Rue{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new it({perNode:!0});let Mue=0;class Ui{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=Mue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Ui&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new Ui(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new xv(e);return r=>r.modified.indexOf(n)>-1?r:xv.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let Oue=0;class xv{constructor(e){this.name=e,this.instances=[],this.id=Oue++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&Pue(n,a.modified));if(r)return r;let i=[],s=new Ui(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=Due(n);for(let a of e.set)if(!a.modified.length)for(let c of o)i.push(xv.get(a,c));return s}}function Pue(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function Due(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function yF(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!m)throw new RangeError("Invalid path: "+i);if(s.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),d+=m[0].length,d==i.length)break;let y=i[d++];if(d==i.length&&y=="!"){o=0;break}if(y!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let c=s.length-1,h=s[c];if(!h)throw new RangeError("Invalid path: "+i);let f=new wv(r,o,c>0?s.slice(0,c):null);e[h]=f.sort(e[h])}}return bF.add(e)}const bF=new it;let wv=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};wv.empty=new wv([],2,null);function vF(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let c of a.set){let h=n[c.id];if(h){o=o?o+" "+h:h;break}}return o},scope:r}}function Lue(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function Iue(t,e,n,r=0,i=t.length){let s=new Nue(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class Nue{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:c}=e;if(a>=r||c<=n)return;o.isTop&&(s=this.highlighters.filter(y=>!y.scope||y.scope(o)));let h=i,f=Bue(e)||wv.empty,d=Lue(s,f.tags);if(d&&(h&&(h+=" "),h+=d,f.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),h),f.opaque)return;let m=e.tree&&e.tree.prop(it.mounted);if(m&&m.overlay){let y=e.node.enter(m.overlay[0].from+a,1),b=this.highlighters.filter(S=>!S.scope||S.scope(m.tree.type)),w=e.firstChild();for(let S=0,_=a;;S++){let A=S<m.overlay.length?m.overlay[S]:null,k=A?A.from+a:c,P=Math.max(n,_),M=Math.min(r,k);if(P<M&&w)for(;e.from<M&&(this.highlightRange(e,P,M,i,s),this.startSpan(Math.min(M,e.to),h),!(e.to>=k||!e.nextSibling())););if(!A||k>r)break;_=A.to+a,_>n&&(this.highlightRange(y.cursor(),Math.max(n,A.from+a),Math.min(r,_),"",b),this.startSpan(Math.min(r,_),h))}w&&e.parent()}else if(e.firstChild()){m&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),h)}while(e.nextSibling());e.parent()}}}function Bue(t){let e=t.type.prop(bF);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const we=Ui.define,Ty=we(),Ja=we(),HN=we(Ja),UN=we(Ja),Qa=we(),Ry=we(Qa),OS=we(Qa),Ws=we(),Kl=we(Ws),Us=we(),qs=we(),gA=we(),Pd=we(gA),My=we(),ve={comment:Ty,lineComment:we(Ty),blockComment:we(Ty),docComment:we(Ty),name:Ja,variableName:we(Ja),typeName:HN,tagName:we(HN),propertyName:UN,attributeName:we(UN),className:we(Ja),labelName:we(Ja),namespace:we(Ja),macroName:we(Ja),literal:Qa,string:Ry,docString:we(Ry),character:we(Ry),attributeValue:we(Ry),number:OS,integer:we(OS),float:we(OS),bool:we(Qa),regexp:we(Qa),escape:we(Qa),color:we(Qa),url:we(Qa),keyword:Us,self:we(Us),null:we(Us),atom:we(Us),unit:we(Us),modifier:we(Us),operatorKeyword:we(Us),controlKeyword:we(Us),definitionKeyword:we(Us),moduleKeyword:we(Us),operator:qs,derefOperator:we(qs),arithmeticOperator:we(qs),logicOperator:we(qs),bitwiseOperator:we(qs),compareOperator:we(qs),updateOperator:we(qs),definitionOperator:we(qs),typeOperator:we(qs),controlOperator:we(qs),punctuation:gA,separator:we(gA),bracket:Pd,angleBracket:we(Pd),squareBracket:we(Pd),paren:we(Pd),brace:we(Pd),content:Ws,heading:Kl,heading1:we(Kl),heading2:we(Kl),heading3:we(Kl),heading4:we(Kl),heading5:we(Kl),heading6:we(Kl),contentSeparator:we(Ws),list:we(Ws),quote:we(Ws),emphasis:we(Ws),strong:we(Ws),link:we(Ws),monospace:we(Ws),strikethrough:we(Ws),inserted:we(),deleted:we(),changed:we(),invalid:we(),meta:My,documentMeta:we(My),annotation:we(My),processingInstruction:we(My),definition:Ui.defineModifier("definition"),constant:Ui.defineModifier("constant"),function:Ui.defineModifier("function"),standard:Ui.defineModifier("standard"),local:Ui.defineModifier("local"),special:Ui.defineModifier("special")};for(let t in ve){let e=ve[t];e instanceof Ui&&(e.name=t)}vF([{tag:ve.link,class:"tok-link"},{tag:ve.heading,class:"tok-heading"},{tag:ve.emphasis,class:"tok-emphasis"},{tag:ve.strong,class:"tok-strong"},{tag:ve.keyword,class:"tok-keyword"},{tag:ve.atom,class:"tok-atom"},{tag:ve.bool,class:"tok-bool"},{tag:ve.url,class:"tok-url"},{tag:ve.labelName,class:"tok-labelName"},{tag:ve.inserted,class:"tok-inserted"},{tag:ve.deleted,class:"tok-deleted"},{tag:ve.literal,class:"tok-literal"},{tag:ve.string,class:"tok-string"},{tag:ve.number,class:"tok-number"},{tag:[ve.regexp,ve.escape,ve.special(ve.string)],class:"tok-string2"},{tag:ve.variableName,class:"tok-variableName"},{tag:ve.local(ve.variableName),class:"tok-variableName tok-local"},{tag:ve.definition(ve.variableName),class:"tok-variableName tok-definition"},{tag:ve.special(ve.variableName),class:"tok-variableName2"},{tag:ve.definition(ve.propertyName),class:"tok-propertyName tok-definition"},{tag:ve.typeName,class:"tok-typeName"},{tag:ve.namespace,class:"tok-namespace"},{tag:ve.className,class:"tok-className"},{tag:ve.macroName,class:"tok-macroName"},{tag:ve.propertyName,class:"tok-propertyName"},{tag:ve.operator,class:"tok-operator"},{tag:ve.comment,class:"tok-comment"},{tag:ve.meta,class:"tok-meta"},{tag:ve.invalid,class:"tok-invalid"},{tag:ve.punctuation,class:"tok-punctuation"}]);var PS;const rh=new it;function jue(t){return Ce.define({combine:t?e=>e.concat(t):void 0})}const $ue=new it;class ms{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ht.prototype.hasOwnProperty("tree")||Object.defineProperty(ht.prototype,"tree",{get(){return br(this)}}),this.parser=n,this.extension=[bl.of(this),ht.languageData.of((s,o,a)=>{let c=qN(s,o,a),h=c.type.prop(rh);if(!h)return[];let f=s.facet(h),d=c.type.prop($ue);if(d){let m=c.resolve(o-c.from,a);for(let y of d)if(y.test(m,s)){let b=s.facet(y.facet);return y.type=="replace"?b:b.concat(f)}}return f})].concat(r)}isActiveAt(e,n,r=-1){return qN(e,n,r).type.prop(rh)==this.data}findRegions(e){let n=e.facet(bl);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(rh)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(it.mounted);if(a){if(a.tree.prop(rh)==this.data){if(a.overlay)for(let c of a.overlay)r.push({from:c.from+o,to:c.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let c=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>c)return}}for(let c=0;c<s.children.length;c++){let h=s.children[c];h instanceof dn&&i(h,s.positions[c]+o)}};return i(br(e),0),r}get allowsNesting(){return!0}}ms.setState=Qe.define();function qN(t,e,n){let r=t.facet(bl),i=br(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Bn.ExcludeBuffers))s.type.isTop&&(i=s);return i}class Sv extends ms{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=jue(e.languageData);return new Sv(n,e.parser.configure({props:[rh.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new Sv(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function br(t){let e=t.field(ms.state,!1);return e?e.tree:dn.empty}class Vue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Dd=null;class _v{constructor(e,n,r=[],i,s,o,a,c){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new _v(e,n,[],dn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Vue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=dn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(mc.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(mc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Dd;Dd=this;try{return e()}finally{Dd=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=WN(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,f,d,m)=>c.push({fromA:h,toA:f,fromB:d,toB:m})),r=mc.applyChanges(r,c),i=dn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let f=e.mapPos(h.from,1),d=e.mapPos(h.to,-1);f<d&&a.push({from:f,to:d})}}}return new _v(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=WN(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends gF{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let c=Dd;if(c){for(let h of i)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=o,new dn(Qr.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Dd}}function WN(t,e,n){return mc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Ih{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Ih(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=_v.create(e.facet(bl).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Ih(r)}}ms.state=Zn.define({create:Ih.init,update(t,e){for(let n of e.effects)if(n.is(ms.setState))return n.value;return e.startState.facet(bl)!=e.state.facet(bl)?Ih.init(e.state):t.apply(e)}});let xF=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(xF=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const DS=typeof navigator<"u"&&(!((PS=navigator.scheduling)===null||PS===void 0)&&PS.isInputPending)?()=>navigator.scheduling.isInputPending():null,Fue=gn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ms.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ms.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=xF(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(ms.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!DS?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,c=s.context.work(()=>DS&&DS()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(c||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ms.setState.of(new Ih(s.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Kr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),bl=Ce.define({combine(t){return t.length?t[0]:null},enables:t=>[ms.state,Fue,_e.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class zue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Hue=Ce.define(),aT=Ce.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Cv(t){let e=t.facet(aT);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function lm(t,e){let n="",r=t.tabSize,i=t.facet(aT)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function lT(t,e){t instanceof ht&&(t=new Yx(t));for(let r of t.state.facet(Hue)){let i=r(t,e);if(i!==void 0)return i}let n=br(t.state);return n.length>=e?Uue(t,n,e):null}class Yx{constructor(e,n={}){this.state=e,this.options=n,this.unit=Cv(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Jh(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const wF=new it;function Uue(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return SF(r,t,n)}function SF(t,e,n){for(let r=t;r;r=r.next){let i=Wue(r.node);if(i)return i(cT.create(e,n,r))}return 0}function que(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Wue(t){let e=t.type.prop(wF);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(it.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Xue(o,!0,1,void 0,s&&!que(o)?i.from:void 0)}return t.parent==null?Gue:null}function Gue(){return 0}class cT extends Yx{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new cT(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Kue(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return SF(this.context.next,this.base,this.pos)}}function Kue(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Yue(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let c=e.childAfter(a);if(!c||c==r)return null;if(!c.type.isSkipped){if(c.from>=o)return null;let h=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+h}}a=c.to}}function Xue(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,c=Yue(t);return c?a?t.column(c.from):t.column(c.to):t.baseIndent+(a?0:t.unit*n)}function GN({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const Jue=200;function Que(){return ht.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+Jue)return t;let s=n.sliceString(i.from,r);if(!e.some(h=>h.test(s)))return t;let{state:o}=t,a=-1,c=[];for(let{head:h}of o.selection.ranges){let f=o.doc.lineAt(h);if(f.from==a)continue;a=f.from;let d=lT(o,f.from);if(d==null)continue;let m=/^\s*/.exec(f.text)[0],y=lm(o,d);m!=y&&c.push({from:f.from,to:f.from+m.length,insert:y})}return c.length?[t,{changes:c,sequential:!0}]:t})}const Zue=Ce.define(),_F=new it;function ehe(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function the(t,e,n){let r=br(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let c=a.type.prop(_F);if(c&&(a.to<r.length-50||r.length==t.doc.length||!nhe(a))){let h=c(a,t);h&&h.from<=n&&h.from>=e&&h.to>n&&(s=h)}}return s}function nhe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Av(t,e,n){for(let r of t.facet(Zue)){let i=r(t,e,n);if(i)return i}return the(t,e,n)}function CF(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Xx=Qe.define({map:CF}),Um=Qe.define({map:CF});function AF(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Tc=Zn.define({create(){return Ue.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=KN(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Xx)&&!rhe(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(TF),i=r?Ue.replace({widget:new uhe(r(e.state,n.value))}):YN;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Um)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=KN(t,e.selection.main.head)),t},provide:t=>_e.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(YN.range(r,i))}return Ue.set(e,!0)}});function KN(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function kv(t,e,n){var r;let i=null;return(r=t.field(Tc,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function rhe(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function kF(t,e){return t.field(Tc,!1)?e:e.concat(Qe.appendConfig.of(RF()))}const ihe=t=>{for(let e of AF(t)){let n=Av(t.state,e.from,e.to);if(n)return t.dispatch({effects:kF(t.state,[Xx.of(n),EF(t,n)])}),!0}return!1},she=t=>{if(!t.state.field(Tc,!1))return!1;let e=[];for(let n of AF(t)){let r=kv(t.state,n.from,n.to);r&&e.push(Um.of(r),EF(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function EF(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return _e.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const ohe=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=Av(e,i.from,i.to);s&&n.push(Xx.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:kF(t.state,n)}),!!n.length},ahe=t=>{let e=t.state.field(Tc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Um.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},lhe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:ihe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:she},{key:"Ctrl-Alt-[",run:ohe},{key:"Ctrl-Alt-]",run:ahe}],che={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},TF=Ce.define({combine(t){return xo(t,che)}});function RF(t){return[Tc,dhe]}function MF(t,e){let{state:n}=t,r=n.facet(TF),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),c=kv(t.state,a.from,a.to);c&&t.dispatch({effects:Um.of(c)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const YN=Ue.replace({widget:new class extends wl{toDOM(t){return MF(t,null)}}});class uhe extends wl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return MF(e,this.value)}}const hhe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class LS extends Qo{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function fhe(t={}){let e={...hhe,...t},n=new LS(e,!0),r=new LS(e,!1),i=gn.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(bl)!=o.state.facet(bl)||o.startState.field(Tc,!1)!=o.state.field(Tc,!1)||br(o.startState)!=br(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Xo;for(let c of o.viewportLineBlocks){let h=kv(o.state,c.from,c.to)?r:Av(o.state,c.from,c.to)?n:null;h&&a.add(c.from,c.from,h)}return a.finish()}}),{domEventHandlers:s}=e;return[i,fue({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||ft.empty},initialSpacer(){return new LS(e,!1)},domEventHandlers:{...s,click:(o,a,c)=>{if(s.click&&s.click(o,a,c))return!0;let h=kv(o.state,a.from,a.to);if(h)return o.dispatch({effects:Um.of(h)}),!0;let f=Av(o.state,a.from,a.to);return f?(o.dispatch({effects:Xx.of(f)}),!0):!1}}}),RF()]}const dhe=_e.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Jx{constructor(e,n){this.specs=e;let r;function i(a){let c=pl.newName();return(r||(r=Object.create(null)))["."+c]=a,c}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof ms?a=>a.prop(rh)==o.data:o?a=>a==o:void 0,this.style=vF(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new pl(r):null,this.themeType=n.themeType}static define(e,n){return new Jx(e,n||{})}}const yA=Ce.define(),OF=Ce.define({combine(t){return t.length?[t[0]]:null}});function IS(t){let e=t.facet(yA);return e.length?e:t.facet(OF)}function phe(t,e){let n=[ghe],r;return t instanceof Jx&&(t.module&&n.push(_e.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(OF.of(t)):r?n.push(yA.computeN([_e.darkTheme],i=>i.facet(_e.darkTheme)==(r=="dark")?[t]:[])):n.push(yA.of(t)),n}class mhe{constructor(e){this.markCache=Object.create(null),this.tree=br(e.state),this.decorations=this.buildDeco(e,IS(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=br(e.state),r=IS(e.state),i=r!=IS(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Ue.none;let r=new Xo;for(let{from:i,to:s}of e.visibleRanges)Iue(this.tree,n,(o,a,c)=>{r.add(o,a,this.markCache[c]||(this.markCache[c]=Ue.mark({class:c})))},i,s);return r.finish()}}const ghe=Bc.high(gn.fromClass(mhe,{decorations:t=>t.decorations})),yhe=Jx.define([{tag:ve.meta,color:"#404740"},{tag:ve.link,textDecoration:"underline"},{tag:ve.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ve.emphasis,fontStyle:"italic"},{tag:ve.strong,fontWeight:"bold"},{tag:ve.strikethrough,textDecoration:"line-through"},{tag:ve.keyword,color:"#708"},{tag:[ve.atom,ve.bool,ve.url,ve.contentSeparator,ve.labelName],color:"#219"},{tag:[ve.literal,ve.inserted],color:"#164"},{tag:[ve.string,ve.deleted],color:"#a11"},{tag:[ve.regexp,ve.escape,ve.special(ve.string)],color:"#e40"},{tag:ve.definition(ve.variableName),color:"#00f"},{tag:ve.local(ve.variableName),color:"#30a"},{tag:[ve.typeName,ve.namespace],color:"#085"},{tag:ve.className,color:"#167"},{tag:[ve.special(ve.variableName),ve.macroName],color:"#256"},{tag:ve.definition(ve.propertyName),color:"#00c"},{tag:ve.comment,color:"#940"},{tag:ve.invalid,color:"#f00"}]),bhe=_e.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),PF=1e4,DF="()[]{}",LF=Ce.define({combine(t){return xo(t,{afterCursor:!0,brackets:DF,maxScanDistance:PF,renderMatch:whe})}}),vhe=Ue.mark({class:"cm-matchingBracket"}),xhe=Ue.mark({class:"cm-nonmatchingBracket"});function whe(t){let e=[],n=t.matched?vhe:xhe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const She=Zn.define({create(){return Ue.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(LF);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=ro(e.state,i.head,-1,r)||i.head>0&&ro(e.state,i.head-1,1,r)||r.afterCursor&&(ro(e.state,i.head,1,r)||i.head<e.state.doc.length&&ro(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Ue.set(n,!0)},provide:t=>_e.decorations.from(t)}),_he=[She,bhe];function Che(t={}){return[LF.of(t),_he]}const Ahe=new it;function bA(t,e,n){let r=t.prop(e<0?it.openedBy:it.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function vA(t){let e=t.type.prop(Ahe);return e?e(t.node):t}function ro(t,e,n,r={}){let i=r.maxScanDistance||PF,s=r.brackets||DF,o=br(t),a=o.resolveInner(e,n);for(let c=a;c;c=c.parent){let h=bA(c.type,n,s);if(h&&c.from<c.to){let f=vA(c);if(f&&(n>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return khe(t,e,n,c,f,h,s)}}return Ehe(t,e,n,o,a.type,i,s)}function khe(t,e,n,r,i,s,o){let a=r.parent,c={from:i.from,to:i.to},h=0,f=a?.cursor();if(f&&(n<0?f.childBefore(r.from):f.childAfter(r.to)))do if(n<0?f.to<=r.from:f.from>=r.to){if(h==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let d=vA(f);return{start:c,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(bA(f.type,n,o))h++;else if(bA(f.type,-n,o)){if(h==0){let d=vA(f);return{start:c,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}h--}}while(n<0?f.prevSibling():f.nextSibling());return{start:c,matched:!1}}function Ehe(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),c=o.indexOf(a);if(c<0||c%2==0!=n>0)return null;let h={from:n<0?e-1:e,to:n>0?e+1:e},f=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let m=0;!f.next().done&&m<=s;){let y=f.value;n<0&&(m+=y.length);let b=e+m*n;for(let w=n>0?0:y.length-1,S=n>0?y.length:-1;w!=S;w+=n){let _=o.indexOf(y[w]);if(!(_<0||r.resolveInner(b+w,1).type!=i))if(_%2==0==n>0)d++;else{if(d==1)return{start:h,end:{from:b+w,to:b+w+1},matched:_>>1==c>>1};d--}}n>0&&(m+=y.length)}return f.done?{start:h,matched:!1}:null}const The=Object.create(null),XN=[Qr.none],JN=[],QN=Object.create(null),Rhe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Rhe[t]=Mhe(The,e);function NS(t,e){JN.indexOf(t)>-1||(JN.push(t),console.warn(e))}function Mhe(t,e){let n=[];for(let a of e.split(" ")){let c=[];for(let h of a.split(".")){let f=t[h]||ve[h];f?typeof f=="function"?c.length?c=c.map(f):NS(h,`Modifier ${h} used at start of tag`):c.length?NS(h,`Tag ${h} used as modifier`):c=Array.isArray(f)?f:[f]:NS(h,`Unknown highlighting tag ${h}`)}for(let h of c)n.push(h)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=QN[i];if(s)return s.id;let o=QN[i]=Qr.define({id:XN.length,name:r,props:[yF({[r]:n})]});return XN.push(o),o.id}Bt.RTL,Bt.LTR;const Ohe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=hT(t.state,n.from);return r.line?Phe(t):r.block?Lhe(t):!1};function uT(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const Phe=uT(Bhe,0),Dhe=uT(IF,0),Lhe=uT((t,e)=>IF(t,e,Nhe(e)),0);function hT(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Ld=50;function Ihe(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Ld,r),o=t.sliceDoc(i,i+Ld),a=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(o)[0].length,h=s.length-a;if(s.slice(h-e.length,h)==e&&o.slice(c,c+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+c,margin:c&&1}};let f,d;i-r<=2*Ld?f=d=t.sliceDoc(r,i):(f=t.sliceDoc(r,r+Ld),d=t.sliceDoc(i-Ld,i));let m=/^\s*/.exec(f)[0].length,y=/\s*$/.exec(d)[0].length,b=d.length-y-n.length;return f.slice(m,m+e.length)==e&&d.slice(b,b+n.length)==n?{open:{pos:r+m+e.length,margin:/\s/.test(f.charAt(m+e.length))?1:0},close:{pos:i-y-n.length,margin:/\s/.test(d.charAt(b-1))?1:0}}:null}function Nhe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function IF(t,e,n=e.selection.ranges){let r=n.map(s=>hT(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>Ihe(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let c=r[o],{open:h,close:f}=a;s.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:f.pos-f.margin,to:f.pos+c.close.length})}return{changes:s}}return null}function Bhe(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,c=1e9,h=hT(e,s).line;if(h){for(let f=s;f<=o;){let d=e.doc.lineAt(f);if(d.from>i&&(s==o||o>d.from)){i=d.from;let m=/^\s*/.exec(d.text)[0].length,y=m==d.length,b=d.text.slice(m,m+h.length)==h?m:-1;m<d.text.length&&m<c&&(c=m),r.push({line:d,comment:b,token:h,indent:m,empty:y,single:!1})}f=d.to+1}if(c<1e9)for(let f=a;f<r.length;f++)r[f].indent<r[f].line.text.length&&(r[f].indent=c);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:c,indent:h,empty:f,single:d}of r)(d||!f)&&s.push({from:a.from+h,insert:c+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:c}of r)if(a>=0){let h=o.from+a,f=h+c.length;o.text[f-o.from]==" "&&f++,s.push({from:h,to:f})}return{changes:s}}return null}const xA=sa.define(),jhe=sa.define(),$he=Ce.define(),NF=Ce.define({combine(t){return xo(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),BF=Zn.define({create(){return io.empty},update(t,e){let n=e.state.facet(NF),r=e.annotation(xA);if(r){let c=Yr.fromTransaction(e,r.selection),h=r.side,f=h==0?t.undone:t.done;return c?f=Ev(f,f.length,n.minDepth,c):f=VF(f,e.startState.selection),new io(h==0?r.rest:f,h==0?f:r.rest)}let i=e.annotation(jhe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(kn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Yr.fromTransaction(e),o=e.annotation(kn.time),a=e.annotation(kn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new io(t.done.map(Yr.fromJSON),t.undone.map(Yr.fromJSON))}});function Vhe(t={}){return[BF,NF.of(t),_e.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?jF:e.inputType=="historyRedo"?wA:null;return r?(e.preventDefault(),r(n)):!1}})]}function Qx(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(BF,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const jF=Qx(0,!1),wA=Qx(1,!1),Fhe=Qx(0,!0),zhe=Qx(1,!0);class Yr{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Yr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Yr(e.changes&&An.fromJSON(e.changes),[],e.mapped&&lo.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,n){let r=Ki;for(let i of e.startState.facet($he)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Yr(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Ki)}static selection(e){return new Yr(void 0,Ki,void 0,void 0,e)}}function Ev(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function Hhe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let c=0;c<n.length;){let h=n[c++],f=n[c++];a>=h&&o<=f&&(r=!0)}}),r}function Uhe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function $F(t,e){return t.length?e.length?t.concat(e):t:e}const Ki=[],qhe=200;function VF(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-qhe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Ev(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Yr.selection([e])]}function Whe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function BS(t,e){if(!t.length)return t;let n=t.length,r=Ki;for(;n;){let i=Ghe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Yr.selection(r)]:Ki}function Ghe(t,e,n){let r=$F(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Ki,n);if(!t.changes)return Yr.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Yr(i,Qe.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const Khe=/^(input\.type|delete)($|\.)/;class io{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new io(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Khe.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,Hhe(a.changes,e.changes))||r=="input.type.compose")?o=Ev(o,o.length-1,i.minDepth,new Yr(e.changes.compose(a.changes),$F(Qe.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Ki)):o=Ev(o,o.length,i.minDepth,e),new io(o,Ki,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ki;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Uhe(s[s.length-1],e)?this:new io(VF(this.done,e),this.undone,n,r)}addMapping(e){return new io(BS(this.done,e),BS(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:xA.of({side:e,rest:Whe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Ki:i.slice(0,i.length-1);return s.mapped&&(a=BS(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:xA.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}io.empty=new io(Ki,Ki);const Yhe=[{key:"Mod-z",run:jF,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:wA,preventDefault:!0},{linux:"Ctrl-Shift-z",run:wA,preventDefault:!0},{key:"Mod-u",run:Fhe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:zhe,preventDefault:!0}];function Qh(t,e){return fe.create(t.ranges.map(e),t.mainIndex)}function wo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Rs({state:t,dispatch:e},n){let r=Qh(t.selection,n);return r.eq(t.selection,!0)?!1:(e(wo(t,r)),!0)}function Zx(t,e){return fe.cursor(e?t.to:t.from)}function FF(t,e){return Rs(t,n=>n.empty?t.moveByChar(n,e):Zx(n,e))}function vr(t){return t.textDirectionAt(t.state.selection.main.head)==Bt.LTR}const zF=t=>FF(t,!vr(t)),HF=t=>FF(t,vr(t));function UF(t,e){return Rs(t,n=>n.empty?t.moveByGroup(n,e):Zx(n,e))}const Xhe=t=>UF(t,!vr(t)),Jhe=t=>UF(t,vr(t));function Qhe(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function e1(t,e,n){let r=br(t).resolveInner(e.head),i=n?it.closedBy:it.openedBy;for(let c=e.head;;){let h=n?r.childAfter(c):r.childBefore(c);if(!h)break;Qhe(t,h,i)?r=h:c=n?h.to:h.from}let s=r.type.prop(i),o,a;return s&&(o=n?ro(t,r.from,1):ro(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,fe.cursor(a,n?-1:1)}const Zhe=t=>Rs(t,e=>e1(t.state,e,!vr(t))),efe=t=>Rs(t,e=>e1(t.state,e,vr(t)));function qF(t,e){return Rs(t,n=>{if(!n.empty)return Zx(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const WF=t=>qF(t,!1),GF=t=>qF(t,!0);function KF(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(_e.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function YF(t,e){let n=KF(t),{state:r}=t,i=Qh(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):Zx(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),c=a.top+n.marginTop,h=a.bottom-n.marginBottom;o&&o.top>c&&o.bottom<h&&(s=_e.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-c}))}return t.dispatch(wo(r,i),{effects:s}),!0}const ZN=t=>YF(t,!1),SA=t=>YF(t,!0);function Sl(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=fe.cursor(r.from+s))}return i}const tfe=t=>Rs(t,e=>Sl(t,e,!0)),nfe=t=>Rs(t,e=>Sl(t,e,!1)),rfe=t=>Rs(t,e=>Sl(t,e,!vr(t))),ife=t=>Rs(t,e=>Sl(t,e,vr(t))),sfe=t=>Rs(t,e=>fe.cursor(t.lineBlockAt(e.head).from,1)),ofe=t=>Rs(t,e=>fe.cursor(t.lineBlockAt(e.head).to,-1));function afe(t,e,n){let r=!1,i=Qh(t.selection,s=>{let o=ro(t,s.head,-1)||ro(t,s.head,1)||s.head>0&&ro(t,s.head-1,1)||s.head<t.doc.length&&ro(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return fe.cursor(a)});return r?(e(wo(t,i)),!0):!1}const lfe=({state:t,dispatch:e})=>afe(t,e);function ts(t,e){let n=Qh(t.state.selection,r=>{let i=e(r);return fe.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(wo(t.state,n)),!0)}function XF(t,e){return ts(t,n=>t.moveByChar(n,e))}const JF=t=>XF(t,!vr(t)),QF=t=>XF(t,vr(t));function ZF(t,e){return ts(t,n=>t.moveByGroup(n,e))}const cfe=t=>ZF(t,!vr(t)),ufe=t=>ZF(t,vr(t)),hfe=t=>ts(t,e=>e1(t.state,e,!vr(t))),ffe=t=>ts(t,e=>e1(t.state,e,vr(t)));function ez(t,e){return ts(t,n=>t.moveVertically(n,e))}const tz=t=>ez(t,!1),nz=t=>ez(t,!0);function rz(t,e){return ts(t,n=>t.moveVertically(n,e,KF(t).height))}const e3=t=>rz(t,!1),t3=t=>rz(t,!0),dfe=t=>ts(t,e=>Sl(t,e,!0)),pfe=t=>ts(t,e=>Sl(t,e,!1)),mfe=t=>ts(t,e=>Sl(t,e,!vr(t))),gfe=t=>ts(t,e=>Sl(t,e,vr(t))),yfe=t=>ts(t,e=>fe.cursor(t.lineBlockAt(e.head).from)),bfe=t=>ts(t,e=>fe.cursor(t.lineBlockAt(e.head).to)),n3=({state:t,dispatch:e})=>(e(wo(t,{anchor:0})),!0),r3=({state:t,dispatch:e})=>(e(wo(t,{anchor:t.doc.length})),!0),i3=({state:t,dispatch:e})=>(e(wo(t,{anchor:t.selection.main.anchor,head:0})),!0),s3=({state:t,dispatch:e})=>(e(wo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),vfe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),xfe=({state:t,dispatch:e})=>{let n=t1(t).map(({from:r,to:i})=>fe.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:fe.create(n),userEvent:"select"})),!0},wfe=({state:t,dispatch:e})=>{let n=Qh(t.selection,r=>{let i=br(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return fe.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(wo(t,n)),!0)},Sfe=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=fe.create([n.main]):n.main.empty||(r=fe.create([fe.cursor(n.main.head)])),r?(e(wo(t,r)),!0):!1};function qm(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let c=e(s);c<o?(n="delete.backward",c=Oy(t,c,!1)):c>o&&(n="delete.forward",c=Oy(t,c,!0)),o=Math.min(o,c),a=Math.max(a,c)}else o=Oy(t,o,!1),a=Oy(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:fe.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?_e.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Oy(t,e,n){if(t instanceof _e)for(let r of t.state.facet(_e.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const iz=(t,e,n)=>qm(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,c;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let h=Jh(a,s.tabSize),f=h%Cv(s)||Cv(s);for(let d=0;d<f&&a[a.length-1-d]==" ";d++)i--;c=i}else c=Xn(o.text,i-o.from,e,e)+o.from,c==i&&o.number!=(e?s.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(c-o.from,i-o.from))&&(c=Xn(o.text,c-o.from,!1,!1)+o.from);return c}),_A=t=>iz(t,!1,!0),sz=t=>iz(t,!0,!1),oz=(t,e)=>qm(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let c=Xn(s.text,r-s.from,e)+s.from,h=s.text.slice(Math.min(r,c)-s.from,Math.max(r,c)-s.from),f=o(h);if(a!=null&&f!=a)break;(h!=" "||r!=n.head)&&(a=f),r=c}return r}),az=t=>oz(t,!1),_fe=t=>oz(t,!0),Cfe=t=>qm(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Afe=t=>qm(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),kfe=t=>qm(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Efe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:dt.of(["",""])},range:fe.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Tfe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Xn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Xn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:fe.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function t1(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function lz(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of t1(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let c of s.ranges)i.push(fe.range(Math.min(t.doc.length,c.anchor+a),Math.min(t.doc.length,c.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let c of s.ranges)i.push(fe.range(c.anchor-a,c.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:fe.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Rfe=({state:t,dispatch:e})=>lz(t,e,!1),Mfe=({state:t,dispatch:e})=>lz(t,e,!0);function cz(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of t1(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ofe=({state:t,dispatch:e})=>cz(t,e,!1),Pfe=({state:t,dispatch:e})=>cz(t,e,!0),Dfe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(t1(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Qh(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Lfe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=br(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(it.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const o3=uz(!1),Ife=uz(!0);function uz(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),c=!t&&s==o&&Lfe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let h=new Yx(e,{simulateBreak:s,simulateDoubleBreak:!!c}),f=lT(h,s);for(f==null&&(f=Jh(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;c?{from:s,to:o}=c:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",lm(e,f)];return c&&d.push(lm(e,h.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:dt.of(d)},range:fe.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function fT(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:fe.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const Nfe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Yx(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=fT(t,(s,o,a)=>{let c=lT(r,s.from);if(c==null)return;/\S/.test(s.text)||(c=0);let h=/^\s*/.exec(s.text)[0],f=lm(t,c);(h!=f||a.from<s.from+h.length)&&(n[s.from]=c,o.push({from:s.from,to:s.from+h.length,insert:f}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Bfe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(fT(t,(n,r)=>{r.push({from:n.from,insert:t.facet(aT)})}),{userEvent:"input.indent"})),!0),jfe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(fT(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Jh(i,t.tabSize),o=0,a=lm(t,Math.max(0,s-Cv(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),$fe=t=>(t.setTabFocusMode(),!0),Vfe=[{key:"Ctrl-b",run:zF,shift:JF,preventDefault:!0},{key:"Ctrl-f",run:HF,shift:QF},{key:"Ctrl-p",run:WF,shift:tz},{key:"Ctrl-n",run:GF,shift:nz},{key:"Ctrl-a",run:sfe,shift:yfe},{key:"Ctrl-e",run:ofe,shift:bfe},{key:"Ctrl-d",run:sz},{key:"Ctrl-h",run:_A},{key:"Ctrl-k",run:Cfe},{key:"Ctrl-Alt-h",run:az},{key:"Ctrl-o",run:Efe},{key:"Ctrl-t",run:Tfe},{key:"Ctrl-v",run:SA}],Ffe=[{key:"ArrowLeft",run:zF,shift:JF,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Xhe,shift:cfe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:rfe,shift:mfe,preventDefault:!0},{key:"ArrowRight",run:HF,shift:QF,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Jhe,shift:ufe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ife,shift:gfe,preventDefault:!0},{key:"ArrowUp",run:WF,shift:tz,preventDefault:!0},{mac:"Cmd-ArrowUp",run:n3,shift:i3},{mac:"Ctrl-ArrowUp",run:ZN,shift:e3},{key:"ArrowDown",run:GF,shift:nz,preventDefault:!0},{mac:"Cmd-ArrowDown",run:r3,shift:s3},{mac:"Ctrl-ArrowDown",run:SA,shift:t3},{key:"PageUp",run:ZN,shift:e3},{key:"PageDown",run:SA,shift:t3},{key:"Home",run:nfe,shift:pfe,preventDefault:!0},{key:"Mod-Home",run:n3,shift:i3},{key:"End",run:tfe,shift:dfe,preventDefault:!0},{key:"Mod-End",run:r3,shift:s3},{key:"Enter",run:o3,shift:o3},{key:"Mod-a",run:vfe},{key:"Backspace",run:_A,shift:_A},{key:"Delete",run:sz},{key:"Mod-Backspace",mac:"Alt-Backspace",run:az},{key:"Mod-Delete",mac:"Alt-Delete",run:_fe},{mac:"Mod-Backspace",run:Afe},{mac:"Mod-Delete",run:kfe}].concat(Vfe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),zfe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Zhe,shift:hfe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:efe,shift:ffe},{key:"Alt-ArrowUp",run:Rfe},{key:"Shift-Alt-ArrowUp",run:Ofe},{key:"Alt-ArrowDown",run:Mfe},{key:"Shift-Alt-ArrowDown",run:Pfe},{key:"Escape",run:Sfe},{key:"Mod-Enter",run:Ife},{key:"Alt-l",mac:"Ctrl-l",run:xfe},{key:"Mod-i",run:wfe,preventDefault:!0},{key:"Mod-[",run:jfe},{key:"Mod-]",run:Bfe},{key:"Mod-Alt-\\",run:Nfe},{key:"Shift-Mod-k",run:Dfe},{key:"Shift-Mod-\\",run:lfe},{key:"Mod-/",run:Ohe},{key:"Alt-A",run:Dhe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:$fe}].concat(Ffe),a3=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Nh{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(a3(a)):a3,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return qr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=FE(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Zs(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),c=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(c)return this.value=c,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Nh.prototype[Symbol.iterator]=function(){return this});const hz={from:-1,to:-1,match:/.*/.exec("")},dT="gm"+(/x/.unicode==null?"":"u");class fz{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=hz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new dz(e,n,r,i,s);this.re=new RegExp(n,dT+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=Tv(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=Tv(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const jS=new WeakMap;class wh{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=jS.get(e);if(!i||i.from>=r||i.to<=n){let a=new wh(n,e.sliceString(n,r));return jS.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),jS.set(e,new wh(o,s)),new wh(n,s.slice(n-o,r-o))}}class dz{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=hz,this.matchPos=Tv(e,i),this.re=new RegExp(n,dT+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=wh.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=Tv(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=wh.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(fz.prototype[Symbol.iterator]=dz.prototype[Symbol.iterator]=function(){return this});function Hfe(t){try{return new RegExp(t,dT),!0}catch{return!1}}function Tv(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function CA(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=At("input",{class:"cm-textfield",name:"line",value:e}),r=At("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Rp.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},At("label",t.state.phrase("Go to line"),": ",n)," ",At("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),At("button",{name:"close",onclick:()=>{t.dispatch({effects:Rp.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,c,h,f,d]=s,m=f?+f.slice(1):0,y=h?+h:a.number;if(h&&d){let S=y/100;c&&(S=S*(c=="-"?-1:1)+a.number/o.doc.lines),y=Math.round(o.doc.lines*S)}else h&&c&&(y=y*(c=="-"?-1:1)+a.number);let b=o.doc.line(Math.max(1,Math.min(o.doc.lines,y))),w=fe.cursor(b.from+Math.max(0,Math.min(m,b.length)));t.dispatch({effects:[Rp.of(!1),_e.scrollIntoView(w.from,{y:"center"})],selection:w}),t.focus()}return{dom:r}}const Rp=Qe.define(),l3=Zn.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Rp)&&(t=n.value);return t},provide:t=>om.from(t,e=>e?CA:null)}),Ufe=t=>{let e=sm(t,CA);if(!e){let n=[Rp.of(!0)];t.state.field(l3,!1)==null&&n.push(Qe.appendConfig.of([l3,qfe])),t.dispatch({effects:n}),e=sm(t,CA)}return e&&e.dom.querySelector("input").select(),!0},qfe=_e.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Wfe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Gfe=Ce.define({combine(t){return xo(t,Wfe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function Kfe(t){return[Zfe,Qfe]}const Yfe=Ue.mark({class:"cm-selectionMatch"}),Xfe=Ue.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function c3(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=zt.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=zt.Word)}function Jfe(t,e,n,r){return t(e.sliceDoc(n,n+1))==zt.Word&&t(e.sliceDoc(r-1,r))==zt.Word}const Qfe=gn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Gfe),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Ue.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Ue.none;let c=n.wordAt(i.head);if(!c)return Ue.none;o=n.charCategorizer(i.head),s=n.sliceDoc(c.from,c.to)}else{let c=i.to-i.from;if(c<e.minSelectionLength||c>200)return Ue.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(c3(o,n,i.from,i.to)&&Jfe(o,n,i.from,i.to)))return Ue.none}else if(s=n.sliceDoc(i.from,i.to),!s)return Ue.none}let a=[];for(let c of t.visibleRanges){let h=new Nh(n.doc,s,c.from,c.to);for(;!h.next().done;){let{from:f,to:d}=h.value;if((!o||c3(o,n,f,d))&&(i.empty&&f<=i.from&&d>=i.to?a.push(Xfe.range(f,d)):(f>=i.to||d<=i.from)&&a.push(Yfe.range(f,d)),a.length>e.maxMatches))return Ue.none}}return Ue.set(a)}},{decorations:t=>t.decorations}),Zfe=_e.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),ede=({state:t,dispatch:e})=>{let{selection:n}=t,r=fe.create(n.ranges.map(i=>t.wordAt(i.head)||fe.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function tde(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Nh(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Nh(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(c=>c.from==a.value.from))continue;if(s){let c=t.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const nde=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return ede({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=tde(t,r);return i?(e(t.update({selection:t.selection.addRange(fe.range(i.from,i.to),!1),effects:_e.scrollIntoView(i.to)})),!0):!1},Zh=Ce.define({combine(t){return xo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new pde(e),scrollToMatch:e=>_e.scrollIntoView(e)})}});class pz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Hfe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ode(this):new ide(this)}getCursor(e,n=0,r){let i=e.doc?e:ht.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Qu(this,i,n,r):Ju(this,i,n,r)}}class mz{constructor(e){this.spec=e}}function Ju(t,e,n,r){return new Nh(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?rde(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function rde(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Rv(i,n-s))!=zt.Word||e(Mv(i,n-s))!=zt.Word)&&(e(Mv(i,r-s))!=zt.Word||e(Rv(i,r-s))!=zt.Word))}class ide extends mz{constructor(e){super(e)}nextMatch(e,n,r){let i=Ju(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Ju(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Ju(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Ju(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Ju(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Qu(t,e,n,r){return new fz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?sde(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Rv(t,e){return t.slice(Xn(t,e,!1),e)}function Mv(t,e){return t.slice(e,Xn(t,e))}function sde(t){return(e,n,r)=>!r[0].length||(t(Rv(r.input,r.index))!=zt.Word||t(Mv(r.input,r.index))!=zt.Word)&&(t(Mv(r.input,r.index+r[0].length))!=zt.Word||t(Rv(r.input,r.index+r[0].length))!=zt.Word)}class ode extends mz{nextMatch(e,n,r){let i=Qu(this.spec,e,r,e.doc.length).next();return i.done&&(i=Qu(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=Qu(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Qu(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Qu(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const cm=Qe.define(),pT=Qe.define(),ll=Zn.define({create(t){return new $S(AA(t).create(),null)},update(t,e){for(let n of e.effects)n.is(cm)?t=new $S(n.value.create(),t.panel):n.is(pT)&&(t=new $S(t.query,n.value?mT:null));return t},provide:t=>om.from(t,e=>e.panel)});class $S{constructor(e,n){this.query=e,this.panel=n}}const ade=Ue.mark({class:"cm-searchMatch"}),lde=Ue.mark({class:"cm-searchMatch cm-searchMatch-selected"}),cde=gn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ll))}update(t){let e=t.state.field(ll);(e!=t.startState.field(ll)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ue.none;let{view:n}=this,r=new Xo;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:c}=s[i];for(;i<o-1&&c>s[i+1].from-500;)c=s[++i].to;t.highlight(n.state,a,c,(h,f)=>{let d=n.state.selection.ranges.some(m=>m.from==h&&m.to==f);r.add(h,f,d?lde:ade)})}return r.finish()}},{decorations:t=>t.decorations});function Wm(t){return e=>{let n=e.state.field(ll,!1);return n&&n.query.spec.valid?t(e,n):bz(e)}}const Ov=Wm((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=fe.single(r.from,r.to),s=t.state.facet(Zh);return t.dispatch({selection:i,effects:[gT(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),yz(t),!0}),Pv=Wm((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=fe.single(i.from,i.to),o=t.state.facet(Zh);return t.dispatch({selection:s,effects:[gT(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),yz(t),!0}),ude=Wm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:fe.create(n.map(r=>fe.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),hde=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Nh(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(fe.range(a.value.from,a.value.to))}return e(t.update({selection:fe.create(s,o),userEvent:"select.search.matches"})),!0},u3=Wm((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],c,h,f=[];o.from==r&&o.to==i&&(h=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:h}),o=e.nextMatch(n,o.from,o.to),f.push(_e.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let d=t.state.changes(a);return o&&(c=fe.single(o.from,o.to).map(d),f.push(gT(t,o)),f.push(n.facet(Zh).scrollToMatch(c.main,t))),t.dispatch({changes:d,selection:c,effects:f,userEvent:"input.replace"}),!0}),fde=Wm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:_e.announce.of(r),userEvent:"input.replace.all"}),!0});function mT(t){return t.state.facet(Zh).createPanel(t)}function AA(t,e){var n,r,i,s,o;let a=t.selection.main,c=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!c)return e;let h=t.facet(Zh);return new pz({search:((n=e?.literal)!==null&&n!==void 0?n:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:h.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:h.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function gz(t){let e=sm(t,mT);return e&&e.dom.querySelector("[main-field]")}function yz(t){let e=gz(t);e&&e==t.root.activeElement&&e.select()}const bz=t=>{let e=t.state.field(ll,!1);if(e&&e.panel){let n=gz(t);if(n&&n!=t.root.activeElement){let r=AA(t.state,e.query.spec);r.valid&&t.dispatch({effects:cm.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[pT.of(!0),e?cm.of(AA(t.state,e.query.spec)):Qe.appendConfig.of(gde)]});return!0},vz=t=>{let e=t.state.field(ll,!1);if(!e||!e.panel)return!1;let n=sm(t,mT);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:pT.of(!1)}),!0},dde=[{key:"Mod-f",run:bz,scope:"editor search-panel"},{key:"F3",run:Ov,shift:Pv,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ov,shift:Pv,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:vz,scope:"editor search-panel"},{key:"Mod-Shift-l",run:hde},{key:"Mod-Alt-g",run:Ufe},{key:"Mod-d",run:nde,preventDefault:!0}];class pde{constructor(e){this.view=e;let n=this.query=e.state.field(ll).query.spec;this.commit=this.commit.bind(this),this.searchField=At("input",{value:n.search,placeholder:fi(e,"Find"),"aria-label":fi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=At("input",{value:n.replace,placeholder:fi(e,"Replace"),"aria-label":fi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=At("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=At("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=At("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return At("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=At("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Ov(e),[fi(e,"next")]),r("prev",()=>Pv(e),[fi(e,"previous")]),r("select",()=>ude(e),[fi(e,"all")]),At("label",null,[this.caseField,fi(e,"match case")]),At("label",null,[this.reField,fi(e,"regexp")]),At("label",null,[this.wordField,fi(e,"by word")]),...e.state.readOnly?[]:[At("br"),this.replaceField,r("replace",()=>u3(e),[fi(e,"replace")]),r("replaceAll",()=>fde(e),[fi(e,"replace all")])],At("button",{name:"close",onclick:()=>vz(e),"aria-label":fi(e,"close"),type:"button"},[""])])}commit(){let e=new pz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:cm.of(e)}))}keydown(e){Sce(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Pv:Ov)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),u3(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(cm)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Zh).top}}function fi(t,e){return t.state.phrase(e)}const Py=30,Dy=/[\s\.,:;?!]/;function gT(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Py),o=Math.min(i,n+Py),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let c=0;c<Py;c++)if(!Dy.test(a[c+1])&&Dy.test(a[c])){a=a.slice(c);break}}if(o!=i){for(let c=a.length-1;c>a.length-Py;c--)if(!Dy.test(a[c-1])&&Dy.test(a[c])){a=a.slice(0,c);break}}return _e.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const mde=_e.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),gde=[ll,Bc.low(cde),mde];class xz{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=br(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(wz(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function h3(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function yde(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=h3(e)+h3(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function bde(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:yde(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class f3{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function gc(t){return t.selection.main.from}function wz(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const Sz=sa.define();function vde(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return{...t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let c=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:c},range:fe.cursor(a.from+s+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const d3=new WeakMap;function xde(t){if(!Array.isArray(t))return t;let e=d3.get(t);return e||d3.set(t,e=bde(t)),e}const Dv=Qe.define(),um=Qe.define();class wde{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=qr(e,n),i=Zs(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(qr(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let A=qr(e,0),k=Zs(A),P=k==e.length?0:-100;if(A!=n[0])if(A==r[0])P+=-200;else return null;return this.ret(P,[0,k])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=n.length,h=0;if(a<0){for(let A=0,k=Math.min(e.length,200);A<k&&h<c;){let P=qr(e,A);(P==n[h]||P==r[h])&&(i[h++]=A),A+=Zs(P)}if(h<c)return null}let f=0,d=0,m=!1,y=0,b=-1,w=-1,S=/[a-z]/.test(e),_=!0;for(let A=0,k=Math.min(e.length,200),P=0;A<k&&d<c;){let M=qr(e,A);a<0&&(f<c&&M==n[f]&&(s[f++]=A),y<c&&(M==n[y]||M==r[y]?(y==0&&(b=A),w=A+1,y++):y=0));let O,L=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(O=FE(M))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!A||L==1&&S||P==0&&L!=0)&&(n[d]==M||r[d]==M&&(m=!0)?o[d++]=A:o.length&&(_=!1)),P=L,A+=Zs(M)}return d==c&&o[0]==0&&_?this.result(-100+(m?-200:0),o,e):y==c&&b==0?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):y==c?this.ret(-900-e.length,[b,w]):d==c?this.result(-100+(m?-200:0)+-700+(_?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Zs(qr(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class Sde{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const jn=Ce.define({combine(t){return xo(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:_de,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>p3(e(r),n(r)),optionClass:(e,n)=>r=>p3(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function p3(t,e){return t?e?t+" "+e:t:e}function _de(t,e,n,r,i,s){let o=t.textDirection==Bt.RTL,a=o,c=!1,h="top",f,d,m=e.left-i.left,y=i.right-e.right,b=r.right-r.left,w=r.bottom-r.top;if(a&&m<Math.min(b,y)?a=!1:!a&&y<Math.min(b,m)&&(a=!0),b<=(a?m:y))f=Math.max(i.top,Math.min(n.top,i.bottom-w))-e.top,d=Math.min(400,a?m:y);else{c=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let A=i.bottom-e.bottom;A>=w||A>e.top?f=n.bottom-e.top:(h="bottom",f=e.bottom-n.top)}let S=(e.bottom-e.top)/s.offsetHeight,_=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${f/S}px; max-width: ${d/_}px`,class:"cm-completionInfo-"+(c?o?"left-narrow":"right-narrow":a?"left":"right")}}function Cde(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,c=0;for(let h=0;h<s.length;){let f=s[h++],d=s[h++];f>c&&o.appendChild(document.createTextNode(a.slice(c,f)));let m=o.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(a.slice(f,d))),m.className="cm-completionMatchedText",c=d}return c<a.length&&o.appendChild(document.createTextNode(a.slice(c))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function VS(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class Ade{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(jn);this.optionContent=Cde(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=VS(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(n).open;for(let f=c.target,d;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(d=/-(\d+)$/.exec(f.id))&&+d[1]<h.length){this.applyCompletion(e,h[+d[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(jn).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:um.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=VS(s.length,o,e.state.facet(jn).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=VS(n.options.length,n.selected,this.view.state.facet(jn).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Kr(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&Ede(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(jn).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:c}=e[o],{section:h}=a;if(h){let m=typeof h=="string"?h:h.name;if(m!=s&&(o>r.from||r.from==0))if(s=m,typeof h!="string"&&h.header)i.appendChild(h.header(h));else{let y=i.appendChild(document.createElement("completion-section"));y.textContent=m}}const f=i.appendChild(document.createElement("li"));f.id=n+"-"+o,f.setAttribute("role","option");let d=this.optionClass(a);d&&(f.className=d);for(let m of this.optionContent){let y=m(a,this.view.state,this.view,c);y&&f.appendChild(y)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function kde(t,e){return n=>new Ade(n,t,e)}function Ede(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function m3(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Tde(t,e){let n=[],r=null,i=h=>{n.push(h);let{section:f}=h.completion;if(f){r||(r=[]);let d=typeof f=="string"?f:f.name;r.some(m=>m.name==d)||r.push(typeof f=="string"?{name:d}:f)}},s=e.facet(jn);for(let h of t)if(h.hasResult()){let f=h.result.getMatch;if(h.result.filter===!1)for(let d of h.result.options)i(new f3(d,h.source,f?f(d):[],1e9-n.length));else{let d=e.sliceDoc(h.from,h.to),m,y=s.filterStrict?new Sde(d):new wde(d);for(let b of h.result.options)if(m=y.match(b.label)){let w=b.displayLabel?f?f(b,m.matched):[]:m.matched;i(new f3(b,h.source,w,m.score+(b.boost||0)))}}}if(r){let h=Object.create(null),f=0,d=(m,y)=>{var b,w;return((b=m.rank)!==null&&b!==void 0?b:1e9)-((w=y.rank)!==null&&w!==void 0?w:1e9)||(m.name<y.name?-1:1)};for(let m of r.sort(d))f-=1e5,h[m.name]=f;for(let m of n){let{section:y}=m.completion;y&&(m.score+=h[typeof y=="string"?y:y.name])}}let o=[],a=null,c=s.compareCompletions;for(let h of n.sort((f,d)=>d.score-f.score||c(f.completion,d.completion))){let f=h.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?o.push(h):m3(h.completion)>m3(a)&&(o[o.length-1]=h),a=h.completion}return o}class ih{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ih(this.options,g3(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(h=>h.isPending))return i.setDisabled();let a=Tde(e,n);if(!a.length)return i&&e.some(h=>h.isPending)?i.setDisabled():null;let c=n.facet(jn).selectOnOpen?0:-1;if(i&&i.selected!=c&&i.selected!=-1){let h=i.options[i.selected].completion;for(let f=0;f<a.length;f++)if(a[f].completion==h){c=f;break}}return new ih(a,g3(r,c),{pos:e.reduce((h,f)=>f.hasResult()?Math.min(h,f.from):h,1e8),create:Lde,above:s.aboveCursor},i?i.timestamp:Date.now(),c,!1)}map(e){return new ih(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new ih(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Lv{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Lv(Pde,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(jn),s=(r.override||n.languageDataAt("autocomplete",gc(n)).map(xde)).map(c=>(this.active.find(f=>f.source==c)||new Yi(c,this.active.some(f=>f.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((c,h)=>c==this.active[h])&&(s=this.active);let o=this.open,a=e.effects.some(c=>c.is(yT));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!Rde(s,this.active)||a?o=ih.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(c=>c.isPending)&&(o=null),!o&&s.every(c=>!c.isPending)&&s.some(c=>c.hasResult())&&(s=s.map(c=>c.hasResult()?new Yi(c.source,0):c));for(let c of e.effects)c.is(Cz)&&(o=o&&o.setSelected(c.value,this.id));return s==this.active&&o==this.open?this:new Lv(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Mde:Ode}}function Rde(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const Mde={"aria-autocomplete":"list"},Ode={};function g3(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Pde=[];function _z(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(Sz);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Yi{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=_z(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new Yi(i.source,0)),r&4&&i.state==0&&(i=new Yi(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(Dv))i=new Yi(i.source,1,s.value);else if(s.is(um))i=new Yi(i.source,0);else if(s.is(yT))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(gc(e.state))}}class Sh extends Yi{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=gc(e.state);if(a>o||!i||n&2&&(gc(e.startState)==this.from||a<this.limit))return new Yi(this.source,n&4?1:0);let c=e.changes.mapPos(this.limit);return Dde(i.validFor,e.state,s,o)?new Sh(this.source,this.explicit,c,i,s,o):i.update&&(i=i.update(i,s,o,new xz(e.state,a,!1)))?new Sh(this.source,this.explicit,c,i,i.from,(r=i.to)!==null&&r!==void 0?r:gc(e.state)):new Yi(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Sh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Yi(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Dde(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):wz(t,!0).test(i)}const yT=Qe.define({map(t,e){return t.map(n=>n.map(e))}}),Cz=Qe.define(),Gr=Zn.define({create(){return Lv.start()},update(t,e){return t.update(e)},provide:t=>[nT.from(t,e=>e.tooltip),_e.contentAttributes.from(t,e=>e.attrs)]});function bT(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Gr).active.find(i=>i.source==e.source);return r instanceof Sh?(typeof n=="string"?t.dispatch({...vde(t.state,n,r.from,r.to),annotations:Sz.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const Lde=kde(Gr,bT);function Ly(t,e="option"){return n=>{let r=n.state.field(Gr,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(jn).interactionDelay)return!1;let i=1,s;e=="page"&&(s=lF(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:Cz.of(a)}),!0}}const Ide=t=>{let e=t.state.field(Gr,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(jn).interactionDelay?!1:bT(t,e.open.options[e.open.selected])},FS=t=>t.state.field(Gr,!1)?(t.dispatch({effects:Dv.of(!0)}),!0):!1,Nde=t=>{let e=t.state.field(Gr,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:um.of(null)}),!0)};class Bde{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const jde=50,$de=1e3,Vde=gn.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Gr).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Gr),n=t.state.facet(jn);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Gr)==e)return;let r=t.transactions.some(s=>{let o=_z(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>jde&&Date.now()-o.time>$de){for(let a of o.context.abortListeners)try{a()}catch(c){Kr(this.view.state,c)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(Dv)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Gr);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(jn).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=gc(e),r=new xz(e,n,t.explicit,this.view),i=new Bde(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:um.of(null)}),Kr(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(jn).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(jn),r=this.view.state.field(Gr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=gc(s.updates.length?s.updates[0].startState:this.view.state),c=Math.min(a,s.done.from+(s.active.explicit?0:1)),h=new Sh(s.active.source,s.active.explicit,c,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let f of s.updates)h=h.update(f,n);if(h.hasResult()){e.push(h);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new Yi(s.active.source,0);for(let c of s.updates)a=a.update(c,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:yT.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Gr,!1);if(e&&e.tooltip&&this.view.state.facet(jn).closeOnBlur){let n=e.open&&lF(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:um.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Dv.of(!1)}),20),this.composing=0}}}),Fde=typeof navigator=="object"&&/Win/.test(navigator.platform),zde=Bc.highest(_e.domEventHandlers({keydown(t,e){let n=e.state.field(Gr,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(Fde&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&bT(e,r),!1}})),Hde=_e.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),hm={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},uc=Qe.define({map(t,e){let n=e.mapPos(t,-1,Mr.TrackAfter);return n??void 0}}),vT=new class extends Cc{};vT.startSide=1;vT.endSide=-1;const Az=Zn.define({create(){return ft.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(uc)&&(t=t.update({add:[vT.range(n.value,n.value+1)]}));return t}});function Ude(){return[Wde,Az]}const zS="()[]{}<>";function kz(t){for(let e=0;e<zS.length;e+=2)if(zS.charCodeAt(e)==t)return zS.charAt(e+1);return FE(t<128?t:t+1)}function Ez(t,e){return t.languageDataAt("closeBrackets",e)[0]||hm}const qde=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Wde=_e.inputHandler.of((t,e,n,r)=>{if((qde?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Zs(qr(r,0))==1||e!=i.from||n!=i.to)return!1;let s=Yde(t.state,r);return s?(t.dispatch(s),!0):!1}),Gde=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Ez(t,t.selection.main.head).brackets||hm.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=Xde(t.doc,o.head);for(let c of r)if(c==a&&n1(t.doc,o.head)==kz(qr(c,0)))return{changes:{from:o.head-c.length,to:o.head+c.length},range:fe.cursor(o.head-c.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Kde=[{key:"Backspace",run:Gde}];function Yde(t,e){let n=Ez(t,t.selection.main.head),r=n.brackets||hm.brackets;for(let i of r){let s=kz(qr(i,0));if(e==i)return s==i?Zde(t,i,r.indexOf(i+i+i)>-1,n):Jde(t,i,s,n.before||hm.before);if(e==s&&Tz(t,t.selection.main.from))return Qde(t,i,s)}return null}function Tz(t,e){let n=!1;return t.field(Az).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function n1(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Zs(qr(n,0)))}function Xde(t,e){let n=t.sliceString(e-2,e);return Zs(qr(n,0))==n.length?n:n.slice(1)}function Jde(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:uc.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let a=n1(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:uc.of(o.head+e.length),range:fe.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Qde(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&n1(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:fe.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Zde(t,e,n,r){let i=r.stringPrefixes||hm.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:uc.of(a.to+e.length),range:fe.range(a.anchor+e.length,a.head+e.length)};let c=a.head,h=n1(t.doc,c),f;if(h==e){if(y3(t,c))return{changes:{insert:e+e,from:c},effects:uc.of(c+e.length),range:fe.cursor(c+e.length)};if(Tz(t,c)){let m=n&&t.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:fe.cursor(c+m.length)}}}else{if(n&&t.sliceDoc(c-2*e.length,c)==e+e&&(f=b3(t,c-2*e.length,i))>-1&&y3(t,f))return{changes:{insert:e+e+e+e,from:c},effects:uc.of(c+e.length),range:fe.cursor(c+e.length)};if(t.charCategorizer(c)(h)!=zt.Word&&b3(t,c,i)>-1&&!epe(t,c,e,i))return{changes:{insert:e+e,from:c},effects:uc.of(c+e.length),range:fe.cursor(c+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function y3(t,e){let n=br(t).resolveInner(e+1);return n.parent&&n.from==e}function epe(t,e,n,r){let i=br(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),c=a.indexOf(n);if(!c||c>-1&&r.indexOf(a.slice(0,c))>-1){let f=i.firstChild;for(;f&&f.from==i.from&&f.to-f.from>n.length+c;){if(t.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let h=i.to==e&&i.parent;if(!h)break;i=h}return!1}function b3(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=zt.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=zt.Word)return s}return-1}function tpe(t={}){return[zde,Gr,jn.of(t),Vde,npe,Hde]}const Rz=[{key:"Ctrl-Space",run:FS},{mac:"Alt-`",run:FS},{mac:"Alt-i",run:FS},{key:"Escape",run:Nde},{key:"ArrowDown",run:Ly(!0)},{key:"ArrowUp",run:Ly(!1)},{key:"PageDown",run:Ly(!0,"page")},{key:"PageUp",run:Ly(!1,"page")},{key:"Enter",run:Ide}],npe=Bc.highest(eT.computeN([jn],t=>t.facet(jn).defaultKeymap?[Rz]:[]));class v3{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class sc{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(fm).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((f,d)=>f.from-d.from||f.to-d.to),o=new Xo,a=[],c=0;for(let f=0;;){let d=f==s.length?null:s[f];if(!d&&!a.length)break;let m,y;for(a.length?(m=c,y=a.reduce((w,S)=>Math.min(w,S.to),d&&d.from>m?d.from:1e8)):(m=d.from,y=d.to,a.push(d),f++);f<s.length;){let w=s[f];if(w.from==m&&(w.to>w.from||w.to==m))a.push(w),f++,y=Math.min(w.to,y);else{y=Math.min(w.from,y);break}}let b=mpe(a);if(a.some(w=>w.from==w.to||w.from==w.to-1&&r.doc.lineAt(w.from).to==w.from))o.add(m,m,Ue.widget({widget:new hpe(b),diagnostics:a.slice()}));else{let w=a.reduce((S,_)=>_.markClass?S+" "+_.markClass:S,"");o.add(m,y,Ue.mark({class:"cm-lintRange cm-lintRange-"+b+w,diagnostics:a.slice(),inclusiveEnd:a.some(S=>S.to>y)}))}c=y;for(let w=0;w<a.length;w++)a[w].to<=c&&a.splice(w--,1)}let h=o.finish();return new sc(h,n,Bh(h))}}function Bh(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new v3(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new v3(r.from,s,r.diagnostic)}}),r}function rpe(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(fm).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(Mz))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function ipe(t,e){return t.field(Ci,!1)?e:e.concat(Qe.appendConfig.of(gpe))}const Mz=Qe.define(),xT=Qe.define(),Oz=Qe.define(),Ci=Zn.define({create(){return new sc(Ue.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=Bh(n,t.selected.diagnostic,s)||Bh(n,null,s)}!n.size&&i&&e.state.facet(fm).autoPanel&&(i=null),t=new sc(n,i,r)}for(let n of e.effects)if(n.is(Mz)){let r=e.state.facet(fm).autoPanel?n.value.length?dm.open:null:t.panel;t=sc.init(n.value,r,e.state)}else n.is(xT)?t=new sc(t.diagnostics,n.value?dm.open:null,t.selected):n.is(Oz)&&(t=new sc(t.diagnostics,t.panel,n.value));return t},provide:t=>[om.from(t,e=>e.panel),_e.decorations.from(t,e=>e.diagnostics)]}),spe=Ue.mark({class:"cm-lintRange cm-lintRange-active"});function ope(t,e,n){let{diagnostics:r}=t.state.field(Ci),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(c,h,{spec:f})=>{if(e>=c&&e<=h&&(c==h||(e>c||n>0)&&(e<h||n<0)))return i=f.diagnostics,s=c,o=h,!1});let a=t.state.facet(fm).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:ape(t,i)}}}:null}function ape(t,e){return At("ul",{class:"cm-tooltip-lint"},e.map(n=>Dz(t,n,!1)))}const lpe=t=>{let e=t.state.field(Ci,!1);(!e||!e.panel)&&t.dispatch({effects:ipe(t.state,[xT.of(!0)])});let n=sm(t,dm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},x3=t=>{let e=t.state.field(Ci,!1);return!e||!e.panel?!1:(t.dispatch({effects:xT.of(!1)}),!0)},cpe=t=>{let e=t.state.field(Ci,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},upe=[{key:"Mod-Shift-m",run:lpe,preventDefault:!0},{key:"F8",run:cpe}],fm=Ce.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},xo(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function Pz(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Dz(t,e,n){var r;let i=n?Pz(e.actions):[];return At("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},At("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,c=m=>{if(m.preventDefault(),a)return;a=!0;let y=Bh(t.state.field(Ci).diagnostics,e);y&&s.apply(t,y.from,y.to)},{name:h}=s,f=i[o]?h.indexOf(i[o]):-1,d=f<0?h:[h.slice(0,f),At("u",h.slice(f,f+1)),h.slice(f+1)];return At("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${h}${f<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&At("div",{class:"cm-diagnosticSource"},e.source))}class hpe extends wl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return At("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class w3{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Dz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class dm{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)x3(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Pz(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let c=Bh(this.view.state.field(Ci).diagnostics,s);c&&s.actions[a].apply(e,c.from,c.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=At("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=At("div",{class:"cm-panel-lint"},this.list,At("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>x3(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ci).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Ci),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{for(let f of h.diagnostics){if(o.has(f))continue;o.add(f);let d=-1,m;for(let y=r;y<this.items.length;y++)if(this.items[y].diagnostic==f){d=y;break}d<0?(m=new w3(this.view,f),this.items.splice(r,0,m),i=!0):(m=this.items[d],d>r&&(this.items.splice(r,d-r),i=!0)),n&&m.diagnostic==n.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),s=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new w3(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Ci),r=Bh(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Oz.of(r)})}static open(e){return new dm(e)}}function fpe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Iy(t){return fpe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const dpe=_e.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Iy("#d11")},".cm-lintRange-warning":{backgroundImage:Iy("orange")},".cm-lintRange-info":{backgroundImage:Iy("#999")},".cm-lintRange-hint":{backgroundImage:Iy("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function ppe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function mpe(t){let e="hint",n=1;for(let r of t){let i=ppe(r.severity);i>n&&(n=i,e=r.severity)}return e}const gpe=[Ci,_e.decorations.compute([Ci],t=>{let{selected:e,panel:n}=t.field(Ci);return!e||!n||e.from==e.to?Ue.none:Ue.set([spe.range(e.from,e.to)])}),lue(ope,{hideOn:rpe}),dpe],ype=[vue(),Sue(),$ce(),Vhe(),fhe(),Tce(),Dce(),ht.allowMultipleSelections.of(!0),Que(),phe(yhe,{fallback:!0}),Che(),Ude(),tpe(),Jce(),eue(),qce(),Kfe(),eT.of([...Kde,...zfe,...dde,...Yhe,...lhe,...Rz,...upe])];var S3={};class Iv{constructor(e,n,r,i,s,o,a,c,h,f=0,d){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=c,this.curContext=h,this.lookAhead=f,this.parent=d}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new Iv(e,[],n,r,r,0,[],0,i?new _3(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let c=this.stack.length-(r-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,f=this.reducePos-h;f>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=f));let d=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-d;if(i<s.minRepeatTerm||e&131072){let y=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,h,y,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let y=this.stack[c-3];this.state=s.getGoto(y,i,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(i,h)}storeNode(e,n,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==r)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let c=o;c>0&&this.buffer[c-2]>r;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||n<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(n,r),n<=o.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new Iv(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new bpe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let o=n[s+1];i.some((a,c)=>c&1&&a==o)||i.push(n[s],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let c=o&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return a<<19|65536|c}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new _3(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class _3{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class bpe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class Nv{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new Nv(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Nv(this.stack,this.pos,this.index)}}function Ny(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let c=o-32;if(c>=46&&(c-=46,a=!0),s+=c,a)break;s*=46}n?n[i++]=s:n=new e(s)}return n}class Mb{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const C3=new Mb;class vpe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=C3,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=C3,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class _h{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;xpe(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}_h.prototype.contextual=_h.prototype.fallback=_h.prototype.extend=!1;_h.prototype.fallback=_h.prototype.extend=!1;function xpe(t,e,n,r,i,s){let o=0,a=1<<r,{dialect:c}=n.p.parser;e:for(;(a&t[o])!=0;){let h=t[o+1];for(let y=o+3;y<h;y+=2)if((t[y+1]&a)>0){let b=t[y];if(c.allows(b)&&(e.token.value==-1||e.token.value==b||wpe(b,e.token.value,i,s))){e.acceptToken(b);break}}let f=e.next,d=0,m=t[o+2];if(e.next<0&&m>d&&t[h+m*3-3]==65535){o=t[h+m*3-1];continue e}for(;d<m;){let y=d+m>>1,b=h+y+(y<<1),w=t[b],S=t[b+1]||65536;if(f<w)m=y;else if(f>=S)d=y+1;else{o=t[b+2],e.advance();continue e}}break}}function A3(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function wpe(t,e,n,r){let i=A3(n,r,e);return i<0||A3(n,r,t)<i}const di=typeof process<"u"&&S3&&/\bparse\b/.test(S3.LOG);let HS=null;function k3(t,e,n){let r=t.cursor(Bn.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class Spe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?k3(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?k3(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof dn){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let c=s.prop(it.lookAhead);if(!c||a+c<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class _pe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Mb)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<s.length;h++){if((1<<h&o)==0)continue;let f=s[h],d=this.tokens[h];if(!(r&&!f.fallback)&&((f.contextual||d.start!=e.pos||d.mask!=o||d.context!=a)&&(this.updateCachedToken(d,f,e),d.mask=o,d.context=a),d.lookAhead>d.end+25&&(c=Math.max(d.lookAhead,c)),d.value!=0)){let m=n;if(d.extended>-1&&(n=this.addActions(e,d.extended,d.end,n)),n=this.addActions(e,d.value,d.end,n),!f.extend&&(r=d,n>m))break}}for(;this.actions.length>n;)this.actions.pop();return c&&e.setLookAhead(c),!r&&e.pos==this.stream.end&&(r=new Mb,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Mb,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let c=0;c<2;c++)for(let h=o.stateSlot(s,c?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=Uo(a,h+2);else{i==0&&a[h+1]==2&&(i=this.putAction(Uo(a,h+2),n,r,i));break}a[h]==n&&(i=this.putAction(Uo(a,h+1),n,r,i))}return i}}class Cpe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new vpe(n,i),this.tokens=new _pe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[Iv.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new Spe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let c=this.tokens.getMainToken(a);s.push(c.value,c.end)}}break}}if(!r.length){let o=i&&kpe(i);if(o)return di&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw di&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return di&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,c)=>c.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let c=o+1;c<r.length;c++){let h=r[c];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)r.splice(c--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=di?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,f=h?e.curContext.hash:0;for(let d=this.fragments.nodeAt(i);d;){let m=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(e.state,d.type.id):-1;if(m>-1&&d.length&&(!h||(d.prop(it.contextHash)||0)==f))return e.useNode(d,m),di&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof dn)||d.children.length==0||d.positions[0]>0)break;let y=d.children[0];if(y instanceof dn&&d.positions[0]==0)d=y;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),di&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let f=c[h++],d=c[h++],m=c[h++],y=h==c.length||!r,b=y?e:e.split(),w=this.tokens.mainToken;if(b.apply(f,d,w?w.start:b.pos,m),di&&console.log(o+this.stackID(b)+` (via ${(f&65536)==0?"shift":`reduce of ${s.getName(f&65535)}`} for ${s.getName(d)} @ ${i}${b==e?"":", split"})`),y)return!0;b.pos>i?n.push(b):r.push(b)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return E3(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],c=n[o<<1],h=n[(o<<1)+1],f=di?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),di&&console.log(f+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let d=a.split(),m=f;for(let y=0;d.forceReduce()&&y<10&&(di&&console.log(m+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,r));y++)di&&(m=this.stackID(d)+" -> ");for(let y of a.recoverByInsert(c))di&&console.log(f+this.stackID(y)+" (via recover-insert)"),this.advanceFully(y,r);this.stream.end>a.pos?(h==a.pos&&(h++,c=0),a.recoverByDelete(c,h),di&&console.log(f+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),E3(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),dn.build({buffer:Nv.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(HS||(HS=new WeakMap)).get(e);return n||HS.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function E3(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class Ape{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class Bv extends gF{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,c,h){i[a].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=it[c]);for(let h=1;h<a.length;){let f=a[h++];if(f>=0)s(f,c,a[h++]);else{let d=a[h+-f];for(let m=-f;m>0;m--)s(a[h++],c,d);h++}}}this.nodeSet=new rT(n.map((a,c)=>Qr.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:i[c],top:r.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=fF;let o=Ny(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(T3),this.states=Ny(e.states,Uint32Array),this.data=Ny(e.stateData),this.goto=Ny(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new _h(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new Cpe(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let o=i[s++],a=o&1,c=i[s++];if(a&&r)return c;for(let h=s+(o>>1);s<h;s++)if(i[s]==e)return c;if(a)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Uo(r,s+2)];else{if(r[s+1]==2)return Uo(r,s+2);break}if(o==n||o==0)return Uo(r,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Uo(this.data,s+2);else break;i=n(Uo(this.data,s+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Uo(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((s,o)=>o&1&&s==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(Bv.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=T3(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let o=this.dialects[n[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new Ape(e,r,i)}static deserialize(e){return new Bv(e)}}function Uo(t,e){return t[e]|t[e+1]<<16}function kpe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function T3(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const Epe=yF({String:ve.string,Number:ve.number,"True False":ve.bool,PropertyName:ve.propertyName,Null:ve.null,", :":ve.separator,"[ ]":ve.squareBracket,"{ }":ve.brace}),Tpe=Bv.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Epe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Rpe=Sv.define({name:"json",parser:Tpe.configure({props:[wF.add({Object:GN({except:/^\s*\}/}),Array:GN({except:/^\s*\]/})}),_F.add({"Object Array":ehe})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Mpe(){return new zue(Rpe)}const Ope=({open:t,onClose:e})=>{const{t:n}=Ot(),{saveConfig:r,getConfig:i}=vo(),s=xe.useRef(null),o=xe.useRef(null),[a,c]=xe.useState(""),[h,f]=xe.useState(!0),d=m=>{try{return JSON.parse(m),f(!0),!0}catch{return f(!1),!1}};return xe.useEffect(()=>{if(!t)return;const m=()=>{if(s.current&&!o.current){const y=JSON.stringify(i(),null,2);c(y),d(y);const b=ht.create({doc:y,extensions:[ype,Mpe(),_e.updateListener.of(w=>{if(w.docChanged){const S=w.state.doc.toString();c(S),d(S)}}),_e.theme({"&":{height:"200px",maxHeight:"200px"},".cm-content":{padding:"10px"},".cm-focused":{outline:"none"},".cm-editor":{height:"200px",maxHeight:"200px"},".cm-scroller":{fontFamily:"monospace",height:"200px",maxHeight:"200px"},".cm-gutters":{height:"200px",maxHeight:"200px"}})]});o.current=new _e({state:b,parent:s.current})}else setTimeout(m,100)};return setTimeout(m,50),()=>{o.current&&(o.current.destroy(),o.current=null)}},[t,i]),C.jsx(Ic,{open:t,onOpenChange:()=>{},children:C.jsxs(Nc,{header:n("EditConfiguration"),onClose:e,className:"w-[564px] h-[400px]",children:[C.jsx("div",{className:"flex flex-col gap-[8px] h-[280px] pt-[8px] pb-[16px]",children:C.jsxs("div",{className:"flex flex-col gap-[8px] h-[256px] p-[12px] bg-[var(--servers-edit-config-json-background-color)] rounded-[12px]",children:[C.jsxs("div",{className:"flex flex-row justify-between",children:[C.jsx("p",{className:"font-bold text-[14px] leading-[20px] text-[var(--servers-edit-config-json-header-color)]",children:n("EnterYourJSONConfiguration")}),C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-edit-config-json-lang-color)]",children:"json"})]}),C.jsx("div",{ref:s,className:"border border-[var(--servers-edit-config-json-editor-border-color)] bg-[var(--servers-edit-config-json-editor-background-color)] rounded-[4px] overflow-hidden h-full max-h-full"})]})}),C.jsxs("div",{className:"flex flex-row items-center justify-end gap-[16px] h-[64px] border-t border-[var(--servers-edit-config-buttons-border-color)] mx-[-32px] px-[32px]",children:[C.jsx(mn,{onClick:e,variant:"default",children:n("Cancel")}),C.jsx(mn,{disabled:!h,onClick:()=>{r(JSON.parse(a)),e()},children:n("Save")})]})]})})},wT=({className:t,size:e=16})=>C.jsx("div",{className:Ve("inline-block animate-spin rounded-full border-2 border-solid border-[var(--loader-border-color)] border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",t),style:{width:`${e}px`,height:`${e}px`},role:"status","aria-label":"loading"}),Ppe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5%209.3018C6.08346%206.49281%208.80901%204.5%2012%204.5C16.1421%204.5%2019.5%207.85786%2019.5%2012C19.5%2016.1421%2016.1421%2019.5%2012%2019.5C8.80901%2019.5%206.08346%2017.5072%205%2014.6982M7.5%209.5H4.5V6.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Dpe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.5%2017.5H14.5M7.5%209.5H16.5M5.5%205.5H14.5M9.5%2013.5H18.5'%20stroke='%23383838'%20stroke-miterlimit='1.41421'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Lpe=({type:t,open:e,onClose:n})=>{const{t:r}=Ot(),[i,s]=xe.useState([]),{getCustomServersLogs:o}=vo();xe.useEffect(()=>{const c=async()=>{const f=o();s(f[t])};c();const h=setInterval(()=>{c()},500);return()=>clearInterval(h)},[o,t]);const a=async()=>{await navigator.clipboard.writeText(i.join(`
`)),n()};return C.jsx(Ic,{open:e,onOpenChange:()=>{},children:C.jsxs(Nc,{header:`${t} ${r("logs").toLowerCase()}`,onClose:n,className:"w-[720px] h-[520px]",children:[C.jsx("div",{className:"flex flex-col gap-[8px] h-[400px] py-[8px]",children:C.jsx("div",{className:"flex flex-col border h-[384px] border-[var(--servers-logs-dialog-border-color)] overflow-y-auto rounded-[8px]",children:i.map(c=>C.jsx("p",{className:"text-[var(--servers-logs-dialog-log-color)] font-normal text-[14px] leading-[20px]",children:c},c))})}),C.jsxs("div",{className:"flex flex-row items-center justify-end gap-[16px] h-[64px] border-t border-[var(--servers-edit-config-buttons-border-color)] mx-[-32px] px-[32px]",children:[C.jsx(mn,{onClick:a,variant:"default",children:r("CopyToClipboard")}),C.jsx(mn,{onClick:n,children:r("Close")})]})]})})},R3=({name:t,mcpItems:e,isLoading:n,isSystem:r,disableEnable:i})=>{const{t:s}=Ot(),[o,a]=xe.useState(!1),[c,h]=xe.useState(!1),[f,d]=xe.useState(!1),[m,y]=xe.useState(!1),b=xe.useRef(null),{changeToolStatus:w,deleteCustomServer:S}=vo(),_=()=>{e.filter(M=>!M.enabled).forEach(M=>{w(t,M.name,!0)})},A=()=>{e.filter(M=>M.enabled).forEach(M=>{w(t,M.name,!1)})},k=()=>d(!0);xe.useEffect(()=>{n&&a(!1)},[n]),xe.useEffect(()=>{const M=setInterval(()=>{y(Nn.getCustomServersStoped().includes(t))},1e3);return()=>clearInterval(M)},[t]);const P=m?!1:n;return C.jsxs("div",{className:"flex flex-col",children:[C.jsxs("div",{className:`h-[36px] px-[8px] rounded-[4px] flex items-center justify-between ${P?"":"cursor-pointer"} ${o?"bg-[var(--servers-available-tools-item-active-background-color)]":"bg-[var(--servers-available-tools-item-background-color)]"} ${!n&&!o?"hover:bg-[var(--servers-available-tools-item-hover-background-color)]":""}`,onClick:()=>{n||c||e.length===0||a(M=>!M)},children:[C.jsxs("div",{className:"flex items-center gap-[8px]",children:[C.jsx(Et,{iconName:BE,size:24,disableHover:!0,isStroke:!0,isTransform:o}),C.jsx("p",{children:t}),n?null:C.jsxs("p",{className:"font-normal text-[14px] text-[var(--servers-available-tools-sub-header-color)]",children:[C.jsx("span",{className:"text-[var(--servers-available-tools-current-tool-color)]",children:e.filter(M=>M.enabled).length}),"/",e.length," ",s("ToolsEnabled")]})]}),C.jsx("div",{ref:b,children:P?C.jsx(wT,{}):C.jsx(Lc,{onOpenChange:h,trigger:C.jsx(Et,{iconName:TE,size:20,isActive:c,insideElement:!0}),items:[...e.length===0?[]:[{text:s("EnableAllTools"),onClick:_},{text:s("DisableAllTools"),onClick:A},...r?[]:[{text:"",onClick:()=>{},isSeparator:!0}]],...r?[]:[{icon:C.jsx(Et,{iconName:Ppe,size:20,disableHover:!0,isStroke:!0}),text:s("Restart"),onClick:()=>{Nn.restartCustomServer(t)}},{icon:C.jsx(Et,{iconName:Dpe,size:20,disableHover:!0}),text:s("Logs"),onClick:k},{text:"",onClick:()=>{},isSeparator:!0},{icon:C.jsx(Et,{iconName:RE,size:20,disableHover:!0}),text:s("Delete"),onClick:()=>{S(t)}}]],side:"right",align:"start",sideOffset:0,containerRef:b.current})})]}),o?C.jsx("div",{className:"flex flex-col gap-[2px] mt-[4px]",children:e.map(M=>C.jsxs("div",{className:"h-[36px] rounded-[4px] cursor-pointer flex items-center justify-between ps-[40px] pe-[8px] hover:bg-[var(--servers-available-tools-item-hover-background-color)]",onClick:()=>{w(t,M.name,!M.enabled)},children:[C.jsx("p",{children:M.name}),C.jsx(x7,{checked:M.enabled??!1,disabled:i&&!M.enabled,onCheckedChange:()=>{}})]}))}):null,f?C.jsx(Lpe,{type:t,open:f,onClose:()=>d(!1)}):null]})},Ipe=()=>{const{t}=Ot(),[e,n]=xe.useState({}),{servers:r,tools:i,webSearchEnabled:s}=vo(),[o,a]=xe.useState(s?i.length-2:i.length);xe.useEffect(()=>{a(s?i.length-2:i.length)},[i.length,s]),xe.useEffect(()=>{n(Nn.getCustomServers());const h=setInterval(()=>{n(Nn.getCustomServers())},1e3);return()=>clearInterval(h)},[]);const c=s?i.length>=vb:i.length>=yh;return C.jsxs("div",{className:"w-[640px] h-[560px] border border-[var(--servers-available-tools-border-color)] rounded-[8px] flex flex-col",children:[C.jsxs("div",{className:"min-h-[44px] h-[44px] flex items-center justify-between px-[16px] border-b border-[var(--servers-available-tools-border-color)]",children:[C.jsx("p",{className:"font-bold text-[14px] leading-[20px] text-[var(--servers-available-tools-header-color)]",children:t("AvailableTools")}),C.jsxs("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-available-tools-sub-header-color)]",children:[C.jsx("span",{className:"text-[var(--servers-available-tools-current-tool-color)]",children:o}),"/",yh," ",t("Tools")]})]}),C.jsxs("div",{className:"flex flex-col gap-[8px] pt-[12px] pb-[16px] px-[8px] overflow-y-auto",children:[C.jsx(R3,{name:"desktop-editor",mcpItems:r["desktop-editor"]??[],isLoading:!1,isSystem:!0,disableEnable:c}),Object.keys(e).map(h=>C.jsx(R3,{name:h,mcpItems:r[h]??[],isLoading:!r[h]?.length,isSystem:!1,disableEnable:c},h))]})]})},Npe=()=>{const{t}=Ot(),[e,n]=xe.useState(!1);return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"flex flex-col gap-[16px] mt-[16px]",children:[C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-description-color)]",children:t("CustomServersDescription")}),C.jsx(mn,{className:"w-fit",onClick:()=>n(!0),children:t("EditConfiguration")}),C.jsx(Ipe,{})]}),C.jsx(Ope,{open:e,onClose:()=>n(!1)})]})},Bpe=()=>{const{t}=Ot(),[e,n]=xe.useState(""),[r,i]=xe.useState(""),[s,o]=xe.useState(!1);xe.useEffect(()=>{const h=Nn.getWebSearchData();h&&(n(h.provider),i(h.key),o(!0))},[]);const a=()=>{!e||!r||(Nn.setWebSearchData({provider:e,key:r}),o(!0))},c=()=>{n(""),i(""),o(!1),Nn.setWebSearchData(null)};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"flex flex-col gap-[16px] mt-[16px]",children:[C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-description-color)]",children:t("WebSearchDescription")}),C.jsxs("div",{className:"flex flex-col gap-[16px]",children:[C.jsx(no,{header:t("WebSearchEngine"),children:C.jsx(zx,{className:"w-[260px]",value:e||t("SelectEngine"),items:s?[]:[{text:"Exa",id:"exa",onClick:()=>n("exa")}]})}),C.jsx(no,{header:t("APIKey"),children:C.jsx(ao,{className:"w-[260px]",type:"password",value:r,disabled:s,onChange:h=>i(h.target.value)})})]}),C.jsxs("div",{className:"flex flex-row gap-[8px]",children:[C.jsx(mn,{className:"w-fit",onClick:a,disabled:!e||!r||s,children:t("Save")}),C.jsx(mn,{className:"w-fit",disabled:!s,onClick:c,variant:"default",children:t("ResetSettings")})]})]})})},jpe=()=>{const{t}=Ot(),[e,n]=xe.useState("providers"),{providers:r}=Es(),i=C.jsxs("div",{className:"flex flex-col gap-[16px] select-none",children:[null,["providers"].map(s=>{const o=s==="wallet";return C.jsxs("div",{className:"flex gap-[12px]",children:[null,C.jsxs("div",{className:"select-none flex flex-col gap-[12px]",children:[C.jsxs("div",{className:"flex flex-col gap-[4px]",children:[null,C.jsx("p",{className:"text-[14px] leading-[20px] text-[var(--settings-description-color)]",children:t(o?"ONLYOFFICEWalletDescription":"AIProvidersDescription")})]}),o?C.jsx(_ae,{isActive:e===s}):C.jsx(Sae,{isActive:e===s})]})]},s)})]});return C.jsx(C.Fragment,{children:C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"flex flex-col gap-[16px] box-border max-w-[640px] w-[640px] mx-[32px] mt-[32px]",children:[C.jsx("h1",{className:"select-none font-bold text-[20px] leading-[28px] text-[var(--settings-header-color)]",children:t("Settings")}),C.jsx(ese,{items:[{value:"ai-settings",label:t("Connection"),content:i},{value:"mcp-servers",label:t("MCPServers"),content:C.jsx(Npe,{}),disabled:!r.length},{value:"web-search",label:t("WebSearch"),content:C.jsx(Bpe,{}),disabled:!r.length}]})]})})})},Lz=E.createContext({});function $pe(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const ST=typeof window<"u",Vpe=ST?E.useLayoutEffect:E.useEffect,_T=E.createContext(null);function CT(t,e){t.indexOf(e)===-1&&t.push(e)}function AT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Zo=(t,e,n)=>n>e?e:n<t?t:n;let kT=()=>{};const ea={},Iz=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Nz(t){return typeof t=="object"&&t!==null}const Bz=t=>/^0[^.\s]+$/u.test(t);function ET(t){let e;return()=>(e===void 0&&(e=t()),e)}const Zi=t=>t,Fpe=(t,e)=>n=>e(t(n)),Gm=(...t)=>t.reduce(Fpe),pm=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class TT{constructor(){this.subscriptions=[]}add(e){return CT(this.subscriptions,e),()=>AT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const co=t=>t*1e3,uo=t=>t/1e3;function jz(t,e){return e?t*(1e3/e):0}const $z=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,zpe=1e-7,Hpe=12;function Upe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=$z(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>zpe&&++a<Hpe);return o}function Km(t,e,n,r){if(t===e&&n===r)return Zi;const i=s=>Upe(s,0,1,t,n);return s=>s===0||s===1?s:$z(i(s),e,r)}const Vz=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Fz=t=>e=>1-t(1-e),zz=Km(.33,1.53,.69,.99),RT=Fz(zz),Hz=Vz(RT),Uz=t=>(t*=2)<1?.5*RT(t):.5*(2-Math.pow(2,-10*(t-1))),MT=t=>1-Math.sin(Math.acos(t)),qz=Fz(MT),Wz=Vz(MT),qpe=Km(.42,0,1,1),Wpe=Km(0,0,.58,1),Gz=Km(.42,0,.58,1),Gpe=t=>Array.isArray(t)&&typeof t[0]!="number",Kz=t=>Array.isArray(t)&&typeof t[0]=="number",Kpe={linear:Zi,easeIn:qpe,easeInOut:Gz,easeOut:Wpe,circIn:MT,circInOut:Wz,circOut:qz,backIn:RT,backInOut:Hz,backOut:zz,anticipate:Uz},Ype=t=>typeof t=="string",M3=t=>{if(Kz(t)){kT(t.length===4);const[e,n,r,i]=t;return Km(e,n,r,i)}else if(Ype(t))return Kpe[t];return t},By=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Xpe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(h.schedule(f),t()),f(a)}const h={schedule:(f,d=!1,m=!1)=>{const b=m&&i?n:r;return d&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,h.process(f))}};return h}const Jpe=40;function Yz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=By.reduce((k,P)=>(k[P]=Xpe(s),k),{}),{setup:a,read:c,resolveKeyframes:h,preUpdate:f,update:d,preRender:m,render:y,postRender:b}=o,w=()=>{const k=ea.useManualTiming?i.timestamp:performance.now();n=!1,ea.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,Jpe),1)),i.timestamp=k,i.isProcessing=!0,a.process(i),c.process(i),h.process(i),f.process(i),d.process(i),m.process(i),y.process(i),b.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},S=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:By.reduce((k,P)=>{const M=o[P];return k[P]=(O,L=!1,N=!1)=>(n||S(),M.schedule(O,L,N)),k},{}),cancel:k=>{for(let P=0;P<By.length;P++)o[By[P]].cancel(k)},state:i,steps:o}}const{schedule:Ht,cancel:vl,state:Un,steps:US}=Yz(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zi,!0);let Ob;function Qpe(){Ob=void 0}const Xr={now:()=>(Ob===void 0&&Xr.set(Un.isProcessing||ea.useManualTiming?Un.timestamp:performance.now()),Ob),set:t=>{Ob=t,queueMicrotask(Qpe)}},Xz=t=>e=>typeof e=="string"&&e.startsWith(t),OT=Xz("--"),Zpe=Xz("var(--"),PT=t=>Zpe(t)?eme.test(t.split("/*")[0].trim()):!1,eme=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ef={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mm={...ef,transform:t=>Zo(0,1,t)},jy={...ef,default:1},Mp=t=>Math.round(t*1e5)/1e5,DT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tme(t){return t==null}const nme=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,LT=(t,e)=>n=>!!(typeof n=="string"&&nme.test(n)&&n.startsWith(t)||e&&!tme(n)&&Object.prototype.hasOwnProperty.call(n,e)),Jz=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(DT);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},rme=t=>Zo(0,255,t),qS={...ef,transform:t=>Math.round(rme(t))},hc={test:LT("rgb","red"),parse:Jz("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+qS.transform(t)+", "+qS.transform(e)+", "+qS.transform(n)+", "+Mp(mm.transform(r))+")"};function ime(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kA={test:LT("#"),parse:ime,transform:hc.transform},Ym=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ya=Ym("deg"),ho=Ym("%"),We=Ym("px"),sme=Ym("vh"),ome=Ym("vw"),O3={...ho,parse:t=>ho.parse(t)/100,transform:t=>ho.transform(t*100)},sh={test:LT("hsl","hue"),parse:Jz("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ho.transform(Mp(e))+", "+ho.transform(Mp(n))+", "+Mp(mm.transform(r))+")"},hn={test:t=>hc.test(t)||kA.test(t)||sh.test(t),parse:t=>hc.test(t)?hc.parse(t):sh.test(t)?sh.parse(t):kA.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?hc.transform(t):sh.transform(t),getAnimatableNone:t=>{const e=hn.parse(t);return e.alpha=0,hn.transform(e)}},ame=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lme(t){return isNaN(t)&&typeof t=="string"&&(t.match(DT)?.length||0)+(t.match(ame)?.length||0)>0}const Qz="number",Zz="color",cme="var",ume="var(",P3="${}",hme=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gm(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(hme,c=>(hn.test(c)?(r.color.push(s),i.push(Zz),n.push(hn.parse(c))):c.startsWith(ume)?(r.var.push(s),i.push(cme),n.push(c)):(r.number.push(s),i.push(Qz),n.push(parseFloat(c))),++s,P3)).split(P3);return{values:n,split:a,indexes:r,types:i}}function eH(t){return gm(t).values}function tH(t){const{split:e,types:n}=gm(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Qz?s+=Mp(i[o]):a===Zz?s+=hn.transform(i[o]):s+=i[o]}return s}}const fme=t=>typeof t=="number"?0:hn.test(t)?hn.getAnimatableNone(t):t;function dme(t){const e=eH(t);return tH(t)(e.map(fme))}const xl={test:lme,parse:eH,createTransformer:tH,getAnimatableNone:dme};function WS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function pme({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=WS(c,a,t+1/3),s=WS(c,a,t),o=WS(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function jv(t,e){return n=>n>0?e:t}const Gt=(t,e,n)=>t+(e-t)*n,GS=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},mme=[kA,hc,sh],gme=t=>mme.find(e=>e.test(t));function D3(t){const e=gme(t);if(!e)return!1;let n=e.parse(t);return e===sh&&(n=pme(n)),n}const L3=(t,e)=>{const n=D3(t),r=D3(e);if(!n||!r)return jv(t,e);const i={...n};return s=>(i.red=GS(n.red,r.red,s),i.green=GS(n.green,r.green,s),i.blue=GS(n.blue,r.blue,s),i.alpha=Gt(n.alpha,r.alpha,s),hc.transform(i))},EA=new Set(["none","hidden"]);function yme(t,e){return EA.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function bme(t,e){return n=>Gt(t,e,n)}function IT(t){return typeof t=="number"?bme:typeof t=="string"?PT(t)?jv:hn.test(t)?L3:wme:Array.isArray(t)?nH:typeof t=="object"?hn.test(t)?L3:vme:jv}function nH(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>IT(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function vme(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=IT(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function xme(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const wme=(t,e)=>{const n=xl.createTransformer(e),r=gm(t),i=gm(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?EA.has(t)&&!i.values.length||EA.has(e)&&!r.values.length?yme(t,e):Gm(nH(xme(r,i),i.values),n):jv(t,e)};function rH(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Gt(t,e,n):IT(t)(t,e)}const Sme=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ht.update(e,n),stop:()=>vl(e),now:()=>Un.isProcessing?Un.timestamp:Xr.now()}},iH=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},$v=2e4;function NT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<$v;)e+=n,r=t.next(e);return e>=$v?1/0:e}function _me(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(NT(r),$v);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:uo(i)}}const Cme=5;function sH(t,e,n){const r=Math.max(e-Cme,0);return jz(n-t(r),e-r)}const Qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},KS=.001;function Ame({duration:t=Qt.duration,bounce:e=Qt.bounce,velocity:n=Qt.velocity,mass:r=Qt.mass}){let i,s,o=1-e;o=Zo(Qt.minDamping,Qt.maxDamping,o),t=Zo(Qt.minDuration,Qt.maxDuration,uo(t)),o<1?(i=h=>{const f=h*o,d=f*t,m=f-n,y=TA(h,o),b=Math.exp(-d);return KS-m/y*b},s=h=>{const d=h*o*t,m=d*n+n,y=Math.pow(o,2)*Math.pow(h,2)*t,b=Math.exp(-d),w=TA(Math.pow(h,2),o);return(-i(h)+KS>0?-1:1)*((m-y)*b)/w}):(i=h=>{const f=Math.exp(-h*t),d=(h-n)*t+1;return-KS+f*d},s=h=>{const f=Math.exp(-h*t),d=(n-h)*(t*t);return f*d});const a=5/t,c=Eme(i,s,a);if(t=co(t),isNaN(c))return{stiffness:Qt.stiffness,damping:Qt.damping,duration:t};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:t}}}const kme=12;function Eme(t,e,n){let r=n;for(let i=1;i<kme;i++)r=r-t(r)/e(r);return r}function TA(t,e){return t*Math.sqrt(1-e*e)}const Tme=["duration","bounce"],Rme=["stiffness","damping","mass"];function I3(t,e){return e.some(n=>t[n]!==void 0)}function Mme(t){let e={velocity:Qt.velocity,stiffness:Qt.stiffness,damping:Qt.damping,mass:Qt.mass,isResolvedFromDuration:!1,...t};if(!I3(t,Rme)&&I3(t,Tme))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Zo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Qt.mass,stiffness:i,damping:s}}else{const n=Ame(t);e={...e,...n,mass:Qt.mass},e.isResolvedFromDuration=!0}return e}function Vv(t=Qt.visualDuration,e=Qt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:h,mass:f,duration:d,velocity:m,isResolvedFromDuration:y}=Mme({...n,velocity:-uo(n.velocity||0)}),b=m||0,w=h/(2*Math.sqrt(c*f)),S=o-s,_=uo(Math.sqrt(c/f)),A=Math.abs(S)<5;r||(r=A?Qt.restSpeed.granular:Qt.restSpeed.default),i||(i=A?Qt.restDelta.granular:Qt.restDelta.default);let k;if(w<1){const M=TA(_,w);k=O=>{const L=Math.exp(-w*_*O);return o-L*((b+w*_*S)/M*Math.sin(M*O)+S*Math.cos(M*O))}}else if(w===1)k=M=>o-Math.exp(-_*M)*(S+(b+_*S)*M);else{const M=_*Math.sqrt(w*w-1);k=O=>{const L=Math.exp(-w*_*O),N=Math.min(M*O,300);return o-L*((b+w*_*S)*Math.sinh(N)+M*S*Math.cosh(N))/M}}const P={calculatedDuration:y&&d||null,next:M=>{const O=k(M);if(y)a.done=M>=d;else{let L=M===0?b:0;w<1&&(L=M===0?co(b):sH(k,M,O));const N=Math.abs(L)<=r,z=Math.abs(o-O)<=i;a.done=N&&z}return a.value=a.done?o:O,a},toString:()=>{const M=Math.min(NT(P),$v),O=iH(L=>P.next(M*L).value,M,30);return M+"ms "+O},toTransition:()=>{}};return P}Vv.applyToOptions=t=>{const e=_me(t,100,Vv);return t.ease=e.ease,t.duration=co(e.duration),t.type="keyframes",t};function RA({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:h=.5,restSpeed:f}){const d=t[0],m={done:!1,value:d},y=N=>a!==void 0&&N<a||c!==void 0&&N>c,b=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let w=n*e;const S=d+w,_=o===void 0?S:o(S);_!==S&&(w=_-d);const A=N=>-w*Math.exp(-N/r),k=N=>_+A(N),P=N=>{const z=A(N),j=k(N);m.done=Math.abs(z)<=h,m.value=m.done?_:j};let M,O;const L=N=>{y(m.value)&&(M=N,O=Vv({keyframes:[m.value,b(m.value)],velocity:sH(k,N,m.value),damping:i,stiffness:s,restDelta:h,restSpeed:f}))};return L(0),{calculatedDuration:null,next:N=>{let z=!1;return!O&&M===void 0&&(z=!0,P(N),L(N)),M!==void 0&&N>=M?O.next(N-M):(!z&&P(N),m)}}}function Ome(t,e,n){const r=[],i=n||ea.mix||rH,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Zi:e;a=Gm(c,a)}r.push(a)}return r}function Pme(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(kT(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Ome(e,r,i),c=a.length,h=f=>{if(o&&f<t[0])return e[0];let d=0;if(c>1)for(;d<t.length-2&&!(f<t[d+1]);d++);const m=pm(t[d],t[d+1],f);return a[d](m)};return n?f=>h(Zo(t[0],t[s-1],f)):h}function Dme(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=pm(0,e,r);t.push(Gt(n,1,i))}}function Lme(t){const e=[0];return Dme(e,t.length-1),e}function Ime(t,e){return t.map(n=>n*e)}function Nme(t,e){return t.map(()=>e||Gz).splice(0,t.length-1)}function Op({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Gpe(r)?r.map(M3):M3(r),s={done:!1,value:e[0]},o=Ime(n&&n.length===e.length?n:Lme(e),t),a=Pme(o,e,{ease:Array.isArray(i)?i:Nme(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}const Bme=t=>t!==null;function BT(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Bme),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const jme={decay:RA,inertia:RA,tween:Op,keyframes:Op,spring:Vv};function oH(t){typeof t.type=="string"&&(t.type=jme[t.type])}class jT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const $me=t=>t/100;class $T extends jT{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Xr.now()&&this.tick(Xr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;oH(e);const{type:n=Op,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const c=n||Op;c!==Op&&typeof a[0]!="number"&&(this.mixKeyframes=Gm($me,rH(a[0],a[1])),a=[0,100]);const h=c({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=NT(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:f,repeat:d,repeatType:m,repeatDelay:y,type:b,onUpdate:w,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-h*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,P=r;if(d){const N=Math.min(this.currentTime,i)/a;let z=Math.floor(N),j=N%1;!j&&N>=1&&(j=1),j===1&&z--,z=Math.min(z,d+1),!!(z%2)&&(m==="reverse"?(j=1-j,y&&(j-=y/a)):m==="mirror"&&(P=o)),k=Zo(0,1,j)*a}const M=A?{done:!1,value:f[0]}:P.next(k);s&&(M.value=s(M.value));let{done:O}=M;!A&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return L&&b!==RA&&(M.value=BT(f,this.options,S,this.speed)),w&&w(M.value),L&&this.finish(),M}then(e,n){return this.finished.then(e,n)}get duration(){return uo(this.calculatedDuration)}get time(){return uo(this.currentTime)}set time(e){e=co(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Xr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=uo(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Sme,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Vme(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const fc=t=>t*180/Math.PI,MA=t=>{const e=fc(Math.atan2(t[1],t[0]));return OA(e)},Fme={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:MA,rotateZ:MA,skewX:t=>fc(Math.atan(t[1])),skewY:t=>fc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},OA=t=>(t=t%360,t<0&&(t+=360),t),N3=MA,B3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),j3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),zme={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:B3,scaleY:j3,scale:t=>(B3(t)+j3(t))/2,rotateX:t=>OA(fc(Math.atan2(t[6],t[5]))),rotateY:t=>OA(fc(Math.atan2(-t[2],t[0]))),rotateZ:N3,rotate:N3,skewX:t=>fc(Math.atan(t[4])),skewY:t=>fc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function PA(t){return t.includes("scale")?1:0}function DA(t,e){if(!t||t==="none")return PA(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=zme,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Fme,i=a}if(!i)return PA(e);const s=r[e],o=i[1].split(",").map(Ume);return typeof s=="function"?s(o):o[s]}const Hme=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return DA(n,e)};function Ume(t){return parseFloat(t.trim())}const tf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nf=new Set(tf),$3=t=>t===ef||t===We,qme=new Set(["x","y","z"]),Wme=tf.filter(t=>!qme.has(t));function Gme(t){const e=[];return Wme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>DA(e,"x"),y:(t,{transform:e})=>DA(e,"y")};yc.translateX=yc.x;yc.translateY=yc.y;const bc=new Set;let LA=!1,IA=!1,NA=!1;function aH(){if(IA){const t=Array.from(bc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Gme(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}IA=!1,LA=!1,bc.forEach(t=>t.complete(NA)),bc.clear()}function lH(){bc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(IA=!0)})}function Kme(){NA=!0,lH(),aH(),NA=!1}class VT{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(bc.add(this),LA||(LA=!0,Ht.read(lH),Ht.resolveKeyframes(aH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Vme(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bc.delete(this)}cancel(){this.state==="scheduled"&&(bc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Yme=t=>t.startsWith("--");function Xme(t,e,n){Yme(e)?t.style.setProperty(e,n):t.style[e]=n}const Jme=ET(()=>window.ScrollTimeline!==void 0),Qme={};function Zme(t,e){const n=ET(t);return()=>Qme[e]??n()}const cH=Zme(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),dp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,V3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dp([0,.65,.55,1]),circOut:dp([.55,0,1,.45]),backIn:dp([.31,.01,.66,-.59]),backOut:dp([.33,1.53,.69,.99])};function uH(t,e){if(t)return typeof t=="function"?cH()?iH(t,e):"ease-out":Kz(t)?dp(t):Array.isArray(t)?t.map(n=>uH(n,e)||V3.easeOut):V3[t]}function ege(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:c}={},h=void 0){const f={[e]:n};c&&(f.offset=c);const d=uH(a,i);Array.isArray(d)&&(f.easing=d);const m={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),t.animate(f,m)}function hH(t){return typeof t=="function"&&"applyToOptions"in t}function tge({type:t,...e}){return hH(t)&&cH()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class nge extends jT{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,kT(typeof e.type!="string");const h=tge(e);this.animation=ege(n,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=BT(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(f):Xme(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return uo(Number(e))}get time(){return uo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=co(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Jme()?(this.animation.timeline=e,Zi):n(this)}}const fH={anticipate:Uz,backInOut:Hz,circInOut:Wz};function rge(t){return t in fH}function ige(t){typeof t.ease=="string"&&rge(t.ease)&&(t.ease=fH[t.ease])}const F3=10;class sge extends nge{constructor(e){ige(e),oH(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new $T({...o,autoplay:!1}),c=co(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-F3).value,a.sample(c).value,F3),a.stop()}}const z3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xl.test(t)||t==="0")&&!t.startsWith("url("));function oge(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function age(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=z3(i,e),a=z3(s,e);return!o||!a?!1:oge(t)||(n==="spring"||hH(n))&&r}function BA(t){t.duration=0,t.type}const lge=new Set(["opacity","clipPath","filter","transform"]),cge=ET(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function uge(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=e.owner.getProps();return cge()&&n&&lge.has(n)&&(n!=="transform"||!h)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const hge=40;class fge extends jT{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:c,motionValue:h,element:f,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Xr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:h,element:f,...d},y=f?.KeyframeResolver||VT;this.keyframeResolver=new y(a,(b,w,S)=>this.onKeyframesResolved(b,w,m,!S),c,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:c,isHandoff:h,onUpdate:f}=r;this.resolvedAt=Xr.now(),age(e,s,o,a)||((ea.instantAnimations||!c)&&f?.(BT(e,r,n)),e[0]=e[e.length-1],BA(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>hge?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!h&&uge(m)?new sge({...m,element:m.motionValue.owner.current}):new $T(m);y.finished.then(()=>this.notifyFinished()).catch(Zi),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Kme()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const dge=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pge(t){const e=dge.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function dH(t,e,n=1){const[r,i]=pge(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Iz(o)?parseFloat(o):o}return PT(i)?dH(i,e,n+1):i}function FT(t,e){return t?.[e]??t?.default??t}const pH=new Set(["width","height","top","left","right","bottom",...tf]),mge={test:t=>t==="auto",parse:t=>t},mH=t=>e=>e.test(t),gH=[ef,We,ho,Ya,ome,sme,mge],H3=t=>gH.find(mH(t));function gge(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Bz(t):!0}const yge=new Set(["brightness","contrast","saturate","opacity"]);function bge(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(DT)||[];if(!r)return t;const i=n.replace(r,"");let s=yge.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const vge=/\b([a-z-]*)\(.*?\)/gu,jA={...xl,getAnimatableNone:t=>{const e=t.match(vge);return e?e.map(bge).join(" "):t}},U3={...ef,transform:Math.round},xge={rotate:Ya,rotateX:Ya,rotateY:Ya,rotateZ:Ya,scale:jy,scaleX:jy,scaleY:jy,scaleZ:jy,skew:Ya,skewX:Ya,skewY:Ya,distance:We,translateX:We,translateY:We,translateZ:We,x:We,y:We,z:We,perspective:We,transformPerspective:We,opacity:mm,originX:O3,originY:O3,originZ:We},zT={borderWidth:We,borderTopWidth:We,borderRightWidth:We,borderBottomWidth:We,borderLeftWidth:We,borderRadius:We,radius:We,borderTopLeftRadius:We,borderTopRightRadius:We,borderBottomRightRadius:We,borderBottomLeftRadius:We,width:We,maxWidth:We,height:We,maxHeight:We,top:We,right:We,bottom:We,left:We,padding:We,paddingTop:We,paddingRight:We,paddingBottom:We,paddingLeft:We,margin:We,marginTop:We,marginRight:We,marginBottom:We,marginLeft:We,backgroundPositionX:We,backgroundPositionY:We,...xge,zIndex:U3,fillOpacity:mm,strokeOpacity:mm,numOctaves:U3},wge={...zT,color:hn,backgroundColor:hn,outlineColor:hn,fill:hn,stroke:hn,borderColor:hn,borderTopColor:hn,borderRightColor:hn,borderBottomColor:hn,borderLeftColor:hn,filter:jA,WebkitFilter:jA},yH=t=>wge[t];function bH(t,e){let n=yH(t);return n!==jA&&(n=xl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Sge=new Set(["auto","none","0"]);function _ge(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Sge.has(s)&&gm(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=bH(n,i)}class Cge extends VT{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),PT(h))){const f=dH(h,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!pH.has(r)||e.length!==2)return;const[i,s]=e,o=H3(i),a=H3(s);if(o!==a)if($3(o)&&$3(a))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else yc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||gge(e[i]))&&r.push(i);r.length&&_ge(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=yc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,c])=>{e.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function Age(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const vH=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function kge(t){return Nz(t)&&"offsetHeight"in t}const q3=30,Ege=t=>!isNaN(parseFloat(t));class Tge{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Xr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ege(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new TT);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>q3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,q3);return jz(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jh(t,e){return new Tge(t,e)}const{schedule:HT}=Yz(queueMicrotask,!1),hs={x:!1,y:!1};function xH(){return hs.x||hs.y}function Rge(t){return t==="x"||t==="y"?hs[t]?null:(hs[t]=!0,()=>{hs[t]=!1}):hs.x||hs.y?null:(hs.x=hs.y=!0,()=>{hs.x=hs.y=!1})}function wH(t,e){const n=Age(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function W3(t){return!(t.pointerType==="touch"||xH())}function Mge(t,e,n={}){const[r,i,s]=wH(t,n),o=a=>{if(!W3(a))return;const{target:c}=a,h=e(c,a);if(typeof h!="function"||!c)return;const f=d=>{W3(d)&&(h(d),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const SH=(t,e)=>e?t===e?!0:SH(t,e.parentElement):!1,UT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Oge=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Pge(t){return Oge.has(t.tagName)||t.tabIndex!==-1}const Pb=new WeakSet;function G3(t){return e=>{e.key==="Enter"&&t(e)}}function YS(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Dge=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=G3(()=>{if(Pb.has(n))return;YS(n,"down");const i=G3(()=>{YS(n,"up")}),s=()=>YS(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function K3(t){return UT(t)&&!xH()}function Lge(t,e,n={}){const[r,i,s]=wH(t,n),o=a=>{const c=a.currentTarget;if(!K3(a))return;Pb.add(c);const h=e(c,a),f=(y,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",m),Pb.has(c)&&Pb.delete(c),K3(y)&&typeof h=="function"&&h(y,{success:b})},d=y=>{f(y,c===window||c===document||n.useGlobalTarget||SH(c,y.target))},m=y=>{f(y,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),kge(a)&&(a.addEventListener("focus",h=>Dge(h,i)),!Pge(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function _H(t){return Nz(t)&&"ownerSVGElement"in t}function Ige(t){return _H(t)&&t.tagName==="svg"}const mr=t=>!!(t&&t.getVelocity),Nge=[...gH,hn,xl],Bge=t=>Nge.find(mH(t)),CH=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function jge(t=!0){const e=E.useContext(_T);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=E.useId();E.useEffect(()=>{if(t)return i(s)},[t]);const o=E.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const AH=E.createContext({strict:!1}),Y3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$h={};for(const t in Y3)$h[t]={isEnabled:e=>Y3[t].some(n=>!!e[n])};function $ge(t){for(const e in t)$h[e]={...$h[e],...t[e]}}const Vge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Vge.has(t)}let kH=t=>!Fv(t);function Fge(t){typeof t=="function"&&(kH=e=>e.startsWith("on")?!Fv(e):t(e))}try{Fge(require("@emotion/is-prop-valid").default)}catch{}function zge(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(kH(i)||n===!0&&Fv(i)||!e&&!Fv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const r1=E.createContext({});function i1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ym(t){return typeof t=="string"||Array.isArray(t)}const qT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],WT=["initial",...qT];function s1(t){return i1(t.animate)||WT.some(e=>ym(t[e]))}function EH(t){return!!(s1(t)||t.variants)}function Hge(t,e){if(s1(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ym(n)?n:void 0,animate:ym(r)?r:void 0}}return t.inherit!==!1?e:{}}function Uge(t){const{initial:e,animate:n}=Hge(t,E.useContext(r1));return E.useMemo(()=>({initial:e,animate:n}),[X3(e),X3(n)])}function X3(t){return Array.isArray(t)?t.join(" "):t}const bm={};function qge(t){for(const e in t)bm[e]=t[e],OT(e)&&(bm[e].isCSSVariable=!0)}function TH(t,{layout:e,layoutId:n}){return nf.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bm[t]||t==="opacity")}const Wge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gge=tf.length;function Kge(t,e,n){let r="",i=!0;for(let s=0;s<Gge;s++){const o=tf[s],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const h=vH(a,zT[o]);if(!c){i=!1;const f=Wge[o]||o;r+=`${f}(${h}) `}n&&(e[o]=h)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function GT(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const c in e){const h=e[c];if(nf.has(c)){o=!0;continue}else if(OT(c)){i[c]=h;continue}else{const f=vH(h,zT[c]);c.startsWith("origin")?(a=!0,s[c]=f):r[c]=f}}if(e.transform||(o||n?r.transform=Kge(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:h="50%",originZ:f=0}=s;r.transformOrigin=`${c} ${h} ${f}`}}const KT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RH(t,e,n){for(const r in e)!mr(e[r])&&!TH(r,n)&&(t[r]=e[r])}function Yge({transformTemplate:t},e){return E.useMemo(()=>{const n=KT();return GT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Xge(t,e){const n=t.style||{},r={};return RH(r,n,t),Object.assign(r,Yge(t,e)),r}function Jge(t,e){const n={},r=Xge(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Qge={offset:"stroke-dashoffset",array:"stroke-dasharray"},Zge={offset:"strokeDashoffset",array:"strokeDasharray"};function e0e(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Qge:Zge;t[s.offset]=We.transform(-r);const o=We.transform(e),a=We.transform(n);t[s.array]=`${o} ${a}`}function MH(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},c,h,f){if(GT(t,a,h),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:m}=t;d.transform&&(m.transform=d.transform,delete d.transform),(m.transform||d.transformOrigin)&&(m.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&e0e(d,i,s,o,!1)}const OH=()=>({...KT(),attrs:{}}),PH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function t0e(t,e,n,r){const i=E.useMemo(()=>{const s=OH();return MH(s,e,PH(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};RH(s,t.style,t),i.style={...s,...i.style}}return i}const n0e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YT(t){return typeof t!="string"||t.includes("-")?!1:!!(n0e.indexOf(t)>-1||/[A-Z]/u.test(t))}function r0e(t,e,n,{latestValues:r},i,s=!1){const a=(YT(t)?t0e:Jge)(e,r,i,t),c=zge(e,typeof t=="string",s),h=t!==E.Fragment?{...c,...a,ref:n}:{},{children:f}=e,d=E.useMemo(()=>mr(f)?f.get():f,[f]);return E.createElement(t,{...h,children:d})}function J3(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function XT(t,e,n,r){if(typeof e=="function"){const[i,s]=J3(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=J3(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Db(t){return mr(t)?t.get():t}function i0e({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:s0e(n,r,i,t),renderState:e()}}function s0e(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Db(s[m]);let{initial:o,animate:a}=t;const c=s1(t),h=EH(t);e&&h&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const d=f?a:o;if(d&&typeof d!="boolean"&&!i1(d)){const m=Array.isArray(d)?d:[d];for(let y=0;y<m.length;y++){const b=XT(t,m[y]);if(b){const{transitionEnd:w,transition:S,..._}=b;for(const A in _){let k=_[A];if(Array.isArray(k)){const P=f?k.length-1:0;k=k[P]}k!==null&&(i[A]=k)}for(const A in w)i[A]=w[A]}}}return i}const DH=t=>(e,n)=>{const r=E.useContext(r1),i=E.useContext(_T),s=()=>i0e(t,e,r,i);return n?s():$pe(s)};function JT(t,e,n){const{style:r}=t,i={};for(const s in r)(mr(r[s])||e.style&&mr(e.style[s])||TH(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const o0e=DH({scrapeMotionValuesFromProps:JT,createRenderState:KT});function LH(t,e,n){const r=JT(t,e,n);for(const i in t)if(mr(t[i])||mr(e[i])){const s=tf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const a0e=DH({scrapeMotionValuesFromProps:LH,createRenderState:OH}),l0e=Symbol.for("motionComponentSymbol");function oh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function c0e(t,e,n){return E.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):oh(n)&&(n.current=r))},[e,n])}const QT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),u0e="framerAppearId",IH="data-"+QT(u0e),NH=E.createContext({});function h0e(t,e,n,r,i){const{visualElement:s}=E.useContext(r1),o=E.useContext(AH),a=E.useContext(_T),c=E.useContext(CH).reducedMotion,h=E.useRef(null);r=r||o.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const f=h.current,d=E.useContext(NH);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&f0e(h.current,n,i,d);const m=E.useRef(!1);E.useInsertionEffect(()=>{f&&m.current&&f.update(n,a)});const y=n[IH],b=E.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return Vpe(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),b.current&&f.animationState&&f.animationState.animateChanges())}),E.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),b.current=!1),f.enteringChildren=void 0)}),f}function f0e(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:h,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:BH(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&oh(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:h})}function BH(t){if(t)return t.options.allowProjection!==!1?t.projection:BH(t.parent)}function XS(t,{forwardMotionProps:e=!1}={},n,r){n&&$ge(n);const i=YT(t)?a0e:o0e;function s(a,c){let h;const f={...E.useContext(CH),...a,layoutId:d0e(a)},{isStatic:d}=f,m=Uge(a),y=i(a,d);if(!d&&ST){p0e();const b=m0e(f);h=b.MeasureLayout,m.visualElement=h0e(t,y,f,r,b.ProjectionNode)}return C.jsxs(r1.Provider,{value:m,children:[h&&m.visualElement?C.jsx(h,{visualElement:m.visualElement,...f}):null,r0e(t,a,c0e(y,m.visualElement,c),y,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=E.forwardRef(s);return o[l0e]=t,o}function d0e({layoutId:t}){const e=E.useContext(Lz).id;return e&&t!==void 0?e+"-"+t:t}function p0e(t,e){E.useContext(AH).strict}function m0e(t){const{drag:e,layout:n}=$h;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function g0e(t,e){if(typeof Proxy>"u")return XS;const n=new Map,r=(s,o)=>XS(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,XS(o,void 0,t,e)),n.get(o))})}function jH({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function y0e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function b0e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function JS(t){return t===void 0||t===1}function $A({scale:t,scaleX:e,scaleY:n}){return!JS(t)||!JS(e)||!JS(n)}function ec(t){return $A(t)||$H(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $H(t){return Q3(t.x)||Q3(t.y)}function Q3(t){return t&&t!=="0%"}function zv(t,e,n){const r=t-n,i=e*r;return n+i}function Z3(t,e,n,r,i){return i!==void 0&&(t=zv(t,i,r)),zv(t,n,r)+e}function VA(t,e=0,n=1,r,i){t.min=Z3(t.min,e,n,r,i),t.max=Z3(t.max,e,n,r,i)}function VH(t,{x:e,y:n}){VA(t.x,e.translate,e.scale,e.originPoint),VA(t.y,n.translate,n.scale,n.originPoint)}const e4=.999999999999,t4=1.0000000000001;function v0e(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&lh(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VH(t,o)),r&&ec(s.latestValues)&&lh(t,s.latestValues))}e.x<t4&&e.x>e4&&(e.x=1),e.y<t4&&e.y>e4&&(e.y=1)}function ah(t,e){t.min=t.min+e,t.max=t.max+e}function n4(t,e,n,r,i=.5){const s=Gt(t.min,t.max,i);VA(t,e,n,s,r)}function lh(t,e){n4(t.x,e.x,e.scaleX,e.scale,e.originX),n4(t.y,e.y,e.scaleY,e.scale,e.originY)}function FH(t,e){return jH(b0e(t.getBoundingClientRect(),e))}function x0e(t,e,n){const r=FH(t,n),{scroll:i}=e;return i&&(ah(r.x,i.offset.x),ah(r.y,i.offset.y)),r}const r4=()=>({translate:0,scale:1,origin:0,originPoint:0}),ch=()=>({x:r4(),y:r4()}),i4=()=>({min:0,max:0}),nn=()=>({x:i4(),y:i4()}),FA={current:null},zH={current:!1};function w0e(){if(zH.current=!0,!!ST)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>FA.current=t.matches;t.addEventListener("change",e),e()}else FA.current=!1}const S0e=new WeakMap;function _0e(t,e,n){for(const r in e){const i=e[r],s=n[r];if(mr(i))t.addValue(r,i);else if(mr(s))t.addValue(r,jh(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,jh(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const s4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class C0e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=VT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Xr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ht.render(this.render,!1,!0))};const{latestValues:c,renderState:h}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=s1(n),this.isVariantNode=EH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in d){const y=d[m];c[m]!==void 0&&mr(y)&&y.set(c[m])}}mount(e){this.current=e,S0e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),zH.current||w0e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:FA.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vl(this.notifyUpdate),vl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=nf.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in $h){const n=$h[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<s4.length;r++){const i=s4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=_0e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=jh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Iz(r)||Bz(r))?r=parseFloat(r):!Bge(r)&&xl.test(n)&&(r=bH(e,n)),this.setBaseTarget(e,mr(r)?r.get():r)),mr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=XT(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!mr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new TT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){HT.render(this.render)}}class HH extends C0e{constructor(){super(...arguments),this.KeyframeResolver=Cge}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function UH(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function A0e(t){return window.getComputedStyle(t)}class k0e extends HH{constructor(){super(...arguments),this.type="html",this.renderInstance=UH}readValueFromInstance(e,n){if(nf.has(n))return this.projection?.isProjecting?PA(n):Hme(e,n);{const r=A0e(e),i=(OT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return FH(e,n)}build(e,n,r){GT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return JT(e,n,r)}}const qH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function E0e(t,e,n,r){UH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(qH.has(i)?i:QT(i),e.attrs[i])}class T0e extends HH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(nf.has(n)){const r=yH(n);return r&&r.default||0}return n=qH.has(n)?n:QT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return LH(e,n,r)}build(e,n,r){MH(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){E0e(e,n,r,i)}mount(e){this.isSVGTag=PH(e.tagName),super.mount(e)}}const R0e=(t,e)=>YT(t)?new T0e(e):new k0e(e,{allowProjection:t!==E.Fragment});function Ch(t,e,n){const r=t.getProps();return XT(r,e,n!==void 0?n:r.custom,t)}const zA=t=>Array.isArray(t);function M0e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,jh(n))}function O0e(t){return zA(t)?t[t.length-1]||0:t}function P0e(t,e){const n=Ch(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=O0e(s[o]);M0e(t,o,a)}}function D0e(t){return!!(mr(t)&&t.add)}function HA(t,e){const n=t.getValue("willChange");if(D0e(n))return n.add(e);if(!n&&ea.WillChange){const r=new ea.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function WH(t){return t.props[IH]}const L0e=t=>t!==null;function I0e(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(L0e),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const N0e={type:"spring",stiffness:500,damping:25,restSpeed:10},B0e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),j0e={type:"keyframes",duration:.8},$0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V0e=(t,{keyframes:e})=>e.length>2?j0e:nf.has(t)?t.startsWith("scale")?B0e(e[1]):N0e:$0e;function F0e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:h,...f}){return!!Object.keys(f).length}const ZT=(t,e,n,r={},i,s)=>o=>{const a=FT(r,t)||{},c=a.delay||r.delay||0;let{elapsed:h=0}=r;h=h-co(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-h,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};F0e(a)||Object.assign(f,V0e(t,f)),f.duration&&(f.duration=co(f.duration)),f.repeatDelay&&(f.repeatDelay=co(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(BA(f),f.delay===0&&(d=!0)),(ea.instantAnimations||ea.skipAnimations)&&(d=!0,BA(f),f.delay=0),f.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const m=I0e(f.keyframes,a);if(m!==void 0){Ht.update(()=>{f.onUpdate(m),f.onComplete()});return}}return a.isSync?new $T(f):new fge(f)};function z0e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function GH(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const d=t.getValue(f,t.latestValues[f]??null),m=a[f];if(m===void 0||h&&z0e(h,f))continue;const y={delay:n,...FT(s||{},f)},b=d.get();if(b!==void 0&&!d.isAnimating&&!Array.isArray(m)&&m===b&&!y.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const _=WH(t);if(_){const A=window.MotionHandoffAnimation(_,f,Ht);A!==null&&(y.startTime=A,w=!0)}}HA(t,f),d.start(ZT(f,d,m,t.shouldReduceMotion&&pH.has(f)?{type:!1}:y,t,w));const S=d.animation;S&&c.push(S)}return o&&Promise.all(c).then(()=>{Ht.update(()=>{o&&P0e(t,o)})}),c}function KH(t,e,n,r=0,i=1){const s=Array.from(t).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function UA(t,e,n={}){const r=Ch(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(GH(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:d}=i;return H0e(t,e,c,h,f,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function H0e(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(UA(c,e,{...o,delay:n+(typeof r=="function"?0:r)+KH(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function U0e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>UA(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=UA(t,e,n);else{const i=typeof e=="function"?Ch(t,e,n.custom):e;r=Promise.all(GH(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function YH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const q0e=WT.length;function XH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?XH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<q0e;n++){const r=WT[n],i=t.props[r];(ym(i)||i===!1)&&(e[r]=i)}return e}const W0e=[...qT].reverse(),G0e=qT.length;function K0e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>U0e(t,n,r)))}function Y0e(t){let e=K0e(t),n=o4(),r=!0;const i=c=>(h,f)=>{const d=Ch(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(d){const{transition:m,transitionEnd:y,...b}=d;h={...h,...b,...y}}return h};function s(c){e=c(t)}function o(c){const{props:h}=t,f=XH(t.parent)||{},d=[],m=new Set;let y={},b=1/0;for(let S=0;S<G0e;S++){const _=W0e[S],A=n[_],k=h[_]!==void 0?h[_]:f[_],P=ym(k),M=_===c?A.isActive:null;M===!1&&(b=S);let O=k===f[_]&&k!==h[_]&&P;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),A.protectedKeys={...y},!A.isActive&&M===null||!k&&!A.prevProp||i1(k)||typeof k=="boolean")continue;const L=X0e(A.prevProp,k);let N=L||_===c&&A.isActive&&!O&&P||S>b&&P,z=!1;const j=Array.isArray(k)?k:[k];let U=j.reduce(i(_),{});M===!1&&(U={});const{prevResolvedValues:W={}}=A,X={...W,...U},G=Y=>{N=!0,m.has(Y)&&(z=!0,m.delete(Y)),A.needsAnimating[Y]=!0;const q=t.getValue(Y);q&&(q.liveStyle=!1)};for(const Y in X){const q=U[Y],se=W[Y];if(y.hasOwnProperty(Y))continue;let T=!1;zA(q)&&zA(se)?T=!YH(q,se):T=q!==se,T?q!=null?G(Y):m.add(Y):q!==void 0&&m.has(Y)?G(Y):A.protectedKeys[Y]=!0}A.prevProp=k,A.prevResolvedValues=U,A.isActive&&(y={...y,...U}),r&&t.blockInitialAnimation&&(N=!1);const ie=O&&L;N&&(!ie||z)&&d.push(...j.map(Y=>{const q={type:_};if(typeof Y=="string"&&r&&!ie&&t.manuallyAnimateOnMount&&t.parent){const{parent:se}=t,T=Ch(se,Y);if(se.enteringChildren&&T){const{delayChildren:Z}=T.transition||{};q.delay=KH(se.enteringChildren,t,Z)}}return{animation:Y,options:q}}))}if(m.size){const S={};if(typeof h.initial!="boolean"){const _=Ch(t,Array.isArray(h.initial)?h.initial[0]:h.initial);_&&_.transition&&(S.transition=_.transition)}m.forEach(_=>{const A=t.getBaseTarget(_),k=t.getValue(_);k&&(k.liveStyle=!0),S[_]=A??null}),d.push({animation:S})}let w=!!d.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(d):Promise.resolve()}function a(c,h){if(n[c].isActive===h)return Promise.resolve();t.variantChildren?.forEach(d=>d.animationState?.setActive(c,h)),n[c].isActive=h;const f=o(c);for(const d in n)n[d].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=o4(),r=!0}}}function X0e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YH(e,t):!1}function Yl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function o4(){return{animate:Yl(!0),whileInView:Yl(),whileHover:Yl(),whileTap:Yl(),whileDrag:Yl(),whileFocus:Yl(),exit:Yl()}}class _l{constructor(e){this.isMounted=!1,this.node=e}update(){}}class J0e extends _l{constructor(e){super(e),e.animationState||(e.animationState=Y0e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();i1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Q0e=0;class Z0e extends _l{constructor(){super(...arguments),this.id=Q0e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const eye={animation:{Feature:J0e},exit:{Feature:Z0e}};function vm(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Xm(t){return{point:{x:t.pageX,y:t.pageY}}}const tye=t=>e=>UT(e)&&t(e,Xm(e));function Pp(t,e,n,r){return vm(t,e,tye(n),r)}const JH=1e-4,nye=1-JH,rye=1+JH,QH=.01,iye=0-QH,sye=0+QH;function Pr(t){return t.max-t.min}function oye(t,e,n){return Math.abs(t-e)<=n}function a4(t,e,n,r=.5){t.origin=r,t.originPoint=Gt(e.min,e.max,t.origin),t.scale=Pr(n)/Pr(e),t.translate=Gt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=nye&&t.scale<=rye||isNaN(t.scale))&&(t.scale=1),(t.translate>=iye&&t.translate<=sye||isNaN(t.translate))&&(t.translate=0)}function Dp(t,e,n,r){a4(t.x,e.x,n.x,r?r.originX:void 0),a4(t.y,e.y,n.y,r?r.originY:void 0)}function l4(t,e,n){t.min=n.min+e.min,t.max=t.min+Pr(e)}function aye(t,e,n){l4(t.x,e.x,n.x),l4(t.y,e.y,n.y)}function c4(t,e,n){t.min=e.min-n.min,t.max=t.min+Pr(e)}function Lp(t,e,n){c4(t.x,e.x,n.x),c4(t.y,e.y,n.y)}function Hi(t){return[t("x"),t("y")]}const ZH=({current:t})=>t?t.ownerDocument.defaultView:null,u4=(t,e)=>Math.abs(t-e);function lye(t,e){const n=u4(t.x,e.x),r=u4(t.y,e.y);return Math.sqrt(n**2+r**2)}class eU{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=ZS(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,b=lye(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!b)return;const{point:w}=m,{timestamp:S}=Un;this.history.push({...w,timestamp:S});const{onStart:_,onMove:A}=this.handlers;y||(_&&_(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=QS(y,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=ZS(m.type==="pointercancel"?this.lastMoveEventInfo:QS(y,this.transformPagePoint),this.history);this.startEvent&&b&&b(m,_),w&&w(m,_)},!UT(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Xm(e),c=QS(a,this.transformPagePoint),{point:h}=c,{timestamp:f}=Un;this.history=[{...h,timestamp:f}];const{onSessionStart:d}=n;d&&d(e,ZS(c,this.history)),this.removeListeners=Gm(Pp(this.contextWindow,"pointermove",this.handlePointerMove),Pp(this.contextWindow,"pointerup",this.handlePointerUp),Pp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vl(this.updatePoint)}}function QS(t,e){return e?{point:e(t.point)}:t}function h4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ZS({point:t},e){return{point:t,delta:h4(t,tU(e)),offset:h4(t,cye(e)),velocity:uye(e,.1)}}function cye(t){return t[0]}function tU(t){return t[t.length-1]}function uye(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=tU(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>co(e)));)n--;if(!r)return{x:0,y:0};const s=uo(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function hye(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Gt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Gt(n,t,r.max):Math.min(t,n)),t}function f4(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function fye(t,{top:e,left:n,bottom:r,right:i}){return{x:f4(t.x,n,i),y:f4(t.y,e,r)}}function d4(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function dye(t,e){return{x:d4(t.x,e.x),y:d4(t.y,e.y)}}function pye(t,e){let n=.5;const r=Pr(t),i=Pr(e);return i>r?n=pm(e.min,e.max-r,t.min):r>i&&(n=pm(t.min,t.max-i,e.min)),Zo(0,1,n)}function mye(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qA=.35;function gye(t=qA){return t===!1?t=0:t===!0&&(t=qA),{x:p4(t,"left","right"),y:p4(t,"top","bottom")}}function p4(t,e,n){return{min:m4(t,e),max:m4(t,n)}}function m4(t,e){return typeof t=="number"?t:t[e]||0}const yye=new WeakMap;class bye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xm(d).point)},o=(d,m)=>{const{drag:y,dragPropagation:b,onDragStart:w}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Rge(y),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hi(_=>{let A=this.getAxisMotionValue(_).get()||0;if(ho.test(A)){const{projection:k}=this.visualElement;if(k&&k.layout){const P=k.layout.layoutBox[_];P&&(A=Pr(P)*(parseFloat(A)/100))}}this.originPoint[_]=A}),w&&Ht.postRender(()=>w(d,m)),HA(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},a=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:w,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:_}=m;if(b&&this.currentDirection===null){this.currentDirection=vye(_),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,_),this.updateAxis("y",m.point,_),this.visualElement.render(),S&&S(d,m)},c=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m,this.stop(d,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Hi(d=>this.getAnimationState(d)==="paused"&&this.getAxisMotionValue(d).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new eU(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:ZH(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ht.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!$y(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=hye(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&oh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=fye(r.layoutBox,e):this.constraints=!1,this.elastic=gye(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Hi(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=mye(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!oh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=x0e(r,i.root,this.visualElement.getTransformPagePoint());let o=dye(i.layout.layoutBox,s);if(n){const a=n(y0e(o));this.hasMutatedConstraints=!!a,a&&(o=jH(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},h=Hi(f=>{if(!$y(f,n,this.currentDirection))return;let d=c&&c[f]||{};o&&(d={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,b={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,b)});return Promise.all(h).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return HA(this.visualElement,e),r.start(ZT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Hi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Hi(n=>{const{drag:r}=this.getProps();if(!$y(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Gt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!oh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Hi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();i[o]=pye({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Hi(o=>{if(!$y(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:h}=this.constraints[o];a.set(Gt(c,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;yye.set(this.visualElement,this);const e=this.visualElement.current,n=Pp(e,"pointerdown",c=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();oh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ht.read(r);const o=vm(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Hi(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=qA,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function $y(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function vye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class xye extends _l{constructor(e){super(e),this.removeGroupControls=Zi,this.removeListeners=Zi,this.controls=new bye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zi}unmount(){this.removeGroupControls(),this.removeListeners()}}const g4=t=>(e,n)=>{t&&Ht.postRender(()=>t(e,n))};class wye extends _l{constructor(){super(...arguments),this.removePointerDownListener=Zi}onPointerDown(e){this.session=new eU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:g4(e),onStart:g4(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ht.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Pp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function y4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Id={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(We.test(t))t=parseFloat(t);else return t;const n=y4(t,e.target.x),r=y4(t,e.target.y);return`${n}% ${r}%`}},Sye={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=xl.parse(t);if(i.length>5)return r;const s=xl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const h=Gt(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),s(i)}};let e_=!1;class _ye extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;qge(Cye),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),e_&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Lb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,e_=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ht.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),HT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;e_=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nU(t){const[e,n]=jge(),r=E.useContext(Lz);return C.jsx(_ye,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(NH),isPresent:e,safeToRemove:n})}const Cye={borderRadius:{...Id,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Id,borderTopRightRadius:Id,borderBottomLeftRadius:Id,borderBottomRightRadius:Id,boxShadow:Sye};function Aye(t,e,n){const r=mr(t)?t:jh(t);return r.start(ZT("",r,e,n)),r.animation}const kye=(t,e)=>t.depth-e.depth;class Eye{constructor(){this.children=[],this.isDirty=!1}add(e){CT(this.children,e),this.isDirty=!0}remove(e){AT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kye),this.isDirty=!1,this.children.forEach(e)}}function Tye(t,e){const n=Xr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(vl(r),t(s-e))};return Ht.setup(r,!0),()=>vl(r)}const rU=["TopLeft","TopRight","BottomLeft","BottomRight"],Rye=rU.length,b4=t=>typeof t=="string"?parseFloat(t):t,v4=t=>typeof t=="number"||We.test(t);function Mye(t,e,n,r,i,s){i?(t.opacity=Gt(0,n.opacity??1,Oye(r)),t.opacityExit=Gt(e.opacity??1,0,Pye(r))):s&&(t.opacity=Gt(e.opacity??1,n.opacity??1,r));for(let o=0;o<Rye;o++){const a=`border${rU[o]}Radius`;let c=x4(e,a),h=x4(n,a);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||v4(c)===v4(h)?(t[a]=Math.max(Gt(b4(c),b4(h),r),0),(ho.test(h)||ho.test(c))&&(t[a]+="%")):t[a]=h}(e.rotate||n.rotate)&&(t.rotate=Gt(e.rotate||0,n.rotate||0,r))}function x4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Oye=iU(0,.5,qz),Pye=iU(.5,.95,Zi);function iU(t,e,n){return r=>r<t?0:r>e?1:n(pm(t,e,r))}function w4(t,e){t.min=e.min,t.max=e.max}function Fi(t,e){w4(t.x,e.x),w4(t.y,e.y)}function S4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _4(t,e,n,r,i){return t-=e,t=zv(t,1/n,r),i!==void 0&&(t=zv(t,1/i,r)),t}function Dye(t,e=0,n=1,r=.5,i,s=t,o=t){if(ho.test(e)&&(e=parseFloat(e),e=Gt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Gt(s.min,s.max,r);t===s&&(a-=e),t.min=_4(t.min,e,n,a,i),t.max=_4(t.max,e,n,a,i)}function C4(t,e,[n,r,i],s,o){Dye(t,e[n],e[r],e[i],e.scale,s,o)}const Lye=["x","scaleX","originX"],Iye=["y","scaleY","originY"];function A4(t,e,n,r){C4(t.x,e,Lye,n?n.x:void 0,r?r.x:void 0),C4(t.y,e,Iye,n?n.y:void 0,r?r.y:void 0)}function k4(t){return t.translate===0&&t.scale===1}function sU(t){return k4(t.x)&&k4(t.y)}function E4(t,e){return t.min===e.min&&t.max===e.max}function Nye(t,e){return E4(t.x,e.x)&&E4(t.y,e.y)}function T4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function oU(t,e){return T4(t.x,e.x)&&T4(t.y,e.y)}function R4(t){return Pr(t.x)/Pr(t.y)}function M4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Bye{constructor(){this.members=[]}add(e){CT(this.members,e),e.scheduleRender()}remove(e){if(AT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jye(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:d,rotateY:m,skewX:y,skewY:b}=n;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),b&&(r+=`skewY(${b}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const t_=["","X","Y","Z"],$ye=1e3;let Vye=0;function n_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function aU(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=WH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ht,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&aU(r)}function lU({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Vye++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Hye),this.nodes.forEach(Gye),this.nodes.forEach(Kye),this.nodes.forEach(Uye)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Eye)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new TT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=_H(o)&&!Ige(o),this.instance=o;const{layoutId:a,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let f,d=0;const m=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{d=window.innerWidth}),t(o,()=>{const y=window.innerWidth;y!==d&&(d=y,this.root.updateBlockedByResize=!0,f&&f(),f=Tye(m,250),Lb.hasAnimatedSinceResize&&(Lb.hasAnimatedSinceResize=!1,this.nodes.forEach(D4)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&h&&(a||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||Zye,{onLayoutAnimationStart:w,onLayoutAnimationComplete:S}=h.getProps(),_=!this.targetLayout||!oU(this.targetLayout,y),A=!d&&m;if(this.options.layoutRoot||this.resumeFrom||A||d&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...FT(b,"layout"),onPlay:w,onComplete:S};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(f,A)}else d||D4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Yye),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(O4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(P4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Wye),this.nodes.forEach(Fye),this.nodes.forEach(zye)):this.nodes.forEach(P4),this.clearAllSnapshots();const a=Xr.now();Un.delta=Zo(0,1e3/60,a-Un.timestamp),Un.timestamp=a,Un.isProcessing=!0,US.update.process(Un),US.preRender.process(Un),US.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,HT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qye),this.sharedNodes.forEach(Xye)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pr(this.snapshot.measuredBox.x)&&!Pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!sU(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(a||ec(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),ebe(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return nn();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(tbe))){const{scroll:h}=this.root;h&&(ah(a.x,h.offset.x),ah(a.y,h.offset.y))}return a}removeElementScroll(o){const a=nn();if(Fi(a,o),this.scroll?.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:d}=h;h!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&Fi(a,o),ah(a.x,f.offset.x),ah(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const c=nn();Fi(c,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&lh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ec(f.latestValues)&&lh(c,f.latestValues)}return ec(this.latestValues)&&lh(c,this.latestValues),c}removeTransform(o){const a=nn();Fi(a,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!ec(h.latestValues))continue;$A(h.latestValues)&&h.updateSnapshot();const f=nn(),d=h.measurePageBox();Fi(f,d),A4(a,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return ec(this.latestValues)&&A4(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=Un.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),Lp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nn(),this.targetWithTransforms=nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fi(this.target,this.layout.layoutBox),VH(this.target,this.targetDelta)):Fi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),Lp(this.relativeTargetOrigin,this.target,m.target),Fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$A(this.parent.latestValues)||$H(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Fi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;v0e(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=nn());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(S4(this.prevProjectionDelta.x,this.projectionDelta.x),S4(this.prevProjectionDelta.y,this.projectionDelta.y)),Dp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!M4(this.projectionDelta.x,this.prevProjectionDelta.x)||!M4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ch(),this.projectionDelta=ch(),this.projectionDeltaWithTransform=ch()}setAnimationOrigin(o,a=!1){const c=this.snapshot,h=c?c.latestValues:{},f={...this.latestValues},d=ch();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=nn(),y=c?c.source:void 0,b=this.layout?this.layout.source:void 0,w=y!==b,S=this.getStack(),_=!S||S.members.length<=1,A=!!(w&&!_&&this.options.crossfade===!0&&!this.path.some(Qye));this.animationProgress=0;let k;this.mixTargetDelta=P=>{const M=P/1e3;L4(d.x,o.x,M),L4(d.y,o.y,M),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lp(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Jye(this.relativeTarget,this.relativeTargetOrigin,m,M),k&&Nye(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=nn()),Fi(k,this.relativeTarget)),w&&(this.animationValues=f,Mye(f,h,this.latestValues,M,A,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(vl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{Lb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=jh(0)),this.currentAnimation=Aye(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($ye),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:h,latestValues:f}=o;if(!(!a||!c||!h)){if(this!==o&&this.layout&&h&&cU(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||nn();const d=Pr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const m=Pr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}Fi(a,c),lh(a,f),Dp(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Bye),this.sharedNodes.get(o).add(a);const h=a.options.initialPromotionConfig;a.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const h={};c.z&&n_("z",o,h,this.animationValues);for(let f=0;f<t_.length;f++)n_(`rotate${t_[f]}`,o,h,this.animationValues),n_(`skew${t_[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Db(a?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Db(a?.pointerEvents)||""),this.hasProjected&&!ec(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let d=jye(this.projectionDeltaWithTransform,this.treeScale,f);c&&(d=c(f,d)),o.transform=d;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in bm){if(f[b]===void 0)continue;const{correct:w,applyTo:S,isCSSVariable:_}=bm[b],A=d==="none"?f[b]:w(f[b],h);if(S){const k=S.length;for(let P=0;P<k;P++)o[S[P]]=A}else _?this.options.visualElement.renderState.vars[b]=A:o[b]=A}this.options.layoutId&&(o.pointerEvents=h===this?Db(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(O4),this.root.sharedNodes.clear()}}}function Fye(t){t.updateLayout()}function zye(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?Hi(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],m=Pr(d);d.min=n[f].min,d.max=d.min+m}):cU(i,e.layoutBox,n)&&Hi(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],m=Pr(n[f]);d.max=d.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const o=ch();Dp(o,n,e.layoutBox);const a=ch();s?Dp(a,t.applyTransform(r,!0),e.measuredBox):Dp(a,n,e.layoutBox);const c=!sU(o);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:m}=f;if(d&&m){const y=nn();Lp(y,e.layoutBox,d.layoutBox);const b=nn();Lp(b,n,m.layoutBox),oU(y,b)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Hye(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Uye(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function qye(t){t.clearSnapshot()}function O4(t){t.clearMeasurements()}function P4(t){t.isLayoutDirty=!1}function Wye(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function D4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Gye(t){t.resolveTargetDelta()}function Kye(t){t.calcProjection()}function Yye(t){t.resetSkewAndRotation()}function Xye(t){t.removeLeadSnapshot()}function L4(t,e,n){t.translate=Gt(e.translate,0,n),t.scale=Gt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function I4(t,e,n,r){t.min=Gt(e.min,n.min,r),t.max=Gt(e.max,n.max,r)}function Jye(t,e,n,r){I4(t.x,e.x,n.x,r),I4(t.y,e.y,n.y,r)}function Qye(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Zye={duration:.45,ease:[.4,0,.1,1]},N4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),B4=N4("applewebkit/")&&!N4("chrome/")?Math.round:Zi;function j4(t){t.min=B4(t.min),t.max=B4(t.max)}function ebe(t){j4(t.x),j4(t.y)}function cU(t,e,n){return t==="position"||t==="preserve-aspect"&&!oye(R4(e),R4(n),.2)}function tbe(t){return t!==t.root&&t.scroll?.wasRoot}const nbe=lU({attachResizeListener:(t,e)=>vm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),r_={current:void 0},uU=lU({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!r_.current){const t=new nbe({});t.mount(window),t.setOptions({layoutScroll:!0}),r_.current=t}return r_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),rbe={pan:{Feature:wye},drag:{Feature:xye,ProjectionNode:uU,MeasureLayout:nU}};function $4(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ht.postRender(()=>s(e,Xm(e)))}class ibe extends _l{mount(){const{current:e}=this.node;e&&(this.unmount=Mge(e,(n,r)=>($4(this.node,r,"Start"),i=>$4(this.node,i,"End"))))}unmount(){}}class sbe extends _l{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gm(vm(this.node.current,"focus",()=>this.onFocus()),vm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function V4(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ht.postRender(()=>s(e,Xm(e)))}class obe extends _l{mount(){const{current:e}=this.node;e&&(this.unmount=Lge(e,(n,r)=>(V4(this.node,r,"Start"),(i,{success:s})=>V4(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const WA=new WeakMap,i_=new WeakMap,abe=t=>{const e=WA.get(t.target);e&&e(t)},lbe=t=>{t.forEach(abe)};function cbe({root:t,...e}){const n=t||document;i_.has(n)||i_.set(n,{});const r=i_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(lbe,{root:t,...e})),r[i]}function ube(t,e,n){const r=cbe(e);return WA.set(t,n),r.observe(t),()=>{WA.delete(t),r.unobserve(t)}}const hbe={some:0,all:1};class fbe extends _l{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:hbe[i]},a=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),m=h?f:d;m&&m(c)};return ube(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(dbe(e,n))&&this.startObserver()}unmount(){}}function dbe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const pbe={inView:{Feature:fbe},tap:{Feature:obe},focus:{Feature:sbe},hover:{Feature:ibe}},mbe={layout:{ProjectionNode:uU,MeasureLayout:nU}},gbe={...eye,...pbe,...rbe,...mbe},eR=g0e(gbe,R0e),ybe=()=>{const{t}=Ot();return C.jsx(rj,{children:C.jsx("div",{className:"mx-auto flex w-full max-w-[var(--thread-max-width)] flex-col px-[var(--thread-padding-x)] justify-center items-center mb-[16px]",children:C.jsxs("div",{className:"max-w-[490px] flex flex-col items-center gap-[16px] text-center",children:[C.jsx("p",{className:"font-[700] text-[32px] leading-[24px]",style:{color:"var(--chat-welcome-color)"},children:t("WelcomeTitle")}),C.jsx("p",{className:"text-[20px] leading-[20px]",style:{color:"var(--chat-welcome-description-color)"},children:t("WelcomeDescription")})]})})})},o1=na((t,e)=>({attachmentFiles:[],addAttachmentFile:n=>{t({attachmentFiles:[...e().attachmentFiles,n]})},deleteAttachmentFile:n=>{t({attachmentFiles:e().attachmentFiles.filter(r=>r.path!==n)})},clearAttachmentFiles:()=>{t({attachmentFiles:[]})}})),bbe="data:image/svg+xml,%3csvg%20width='17'%20height='16'%20viewBox='0%200%2017%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.38672%205.07617L6.4082%206.0918L8.33008%208.00098L6.41016%209.91016L5.3877%2010.9258L4.87695%2011.4346L5.15918%2011.7178L5.44141%2012.002L5.95215%2011.4932L6.97461%2010.4775L8.89746%208.56543L11.7627%2011.4131L12.3135%2011.9619L12.5957%2011.6777L12.8779%2011.3945L12.3262%2010.8457L11.2227%209.74902L9.46484%208.00098L11.2246%206.25293L12.3281%205.15625L12.8799%204.6084L12.3154%204.04004L11.7637%204.58887L10.6611%205.68555L8.89746%207.4375L6.97266%205.52441L5.9502%204.50879L5.43945%204L4.875%204.56836L5.38672%205.07617Z'%20fill='%23444444'/%3e%3c/svg%3e",vbe="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%201.5H20.5859C20.7185%201.50004%2020.8457%201.55275%2020.9395%201.64648L26.3535%207.06055C26.4472%207.15428%2026.5%207.28151%2026.5%207.41406V29C26.5%2029.8284%2025.8284%2030.5%2025%2030.5H7C6.17157%2030.5%205.5%2029.8284%205.5%2029V3C5.5%202.17157%206.17157%201.5%207%201.5Z'%20fill='white'%20stroke='%23BBBBBB'/%3e%3cpath%20d='M20.5%202V6C20.5%206.82843%2021.1716%207.5%2022%207.5H26'%20stroke='%23BBBBBB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2012C9.44772%2012%209%2012.4477%209%2013C9%2013.5523%209.44772%2014%2010%2014H22C22.5523%2014%2023%2013.5523%2023%2013C23%2012.4477%2022.5523%2012%2022%2012H10ZM9%2017C9%2016.4477%209.44771%2016%2010%2016H13C13.5523%2016%2014%2016.4477%2014%2017C14%2017.5523%2013.5523%2018%2013%2018H10C9.44771%2018%209%2017.5523%209%2017ZM9%2021C9%2020.4477%209.44772%2020%2010%2020H13C13.5523%2020%2014%2020.4477%2014%2021C14%2021.5523%2013.5523%2022%2013%2022H10C9.44771%2022%209%2021.5523%209%2021Z'%20fill='%23A9CBDD'/%3e%3cpath%20d='M16%2018C16%2016.8954%2016.8954%2016%2018%2016H26C27.1046%2016%2028%2016.8954%2028%2018V26C28%2027.1046%2027.1046%2028%2026%2028H18C16.8954%2028%2016%2027.1046%2016%2026V18Z'%20fill='%23287CA9'/%3e%3cpath%20d='M26.93%2018.4596L25.14%2025.5996H23.16L22.33%2022.1496C22.31%2022.0763%2022.2867%2021.9696%2022.26%2021.8296C22.2333%2021.6829%2022.2%2021.5229%2022.16%2021.3496C22.1267%2021.1696%2022.0967%2020.9996%2022.07%2020.8396C22.0433%2020.6729%2022.0233%2020.5396%2022.01%2020.4396C21.9967%2020.5396%2021.9733%2020.6729%2021.94%2020.8396C21.9133%2020.9996%2021.8833%2021.1696%2021.85%2021.3496C21.8167%2021.5229%2021.7833%2021.6829%2021.75%2021.8296C21.7233%2021.9696%2021.7%2022.0763%2021.68%2022.1496L20.84%2025.5996H18.87L17.07%2018.4596H18.73L19.58%2022.2096C19.6067%2022.3096%2019.6367%2022.4429%2019.67%2022.6096C19.7033%2022.7696%2019.7367%2022.9429%2019.77%2023.1296C19.8033%2023.3096%2019.8333%2023.4863%2019.86%2023.6596C19.8933%2023.8263%2019.9167%2023.9696%2019.93%2024.0896C19.95%2023.9296%2019.9767%2023.7463%2020.01%2023.5396C20.05%2023.3329%2020.09%2023.1229%2020.13%2022.9096C20.17%2022.6963%2020.21%2022.4963%2020.25%2022.3096C20.29%2022.1229%2020.3267%2021.9729%2020.36%2021.8596L21.21%2018.4596H22.8L23.65%2021.8596C23.67%2021.9729%2023.7%2022.1229%2023.74%2022.3096C23.7867%2022.4963%2023.83%2022.6996%2023.87%2022.9196C23.9167%2023.1329%2023.9567%2023.3429%2023.99%2023.5496C24.0233%2023.7563%2024.05%2023.9363%2024.07%2024.0896C24.09%2023.9229%2024.12%2023.7229%2024.16%2023.4896C24.2067%2023.2496%2024.2533%2023.0129%2024.3%2022.7796C24.3467%2022.5396%2024.3867%2022.3529%2024.42%2022.2196L25.27%2018.4596H26.93Z'%20fill='white'/%3e%3c/svg%3e",xbe="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%201.5H20.5859C20.7185%201.50004%2020.8457%201.55275%2020.9395%201.64648L26.3535%207.06055C26.4472%207.15428%2026.5%207.28151%2026.5%207.41406V29C26.5%2029.8284%2025.8284%2030.5%2025%2030.5H7C6.17157%2030.5%205.5%2029.8284%205.5%2029V3C5.5%202.17157%206.17157%201.5%207%201.5Z'%20fill='white'%20stroke='%23BBBBBB'/%3e%3cpath%20d='M20.5%202V6C20.5%206.82843%2021.1716%207.5%2022%207.5H26'%20stroke='%23BBBBBB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2012C9.44772%2012%209%2012.4477%209%2013C9%2013.5523%209.44772%2014%2010%2014H22C22.5523%2014%2023%2013.5523%2023%2013C23%2012.4477%2022.5523%2012%2022%2012H10ZM9%2017C9%2016.4477%209.44771%2016%2010%2016H13C13.5523%2016%2014%2016.4477%2014%2017C14%2017.5523%2013.5523%2018%2013%2018H10C9.44771%2018%209%2017.5523%209%2017ZM9%2021C9%2020.4477%209.44772%2020%2010%2020H13C13.5523%2020%2014%2020.4477%2014%2021C14%2021.5523%2013.5523%2022%2013%2022H10C9.44771%2022%209%2021.5523%209%2021Z'%20fill='%23F5B8B0'/%3e%3cpath%20d='M16%2018C16%2016.8954%2016.8954%2016%2018%2016H26C27.1046%2016%2028%2016.8954%2028%2018V26C28%2027.1046%2027.1046%2028%2026%2028H18C16.8954%2028%2016%2027.1046%2016%2026V18Z'%20fill='%23E54D39'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M20.8924%2017.5C20.8924%2018.8103%2020.5181%2020.3557%2019.8855%2021.7815C19.2505%2023.2131%2018.3933%2024.4378%2017.5%2025.1598L18.4707%2026.5C20.8784%2024.8781%2023.5444%2023.7664%2026.1241%2024.1387L26.5%2022.5276C24.302%2021.7881%2022.5384%2019.5689%2022.5384%2017.5H20.8924ZM21.9659%2020.9307C21.8013%2021.4516%2021.6064%2021.9659%2021.3859%2022.462C21.2669%2022.7306%2021.1403%2022.9954%2021.0043%2023.2563C21.7701%2022.9505%2022.5614%2022.7104%2023.3692%2022.5642C22.8309%2022.0858%2022.3589%2021.5364%2021.9659%2020.9307Z'%20fill='white'/%3e%3c/svg%3e",wbe="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%201.5H20.5859C20.7185%201.50004%2020.8457%201.55275%2020.9395%201.64648L26.3535%207.06055C26.4472%207.15428%2026.5%207.28151%2026.5%207.41406V29C26.5%2029.8284%2025.8284%2030.5%2025%2030.5H7C6.17157%2030.5%205.5%2029.8284%205.5%2029V3C5.5%202.17157%206.17157%201.5%207%201.5Z'%20fill='white'%20stroke='%23BBBBBB'/%3e%3cpath%20d='M20.5%202V6C20.5%206.82843%2021.1716%207.5%2022%207.5H26'%20stroke='%23BBBBBB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2012C9.44772%2012%209%2012.4477%209%2013C9%2013.5523%209.44772%2014%2010%2014H14C14.5523%2014%2015%2013.5523%2015%2013C15%2012.4477%2014.5523%2012%2014%2012H10ZM10%2016C9.44772%2016%209%2016.4477%209%2017C9%2017.5523%209.44772%2018%2010%2018H14C14.5523%2018%2015%2017.5523%2015%2017C15%2016.4477%2014.5523%2016%2014%2016H10ZM9%2021C9%2020.4477%209.44772%2020%2010%2020H14C14.5523%2020%2015%2020.4477%2015%2021C15%2021.5523%2014.5523%2022%2014%2022H10C9.44772%2022%209%2021.5523%209%2021ZM18%2012C17.4477%2012%2017%2012.4477%2017%2013C17%2013.5523%2017.4477%2014%2018%2014H22C22.5523%2014%2023%2013.5523%2023%2013C23%2012.4477%2022.5523%2012%2022%2012H18Z'%20fill='%23B0D9AD'/%3e%3cpath%20d='M16%2018C16%2016.8954%2016.8954%2016%2018%2016H26C27.1046%2016%2028%2016.8954%2028%2018V26C28%2027.1046%2027.1046%2028%2026%2028H18C16.8954%2028%2016%2027.1046%2016%2026V18Z'%20fill='%233AA133'/%3e%3cpath%20d='M25.4432%2025.5996H23.4832L21.9532%2023.1196L20.4232%2025.5996H18.5432L20.9132%2021.9296L18.6832%2018.4596H20.5732L22.0032%2020.8596L23.3832%2018.4596H25.2732L23.0332%2022.0496L25.4432%2025.5996Z'%20fill='white'/%3e%3c/svg%3e",hU=({file:t,withoutClose:e})=>{const{deleteAttachmentFile:n}=o1(),r=()=>{n(t.path)},i=t.path.split("/").pop()??"",s=i.split(".").pop()??"",o=i.replace(`.${s}`,""),a=s==="pdf"?xbe:s==="docx"?vbe:wbe;return C.jsxs("div",{className:Ve(" w-fit flex flex-row gap-[12px] h-[44px] rounded-[8px] p-[4px] box-border border-[var(--file-items-border-color)]",e?"cursor-pointer pe-[24px]":"",e?"bg-[var(--file-items-chat-background-color)]":"border bg-[var(--file-items-background-color)]",e?"hover:bg-[var(--file-items-chat-hover-background-color)]":"",e?"active:bg-[var(--file-items-chat-pressed-background-color)]":""),onClick:()=>{e&&window.AscDesktopEditor.openTemplate(t.path,i)},children:[t.isImage?C.jsx("img",{className:"h-[31px]",src:t.content,alt:""}):C.jsxs("div",{className:"flex flex-row items-center h-[36px] gap-[4px]",children:[C.jsx(Zt,{className:"",src:a}),C.jsxs("p",{className:"text-[var(--file-items-color)] whitespace-nowrap overflow-hidden text-ellipsis",children:[o,C.jsxs("span",{className:"text-[var(--file-items-ext-color)]",children:[".",s]})]})]}),e?null:C.jsx(Et,{iconName:bbe,size:16,onClick:r})]})};function Hv(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const Or=Cl(/[A-Za-z]/),gr=Cl(/[\dA-Za-z]/),Sbe=Cl(/[#-'*+\--9=?A-Z^-~]/);function Uv(t){return t!==null&&(t<32||t===127)}const GA=Cl(/\d/),_be=Cl(/[\dA-Fa-f]/),Cbe=Cl(/[!-/:-@[-`{-~]/);function je(t){return t!==null&&t<-2}function Mt(t){return t!==null&&(t<0||t===32)}function lt(t){return t===-2||t===-1||t===32}const a1=Cl(new RegExp("\\p{P}|\\p{S}","u")),Rc=Cl(/\s/);function Cl(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Abe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const l1=(function(t){if(t==null)return Rbe;if(typeof t=="function")return c1(t);if(typeof t=="object")return Array.isArray(t)?kbe(t):Ebe(t);if(typeof t=="string")return Tbe(t);throw new Error("Expected function, string, or object as test")});function kbe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=l1(t[n]);return c1(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Ebe(t){const e=t;return c1(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Tbe(t){return c1(e);function e(n){return n&&n.type===t}}function c1(t){return e;function e(n,r,i){return!!(Mbe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Rbe(){return!0}function Mbe(t){return t!==null&&typeof t=="object"&&"type"in t}const fU=[],Obe=!0,KA=!1,Pbe="skip";function dU(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=l1(i),o=r?-1:1;a(t,void 0,[])();function a(c,h,f){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const y=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return m;function m(){let y=fU,b,w,S;if((!e||s(c,h,f[f.length-1]||void 0))&&(y=Dbe(n(c,f)),y[0]===KA))return y;if("children"in c&&c.children){const _=c;if(_.children&&y[0]!==Pbe)for(w=(r?_.children.length:-1)+o,S=f.concat(_);w>-1&&w<_.children.length;){const A=_.children[w];if(b=a(A,w,S)(),b[0]===KA)return b;w=typeof b[1]=="number"?b[1]:w+o}}return y}}}function Dbe(t){return Array.isArray(t)?t:typeof t=="number"?[Obe,t]:t==null?fU:[t]}function Lbe(t,e,n){const i=l1((n||{}).ignore||[]),s=Ibe(e);let o=-1;for(;++o<s.length;)dU(t,"text",a);function a(h,f){let d=-1,m;for(;++d<f.length;){const y=f[d],b=m?m.children:void 0;if(i(y,b?b.indexOf(y):void 0,m))return;m=y}if(m)return c(h,f)}function c(h,f){const d=f[f.length-1],m=s[o][0],y=s[o][1];let b=0;const S=d.children.indexOf(h);let _=!1,A=[];m.lastIndex=0;let k=m.exec(h.value);for(;k;){const P=k.index,M={index:k.index,input:k.input,stack:[...f,h]};let O=y(...k,M);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?m.lastIndex=P+1:(b!==P&&A.push({type:"text",value:h.value.slice(b,P)}),Array.isArray(O)?A.push(...O):O&&A.push(O),b=P+k[0].length,_=!0),!m.global)break;k=m.exec(h.value)}return _?(b<h.value.length&&A.push({type:"text",value:h.value.slice(b)}),d.children.splice(S,1,...A)):A=[h],S+A.length}}function Ibe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([Nbe(i[0]),Bbe(i[1])])}return e}function Nbe(t){return typeof t=="string"?new RegExp(Abe(t),"g"):t}function Bbe(t){return typeof t=="function"?t:function(){return t}}const s_="phrasing",o_=["autolink","link","image","label"];function jbe(){return{transforms:[qbe],enter:{literalAutolink:Vbe,literalAutolinkEmail:a_,literalAutolinkHttp:a_,literalAutolinkWww:a_},exit:{literalAutolink:Ube,literalAutolinkEmail:Hbe,literalAutolinkHttp:Fbe,literalAutolinkWww:zbe}}}function $be(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:":",before:"[ps]",after:"\\/",inConstruct:s_,notInConstruct:o_}]}}function Vbe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function a_(t){this.config.enter.autolinkProtocol.call(this,t)}function Fbe(t){this.config.exit.autolinkProtocol.call(this,t)}function zbe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Hbe(t){this.config.exit.autolinkEmail.call(this,t)}function Ube(t){this.exit(t)}function qbe(t){Lbe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Wbe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Gbe]],{ignore:["link","linkReference"]})}function Wbe(t,e,n,r,i){let s="";if(!pU(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Kbe(n)))return!1;const o=Ybe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Gbe(t,e,n,r){return!pU(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Kbe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Ybe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Hv(t,"(");let s=Hv(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function pU(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Rc(n)||a1(n))&&(!e||n!==47)}function ys(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}mU.peek=ive;function Xbe(){this.buffer()}function Jbe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Qbe(){this.buffer()}function Zbe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function eve(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ys(this.sliceSerialize(t)).toLowerCase(),n.label=e}function tve(t){this.exit(t)}function nve(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ys(this.sliceSerialize(t)).toLowerCase(),n.label=e}function rve(t){this.exit(t)}function ive(){return"["}function mU(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function sve(){return{enter:{gfmFootnoteCallString:Xbe,gfmFootnoteCall:Jbe,gfmFootnoteDefinitionLabelString:Qbe,gfmFootnoteDefinition:Zbe},exit:{gfmFootnoteCallString:eve,gfmFootnoteCall:tve,gfmFootnoteDefinitionLabelString:nve,gfmFootnoteDefinition:rve}}}function ove(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:mU},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let c=a.move("[^");const h=s.enter("footnoteDefinition"),f=s.enter("label");return c+=a.move(s.safe(s.associationId(r),{before:c,after:"]"})),f(),c+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),c+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?gU:ave))),h(),c}}function ave(t,e,n){return e===0?t:gU(t,e,n)}function gU(t,e,n){return(n?"":"    ")+t}const lve=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];yU.peek=dve;function cve(){return{canContainEols:["delete"],enter:{strikethrough:hve},exit:{strikethrough:fve}}}function uve(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:lve}],handlers:{delete:yU}}}function hve(t){this.enter({type:"delete",children:[]},t)}function fve(t){this.exit(t)}function yU(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function dve(){return"~"}function pve(t){return t.length}function mve(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||pve,s=[],o=[],a=[],c=[];let h=0,f=-1;for(;++f<t.length;){const w=[],S=[];let _=-1;for(t[f].length>h&&(h=t[f].length);++_<t[f].length;){const A=gve(t[f][_]);if(n.alignDelimiters!==!1){const k=i(A);S[_]=k,(c[_]===void 0||k>c[_])&&(c[_]=k)}w.push(A)}o[f]=w,a[f]=S}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<h;)s[d]=F4(r[d]);else{const w=F4(r);for(;++d<h;)s[d]=w}d=-1;const m=[],y=[];for(;++d<h;){const w=s[d];let S="",_="";w===99?(S=":",_=":"):w===108?S=":":w===114&&(_=":");let A=n.alignDelimiters===!1?1:Math.max(1,c[d]-S.length-_.length);const k=S+"-".repeat(A)+_;n.alignDelimiters!==!1&&(A=S.length+A+_.length,A>c[d]&&(c[d]=A),y[d]=A),m[d]=k}o.splice(1,0,m),a.splice(1,0,y),f=-1;const b=[];for(;++f<o.length;){const w=o[f],S=a[f];d=-1;const _=[];for(;++d<h;){const A=w[d]||"";let k="",P="";if(n.alignDelimiters!==!1){const M=c[d]-(S[d]||0),O=s[d];O===114?k=" ".repeat(M):O===99?M%2?(k=" ".repeat(M/2+.5),P=" ".repeat(M/2-.5)):(k=" ".repeat(M/2),P=k):P=" ".repeat(M)}n.delimiterStart!==!1&&!d&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&A==="")&&(n.delimiterStart!==!1||d)&&_.push(" "),n.alignDelimiters!==!1&&_.push(k),_.push(A),n.alignDelimiters!==!1&&_.push(P),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||d!==h-1)&&_.push("|")}b.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return b.join(`
`)}function gve(t){return t==null?"":String(t)}function F4(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}const z4={}.hasOwnProperty;function yve(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&z4.call(i,t)){const c=String(i[t]);o=z4.call(a,c)?a[c]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function bve(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),vve);return i(),o}function vve(t,e,n){return">"+(n?"":" ")+t}function xve(t,e){return H4(t,e.inConstruct,!0)&&!H4(t,e.notInConstruct,!1)}function H4(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function U4(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&xve(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function wve(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function Sve(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function _ve(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Cve(t,e,n,r){const i=_ve(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Sve(t,n)){const d=n.enter("codeIndented"),m=n.indentLines(s,Ave);return d(),m}const a=n.createTracker(r),c=i.repeat(Math.max(wve(s,i)+1,3)),h=n.enter("codeFenced");let f=a.move(c);if(t.lang){const d=n.enter(`codeFencedLang${o}`);f+=a.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);f+=a.move(" "),f+=a.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...a.current()})),d()}return f+=a.move(`
`),s&&(f+=a.move(s+`
`)),f+=a.move(c),h(),f}function Ave(t,e,n){return(n?"":"    ")+t}function tR(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function kve(t,e,n,r){const i=tR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const c=n.createTracker(r);let h=c.move("[");return h+=c.move(n.safe(n.associationId(t),{before:h,after:"]",...c.current()})),h+=c.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(a=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...c.current()}))),a(),t.title&&(a=n.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(n.safe(t.title,{before:h,after:i,...c.current()})),h+=c.move(i),a()),o(),h}function Eve(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function xm(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Vh(t){if(t===null||Mt(t)||Rc(t))return 1;if(a1(t))return 2}function qv(t,e,n){const r=Vh(t),i=Vh(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}bU.peek=Tve;function bU(t,e,n,r){const i=Eve(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const h=c.charCodeAt(0),f=qv(r.before.charCodeAt(r.before.length-1),h,i);f.inside&&(c=xm(h)+c.slice(1));const d=c.charCodeAt(c.length-1),m=qv(r.after.charCodeAt(0),d,i);m.inside&&(c=c.slice(0,-1)+xm(d));const y=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+y}function Tve(t,e,n){return n.options.emphasis||"*"}function nR(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),dU(t,s,a,i);function a(c,h){const f=h[h.length-1],d=f?f.children.indexOf(c):void 0;return o(c,d,f)}}const Rve={};function rR(t,e){const n=Rve,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return vU(t,r,i)}function vU(t,e,n){if(Mve(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return q4(t.children,e,n)}return Array.isArray(t)?q4(t,e,n):""}function q4(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=vU(t[i],e,n);return r.join("")}function Mve(t){return!!(t&&typeof t=="object")}function Ove(t,e){let n=!1;return nR(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,KA}),!!((!t.depth||t.depth<3)&&rR(t)&&(e.options.setext||n))}function Pve(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(Ove(t,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),f(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=xm(h.charCodeAt(0))+h.slice(1)),h=h?o+" "+h:o,n.options.closeAtx&&(h+=" "+o),c(),a(),h}xU.peek=Dve;function xU(t){return t.value||""}function Dve(){return"<"}wU.peek=Lve;function wU(t,e,n,r){const i=tR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const c=n.createTracker(r);let h=c.move("![");return h+=c.move(n.safe(t.alt,{before:h,after:"]",...c.current()})),h+=c.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(a=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":")",...c.current()}))),a(),t.title&&(a=n.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(n.safe(t.title,{before:h,after:i,...c.current()})),h+=c.move(i),a()),h+=c.move(")"),o(),h}function Lve(){return"!"}SU.peek=Ive;function SU(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let c=a.move("![");const h=n.safe(t.alt,{before:c,after:"]",...a.current()});c+=a.move(h+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...a.current()});return o(),n.stack=f,s(),i==="full"||!h||h!==d?c+=a.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function Ive(){return"!"}_U.peek=Nve;function _U(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let c;if(o.atBreak)for(;c=a.exec(r);){let h=c.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(c.index+1)}}return i+r+i}function Nve(){return"`"}function CU(t,e){const n=rR(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}AU.peek=Bve;function AU(t,e,n,r){const i=tR(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,c;if(CU(t,n)){const f=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=f,d}a=n.enter("link"),c=n.enter("label");let h=o.move("[");return h+=o.move(n.containerPhrasing(t,{before:h,after:"](",...o.current()})),h+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=o.move("<"),h+=o.move(n.safe(t.url,{before:h,after:">",...o.current()})),h+=o.move(">")):(c=n.enter("destinationRaw"),h+=o.move(n.safe(t.url,{before:h,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=o.move(" "+i),h+=o.move(n.safe(t.title,{before:h,after:i,...o.current()})),h+=o.move(i),c()),h+=o.move(")"),a(),h}function Bve(t,e,n){return CU(t,n)?"<":"["}kU.peek=jve;function kU(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let c=a.move("[");const h=n.containerPhrasing(t,{before:c,after:"]",...a.current()});c+=a.move(h+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...a.current()});return o(),n.stack=f,s(),i==="full"||!h||h!==d?c+=a.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function jve(){return"["}function iR(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function $ve(t){const e=iR(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Vve(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function EU(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Fve(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Vve(n):iR(n);const a=t.ordered?o==="."?")":".":$ve(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),EU(n)===o&&f){let d=-1;for(;++d<t.children.length;){const m=t.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=a),n.bulletCurrent=o;const h=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),h}function zve(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Hve(t,e,n,r){const i=zve(n);let s=n.bulletCurrent||iR(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const c=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,a.current()),f);return c(),h;function f(d,m,y){return m?(y?"":" ".repeat(o))+d:(y?s:s+" ".repeat(o-s.length))+d}}function Uve(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const qve=l1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Wve(t,e,n,r){return(t.children.some(function(o){return qve(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Gve(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}TU.peek=Kve;function TU(t,e,n,r){const i=Gve(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const h=c.charCodeAt(0),f=qv(r.before.charCodeAt(r.before.length-1),h,i);f.inside&&(c=xm(h)+c.slice(1));const d=c.charCodeAt(c.length-1),m=qv(r.after.charCodeAt(0),d,i);m.inside&&(c=c.slice(0,-1)+xm(d));const y=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+y}function Kve(t,e,n){return n.options.strong||"*"}function Yve(t,e,n,r){return n.safe(t.value,r)}function Xve(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Jve(t,e,n){const r=(EU(n)+(n.options.ruleSpaces?" ":"")).repeat(Xve(n));return n.options.ruleSpaces?r.slice(0,-1):r}const RU={blockquote:bve,break:U4,code:Cve,definition:kve,emphasis:bU,hardBreak:U4,heading:Pve,html:xU,image:wU,imageReference:SU,inlineCode:_U,link:AU,linkReference:kU,list:Fve,listItem:Hve,paragraph:Uve,root:Wve,strong:TU,text:Yve,thematicBreak:Jve},W4=document.createElement("i");function sR(t){const e="&"+t+";";W4.innerHTML=e;const n=W4.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function MU(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const Qve=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Zve(t){return t.replace(Qve,exe)}function exe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return MU(n.slice(s?2:1),s?16:10)}return sR(n)||t}function txe(){return{enter:{table:nxe,tableData:G4,tableHeader:G4,tableRow:ixe},exit:{codeText:sxe,table:rxe,tableData:l_,tableHeader:l_,tableRow:l_}}}function nxe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function rxe(t){this.exit(t),this.data.inTable=void 0}function ixe(t){this.enter({type:"tableRow",children:[]},t)}function l_(t){this.exit(t)}function G4(t){this.enter({type:"tableCell",children:[]},t)}function sxe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,oxe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function oxe(t,e){return e==="|"?e:t}function axe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:a}};function o(y,b,w,S){return h(f(y,w,S),y.align)}function a(y,b,w,S){const _=d(y,w,S),A=h([_]);return A.slice(0,A.indexOf(`
`))}function c(y,b,w,S){const _=w.enter("tableCell"),A=w.enter("phrasing"),k=w.containerPhrasing(y,{...S,before:s,after:s});return A(),_(),k}function h(y,b){return mve(y,{align:b,alignDelimiters:r,padding:n,stringLength:i})}function f(y,b,w){const S=y.children;let _=-1;const A=[],k=b.enter("table");for(;++_<S.length;)A[_]=d(S[_],b,w);return k(),A}function d(y,b,w){const S=y.children;let _=-1;const A=[],k=b.enter("tableRow");for(;++_<S.length;)A[_]=c(S[_],y,b,w);return k(),A}function m(y,b,w){let S=RU.inlineCode(y,b,w);return w.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function lxe(){return{exit:{taskListCheckValueChecked:K4,taskListCheckValueUnchecked:K4,paragraph:uxe}}}function cxe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:hxe}}}function K4(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function uxe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function hxe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let c=RU.listItem(t,e,n,{...r,...a.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),c;function h(f){return f+o}}function fxe(){return[jbe(),sve(),cve(),txe(),lxe()]}function dxe(t){return{extensions:[$be(),ove(t),uve(),axe(t),cxe()]}}function ki(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function qi(t,e){return t.length>0?(ki(t,t.length,0,e),t):e}const Y4={}.hasOwnProperty;function OU(t){const e={};let n=-1;for(;++n<t.length;)pxe(e,t[n]);return e}function pxe(t,e){let n;for(n in e){const i=(Y4.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Y4.call(i,o)||(i[o]=[]);const a=s[o];mxe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function mxe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ki(t,0,0,r)}const gxe={tokenize:Sxe,partial:!0},PU={tokenize:_xe,partial:!0},DU={tokenize:Cxe,partial:!0},LU={tokenize:Axe,partial:!0},yxe={tokenize:kxe,partial:!0},IU={name:"wwwAutolink",tokenize:xxe,previous:BU},NU={name:"protocolAutolink",tokenize:wxe,previous:jU},oa={name:"emailAutolink",tokenize:vxe,previous:$U},So={};function bxe(){return{text:So}}let Xl=48;for(;Xl<123;)So[Xl]=oa,Xl++,Xl===58?Xl=65:Xl===91&&(Xl=97);So[43]=oa;So[45]=oa;So[46]=oa;So[95]=oa;So[72]=[oa,NU];So[104]=[oa,NU];So[87]=[oa,IU];So[119]=[oa,IU];function vxe(t,e,n){const r=this;let i,s;return o;function o(d){return!YA(d)||!$U.call(r,r.previous)||oR(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return YA(d)?(t.consume(d),a):d===64?(t.consume(d),c):n(d)}function c(d){return d===46?t.check(yxe,f,h)(d):d===45||d===95||gr(d)?(s=!0,t.consume(d),c):f(d)}function h(d){return t.consume(d),i=!0,c}function f(d){return s&&i&&Or(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function xxe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!BU.call(r,r.previous)||oR(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(gxe,t.attempt(PU,t.attempt(DU,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function wxe(t,e,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&jU.call(r,r.previous)&&!oR(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(Or(d)&&i.length<5)return i+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(d),c}return n(d)}function c(d){return d===47?(t.consume(d),s?h:(s=!0,c)):n(d)}function h(d){return d===null||Uv(d)||Mt(d)||Rc(d)||a1(d)?n(d):t.attempt(PU,t.attempt(DU,f),n)(d)}function f(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function Sxe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function _xe(t,e,n){let r,i,s;return o;function o(h){return h===46||h===95?t.check(LU,c,a)(h):h===null||Mt(h)||Rc(h)||h!==45&&a1(h)?c(h):(s=!0,t.consume(h),o)}function a(h){return h===95?r=!0:(i=r,r=void 0),t.consume(h),o}function c(h){return i||r||!s?n(h):e(h)}}function Cxe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(LU,e,s)(o):o===null||Mt(o)||Rc(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function Axe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||Mt(a)||Rc(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||Mt(a)||Rc(a)?e(a):r(a)}function s(a){return Or(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Or(a)?(t.consume(a),o):n(a)}}function kxe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return gr(s)?n(s):e(s)}}function BU(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Mt(t)}function jU(t){return!Or(t)}function $U(t){return!(t===47||YA(t))}function YA(t){return t===43||t===45||t===46||t===95||gr(t)}function oR(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function rf(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&gr(t.charCodeAt(n+1))&&gr(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function u1(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const XA={name:"attention",resolveAll:Exe,tokenize:Txe};function Exe(t,e){let n=-1,r,i,s,o,a,c,h,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},m={...t[n][1].start};X4(d,-c),X4(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=qi(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=qi(h,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),h=qi(h,u1(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=qi(h,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,h=qi(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,ki(t,r-1,n-r+3,h),n=r+h.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Txe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Vh(r);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),a(c)}function a(c){if(c===s)return t.consume(c),a;const h=t.exit("attentionSequence"),f=Vh(c),d=!f||f===2&&i||n.includes(c),m=!i||i===2&&f||n.includes(r);return h._open=!!(s===42?d:d&&(i||!m)),h._close=!!(s===42?m:m&&(f||!d)),e(c)}}function X4(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Rxe={name:"autolink",tokenize:Mxe};function Mxe(t,e,n){let r=0;return i;function i(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(y){return Or(y)?(t.consume(y),o):y===64?n(y):h(y)}function o(y){return y===43||y===45||y===46||gr(y)?(r=1,a(y)):h(y)}function a(y){return y===58?(t.consume(y),r=0,c):(y===43||y===45||y===46||gr(y))&&r++<32?(t.consume(y),a):(r=0,h(y))}function c(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||Uv(y)?n(y):(t.consume(y),c)}function h(y){return y===64?(t.consume(y),f):Sbe(y)?(t.consume(y),h):n(y)}function f(y){return gr(y)?d(y):n(y)}function d(y){return y===46?(t.consume(y),r=0,f):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):m(y)}function m(y){if((y===45||gr(y))&&r++<63){const b=y===45?m:d;return t.consume(y),b}return n(y)}}function ut(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return lt(c)?(t.enter(n),a(c)):e(c)}function a(c){return lt(c)&&s++<i?(t.consume(c),a):(t.exit(n),e(c))}}const Jm={partial:!0,tokenize:Oxe};function Oxe(t,e,n){return r;function r(s){return lt(s)?ut(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||je(s)?e(s):n(s)}}const VU={continuation:{tokenize:Dxe},exit:Lxe,name:"blockQuote",tokenize:Pxe};function Pxe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return lt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Dxe(t,e,n){const r=this;return i;function i(o){return lt(o)?ut(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(VU,e,n)(o)}}function Lxe(t){t.exit("blockQuote")}const FU={name:"characterEscape",tokenize:Ixe};function Ixe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return Cbe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const zU={name:"characterReference",tokenize:Nxe};function Nxe(t,e,n){const r=this;let i=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),c}function c(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,o=gr,f(d))}function h(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=_be,f):(t.enter("characterReferenceValue"),s=7,o=GA,f(d))}function f(d){if(d===59&&i){const m=t.exit("characterReferenceValue");return o===gr&&!sR(r.sliceSerialize(m))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),f):n(d)}}const J4={partial:!0,tokenize:jxe},Q4={concrete:!0,name:"codeFenced",tokenize:Bxe};function Bxe(t,e,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return c;function c(O){return h(O)}function h(O){const L=r.events[r.events.length-1];return s=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,a=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(O)}function f(O){return O===a?(o++,t.consume(O),f):o<3?n(O):(t.exit("codeFencedFenceSequence"),lt(O)?ut(t,d,"whitespace")(O):d(O))}function d(O){return O===null||je(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(J4,w,P)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(O))}function m(O){return O===null||je(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(O)):lt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ut(t,y,"whitespace")(O)):O===96&&O===a?n(O):(t.consume(O),m)}function y(O){return O===null||je(O)?d(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(O))}function b(O){return O===null||je(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(O)):O===96&&O===a?n(O):(t.consume(O),b)}function w(O){return t.attempt(i,P,S)(O)}function S(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),_}function _(O){return s>0&&lt(O)?ut(t,A,"linePrefix",s+1)(O):A(O)}function A(O){return O===null||je(O)?t.check(J4,w,P)(O):(t.enter("codeFlowValue"),k(O))}function k(O){return O===null||je(O)?(t.exit("codeFlowValue"),A(O)):(t.consume(O),k)}function P(O){return t.exit("codeFenced"),e(O)}function M(O,L,N){let z=0;return j;function j(ie){return O.enter("lineEnding"),O.consume(ie),O.exit("lineEnding"),U}function U(ie){return O.enter("codeFencedFence"),lt(ie)?ut(O,W,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ie):W(ie)}function W(ie){return ie===a?(O.enter("codeFencedFenceSequence"),X(ie)):N(ie)}function X(ie){return ie===a?(z++,O.consume(ie),X):z>=o?(O.exit("codeFencedFenceSequence"),lt(ie)?ut(O,G,"whitespace")(ie):G(ie)):N(ie)}function G(ie){return ie===null||je(ie)?(O.exit("codeFencedFence"),L(ie)):N(ie)}}}function jxe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const c_={name:"codeIndented",tokenize:Vxe},$xe={partial:!0,tokenize:Fxe};function Vxe(t,e,n){const r=this;return i;function i(h){return t.enter("codeIndented"),ut(t,s,"linePrefix",5)(h)}function s(h){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(h):n(h)}function o(h){return h===null?c(h):je(h)?t.attempt($xe,o,c)(h):(t.enter("codeFlowValue"),a(h))}function a(h){return h===null||je(h)?(t.exit("codeFlowValue"),o(h)):(t.consume(h),a)}function c(h){return t.exit("codeIndented"),e(h)}}function Fxe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):ut(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):je(o)?i(o):n(o)}}const zxe={name:"codeText",previous:Uxe,resolve:Hxe,tokenize:qxe};function Hxe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Uxe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qxe(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),c):d===96?(s=t.enter("codeTextSequence"),i=0,f(d)):je(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("codeTextData"),h(d))}function h(d){return d===null||d===32||d===96||je(d)?(t.exit("codeTextData"),c(d)):(t.consume(d),h)}function f(d){return d===96?(t.consume(d),i++,f):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",h(d))}}class Wxe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Nd(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Nd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Nd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Nd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Nd(this.left,n.reverse())}}}function Nd(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function HU(t){const e={};let n=-1,r,i,s,o,a,c,h;const f=new Wxe(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Gxe(f,n)),n=e[n],h=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...f.get(i)[1].start},a=f.slice(i,n),a.unshift(r),f.splice(i,n-i+1,a))}}return ki(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!h}function Gxe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,c=[],h={};let f,d,m=-1,y=n,b=0,w=0;const S=[w];for(;y;){for(;t.get(++i)[1]!==y;);s.push(i),y._tokenizer||(f=r.sliceStream(y),y.next||f.push(null),d&&o.defineSkip(y.start),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=y,y=y.next}for(y=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(w=m+1,S.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(o.events=[],y?(y._tokenizer=void 0,y.previous=void 0):S.pop(),m=S.length;m--;){const _=a.slice(S[m],S[m+1]),A=s.pop();c.push([A,A+_.length-1]),t.splice(A,2,_)}for(c.reverse(),m=-1;++m<c.length;)h[b+c[m][0]]=b+c[m][1],b+=c[m][1]-c[m][0]-1;return h}const Kxe={resolve:Xxe,tokenize:Jxe},Yxe={partial:!0,tokenize:Qxe};function Xxe(t){return HU(t),t}function Jxe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):je(a)?t.check(Yxe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Qxe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ut(t,s,"linePrefix")}function s(o){if(o===null||je(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function UU(t,e,n,r,i,s,o,a,c){const h=c||Number.POSITIVE_INFINITY;let f=0;return d;function d(_){return _===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(_),t.exit(s),m):_===null||_===32||_===41||Uv(_)?n(_):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),w(_))}function m(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),y(_))}function y(_){return _===62?(t.exit("chunkString"),t.exit(a),m(_)):_===null||_===60||je(_)?n(_):(t.consume(_),_===92?b:y)}function b(_){return _===60||_===62||_===92?(t.consume(_),y):y(_)}function w(_){return!f&&(_===null||_===41||Mt(_))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(_)):f<h&&_===40?(t.consume(_),f++,w):_===41?(t.consume(_),f--,w):_===null||_===32||_===40||Uv(_)?n(_):(t.consume(_),_===92?S:w)}function S(_){return _===40||_===41||_===92?(t.consume(_),w):w(_)}}function qU(t,e,n,r,i,s){const o=this;let a=0,c;return h;function h(y){return t.enter(r),t.enter(i),t.consume(y),t.exit(i),t.enter(s),f}function f(y){return a>999||y===null||y===91||y===93&&!c||y===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(y):y===93?(t.exit(s),t.enter(i),t.consume(y),t.exit(i),t.exit(r),e):je(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===null||y===91||y===93||je(y)||a++>999?(t.exit("chunkString"),f(y)):(t.consume(y),c||(c=!lt(y)),y===92?m:d)}function m(y){return y===91||y===92||y===93?(t.consume(y),a++,d):d(y)}}function WU(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,c):n(m)}function c(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),h(m))}function h(m){return m===o?(t.exit(s),c(o)):m===null?n(m):je(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),ut(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===o||m===null||je(m)?(t.exit("chunkString"),h(m)):(t.consume(m),m===92?d:f)}function d(m){return m===o||m===92?(t.consume(m),f):f(m)}}function Ip(t,e){let n;return r;function r(i){return je(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):lt(i)?ut(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const Zxe={name:"definition",tokenize:t1e},e1e={partial:!0,tokenize:n1e};function t1e(t,e,n){const r=this;let i;return s;function s(y){return t.enter("definition"),o(y)}function o(y){return qU.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function a(y){return i=ys(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),c):n(y)}function c(y){return Mt(y)?Ip(t,h)(y):h(y)}function h(y){return UU(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function f(y){return t.attempt(e1e,d,d)(y)}function d(y){return lt(y)?ut(t,m,"whitespace")(y):m(y)}function m(y){return y===null||je(y)?(t.exit("definition"),r.parser.defined.push(i),e(y)):n(y)}}function n1e(t,e,n){return r;function r(a){return Mt(a)?Ip(t,i)(a):n(a)}function i(a){return WU(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return lt(a)?ut(t,o,"whitespace")(a):o(a)}function o(a){return a===null||je(a)?e(a):n(a)}}const r1e={name:"hardBreakEscape",tokenize:i1e};function i1e(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return je(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const s1e={name:"headingAtx",resolve:o1e,tokenize:a1e};function o1e(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ki(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function a1e(t,e,n){let r=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(t.consume(f),o):f===null||Mt(f)?(t.exit("atxHeadingSequence"),a(f)):n(f)}function a(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||je(f)?(t.exit("atxHeading"),e(f)):lt(f)?ut(t,a,"whitespace")(f):(t.enter("atxHeadingText"),h(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),a(f))}function h(f){return f===null||f===35||Mt(f)?(t.exit("atxHeadingText"),a(f)):(t.consume(f),h)}}const l1e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Z4=["pre","script","style","textarea"],c1e={concrete:!0,name:"htmlFlow",resolveTo:f1e,tokenize:d1e},u1e={partial:!0,tokenize:m1e},h1e={partial:!0,tokenize:p1e};function f1e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function d1e(t,e,n){const r=this;let i,s,o,a,c;return h;function h(I){return f(I)}function f(I){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(I),d}function d(I){return I===33?(t.consume(I),m):I===47?(t.consume(I),s=!0,w):I===63?(t.consume(I),i=3,r.interrupt?e:T):Or(I)?(t.consume(I),o=String.fromCharCode(I),S):n(I)}function m(I){return I===45?(t.consume(I),i=2,y):I===91?(t.consume(I),i=5,a=0,b):Or(I)?(t.consume(I),i=4,r.interrupt?e:T):n(I)}function y(I){return I===45?(t.consume(I),r.interrupt?e:T):n(I)}function b(I){const pe="CDATA[";return I===pe.charCodeAt(a++)?(t.consume(I),a===pe.length?r.interrupt?e:W:b):n(I)}function w(I){return Or(I)?(t.consume(I),o=String.fromCharCode(I),S):n(I)}function S(I){if(I===null||I===47||I===62||Mt(I)){const pe=I===47,Ee=o.toLowerCase();return!pe&&!s&&Z4.includes(Ee)?(i=1,r.interrupt?e(I):W(I)):l1e.includes(o.toLowerCase())?(i=6,pe?(t.consume(I),_):r.interrupt?e(I):W(I)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):s?A(I):k(I))}return I===45||gr(I)?(t.consume(I),o+=String.fromCharCode(I),S):n(I)}function _(I){return I===62?(t.consume(I),r.interrupt?e:W):n(I)}function A(I){return lt(I)?(t.consume(I),A):j(I)}function k(I){return I===47?(t.consume(I),j):I===58||I===95||Or(I)?(t.consume(I),P):lt(I)?(t.consume(I),k):j(I)}function P(I){return I===45||I===46||I===58||I===95||gr(I)?(t.consume(I),P):M(I)}function M(I){return I===61?(t.consume(I),O):lt(I)?(t.consume(I),M):k(I)}function O(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),c=I,L):lt(I)?(t.consume(I),O):N(I)}function L(I){return I===c?(t.consume(I),c=null,z):I===null||je(I)?n(I):(t.consume(I),L)}function N(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||Mt(I)?M(I):(t.consume(I),N)}function z(I){return I===47||I===62||lt(I)?k(I):n(I)}function j(I){return I===62?(t.consume(I),U):n(I)}function U(I){return I===null||je(I)?W(I):lt(I)?(t.consume(I),U):n(I)}function W(I){return I===45&&i===2?(t.consume(I),F):I===60&&i===1?(t.consume(I),Y):I===62&&i===4?(t.consume(I),Z):I===63&&i===3?(t.consume(I),T):I===93&&i===5?(t.consume(I),se):je(I)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(u1e,ue,X)(I)):I===null||je(I)?(t.exit("htmlFlowData"),X(I)):(t.consume(I),W)}function X(I){return t.check(h1e,G,ue)(I)}function G(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),ie}function ie(I){return I===null||je(I)?X(I):(t.enter("htmlFlowData"),W(I))}function F(I){return I===45?(t.consume(I),T):W(I)}function Y(I){return I===47?(t.consume(I),o="",q):W(I)}function q(I){if(I===62){const pe=o.toLowerCase();return Z4.includes(pe)?(t.consume(I),Z):W(I)}return Or(I)&&o.length<8?(t.consume(I),o+=String.fromCharCode(I),q):W(I)}function se(I){return I===93?(t.consume(I),T):W(I)}function T(I){return I===62?(t.consume(I),Z):I===45&&i===2?(t.consume(I),T):W(I)}function Z(I){return I===null||je(I)?(t.exit("htmlFlowData"),ue(I)):(t.consume(I),Z)}function ue(I){return t.exit("htmlFlow"),e(I)}}function p1e(t,e,n){const r=this;return i;function i(o){return je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function m1e(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Jm,e,n)}}const g1e={name:"htmlText",tokenize:y1e};function y1e(t,e,n){const r=this;let i,s,o;return a;function a(T){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(T),c}function c(T){return T===33?(t.consume(T),h):T===47?(t.consume(T),M):T===63?(t.consume(T),k):Or(T)?(t.consume(T),N):n(T)}function h(T){return T===45?(t.consume(T),f):T===91?(t.consume(T),s=0,b):Or(T)?(t.consume(T),A):n(T)}function f(T){return T===45?(t.consume(T),y):n(T)}function d(T){return T===null?n(T):T===45?(t.consume(T),m):je(T)?(o=d,Y(T)):(t.consume(T),d)}function m(T){return T===45?(t.consume(T),y):d(T)}function y(T){return T===62?F(T):T===45?m(T):d(T)}function b(T){const Z="CDATA[";return T===Z.charCodeAt(s++)?(t.consume(T),s===Z.length?w:b):n(T)}function w(T){return T===null?n(T):T===93?(t.consume(T),S):je(T)?(o=w,Y(T)):(t.consume(T),w)}function S(T){return T===93?(t.consume(T),_):w(T)}function _(T){return T===62?F(T):T===93?(t.consume(T),_):w(T)}function A(T){return T===null||T===62?F(T):je(T)?(o=A,Y(T)):(t.consume(T),A)}function k(T){return T===null?n(T):T===63?(t.consume(T),P):je(T)?(o=k,Y(T)):(t.consume(T),k)}function P(T){return T===62?F(T):k(T)}function M(T){return Or(T)?(t.consume(T),O):n(T)}function O(T){return T===45||gr(T)?(t.consume(T),O):L(T)}function L(T){return je(T)?(o=L,Y(T)):lt(T)?(t.consume(T),L):F(T)}function N(T){return T===45||gr(T)?(t.consume(T),N):T===47||T===62||Mt(T)?z(T):n(T)}function z(T){return T===47?(t.consume(T),F):T===58||T===95||Or(T)?(t.consume(T),j):je(T)?(o=z,Y(T)):lt(T)?(t.consume(T),z):F(T)}function j(T){return T===45||T===46||T===58||T===95||gr(T)?(t.consume(T),j):U(T)}function U(T){return T===61?(t.consume(T),W):je(T)?(o=U,Y(T)):lt(T)?(t.consume(T),U):z(T)}function W(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),i=T,X):je(T)?(o=W,Y(T)):lt(T)?(t.consume(T),W):(t.consume(T),G)}function X(T){return T===i?(t.consume(T),i=void 0,ie):T===null?n(T):je(T)?(o=X,Y(T)):(t.consume(T),X)}function G(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||Mt(T)?z(T):(t.consume(T),G)}function ie(T){return T===47||T===62||Mt(T)?z(T):n(T)}function F(T){return T===62?(t.consume(T),t.exit("htmlTextData"),t.exit("htmlText"),e):n(T)}function Y(T){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),q}function q(T){return lt(T)?ut(t,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):se(T)}function se(T){return t.enter("htmlTextData"),o(T)}}const aR={name:"labelEnd",resolveAll:w1e,resolveTo:S1e,tokenize:_1e},b1e={tokenize:C1e},v1e={tokenize:A1e},x1e={tokenize:k1e};function w1e(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&ki(t,0,t.length,n),t}function S1e(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",c,e],["enter",h,e]],a=qi(a,t.slice(s+1,s+r+3)),a=qi(a,[["enter",f,e]]),a=qi(a,u1(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=qi(a,[["exit",f,e],t[o-2],t[o-1],["exit",h,e]]),a=qi(a,t.slice(o+1)),a=qi(a,[["exit",c,e]]),ki(t,s,t.length,a),t}function _1e(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?d(m):(o=r.parser.defined.includes(ys(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),c):n(m)}function c(m){return m===40?t.attempt(b1e,f,o?f:d)(m):m===91?t.attempt(v1e,f,o?h:d)(m):o?f(m):d(m)}function h(m){return t.attempt(x1e,f,d)(m)}function f(m){return e(m)}function d(m){return s._balanced=!0,n(m)}}function C1e(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return Mt(d)?Ip(t,s)(d):s(d)}function s(d){return d===41?f(d):UU(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Mt(d)?Ip(t,c)(d):f(d)}function a(d){return n(d)}function c(d){return d===34||d===39||d===40?WU(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function h(d){return Mt(d)?Ip(t,f)(d):f(d)}function f(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function A1e(t,e,n){const r=this;return i;function i(a){return qU.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ys(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function k1e(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const E1e={name:"labelStartImage",resolveAll:aR.resolveAll,tokenize:T1e};function T1e(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const R1e={name:"labelStartLink",resolveAll:aR.resolveAll,tokenize:M1e};function M1e(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const u_={name:"lineEnding",tokenize:O1e};function O1e(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),ut(t,e,"linePrefix")}}const Ib={name:"thematicBreak",tokenize:P1e};function P1e(t,e,n){let r=0,i;return s;function s(h){return t.enter("thematicBreak"),o(h)}function o(h){return i=h,a(h)}function a(h){return h===i?(t.enter("thematicBreakSequence"),c(h)):r>=3&&(h===null||je(h))?(t.exit("thematicBreak"),e(h)):n(h)}function c(h){return h===i?(t.consume(h),r++,c):(t.exit("thematicBreakSequence"),lt(h)?ut(t,a,"whitespace")(h):a(h))}}const Hr={continuation:{tokenize:N1e},exit:j1e,name:"list",tokenize:I1e},D1e={partial:!0,tokenize:$1e},L1e={partial:!0,tokenize:B1e};function I1e(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(y){const b=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:GA(y)){if(r.containerState.type||(r.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Ib,n,h)(y):h(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(y)}return n(y)}function c(y){return GA(y)&&++o<10?(t.consume(y),c):(!r.interrupt||o<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),h(y)):n(y)}function h(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(Jm,r.interrupt?n:f,t.attempt(D1e,m,d))}function f(y){return r.containerState.initialBlankLine=!0,s++,m(y)}function d(y){return lt(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),m):n(y)}function m(y){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function N1e(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Jm,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ut(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!lt(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(L1e,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ut(t,t.attempt(Hr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function B1e(t,e,n){const r=this;return ut(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function j1e(t){t.exit(this.containerState.type)}function $1e(t,e,n){const r=this;return ut(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!lt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const e5={name:"setextUnderline",resolveTo:V1e,tokenize:F1e};function V1e(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function F1e(t,e,n){const r=this;let i;return s;function s(h){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=h,o(h)):n(h)}function o(h){return t.enter("setextHeadingLineSequence"),a(h)}function a(h){return h===i?(t.consume(h),a):(t.exit("setextHeadingLineSequence"),lt(h)?ut(t,c,"lineSuffix")(h):c(h))}function c(h){return h===null||je(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const z1e={tokenize:X1e,partial:!0};function H1e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:G1e,continuation:{tokenize:K1e},exit:Y1e}},text:{91:{name:"gfmFootnoteCall",tokenize:W1e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:U1e,resolveTo:q1e}}}}function U1e(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return a;function a(c){if(!o||!o._balanced)return n(c);const h=ys(r.sliceSerialize({start:o.end,end:r.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function q1e(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function W1e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(d){if(s>999||d===93&&!o||d===null||d===91||Mt(d))return n(d);if(d===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(ys(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return Mt(d)||(o=!0),s++,t.consume(d),d===92?f:h}function f(d){return d===91||d===92||d===93?(t.consume(d),s++,h):h(d)}}function G1e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return c;function c(b){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(b){return b===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(b)}function f(b){if(o>999||b===93&&!a||b===null||b===91||Mt(b))return n(b);if(b===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return s=ys(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(b),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return Mt(b)||(a=!0),o++,t.consume(b),b===92?d:f}function d(b){return b===91||b===92||b===93?(t.consume(b),o++,f):f(b)}function m(b){return b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),i.includes(s)||i.push(s),ut(t,y,"gfmFootnoteDefinitionWhitespace")):n(b)}function y(b){return e(b)}}function K1e(t,e,n){return t.check(Jm,e,t.attempt(z1e,e,n))}function Y1e(t){t.exit("gfmFootnoteDefinition")}function X1e(t,e,n){const r=this;return ut(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function J1e(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let h=c;for(;h--;)if(o[h][0]==="exit"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[h][1].end.offset-o[h][1].start.offset){o[c][1].type="strikethroughSequence",o[h][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[h][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[h][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",f,a],["enter",o[h][1],a],["exit",o[h][1],a],["enter",d,a]],y=a.parser.constructs.insideSpan.null;y&&ki(m,m.length,0,u1(y,o.slice(h+1,c),a)),ki(m,m.length,0,[["exit",d,a],["enter",o[c][1],a],["exit",o[c][1],a],["exit",f,a]]),ki(o,h-1,c-h+3,m),c=h+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,a,c){const h=this.previous,f=this.events;let d=0;return m;function m(b){return h===126&&f[f.length-1][1].type!=="characterEscape"?c(b):(o.enter("strikethroughSequenceTemporary"),y(b))}function y(b){const w=Vh(h);if(b===126)return d>1?c(b):(o.consume(b),d++,y);if(d<2&&!n)return c(b);const S=o.exit("strikethroughSequenceTemporary"),_=Vh(b);return S._open=!_||_===2&&!!w,S._close=!w||w===2&&!!_,a(b)}}}class Q1e{constructor(){this.map=[]}add(e,n,r){Z1e(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function Z1e(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function ewe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function twe(){return{flow:{null:{name:"table",tokenize:nwe,resolveAll:rwe}}}}function nwe(t,e,n){const r=this;let i=0,s=0,o;return a;function a(j){let U=r.events.length-1;for(;U>-1;){const G=r.events[U][1].type;if(G==="lineEnding"||G==="linePrefix")U--;else break}const W=U>-1?r.events[U][1].type:null,X=W==="tableHead"||W==="tableRow"?O:c;return X===O&&r.parser.lazy[r.now().line]?n(j):X(j)}function c(j){return t.enter("tableHead"),t.enter("tableRow"),h(j)}function h(j){return j===124||(o=!0,s+=1),f(j)}function f(j){return j===null?n(j):je(j)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),y):n(j):lt(j)?ut(t,f,"whitespace")(j):(s+=1,o&&(o=!1,i+=1),j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),d(j)))}function d(j){return j===null||j===124||Mt(j)?(t.exit("data"),f(j)):(t.consume(j),j===92?m:d)}function m(j){return j===92||j===124?(t.consume(j),d):d(j)}function y(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(t.enter("tableDelimiterRow"),o=!1,lt(j)?ut(t,b,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):b(j))}function b(j){return j===45||j===58?S(j):j===124?(o=!0,t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),w):M(j)}function w(j){return lt(j)?ut(t,S,"whitespace")(j):S(j)}function S(j){return j===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),_):j===45?(s+=1,_(j)):j===null||je(j)?P(j):M(j)}function _(j){return j===45?(t.enter("tableDelimiterFiller"),A(j)):M(j)}function A(j){return j===45?(t.consume(j),A):j===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(j))}function k(j){return lt(j)?ut(t,P,"whitespace")(j):P(j)}function P(j){return j===124?b(j):j===null||je(j)?!o||i!==s?M(j):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(j)):M(j)}function M(j){return n(j)}function O(j){return t.enter("tableRow"),L(j)}function L(j){return j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),L):j===null||je(j)?(t.exit("tableRow"),e(j)):lt(j)?ut(t,L,"whitespace")(j):(t.enter("data"),N(j))}function N(j){return j===null||j===124||Mt(j)?(t.exit("data"),L(j)):(t.consume(j),j===92?z:N)}function z(j){return j===92||j===124?(t.consume(j),N):N(j)}}function rwe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,c=0,h,f,d;const m=new Q1e;for(;++n<t.length;){const y=t[n],b=y[1];y[0]==="enter"?b.type==="tableHead"?(a=!1,c!==0&&(t5(m,e,c,h,f),f=void 0,c=0),h={type:"table",start:Object.assign({},b.start),end:Object.assign({},b.end)},m.add(n,0,[["enter",h,e]])):b.type==="tableRow"||b.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},b.start),end:Object.assign({},b.end)},m.add(n,0,[["enter",f,e]])),i=b.type==="tableDelimiterRow"?2:f?3:1):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Vy(m,e,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):b.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=Vy(m,e,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):b.type==="tableHead"?(a=!0,c=n):b.type==="tableRow"||b.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=Vy(m,e,s,i,n,d)):o[1]!==0&&(d=Vy(m,e,o,i,n,d)),i=0):i&&(b.type==="data"||b.type==="tableDelimiterMarker"||b.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&t5(m,e,c,h,f),m.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=ewe(e.events,n))}return t}function Vy(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Zu(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Zu(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const h=Zu(e.events,n[2]),f=Zu(e.events,n[3]),d={type:a,start:Object.assign({},h),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const m=e.events[n[2]],y=e.events[n[3]];if(m[1].end=Object.assign({},y[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const b=n[2]+1,w=n[3]-n[2]-1;t.add(b,w,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return i!==void 0&&(s.end=Object.assign({},Zu(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function t5(t,e,n,r,i){const s=[],o=Zu(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Zu(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const iwe={name:"tasklistCheck",tokenize:owe};function swe(){return{text:{91:iwe}}}function owe(t,e,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return Mt(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(c)}function a(c){return je(c)?e(c):lt(c)?t.check({tokenize:awe},e,n)(c):n(c)}}function awe(t,e,n){return ut(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function lwe(t){return OU([bxe(),H1e(),J1e(t),twe(),swe()])}const cwe={};function uwe(t){const e=this,n=t||cwe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(lwe(n)),s.push(fxe()),o.push(dxe(n))}function GU(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const hwe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fwe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dwe={};function n5(t,e){return(dwe.jsx?fwe:hwe).test(t)}const pwe=/[ \t\n\f\r]/g;function h1(t){return typeof t=="object"?t.type==="text"?r5(t.value):!1:r5(t)}function r5(t){return t.replace(pwe,"")===""}class Qm{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Qm.prototype.normal={};Qm.prototype.property={};Qm.prototype.space=void 0;function KU(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Qm(n,r,e)}function JA(t){return t.toLowerCase()}class Zr{constructor(e,n){this.attribute=n,this.property=e}}Zr.prototype.attribute="";Zr.prototype.booleanish=!1;Zr.prototype.boolean=!1;Zr.prototype.commaOrSpaceSeparated=!1;Zr.prototype.commaSeparated=!1;Zr.prototype.defined=!1;Zr.prototype.mustUseProperty=!1;Zr.prototype.number=!1;Zr.prototype.overloadedBoolean=!1;Zr.prototype.property="";Zr.prototype.spaceSeparated=!1;Zr.prototype.space=void 0;let mwe=0;const Je=jc(),cn=jc(),QA=jc(),ge=jc(),Lt=jc(),Ah=jc(),xi=jc();function jc(){return 2**++mwe}const ZA=Object.freeze(Object.defineProperty({__proto__:null,boolean:Je,booleanish:cn,commaOrSpaceSeparated:xi,commaSeparated:Ah,number:ge,overloadedBoolean:QA,spaceSeparated:Lt},Symbol.toStringTag,{value:"Module"})),h_=Object.keys(ZA);class lR extends Zr{constructor(e,n,r,i){let s=-1;if(super(e,n),i5(this,"space",i),typeof r=="number")for(;++s<h_.length;){const o=h_[s];i5(this,h_[s],(r&ZA[o])===ZA[o])}}}lR.prototype.defined=!0;function i5(t,e,n){n&&(t[e]=n)}function sf(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new lR(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[JA(r)]=r,n[JA(s.attribute)]=r}return new Qm(e,n,t.space)}const YU=sf({properties:{ariaActiveDescendant:null,ariaAtomic:cn,ariaAutoComplete:null,ariaBusy:cn,ariaChecked:cn,ariaColCount:ge,ariaColIndex:ge,ariaColSpan:ge,ariaControls:Lt,ariaCurrent:null,ariaDescribedBy:Lt,ariaDetails:null,ariaDisabled:cn,ariaDropEffect:Lt,ariaErrorMessage:null,ariaExpanded:cn,ariaFlowTo:Lt,ariaGrabbed:cn,ariaHasPopup:null,ariaHidden:cn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Lt,ariaLevel:ge,ariaLive:null,ariaModal:cn,ariaMultiLine:cn,ariaMultiSelectable:cn,ariaOrientation:null,ariaOwns:Lt,ariaPlaceholder:null,ariaPosInSet:ge,ariaPressed:cn,ariaReadOnly:cn,ariaRelevant:null,ariaRequired:cn,ariaRoleDescription:Lt,ariaRowCount:ge,ariaRowIndex:ge,ariaRowSpan:ge,ariaSelected:cn,ariaSetSize:ge,ariaSort:null,ariaValueMax:ge,ariaValueMin:ge,ariaValueNow:ge,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function XU(t,e){return e in t?t[e]:e}function JU(t,e){return XU(t,e.toLowerCase())}const gwe=sf({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ah,acceptCharset:Lt,accessKey:Lt,action:null,allow:null,allowFullScreen:Je,allowPaymentRequest:Je,allowUserMedia:Je,alt:null,as:null,async:Je,autoCapitalize:null,autoComplete:Lt,autoFocus:Je,autoPlay:Je,blocking:Lt,capture:null,charSet:null,checked:Je,cite:null,className:Lt,cols:ge,colSpan:null,content:null,contentEditable:cn,controls:Je,controlsList:Lt,coords:ge|Ah,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Je,defer:Je,dir:null,dirName:null,disabled:Je,download:QA,draggable:cn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Je,formTarget:null,headers:Lt,height:ge,hidden:QA,high:ge,href:null,hrefLang:null,htmlFor:Lt,httpEquiv:Lt,id:null,imageSizes:null,imageSrcSet:null,inert:Je,inputMode:null,integrity:null,is:null,isMap:Je,itemId:null,itemProp:Lt,itemRef:Lt,itemScope:Je,itemType:Lt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Je,low:ge,manifest:null,max:null,maxLength:ge,media:null,method:null,min:null,minLength:ge,multiple:Je,muted:Je,name:null,nonce:null,noModule:Je,noValidate:Je,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Je,optimum:ge,pattern:null,ping:Lt,placeholder:null,playsInline:Je,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Je,referrerPolicy:null,rel:Lt,required:Je,reversed:Je,rows:ge,rowSpan:ge,sandbox:Lt,scope:null,scoped:Je,seamless:Je,selected:Je,shadowRootClonable:Je,shadowRootDelegatesFocus:Je,shadowRootMode:null,shape:null,size:ge,sizes:null,slot:null,span:ge,spellCheck:cn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ge,step:null,style:null,tabIndex:ge,target:null,title:null,translate:null,type:null,typeMustMatch:Je,useMap:null,value:cn,width:ge,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Lt,axis:null,background:null,bgColor:null,border:ge,borderColor:null,bottomMargin:ge,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Je,declare:Je,event:null,face:null,frame:null,frameBorder:null,hSpace:ge,leftMargin:ge,link:null,longDesc:null,lowSrc:null,marginHeight:ge,marginWidth:ge,noResize:Je,noHref:Je,noShade:Je,noWrap:Je,object:null,profile:null,prompt:null,rev:null,rightMargin:ge,rules:null,scheme:null,scrolling:cn,standby:null,summary:null,text:null,topMargin:ge,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ge,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Je,disableRemotePlayback:Je,prefix:null,property:null,results:ge,security:null,unselectable:null},space:"html",transform:JU}),ywe=sf({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:xi,accentHeight:ge,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ge,amplitude:ge,arabicForm:null,ascent:ge,attributeName:null,attributeType:null,azimuth:ge,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ge,by:null,calcMode:null,capHeight:ge,className:Lt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ge,diffuseConstant:ge,direction:null,display:null,dur:null,divisor:ge,dominantBaseline:null,download:Je,dx:null,dy:null,edgeMode:null,editable:null,elevation:ge,enableBackground:null,end:null,event:null,exponent:ge,externalResourcesRequired:null,fill:null,fillOpacity:ge,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ah,g2:Ah,glyphName:Ah,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ge,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ge,horizOriginX:ge,horizOriginY:ge,id:null,ideographic:ge,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ge,k:ge,k1:ge,k2:ge,k3:ge,k4:ge,kernelMatrix:xi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ge,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ge,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ge,overlineThickness:ge,paintOrder:null,panose1:null,path:null,pathLength:ge,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Lt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ge,pointsAtY:ge,pointsAtZ:ge,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:xi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:xi,rev:xi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:xi,requiredFeatures:xi,requiredFonts:xi,requiredFormats:xi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ge,specularExponent:ge,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ge,strikethroughThickness:ge,string:null,stroke:null,strokeDashArray:xi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ge,strokeOpacity:ge,strokeWidth:null,style:null,surfaceScale:ge,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:xi,tabIndex:ge,tableValues:null,target:null,targetX:ge,targetY:ge,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:xi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ge,underlineThickness:ge,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ge,values:null,vAlphabetic:ge,vMathematical:ge,vectorEffect:null,vHanging:ge,vIdeographic:ge,version:null,vertAdvY:ge,vertOriginX:ge,vertOriginY:ge,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ge,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:XU}),QU=sf({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),ZU=sf({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:JU}),eq=sf({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),bwe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},vwe=/[A-Z]/g,s5=/-[a-z]/g,xwe=/^data[-\w.:]+$/i;function tq(t,e){const n=JA(e);let r=e,i=Zr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&xwe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(s5,Swe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!s5.test(s)){let o=s.replace(vwe,wwe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=lR}return new i(r,e)}function wwe(t){return"-"+t.toLowerCase()}function Swe(t){return t.charAt(1).toUpperCase()}const nq=KU([YU,gwe,QU,ZU,eq],"html"),Zm=KU([YU,ywe,QU,ZU,eq],"svg");function rq(t){return t.join(" ").trim()}var Vu={},f_,o5;function _we(){if(o5)return f_;o5=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,h="/",f="*",d="",m="comment",y="declaration";f_=function(w,S){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];S=S||{};var _=1,A=1;function k(X){var G=X.match(e);G&&(_+=G.length);var ie=X.lastIndexOf(c);A=~ie?X.length-ie:A+X.length}function P(){var X={line:_,column:A};return function(G){return G.position=new M(X),N(),G}}function M(X){this.start=X,this.end={line:_,column:A},this.source=S.source}M.prototype.content=w;function O(X){var G=new Error(S.source+":"+_+":"+A+": "+X);if(G.reason=X,G.filename=S.source,G.line=_,G.column=A,G.source=w,!S.silent)throw G}function L(X){var G=X.exec(w);if(G){var ie=G[0];return k(ie),w=w.slice(ie.length),G}}function N(){L(n)}function z(X){var G;for(X=X||[];G=j();)G!==!1&&X.push(G);return X}function j(){var X=P();if(!(h!=w.charAt(0)||f!=w.charAt(1))){for(var G=2;d!=w.charAt(G)&&(f!=w.charAt(G)||h!=w.charAt(G+1));)++G;if(G+=2,d===w.charAt(G-1))return O("End of comment missing");var ie=w.slice(2,G-2);return A+=2,k(ie),w=w.slice(G),A+=2,X({type:m,comment:ie})}}function U(){var X=P(),G=L(r);if(G){if(j(),!L(i))return O("property missing ':'");var ie=L(s),F=X({type:y,property:b(G[0].replace(t,d)),value:ie?b(ie[0].replace(t,d)):d});return L(o),F}}function W(){var X=[];z(X);for(var G;G=U();)G!==!1&&(X.push(G),z(X));return X}return N(),W()};function b(w){return w?w.replace(a,d):d}return f_}var a5;function Cwe(){if(a5)return Vu;a5=1;var t=Vu&&Vu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.default=n;var e=t(_we());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,e.default)(r),a=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var h=c.property,f=c.value;a?i(h,f,c):f&&(s=s||{},s[h]=f)}}),s}return Vu}var Bd={},l5;function Awe(){if(l5)return Bd;l5=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(h){return!h||n.test(h)||t.test(h)},o=function(h,f){return f.toUpperCase()},a=function(h,f){return"".concat(f,"-")},c=function(h,f){return f===void 0&&(f={}),s(h)?h:(h=h.toLowerCase(),f.reactCompat?h=h.replace(i,a):h=h.replace(r,a),h.replace(e,o))};return Bd.camelCase=c,Bd}var jd,c5;function kwe(){if(c5)return jd;c5=1;var t=jd&&jd.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(Cwe()),n=Awe();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,c){a&&c&&(o[(0,n.camelCase)(a,s)]=c)}),o}return r.default=r,jd=r,jd}var Ewe=kwe();const Twe=Mc(Ewe),iq=sq("end"),cR=sq("start");function sq(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Rwe(t){const e=cR(t),n=iq(t);if(e&&n)return{start:e,end:n}}function Np(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?u5(t.position):"start"in t||"end"in t?u5(t):"line"in t||"column"in t?ek(t):""}function ek(t){return h5(t&&t.line)+":"+h5(t&&t.column)}function u5(t){return ek(t&&t.start)+"-"+ek(t&&t.end)}function h5(t){return t&&typeof t=="number"?t:1}class xr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Np(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}xr.prototype.file="";xr.prototype.name="";xr.prototype.reason="";xr.prototype.message="";xr.prototype.stack="";xr.prototype.column=void 0;xr.prototype.line=void 0;xr.prototype.ancestors=void 0;xr.prototype.cause=void 0;xr.prototype.fatal=void 0;xr.prototype.place=void 0;xr.prototype.ruleId=void 0;xr.prototype.source=void 0;const uR={}.hasOwnProperty,Mwe=new Map,Owe=/[A-Z]/g,Pwe=new Set(["table","tbody","thead","tfoot","tr"]),Dwe=new Set(["td","th"]),oq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function aq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Fwe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Vwe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Zm:nq,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=lq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function lq(t,e,n){if(e.type==="element")return Lwe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Iwe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Bwe(t,e,n);if(e.type==="mdxjsEsm")return Nwe(t,e);if(e.type==="root")return jwe(t,e,n);if(e.type==="text")return $we(t,e)}function Lwe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Zm,t.schema=i),t.ancestors.push(e);const s=uq(t,e.tagName,!1),o=zwe(t,e);let a=fR(t,e);return Pwe.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!h1(c):!0})),cq(t,o,s,e),hR(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Iwe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}wm(t,e.position)}function Nwe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);wm(t,e.position)}function Bwe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Zm,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:uq(t,e.name,!0),o=Hwe(t,e),a=fR(t,e);return cq(t,o,s,e),hR(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function jwe(t,e,n){const r={};return hR(r,fR(t,e)),t.create(e,t.Fragment,r,n)}function $we(t,e){return e.value}function cq(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function hR(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Vwe(t,e,n){return r;function r(i,s,o,a){const h=Array.isArray(o.children)?n:e;return a?h(s,o,a):h(s,o)}}function Fwe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),c=cR(r);return e(i,s,o,a,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function zwe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&uR.call(e.properties,i)){const s=Uwe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Dwe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Hwe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else wm(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else wm(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function fR(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:Mwe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const h=i.get(c)||0;o=c+"-"+h,i.set(c,h+1)}}const a=lq(t,s,o);a!==void 0&&n.push(a)}return n}function Uwe(t,e,n){const r=tq(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?GU(n):rq(n)),r.property==="style"){let i=typeof n=="object"?n:qwe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=Wwe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?bwe[r.property]||r.property:r.attribute,n]}}function qwe(t,e){try{return Twe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new xr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=oq+"#cannot-parse-style-attribute",i}}function uq(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=n5(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=n5(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return uR.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);wm(t)}function wm(t,e){const n=new xr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=oq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Wwe(t){const e={};let n;for(n in t)uR.call(t,n)&&(e[Gwe(n)]=t[n]);return e}function Gwe(t){let e=t.replace(Owe,Kwe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Kwe(t){return"-"+t.toLowerCase()}const d_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Ywe={tokenize:Xwe};function Xwe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),ut(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return je(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const Jwe={tokenize:Qwe},f5={tokenize:Zwe};function Qwe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(k){if(r<n.length){const P=n[r];return e.containerState=P[1],t.attempt(P[0].continuation,c,h)(k)}return h(k)}function c(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&A();const P=e.events.length;let M=P,O;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){O=e.events[M][1].end;break}_(r);let L=P;for(;L<e.events.length;)e.events[L][1].end={...O},L++;return ki(e.events,M+1,0,e.events.slice(P)),e.events.length=L,h(k)}return a(k)}function h(k){if(r===n.length){if(!i)return m(k);if(i.currentConstruct&&i.currentConstruct.concrete)return b(k);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(f5,f,d)(k)}function f(k){return i&&A(),_(r),m(k)}function d(k){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,b(k)}function m(k){return e.containerState={},t.attempt(f5,y,b)(k)}function y(k){return r++,n.push([e.currentConstruct,e.containerState]),m(k)}function b(k){if(k===null){i&&A(),_(0),t.consume(k);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),w(k)}function w(k){if(k===null){S(t.exit("chunkFlow"),!0),_(0),t.consume(k);return}return je(k)?(t.consume(k),S(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(k),w)}function S(k,P){const M=e.sliceStream(k);if(P&&M.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write(M),e.parser.lazy[k.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<o&&(!i.events[O][1].end||i.events[O][1].end.offset>o))return;const L=e.events.length;let N=L,z,j;for(;N--;)if(e.events[N][0]==="exit"&&e.events[N][1].type==="chunkFlow"){if(z){j=e.events[N][1].end;break}z=!0}for(_(r),O=L;O<e.events.length;)e.events[O][1].end={...j},O++;ki(e.events,N+1,0,e.events.slice(L)),e.events.length=O}}function _(k){let P=n.length;for(;P-- >k;){const M=n[P];e.containerState=M[1],M[0].exit.call(e,t)}n.length=k}function A(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Zwe(t,e,n){return ut(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const e2e={tokenize:t2e};function t2e(t){const e=this,n=t.attempt(Jm,r,t.attempt(this.parser.constructs.flowInitial,i,ut(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Kxe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const n2e={resolveAll:fq()},r2e=hq("string"),i2e=hq("text");function hq(t){return{resolveAll:fq(t==="text"?s2e:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(f){return h(f)?s(f):a(f)}function a(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return h(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function h(f){if(f===null)return!0;const d=i[f];let m=-1;if(d)for(;++m<d.length;){const y=d[m];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function fq(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function s2e(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,c;for(;s--;){const h=i[s];if(typeof h=="string"){for(o=h.length;h.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(h===-2)c=!0,a++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const h={type:n===t.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const o2e={42:Hr,43:Hr,45:Hr,48:Hr,49:Hr,50:Hr,51:Hr,52:Hr,53:Hr,54:Hr,55:Hr,56:Hr,57:Hr,62:VU},a2e={91:Zxe},l2e={[-2]:c_,[-1]:c_,32:c_},c2e={35:s1e,42:Ib,45:[e5,Ib],60:c1e,61:e5,95:Ib,96:Q4,126:Q4},u2e={38:zU,92:FU},h2e={[-5]:u_,[-4]:u_,[-3]:u_,33:E1e,38:zU,42:XA,60:[Rxe,g1e],91:R1e,92:[r1e,FU],93:aR,95:XA,96:zxe},f2e={null:[XA,n2e]},d2e={null:[42,95]},p2e={null:[]},m2e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:d2e,contentInitial:a2e,disable:p2e,document:o2e,flow:c2e,flowInitial:l2e,insideSpan:f2e,string:u2e,text:h2e},Symbol.toStringTag,{value:"Module"}));function g2e(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const c={attempt:L(M),check:L(O),consume:A,enter:k,exit:P,interrupt:L(O,{interrupt:!0})},h={code:null,containerState:{},defineSkip:w,events:[],now:b,parser:t,previous:null,sliceSerialize:m,sliceStream:y,write:d};let f=e.tokenize.call(h,c);return e.resolveAll&&s.push(e),h;function d(U){return o=qi(o,U),S(),o[o.length-1]!==null?[]:(N(e,0),h.events=u1(s,h.events,h),h.events)}function m(U,W){return b2e(y(U),W)}function y(U){return y2e(o,U)}function b(){const{_bufferIndex:U,_index:W,line:X,column:G,offset:ie}=r;return{_bufferIndex:U,_index:W,line:X,column:G,offset:ie}}function w(U){i[U.line]=U.column,j()}function S(){let U;for(;r._index<o.length;){const W=o[r._index];if(typeof W=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<W.length;)_(W.charCodeAt(r._bufferIndex));else _(W)}}function _(U){f=f(U)}function A(U){je(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,j()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=U}function k(U,W){const X=W||{};return X.type=U,X.start=b(),h.events.push(["enter",X,h]),a.push(X),X}function P(U){const W=a.pop();return W.end=b(),h.events.push(["exit",W,h]),W}function M(U,W){N(U,W.from)}function O(U,W){W.restore()}function L(U,W){return X;function X(G,ie,F){let Y,q,se,T;return Array.isArray(G)?ue(G):"tokenize"in G?ue([G]):Z(G);function Z(ye){return ke;function ke(He){const Pt=He!==null&&ye[He],Kt=He!==null&&ye.null,Yt=[...Array.isArray(Pt)?Pt:Pt?[Pt]:[],...Array.isArray(Kt)?Kt:Kt?[Kt]:[]];return ue(Yt)(He)}}function ue(ye){return Y=ye,q=0,ye.length===0?F:I(ye[q])}function I(ye){return ke;function ke(He){return T=z(),se=ye,ye.partial||(h.currentConstruct=ye),ye.name&&h.parser.constructs.disable.null.includes(ye.name)?Ee():ye.tokenize.call(W?Object.assign(Object.create(h),W):h,c,pe,Ee)(He)}}function pe(ye){return U(se,T),ie}function Ee(ye){return T.restore(),++q<Y.length?I(Y[q]):F}}}function N(U,W){U.resolveAll&&!s.includes(U)&&s.push(U),U.resolve&&ki(h.events,W,h.events.length-W,U.resolve(h.events.slice(W),h)),U.resolveTo&&(h.events=U.resolveTo(h.events,h))}function z(){const U=b(),W=h.previous,X=h.currentConstruct,G=h.events.length,ie=Array.from(a);return{from:G,restore:F};function F(){r=U,h.previous=W,h.currentConstruct=X,h.events.length=G,a=ie,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function y2e(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function b2e(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function v2e(t){const r={constructs:OU([m2e,...(t||{}).extensions||[]]),content:i(Ywe),defined:[],document:i(Jwe),flow:i(e2e),lazy:{},string:i(r2e),text:i(i2e)};return r;function i(s){return o;function o(a){return g2e(r,s,a)}}}function x2e(t){for(;!HU(t););return t}const d5=/[\0\t\n\r]/g;function w2e(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const c=[];let h,f,d,m,y;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(d5.lastIndex=d,h=d5.exec(s),m=h&&h.index!==void 0?h.index:s.length,y=s.charCodeAt(m),!h){e=s.slice(d);break}if(y===10&&d===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<m&&(c.push(s.slice(d,m)),t+=m-d),y){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}d=m+1}return a&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const dq={}.hasOwnProperty;function S2e(t,e,n){return typeof e!="string"&&(n=e,e=void 0),_2e(n)(x2e(v2e(n).document().write(w2e()(t,e,!0))))}function _2e(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Al),autolinkProtocol:z,autolinkEmail:z,atxHeading:s(_o),blockQuote:s(Kt),characterEscape:z,characterReference:z,codeFenced:s(Yt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Yt,o),codeText:s(er,o),codeTextData:z,data:z,codeFlowValue:z,definition:s(tr),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ei),hardBreakEscape:s(ns),hardBreakTrailing:s(ns),htmlFlow:s(nr,o),htmlFlowData:z,htmlText:s(nr,o),htmlTextData:z,image:s(af),label:o,link:s(Al),listItem:s(Os),listItemValue:m,listOrdered:s(Ms,d),listUnordered:s(Ms),paragraph:s($c),reference:I,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(_o),strong:s(kl),thematicBreak:s(aa)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:Pt,autolinkProtocol:He,blockQuote:c(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:Ee,characterReferenceMarkerNumeric:Ee,characterReferenceValue:ye,characterReference:ke,codeFenced:c(S),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:b,codeFlowValue:j,codeIndented:c(_),codeText:c(ie),codeTextData:j,data:j,definition:c(),definitionDestinationString:P,definitionLabelString:A,definitionTitleString:k,emphasis:c(),hardBreakEscape:c(W),hardBreakTrailing:c(W),htmlFlow:c(X),htmlFlowData:j,htmlText:c(G),htmlTextData:j,image:c(Y),label:se,labelText:q,lineEnding:U,link:c(F),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:pe,resourceDestinationString:T,resourceTitleString:Z,resource:ue,setextHeading:c(N),setextHeadingLineSequence:L,setextHeadingText:O,strong:c(),thematicBreak:c()}};pq(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(oe){let me={type:"root",children:[]};const De={stack:[me],tokenStack:[],config:e,enter:a,exit:h,buffer:o,resume:f,data:n},Be=[];let gt=-1;for(;++gt<oe.length;)if(oe[gt][1].type==="listOrdered"||oe[gt][1].type==="listUnordered")if(oe[gt][0]==="enter")Be.push(gt);else{const Sr=Be.pop();gt=i(oe,Sr,gt)}for(gt=-1;++gt<oe.length;){const Sr=e[oe[gt][0]];dq.call(Sr,oe[gt][1].type)&&Sr[oe[gt][1].type].call(Object.assign({sliceSerialize:oe[gt][2].sliceSerialize},De),oe[gt][1])}if(De.tokenStack.length>0){const Sr=De.tokenStack[De.tokenStack.length-1];(Sr[1]||p5).call(De,void 0,Sr[0])}for(me.position={start:Ga(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:Ga(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},gt=-1;++gt<e.transforms.length;)me=e.transforms[gt](me)||me;return me}function i(oe,me,De){let Be=me-1,gt=-1,Sr=!1,rs,rr,ti,_r;for(;++Be<=De;){const sn=oe[Be];switch(sn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{sn[0]==="enter"?gt++:gt--,_r=void 0;break}case"lineEndingBlank":{sn[0]==="enter"&&(rs&&!_r&&!gt&&!ti&&(ti=Be),_r=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_r=void 0}if(!gt&&sn[0]==="enter"&&sn[1].type==="listItemPrefix"||gt===-1&&sn[0]==="exit"&&(sn[1].type==="listUnordered"||sn[1].type==="listOrdered")){if(rs){let ir=Be;for(rr=void 0;ir--;){const $n=oe[ir];if($n[1].type==="lineEnding"||$n[1].type==="lineEndingBlank"){if($n[0]==="exit")continue;rr&&(oe[rr][1].type="lineEndingBlank",Sr=!0),$n[1].type="lineEnding",rr=ir}else if(!($n[1].type==="linePrefix"||$n[1].type==="blockQuotePrefix"||$n[1].type==="blockQuotePrefixWhitespace"||$n[1].type==="blockQuoteMarker"||$n[1].type==="listItemIndent"))break}ti&&(!rr||ti<rr)&&(rs._spread=!0),rs.end=Object.assign({},rr?oe[rr][1].start:sn[1].end),oe.splice(rr||Be,0,["exit",rs,sn[2]]),Be++,De++}if(sn[1].type==="listItemPrefix"){const ir={type:"listItem",_spread:!1,start:Object.assign({},sn[1].start),end:void 0};rs=ir,oe.splice(Be,0,["enter",ir,sn[2]]),Be++,De++,ti=void 0,_r=!0}}}return oe[me][1]._spread=Sr,De}function s(oe,me){return De;function De(Be){a.call(this,oe(Be),Be),me&&me.call(this,Be)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(oe,me,De){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([me,De||void 0]),oe.position={start:Ga(me.start),end:void 0}}function c(oe){return me;function me(De){oe&&oe.call(this,De),h.call(this,De)}}function h(oe,me){const De=this.stack.pop(),Be=this.tokenStack.pop();if(Be)Be[0].type!==oe.type&&(me?me.call(this,oe,Be[0]):(Be[1]||p5).call(this,oe,Be[0]));else throw new Error("Cannot close `"+oe.type+"` ("+Np({start:oe.start,end:oe.end})+"): its not open");De.position.end=Ga(oe.end)}function f(){return rR(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(oe){if(this.data.expectingFirstListItemValue){const me=this.stack[this.stack.length-2];me.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function y(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.lang=oe}function b(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.meta=oe}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe.replace(/(\r?\n|\r)$/g,"")}function A(oe){const me=this.resume(),De=this.stack[this.stack.length-1];De.label=me,De.identifier=ys(this.sliceSerialize(oe)).toLowerCase()}function k(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.title=oe}function P(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.url=oe}function M(oe){const me=this.stack[this.stack.length-1];if(!me.depth){const De=this.sliceSerialize(oe).length;me.depth=De}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function L(oe){const me=this.stack[this.stack.length-1];me.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function z(oe){const De=this.stack[this.stack.length-1].children;let Be=De[De.length-1];(!Be||Be.type!=="text")&&(Be=Ri(),Be.position={start:Ga(oe.start),end:void 0},De.push(Be)),this.stack.push(Be)}function j(oe){const me=this.stack.pop();me.value+=this.sliceSerialize(oe),me.position.end=Ga(oe.end)}function U(oe){const me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const De=me.children[me.children.length-1];De.position.end=Ga(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(me.type)&&(z.call(this,oe),j.call(this,oe))}function W(){this.data.atHardBreak=!0}function X(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe}function G(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe}function ie(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe}function F(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=me,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function Y(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=me,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function q(oe){const me=this.sliceSerialize(oe),De=this.stack[this.stack.length-2];De.label=Zve(me),De.identifier=ys(me).toLowerCase()}function se(){const oe=this.stack[this.stack.length-1],me=this.resume(),De=this.stack[this.stack.length-1];if(this.data.inReference=!0,De.type==="link"){const Be=oe.children;De.children=Be}else De.alt=me}function T(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.url=oe}function Z(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.title=oe}function ue(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function pe(oe){const me=this.resume(),De=this.stack[this.stack.length-1];De.label=me,De.identifier=ys(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function Ee(oe){this.data.characterReferenceType=oe.type}function ye(oe){const me=this.sliceSerialize(oe),De=this.data.characterReferenceType;let Be;De?(Be=MU(me,De==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Be=sR(me);const gt=this.stack[this.stack.length-1];gt.value+=Be}function ke(oe){const me=this.stack.pop();me.position.end=Ga(oe.end)}function He(oe){j.call(this,oe);const me=this.stack[this.stack.length-1];me.url=this.sliceSerialize(oe)}function Pt(oe){j.call(this,oe);const me=this.stack[this.stack.length-1];me.url="mailto:"+this.sliceSerialize(oe)}function Kt(){return{type:"blockquote",children:[]}}function Yt(){return{type:"code",lang:null,meta:null,value:""}}function er(){return{type:"inlineCode",value:""}}function tr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ei(){return{type:"emphasis",children:[]}}function _o(){return{type:"heading",depth:0,children:[]}}function ns(){return{type:"break"}}function nr(){return{type:"html",value:""}}function af(){return{type:"image",title:null,url:"",alt:null}}function Al(){return{type:"link",title:null,url:"",children:[]}}function Ms(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function Os(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function $c(){return{type:"paragraph",children:[]}}function kl(){return{type:"strong",children:[]}}function Ri(){return{type:"text",value:""}}function aa(){return{type:"thematicBreak"}}}function Ga(t){return{line:t.line,column:t.column,offset:t.offset}}function pq(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?pq(t,r):C2e(t,r)}}function C2e(t,e){let n;for(n in e)if(dq.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function p5(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Np({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Np({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Np({start:e.start,end:e.end})+") is still open")}function A2e(t){const e=this;e.parser=n;function n(r){return S2e(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function k2e(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function E2e(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function T2e(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function R2e(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function M2e(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function O2e(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=rf(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,h),t.applyData(e,h)}function P2e(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function D2e(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function mq(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function L2e(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return mq(t,e);const i={src:rf(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function I2e(t,e){const n={src:rf(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function N2e(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function B2e(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return mq(t,e);const i={href:rf(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function j2e(t,e){const n={href:rf(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function $2e(t,e,n){const r=t.all(e),i=n?V2e(n):gq(e),s={},o=[];if(typeof e.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const f=r[a];(i||a!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,h),t.applyData(e,h)}function V2e(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=gq(n[r])}return e}function gq(t){const e=t.spread;return e??t.children.length>1}function F2e(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function z2e(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function H2e(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function U2e(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function q2e(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=cR(e.children[1]),c=iq(e.children[e.children.length-1]);a&&c&&(o.position={start:a,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function W2e(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let c=-1;const h=[];for(;++c<a;){const d=e.children[c],m={},y=o?o[c]:void 0;y&&(m.align=y);let b={type:"element",tagName:s,properties:m,children:[]};d&&(b.children=t.all(d),t.patch(d,b),b=t.applyData(d,b)),h.push(b)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,f),t.applyData(e,f)}function G2e(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const m5=9,g5=32;function K2e(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(y5(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(y5(e.slice(i),i>0,!1)),s.join("")}function y5(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===m5||s===g5;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===m5||s===g5;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function Y2e(t,e){const n={type:"text",value:K2e(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function X2e(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const J2e={blockquote:k2e,break:E2e,code:T2e,delete:R2e,emphasis:M2e,footnoteReference:O2e,heading:P2e,html:D2e,imageReference:L2e,image:I2e,inlineCode:N2e,linkReference:B2e,link:j2e,listItem:$2e,list:F2e,paragraph:z2e,root:H2e,strong:U2e,table:q2e,tableCell:G2e,tableRow:W2e,text:Y2e,thematicBreak:X2e,toml:Fy,yaml:Fy,definition:Fy,footnoteDefinition:Fy};function Fy(){}const yq=-1,f1=0,Bp=1,Wv=2,dR=3,pR=4,mR=5,gR=6,bq=7,vq=8,b5=typeof self=="object"?self:globalThis,Q2e=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case f1:case yq:return n(o,i);case Bp:{const a=n([],i);for(const c of o)a.push(r(c));return a}case Wv:{const a=n({},i);for(const[c,h]of o)a[r(c)]=r(h);return a}case dR:return n(new Date(o),i);case pR:{const{source:a,flags:c}=o;return n(new RegExp(a,c),i)}case mR:{const a=n(new Map,i);for(const[c,h]of o)a.set(r(c),r(h));return a}case gR:{const a=n(new Set,i);for(const c of o)a.add(r(c));return a}case bq:{const{name:a,message:c}=o;return n(new b5[a](c),i)}case vq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new b5[s](o),i)};return r},v5=t=>Q2e(new Map,t)(0),Fu="",{toString:Z2e}={},{keys:eSe}=Object,$d=t=>{const e=typeof t;if(e!=="object"||!t)return[f1,e];const n=Z2e.call(t).slice(8,-1);switch(n){case"Array":return[Bp,Fu];case"Object":return[Wv,Fu];case"Date":return[dR,Fu];case"RegExp":return[pR,Fu];case"Map":return[mR,Fu];case"Set":return[gR,Fu];case"DataView":return[Bp,n]}return n.includes("Array")?[Bp,n]:n.includes("Error")?[bq,n]:[Wv,n]},zy=([t,e])=>t===f1&&(e==="function"||e==="symbol"),tSe=(t,e,n,r)=>{const i=(o,a)=>{const c=r.push(o)-1;return n.set(a,c),c},s=o=>{if(n.has(o))return n.get(o);let[a,c]=$d(o);switch(a){case f1:{let f=o;switch(c){case"bigint":a=vq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([yq],o)}return i([a,f],o)}case Bp:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),i([c,[...m]],o)}const f=[],d=i([a,f],o);for(const m of o)f.push(s(m));return d}case Wv:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],d=i([a,f],o);for(const m of eSe(o))(t||!zy($d(o[m])))&&f.push([s(m),s(o[m])]);return d}case dR:return i([a,o.toISOString()],o);case pR:{const{source:f,flags:d}=o;return i([a,{source:f,flags:d}],o)}case mR:{const f=[],d=i([a,f],o);for(const[m,y]of o)(t||!(zy($d(m))||zy($d(y))))&&f.push([s(m),s(y)]);return d}case gR:{const f=[],d=i([a,f],o);for(const m of o)(t||!zy($d(m)))&&f.push(s(m));return d}}const{message:h}=o;return i([a,{name:c,message:h}],o)};return s},x5=(t,{json:e,lossy:n}={})=>{const r=[];return tSe(!(e||n),!!e,new Map,r)(t),r},Gv=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?v5(x5(t,e)):structuredClone(t):(t,e)=>v5(x5(t,e));function nSe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function rSe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function iSe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||nSe,r=t.options.footnoteBackLabel||rSe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[c]);if(!h)continue;const f=t.all(h),d=String(h.identifier).toUpperCase(),m=rf(d.toLowerCase());let y=0;const b=[],w=t.footnoteCounts.get(d);for(;w!==void 0&&++y<=w;){b.length>0&&b.push({type:"text",value:" "});let A=typeof n=="string"?n:n(c,y);typeof A=="string"&&(A={type:"text",value:A}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(A)?A:[A]})}const S=f[f.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const A=S.children[S.children.length-1];A&&A.type==="text"?A.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...b)}else f.push(...b);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(f,!0)};t.patch(h,_),a.push(_)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Gv(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const tk={}.hasOwnProperty,sSe={};function oSe(t,e){const n=e||sSe,r=new Map,i=new Map,s=new Map,o={...J2e,...n.handlers},a={all:h,applyData:lSe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:aSe,wrap:uSe};return nR(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:i,m=String(f.identifier).toUpperCase();d.has(m)||d.set(m,f)}}),a;function c(f,d){const m=f.type,y=a.handlers[m];if(tk.call(a.handlers,m)&&y)return y(a,f,d);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in f){const{children:w,...S}=f,_=Gv(S);return _.children=a.all(f),_}return Gv(f)}return(a.options.unknownHandler||cSe)(a,f,d)}function h(f){const d=[];if("children"in f){const m=f.children;let y=-1;for(;++y<m.length;){const b=a.one(m[y],f);if(b){if(y&&m[y-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=w5(b.value)),!Array.isArray(b)&&b.type==="element")){const w=b.children[0];w&&w.type==="text"&&(w.value=w5(w.value))}Array.isArray(b)?d.push(...b):d.push(b)}}}return d}}function aSe(t,e){t.position&&(e.position=Rwe(t))}function lSe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Gv(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function cSe(t,e){const n=e.data||{},r="value"in e&&!(tk.call(n,"hProperties")||tk.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function uSe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function w5(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function S5(t,e){const n=oSe(t,e),r=n.one(t,void 0),i=iSe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function hSe(t,e){return t&&"run"in t?async function(n,r){const i=S5(n,{file:r,...e});await t.run(i,r)}:function(n,r){return S5(n,{file:r,...t||e})}}function _5(t){if(t)throw t}var p_,C5;function fSe(){if(C5)return p_;C5=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},s=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var f=t.call(h,"constructor"),d=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!f&&!d)return!1;var m;for(m in h);return typeof m>"u"||t.call(h,m)},o=function(h,f){n&&f.name==="__proto__"?n(h,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):h[f.name]=f.newValue},a=function(h,f){if(f==="__proto__")if(t.call(h,f)){if(r)return r(h,f).value}else return;return h[f]};return p_=function c(){var h,f,d,m,y,b,w=arguments[0],S=1,_=arguments.length,A=!1;for(typeof w=="boolean"&&(A=w,w=arguments[1]||{},S=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});S<_;++S)if(h=arguments[S],h!=null)for(f in h)d=a(w,f),m=a(h,f),w!==m&&(A&&m&&(s(m)||(y=i(m)))?(y?(y=!1,b=d&&i(d)?d:[]):b=d&&s(d)?d:{},o(w,{name:f,newValue:c(A,b,m)})):typeof m<"u"&&o(w,{name:f,newValue:m}));return w},p_}var dSe=fSe();const m_=Mc(dSe);function nk(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function pSe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(c,...h){const f=t[++s];let d=-1;if(c){o(c);return}for(;++d<i.length;)(h[d]===null||h[d]===void 0)&&(h[d]=i[d]);i=h,f?mSe(f,a)(...h):o(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function mSe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let c;a&&o.push(i);try{c=t.apply(this,o)}catch(h){const f=h;if(a&&n)throw f;return i(f)}a||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Ys={basename:gSe,dirname:ySe,extname:bSe,join:vSe,sep:"/"};function gSe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');eg(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function ySe(t){if(eg(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function bSe(t){eg(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function vSe(...t){let e=-1,n;for(;++e<t.length;)eg(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":xSe(n)}function xSe(t){eg(t);const e=t.codePointAt(0)===47;let n=wSe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function wSe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,c;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function eg(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const SSe={cwd:_Se};function _Se(){return"/"}function rk(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function CSe(t){if(typeof t=="string")t=new URL(t);else if(!rk(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return ASe(t)}function ASe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const g_=["history","path","basename","stem","extname","dirname"];class xq{constructor(e){let n;e?rk(e)?n={path:e}:typeof e=="string"||kSe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":SSe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<g_.length;){const s=g_[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)g_.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ys.basename(this.path):void 0}set basename(e){b_(e,"basename"),y_(e,"basename"),this.path=Ys.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ys.dirname(this.path):void 0}set dirname(e){A5(this.basename,"dirname"),this.path=Ys.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ys.extname(this.path):void 0}set extname(e){if(y_(e,"extname"),A5(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ys.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){rk(e)&&(e=CSe(e)),b_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ys.basename(this.path,this.extname):void 0}set stem(e){b_(e,"stem"),y_(e,"stem"),this.path=Ys.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new xr(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function y_(t,e){if(t&&t.includes(Ys.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ys.sep+"`")}function b_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function A5(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function kSe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ESe=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),TSe={}.hasOwnProperty;class yR extends ESe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pSe()}copy(){const e=new yR;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(m_(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(w_("data",this.frozen),this.namespace[e]=n,this):TSe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(w_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Hy(e),r=this.parser||this.Parser;return v_("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),v_("process",this.parser||this.Parser),x_("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Hy(e),c=r.parse(a);r.run(c,a,function(f,d,m){if(f||!d||!m)return h(f);const y=d,b=r.stringify(y,m);OSe(b)?m.value=b:m.result=b,h(f,m)});function h(f,d){f||!d?o(f):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),v_("processSync",this.parser||this.Parser),x_("processSync",this.compiler||this.Compiler),this.process(e,i),E5("processSync","process",n),r;function i(s,o){n=!0,_5(s),r=o}}run(e,n,r){k5(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const c=Hy(n);i.run(e,c,h);function h(f,d,m){const y=d||e;f?a(f):o?o(y):r(void 0,y,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),E5("runSync","run",r),i;function s(o,a){_5(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Hy(n),i=this.compiler||this.Compiler;return x_("stringify",i),k5(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(w_("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[f,...d]=h;c(f,d)}else o(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function o(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(h.plugins),h.settings&&(i.settings=m_(!0,i.settings,h.settings))}function a(h){let f=-1;if(h!=null)if(Array.isArray(h))for(;++f<h.length;){const d=h[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,f){let d=-1,m=-1;for(;++d<r.length;)if(r[d][0]===h){m=d;break}if(m===-1)r.push([h,...f]);else if(f.length>0){let[y,...b]=f;const w=r[m][1];nk(w)&&nk(y)&&(y=m_(!0,w,y)),r[m]=[h,y,...b]}}}}const RSe=new yR().freeze();function v_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function x_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function w_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function k5(t){if(!nk(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function E5(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Hy(t){return MSe(t)?t:new xq(t)}function MSe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function OSe(t){return typeof t=="string"||PSe(t)}function PSe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const DSe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",T5=[],R5={allowDangerousHtml:!0},LSe=/^(https?|ircs?|mailto|xmpp)$/i,ISe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function NSe(t){const e=BSe(t),n=jSe(t);return $Se(e.runSync(e.parse(n),n),t)}function BSe(t){const e=t.rehypePlugins||T5,n=t.remarkPlugins||T5,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...R5}:R5;return RSe().use(A2e).use(n).use(hSe,r).use(e)}function jSe(t){const e=t.children||"",n=new xq;return typeof e=="string"&&(n.value=e),n}function $Se(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||VSe;for(const f of ISe)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+DSe+f.id,void 0);return nR(t,h),aq(t,{Fragment:C.Fragment,components:i,ignoreInvalidStyle:!0,jsx:C.jsx,jsxs:C.jsxs,passKeys:!0,passNode:!0});function h(f,d,m){if(f.type==="raw"&&m&&typeof d=="number")return o?m.children.splice(d,1):m.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let y;for(y in d_)if(Object.hasOwn(d_,y)&&Object.hasOwn(f.properties,y)){const b=f.properties[y],w=d_[y];(w===null||w.includes(f.tagName))&&(f.properties[y]=c(String(b||""),y,f))}}if(f.type==="element"){let y=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!y&&r&&typeof d=="number"&&(y=!r(f,d,m)),y&&m&&typeof d=="number")return a&&f.children?m.children.splice(d,1,...f.children):m.children.splice(d,1),d}}}function VSe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||LSe.test(t.slice(0,e))?t:""}var FSe=(t,e)=>typeof t=="string"?t===e:JSON.stringify(t)===JSON.stringify(e),zSe=(t,e)=>{if(!t||!e)return!1;const n=r=>{const{position:i,data:s,...o}=r||{};return o};return JSON.stringify(n(t.properties))===JSON.stringify(n(e.properties))&&FSe(t.children,e.children)},bR=(t,e)=>zSe(t.node,e.node),HSe=(t={})=>Object.fromEntries(Object.entries(t??{}).map(([e,n])=>{if(!n)return[e,n];const r=n,i=({node:s,...o})=>C.jsx(r,{...o});return[e,E.memo(i,bR)]})),vR=E.createContext(null),wq=()=>E.useContext(vR)!==null,USe=({children:t,...e})=>C.jsx(vR.Provider,{value:e,children:t}),qSe=E.memo(USe,bR),WSe=({node:t,...e})=>C.jsx("pre",{...e}),GSe=({node:t,...e})=>C.jsx("code",{...e}),xR=({node:t,components:{Pre:e,Code:n},code:r})=>C.jsx(e,{children:C.jsx(n,{node:t,children:r})}),KSe=()=>null,YSe=({node:t,components:{Pre:e,Code:n,SyntaxHighlighter:r,CodeHeader:i},language:s,code:o})=>{const a=E.useMemo(()=>({Pre:e,Code:n}),[e,n]),c=s?r:xR;return C.jsxs(C.Fragment,{children:[C.jsx(i,{node:t,language:s,code:o}),C.jsx(c,{node:t,components:a,language:s??"unknown",code:o})]})},S_={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var M5;function XSe(){return M5||(M5=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(S_)),S_.exports}var JSe=XSe();const Sq=Mc(JSe);var O5=({className:t,...e})=>({className:n,...r})=>({className:Sq(t,n),...e,...r}),QSe=({node:t,components:{Pre:e,Code:n,SyntaxHighlighter:r,CodeHeader:i},componentsByLanguage:s={},children:o,...a})=>{const c=E.useContext(vR),h=O5(c),f=Ir(S=>C.jsx(e,{...h(S)})),d=O5(a),m=Ir(S=>C.jsx(n,{...d(S)})),y=/language-(\w+)/.exec(a.className||"")?.[1]??"";if(typeof o!="string")return C.jsx(xR,{node:t,components:{Pre:f,Code:m},code:o});const b=s[y]?.SyntaxHighlighter??r,w=s[y]?.CodeHeader??i;return C.jsx(YSe,{node:t,components:{Pre:f,Code:m,SyntaxHighlighter:b,CodeHeader:w},language:y||"unknown",code:o})},ZSe=({node:t,components:e,componentsByLanguage:n,...r})=>wq()?C.jsx(QSe,{node:t,components:e,componentsByLanguage:n,...r}):C.jsx(e.Code,{...r}),e_e=E.memo(ZSe,(t,e)=>t.components===e.components&&t.componentsByLanguage===e.componentsByLanguage&&bR(t,e)),{useSmooth:t_e,useSmoothStatus:n_e,withSmoothContextProvider:r_e}=OX,i_e=({components:t,componentsByLanguage:e,smooth:n=!0,preprocess:r,...i})=>{const s=U6(),o=E.useMemo(()=>r?{...s,text:r(s.text)}:s,[s,r]),{text:a}=t_e(o,n),{pre:c=WSe,code:h=GSe,SyntaxHighlighter:f=xR,CodeHeader:d=KSe}=t??{},m=E.useMemo(()=>({Pre:c,Code:h,SyntaxHighlighter:f,CodeHeader:d}),[c,h,f,d]),y=Ir(w=>C.jsx(e_e,{components:m,componentsByLanguage:e,...w})),b=E.useMemo(()=>{const{pre:w,code:S,SyntaxHighlighter:_,CodeHeader:A,...k}=t??{};return{...k,pre:qSe,code:y}},[y,t]);return C.jsx(NSe,{components:b,...i,children:a})},_q=E.forwardRef(({className:t,containerProps:e,containerComponent:n="div",...r},i)=>{const s=n_e();return C.jsx(n,{"data-status":s.type,...e,className:Sq(t,e?.className),ref:i,children:C.jsx(i_e,{...r})})});_q.displayName="MarkdownTextPrimitive";var s_e=r_e(_q),P5=Object.prototype.hasOwnProperty;function D5(t,e,n){for(n of t.keys())if(jp(n,e))return n}function jp(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&jp(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=D5(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=D5(e,i),!i)||!jp(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(P5.call(t,n)&&++r&&!P5.call(e,n)||!(n in e)||!jp(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}var __=t=>{const e=E.useRef(t),n=E.useRef(0);return typeof t!="object"||t===null?(t!==e.current&&(e.current=t,n.current+=1),[t,n.current]):(t!==e.current&&(jp(t,e.current)||(e.current=t,n.current+=1)),[e.current,n.current])},o_e=(t,e,n)=>{const r=Date.now();clearTimeout(e.current.timeoutId);const i=Math.max(0,e.current.nextAllowedTime-r);e.current.timeoutId=setTimeout(()=>{t().catch(console.error),e.current.nextAllowedTime=r+n},i)},Cq=(t,e,n)=>{const r=e?Array.isArray(e)?e:[e]:[];if(t==null||typeof t=="string"&&!t.trim())return{languageId:"plaintext",displayLanguageId:"plaintext",langsToLoad:void 0};if(typeof t=="object")return{languageId:t.name,displayLanguageId:t.name||null,langsToLoad:t};const i=t.toLowerCase(),s=a=>a?.toLowerCase()===i,o=r.find(a=>s(a.name)||s(a.scopeName)||s(a.scopeName?.split(".").pop())||a.aliases?.some(s)||a.fileTypes?.some(s));return o?{languageId:o.name||t,displayLanguageId:t,langsToLoad:o}:n?.[t]?{languageId:n[t],displayLanguageId:t,langsToLoad:n[t]}:{languageId:t,displayLanguageId:t,langsToLoad:t}};function a_e(t){const e=typeof t=="object"&&"tokenColors"in t&&Array.isArray(t.tokenColors),n=typeof t=="object"&&t!==null&&!e,r=typeof t=="object"&&t!==null&&!e&&Object.entries(t).some(([i,s])=>i&&s&&i.trim()!==""&&s!==""&&(typeof s=="string"||e));return n?{isMultiTheme:!0,themeId:r?`multi-${Object.values(t).map(s=>(typeof s=="string"?s:s?.name)||"custom").sort().join("-")}`:"multi-default",multiTheme:r?t:null,themesToLoad:r?Object.values(t):[]}:{isMultiTheme:!1,themeId:typeof t=="string"?t:t?.name||"custom",singleTheme:t,themesToLoad:[t]}}function l_e(t=1){return{name:"react-shiki:line-numbers",code(e){if(this.addClassToHast(e,"has-line-numbers"),t!==1){const n=e.properties?.style||"",r=n?`${n}; --line-start: ${t}`:`--line-start: ${t}`;e.properties={...e.properties,style:r}}},line(e){return this.addClassToHast(e,"line-numbers"),e}}}var L5={light:"github-light",dark:"github-dark"},c_e=(t,e,n,r,i={})=>{const[s,o]=E.useState(null),[a,c]=__(e),[h,f]=__(n),[d,m]=__(i),{languageId:y,langsToLoad:b}=E.useMemo(()=>Cq(a,d.customLanguages,d.langAlias),[a,d.customLanguages,d.langAlias]),{isMultiTheme:w,themeId:S,multiTheme:_,singleTheme:A,themesToLoad:k}=E.useMemo(()=>a_e(h),[h]),P=E.useRef({nextAllowedTime:0,timeoutId:void 0}),M=E.useMemo(()=>{const O={lang:y},{defaultColor:L,cssVariablePrefix:N,showLineNumbers:z,startingLineNumber:j,...U}=d,W=w?{themes:_||L5,defaultColor:L,cssVariablePrefix:N}:{theme:A||L5.dark},X=U.transformers||[];return z&&X.push(l_e(j)),{...O,...W,...U,transformers:X}},[y,S,c,f,m]);return E.useEffect(()=>{let O=!0;const L=async()=>{if(!y)return;const z=d.highlighter?d.highlighter:await r(b,k),U=z.getLoadedLanguages().includes(y)?y:"plaintext",W={...M,lang:U};if(O){const X=d.outputFormat==="html"?z.codeToHtml(t,W):aq(z.codeToHast(t,W),{jsx:C.jsx,jsxs:C.jsxs,Fragment:C.Fragment});o(X)}},{delay:N}=d;return N?o_e(L,P,N):L().catch(console.error),()=>{O=!1,clearTimeout(P.current.timeoutId)}},[t,M,d.delay,d.highlighter,b,k]),s};function u_e(t,{insertAt:e}={}){if(typeof document>"u")return;const n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}u_e(`.relative {
  position: relative;
}
.defaultStyles pre {
  overflow: auto;
  border-radius: 0.5rem;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 1.25rem;
  padding-bottom: 1.25rem;
}
.languageLabel {
  position: absolute;
  right: 0.75rem;
  top: 0.5rem;
  font-family: monospace;
  font-size: 0.75rem;
  letter-spacing: -0.05em;
  color: rgba(107, 114, 128, 0.85);
}
.line-numbers::before {
  counter-increment: line-number;
  content: counter(line-number);
  display: inline-flex;
  justify-content: flex-end;
  align-items: flex-start;
  box-sizing: content-box;
  min-width: var(--line-numbers-width, 2ch);
  padding-left: var(--line-numbers-padding-left, 2ch);
  padding-right: var(--line-numbers-padding-right, 2ch);
  color: var(--line-numbers-foreground, rgba(107, 114, 128, 0.6));
  font-size: var(--line-numbers-font-size, inherit);
  font-weight: var(--line-numbers-font-weight, inherit);
  line-height: var(--line-numbers-line-height, inherit);
  font-family: var(--line-numbers-font-family, inherit);
  opacity: var(--line-numbers-opacity, 1);
  user-select: none;
  pointer-events: none;
}
.has-line-numbers {
  counter-reset: line-number calc(var(--line-start, 1) - 1);
  --line-numbers-foreground: rgba(107, 114, 128, 0.5);
  --line-numbers-width: 2ch;
  --line-numbers-padding-left: 0ch;
  --line-numbers-padding-right: 2ch;
  --line-numbers-font-size: inherit;
  --line-numbers-font-weight: inherit;
  --line-numbers-line-height: inherit;
  --line-numbers-font-family: inherit;
  --line-numbers-opacity: 1;
}
`);var h_e=t=>E.forwardRef(({language:e,theme:n,delay:r,transformers:i,defaultColor:s,cssVariablePrefix:o,addDefaultStyles:a=!0,style:c,langStyle:h,className:f,langClassName:d,showLanguage:m=!0,showLineNumbers:y=!1,startingLineNumber:b=1,children:w,as:S="pre",customLanguages:_,...A},k)=>{const P={delay:r,transformers:i,customLanguages:_,showLineNumbers:y,defaultColor:s,cssVariablePrefix:o,startingLineNumber:b,...A},{displayLanguageId:M}=Cq(e,_),O=t(w,e,n,P),L=typeof O=="string";return C.jsxs(S,{ref:k,"data-testid":"shiki-container",className:av("relative","not-prose",a&&"defaultStyles",f),style:c,id:"shiki-container",children:[m&&M?C.jsx("span",{className:av("languageLabel",d),style:h,id:"language-label",children:M}):null,L?C.jsx("div",{dangerouslySetInnerHTML:{__html:O}}):O]})});const f_e="modulepreload",d_e=function(t){return"/"+t},I5={},$=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=h(n.map(f=>{if(f=d_e(f),f in I5)return;I5[f]=!0;const d=f.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":f_e,d||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};let fn=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function p_e(t){return wR(t)}function wR(t){return Array.isArray(t)?m_e(t):t instanceof RegExp?t:typeof t=="object"?g_e(t):t}function m_e(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=wR(t[n]);return e}function g_e(t){let e={};for(let n in t)e[n]=wR(t[n]);return e}function Aq(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function kq(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?kq(t.substring(0,t.length-1)):t.substr(~e+1)}var C_=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Uy=class{static hasCaptures(t){return t===null?!1:(C_.lastIndex=0,C_.test(t))}static replaceCaptures(t,e,n){return t.replace(C_,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let c=e.substring(a.start,a.end);for(;c[0]===".";)c=c.substring(1);switch(o){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}}else return r})}};function Eq(t,e){return t<e?-1:t>e?1:0}function Tq(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=Eq(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function N5(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Rq(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Mq=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Kv=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(v_e(t),e)}static createFromParsedTheme(t,e){return w_e(t,e)}_cachedMatchRoot=new Mq(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>y_e(t.parent,i.parentScopes));return r?new Oq(r.fontStyle,r.foreground,r.background):null}},A_=class Nb{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Nb(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Nb(n,e[r]);return n}push(e){return new Nb(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function y_e(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!b_e(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function b_e(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Oq=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function v_e(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),a=d.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let c=-1;if(typeof o.settings.fontStyle=="string"){c=0;let d=o.settings.fontStyle.split(" ");for(let m=0,y=d.length;m<y;m++)switch(d[m]){case"italic":c=c|1;break;case"bold":c=c|2;break;case"underline":c=c|4;break;case"strikethrough":c=c|8;break}}let h=null;typeof o.settings.foreground=="string"&&N5(o.settings.foreground)&&(h=o.settings.foreground);let f=null;typeof o.settings.background=="string"&&N5(o.settings.background)&&(f=o.settings.background);for(let d=0,m=a.length;d<m;d++){let b=a[d].trim().split(" "),w=b[b.length-1],S=null;b.length>1&&(S=b.slice(0,b.length-1),S.reverse()),n[r++]=new x_e(w,S,i,c,h,f)}}return n}var x_e=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},pr=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(pr||{});function w_e(t,e){t.sort((c,h)=>{let f=Eq(c.scope,h.scope);return f!==0||(f=Tq(c.parentScopes,h.parentScopes),f!==0)?f:c.index-h.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let c=t.shift();c.fontStyle!==-1&&(n=c.fontStyle),c.foreground!==null&&(r=c.foreground),c.background!==null&&(i=c.background)}let s=new S_e(e),o=new Oq(n,s.getId(r),s.getId(i)),a=new C_e(new ik(0,null,-1,0,0),[]);for(let c=0,h=t.length;c<h;c++){let f=t[c];a.insert(0,f.scope,f.parentScopes,f.fontStyle,s.getId(f.foreground),s.getId(f.background))}return new Kv(s,o,a)}var S_e=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},__e=Object.freeze([]),ik=class Pq{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||__e,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new Pq(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},C_e=class sk{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(sk._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),c,h;a===-1?(c=n,h=""):(c=n.substring(0,a),h=n.substring(a+1));let f;this._children.hasOwnProperty(c)?f=this._children[c]:(f=new sk(this._mainRule.clone(),ik.cloneArr(this._rulesWithParentScopes)),this._children[c]=f),f.insert(e+1,h,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let c=this._rulesWithParentScopes[o];if(Tq(c.parentScopes,n)===0){c.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new ik(e,n,r,i,s))}},Fh=class zi{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=zi.getLanguageId(e),r=zi.getTokenType(e),i=zi.getFontStyle(e),s=zi.getForeground(e),o=zi.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let c=zi.getLanguageId(e),h=zi.getTokenType(e),f=zi.containsBalancedBrackets(e)?1:0,d=zi.getFontStyle(e),m=zi.getForeground(e),y=zi.getBackground(e);return n!==0&&(c=n),r!==8&&(h=r),i!==null&&(f=i?1:0),s!==-1&&(d=s),o!==0&&(m=o),a!==0&&(y=a),(c<<0|h<<8|f<<10|d<<11|m<<15|y<<24)>>>0}};function Yv(t,e){const n=[],r=A_e(t);let i=r.next();for(;i!==null;){let c=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":c=1;break;case"L":c=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let h=o();if(n.push({matcher:h,priority:c}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const c=s();return h=>!!c&&!c(h)}if(i==="("){i=r.next();const c=a();return i===")"&&(i=r.next()),c}if(B5(i)){const c=[];do c.push(i),i=r.next();while(B5(i));return h=>e(c,h)}return null}function o(){const c=[];let h=s();for(;h;)c.push(h),h=s();return f=>c.every(d=>d(f))}function a(){const c=[];let h=o();for(;h&&(c.push(h),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");h=o()}return f=>c.some(d=>d(f))}}function B5(t){return!!t&&!!t.match(/[\w\.:]+/)}function A_e(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Dq(t){typeof t.dispose=="function"&&t.dispose()}var Sm=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},k_e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},E_e=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},T_e=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Sm(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new E_e;for(const n of t)R_e(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Sm){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function R_e(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof Sm?Bb({baseGrammar:s,selfGrammar:i},r):ok(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new Sm(a))}function ok(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Xv([r],e,n)}}function Bb(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Xv(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Xv(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Xv(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?Aq({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Xv(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=Lq(s);switch(o.kind){case 0:Bb({...e,selfGrammar:e.baseGrammar},n);break;case 1:Bb(e,n);break;case 2:ok(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const c={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?ok(o.ruleName,c,n):Bb(c,n)}else o.kind===4?n.add(new k_e(o.scopeName,o.ruleName)):n.add(new Sm(o.scopeName));break}}}var M_e=class{kind=0},O_e=class{kind=1},P_e=class{constructor(t){this.ruleName=t}kind=2},D_e=class{constructor(t){this.scopeName=t}kind=3},L_e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Lq(t){if(t==="$base")return new M_e;if(t==="$self")return new O_e;const e=t.indexOf("#");if(e===-1)return new D_e(t);if(e===0)return new P_e(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new L_e(n,r)}}var I_e=/\\(\d+)/,j5=/\\(\d+)/g,N_e=-1,Iq=-2;var tg=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Uy.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Uy.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${kq(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Uy.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Uy.replaceCaptures(this._contentName,t,e)}},B_e=class extends tg{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},j_e=class extends tg{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new _m(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Cm,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},$5=class extends tg{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Cm,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},ak=class extends tg{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,c,h){super(t,e,n,r),this._begin=new _m(i,this.id),this.beginCaptures=s,this._end=new _m(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=c||!1,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Cm;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Jv=class extends tg{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,c){super(t,e,n,r),this._begin=new _m(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new _m(o,Iq),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Cm;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Cm,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},Nq=class ur{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new B_e(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new j_e(e.$vscodeTextmateLocation,e.id,e.name,e.match,ur._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Aq({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new $5(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,ur._compilePatterns(s,n,r))}return e.while?new Jv(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ur._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,ur._compileCaptures(e.whileCaptures||e.captures,n,r),ur._compilePatterns(e.patterns,n,r)):new ak(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ur._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,ur._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,ur._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let c=0;e[o].patterns&&(c=ur.getCompiledRuleId(e[o],n,r)),i[a]=ur.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,c)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let c=-1;if(a.include){const h=Lq(a.include);switch(h.kind){case 0:case 1:c=ur.getCompiledRuleId(r[a.include],n,r);break;case 2:let f=r[h.ruleName];f&&(c=ur.getCompiledRuleId(f,n,r));break;case 3:case 4:const d=h.scopeName,m=h.kind===4?h.ruleName:null,y=n.getExternalGrammar(d,r);if(y)if(m){let b=y.repository[m];b&&(c=ur.getCompiledRuleId(b,n,y.repository))}else c=ur.getCompiledRuleId(y.repository.$self,n,y.repository);break}}else c=ur.getCompiledRuleId(a,n,r);if(c!==-1){const h=n.getRule(c);let f=!1;if((h instanceof $5||h instanceof ak||h instanceof Jv)&&h.hasMissingPatterns&&h.patterns.length===0&&(f=!0),f)continue;i.push(c)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},_m=class Bq{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const h=e.charAt(a+1);h==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(h==="A"||h==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=I_e.test(this.source):this.hasBackReferences=!1}clone(){return new Bq(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return j5.lastIndex=0,this.source.replace(j5,(i,s)=>Rq(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,c;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(c=this.source.charAt(s+1),c==="A"?(e[s+1]="",n[s+1]="",r[s+1]="A",i[s+1]="A"):c==="G"?(e[s+1]="",n[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=c,n[s+1]=c,r[s+1]=c,i[s+1]=c),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Cm=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new V5(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new V5(t,r,this._items.map(i=>i.ruleId))}},V5=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},k_=class{constructor(t,e){this.languageId=t,this.tokenType=e}},$_e=class lk{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new k_(e,8),this._embeddedLanguagesMatcher=new V_e(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?lk._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new k_(0,0);_getBasicScopeAttributes=new Mq(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new k_(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(lk.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},V_e=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Rq(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},F5=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function jq(t,e,n,r,i,s,o,a){const c=e.content.length;let h=!1,f=-1;if(o){const y=F_e(t,e,n,r,i,s);i=y.stack,r=y.linePos,n=y.isFirstLine,f=y.anchorPosition}const d=Date.now();for(;!h;){if(a!==0&&Date.now()-d>a)return new F5(i,!0);m()}return new F5(i,!1);function m(){const y=z_e(t,e,n,r,i,f);if(!y){s.produce(i,c),h=!0;return}const b=y.captureIndices,w=y.matchedRuleId,S=b&&b.length>0?b[0].end>r:!1;if(w===N_e){const _=i.getRule(t);s.produce(i,b[0].start),i=i.withContentNameScopesList(i.nameScopesList),pp(t,e,n,i,s,_.endCaptures,b),s.produce(i,b[0].end);const A=i;if(i=i.parent,f=A.getAnchorPos(),!S&&A.getEnterPos()===r){i=A,s.produce(i,c),h=!0;return}}else{const _=t.getRule(w);s.produce(i,b[0].start);const A=i,k=_.getName(e.content,b),P=i.contentNameScopesList.pushAttributed(k,t);if(i=i.push(w,r,f,b[0].end===c,null,P,P),_ instanceof ak){const M=_;pp(t,e,n,i,s,M.beginCaptures,b),s.produce(i,b[0].end),f=b[0].end;const O=M.getContentName(e.content,b),L=P.pushAttributed(O,t);if(i=i.withContentNameScopesList(L),M.endHasBackReferences&&(i=i.withEndRule(M.getEndWithResolvedBackReferences(e.content,b))),!S&&A.hasSameRuleAs(i)){i=i.pop(),s.produce(i,c),h=!0;return}}else if(_ instanceof Jv){const M=_;pp(t,e,n,i,s,M.beginCaptures,b),s.produce(i,b[0].end),f=b[0].end;const O=M.getContentName(e.content,b),L=P.pushAttributed(O,t);if(i=i.withContentNameScopesList(L),M.whileHasBackReferences&&(i=i.withEndRule(M.getWhileWithResolvedBackReferences(e.content,b))),!S&&A.hasSameRuleAs(i)){i=i.pop(),s.produce(i,c),h=!0;return}}else if(pp(t,e,n,i,s,_.captures,b),s.produce(i,b[0].end),i=i.pop(),!S){i=i.safePop(),s.produce(i,c),h=!0;return}}b[0].end>r&&(r=b[0].end,n=!1)}}function F_e(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let c=i;c;c=c.pop()){const h=c.getRule(t);h instanceof Jv&&a.push({rule:h,stack:c})}for(let c=a.pop();c;c=a.pop()){const{ruleScanner:h,findOptions:f}=q_e(c.rule,t,c.stack.endRule,n,r===o),d=h.findNextMatchSync(e,r,f);if(d){if(d.ruleId!==Iq){i=c.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(s.produce(c.stack,d.captureIndices[0].start),pp(t,e,n,c.stack,s,c.rule.whileCaptures,d.captureIndices),s.produce(c.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>r&&(r=d.captureIndices[0].end,n=!1))}else{i=c.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function z_e(t,e,n,r,i,s){const o=H_e(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const c=U_e(a,t,e,n,r,i,s);if(!c)return o;if(!o)return c;const h=o.captureIndices[0].start,f=c.captureIndices[0].start;return f<h||c.priorityMatch&&f===h?c:o}function H_e(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:c}=$q(o,t,i.endRule,n,r===s),h=a.findNextMatchSync(e,r,c);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}function U_e(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,c=null,h,f=0;const d=s.contentNameScopesList.getScopeNames();for(let m=0,y=t.length;m<y;m++){const b=t[m];if(!b.matcher(d))continue;const w=e.getRule(b.ruleId),{ruleScanner:S,findOptions:_}=$q(w,e,null,r,i===o),A=S.findNextMatchSync(n,i,_);if(!A)continue;const k=A.captureIndices[0].start;if(!(k>=a)&&(a=k,c=A.captureIndices,h=A.ruleId,f=b.priority,a===i))break}return c?{priorityMatch:f===-1,captureIndices:c,matchedRuleId:h}:null}function $q(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function q_e(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function pp(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,c=Math.min(s.length,o.length),h=[],f=o[0].end;for(let d=0;d<c;d++){const m=s[d];if(m===null)continue;const y=o[d];if(y.length===0)continue;if(y.start>f)break;for(;h.length>0&&h[h.length-1].endPos<=y.start;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?i.produceFromScopes(h[h.length-1].scopes,y.start):i.produce(r,y.start),m.retokenizeCapturedWithRuleId){const w=m.getName(a,o),S=r.contentNameScopesList.pushAttributed(w,t),_=m.getContentName(a,o),A=S.pushAttributed(_,t),k=r.push(m.retokenizeCapturedWithRuleId,y.start,-1,!1,null,S,A),P=t.createOnigString(a.substring(0,y.end));jq(t,P,n&&y.start===0,y.start,k,i,!1,0),Dq(P);continue}const b=m.getName(a,o);if(b!==null){const S=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(b,t);h.push(new W_e(S,y.end))}}for(;h.length>0;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}var W_e=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function G_e(t,e,n,r,i,s,o,a){return new Y_e(t,e,n,r,i,s,o,a)}function z5(t,e,n,r,i){const s=Yv(e,Qv),o=Nq.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function Qv(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(K_e(e[i],r))return n=i+1,!0;return!1})}function K_e(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var Y_e=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new $_e(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=H5(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const c of Object.keys(i)){const h=Yv(c,Qv);for(const f of h)this._tokenTypeMatchers.push({matcher:f.matcher,type:i[c]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)z5(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const c=a.injectionSelector;c&&z5(e,c,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=H5(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=Nq.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===ck.NULL){i=!0;const h=this._basicScopeAttributesProvider.getDefaultAttributes(),f=this.themeProvider.getDefaults(),d=Fh.set(0,h.languageId,h.tokenType,null,f.fontStyle,f.foregroundId,f.backgroundId),m=this.getRule(this._rootId).getName(null,null);let y;m?y=$p.createRootAndLookUpScopeName(m,d,this):y=$p.createRoot("unknown",d),e=new ck(null,this._rootId,-1,-1,!1,null,y,y)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new J_e(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),c=jq(this,s,i,0,e,a,!0,r);return Dq(s),{lineLength:o,lineTokens:a,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}};function H5(t,e){return t=p_e(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var $p=class Gs{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=A_.push(i,s.scopeNames),r=new Gs(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new Gs(null,new A_(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new A_(null,e),o=r.themeProvider.themeMatch(s),a=Gs.mergeAttributes(n,i,o);return new Gs(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Gs.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),Fh.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Gs._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=Gs._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=Gs.mergeAttributes(e.tokenAttributes,i,o);return new Gs(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},ck=class tc{constructor(e,n,r,i,s,o,a,c){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=c,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new tc(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:tc._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?$p.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){tc._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new tc(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new tc(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=$p.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new tc(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,$p.fromExtension(r,n.contentNameScopesList))}},X_e=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Yv(n,Qv).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Yv(n,Qv).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},J_e=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=Fh.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=Fh.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},Q_e=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,G_e(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},Z_e=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new Q_e(Kv.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Kv.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new X_e(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new T_e(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},uk=ck.NULL;const eCe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],tCe=/["&'<>`]/g,nCe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rCe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,iCe=/[|\\{}()[\]^$+*?.]/g,U5=new WeakMap;function sCe(t,e){if(t=t.replace(e.subset?oCe(e.subset):tCe,r),e.subset||e.escapeOnly)return t;return t.replace(nCe,n).replace(rCe,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function oCe(t){let e=U5.get(t);return e||(e=aCe(t),U5.set(t,e)),e}function aCe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(iCe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const lCe=/[\dA-Fa-f]/;function cCe(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!lCe.test(String.fromCharCode(e))?r:r+";"}const uCe=/\d/;function hCe(t,e,n){const r="&#"+String(t);return n&&e&&!uCe.test(String.fromCharCode(e))?r:r+";"}const fCe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],E_={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},dCe=["cent","copy","divide","gt","lt","not","para","times"],Vq={}.hasOwnProperty,hk={};let qy;for(qy in E_)Vq.call(E_,qy)&&(hk[E_[qy]]=qy);const pCe=/[^\dA-Za-z]/;function mCe(t,e,n,r){const i=String.fromCharCode(t);if(Vq.call(hk,i)){const s=hk[i],o="&"+s;return n&&fCe.includes(s)&&!dCe.includes(s)&&(!r||e&&e!==61&&pCe.test(String.fromCharCode(e)))?o:o+";"}return""}function gCe(t,e,n){let r=cCe(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=mCe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=hCe(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function kh(t,e){return sCe(t,Object.assign({format:gCe},e))}const yCe=/^>|^->|<!--|-->|--!>|<!-$/g,bCe=[">"],vCe=["<",">"];function xCe(t,e,n,r){return r.settings.bogusComments?"<?"+kh(t.value,Object.assign({},r.settings.characterReferences,{subset:bCe}))+">":"<!--"+t.value.replace(yCe,i)+"-->";function i(s){return kh(s,Object.assign({},r.settings.characterReferences,{subset:vCe}))}}function wCe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const Tn=zq(1),Fq=zq(-1),SCe=[];function zq(t){return e;function e(n,r,i){const s=n?n.children:SCe;let o=(r||0)+t,a=s[o];if(!i)for(;a&&h1(a);)o+=t,a=s[o];return a}}const _Ce={}.hasOwnProperty;function Hq(t){return e;function e(n,r,i){return _Ce.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const SR=Hq({body:ACe,caption:T_,colgroup:T_,dd:RCe,dt:TCe,head:T_,html:CCe,li:ECe,optgroup:MCe,option:OCe,p:kCe,rp:q5,rt:q5,tbody:DCe,td:W5,tfoot:LCe,th:W5,thead:PCe,tr:ICe});function T_(t,e,n){const r=Tn(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&h1(r.value.charAt(0)))}function CCe(t,e,n){const r=Tn(n,e);return!r||r.type!=="comment"}function ACe(t,e,n){const r=Tn(n,e);return!r||r.type!=="comment"}function kCe(t,e,n){const r=Tn(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function ECe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&r.tagName==="li"}function TCe(t,e,n){const r=Tn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function RCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function q5(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function MCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function OCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function PCe(t,e,n){const r=Tn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function DCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function LCe(t,e,n){return!Tn(n,e)}function ICe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function W5(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const NCe=Hq({body:$Ce,colgroup:VCe,head:jCe,html:BCe,tbody:FCe});function BCe(t){const e=Tn(t,-1);return!e||e.type!=="comment"}function jCe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function $Ce(t){const e=Tn(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&h1(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function VCe(t,e,n){const r=Fq(n,e),i=Tn(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&SR(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function FCe(t,e,n){const r=Fq(n,e),i=Tn(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&SR(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Wy={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function zCe(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let c;i.space==="html"&&t.tagName==="svg"&&(r.schema=Zm);const h=HCe(r,t.properties),f=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,f&&(o=!1),(h||!s||!NCe(t,e,n))&&(a.push("<",t.tagName,h?" "+h:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(c=h.charAt(h.length-1),(!r.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(f),!o&&(!s||!SR(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function HCe(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=UCe(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function UCe(t,e,n){const r=tq(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const c=kh(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Wy.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?GU:rq)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?c:(t.settings.preferUnquoted&&(a=kh(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Wy.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&Hv(n,o)>Hv(n,t.alternative)&&(o=t.alternative),a=o+kh(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?Wy.single:Wy.double)[i][s],attribute:!0}))+o),c+(a&&"="+a))}const qCe=["<","&"];function Uq(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:kh(t.value,Object.assign({},r.settings.characterReferences,{subset:qCe}))}function WCe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:Uq(t,e,n,r)}function GCe(t,e,n,r){return r.all(t)}const KCe=yve("type",{invalid:YCe,unknown:XCe,handlers:{comment:xCe,doctype:wCe,element:zCe,raw:WCe,root:GCe,text:Uq}});function YCe(t){throw new Error("Expected node, not `"+t+"`")}function XCe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const JCe={},QCe={},ZCe=[];function eAe(t,e){const n=e||JCe,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:tAe,all:nAe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||eCe,characterReferences:n.characterReferences||QCe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Zm:nq,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function tAe(t,e,n){return KCe(t,e,n,this)}function nAe(t){const e=[],n=t&&t.children||ZCe;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Zv(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function cl(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function rAe(t){return Array.isArray(t)?t:[t]}async function qq(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function _R(t){return!t||["plaintext","txt","text","plain"].includes(t)}function Wq(t){return t==="ansi"||_R(t)}function CR(t){return t==="none"}function Gq(t){return CR(t)}function Kq(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function d1(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function iAe(t){const e=d1(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}function sAe(t,e,n){const r=new Set;for(const s of t.matchAll(/lang=["']([\w-]+)["']/g))r.add(s[1]);for(const s of t.matchAll(/(?:```|~~~)([\w-]+)/g))r.add(s[1]);for(const s of t.matchAll(/\\begin\{([\w-]+)\}/g))r.add(s[1]);if(!n)return Array.from(r);const i=n.getBundledLanguages();return Array.from(r).filter(s=>s&&i[s])}const AR="light-dark()",oAe=["color","background-color"];function aAe(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function lAe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?aAe(i,s):i})):t}function cAe(t,e,n,r,i="css-vars"){const s={content:t.content,explanation:t.explanation,offset:t.offset},o=e.map(f=>ex(t.variants[f])),a=new Set(o.flatMap(f=>Object.keys(f))),c={},h=(f,d)=>{const m=d==="color"?"":d==="background-color"?"-bg":`-${d}`;return n+e[f]+(d==="color"?"":m)};return o.forEach((f,d)=>{for(const m of a){const y=f[m]||"inherit";if(d===0&&r&&oAe.includes(m))if(r===AR&&o.length>1){const b=e.findIndex(A=>A==="light"),w=e.findIndex(A=>A==="dark");if(b===-1||w===-1)throw new fn('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const S=o[b][m]||"inherit",_=o[w][m]||"inherit";c[m]=`light-dark(${S}, ${_})`,i==="css-vars"&&(c[h(d,m)]=y)}else c[m]=y;else i==="css-vars"&&(c[h(d,m)]=y)}}),s.htmlStyle=c,s}function ex(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&pr.Italic&&(e["font-style"]="italic"),t.fontStyle&pr.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&pr.Underline&&n.push("underline"),t.fontStyle&pr.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function fk(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const Yq=new WeakMap;function p1(t,e){Yq.set(t,e)}function Am(t){return Yq.get(t)}class of{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new of(Object.fromEntries(rAe(n).map(r=>[r,uk])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return uAe(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function uAe(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function hAe(t,e){if(!(t instanceof of))throw new fn("Invalid grammar state");return t.getInternalStack(e)}function fAe(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new fn(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new fn(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);let c=o.character;if(c<0&&(c=a.length+c),c<0||c>a.length)throw new fn(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,character:c,offset:i.posToIndex(o.line,c)}}};const i=iAe(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));dAe(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return lAe(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(f=>f.type==="element"&&f.tagName==="span");if(i.length!==r.converter.lines.length)throw new fn(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(f,d,m,y){const b=i[f];let w="",S=-1,_=-1;if(d===0&&(S=0),m===0&&(_=0),m===Number.POSITIVE_INFINITY&&(_=b.children.length),S===-1||_===-1)for(let k=0;k<b.children.length;k++)w+=Xq(b.children[k]),S===-1&&w.length===d&&(S=k+1),_===-1&&w.length===m&&(_=k+1);if(S===-1)throw new fn(`Failed to find start index for decoration ${JSON.stringify(y.start)}`);if(_===-1)throw new fn(`Failed to find end index for decoration ${JSON.stringify(y.end)}`);const A=b.children.slice(S,_);if(!y.alwaysWrap&&A.length===b.children.length)a(b,y,"line");else if(!y.alwaysWrap&&A.length===1&&A[0].type==="element")a(A[0],y,"token");else{const k={type:"element",tagName:"span",properties:{},children:A};a(k,y,"wrapper"),b.children.splice(S,A.length,k)}}function o(f,d){i[f]=a(i[f],d,"line")}function a(f,d,m){const y=d.properties||{},b=d.transform||(w=>w);return f.tagName=d.tagName||"span",f.properties={...f.properties,...y,class:f.properties.class},d.properties?.class&&Kq(f,d.properties.class),f=b(f,m)||f,f}const c=[],h=r.decorations.sort((f,d)=>d.start.offset-f.start.offset||f.end.offset-d.end.offset);for(const f of h){const{start:d,end:m}=f;if(d.line===m.line)s(d.line,d.character,m.character,f);else if(d.line<m.line){s(d.line,d.character,Number.POSITIVE_INFINITY,f);for(let y=d.line+1;y<m.line;y++)c.unshift(()=>o(y,f));s(m.line,0,m.character,f)}}c.forEach(f=>f())}}}function dAe(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new fn(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<=i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<=n.end.offset,a=i.start.offset<=n.start.offset&&n.start.offset<i.end.offset,c=i.start.offset<n.end.offset&&n.end.offset<=i.end.offset;if(s||o||a||c){if(s&&o||a&&c||a&&n.start.offset===n.end.offset||o&&i.start.offset===i.end.offset)continue;throw new fn(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function Xq(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(Xq).join(""):""}const pAe=[fAe()];function tx(t){const e=mAe(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...pAe]}function mAe(t){const e=[],n=[],r=[];for(const i of t)switch(i.enforce){case"pre":e.push(i);break;case"post":n.push(i);break;default:r.push(i)}return{pre:e,post:n,normal:r}}var dc=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],R_={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function gAe(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function G5(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function yAe(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)R_[r]&&e.push({type:"setDecoration",value:R_[r]});else if(r<=29){const i=R_[r-20];i&&(e.push({type:"resetDecoration",value:i}),i==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:dc[r-30]}});else if(r===38){const i=G5(t);i&&e.push({type:"setForegroundColor",value:i})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:dc[r-40]}});else if(r===48){const i=G5(t);i&&e.push({type:"setBackgroundColor",value:i})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:dc[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:dc[r-100+8]}})}return e}function bAe(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=gAe(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const c=yAe(o.sequence);for(const h of c)h.type==="resetAll"?(t=null,e=null,n.clear()):h.type==="resetForegroundColor"?t=null:h.type==="resetBackgroundColor"?e=null:h.type==="resetDecoration"&&n.delete(h.value);for(const h of c)h.type==="setForegroundColor"?t=h.value:h.type==="setBackgroundColor"?e=h.value:h.type==="setDecoration"&&n.add(h.value)}s=o.position}while(s<r.length);return i}}}var vAe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function xAe(t=vAe){function e(a){return t[a]}function n(a){return`#${a.map(c=>Math.max(0,Math.min(c,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let h=0;h<dc.length;h++)r.push(e(dc[h]));let a=[0,95,135,175,215,255];for(let h=0;h<6;h++)for(let f=0;f<6;f++)for(let d=0;d<6;d++)r.push(n([a[h],a[f],a[d]]));let c=8;for(let h=0;h<24;h++,c+=10)r.push(n([c,c,c]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}function wAe(t,e,n){const r=Zv(t,n),i=d1(e),s=xAe(Object.fromEntries(dc.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=bAe();return i.map(a=>o.parse(a[0]).map(c=>{let h,f;c.decorations.has("reverse")?(h=c.background?s.value(c.background):t.bg,f=c.foreground?s.value(c.foreground):t.fg):(h=c.foreground?s.value(c.foreground):t.fg,f=c.background?s.value(c.background):void 0),h=cl(h,r),f=cl(f,r),c.decorations.has("dim")&&(h=SAe(h));let d=pr.None;return c.decorations.has("bold")&&(d|=pr.Bold),c.decorations.has("italic")&&(d|=pr.Italic),c.decorations.has("underline")&&(d|=pr.Underline),c.decorations.has("strikethrough")&&(d|=pr.Strikethrough),{content:c.value,offset:a[1],color:h,bgColor:f,fontStyle:d}}))}function SAe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function kR(t,e,n={}){const{lang:r="text",theme:i=t.getLoadedThemes()[0]}=n;if(_R(r)||CR(i))return d1(e).map(c=>[{content:c[0],offset:c[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(r==="ansi")return wAe(s,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new fn(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new fn(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return CAe(e,a,s,o,n)}function _Ae(...t){if(t.length===2)return Am(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(_R(i)||CR(s))throw new fn("Plain language does not have grammar state");if(i==="ansi")throw new fn("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),c=e.getLanguage(i);return new of(nx(n,c,o,a,r).stateStack,c.name,o.name)}function CAe(t,e,n,r,i){const s=nx(t,e,n,r,i),o=new of(nx(t,e,n,r,i).stateStack,e.name,n.name);return p1(s.tokens,o),s.tokens}function nx(t,e,n,r,i){const s=Zv(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,c=d1(t);let h=i.grammarState?hAe(i.grammarState,n.name)??uk:i.grammarContextCode!=null?nx(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:uk,f=[];const d=[];for(let m=0,y=c.length;m<y;m++){const[b,w]=c[m];if(b===""){f=[],d.push([]);continue}if(o>0&&b.length>=o){f=[],d.push([{content:b,offset:w,color:"",fontStyle:0}]);continue}let S,_,A;i.includeExplanation&&(S=e.tokenizeLine(b,h,a),_=S.tokens,A=0);const k=e.tokenizeLine2(b,h,a),P=k.tokens.length/2;for(let M=0;M<P;M++){const O=k.tokens[2*M],L=M+1<P?k.tokens[2*M+2]:b.length;if(O===L)continue;const N=k.tokens[2*M+1],z=cl(r[Fh.getForeground(N)],s),j=Fh.getFontStyle(N),U={content:b.substring(O,L),offset:w+O,color:z,fontStyle:j};if(i.includeExplanation){const W=[];if(i.includeExplanation!=="scopeName")for(const G of n.settings){let ie;switch(typeof G.scope){case"string":ie=G.scope.split(/,/).map(F=>F.trim());break;case"object":ie=G.scope;break;default:continue}W.push({settings:G,selectors:ie.map(F=>F.split(/ /))})}U.explanation=[];let X=0;for(;O+X<L;){const G=_[A],ie=b.substring(G.startIndex,G.endIndex);X+=ie.length,U.explanation.push({content:ie,scopes:i.includeExplanation==="scopeName"?AAe(G.scopes):kAe(W,G.scopes)}),A+=1}}f.push(U)}d.push(f),f=[],h=k.ruleStack}return{tokens:d,stateStack:h}}function AAe(t){return t.map(e=>({scopeName:e}))}function kAe(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:TAe(t,s,e.slice(0,r))}}return n}function K5(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function EAe(t,e,n){if(!K5(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)K5(t[r],n[i])&&(r-=1),i-=1;return r===-1}function TAe(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(EAe(o,e,n)){r.push(s);break}return r}function Jq(t,e,n){const r=Object.entries(n.themes).filter(c=>c[1]).map(c=>({color:c[0],theme:c[1]})),i=r.map(c=>{const h=kR(t,e,{...n,theme:c.theme}),f=Am(h),d=typeof c.theme=="string"?c.theme:c.theme.name;return{tokens:h,state:f,theme:d}}),s=RAe(...i.map(c=>c.tokens)),o=s[0].map((c,h)=>c.map((f,d)=>{const m={content:f.content,variants:{},offset:f.offset};return"includeExplanation"in n&&n.includeExplanation&&(m.explanation=f.explanation),s.forEach((y,b)=>{const{content:w,explanation:S,offset:_,...A}=y[h][d];m.variants[r[b].color]=A}),m})),a=i[0].state?new of(Object.fromEntries(i.map(c=>[c.theme,c.state?.getInternalStack(c.theme)])),i[0].state.lang):void 0;return a&&p1(o,a),o}function RAe(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(c=>c[r]),s=e.map(()=>[]);e.forEach((c,h)=>c.push(s[h]));const o=i.map(()=>0),a=i.map(c=>c[0]);for(;a.every(c=>c);){const c=Math.min(...a.map(h=>h.content.length));for(let h=0;h<n;h++){const f=a[h];f.content.length===c?(s[h].push(f),o[h]+=1,a[h]=i[h][o[h]]):(s[h].push({...f,content:f.content.slice(0,c)}),a[h]={...f,content:f.content.slice(c),offset:f.offset+c})}}}return e}function rx(t,e,n){let r,i,s,o,a,c;if("themes"in n){const{defaultColor:h="light",cssVariablePrefix:f="--shiki-",colorsRendering:d="css-vars"}=n,m=Object.entries(n.themes).filter(_=>_[1]).map(_=>({color:_[0],theme:_[1]})).sort((_,A)=>_.color===h?-1:A.color===h?1:0);if(m.length===0)throw new fn("`themes` option must not be empty");const y=Jq(t,e,n);if(c=Am(y),h&&AR!==h&&!m.find(_=>_.color===h))throw new fn(`\`themes\` option must contain the defaultColor key \`${h}\``);const b=m.map(_=>t.getTheme(_.theme)),w=m.map(_=>_.color);s=y.map(_=>_.map(A=>cAe(A,w,f,h,d))),c&&p1(s,c);const S=m.map(_=>Zv(_.theme,n));i=Y5(m,b,S,f,h,"fg",d),r=Y5(m,b,S,f,h,"bg",d),o=`shiki-themes ${b.map(_=>_.name).join(" ")}`,a=h?void 0:[i,r].join(";")}else if("theme"in n){const h=Zv(n.theme,n);s=kR(t,e,n);const f=t.getTheme(n.theme);r=cl(f.bg,h),i=cl(f.fg,h),o=f.name,c=Am(s)}else throw new fn("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:c}}function Y5(t,e,n,r,i,s,o){return t.map((a,c)=>{const h=cl(e[c][s],n[c])||"inherit",f=`${r+a.color}${s==="bg"?"-bg":""}:${h}`;if(c===0&&i){if(i===AR&&t.length>1){const d=t.findIndex(w=>w.color==="light"),m=t.findIndex(w=>w.color==="dark");if(d===-1||m===-1)throw new fn('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const y=cl(e[d][s],n[d])||"inherit",b=cl(e[m][s],n[m])||"inherit";return`light-dark(${y}, ${b});${f}`}return h}return o==="css-vars"?f:null}).filter(a=>!!a).join(";")}function ix(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>ix(t,i,s),codeToTokens:(i,s)=>rx(t,i,s)}){let i=e;for(const b of tx(n))i=b.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:c,rootStyle:h,grammarState:f}=rx(t,i,n);const{mergeWhitespaces:d=!0,mergeSameStyleTokens:m=!1}=n;d===!0?s=OAe(s):d==="never"&&(s=PAe(s)),m&&(s=DAe(s));const y={...r,get source(){return i}};for(const b of tx(n))s=b.tokens?.call(y,s)||s;return MAe(s,{...n,fg:o,bg:a,themeName:c,rootStyle:h},y,f)}function MAe(t,e,n,r=Am(t)){const i=tx(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:c="0"}=e;let h={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...c!==!1&&c!=null?{tabindex:c.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([b])=>!b.startsWith("_")))},children:[]},f={type:"element",tagName:"code",properties:{},children:s};const d=[],m={...n,structure:a,addClassToHast:Kq,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return h},get code(){return f},get lines(){return d}};if(t.forEach((b,w)=>{w&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let S={type:"element",tagName:"span",properties:{class:"line"},children:[]},_=0;for(const A of b){let k={type:"element",tagName:"span",properties:{...A.htmlAttrs},children:[{type:"text",value:A.content}]};const P=fk(A.htmlStyle||ex(A));P&&(k.properties.style=P);for(const M of i)k=M?.span?.call(m,k,w+1,_,S,A)||k;a==="inline"?o.children.push(k):a==="classic"&&S.children.push(k),_+=A.content.length}if(a==="classic"){for(const A of i)S=A?.line?.call(m,S,w+1)||S;d.push(S),s.push(S)}}),a==="classic"){for(const b of i)f=b?.code?.call(m,f)||f;h.children.push(f);for(const b of i)h=b?.pre?.call(m,h)||h;o.children.push(h)}let y=o;for(const b of i)y=b?.root?.call(m,y)||y;return r&&p1(y,r),y}function OAe(t){return t.map(e=>{const n=[];let r="",i=0;return e.forEach((s,o)=>{const c=!(s.fontStyle&&(s.fontStyle&pr.Underline||s.fontStyle&pr.Strikethrough));c&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(c?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n})}function PAe(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function DAe(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const i=n[n.length-1],s=fk(i.htmlStyle||ex(i)),o=fk(r.htmlStyle||ex(r)),a=i.fontStyle&&(i.fontStyle&pr.Underline||i.fontStyle&pr.Strikethrough),c=r.fontStyle&&(r.fontStyle&pr.Underline||r.fontStyle&pr.Strikethrough);!a&&!c&&s===o?i.content+=r.content:n.push({...r})}return n})}const LAe=eAe;function IAe(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>ix(t,s,o),codeToTokens:(s,o)=>rx(t,s,o)};let i=LAe(ix(t,e,n,r));for(const s of tx(n))i=s.postprocess?.call(r,i,n)||i;return i}const X5={light:"#333333",dark:"#bbbbbb"},J5={light:"#fffffe",dark:"#1e1e1e"},Q5="__shiki_resolved";function ER(t){if(t?.[Q5])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(c=>!c.name&&!c.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?X5.light:X5.dark),n||(n=e.type==="light"?J5.light:J5.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const c=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${c}`]?o(a):(s.set(a,c),c)}e.settings=e.settings.map(a=>{const c=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),h=a.settings?.background&&!a.settings.background.startsWith("#");if(!c&&!h)return a;const f={...a,settings:{...a.settings}};if(c){const d=o(a.settings.foreground);e.colorReplacements[d]=a.settings.foreground,f.settings.foreground=d}if(h){const d=o(a.settings.background);e.colorReplacements[d]=a.settings.background,f.settings.background=d}return f});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const c=o(e.colors[a]);e.colorReplacements[c]=e.colors[a],e.colors[a]=c}return Object.defineProperty(e,Q5,{enumerable:!1,writable:!1,value:!0}),e}async function Qq(t){return Array.from(new Set((await Promise.all(t.filter(e=>!Wq(e)).map(async e=>await qq(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function Zq(t){return(await Promise.all(t.map(async n=>Gq(n)?null:ER(await qq(n))))).filter(n=>!!n)}let NAe=3;function BAe(t,e=3){e>NAe||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let uh=class extends Error{constructor(e){super(e),this.name="ShikiError"}};class jAe extends Z_e{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=ER(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Kv.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new uh(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>r.map(([c])=>c).includes(a))).filter(s=>!r.includes(s));throw new uh(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class $Ae{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let Vd=0;function VAe(t){Vd+=1,t.warnings!==!1&&Vd>=10&&Vd%10===0&&console.warn(`[Shiki] ${Vd} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new uh("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(ER),i=new $Ae(t.engine,n),s=new jAe(i,r,n,t.langAlias);let o;function a(A){S();const k=s.getGrammar(typeof A=="string"?A:A.name);if(!k)throw new uh(`Language \`${A}\` not found, you may need to load it first`);return k}function c(A){if(A==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};S();const k=s.getTheme(A);if(!k)throw new uh(`Theme \`${A}\` not found, you may need to load it first`);return k}function h(A){S();const k=c(A);o!==A&&(s.setTheme(k),o=A);const P=s.getColorMap();return{theme:k,colorMap:P}}function f(){return S(),s.getLoadedThemes()}function d(){return S(),s.getLoadedLanguages()}function m(...A){S(),s.loadLanguages(A.flat(1))}async function y(...A){return m(await Qq(A))}function b(...A){S();for(const k of A.flat(1))s.loadTheme(k)}async function w(...A){return S(),b(await Zq(A))}function S(){if(e)throw new uh("Shiki instance has been disposed")}function _(){e||(e=!0,s.dispose(),Vd-=1)}return{setTheme:h,getTheme:c,getLanguage:a,getLoadedThemes:f,getLoadedLanguages:d,loadLanguage:y,loadLanguageSync:m,loadTheme:w,loadThemeSync:b,dispose:_,[Symbol.dispose]:_}}async function FAe(t){t.engine||BAe("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([Zq(t.themes||[]),Qq(t.langs||[]),t.engine]);return VAe({...t,themes:e,langs:n,engine:r})}async function zAe(t){const e=await FAe(t);return{getLastGrammarState:(...n)=>_Ae(e,...n),codeToTokensBase:(n,r)=>kR(e,n,r),codeToTokensWithThemes:(n,r)=>Jq(e,n,r),codeToTokens:(n,r)=>rx(e,n,r),codeToHast:(n,r)=>ix(e,n,r),codeToHtml:(n,r)=>IAe(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function HAe(t){const e=t.langs,n=t.themes,r=t.engine;async function i(s){function o(d){if(typeof d=="string"){if(Wq(d))return[];d=s.langAlias?.[d]||d;const m=e[d];if(!m)throw new fn(`Language \`${d}\` is not included in this bundle. You may want to load it from external source.`);return m}return d}function a(d){if(Gq(d))return"none";if(typeof d=="string"){const m=n[d];if(!m)throw new fn(`Theme \`${d}\` is not included in this bundle. You may want to load it from external source.`);return m}return d}const c=(s.themes??[]).map(d=>a(d)),h=(s.langs??[]).map(d=>o(d)),f=await zAe({engine:s.engine??r(),...s,themes:c,langs:h});return{...f,loadLanguage(...d){return f.loadLanguage(...d.map(o))},loadTheme(...d){return f.loadTheme(...d.map(a))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return i}function UAe(t){let e;async function n(r={}){if(e){const i=await e;return await Promise.all([i.loadTheme(...r.themes||[]),i.loadLanguage(...r.langs||[])]),i}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function qAe(t,e){const n=UAe(t);async function r(i,s){const o=await n({langs:[s.lang],themes:"theme"in s?[s.theme]:Object.values(s.themes)}),a=await e?.guessEmbeddedLanguages?.(i,s.lang,o);return a&&await o.loadLanguage(...a),o}return{getSingletonHighlighter(i){return n(i)},async codeToHtml(i,s){return(await r(i,s)).codeToHtml(i,s)},async codeToHast(i,s){return(await r(i,s)).codeToHast(i,s)},async codeToTokens(i,s){return(await r(i,s)).codeToTokens(i,s)},async codeToTokensBase(i,s){return(await r(i,s)).codeToTokensBase(i,s)},async codeToTokensWithThemes(i,s){return(await r(i,s)).codeToTokensWithThemes(i,s)},async getLastGrammarState(i,s){return(await n({langs:[s.lang],themes:[s.theme]})).getLastGrammarState(i,s)}}}const eW=[{id:"abap",name:"ABAP",import:(()=>$(()=>import("./abap.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>$(()=>import("./actionscript-3.js"),[]))},{id:"ada",name:"Ada",import:(()=>$(()=>import("./ada.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>$(()=>import("./angular-html.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>$(()=>import("./angular-ts.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>$(()=>import("./apache.js"),[]))},{id:"apex",name:"Apex",import:(()=>$(()=>import("./apex.js"),[]))},{id:"apl",name:"APL",import:(()=>$(()=>import("./apl.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>$(()=>import("./applescript.js"),[]))},{id:"ara",name:"Ara",import:(()=>$(()=>import("./ara.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>$(()=>import("./asciidoc.js"),[]))},{id:"asm",name:"Assembly",import:(()=>$(()=>import("./asm.js"),[]))},{id:"astro",name:"Astro",import:(()=>$(()=>import("./astro.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>$(()=>import("./awk.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>$(()=>import("./ballerina.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>$(()=>import("./bat.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>$(()=>import("./beancount.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>$(()=>import("./berry.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>$(()=>import("./bibtex.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>$(()=>import("./bicep.js"),[]))},{id:"blade",name:"Blade",import:(()=>$(()=>import("./blade.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>$(()=>import("./bsl.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>$(()=>import("./c.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>$(()=>import("./cadence.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>$(()=>import("./cairo.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>$(()=>import("./clarity.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>$(()=>import("./clojure.js"),[]))},{id:"cmake",name:"CMake",import:(()=>$(()=>import("./cmake.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>$(()=>import("./cobol.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>$(()=>import("./codeowners.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>$(()=>import("./codeql.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>$(()=>import("./coffee.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>$(()=>import("./common-lisp.js"),[]))},{id:"coq",name:"Coq",import:(()=>$(()=>import("./coq.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>$(()=>import("./cpp.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>$(()=>import("./crystal.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>$(()=>import("./csharp.js"),[]))},{id:"css",name:"CSS",import:(()=>$(()=>import("./css.js"),[]))},{id:"csv",name:"CSV",import:(()=>$(()=>import("./csv.js"),[]))},{id:"cue",name:"CUE",import:(()=>$(()=>import("./cue.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>$(()=>import("./cypher.js"),[]))},{id:"d",name:"D",import:(()=>$(()=>import("./d.js"),[]))},{id:"dart",name:"Dart",import:(()=>$(()=>import("./dart.js"),[]))},{id:"dax",name:"DAX",import:(()=>$(()=>import("./dax.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>$(()=>import("./desktop.js"),[]))},{id:"diff",name:"Diff",import:(()=>$(()=>import("./diff.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>$(()=>import("./docker.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>$(()=>import("./dotenv.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>$(()=>import("./dream-maker.js"),[]))},{id:"edge",name:"Edge",import:(()=>$(()=>import("./edge.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>$(()=>import("./elixir.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>$(()=>import("./elm.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>$(()=>import("./emacs-lisp.js"),[]))},{id:"erb",name:"ERB",import:(()=>$(()=>import("./erb.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>$(()=>import("./erlang.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>$(()=>import("./fennel.js"),[]))},{id:"fish",name:"Fish",import:(()=>$(()=>import("./fish.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>$(()=>import("./fluent.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>$(()=>import("./fortran-fixed-form.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>$(()=>import("./fortran-free-form.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>$(()=>import("./fsharp.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>$(()=>import("./gdresource.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>$(()=>import("./gdscript.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>$(()=>import("./gdshader.js"),[]))},{id:"genie",name:"Genie",import:(()=>$(()=>import("./genie.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>$(()=>import("./gherkin.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>$(()=>import("./git-commit.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>$(()=>import("./git-rebase.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>$(()=>import("./gleam.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>$(()=>import("./glimmer-js.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>$(()=>import("./glimmer-ts.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>$(()=>import("./glsl.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>$(()=>import("./gnuplot.js"),[]))},{id:"go",name:"Go",import:(()=>$(()=>import("./go.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>$(()=>import("./graphql.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>$(()=>import("./groovy.js"),[]))},{id:"hack",name:"Hack",import:(()=>$(()=>import("./hack.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>$(()=>import("./haml.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>$(()=>import("./handlebars.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>$(()=>import("./haskell.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>$(()=>import("./haxe.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>$(()=>import("./hcl.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>$(()=>import("./hjson.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>$(()=>import("./hlsl.js"),[]))},{id:"html",name:"HTML",import:(()=>$(()=>import("./html.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>$(()=>import("./html-derivative.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>$(()=>import("./http.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hxml",name:"HXML",import:(()=>$(()=>import("./hxml.js"),__vite__mapDeps([55,56])))},{id:"hy",name:"Hy",import:(()=>$(()=>import("./hy.js"),[]))},{id:"imba",name:"Imba",import:(()=>$(()=>import("./imba.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>$(()=>import("./ini.js"),[]))},{id:"java",name:"Java",import:(()=>$(()=>import("./java.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js"],import:(()=>$(()=>import("./javascript.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>$(()=>import("./jinja.js"),__vite__mapDeps([57,1,2,3])))},{id:"jison",name:"Jison",import:(()=>$(()=>import("./jison.js"),__vite__mapDeps([58,2])))},{id:"json",name:"JSON",import:(()=>$(()=>import("./json.js"),[]))},{id:"json5",name:"JSON5",import:(()=>$(()=>import("./json5.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>$(()=>import("./jsonc.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>$(()=>import("./jsonl.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>$(()=>import("./jsonnet.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>$(()=>import("./jssm.js"),[]))},{id:"jsx",name:"JSX",import:(()=>$(()=>import("./jsx.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>$(()=>import("./julia.js"),__vite__mapDeps([59,23,24,25,26,16,20,2,60])))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>$(()=>import("./kotlin.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>$(()=>import("./kusto.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>$(()=>import("./latex.js"),__vite__mapDeps([61,62,60])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>$(()=>import("./lean.js"),[]))},{id:"less",name:"Less",import:(()=>$(()=>import("./less.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>$(()=>import("./liquid.js"),__vite__mapDeps([63,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>$(()=>import("./llvm.js"),[]))},{id:"log",name:"Log file",import:(()=>$(()=>import("./log.js"),[]))},{id:"logo",name:"Logo",import:(()=>$(()=>import("./logo.js"),[]))},{id:"lua",name:"Lua",import:(()=>$(()=>import("./lua.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>$(()=>import("./luau.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>$(()=>import("./make.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>$(()=>import("./markdown.js"),[]))},{id:"marko",name:"Marko",import:(()=>$(()=>import("./marko.js"),__vite__mapDeps([64,3,65,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>$(()=>import("./matlab.js"),[]))},{id:"mdc",name:"MDC",import:(()=>$(()=>import("./mdc.js"),__vite__mapDeps([66,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>$(()=>import("./mdx.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>$(()=>import("./mermaid.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>$(()=>import("./mipsasm.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>$(()=>import("./mojo.js"),[]))},{id:"move",name:"Move",import:(()=>$(()=>import("./move.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>$(()=>import("./narrat.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>$(()=>import("./nextflow.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>$(()=>import("./nginx.js"),__vite__mapDeps([67,37,26])))},{id:"nim",name:"Nim",import:(()=>$(()=>import("./nim.js"),__vite__mapDeps([68,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>$(()=>import("./nix.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>$(()=>import("./nushell.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>$(()=>import("./objective-c.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>$(()=>import("./objective-cpp.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>$(()=>import("./ocaml.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>$(()=>import("./pascal.js"),[]))},{id:"perl",name:"Perl",import:(()=>$(()=>import("./perl.js"),__vite__mapDeps([69,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>$(()=>import("./php.js"),__vite__mapDeps([70,1,2,3,7,8,16,9])))},{id:"plsql",name:"PL/SQL",import:(()=>$(()=>import("./plsql.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>$(()=>import("./po.js"),[]))},{id:"polar",name:"Polar",import:(()=>$(()=>import("./polar.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>$(()=>import("./postcss.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>$(()=>import("./powerquery.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>$(()=>import("./powershell.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>$(()=>import("./prisma.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>$(()=>import("./prolog.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>$(()=>import("./proto.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>$(()=>import("./pug.js"),__vite__mapDeps([71,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>$(()=>import("./puppet.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>$(()=>import("./purescript.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>$(()=>import("./python.js"),[]))},{id:"qml",name:"QML",import:(()=>$(()=>import("./qml.js"),__vite__mapDeps([72,2])))},{id:"qmldir",name:"QML Directory",import:(()=>$(()=>import("./qmldir.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>$(()=>import("./qss.js"),[]))},{id:"r",name:"R",import:(()=>$(()=>import("./r.js"),[]))},{id:"racket",name:"Racket",import:(()=>$(()=>import("./racket.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>$(()=>import("./raku.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>$(()=>import("./razor.js"),__vite__mapDeps([73,1,2,3,74])))},{id:"reg",name:"Windows Registry Script",import:(()=>$(()=>import("./reg.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>$(()=>import("./regexp.js"),[]))},{id:"rel",name:"Rel",import:(()=>$(()=>import("./rel.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>$(()=>import("./riscv.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>$(()=>import("./rst.js"),__vite__mapDeps([75,15,1,2,3,23,24,25,26,16,20,28,38,76,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>$(()=>import("./ruby.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>$(()=>import("./rust.js"),[]))},{id:"sas",name:"SAS",import:(()=>$(()=>import("./sas.js"),__vite__mapDeps([77,16])))},{id:"sass",name:"Sass",import:(()=>$(()=>import("./sass.js"),[]))},{id:"scala",name:"Scala",import:(()=>$(()=>import("./scala.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>$(()=>import("./scheme.js"),[]))},{id:"scss",name:"SCSS",import:(()=>$(()=>import("./scss.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>$(()=>import("./sdbl.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>$(()=>import("./shaderlab.js"),__vite__mapDeps([78,79])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>$(()=>import("./shellscript.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>$(()=>import("./shellsession.js"),__vite__mapDeps([80,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>$(()=>import("./smalltalk.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>$(()=>import("./solidity.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>$(()=>import("./soy.js"),__vite__mapDeps([81,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>$(()=>import("./sparql.js"),__vite__mapDeps([82,83])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>$(()=>import("./splunk.js"),[]))},{id:"sql",name:"SQL",import:(()=>$(()=>import("./sql.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>$(()=>import("./ssh-config.js"),[]))},{id:"stata",name:"Stata",import:(()=>$(()=>import("./stata.js"),__vite__mapDeps([84,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>$(()=>import("./stylus.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>$(()=>import("./svelte.js"),__vite__mapDeps([85,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>$(()=>import("./swift.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>$(()=>import("./system-verilog.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>$(()=>import("./systemd.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>$(()=>import("./talonscript.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>$(()=>import("./tasl.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>$(()=>import("./tcl.js"),[]))},{id:"templ",name:"Templ",import:(()=>$(()=>import("./templ.js"),__vite__mapDeps([86,87,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>$(()=>import("./terraform.js"),[]))},{id:"tex",name:"TeX",import:(()=>$(()=>import("./tex.js"),__vite__mapDeps([62,60])))},{id:"toml",name:"TOML",import:(()=>$(()=>import("./toml.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>$(()=>import("./ts-tags.js"),__vite__mapDeps([88,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>$(()=>import("./tsv.js"),[]))},{id:"tsx",name:"TSX",import:(()=>$(()=>import("./tsx.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>$(()=>import("./turtle.js"),[]))},{id:"twig",name:"Twig",import:(()=>$(()=>import("./twig.js"),__vite__mapDeps([89,3,2,5,70,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:(()=>$(()=>import("./typescript.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>$(()=>import("./typespec.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>$(()=>import("./typst.js"),[]))},{id:"v",name:"V",import:(()=>$(()=>import("./v.js"),[]))},{id:"vala",name:"Vala",import:(()=>$(()=>import("./vala.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>$(()=>import("./vb.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>$(()=>import("./verilog.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>$(()=>import("./vhdl.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>$(()=>import("./viml.js"),[]))},{id:"vue",name:"Vue",import:(()=>$(()=>import("./vue.js"),__vite__mapDeps([90,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>$(()=>import("./vue-html.js"),__vite__mapDeps([91,90,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>$(()=>import("./vue-vine.js"),__vite__mapDeps([92,3,5,65,93,12,90,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>$(()=>import("./vyper.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>$(()=>import("./wasm.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>$(()=>import("./wenyan.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>$(()=>import("./wgsl.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>$(()=>import("./wikitext.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>$(()=>import("./wit.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>$(()=>import("./wolfram.js"),[]))},{id:"xml",name:"XML",import:(()=>$(()=>import("./xml.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>$(()=>import("./xsl.js"),__vite__mapDeps([94,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>$(()=>import("./yaml.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>$(()=>import("./zenscript.js"),[]))},{id:"zig",name:"Zig",import:(()=>$(()=>import("./zig.js"),[]))}],WAe=Object.fromEntries(eW.map(t=>[t.id,t.import])),GAe=Object.fromEntries(eW.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),KAe={...WAe,...GAe},YAe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>$(()=>import("./andromeeda.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>$(()=>import("./aurora-x.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>$(()=>import("./ayu-dark.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>$(()=>import("./catppuccin-frappe.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>$(()=>import("./catppuccin-latte.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>$(()=>import("./catppuccin-macchiato.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>$(()=>import("./catppuccin-mocha.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>$(()=>import("./dark-plus.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>$(()=>import("./dracula.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>$(()=>import("./dracula-soft.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>$(()=>import("./everforest-dark.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>$(()=>import("./everforest-light.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>$(()=>import("./github-dark.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>$(()=>import("./github-dark-default.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>$(()=>import("./github-dark-dimmed.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>$(()=>import("./github-dark-high-contrast.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>$(()=>import("./github-light.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>$(()=>import("./github-light-default.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>$(()=>import("./github-light-high-contrast.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>$(()=>import("./gruvbox-dark-hard.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>$(()=>import("./gruvbox-dark-medium.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>$(()=>import("./gruvbox-dark-soft.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>$(()=>import("./gruvbox-light-hard.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>$(()=>import("./gruvbox-light-medium.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>$(()=>import("./gruvbox-light-soft.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>$(()=>import("./houston.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>$(()=>import("./kanagawa-dragon.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>$(()=>import("./kanagawa-lotus.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>$(()=>import("./kanagawa-wave.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>$(()=>import("./laserwave.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>$(()=>import("./light-plus.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>$(()=>import("./material-theme.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>$(()=>import("./material-theme-darker.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>$(()=>import("./material-theme-lighter.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>$(()=>import("./material-theme-ocean.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>$(()=>import("./material-theme-palenight.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>$(()=>import("./min-dark.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>$(()=>import("./min-light.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>$(()=>import("./monokai.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>$(()=>import("./night-owl.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>$(()=>import("./nord.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>$(()=>import("./one-dark-pro.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>$(()=>import("./one-light.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>$(()=>import("./plastic.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>$(()=>import("./poimandres.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>$(()=>import("./red.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>$(()=>import("./rose-pine.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>$(()=>import("./rose-pine-dawn.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>$(()=>import("./rose-pine-moon.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>$(()=>import("./slack-dark.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>$(()=>import("./slack-ochin.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>$(()=>import("./snazzy-light.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>$(()=>import("./solarized-dark.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>$(()=>import("./solarized-light.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>$(()=>import("./synthwave-84.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>$(()=>import("./tokyo-night.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>$(()=>import("./vesper.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>$(()=>import("./vitesse-black.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>$(()=>import("./vitesse-dark.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>$(()=>import("./vitesse-light.js"),[]))}],XAe=Object.fromEntries(YAe.map(t=>[t.id,t.import]));class TR extends Error{constructor(e){super(e),this.name="ShikiError"}}function JAe(){return 2147483648}function QAe(){return typeof performance<"u"?performance.now():Date.now()}const ZAe=(t,e)=>t+(e-t%e)%e;async function eke(t){let e,n;const r={};function i(y){n=y,r.HEAPU8=new Uint8Array(y),r.HEAPU32=new Uint32Array(y)}function s(y,b,w){r.HEAPU8.copyWithin(y,b,b+w)}function o(y){try{return e.grow(y-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(y){const b=r.HEAPU8.length;y=y>>>0;const w=JAe();if(y>w)return!1;for(let S=1;S<=4;S*=2){let _=b*(1+.2/S);_=Math.min(_,y+100663296);const A=Math.min(w,ZAe(Math.max(y,_),65536));if(o(A))return!0}return!1}const c=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(y,b,w=1024){const S=b+w;let _=b;for(;y[_]&&!(_>=S);)++_;if(_-b>16&&y.buffer&&c)return c.decode(y.subarray(b,_));let A="";for(;b<_;){let k=y[b++];if(!(k&128)){A+=String.fromCharCode(k);continue}const P=y[b++]&63;if((k&224)===192){A+=String.fromCharCode((k&31)<<6|P);continue}const M=y[b++]&63;if((k&240)===224?k=(k&15)<<12|P<<6|M:k=(k&7)<<18|P<<12|M<<6|y[b++]&63,k<65536)A+=String.fromCharCode(k);else{const O=k-65536;A+=String.fromCharCode(55296|O>>10,56320|O&1023)}}return A}function f(y,b){return y?h(r.HEAPU8,y,b):""}const d={emscripten_get_now:QAe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function m(){const b=await t({env:d,wasi_snapshot_preview1:d});e=b.memory,i(e.buffer),Object.assign(r,b),r.UTF8ToString=f}return await m(),r}var tke=Object.defineProperty,nke=(t,e,n)=>e in t?tke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cn=(t,e,n)=>nke(t,typeof e!="symbol"?e+"":e,n);let In=null;function rke(t){throw new TR(t.UTF8ToString(t.getLastOnigError()))}class m1{constructor(e){Cn(this,"utf16Length"),Cn(this,"utf8Length"),Cn(this,"utf16Value"),Cn(this,"utf8Value"),Cn(this,"utf16OffsetToUtf8"),Cn(this,"utf8OffsetToUtf16");const n=e.length,r=m1._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let c=0;for(let h=0;h<n;h++){const f=e.charCodeAt(h);let d=f,m=!1;if(f>=55296&&f<=56319&&h+1<n){const y=e.charCodeAt(h+1);y>=56320&&y<=57343&&(d=(f-55296<<10)+65536|y-56320,m=!0)}i&&(s[h]=c,m&&(s[h+1]=c),d<=127?o[c+0]=h:d<=2047?(o[c+0]=h,o[c+1]=h):d<=65535?(o[c+0]=h,o[c+1]=h,o[c+2]=h):(o[c+0]=h,o[c+1]=h,o[c+2]=h,o[c+3]=h)),d<=127?a[c++]=d:d<=2047?(a[c++]=192|(d&1984)>>>6,a[c++]=128|(d&63)>>>0):d<=65535?(a[c++]=224|(d&61440)>>>12,a[c++]=128|(d&4032)>>>6,a[c++]=128|(d&63)>>>0):(a[c++]=240|(d&1835008)>>>18,a[c++]=128|(d&258048)>>>12,a[c++]=128|(d&4032)>>>6,a[c++]=128|(d&63)>>>0),m&&h++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const c=e.charCodeAt(r+1);c>=56320&&c<=57343&&(o=(s-55296<<10)+65536|c-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const g1=class Ks{constructor(e){if(Cn(this,"id",++Ks.LAST_ID),Cn(this,"_onigBinding"),Cn(this,"content"),Cn(this,"utf16Length"),Cn(this,"utf8Length"),Cn(this,"utf16OffsetToUtf8"),Cn(this,"utf8OffsetToUtf16"),Cn(this,"ptr"),!In)throw new TR("Must invoke loadWasm first.");this._onigBinding=In,this.content=e;const n=new m1(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Ks._sharedPtrInUse?(Ks._sharedPtr||(Ks._sharedPtr=In.omalloc(1e4)),Ks._sharedPtrInUse=!0,In.HEAPU8.set(n.utf8Value,Ks._sharedPtr),this.ptr=Ks._sharedPtr):this.ptr=n.createString(In)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Ks._sharedPtr?Ks._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Cn(g1,"LAST_ID",0);Cn(g1,"_sharedPtr",0);Cn(g1,"_sharedPtrInUse",!1);let tW=g1;class ike{constructor(e){if(Cn(this,"_onigBinding"),Cn(this,"_ptr"),!In)throw new TR("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,c=e.length;a<c;a++){const h=new m1(e[a]);n[a]=h.createString(In),r[a]=h.utf8Length}const i=In.omalloc(4*e.length);In.HEAPU32.set(n,i/4);const s=In.omalloc(4*e.length);In.HEAPU32.set(r,s/4);const o=In.createOnigScanner(i,s,e.length);for(let a=0,c=e.length;a<c;a++)In.ofree(n[a]);In.ofree(s),In.ofree(i),o===0&&rke(In),this._onigBinding=In,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new tW(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let c=o/4;const h=a[c++],f=a[c++],d=[];for(let m=0;m<f;m++){const y=e.convertUtf8OffsetToUtf16(a[c++]),b=e.convertUtf8OffsetToUtf16(a[c++]);d[m]={start:y,end:b,length:b-y}}return{index:h,captureIndices:d}}}function ske(t){return typeof t.instantiator=="function"}function oke(t){return typeof t.default=="function"}function ake(t){return typeof t.data<"u"}function lke(t){return typeof Response<"u"&&t instanceof Response}function cke(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Gy;function uke(t){if(Gy)return Gy;async function e(){In=await eke(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),ske(r)?r=await r.instantiator(n):oke(r)?r=await r.default(n):(ake(r)&&(r=r.data),lke(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await hke(r)(n):r=await fke(r)(n):cke(r)?r=await M_(r)(n):r instanceof WebAssembly.Module?r=await M_(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await M_(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Gy=e(),Gy}function M_(t){return e=>WebAssembly.instantiate(t,e)}function hke(t){return e=>WebAssembly.instantiateStreaming(t,e)}function fke(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function dke(t){return t&&await uke(t),{createScanner(e){return new ike(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new tW(e)}}}const pke=HAe({langs:KAe,themes:XAe,engine:()=>dke($(()=>import("./wasm2.js"),[]))}),{getSingletonHighlighter:Z5}=qAe(pke,{guessEmbeddedLanguages:sAe});async function mke(t,e){try{return await Z5({langs:[t],themes:e})}catch(n){if(n instanceof Error&&n.message.includes("Language"))return await Z5({langs:["plaintext"],themes:e});throw n}}var nW=(t,e,n,r={})=>c_e(t,e,n,mke,r),gke=h_e(nW),yke=gke;const rW=({code:t,language:e,theme:n={dark:"kanagawa-wave",light:"kanagawa-lotus"},className:r,addDefaultStyles:i=!0,showLanguage:s=!1,...o})=>{const a="aui-shiki-base [&_pre]:overflow-x-auto [&_pre]:rounded-b-lg [&_pre]:!bg-muted/75 [&_pre]:p-4";return nW(t,e,n)?C.jsx(yke,{...o,language:e,theme:n,addDefaultStyles:i,showLanguage:s,defaultColor:"light-dark()",className:Ve(a,r),children:t.trim()}):C.jsx("div",{className:"px-[12px] pb-[12px] bg-[var(--chat-message-code-block-background-color)] rounded-b-[12px]",children:C.jsx("pre",{className:Ve("overflow-x-auto bg-[var(--chat-message-code-block-pre-background-color)] border border-[var(--chat-message-code-block-border-color)] rounded-[4px] p-[6px]",r),children:t.trim()})})};rW.displayName="SyntaxHighlighter";const sx="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5%2010.0078C18.3284%2010.0078%2019%2010.6794%2019%2011.5078V17.5039C18.9999%2018.3323%2018.3284%2019.0039%2017.5%2019.0039H11.5C10.6716%2019.0039%2010.0001%2018.3323%2010%2017.5039V11.5078C10%2010.6794%2010.6716%2010.0078%2011.5%2010.0078H17.5ZM11.5%2011.0078C11.2239%2011.0078%2011%2011.2317%2011%2011.5078V17.5039C11.0001%2017.78%2011.2239%2018.0039%2011.5%2018.0039H17.5C17.7761%2018.0039%2017.9999%2017.78%2018%2017.5039V11.5078C18%2011.2317%2017.7761%2011.0078%2017.5%2011.0078H11.5ZM12.5%205.00781C13.3284%205.00781%2014%205.67939%2014%206.50781V8.50391C13.9999%208.77999%2013.7761%209.00391%2013.5%209.00391C13.2239%209.00391%2013.0001%208.77999%2013%208.50391V6.50781C13%206.23167%2012.7761%206.00781%2012.5%206.00781H6.5C6.22386%206.00781%206%206.23167%206%206.50781V12.5039C6.00006%2012.78%206.22389%2013.0039%206.5%2013.0039H8.5C8.77614%2013.0039%209%2013.2278%209%2013.5039C8.99993%2013.78%208.7761%2014.0039%208.5%2014.0039H6.5C5.67161%2014.0039%205.00006%2013.3323%205%2012.5039V6.50781C5%205.67939%205.67157%205.00781%206.5%205.00781H12.5Z'%20fill='%23383838'/%3e%3c/svg%3e";var bke=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vke="VisuallyHidden",iW=E.forwardRef((t,e)=>C.jsx(st.span,{...t,ref:e,style:{...bke,...t.style}}));iW.displayName=vke;var xke=iW,[y1]=ra("Tooltip",[wx]),b1=wx(),sW="TooltipProvider",wke=700,dk="tooltip.open",[Ske,RR]=y1(sW),oW=t=>{const{__scopeTooltip:e,delayDuration:n=wke,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=E.useRef(!0),a=E.useRef(!1),c=E.useRef(0);return E.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),C.jsx(Ske,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:E.useCallback(h=>{a.current=h},[]),disableHoverableContent:i,children:s})};oW.displayName=sW;var km="Tooltip",[_ke,ng]=y1(km),aW=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,c=RR(km,t.__scopeTooltip),h=b1(e),[f,d]=E.useState(null),m=ol(),y=E.useRef(0),b=o??c.disableHoverableContent,w=a??c.delayDuration,S=E.useRef(!1),[_,A]=qh({prop:r,defaultProp:i??!1,onChange:L=>{L?(c.onOpen(),document.dispatchEvent(new CustomEvent(dk))):c.onClose(),s?.(L)},caller:km}),k=E.useMemo(()=>_?S.current?"delayed-open":"instant-open":"closed",[_]),P=E.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S.current=!1,A(!0)},[A]),M=E.useCallback(()=>{window.clearTimeout(y.current),y.current=0,A(!1)},[A]),O=E.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{S.current=!0,A(!0),y.current=0},w)},[w,A]);return E.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),C.jsx(O6,{...h,children:C.jsx(_ke,{scope:e,contentId:m,open:_,stateAttribute:k,trigger:f,onTriggerChange:d,onTriggerEnter:E.useCallback(()=>{c.isOpenDelayedRef.current?O():P()},[c.isOpenDelayedRef,O,P]),onTriggerLeave:E.useCallback(()=>{b?M():(window.clearTimeout(y.current),y.current=0)},[M,b]),onOpen:P,onClose:M,disableHoverableContent:b,children:n})})};aW.displayName=km;var pk="TooltipTrigger",lW=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=ng(pk,n),s=RR(pk,n),o=b1(n),a=E.useRef(null),c=jt(e,a,i.onTriggerChange),h=E.useRef(!1),f=E.useRef(!1),d=E.useCallback(()=>h.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),C.jsx(P6,{asChild:!0,...o,children:C.jsx(st.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:Ie(t.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ie(t.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:Ie(t.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ie(t.onFocus,()=>{h.current||i.onOpen()}),onBlur:Ie(t.onBlur,i.onClose),onClick:Ie(t.onClick,i.onClose)})})});lW.displayName=pk;var MR="TooltipPortal",[Cke,Ake]=y1(MR,{forceMount:void 0}),cW=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=ng(MR,e);return C.jsx(Cke,{scope:e,forceMount:n,children:C.jsx(As,{present:n||s.open,children:C.jsx(Sx,{asChild:!0,container:i,children:r})})})};cW.displayName=MR;var zh="TooltipContent",uW=E.forwardRef((t,e)=>{const n=Ake(zh,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=ng(zh,t.__scopeTooltip);return C.jsx(As,{present:r||o.open,children:o.disableHoverableContent?C.jsx(hW,{side:i,...s,ref:e}):C.jsx(kke,{side:i,...s,ref:e})})}),kke=E.forwardRef((t,e)=>{const n=ng(zh,t.__scopeTooltip),r=RR(zh,t.__scopeTooltip),i=E.useRef(null),s=jt(e,i),[o,a]=E.useState(null),{trigger:c,onClose:h}=n,f=i.current,{onPointerInTransitChange:d}=r,m=E.useCallback(()=>{a(null),d(!1)},[d]),y=E.useCallback((b,w)=>{const S=b.currentTarget,_={x:b.clientX,y:b.clientY},A=Oke(_,S.getBoundingClientRect()),k=Pke(_,A),P=Dke(w.getBoundingClientRect()),M=Ike([...k,...P]);a(M),d(!0)},[d]);return E.useEffect(()=>()=>m(),[m]),E.useEffect(()=>{if(c&&f){const b=S=>y(S,f),w=S=>y(S,c);return c.addEventListener("pointerleave",b),f.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",b),f.removeEventListener("pointerleave",w)}}},[c,f,y,m]),E.useEffect(()=>{if(o){const b=w=>{const S=w.target,_={x:w.clientX,y:w.clientY},A=c?.contains(S)||f?.contains(S),k=!Lke(_,o);A?m():k&&(m(),h())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,f,o,h,m]),C.jsx(hW,{...t,ref:s})}),[Eke,Tke]=y1(km,{isInside:!1}),Rke=LX("TooltipContent"),hW=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=ng(zh,n),h=b1(n),{onClose:f}=c;return E.useEffect(()=>(document.addEventListener(dk,f),()=>document.removeEventListener(dk,f)),[f]),E.useEffect(()=>{if(c.trigger){const d=m=>{m.target?.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),C.jsx(gx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:C.jsxs(D6,{"data-state":c.stateAttribute,...h,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx(Rke,{children:r}),C.jsx(Eke,{scope:n,isInside:!0,children:C.jsx(xke,{id:c.contentId,role:"tooltip",children:i||r})})]})})});uW.displayName=zh;var fW="TooltipArrow",Mke=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=b1(n);return Tke(fW,n).isInside?null:C.jsx(L6,{...i,...r,ref:e})});Mke.displayName=fW;function Oke(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Pke(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Dke(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Lke(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],h=a.x,f=a.y,d=c.x,m=c.y;f>r!=m>r&&n<(d-h)*(r-f)/(m-f)+h&&(i=!i)}return i}function Ike(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Nke(e)}function Nke(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Bke=oW,jke=aW,$ke=lW,Vke=cW,Fke=uW;const zke=({delayDuration:t=0,...e})=>C.jsx(Bke,{"data-slot":"tooltip-provider",delayDuration:t,...e}),Hke=({...t})=>C.jsx(zke,{children:C.jsx(jke,{"data-slot":"tooltip",...t})}),Uke=({...t})=>C.jsx($ke,{"data-slot":"tooltip-trigger",...t}),qke=({className:t,sideOffset:e=0,children:n,...r})=>C.jsx(Vke,{container:document.getElementById("app"),children:C.jsx(Fke,{"data-slot":"tooltip-content",sideOffset:e,className:Ve("mt-[4px]","bg-[var(--tooltip-background-color)] text-[var(--tooltip-text-color)] p-[4px] rounded-[4px] text-[12px] font-[400] leading-[16px]",t),...r,children:n})}),ta=E.forwardRef(({children:t,tooltip:e,side:n="bottom",visible:r=!0,className:i,...s},o)=>C.jsxs(Hke,{children:[C.jsx(Uke,{asChild:!0,children:C.jsx("div",{className:Ve("flex items-center gap-2",i),ref:o,...s,children:t})}),C.jsx(qke,{className:r?"":"hidden",side:n,children:e})]}));ta.displayName="TooltipIconButton";const Wke=({copiedDuration:t=3e3}={})=>{const[e,n]=E.useState(!1);return{isCopied:e,copyToClipboard:i=>{i&&navigator.clipboard.writeText(i).then(()=>{n(!0),setTimeout(()=>n(!1),t)})}}},Gke=({language:t,code:e})=>{const{isCopied:n,copyToClipboard:r}=Wke(),i=()=>{!e||n||r(e)};return C.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 rounded-t-lg bg-[var(--chat-message-code-block-background-color)] text-[var(--chat-message-code-block-header-color)] text-[14px] leading-[20px] px-[12px] pt-[12px] pb-[8px]",children:[C.jsx("span",{className:"lowercase",children:t}),C.jsxs(ta,{tooltip:"Copy",onClick:i,visible:!n,children:[!n&&C.jsx(Zt,{className:"cursor-pointer",src:sx}),n&&C.jsx(Zt,{src:Mh})]})]})},Kke=HSe({SyntaxHighlighter:rW,h1:({className:t,...e})=>C.jsx("h1",{className:Ve("mb-8 scroll-m-20 text-[28px] leading-[36px] font-bold last:mb-0",t),...e}),h2:({className:t,...e})=>C.jsx("h2",{className:Ve("mb-4 mt-8 scroll-m-20 text-[24px] leading-[32px] font-bold first:mt-0 last:mb-0",t),...e}),h3:({className:t,...e})=>C.jsx("h3",{className:Ve("mb-4 mt-6 scroll-m-20 text-[20px] leading-[28px] font-bold first:mt-0 last:mb-0",t),...e}),h4:({className:t,...e})=>C.jsx("h4",{className:Ve("mb-4 mt-6 scroll-m-20 text-[18px] leading-[24px] font-bold first:mt-0 last:mb-0",t),...e}),h5:({className:t,...e})=>C.jsx("h5",{className:Ve("my-4 text-[16px] leading-[22px] font-bold first:mt-0 last:mb-0",t),...e}),h6:({className:t,...e})=>C.jsx("h6",{className:Ve("my-4 text-[14px] leading-[20px] font-bold first:mt-0 last:mb-0",t),...e}),p:({className:t,...e})=>C.jsx("p",{className:Ve("mb-5 mt-5 text-[14px] font-normal leading-[20px] first:mt-0 last:mb-0",t),...e}),a:({className:t,...e})=>C.jsx("a",{className:Ve("text-[var(--chat-link-color)] font-medium underline underline-offset-4",t),...e}),blockquote:({className:t,...e})=>C.jsx("blockquote",{className:Ve("border-l-2 pl-6 italic",t),...e}),ul:({className:t,...e})=>C.jsx("ul",{className:Ve("my-5 ml-6 list-disc [&>li]:mt-[4px]",t),...e}),ol:({className:t,...e})=>C.jsx("ol",{className:Ve("my-5 ml-6 list-decimal [&>li]:mt-[4px]",t),...e}),hr:({className:t,...e})=>C.jsx("hr",{className:Ve("my-5 border-b border-[var(--chat-message-divider-color)]",t),...e}),table:({className:t,...e})=>C.jsx("table",{className:Ve("my-5 w-full border-separate border-spacing-0 overflow-y-auto",t),...e}),th:({className:t,...e})=>C.jsx("th",{className:Ve("px-4 py-2 border-b border-[var(--chat-message-divider-color)] text-left text-[var(--chat-message-th-color)] text-[14px] leading-[20px] font-bold [&[align=center]]:text-center [&[align=right]]:text-right",t),...e}),td:({className:t,...e})=>C.jsx("td",{className:Ve("border-b border-[var(--chat-message-divider-color)] text-[var(--chat-message-td-color)] text-[14px] leading-[20px] px-4 py-2 text-left [&[align=center]]:text-center [&[align=right]]:text-right",t),...e}),tr:({className:t,...e})=>C.jsx("tr",{className:Ve("m-0 border-b border-[var(--chat-message-divider-color)]",t),...e}),sup:({className:t,...e})=>C.jsx("sup",{className:Ve("[&>a]:text-xs [&>a]:no-underline",t),...e}),pre:({className:t,...e})=>C.jsx("div",{className:"px-[12px] pb-[12px] bg-[var(--chat-message-code-block-background-color)] rounded-[12px]",children:C.jsx("pre",{className:Ve("overflow-x-auto bg-[var(--chat-message-code-block-pre-background-color)] border border-[var(--chat-message-code-block-border-color)] rounded-[4px] p-[6px]",t),...e})}),code:function({className:e,...n}){const r=wq();return C.jsx("code",{className:Ve(!r&&"font-bold italic",e),...n})},CodeHeader:Gke}),Yke=()=>C.jsx(s_e,{remarkPlugins:[uwe],className:"aui-md",components:Kke}),dW=E.memo(Yke),Xke=()=>{const e=GB().content.filter(n=>n.type==="file").map(n=>({type:JSON.parse(n.mimeType).type,content:n.data,path:JSON.parse(n.mimeType).path}));return C.jsx(Bk,{asChild:!0,children:C.jsxs(eR.div,{className:"mx-auto grid w-full max-w-[var(--thread-max-width)] auto-rows-auto grid-cols-[minmax(72px,1fr)_auto] gap-y-1 px-[var(--thread-padding-x)] py-4 [&:where(>*)]:col-start-2",initial:{y:5,opacity:0},animate:{y:0,opacity:1},"data-role":"user",children:[e.length>0?C.jsx("div",{className:"col-span-full col-start-1 row-start-1 mb-[8px] overflow-x-auto",children:C.jsx("div",{className:"flex flex-row gap-[8px] justify-end w-max ml-auto",children:e.map(n=>C.jsx(hU,{file:n,withoutClose:!0},n.path))})}):null,C.jsx("div",{className:"bg-[var(--chat-user-message-background)] text-[var(--chat-user-message-color)] col-start-2 break-words rounded-[16px] rounded-br-[0px] px-[12px] py-[8px]",children:C.jsx(jk,{components:{Text:dW}})})]})})},pW="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.5%2017.5V18.5C6.5%2019.0523%206.94772%2019.5%207.5%2019.5L17.5%2019.5C18.0523%2019.5%2018.5%2019.0523%2018.5%2018.5V17.5M12.5%2016.5L16.5%2012.5M12.5%2016.5L8.5%2012.5M12.5%2016.5L12.5%204.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Jke="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='7'%20fill='%234A87E7'/%3e%3cpath%20d='M11.5%205.5L7.5%2010.5L5%208'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Qke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%208L3%2012L7%2016M17%208L21%2012L17%2016M14%204L10%2020'%20stroke='%23444444'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",mk="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.5%205C15.0389%205%2017.9999%207.86724%2018%2011.4229C18%2013.0282%2017.3923%2014.5291%2016.3984%2015.6914L19.8535%2019.1465C20.0488%2019.3417%2020.0488%2019.6583%2019.8535%2019.8535C19.6583%2020.0488%2019.3417%2020.0488%2019.1465%2019.8535L15.6943%2016.4014C14.5572%2017.3902%2013.0906%2018%2011.5%2018C7.95263%2018%205%2015.0474%205%2011.5C5%207.95262%207.95263%205%2011.5%205ZM11.5%206C8.50492%206%206%208.50491%206%2011.5C6%2014.4951%208.50492%2017%2011.5%2017C14.4869%2017%2017%2014.4262%2017%2011.4229C16.9999%208.43621%2014.5034%206%2011.5%206Z'%20fill='%23383838'/%3e%3cpath%20d='M11.5%205.5C12.0158%205.5%2012.6412%205.97409%2013.167%207.11328C13.6732%208.21012%2014%209.76059%2014%2011.5C14%2013.2394%2013.6732%2014.7899%2013.167%2015.8867C12.6412%2017.0259%2012.0158%2017.5%2011.5%2017.5C10.9842%2017.5%2010.3588%2017.0259%209.83301%2015.8867C9.32677%2014.7899%209%2013.2394%209%2011.5C9%209.76059%209.32677%208.21012%209.83301%207.11328C10.3588%205.97409%2010.9842%205.5%2011.5%205.5Z'%20stroke='%23383838'/%3e%3cpath%20d='M6%2011.5L17.5%2011.5'%20stroke='%23383838'/%3e%3c/svg%3e",eB="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10%205C10.2761%205%2010.5%205.22386%2010.5%205.5C10.5%205.77614%2010.2761%206%2010%206H6.5C6.22386%206%206%206.22386%206%206.5V17.5C6%2017.7761%206.22386%2018%206.5%2018H17.5C17.7761%2018%2018%2017.7761%2018%2017.5V14C18%2013.7239%2018.2239%2013.5%2018.5%2013.5C18.7761%2013.5%2019%2013.7239%2019%2014V17.5C19%2018.3284%2018.3284%2019%2017.5%2019H6.5C5.67157%2019%205%2018.3284%205%2017.5V6.5C5%205.67157%205.67157%205%206.5%205H10ZM18%205C18.5523%205%2019%205.44772%2019%206V10.5C19%2010.7761%2018.7761%2011%2018.5%2011C18.2239%2011%2018%2010.7761%2018%2010.5V6.70703L11.8535%2012.8535C11.6583%2013.0488%2011.3417%2013.0488%2011.1465%2012.8535C10.9512%2012.6583%2010.9512%2012.3417%2011.1465%2012.1465L17.293%206H13.5C13.2239%206%2013%205.77614%2013%205.5C13%205.22386%2013.2239%205%2013.5%205H18Z'%20fill='%23383838'/%3e%3c/svg%3e",mW=({toolName:t,argsText:e,result:n})=>{const{t:r}=Ot(),[i,s]=E.useState(!0),[o,a]=E.useState(!1),[c,h]=E.useState(!1);E.useEffect(()=>{o&&setTimeout(()=>{a(!1)},2e3)},[o]),E.useEffect(()=>{c&&setTimeout(()=>{h(!1)},2e3)},[c]);const f=t.split("_")[0],d=t.replace(f+"_",""),m=n===void 0,y=d==="web_search",b=d==="web_crawling";let w="";try{w=e?y?JSON.parse(e).query:b?JSON.parse(e).urls[0]:"":""}catch{}return C.jsxs("div",{className:"my-[16px] flex w-full flex-col gap-3",children:[C.jsxs("div",{className:"flex items-center gap-[10px] cursor-pointer",onClick:()=>{if(b){window.open(w,"_blank");return}y&&n===void 0||s(!i)},children:[m?C.jsx(wT,{size:16}):C.jsx(Zt,{src:Jke}),m&&!y&&!b?C.jsx("p",{className:"text-[var(--chat-message-tool-call-header-color)] text-[14px] font-normal leading-[16px]",children:r("ToolExecuted")}):null,C.jsxs("span",{className:"flex items-center gap-[8px] rounded-[4px] ps-[4px] pe-[8px] text-[14px] leading-[20px] font-normal text-[var(--chat-message-tool-call-name-color)] bg-[var(--chat-message-tool-call-name-background-color)] min-w-0 flex-grow",children:[y?C.jsx(Zt,{src:mk}):b?null:C.jsx(Zt,{src:Qke}),C.jsx("span",{className:"truncate",children:y?w:b?`${d} | ${w}`:d})]}),b?C.jsx(Zt,{src:eB}):y&&n===void 0?null:C.jsx(Zt,{src:i?BE:I7})]}),i?null:C.jsxs("div",{className:"flex flex-col gap-[24px] mt-[8px] p-[12px] bg-[var(--chat-message-tool-call-body-background-color)] rounded-[12px]",children:[y?null:C.jsxs("div",{className:"",children:[C.jsxs("p",{className:"flex flex-row items-center justify-between text-[var(--chat-message-tool-call-header-color)] text-[14px] font-bold leading-[20px]",children:[r("ToolCallArguments"),C.jsx(Zt,{src:o?Mh:sx,onClick:()=>a(!0)})]}),C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:e||"{}"})]}),n!==void 0&&C.jsx("div",{className:"",children:y?C.jsx("div",{children:(()=>{try{const S=typeof n=="string"?JSON.parse(n):n;if(S?.error)return C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:typeof n=="string"?n:JSON.stringify(n,null,2)});const _=S?.data||[];return _.length>0?C.jsx("div",{className:"flex flex-col gap-[10px]",children:_.map((A,k)=>C.jsxs("div",{className:"h-[36px] px-[8px] rounded-[4px] flex flex-row items-center justify-between cursor-pointer hover:bg-[var(--drop-down-menu-item-hover-color)] transition-colors",onClick:()=>window.open(A.url,"_blank"),children:[C.jsxs("div",{className:"flex flex-row items-center gap-[8px]",children:[C.jsx(Et,{iconName:mk,size:24,disableHover:!0}),C.jsx("h4",{className:"text-[14px] font-bold text-[var(--chat-message-tool-call-pre-color)]",children:A.title})]}),C.jsx(Et,{iconName:eB,size:24,disableHover:!0})]},k))}):C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:typeof n=="string"?n:JSON.stringify(n,null,2)})}catch{return C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:typeof n=="string"?n:JSON.stringify(n,null,2)})}})()}):C.jsxs(C.Fragment,{children:[C.jsxs("p",{className:"flex flex-row items-center justify-between text-[var(--chat-message-tool-call-header-color)] text-[14px] font-bold leading-[20px]",children:[r("ToolCallResult"),C.jsx(Zt,{src:c?Mh:sx,onClick:()=>h(!0)})]}),C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:typeof n=="string"?n:JSON.stringify(n,null,2)})]})})]})]})},Zke=()=>C.jsx(K6,{children:C.jsx(ej,{className:"border border-[var(--chat-message-error-border-color)] rounded-[4px] p-[6px]",children:C.jsx(tj,{className:"text-[var(--chat-message-error-color)] text-[14px] leading-[20px] font-normal"})})}),eEe=()=>{const{isStreamRunning:t}=Kh(),n=GB(),r=y$([n]),i=()=>{window.AscDesktopEditor.SaveFilenameDialog("Message.docx",s=>{if(s){const o=s.split("/").pop()??"";window.AscDesktopEditor.openTemplate(s,o)}},r)};return C.jsxs(t6,{hidden:t,className:"col-start-3 row-start-2 ml-3 mt-3 flex gap-[8px]",children:[C.jsx(n6,{asChild:!0,children:C.jsxs(ta,{tooltip:"Copy",children:[C.jsx(z_,{copied:!0,children:C.jsx(Et,{iconName:Mh,size:24,isStroke:!0,disabled:!0})}),C.jsx(z_,{copied:!1,children:C.jsx(Et,{iconName:sx,size:24})})]})}),C.jsx("div",{children:C.jsx(ta,{tooltip:"Download",children:C.jsx(Et,{iconName:pW,size:20,onClick:i,isStroke:!0})})})]})},tEe=()=>C.jsx(Bk,{asChild:!0,children:C.jsxs(eR.div,{className:"relative mx-auto grid w-full max-w-[var(--thread-max-width)] grid-cols-[auto_auto_1fr] grid-rows-[auto_1fr] px-[var(--thread-padding-x)] py-4",initial:{y:5,opacity:0},animate:{y:0,opacity:1},"data-role":"assistant",children:[C.jsxs("div",{className:"leading-[20px] text-[14px] col-span-2 col-start-2 row-start-1 ml-4 break-words leading-7",children:[C.jsx(jk,{components:{Text:dW,tools:{Fallback:mW}}}),C.jsx(Zke,{})]}),C.jsx(eEe,{})]})}),rg=na(t=>({currentModel:null,isInitLoading:!1,initCurrentModel:()=>{try{const e=localStorage.getItem(cS);if(!e)return;const n=JSON.parse(e);t({currentModel:n})}catch(e){console.error("Failed to initialize current model:",e)}},selectModel:e=>{t({currentModel:e}),Vt.setCurrentProviderModel(e.id),localStorage.setItem(cS,JSON.stringify(e))},deleteSelectedModel:()=>{t({currentModel:null}),localStorage.removeItem(cS),Vt.setCurrentProviderModel("")}})),nEe="data:image/svg+xml,%3csvg%20width='12'%20height='16'%20viewBox='0%200%2012%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.5%200C2.77614%201.40922e-07%203%200.223858%203%200.5V8C3%208.01656%202.99669%208.03268%202.99512%208.04883C4.13869%208.27856%205%209.28878%205%2010.5C5%2011.7112%204.13859%2012.7204%202.99512%2012.9502C2.99675%2012.9667%203%2012.9831%203%2013V15.5C3%2015.7761%202.77614%2016%202.5%2016C2.22386%2016%202%2015.7761%202%2015.5V13C2%2012.9831%202.00228%2012.9666%202.00391%2012.9502C0.860897%2012.72%20-2.86384e-08%2011.7108%200%2010.5C1.05859e-07%209.28911%200.860803%208.27892%202.00391%208.04883C2.00234%208.03271%202%208.01653%202%208V0.5C2%200.223858%202.22386%201.76916e-07%202.5%200ZM9.5%200C9.77614%202.41411e-08%2010%200.223858%2010%200.5V3C10%203.01656%209.99669%203.03268%209.99512%203.04883C11.1387%203.27856%2012%204.28878%2012%205.5C12%206.71115%2011.1386%207.72039%209.99512%207.9502C9.99675%207.96665%2010%207.98311%2010%208V15.5C10%2015.7761%209.77614%2016%209.5%2016C9.22386%2016%209%2015.7761%209%2015.5V8C9%207.98314%209.00228%207.96662%209.00391%207.9502C7.8609%207.72003%207%206.71082%207%205.5C7%204.28911%207.8608%203.27892%209.00391%203.04883C9.00234%203.03271%209%203.01653%209%203V0.5C9%200.223858%209.22386%20-5.17733e-10%209.5%200ZM2.5%209C1.67157%209%201%209.67157%201%2010.5C1%2011.3284%201.67157%2012%202.5%2012C3.32843%2012%204%2011.3284%204%2010.5C4%209.67157%203.32843%209%202.5%209ZM9.5%204C8.67157%204%208%204.67157%208%205.5C8%206.32843%208.67157%207%209.5%207C10.3284%207%2011%206.32843%2011%205.5C11%204.67157%2010.3284%204%209.5%204Z'%20fill='%23383838'/%3e%3c/svg%3e",rEe=()=>{const{servers:t,changeToolStatus:e,webSearchEnabled:n,getWebSearchEnabled:r}=vo(),[i,s]=E.useState(!1),{t:o}=Ot(),a=E.useMemo(()=>C.jsx(ta,{visible:!i,tooltip:o("MCPServers"),children:C.jsx(Et,{iconName:nEe,size:24,isActive:i})}),[i,o]),c=E.useMemo(()=>[{text:o("WebSearch"),onClick:()=>{},icon:C.jsx(Et,{iconName:mk,size:24,disableHover:!0}),withToggle:!0,toggleChecked:r()?n:!1,toggleDisabled:!r(),onToggleChange:()=>{e("web-search",t["web-search"][0].name,!n)}},{text:"",onClick:()=>{},isSeparator:!0},...Object.entries(t).map(([d,m])=>{if(d==="web-search")return{text:d,onClick:()=>{},subMenu:[]};const y=m.some(b=>b.enabled);return{text:d,onClick:()=>{},subMenu:[{text:"All tools",onClick:()=>{},withToggle:!0,toggleChecked:y,onToggleChange:()=>{y?m.forEach(b=>{e(d,b.name,!1)}):m.forEach(b=>{e(d,b.name,!0)})}},{text:"",onClick:()=>{},isSeparator:!0},...m.map(b=>({text:b.name,onClick:()=>{},withToggle:!0,toggleChecked:b.enabled,onToggleChange:w=>{e(d,b.name,w)}}))]}}).filter(d=>d.subMenu.length>2)],[t,e,o,n,r]),h=E.useMemo(()=>[...c],[c]);if(!t||!c.length)return null;const f=d=>{s(d)};return C.jsx(Lc,{trigger:a,items:h,onOpenChange:f})},iEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.01953%2013.2344L12.1596%206.09434C12.5297%205.71639%2012.9711%205.41559%2013.4582%205.20932C13.9453%205.00305%2014.4684%204.89541%2014.9974%204.89263C15.5264%204.88986%2016.0506%204.99199%2016.5399%205.19314C17.0291%205.39428%2017.4736%205.69044%2017.8476%206.06448C18.2217%206.43852%2018.5178%206.88301%2018.719%207.37224C18.9201%207.86148%2019.0223%208.38574%2019.0195%208.9147C19.0167%209.44366%2018.9091%209.96683%2018.7028%2010.4539C18.4965%2010.941%2018.1957%2011.3824%2017.8178%2011.7525L11.1485%2018.4202C10.7353%2018.82%2010.1816%2019.0414%209.60671%2019.0367C9.03182%2019.0319%208.48182%2018.8014%208.07531%2018.3949C7.66879%2017.9884%207.43831%2017.4384%207.43358%2016.8635C7.42884%2016.2886%207.65022%2015.7349%208.04999%2015.3218L14.4487%208.92226'%20stroke='%23444444'%20stroke-width='1.14645'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",sEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%204C2%202.89543%202.89543%202%204%202H20C21.1046%202%2022%202.89543%2022%204V20C22%2021.1046%2021.1046%2022%2020%2022H4C2.89543%2022%202%2021.1046%202%2020V4Z'%20fill='%232D8DBF'/%3e%3cpath%20d='M7%207.66699H17C17.1841%207.66699%2017.333%207.8159%2017.333%208C17.333%208.18409%2017.1841%208.33301%2017%208.33301H7C6.81591%208.33301%206.66699%208.1841%206.66699%208C6.66699%207.81591%206.81591%207.66699%207%207.66699Z'%20stroke='white'%20stroke-width='1.33333'/%3e%3cpath%20d='M7%2015.667H13C13.1841%2015.667%2013.333%2015.8159%2013.333%2016C13.333%2016.1841%2013.1841%2016.333%2013%2016.333H7C6.81591%2016.333%206.66699%2016.1841%206.66699%2016C6.66699%2015.8159%206.81591%2015.667%207%2015.667Z'%20stroke='white'%20stroke-width='1.33333'/%3e%3cpath%20d='M7%2011.667H17C17.1841%2011.667%2017.333%2011.8159%2017.333%2012C17.333%2012.1841%2017.1841%2012.333%2017%2012.333H7C6.81591%2012.333%206.66699%2012.1841%206.66699%2012C6.66699%2011.8159%206.81591%2011.667%207%2011.667Z'%20stroke='white'%20stroke-width='1.33333'/%3e%3c/svg%3e",oEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%204C2%202.89543%202.89543%202%204%202H20C21.1046%202%2022%202.89543%2022%204V20C22%2021.1046%2021.1046%2022%2020%2022H4C2.89543%2022%202%2021.1046%202%2020V4Z'%20fill='%235BB514'/%3e%3cpath%20d='M9%2014V16H7V14H9ZM17%2014V16H13V14H17ZM17%208V10H13V8H17ZM9%208V10H7V8H9Z'%20fill='white'%20stroke='white'%20stroke-width='2'/%3e%3c/svg%3e",aEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%204C2%202.89543%202.89543%202%204%202H20C21.1046%202%2022%202.89543%2022%204V20C22%2021.1046%2021.1046%2022%2020%2022H4C2.89543%2022%202%2021.1046%202%2020V4Z'%20fill='%23F36653'/%3e%3cpath%20d='M13%208C13%207.44772%2013.4477%207%2014%207H17C17.5523%207%2018%207.44772%2018%208C18%208.55228%2017.5523%209%2017%209H14C13.4477%209%2013%208.55228%2013%208Z'%20fill='white'/%3e%3cpath%20d='M6%2016C6%2015.4477%206.44772%2015%207%2015H17C17.5523%2015%2018%2015.4477%2018%2016C18%2016.5523%2017.5523%2017%2017%2017H7C6.44772%2017%206%2016.5523%206%2016Z'%20fill='white'/%3e%3cpath%20d='M13%2012C13%2011.4477%2013.4477%2011%2014%2011H17C17.5523%2011%2018%2011.4477%2018%2012C18%2012.5523%2017.5523%2013%2017%2013H14C13.4477%2013%2013%2012.5523%2013%2012Z'%20fill='white'/%3e%3cpath%20d='M6%2010C6%208.34315%207.34315%207%209%207C10.6569%207%2012%208.34315%2012%2010C12%2011.6569%2010.6569%2013%209%2013C7.34315%2013%206%2011.6569%206%2010Z'%20fill='white'/%3e%3c/svg%3e",tB=[".docx",".pdf",".xlsx"],lEe=()=>{const[t,e]=xe.useState(!1),{addAttachmentFile:n}=o1(),r=f=>{e(f)},i=(f,d)=>{window.AscDesktopEditor.convertFileExternal(f,69,(m,y)=>{if(y){console.log("Error:",y);return}const b=new Uint8Array(m.content),S=new TextDecoder("utf-8").decode(b);n({path:f,content:S,type:d})})},s=()=>{window.AscDesktopEditor.OpenFilenameDialog([...tB].join(" , "),!0,f=>{Array.isArray(f)&&f.forEach(d=>{const m=d.split(".").pop()??"";tB.includes(`.${m}`)&&window.AscDesktopEditor.convertFileExternal(d,69,(y,b)=>{if(b){console.log("Error:",b);return}const w=new Uint8Array(y.content),_=new TextDecoder("utf-8").decode(w);n({path:d,content:_||"",type:m==="pdf"?87:m==="docx"?65:257})})})})},o=JSON.parse(window.AscDesktopEditor?.callToolFunction("recent_files_reader")??"{}")?.files?.filter(f=>!f.path.includes("http")).filter(f=>{const d=f.type===65,m=f.type===87,y=f.type===257;return d||m||y})?.map(f=>{let d=sEe;return f.type===87?d=aEe:f.type===257&&(d=oEe),{text:f.path.split("/").pop()??"",key:f.path,id:f.path,icon:C.jsx(Zt,{src:d}),onClick:()=>i(f.path,f.type)}}).filter(Boolean),{t:a}=Ot(),c=C.jsx(ta,{tooltip:a("Attachments"),visible:!t,children:C.jsx(Et,{iconName:iEe,size:24,className:"cursor-pointer rounded-[4px] outline-none",isStroke:!0,isActive:t})}),h=[{text:a("AddLocalFile"),onClick:()=>s()},{text:"",onClick:()=>{},isSeparator:!0},{text:a("RecentFiles"),onClick:()=>{},subMenu:o}];return C.jsx(Lc,{trigger:c,items:h,onOpenChange:r})},cEe=()=>{const{currentModel:t,selectModel:e}=rg(),{providers:n,providersModels:r,currentProvider:i,setCurrentProvider:s}=Es(),{tools:o}=vo(),{messages:a}=Kh(),{t:c}=Ot(),h=xe.useCallback((m,y)=>{if(t?.id===y&&Vt.currentProviderInfo?.name===m.name)return;const b=r.get(m.name)?.find(w=>w.id===y);b&&(Vt.currentProviderInfo?.name!==m.name&&(s(m),Vt.setCurrentProviderModel(y),Vt.setCurrentProviderTools(o),Vt.setCurrentProviderPrevMessages(a)),e(b))},[r,a,o,t,e,s]),f=n.map(m=>({text:m.name,id:m.name,onClick:()=>{},subMenu:r.get(m.name)?.map(y=>({text:y.name,id:y.id,onClick:()=>h(m,y.id),isActive:!1,checked:y.id===t?.id&&m.name===Vt.currentProviderInfo?.name}))||[]})).filter(m=>m.subMenu.length>0),d=n.some(m=>m.name===i?.name);return C.jsx(zx,{placeholder:c("SelectModel"),value:d&&t?.name||"",items:f,withoutBg:!0})},uEe="data:image/svg+xml,%3csvg%20width='12'%20height='14'%20viewBox='0%200%2012%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.00092%2012.6467C5.00092%2013.1989%205.44863%2013.6467%206.00092%2013.6467C6.5532%2013.6467%207.00092%2013.1989%207.00092%2012.6467H6.00092H5.00092ZM9.52911%206.29494C9.91963%206.68546%2010.5528%206.68546%2010.9433%206.29494C11.3338%205.90442%2011.3338%205.27125%2010.9433%204.88073L10.2362%205.58783L9.52911%206.29494ZM1.05852%204.88073C0.667994%205.27125%200.667994%205.90442%201.05852%206.29494C1.44904%206.68546%202.08221%206.68546%202.47273%206.29494L1.76562%205.58783L1.05852%204.88073ZM6.25049%201.60211L6.95759%200.894999L6.25049%201.60211ZM5.75135%201.60211L5.04425%200.894999L5.75135%201.60211ZM6.25049%201.60211L5.54338%202.30921L9.52911%206.29494L10.2362%205.58783L10.9433%204.88073L6.95759%200.894999L6.25049%201.60211ZM5.75135%201.60211L5.04425%200.894999L1.05852%204.88073L1.76562%205.58783L2.47273%206.29494L6.45846%202.30921L5.75135%201.60211ZM6.00092%202.05842H5.00092V12.6467H6.00092H7.00092V2.05842H6.00092ZM6.25049%201.60211L6.95759%200.894999C6.42924%200.366643%205.5726%200.366643%205.04425%200.894999L5.75135%201.60211L6.45846%202.30921C6.20577%202.56191%205.79607%202.56191%205.54338%202.30921L6.25049%201.60211Z'%20fill='white'/%3e%3c/svg%3e",hEe="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='12'%20height='12'%20rx='4'%20fill='white'/%3e%3c/svg%3e",nB="rounded-[4px] cursor-pointer disabled:cursor-not-allowed flex items-center justify-center bg-[var(--chat-composer-action-send-background-color)] hover:enabled:bg-[var(--chat-composer-action-send-background-hover-color)] active:enabled:bg-[var(--chat-composer-action-send-background-pressed-color)] disabled:opacity-[0.5]",fEe=()=>{const{isStreamRunning:t}=Kh(),{currentModel:e}=rg(),{currentProvider:n}=Es();return t?C.jsx(WZ,{asChild:!0,children:C.jsx(Et,{iconName:hEe,size:24,className:nB})}):C.jsx(qb,{running:!1,children:C.jsx(TZ,{asChild:!0,disabled:!e||!n,children:C.jsx(Et,{iconName:uEe,size:24,color:"var(--chat-composer-action-send-color)",className:nB})})})},dEe=()=>C.jsx("div",{className:"relative flex flex-col",children:C.jsxs("div",{className:"relative flex items-center justify-between h-[24px]",children:[C.jsxs("div",{className:"flex items-center gap-[12px] flex-row",children:[C.jsx(lEe,{}),C.jsx(rEe,{})]}),C.jsxs("div",{className:"flex items-center gap-[12px] flex-row",children:[C.jsx(cEe,{}),C.jsx(fEe,{})]})]})}),rB=()=>{const{attachmentFiles:t}=o1(),{currentProvider:e}=Es(),{currentModel:n}=rg(),{t:r}=Ot();return C.jsx("div",{className:"relative mx-auto flex w-full max-w-[var(--thread-max-width)] flex-col gap-4 px-[var(--thread-padding-x)] pb-4 md:pb-6",children:C.jsxs(X6,{className:"composer-root relative flex w-full flex-col gap-[16px] rounded-[16px] border px-[24px] py-[16px] box-border",children:[t.length?C.jsx("div",{className:"flex flex-row gap-[8px] overflow-x-auto",children:t.map(i=>C.jsx(hU,{file:i},i.path))}):null,C.jsx(Z6,{placeholder:r("AskAI"),className:"composer-input max-h-[calc(50dvh)] min-h-[16px] w-full resize-none outline-none",rows:1,autoFocus:!0,"aria-label":"Message input",disabled:!e||!n}),C.jsx(dEe,{})]})})},pEe=()=>{const{isStreamRunning:t,isRequestRunning:e}=Kh(),{t:n}=Ot();return C.jsxs(nj,{className:"flex h-full flex-col",style:{"--thread-max-width":"687px","--thread-padding-x":"1rem"},children:[C.jsx(qb,{empty:!0,children:C.jsx(H_,{className:"relative flex min-w-0 flex-1 flex-col overflow-y-auto justify-center items-center",children:C.jsxs("div",{className:"flex flex-col gap-[24px] w-full",children:[C.jsx(ybe,{}),C.jsx(rB,{})]})})}),C.jsxs(qb,{empty:!1,children:[C.jsxs(H_,{className:"relative flex min-w-0 flex-1 flex-col gap-6 overflow-y-auto",children:[C.jsx(ZZ,{components:{UserMessage:Xke,AssistantMessage:tEe}}),!e&&t?C.jsx("div",{className:"flex items-center justify-center",children:C.jsxs("div",{className:"flex items-center gap-[8px] w-[var(--thread-max-width)] max-w-[var(--thread-max-width)] ps-[var(--thread-padding-x)]",children:[C.jsx(wT,{}),C.jsx("p",{className:"text-[14px] leading-[20px] font-normal text-[var(--chat-message-analyze-color)]",children:n("Analyzing")})]})}):null,C.jsx(eR.div,{className:"min-h-6 min-w-6 shrink-0"})]}),C.jsx(rB,{})]})]})},mEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.5%2015.5C16.5%2014.3954%2015.6046%2013.5%2014.5%2013.5C13.3954%2013.5%2012.5%2014.3954%2012.5%2015.5M16.5%2015.5C16.5%2016.6046%2015.6046%2017.5%2014.5%2017.5C13.3954%2017.5%2012.5%2016.6046%2012.5%2015.5M16.5%2015.5L19.5%2015.5M12.5%2015.5L4.5%2015.5M11.5%208.5C11.5%207.39543%2010.6046%206.5%209.5%206.5C8.39543%206.5%207.5%207.39543%207.5%208.5M11.5%208.5C11.5%209.60457%2010.6046%2010.5%209.5%2010.5C8.39543%2010.5%207.5%209.60457%207.5%208.5M11.5%208.5L19.5%208.5M7.5%208.5H4.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",gEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.5%205.5V11.5M11.5%2011.5V17.5M11.5%2011.5H17.5M11.5%2011.5H5.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",yEe=async(t,e)=>{const n=ks.getDB(),r={threadId:t,title:e,lastEditDate:Date.now()};return new Promise((i,s)=>{const c=n.transaction(["threads"],"readwrite").objectStore("threads").put(r);c.onerror=()=>s(c.error),c.onsuccess=()=>i()})},bEe=async()=>{const t=ks.getDB();return new Promise((e,n)=>{const s=t.transaction(["threads"],"readonly").objectStore("threads").getAll();s.onerror=()=>n(s.error),s.onsuccess=()=>{const o=s.result.sort((a,c)=>c.lastEditDate-a.lastEditDate);e(o)}})},vEe=async(t,e)=>{const n=ks.getDB();return new Promise((r,i)=>{const o=n.transaction(["threads"],"readwrite").objectStore("threads"),a=o.get(t);a.onerror=()=>i(a.error),a.onsuccess=()=>{const c=a.result;if(!c){i(new Error("Thread not found"));return}const h={...c,...e&&{title:e},lastEditDate:Date.now()},f=o.put(h);f.onerror=()=>i(f.error),f.onsuccess=()=>r()}})},xEe=async t=>{const e=ks.getDB();return new Promise((n,r)=>{const s=e.transaction(["threads"],"readwrite").objectStore("threads"),o=s.get(t);o.onerror=()=>r(o.error),o.onsuccess=()=>{const a=o.result;if(!a){r(new Error("Thread not found"));return}const c={...a,lastEditDate:Date.now()},h=s.put(c);h.onerror=()=>r(h.error),h.onsuccess=()=>n()}})},wEe=async t=>{await xre(t);const e=ks.getDB();return new Promise((n,r)=>{const o=e.transaction(["threads"],"readwrite").objectStore("threads").delete(t);o.onerror=()=>r(o.error),o.onsuccess=()=>n()})},ig=na((t,e)=>({threadId:crypto.randomUUID(),threads:[],initThreads:async()=>{const n=await bEe();t({threads:n})},insertThread:n=>{const r=e();t({threads:[{threadId:r.threadId,title:n},...r.threads]}),yEe(r.threadId,n)},insertNewMessageToThread:()=>{const n=e();xEe(n.threadId),t({threads:n.threads.map(r=>r.threadId===n.threadId?{...r,lastEditDate:Date.now()}:r)})},onSwitchToNewThread:()=>{t({threadId:crypto.randomUUID()})},onSwitchToThread:n=>{t({threadId:n})},onDownloadThread:async n=>{const i=e().threads.find(c=>c.threadId===n),s=await n$(n),o=i?.title||"Chat Export";let a=`# ${o}

`;a+=`*Exported on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}*

`,a+=`---

`,a+=y$(s),window.AscDesktopEditor.SaveFilenameDialog(`${o}.docx`,c=>{if(c==="")return;const h=c.split("/").pop();h&&window.AscDesktopEditor.openTemplate(c,h)},a)},onRenameThread:(n,r)=>{const i=e();t({threads:i.threads.map(s=>s.threadId===n?{...s,title:r}:s)}),vEe(n,r)},onDeleteThread:n=>{const r=e();r.threadId===n&&r.onSwitchToNewThread(),t({threads:r.threads.filter(i=>i.threadId!==n)}),wEe(n)}})),SEe=()=>{const{t}=Ot(),{currentPage:e,setCurrentPage:n}=Bm(),{onSwitchToNewThread:r}=ig();return C.jsxs("nav",{className:"w-full flex justify-between items-center h-[56px] min-h-[56px] box-border border-b-[1px] border-[var(--header-border-color)] bg-[var(--header-background-color)] px-[32px]",children:[C.jsxs("div",{className:"flex items-center gap-[12px]",children:[C.jsx("h3",{className:"text-[var(--header-color)] font-bold text-[16px] leading-[24px]",children:t("AIAgent")}),C.jsx(ta,{tooltip:t("NewChat"),children:C.jsx(Et,{iconName:gEe,size:24,isStroke:!0,onClick:()=>{n("chat"),r()}})})]}),C.jsx(ta,{tooltip:t("Settings"),children:C.jsx(Et,{iconName:mEe,size:24,isStroke:!0,isActive:e==="settings",onClick:()=>n(e==="settings"?"chat":"settings")})})]})},_Ee="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19.0315%2016.6276C18.2814%2017.3778%2017.264%2017.7992%2016.2031%2017.7992C15.1422%2017.7992%2014.1248%2017.3778%2013.3747%2016.6276C12.6245%2015.8775%2012.2031%2014.8601%2012.2031%2013.7992C12.2031%2012.7384%2012.6245%2011.7209%2013.3747%2010.9708C14.1248%2010.2206%2015.1422%209.79922%2016.2031%209.79922C17.264%209.79922%2018.2814%2010.2206%2019.0315%2010.9708C19.7817%2011.7209%2020.2031%2012.7384%2020.2031%2013.7992C20.2031%2014.8601%2019.7817%2015.8775%2019.0315%2016.6276ZM19.0315%2016.6276L22.2031%2019.7992M4.20312%204.19922H19.8029M4.20312%208.99922H9.0029M4.20312%2013.7992H9.00313M4.20312%2018.5992H9.00313'%20stroke='%23383838'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",CEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.57%206.42969L8%2011.9995L13.57%2017.5694'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",AEe="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5002%2017.5002L13.881%2013.881M13.881%2013.881C14.5001%2013.2619%2014.9912%2012.527%2015.3262%2011.7181C15.6612%2010.9093%2015.8337%2010.0423%2015.8337%209.16684C15.8337%208.29134%2015.6612%207.42441%2015.3262%206.61555C14.9912%205.80669%2014.5001%205.07174%2013.881%204.45267C13.2619%203.8336%2012.527%203.34252%2011.7181%203.00748C10.9093%202.67244%2010.0423%202.5%209.16684%202.5C8.29134%202.5%207.42441%202.67244%206.61555%203.00748C5.80669%203.34252%205.07174%203.8336%204.45267%204.45267C3.2024%205.70295%202.5%207.39868%202.5%209.16684C2.5%2010.935%203.2024%2012.6307%204.45267%2013.881C5.70295%2015.1313%207.39868%2015.8337%209.16684%2015.8337C10.935%2015.8337%2012.6307%2015.1313%2013.881%2013.881Z'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",kEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.5%207C19.3284%207%2020%207.67157%2020%208.5V15.5C20%2016.3284%2019.3284%2017%2018.5%2017H5.5C4.67157%2017%204%2016.3284%204%2015.5V8.5C4%207.67157%204.67157%207%205.5%207H18.5ZM5.5%208C5.22386%208%205%208.22386%205%208.5V15.5C5%2015.7761%205.22386%2016%205.5%2016H18.5C18.7761%2016%2019%2015.7761%2019%2015.5V8.5C19%208.22386%2018.7761%208%2018.5%208H5.5Z'%20fill='%23383838'/%3e%3cpath%20d='M8.5%209C8.77614%209%209%209.22386%209%209.5C9%209.77614%208.77614%2010%208.5%2010H8V14H8.5C8.77614%2014%209%2014.2239%209%2014.5C9%2014.7761%208.77614%2015%208.5%2015H6.5C6.22386%2015%206%2014.7761%206%2014.5C6%2014.2239%206.22386%2014%206.5%2014H7V10H6.5C6.22386%2010%206%209.77614%206%209.5C6%209.22386%206.22386%209%206.5%209H8.5Z'%20fill='%23446ECA'/%3e%3c/svg%3e",EEe=({id:t,onClose:e})=>{const{onDeleteThread:n}=ig(),{t:r}=Ot(),i=xe.useCallback(async()=>{await n(t),e()},[t,n,e]);return xe.useEffect(()=>{const s=o=>{o.key==="Enter"&&(o.preventDefault(),i())};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[i]),C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:r("Warning"),onClose:e,withWarningIcon:!0,children:C.jsxs("div",{className:"flex flex-col justify-between h-full",children:[C.jsx("p",{className:"select-none h-[40px] flex items-center text-[12px] leading-[16px]",children:r("WantDeleteChat?")}),C.jsxs("div",{className:"flex flex-row justify-end items-center gap-[8px] h-[48px]",children:[C.jsx(mn,{size:"small",variant:"default",onClick:e,children:r("No")}),C.jsx(mn,{size:"small",onClick:i,children:r("Yes")})]})]})})})},TEe=()=>C.jsx(Zt,{src:pW,beforeInjection:t=>{const e=t.querySelector("path");e&&e.setAttribute("stroke","var(--chat-list-item-icon-color)")}}),REe=()=>C.jsx(Zt,{src:kEe,beforeInjection:t=>{const e=t.querySelector("path");e&&e.setAttribute("fill","var(--chat-list-item-icon-color)")}}),MEe=()=>C.jsx(Zt,{src:RE,beforeInjection:t=>{const e=t.querySelector("path");e&&e.setAttribute("fill","var(--chat-list-item-icon-color)")}}),OEe=({thread:t,isActive:e,onSwitchToThread:n,onRenameThread:r,onDownloadThread:i,setCurrentPage:s})=>{const[o,a]=xe.useState(!1),[c,h]=xe.useState(!1),[f,d]=xe.useState(!1),[m,y]=xe.useState(!1),[b,w]=xe.useState(t.title),S=xe.useRef(null),_=xe.useRef(null),{t:A}=Ot();xe.useEffect(()=>{const L=N=>{f&&(N.key==="Escape"?(N.preventDefault(),d(!1),w(t.title)):N.key==="Enter"&&(N.preventDefault(),_.current?.blur()))};return f&&document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[f,t.title]);const k=()=>{o||f||m||(n(t.threadId),s("chat"))},P=()=>{y(!0),a(!1)},M=()=>{d(!0),a(!1)},O=()=>{i(t.threadId),a(!1)};return C.jsxs("div",{ref:S,className:`cursor-pointer rounded-[4px] h-[36px] min-h-[36px] flex items-center justify-between ${f?"":`px-[12px] ${e||o?"bg-[var(--chat-list-item-active-background-color)]":"hover:bg-[var(--chat-list-item-hover-background-color)] active:bg-[var(--chat-list-item-active-background-color)]"}`}`,onMouseEnter:()=>h(!0),onMouseLeave:()=>{o||h(!1)},onClick:k,children:[f?C.jsx(ao,{ref:_,value:b,onChange:L=>w(L.target.value),onBlur:()=>{d(!1),b&&r(t.threadId,b)},autoFocus:!0,className:"w-full"}):C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-[var(--chat-list-item-color)] font-normal text-[14px] leading-[20px] truncate",children:t.title}),c&&!f?C.jsx(Lc,{open:o,onOpenChange:a,trigger:C.jsx(Et,{iconName:TE,size:20,isActive:o}),items:[{icon:C.jsx(TEe,{}),text:A("Download"),onClick:O},{icon:C.jsx(REe,{}),text:A("Rename"),onClick:M},{icon:C.jsx(MEe,{}),text:A("Delete"),onClick:P}],side:"right",align:"start",sideOffset:0,containerRef:S.current}):null]}),m?C.jsx(EEe,{id:t.threadId,onClose:()=>y(!1)}):null]},t.threadId)},PEe=()=>{const{threads:t,threadId:e,onSwitchToThread:n,onRenameThread:r,onDownloadThread:i}=ig(),{setCurrentPage:s}=Bm(),[o,a]=xe.useState(!1),[c,h]=xe.useState(""),[f,d]=xe.useState(t),{t:m}=Ot(),y=w=>{const S=w.target.value;h(S)};xe.useEffect(()=>{const w=t.filter(S=>S.title?.toLowerCase().includes(c.toLowerCase()));d(w)},[t,c]);const b=t.length===0;return o?C.jsxs("div",{className:`w-[264px] min-w-[264px] h-full max-h-full border-r-[1px] border-[var(--chat-list-border-right)] p-[24px] flex flex-col gap-[${b?24:32}px]`,style:{maxHeight:"calc(100% - 24px)"},children:[C.jsxs("div",{className:"flex items-center justify-between px-[8px]",children:[C.jsx("h4",{className:"text-[14px] leading-[20px] font-bold text-[var(--chat-list-color)]",children:m("ChatHistory")}),C.jsx(Et,{iconName:CEe,size:24,isStroke:!0,onClick:()=>a(!1)})]}),C.jsx("div",{className:"flex flex-col",style:{maxHeight:"100%"},children:b?C.jsx("p",{className:"text-[var(--chat-list-empty-color)] font-normal text-[14px] leading-[20px] w-full text-center",children:m("NoChatYet")}):C.jsxs("div",{className:"flex flex-col mt-[24px]",style:{maxHeight:"calc(100% - 24px)"},children:[C.jsx(ao,{className:"w-full",type:"search",placeholder:m("Search"),icon:AEe,value:c,onChange:y}),C.jsx("div",{className:"flex flex-col mt-[16px] overflow-y-auto",style:{maxHeight:"calc(100% - 24px)"},children:f.length?f.map(w=>{const S=w.threadId===e;return C.jsx(OEe,{thread:w,isActive:S,onSwitchToThread:n,setCurrentPage:s,onRenameThread:r,onDownloadThread:i},w.threadId)}):C.jsx("p",{className:"text-[var(--chat-list-empty-color)] font-normal text-[14px] leading-[20px] w-full",children:m("NoChatYet")})})]})})]}):C.jsx("div",{className:"ml-[32px] mt-[24px]",children:C.jsx(ta,{tooltip:m("ChatHistory"),children:C.jsx(Et,{iconName:_Ee,size:24,isStroke:!0,onClick:()=>{s("chat"),a(!0)}})})})},iB=({children:t})=>{const{currentPage:e}=Bm(),{i18n:n}=Ot(),[r,i]=xe.useState(()=>window.RendererProcessVariable?window.RendererProcessVariable.theme.id:"theme-light");xe.useLayoutEffect(()=>{if(window.RendererProcessVariable){const o=window.RendererProcessVariable.lang??new URLSearchParams(window.location.search).get("lang");o?.includes("en")?n.changeLanguage("en"):o?.includes("ru")?n.changeLanguage("ru"):n.changeLanguage("en")}else n.changeLanguage("en");window.on_update_plugin_info=o=>{console.log(o),o.lang&&(o?.lang?.includes("en")?n.changeLanguage("en"):o?.lang?.includes("ru")?n.changeLanguage("ru"):n.changeLanguage("en")),o.theme&&(o.theme==="theme-system"?i(`theme-${window.RendererProcessVariable.theme.system}`):i(o.theme))}},[n]);const s=e==="settings";return C.jsx("div",{className:`h-dvh ${r}`,children:C.jsxs("main",{id:"app",className:"h-dvh bg-[var(--layout-background-color)] flex flex-col",children:[C.jsx(SEe,{}),C.jsxs("div",{className:"flex flex-row flex-1",style:{height:"calc(100dvh - 56px)"},children:[s?null:C.jsx(PEe,{}),C.jsx("div",{className:"w-full",children:t})]})]})})},DEe=({checked:t=!1,onChange:e,disabled:n=!1,id:r,className:i=""})=>{const s=A=>{e&&!n&&e(A.target.checked)},o="inline-flex items-center relative group",a="absolute opacity-0 cursor-pointer w-4 h-4 m-0",c="disabled:cursor-not-allowed",h="inline-flex items-center select-none",f=n?"cursor-not-allowed opacity-60":"cursor-pointer",d="w-4 h-4 rounded-[2px] flex items-center justify-center transition-all duration-200 box-border",m="focus-within:outline-none",y="bg-[var(--checkbox-bg-color)] border border-[var(--checkbox-color)]",b=n?"":"group-hover:!bg-[var(--checkbox-bg-hover-color)] group-active:!bg-[var(--checkbox-bg-pressed-color)]",w="bg-[var(--checkbox-active-color)]",S=n?"":"group-hover:!bg-[var(--checkbox-active-hover-color)] group-active:!bg-[var(--checkbox-active-pressed-color)]";return C.jsxs("div",{className:Ve(o,i),children:[C.jsx("input",{type:"checkbox",id:r,checked:t,onChange:s,disabled:n,className:Ve(a,c)}),C.jsx("label",{htmlFor:r,className:Ve(h,f),children:C.jsx("div",{className:Ve(d,m,t?Ve(w,S):Ve(y,b)),children:t?C.jsx(Zt,{src:Mh,className:"flex items-center justify-center",beforeInjection:A=>{const k=A.querySelector("path");k&&k.setAttribute("stroke","var(--checkbox-active-icon-color)")}}):null})})]})},LEe=({onAllow:t,onDeny:e,onClose:n})=>{const{t:r}=Ot(),{manageToolData:i}=vo(),[s,o]=E.useState(!1),a=()=>{t(s),n()},c=()=>{e(),n()},h=i?.message?.content[i.idx];if(!(!h||typeof h!="object"||!("type"in h)||h.type!=="tool-call"))return C.jsx(Ic,{open:!0,children:C.jsxs(Nc,{header:r("Confirmation"),onClose:e,isHuge:!0,children:[C.jsxs("div",{className:"flex flex-col justify-between h-full mb-[16px] text-[var(--tool-fallback-color)]",children:[C.jsx("p",{className:"mt-[8px] font-[14px] leading-[20px] font-normal text-[var(--tool-fallback-color)]",children:r("AIWouldLikeUseThisTool")}),C.jsx(mW,{type:"tool-call",toolCallId:h.toolCallId,args:h.args??{},toolName:h.toolName,argsText:h.argsText??"{}",result:h.result,status:{type:"running"},addResult:()=>{}}),C.jsx("p",{className:"font-[14px] leading-[20px] font-normal text-[var(--tool-fallback-color)]",children:r("ReviewEachAction")}),C.jsxs("p",{className:"flex items-center gap-[8px] mt-[24px] font-[14px] leading-[20px] font-normal text-[var(--tool-fallback-color)]",children:[C.jsx(DEe,{checked:s,onChange:o,id:"allow-always-checkbox"}),r("AlwaysAllow")]})]}),C.jsxs("div",{className:"flex flex-row justify-end items-center gap-[8px] h-[64px] border-t-[1px] border-[var(--border-divider)] mx-[-32px] px-[32px]",children:[C.jsx(mn,{variant:"default",onClick:c,children:r("Deny")}),C.jsx(mn,{onClick:a,children:r("Allow")})]})]})})},IEe=({isReady:t})=>{const{messages:e,setIsStreamRunning:n,setIsRequestRunning:r,addMessage:i,updateLastMessage:s,fetchPrevMessages:o}=Kh(),{threadId:a,insertThread:c,insertNewMessageToThread:h}=ig(),{manageToolData:f,callTools:d,checkAllowAlways:m,setAllowAlways:y,setManageToolData:b}=vo(),{attachmentFiles:w,clearAttachmentFiles:S}=o1(),{currentProvider:_}=Es(),{currentModel:A}=rg();E.useEffect(()=>{t&&(o(a),S())},[a,t,o,S]);const k=z=>z,P=z=>{if(!f)return;const j=f?.message?.content[f.idx];if(!j||typeof j!="object"||!("type"in j)||j.type!=="tool-call")return;const W=j.toolName.split("_")[0];z&&y(!0,W),O(f.message,f.idx,f.messageUID,!0,!1),b(void 0)},M=()=>{f&&(O(f.message,f.idx,f.messageUID,!1,!0),b(void 0))},O=async(z,j,U,W,X)=>{const G=z.content[j];if(!G||typeof G!="object"||!("type"in G)||G.type!=="tool-call")return;const F=G.toolName.split("_")[0];if(m(F)||W||X){const Y=X?"User deny tool call":await d(G.toolName,G.args),q=Array.isArray(z.content)?z.content.map((Z,ue)=>ue===j?{...G,result:Y}:Z):z.content,se={...z,content:q};if(s(se),!Vt)return;const T=Vt.sendMessageAfterToolCall(se);T&&L(T,!0,U)}else b({message:z,idx:j,messageUID:U})},L=async(z,j,U)=>{n(!0);let W=!!j;const X=j&&U?U:crypto.randomUUID();if(e)for await(const G of z){if("isEnd"in G){if(G.responseMessage.status?.type==="incomplete"){i(G.responseMessage),n(!1),r(!1);return}const ie=G.responseMessage;if(ie?.role==="assistant"&&Array.isArray(ie.content)){const F=ie.content.findIndex(Y=>Y.type==="tool-call"&&!Y.result);if(F!==-1){O(ie,F,X);return}}n(!1),r(!1);return}W?(vre(X,G),s(G)):(j||r(!0),i(G),dI(a,X,G),W=!0)}};return{convertMessage:k,onNew:async z=>{if(!Vt||!_||!A||z.content[0].type!=="text")return;let j=[];w.length>0&&(j=w.map(G=>({type:"file",mimeType:JSON.stringify({path:G.path,type:G.type}),data:G.content})),S());const W={role:"user",content:[...j,{type:"text",text:z.content[0].text}],attachments:z.attachments};e.length===0?c(z.content[0].text.substring(0,25)):h(),dI(a,crypto.randomUUID(),W),i(W);const X=Vt.sendMessage([W]);X&&L(X)},handleStream:L,approveToolCall:P,denyToolCall:M}},NEe=({isReady:t})=>{const{initThreads:e}=ig();return E.useEffect(()=>{t&&e()},[t,e]),{}},BEe=()=>{const{initCurrentModel:t,currentModel:e}=rg();return E.useEffect(()=>{e&&Vt.setCurrentProviderModel(e.id)},[e]),E.useEffect(()=>{t()},[t]),{}},jEe=({isReady:t})=>{const{initServers:e,getTools:n,tools:r}=vo(),{currentProvider:i}=Es();return E.useEffect(()=>{t&&(e(),n(),setInterval(()=>{n()},1e3))},[t,e,n]),E.useEffect(()=>{!r||!i||Vt.setCurrentProviderTools(r)},[r,i]),{}},Ke=t=>typeof t=="string",Fd=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},sB=t=>t==null?"":""+t,$Ee=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},VEe=/###/g,oB=t=>t&&t.indexOf("###")>-1?t.replace(VEe,"."):t,aB=t=>!t||Ke(t),Vp=(t,e,n)=>{const r=Ke(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(aB(t))return{};const s=oB(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return aB(t)?{}:{obj:t,k:oB(r[i])}},lB=(t,e,n)=>{const{obj:r,k:i}=Vp(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=Vp(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Vp(t,o,Object),a?.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},FEe=(t,e,n,r)=>{const{obj:i,k:s}=Vp(t,e,Object);i[s]=i[s]||[],i[s].push(n)},ox=(t,e)=>{const{obj:n,k:r}=Vp(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},zEe=(t,e,n)=>{const r=ox(t,n);return r!==void 0?r:ox(e,n)},gW=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Ke(t[r])||t[r]instanceof String||Ke(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):gW(t[r],e[r],n):t[r]=e[r]);return t},zu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var HEe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const UEe=t=>Ke(t)?t.replace(/[&<>"'\/]/g,e=>HEe[e]):t;class qEe{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const WEe=[" ",",","?","!",";"],GEe=new qEe(20),KEe=(t,e,n)=>{e=e||"",n=n||"";const r=WEe.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=GEe.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},gk=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let c=s;c<r.length;++c)if(c!==s&&(a+=n),a+=r[c],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;s+=c-s+1;break}i=o}return i},Em=t=>t?.replace("_","-"),YEe={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class ax{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||YEe,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(Ke(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new ax(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ax(this.logger,e)}}var so=new ax;class v1{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i.apply(i,[e,...n])})}}class cB extends v1{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):Ke(r)&&s?a.push(...r.split(s)):a.push(r)));const c=ox(this.data,a);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),c||!o||!Ke(r)?c:gk(this.data?.[e]?.[n],r,s)}addResource(e,n,r,i,s={silent:!1}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),lB(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const s in r)(Ke(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let c=ox(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?gW(c,r,s):c={...c,...r},lB(this.data,a,c),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var yW={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{e=this.processors[s]?.process(e,n,r,i)??e}),e}};const bW=Symbol("i18next/PATH_KEY");function XEe(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>(n?.revoke?.(),i===bW?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function yk(t,e){const{[bW]:n}=t(XEe());return n.join(e?.keySeparator??".")}const uB={},hB=t=>!Ke(t)&&typeof t!="boolean"&&typeof t!="number";class lx extends v1{constructor(e,n={}){super(),$Ee(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=so.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!KEe(e,r,i);if(o&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Ke(s)?[s]:s};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(s=h.shift()),e=h.join(i)}return{key:e,namespaces:Ke(s)?[s]:s}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=yk(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],i),h=c[c.length-1];let f=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const d=i.lng||this.language,m=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode")return m?s?{res:`${h}${f}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${f}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:a;const y=this.resolve(e,i);let b=y?.res;const w=y?.usedKey||a,S=y?.exactUsedKey||a,_=["[object Number]","[object Function]","[object RegExp]"],A=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,P=i.count!==void 0&&!Ke(i.count),M=lx.hasDefaultValue(i),O=P?this.pluralResolver.getSuffix(d,i.count,i):"",L=i.ordinal&&P?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):"",N=P&&!i.ordinal&&i.count===0,z=N&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${O}`]||i[`defaultValue${L}`]||i.defaultValue;let j=b;k&&!b&&M&&(j=z);const U=hB(j),W=Object.prototype.toString.apply(j);if(k&&j&&U&&_.indexOf(W)<0&&!(Ke(A)&&Array.isArray(j))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const X=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,j,{...i,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(y.res=X,y.usedParams=this.getUsedParamsDetails(i),y):X}if(o){const X=Array.isArray(j),G=X?[]:{},ie=X?S:w;for(const F in j)if(Object.prototype.hasOwnProperty.call(j,F)){const Y=`${ie}${o}${F}`;M&&!b?G[F]=this.translate(Y,{...i,defaultValue:hB(z)?z[F]:void 0,joinArrays:!1,ns:c}):G[F]=this.translate(Y,{...i,joinArrays:!1,ns:c}),G[F]===Y&&(G[F]=j[F])}b=G}}else if(k&&Ke(A)&&Array.isArray(b))b=b.join(A),b&&(b=this.extendTranslation(b,e,i,r));else{let X=!1,G=!1;!this.isValidLookup(b)&&M&&(X=!0,b=z),this.isValidLookup(b)||(G=!0,b=a);const F=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:b,Y=M&&z!==b&&this.options.updateMissing;if(G||X||Y){if(this.logger.log(Y?"updateKey":"missingKey",d,h,a,Y?z:b),o){const Z=this.resolve(a,{...i,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&se&&se[0])for(let Z=0;Z<se.length;Z++)q.push(se[Z]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(i.lng||this.language):q.push(i.lng||this.language);const T=(Z,ue,I)=>{const pe=M&&I!==b?I:F;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,h,ue,pe,Y,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Z,h,ue,pe,Y,i),this.emit("missingKey",Z,h,ue,b)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?q.forEach(Z=>{const ue=this.pluralResolver.getSuffixes(Z,i);N&&i[`defaultValue${this.options.pluralSeparator}zero`]&&ue.indexOf(`${this.options.pluralSeparator}zero`)<0&&ue.push(`${this.options.pluralSeparator}zero`),ue.forEach(I=>{T([Z],a+I,i[`defaultValue${I}`]||z)})}):T(q,a,z))}b=this.extendTranslation(b,e,i,y,r),G&&b===a&&this.options.appendNamespaceToMissingKey&&(b=`${h}${f}${a}`),(G||X)&&this.options.parseMissingKeyHandler&&(b=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${f}${a}`:a,X?b:void 0,i))}return s?(y.res=b,y.usedParams=this.getUsedParamsDetails(i),y):b}extendTranslation(e,n,r,i,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=Ke(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const d=e.match(this.interpolator.nestingRegexp);h=d&&d.length}let f=r.replace&&!Ke(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||i.usedLng,r),c){const d=e.match(this.interpolator.nestingRegexp),m=d&&d.length;h<m&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...d)=>s?.[0]===d[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${d[0]} in key: ${n[0]}`),null):this.translate(...d,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=Ke(o)?[o]:o;return e!=null&&a?.length&&r.applyPostProcessor!==!1&&(e=yW.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,s,o,a;return Ke(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(c,n),f=h.key;i=f;let d=h.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const m=n.count!==void 0&&!Ke(n.count),y=m&&!n.ordinal&&n.count===0,b=n.context!==void 0&&(Ke(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(S=>{this.isValidLookup(r)||(a=S,!uB[`${w[0]}-${S}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(uB[`${w[0]}-${S}`]=!0,this.logger.warn(`key "${i}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(_=>{if(this.isValidLookup(r))return;o=_;const A=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(A,f,_,S,n);else{let P;m&&(P=this.pluralResolver.getSuffix(_,n.count,n));const M=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(n.ordinal&&P.indexOf(O)===0&&A.push(f+P.replace(O,this.options.pluralSeparator)),A.push(f+P),y&&A.push(f+M)),b){const L=`${f}${this.options.contextSeparator||"_"}${n.context}`;A.push(L),m&&(n.ordinal&&P.indexOf(O)===0&&A.push(L+P.replace(O,this.options.pluralSeparator)),A.push(L+P),y&&A.push(L+M))}}let k;for(;k=A.pop();)this.isValidLookup(r)||(s=k,r=this.getResource(_,S,k,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ke(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class fB{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=so.create("languageUtils")}getScriptPartFromCode(e){if(e=Em(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Em(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Ke(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Ke(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ke(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Ke(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}const dB={zero:0,one:1,two:2,few:3,many:4,other:5},pB={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class JEe{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=so.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Em(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),pB;if(!e.match(/-|_/))return pB;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,n)}return this.pluralRulesCache[s]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>dB[i]-dB[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const mB=(t,e,n,r=".",i=!0)=>{let s=zEe(t,e,n);return!s&&i&&Ke(n)&&(s=gk(t,n,r),s===void 0&&(s=gk(e,n,r))),s},O_=t=>t.replace(/\$/g,"$$$$");class QEe{constructor(e={}){this.logger=so.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:c,formatSeparator:h,unescapeSuffix:f,unescapePrefix:d,nestingPrefix:m,nestingPrefixEscaped:y,nestingSuffix:b,nestingSuffixEscaped:w,nestingOptionsSeparator:S,maxReplaces:_,alwaysFormat:A}=e.interpolation;this.escape=n!==void 0?n:UEe,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?zu(s):o||"{{",this.suffix=a?zu(a):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=f?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=m?zu(m):y||zu("$t("),this.nestingSuffix=b?zu(b):w||zu(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=_||1e3,this.alwaysFormat=A!==void 0?A:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=y=>{if(y.indexOf(this.formatSeparator)<0){const _=mB(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,r,{...i,...n,interpolationkey:y}):_}const b=y.split(this.formatSeparator),w=b.shift().trim(),S=b.join(this.formatSeparator).trim();return this.format(mB(n,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),S,r,{...i,...n,interpolationkey:w})};this.resetRegExp();const f=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>O_(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?O_(this.escape(y)):O_(y)}].forEach(y=>{for(a=0;s=y.regex.exec(e);){const b=s[1].trim();if(o=h(b),o===void 0)if(typeof f=="function"){const S=f(e,s,i);o=Ke(S)?S:""}else if(i&&Object.prototype.hasOwnProperty.call(i,b))o="";else if(d){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${e}`),o="";else!Ke(o)&&!this.useRawValueToEscape&&(o=sB(o));const w=y.safeValue(o);if(e=e.replace(s[0],w),d?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,s,o;const a=(c,h)=>{const f=this.nestingOptionsSeparator;if(c.indexOf(f)<0)return c;const d=c.split(new RegExp(`${f}[ ]*{`));let m=`{${d[1]}`;c=d[0],m=this.interpolate(m,o);const y=m.match(/'/g),b=m.match(/"/g);((y?.length??0)%2===0&&!b||b.length%2!==0)&&(m=m.replace(/'/g,'"'));try{o=JSON.parse(m),h&&(o={...h,...o})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,w),`${c}${f}${m}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!Ke(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(c=i[1].slice(h).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&!Ke(s))return s;Ke(s)||(s=sB(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c.length&&(s=c.reduce((f,d)=>this.format(f,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const ZEe=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...c]=o.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),f=a.trim();n[f]||(n[f]=h),h==="false"&&(n[f]=!1),h==="true"&&(n[f]=!0),isNaN(h)||(n[f]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},gB=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=e[o];return a||(a=t(Em(r),i),e[o]=a),a(n)}},eTe=t=>(e,n,r)=>t(Em(n),r)(e);class tTe{constructor(e={}){this.logger=so.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?gB:eTe;this.formats={number:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s});return a=>o.format(a)}),currency:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s,style:"currency"});return a=>o.format(a)}),datetime:r((i,s)=>{const o=new Intl.DateTimeFormat(i,{...s});return a=>o.format(a)}),relativetime:r((i,s)=>{const o=new Intl.RelativeTimeFormat(i,{...s});return a=>o.format(a,s.range||"day")}),list:r((i,s)=>{const o=new Intl.ListFormat(i,{...s});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=gB(n)}format(e,n,r,i={}){const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,c)=>{const{formatName:h,formatOptions:f}=ZEe(c);if(this.formats[h]){let d=a;try{const m=i?.formatParams?.[i.interpolationkey]||{},y=m.locale||m.lng||i.locale||i.lng||r;d=this.formats[h](a,y,{...f,...i,...m})}catch(m){this.logger.warn(m)}return d}else this.logger.warn(`there was no format function for ${h}`);return a},e)}}const nTe=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class rTe extends v1{constructor(e,n,r,i={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=so.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},c={};return e.forEach(h=>{let f=!0;n.forEach(d=>{const m=`${h}|${d}`;!r.reload&&this.store.hasResourceBundle(h,d)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?o[m]===void 0&&(o[m]=!0):(this.state[m]=1,f=!1,o[m]===void 0&&(o[m]=!0),s[m]===void 0&&(s[m]=!0),c[d]===void 0&&(c[d]=!0)))}),f||(a[h]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(c=>{FEe(c.loaded,[s],o),nTe(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{a[h]||(a[h]={});const f=c.loaded[h];f.length&&f.forEach(d=>{a[h][d]===void 0&&(a[h][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r,i=0,s=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(h,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(h&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(h,f)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const h=c(e,n);h&&typeof h.then=="function"?h.then(f=>a(null,f)).catch(a):a(null,h)}catch(h){a(h)}return}return c(e,n,a)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Ke(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ke(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s,o={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...o,isUpdate:s},h=this.backend.create.bind(this.backend);if(h.length<6)try{let f;h.length===5?f=h(e,n,r,i,c):f=h(e,n,r,i),f&&typeof f.then=="function"?f.then(d=>a(null,d)).catch(a):a(null,f)}catch(f){a(f)}else h(e,n,r,i,a,c)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const yB=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Ke(t[1])&&(e.defaultValue=t[1]),Ke(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),bB=t=>(Ke(t.ns)&&(t.ns=[t.ns]),Ke(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Ke(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Ky=()=>{},iTe=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Tm extends v1{constructor(e={},n){if(super(),this.options=bB(e),this.services={},this.logger=so,this.modules={external:[]},iTe(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Ke(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=yB();this.options={...r,...this.options,...bB(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?so.init(i(this.modules.logger),this.options):so.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=tTe;const f=new fB(this.options);this.store=new cB(this.options.resources,this.options);const d=this.services;d.logger=so,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new JEe(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=i(h),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new QEe(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new rTe(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(y,...b)=>{this.emit(y,...b)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new lx(this.services,this.options),this.translator.on("*",(y,...b)=>{this.emit(y,...b)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Ky),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...f)=>this.store[h](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...f)=>(this.store[h](...f),this)});const a=Fd(),c=()=>{const h=(f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),n(f,d)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,n=Ky){let r=n;const i=Ke(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(h=>{h!=="cimode"&&s.indexOf(h)<0&&s.push(h)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload?.forEach?.(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=Fd();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Ky),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&yW.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Fd();this.emit("languageChanging",e);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},s=(a,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),n&&n(a,(...h)=>this.t(...h))},o=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Ke(a)?a:a&&a[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Ke(a)?[a]:a);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,f=>{s(f,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(s,o,...a)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([s,o].concat(a)):c={...o},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let f;return c.keyPrefix&&Array.isArray(s)?f=s.map(d=>(typeof d=="function"&&(d=yk(d,{...this.options,...o})),`${c.keyPrefix}${h}${d}`)):(typeof s=="function"&&(s=yk(s,{...this.options,...o})),f=c.keyPrefix?`${c.keyPrefix}${h}${s}`:s),this.t(f,c)};return Ke(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const h=this.services.backendConnector.state[`${a}|${c}`];return h===-1||h===0||h===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=Fd();return this.options.ns?(Ke(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Fd();Ke(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const s=i.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new fB(yB());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Tm(e,n)}cloneInstance(e={},n=Ky){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Tm(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((f,d)=>(f[d]={...c[h][d]},f),c[h]),c),{});s.store=new cB(a,i),s.services.resourceStore=s.store}return s.translator=new lx(s.services,i),s.translator.on("*",(a,...c)=>{s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const wr=Tm.createInstance();wr.createInstance=Tm.createInstance;wr.createInstance;wr.dir;wr.init;wr.loadResources;wr.reloadResources;wr.use;wr.changeLanguage;wr.getFixedT;wr.t;wr.exists;wr.setDefaultNamespace;wr.hasLoadedNamespace;wr.loadNamespaces;wr.loadLanguages;const sTe="AI Agent",oTe="AI Agent Settings",aTe="Settings",lTe="Connect an AI Model to Get Started",cTe="No AI model is connected yet. Link a model to start interacting with it right here in the interface.",uTe="Connect an AI Model",hTe="Chat history",fTe="There is no chat history yet...",dTe="Choose how to connect AI",pTe="Select how you want to enable AI features in ONLYOFFICE.",mTe="You can either use the built-in Wallet for a quick start or connect your own AI model using an API key or a locally hosted model.",gTe="ONLYOFFICE Wallet",yTe="Top up your balance with a card and instantly use all AI features.",bTe="Your AI provider",vTe="Connect your own AI source  either via API key from a provider or a locally hosted model.",xTe="Register & Connect Wallet",wTe="Add provider",STe="Connection",_Te="MCP Servers",CTe="AI Provider",ATe="Edit AI Provider",kTe="Provider",ETe="Name",TTe="URL",RTe="Enter name",MTe="Enter URL",OTe="API key",PTe="Enter API key",DTe="Cancel",LTe="Save",ITe="Edit",NTe="Delete",BTe="Warning",jTe="Yes",$Te="No",VTe="How can I help?",FTe="Free Al chat, writing assistant & idea generator",zTe="Rename",HTe="Download",UTe="Search...",qTe="Add local file...",WTe="Recent files",GTe="Attachments",KTe="API key",YTe="New chat",XTe="Ask AI",JTe="Analyzing...",QTe="Al would like to use this tool:",ZTe=`Review each action carefully before approving
 We cannot guarantee the security or privacy practices of third-party integrations.`,eRe="Always allow this tool to perform this action without asking again",tRe="Deny",nRe="Allow",rRe="Tool call arguments",iRe="Tool call result",sRe="Tool executed",oRe="Confirmation",aRe="Select model",lRe=" This section allows you to configure MCP servers for use within the AI Agent. You can edit the configuration to add new MCP servers and enable tools as needed.",cRe="Edit configuration",uRe="Enter your JSON configuration:",hRe="Available tools",fRe="tools",dRe="tools enabled",pRe="Enable all tools",mRe="Disable all tools",gRe="Restart",yRe="Logs",bRe="Copy to clipboard",vRe="Close",xRe="Web Search",wRe="Connect a web search engine to enhance AI chats with real-time information from the internet.",SRe="Reset settings",_Re="Web Search Engine",CRe="Select engine",ARe="All tools",kRe={AIAgent:sTe,AIAgentSettings:oTe,Settings:aTe,ConnectAIModel:lTe,ConnectAIModelDescription:cTe,ConnectAIModelBtn:uTe,ChatHistory:hTe,NoChatYet:fTe,ChooseHowConnect:dTe,SelectHowConnect:pTe,SelectHowConnectDescription:mTe,ONLYOFFICEWallet:gTe,ONLYOFFICEWalletDescription:yTe,AIProviders:bTe,AIProvidersDescription:vTe,RegisterConnectWallet:xTe,AddProvider:wTe,Connection:STe,MCPServers:_Te,AIProvider:CTe,EditAIProvider:ATe,Provider:kTe,Name:ETe,URL:TTe,EnterName:RTe,EnterURL:MTe,Key:OTe,EnterKey:PTe,Cancel:DTe,Save:LTe,Edit:ITe,Delete:NTe,Warning:BTe,"WantDeleteProvider?":"Are you sure you want to delete this provider?","WantDeleteChat?":"Are you sure you want to delete this chat?",Yes:jTe,No:$Te,WelcomeTitle:VTe,WelcomeDescription:FTe,Rename:zTe,Download:HTe,Search:UTe,AddLocalFile:qTe,RecentFiles:WTe,Attachments:GTe,APIKey:KTe,NewChat:YTe,AskAI:XTe,Analyzing:JTe,AIWouldLikeUseThisTool:QTe,ReviewEachAction:ZTe,AlwaysAllow:eRe,Deny:tRe,Allow:nRe,ToolCallArguments:rRe,ToolCallResult:iRe,ToolExecuted:sRe,Confirmation:oRe,SelectModel:aRe,CustomServersDescription:lRe,EditConfiguration:cRe,EnterYourJSONConfiguration:uRe,AvailableTools:hRe,Tools:fRe,ToolsEnabled:dRe,EnableAllTools:pRe,DisableAllTools:mRe,Restart:gRe,Logs:yRe,CopyToClipboard:bRe,Close:vRe,WebSearch:xRe,WebSearchDescription:wRe,ResetSettings:SRe,WebSearchEngine:_Re,SelectEngine:CRe,AllTools:ARe},ERe=" ",TRe="  ",RRe="",MRe="     ",ORe="    .  ,         .",PRe=" ",DRe=" ",LRe="   ",IRe=",   ",NRe=",         ONLYOFFICE.",BRe="        ,          API-    .",jRe="ONLYOFFICE ",$Re="           .",VRe="   ",FRe="         API-  ,    .",zRe="   ",HRe=" ",URe="",qRe="MCP ",WRe=" ",GRe="  ",KRe="",YRe="",XRe="URL",JRe=" ",QRe=" URL",ZRe="API ",eMe=" API ",tMe="",nMe="",rMe="",iMe="",sMe="",oMe="",aMe="",lMe="",cMe="",uMe="...",hMe="API ",fMe="",dMe="   ?",pMe="    ,      ",mMe=" ",gMe=" ",yMe="  ...",bMe=" ",vMe="...",xMe="    :",wMe=`    
          .`,SMe="         ",_Me="",CMe="",AMe="  ",kMe="  ",EMe=" ",TMe="",RMe=" ",MMe="    MCP     AI Agent.    ,    MCP       .",OMe=" ",PMe="   JSON:",DMe=" ",LMe="",IMe=" ",NMe="  ",BMe="  ",jMe="",$Me="",VMe="   ",FMe="",zMe="  ",HMe="            .",UMe=" ",qMe=" ",WMe=" ",GMe=" ",KMe={AIAgent:ERe,AIAgentSettings:TRe,Settings:RRe,ConnectAIModel:MRe,ConnectAIModelDescription:ORe,ConnectAIModelBtn:PRe,ChatHistory:DRe,NoChatYet:LRe,ChooseHowConnect:IRe,SelectHowConnect:NRe,SelectHowConnectDescription:BRe,ONLYOFFICEWallet:jRe,ONLYOFFICEWalletDescription:$Re,AIProviders:VRe,AIProvidersDescription:FRe,RegisterConnectWallet:zRe,AddProvider:HRe,Connection:URe,MCPServers:qRe,AIProvider:WRe,EditAIProvider:GRe,Provider:KRe,Name:YRe,URL:XRe,EnterName:JRe,EnterURL:QRe,Key:ZRe,EnterKey:eMe,Cancel:tMe,Save:nMe,Edit:rMe,Delete:iMe,Warning:sMe,"WantDeleteProvider?":" ,     ?","WantDeleteChat?":" ,     ?",Rename:oMe,Download:aMe,Yes:lMe,No:cMe,Search:uMe,APIKey:hMe,Attachments:fMe,WelcomeTitle:dMe,WelcomeDescription:pMe,NewChat:mMe,AskAI:gMe,AddLocalFile:yMe,RecentFiles:bMe,Analyzing:vMe,AIWouldLikeUseThisTool:xMe,ReviewEachAction:wMe,AlwaysAllow:SMe,Deny:_Me,Allow:CMe,ToolCallArguments:AMe,ToolCallResult:kMe,ToolExecuted:EMe,Confirmation:TMe,SelectModel:RMe,CustomServersDescription:MMe,EditConfiguration:OMe,EnterYourJSONConfiguration:PMe,AvailableTools:DMe,Tools:LMe,ToolsEnabled:IMe,EnableAllTools:NMe,DisableAllTools:BMe,Restart:jMe,Logs:$Me,CopyToClipboard:VMe,Close:FMe,WebSearch:zMe,WebSearchDescription:HMe,ResetSettings:UMe,WebSearchEngine:qMe,SelectEngine:WMe,AllTools:GMe};wr.use(Nre).init({resources:{en:{translation:kRe},ru:{translation:KMe}},fallbackLng:"en",interpolation:{escapeValue:!1}});const YMe=()=>{const[t,e]=E.useState(!1),[n,r]=E.useState(!1),{messages:i,stopMessage:s}=Kh(),{providers:o,fetchProvidersModels:a}=Es(),{currentPage:c}=Bm(),{manageToolData:h}=vo();NEe({isReady:t}),BEe(),jEe({isReady:t});const{onNew:f,convertMessage:d,approveToolCall:m,denyToolCall:y}=IEe({isReady:t});E.useEffect(()=>{o.length&&a()},[o,a]),E.useEffect(()=>{h&&r(!0)},[h]),E.useEffect(()=>(bre().then(()=>e(!0)),()=>{ks.close()}),[]);const b=bY({messages:i,onNew:f,onCancel:async()=>{s()},convertMessage:d,adapters:{attachments:new oY([new nY,new iY])}});return c!=="settings"&&!o.length?C.jsx(iB,{children:C.jsx(Nie,{})}):C.jsxs(iB,{children:[C.jsx(dX,{runtime:b,children:c==="settings"?C.jsx(jpe,{}):C.jsx(pEe,{})}),n?C.jsx(LEe,{onAllow:m,onDeny:y,onClose:()=>r(!1)}):null]})},vB=()=>{let t=document.getElementById("root");if(!t){const e=window.parent.document.querySelector('iframe[name="system_asc.{9DC93CDB-B576-4F0C-B55E-FCC9C48DD777}"]');e&&e.contentDocument&&(t=e.contentDocument.getElementById("root"))}t||(t=document.createElement("div"),t.id="root",document.body.appendChild(t)),t&&!t.hasAttribute("data-react-root")&&(t.setAttribute("data-react-root","true"),CK.createRoot(t).render(C.jsx(E.StrictMode,{children:C.jsx(YMe,{})})))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",vB):vB();

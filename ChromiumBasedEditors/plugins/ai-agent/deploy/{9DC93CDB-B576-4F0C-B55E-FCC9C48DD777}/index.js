const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["angular-html.js","html.js","javascript.js","css.js","angular-ts.js","scss.js","apl.js","xml.js","java.js","json.js","astro.js","typescript.js","postcss.js","tsx.js","blade.js","html-derivative.js","sql.js","bsl.js","sdbl.js","cairo.js","python.js","cobol.js","coffee.js","cpp.js","regexp.js","glsl.js","c.js","crystal.js","shellscript.js","edge.js","elixir.js","elm.js","erb.js","ruby.js","haml.js","graphql.js","jsx.js","lua.js","yaml.js","erlang.js","markdown.js","fortran-fixed-form.js","fortran-free-form.js","fsharp.js","gdresource.js","gdshader.js","gdscript.js","git-commit.js","diff.js","git-rebase.js","glimmer-js.js","glimmer-ts.js","hack.js","handlebars.js","http.js","hxml.js","haxe.js","jinja.js","jison.js","julia.js","r.js","latex.js","tex.js","liquid.js","marko.js","less.js","mdc.js","nginx.js","nim.js","perl.js","php.js","pug.js","qml.js","razor.js","csharp.js","rst.js","cmake.js","sas.js","shaderlab.js","hlsl.js","shellsession.js","soy.js","sparql.js","turtle.js","stata.js","svelte.js","templ.js","go.js","ts-tags.js","twig.js","vue.js","vue-html.js","vue-vine.js","stylus.js","xsl.js"])))=>i.map(i=>d[i]);
function dK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vS={exports:{}},hd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YP;function pK(){if(YP)return hd;YP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return hd.Fragment=e,hd.jsx=n,hd.jsxs=n,hd}var XP;function mK(){return XP||(XP=1,vS.exports=pK()),vS.exports}var C=mK(),xS={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JP;function gK(){if(JP)return Xe;JP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function m(T){return T===null||typeof T!="object"?null:(T=d&&T[d]||T["@@iterator"],typeof T=="function"?T:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function _(T,Z,ue){this.props=T,this.context=Z,this.refs=w,this.updater=ue||y}_.prototype.isReactComponent={},_.prototype.setState=function(T,Z){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,Z,"setState")},_.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function S(){}S.prototype=_.prototype;function A(T,Z,ue){this.props=T,this.context=Z,this.refs=w,this.updater=ue||y}var k=A.prototype=new S;k.constructor=A,v(k,_.prototype),k.isPureReactComponent=!0;var P=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function L(T,Z,ue,I,pe,Ee){return ue=Ee.ref,{$$typeof:t,type:T,key:Z,ref:ue!==void 0?ue:null,props:Ee}}function N(T,Z){return L(T.type,Z,void 0,void 0,void 0,T.props)}function z(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function j(T){var Z={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ue){return Z[ue]})}var H=/\/+/g;function W(T,Z){return typeof T=="object"&&T!==null&&T.key!=null?j(""+T.key):Z.toString(36)}function X(){}function G(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(X,X):(T.status="pending",T.then(function(Z){T.status==="pending"&&(T.status="fulfilled",T.value=Z)},function(Z){T.status==="pending"&&(T.status="rejected",T.reason=Z)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function ie(T,Z,ue,I,pe){var Ee=typeof T;(Ee==="undefined"||Ee==="boolean")&&(T=null);var ye=!1;if(T===null)ye=!0;else switch(Ee){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(T.$$typeof){case t:case e:ye=!0;break;case f:return ye=T._init,ie(ye(T._payload),Z,ue,I,pe)}}if(ye)return pe=pe(T),ye=I===""?"."+W(T,0):I,P(pe)?(ue="",ye!=null&&(ue=ye.replace(H,"$&/")+"/"),ie(pe,Z,ue,"",function(Ot){return Ot})):pe!=null&&(z(pe)&&(pe=N(pe,ue+(pe.key==null||T&&T.key===pe.key?"":(""+pe.key).replace(H,"$&/")+"/")+ye)),Z.push(pe)),1;ye=0;var ke=I===""?".":I+":";if(P(T))for(var ze=0;ze<T.length;ze++)I=T[ze],Ee=ke+W(I,ze),ye+=ie(I,Z,ue,Ee,pe);else if(ze=m(T),typeof ze=="function")for(T=ze.call(T),ze=0;!(I=T.next()).done;)I=I.value,Ee=ke+W(I,ze++),ye+=ie(I,Z,ue,Ee,pe);else if(Ee==="object"){if(typeof T.then=="function")return ie(G(T),Z,ue,I,pe);throw Z=String(T),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ye}function F(T,Z,ue){if(T==null)return T;var I=[],pe=0;return ie(T,I,"","",function(Ee){return Z.call(ue,Ee,pe++)}),I}function Y(T){if(T._status===-1){var Z=T._result;Z=Z(),Z.then(function(ue){(T._status===0||T._status===-1)&&(T._status=1,T._result=ue)},function(ue){(T._status===0||T._status===-1)&&(T._status=2,T._result=ue)}),T._status===-1&&(T._status=0,T._result=Z)}if(T._status===1)return T._result.default;throw T._result}var q=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function se(){}return Xe.Children={map:F,forEach:function(T,Z,ue){F(T,function(){Z.apply(this,arguments)},ue)},count:function(T){var Z=0;return F(T,function(){Z++}),Z},toArray:function(T){return F(T,function(Z){return Z})||[]},only:function(T){if(!z(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Xe.Component=_,Xe.Fragment=n,Xe.Profiler=i,Xe.PureComponent=A,Xe.StrictMode=r,Xe.Suspense=c,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(T){return M.H.useMemoCache(T)}},Xe.cache=function(T){return function(){return T.apply(null,arguments)}},Xe.cloneElement=function(T,Z,ue){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var I=v({},T.props),pe=T.key,Ee=void 0;if(Z!=null)for(ye in Z.ref!==void 0&&(Ee=void 0),Z.key!==void 0&&(pe=""+Z.key),Z)!O.call(Z,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Z.ref===void 0||(I[ye]=Z[ye]);var ye=arguments.length-2;if(ye===1)I.children=ue;else if(1<ye){for(var ke=Array(ye),ze=0;ze<ye;ze++)ke[ze]=arguments[ze+2];I.children=ke}return L(T.type,pe,void 0,void 0,Ee,I)},Xe.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:s,_context:T},T},Xe.createElement=function(T,Z,ue){var I,pe={},Ee=null;if(Z!=null)for(I in Z.key!==void 0&&(Ee=""+Z.key),Z)O.call(Z,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(pe[I]=Z[I]);var ye=arguments.length-2;if(ye===1)pe.children=ue;else if(1<ye){for(var ke=Array(ye),ze=0;ze<ye;ze++)ke[ze]=arguments[ze+2];pe.children=ke}if(T&&T.defaultProps)for(I in ye=T.defaultProps,ye)pe[I]===void 0&&(pe[I]=ye[I]);return L(T,Ee,void 0,void 0,null,pe)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(T){return{$$typeof:a,render:T}},Xe.isValidElement=z,Xe.lazy=function(T){return{$$typeof:f,_payload:{_status:-1,_result:T},_init:Y}},Xe.memo=function(T,Z){return{$$typeof:h,type:T,compare:Z===void 0?null:Z}},Xe.startTransition=function(T){var Z=M.T,ue={};M.T=ue;try{var I=T(),pe=M.S;pe!==null&&pe(ue,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(se,q)}catch(Ee){q(Ee)}finally{M.T=Z}},Xe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Xe.use=function(T){return M.H.use(T)},Xe.useActionState=function(T,Z,ue){return M.H.useActionState(T,Z,ue)},Xe.useCallback=function(T,Z){return M.H.useCallback(T,Z)},Xe.useContext=function(T){return M.H.useContext(T)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(T,Z){return M.H.useDeferredValue(T,Z)},Xe.useEffect=function(T,Z,ue){var I=M.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(T,Z)},Xe.useId=function(){return M.H.useId()},Xe.useImperativeHandle=function(T,Z,ue){return M.H.useImperativeHandle(T,Z,ue)},Xe.useInsertionEffect=function(T,Z){return M.H.useInsertionEffect(T,Z)},Xe.useLayoutEffect=function(T,Z){return M.H.useLayoutEffect(T,Z)},Xe.useMemo=function(T,Z){return M.H.useMemo(T,Z)},Xe.useOptimistic=function(T,Z){return M.H.useOptimistic(T,Z)},Xe.useReducer=function(T,Z,ue){return M.H.useReducer(T,Z,ue)},Xe.useRef=function(T){return M.H.useRef(T)},Xe.useState=function(T){return M.H.useState(T)},Xe.useSyncExternalStore=function(T,Z,ue){return M.H.useSyncExternalStore(T,Z,ue)},Xe.useTransition=function(){return M.H.useTransition()},Xe.version="19.1.1",Xe}var QP;function yk(){return QP||(QP=1,xS.exports=gK()),xS.exports}var E=yk();const xe=Mc(E),bB=dK({__proto__:null,default:xe},[E]);var wS={exports:{}},fd={},SS={exports:{}},_S={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZP;function yK(){return ZP||(ZP=1,(function(t){function e(F,Y){var q=F.length;F.push(Y);e:for(;0<q;){var se=q-1>>>1,T=F[se];if(0<i(T,Y))F[se]=Y,F[q]=T,q=se;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],q=F.pop();if(q!==Y){F[0]=q;e:for(var se=0,T=F.length,Z=T>>>1;se<Z;){var ue=2*(se+1)-1,I=F[ue],pe=ue+1,Ee=F[pe];if(0>i(I,q))pe<T&&0>i(Ee,I)?(F[se]=Ee,F[pe]=q,se=pe):(F[se]=I,F[ue]=q,se=ue);else if(pe<T&&0>i(Ee,q))F[se]=Ee,F[pe]=q,se=pe;else break e}}return Y}function i(F,Y){var q=F.sortIndex-Y.sortIndex;return q!==0?q:F.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,d=null,m=3,y=!1,v=!1,w=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function P(F){for(var Y=n(h);Y!==null;){if(Y.callback===null)r(h);else if(Y.startTime<=F)r(h),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(h)}}function M(F){if(w=!1,P(F),!v)if(n(c)!==null)v=!0,O||(O=!0,W());else{var Y=n(h);Y!==null&&ie(M,Y.startTime-F)}}var O=!1,L=-1,N=5,z=-1;function j(){return _?!0:!(t.unstable_now()-z<N)}function H(){if(_=!1,O){var F=t.unstable_now();z=F;var Y=!0;try{e:{v=!1,w&&(w=!1,A(L),L=-1),y=!0;var q=m;try{t:{for(P(F),d=n(c);d!==null&&!(d.expirationTime>F&&j());){var se=d.callback;if(typeof se=="function"){d.callback=null,m=d.priorityLevel;var T=se(d.expirationTime<=F);if(F=t.unstable_now(),typeof T=="function"){d.callback=T,P(F),Y=!0;break t}d===n(c)&&r(c),P(F)}else r(c);d=n(c)}if(d!==null)Y=!0;else{var Z=n(h);Z!==null&&ie(M,Z.startTime-F),Y=!1}}break e}finally{d=null,m=q,y=!1}Y=void 0}}finally{Y?W():O=!1}}}var W;if(typeof k=="function")W=function(){k(H)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,G=X.port2;X.port1.onmessage=H,W=function(){G.postMessage(null)}}else W=function(){S(H,0)};function ie(F,Y){L=S(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(F){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var q=m;m=Y;try{return F()}finally{m=q}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var q=m;m=F;try{return Y()}finally{m=q}},t.unstable_scheduleCallback=function(F,Y,q){var se=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,F){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=q+T,F={id:f++,callback:Y,priorityLevel:F,startTime:q,expirationTime:T,sortIndex:-1},q>se?(F.sortIndex=q,e(h,F),n(c)===null&&F===n(h)&&(w?(A(L),L=-1):w=!0,ie(M,q-se))):(F.sortIndex=T,e(c,F),v||y||(v=!0,O||(O=!0,W()))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var Y=m;return function(){var q=m;m=Y;try{return F.apply(this,arguments)}finally{m=q}}}})(_S)),_S}var eD;function bK(){return eD||(eD=1,SS.exports=yK()),SS.exports}var CS={exports:{}},lr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tD;function vK(){if(tD)return lr;tD=1;var t=yk();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,h,f){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:c,containerInfo:h,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return lr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,lr.createPortal=function(c,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(c,h,null,f)},lr.flushSync=function(c){var h=o.T,f=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=h,r.p=f,r.d.f()}},lr.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},lr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},lr.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var f=h.as,d=a(f,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:d,integrity:m,fetchPriority:y}):f==="script"&&r.d.X(c,{crossOrigin:d,integrity:m,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},lr.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=a(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},lr.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,d=a(f,h.crossOrigin);r.d.L(c,f,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},lr.preloadModule=function(c,h){if(typeof c=="string")if(h){var f=a(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},lr.requestFormReset=function(c){r.d.r(c)},lr.unstable_batchedUpdates=function(c,h){return c(h)},lr.useFormState=function(c,h,f){return o.H.useFormState(c,h,f)},lr.useFormStatus=function(){return o.H.useHostTransitionStatus()},lr.version="19.1.1",lr}var nD;function vB(){if(nD)return CS.exports;nD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),CS.exports=vK(),CS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD;function xK(){if(rD)return fd;rD=1;var t=bK(),e=yk(),n=vB();function r(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function a(l){if(s(l)!==l)throw Error(r(188))}function c(l){var u=l.alternate;if(!u){if(u=s(l),u===null)throw Error(r(188));return u!==l?null:l}for(var p=l,g=u;;){var b=p.return;if(b===null)break;var x=b.alternate;if(x===null){if(g=b.return,g!==null){p=g;continue}break}if(b.child===x.child){for(x=b.child;x;){if(x===p)return a(b),l;if(x===g)return a(b),u;x=x.sibling}throw Error(r(188))}if(p.return!==g.return)p=b,g=x;else{for(var R=!1,D=b.child;D;){if(D===p){R=!0,p=b,g=x;break}if(D===g){R=!0,g=b,p=x;break}D=D.sibling}if(!R){for(D=x.child;D;){if(D===p){R=!0,p=x,g=b;break}if(D===g){R=!0,g=x,p=b;break}D=D.sibling}if(!R)throw Error(r(189))}}if(p.alternate!==g)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var f=Object.assign,d=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),k=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function W(l){return l===null||typeof l!="object"?null:(l=H&&l[H]||l["@@iterator"],typeof l=="function"?l:null)}var X=Symbol.for("react.client.reference");function G(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===X?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case M:return"Suspense";case O:return"SuspenseList";case z:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case k:return(l.displayName||"Context")+".Provider";case A:return(l._context.displayName||"Context")+".Consumer";case P:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return u=l.displayName||null,u!==null?u:G(l.type)||"Memo";case N:u=l._payload,l=l._init;try{return G(l(u))}catch{}}return null}var ie=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},se=[],T=-1;function Z(l){return{current:l}}function ue(l){0>T||(l.current=se[T],se[T]=null,T--)}function I(l,u){T++,se[T]=l.current,l.current=u}var pe=Z(null),Ee=Z(null),ye=Z(null),ke=Z(null);function ze(l,u){switch(I(ye,u),I(Ee,l),I(pe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?_P(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=_P(u),l=CP(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ue(pe),I(pe,l)}function Ot(){ue(pe),ue(Ee),ue(ye)}function Kt(l){l.memoizedState!==null&&I(ke,l);var u=pe.current,p=CP(u,l.type);u!==p&&(I(Ee,l),I(pe,p))}function Yt(l){Ee.current===l&&(ue(pe),ue(Ee)),ke.current===l&&(ue(ke),od._currentValue=q)}var Zn=Object.prototype.hasOwnProperty,er=t.unstable_scheduleCallback,ei=t.unstable_cancelCallback,_o=t.unstable_shouldYield,rs=t.unstable_requestPaint,tr=t.unstable_now,of=t.unstable_getCurrentPriorityLevel,Al=t.unstable_ImmediatePriority,Rs=t.unstable_UserBlockingPriority,Ms=t.unstable_NormalPriority,$c=t.unstable_LowPriority,kl=t.unstable_IdlePriority,Ri=t.log,aa=t.unstable_setDisableYieldValue,oe=null,me=null;function De(l){if(typeof Ri=="function"&&aa(l),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(oe,l)}catch{}}var Be=Math.clz32?Math.clz32:is,gt=Math.log,Sr=Math.LN2;function is(l){return l>>>=0,l===0?32:31-(gt(l)/Sr|0)|0}var nr=256,ti=4194304;function _r(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function rn(l,u,p){var g=l.pendingLanes;if(g===0)return 0;var b=0,x=l.suspendedLanes,R=l.pingedLanes;l=l.warmLanes;var D=g&134217727;return D!==0?(g=D&~x,g!==0?b=_r(g):(R&=D,R!==0?b=_r(R):p||(p=D&~l,p!==0&&(b=_r(p))))):(D=g&~x,D!==0?b=_r(D):R!==0?b=_r(R):p||(p=g&~l,p!==0&&(b=_r(p)))),b===0?0:u!==0&&u!==b&&(u&x)===0&&(x=b&-b,p=u&-u,x>=p||x===32&&(p&4194048)!==0)?u:b}function rr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function jn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vc(){var l=nr;return nr<<=1,(nr&4194048)===0&&(nr=256),l}function Fc(){var l=ti;return ti<<=1,(ti&62914560)===0&&(ti=4194304),l}function El(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function ss(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function vw(l,u,p,g,b,x){var R=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var D=l.entanglements,V=l.expirationTimes,ee=l.hiddenUpdates;for(p=R&~p;0<p;){var ae=31-Be(p),he=1<<ae;D[ae]=0,V[ae]=-1;var ne=ee[ae];if(ne!==null)for(ee[ae]=null,ae=0;ae<ne.length;ae++){var re=ne[ae];re!==null&&(re.lane&=-536870913)}p&=~he}g!==0&&ig(l,g,0),x!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=x&~(R&~u))}function ig(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-Be(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|p&4194090}function sg(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var g=31-Be(p),b=1<<g;b&u|l[g]&u&&(l[g]|=u),p&=~b}}function af(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function lf(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function cf(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:UP(l.type))}function og(l,u){var p=Y.p;try{return Y.p=l,u()}finally{Y.p=p}}var ir=Math.random().toString(36).slice(2),Rn="__reactFiber$"+ir,sr="__reactProps$"+ir,la="__reactContainer$"+ir,uf="__reactEvents$"+ir,xw="__reactListeners$"+ir,os="__reactHandles$"+ir,ag="__reactResources$"+ir,Tl="__reactMarker$"+ir;function hf(l){delete l[Rn],delete l[sr],delete l[uf],delete l[xw],delete l[os]}function ca(l){var u=l[Rn];if(u)return u;for(var p=l.parentNode;p;){if(u=p[la]||p[Rn]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(l=TP(l);l!==null;){if(p=l[Rn])return p;l=TP(l)}return u}l=p,p=l.parentNode}return null}function ua(l){if(l=l[Rn]||l[la]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Mi(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(r(33))}function ha(l){var u=l[ag];return u||(u=l[ag]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function sn(l){l[Tl]=!0}var lg=new Set,cg={};function Co(l,u){ni(l,u),ni(l+"Capture",u)}function ni(l,u){for(cg[l]=u,l=0;l<u.length;l++)lg.add(u[l])}var ww=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ug={},hg={};function Sw(l){return Zn.call(hg,l)?!0:Zn.call(ug,l)?!1:ww.test(l)?hg[l]=!0:(ug[l]=!0,!1)}function zc(l,u,p){if(Sw(u))if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+p)}}function Uc(l,u,p){if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+p)}}function Oi(l,u,p,g){if(g===null)l.removeAttribute(p);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(u,p,""+g)}}var fa,fg;function Os(l){if(fa===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);fa=u&&u[1]||"",fg=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fa+l+fg}var ff=!1;function df(l,u){if(!l||ff)return"";ff=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ne=re}Reflect.construct(l,[],he)}else{try{he.call()}catch(re){ne=re}l.call(he.prototype)}}else{try{throw Error()}catch(re){ne=re}(he=l())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=g.DetermineComponentFrameRoot(),R=x[0],D=x[1];if(R&&D){var V=R.split(`
`),ee=D.split(`
`);for(b=g=0;g<V.length&&!V[g].includes("DetermineComponentFrameRoot");)g++;for(;b<ee.length&&!ee[b].includes("DetermineComponentFrameRoot");)b++;if(g===V.length||b===ee.length)for(g=V.length-1,b=ee.length-1;1<=g&&0<=b&&V[g]!==ee[b];)b--;for(;1<=g&&0<=b;g--,b--)if(V[g]!==ee[b]){if(g!==1||b!==1)do if(g--,b--,0>b||V[g]!==ee[b]){var ae=`
`+V[g].replace(" at new "," at ");return l.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",l.displayName)),ae}while(1<=g&&0<=b);break}}}finally{ff=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Os(p):""}function _w(l){switch(l.tag){case 26:case 27:case 5:return Os(l.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 15:return df(l.type,!1);case 11:return df(l.type.render,!1);case 1:return df(l.type,!0);case 31:return Os("Activity");default:return""}}function dg(l){try{var u="";do u+=_w(l),l=l.return;while(l);return u}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Br(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function pg(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function pf(l){var u=pg(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),g=""+l[u];if(!l.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,x=p.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(R){g=""+R,x.call(this,R)}}),Object.defineProperty(l,u,{enumerable:p.enumerable}),{getValue:function(){return g},setValue:function(R){g=""+R},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Hc(l){l._valueTracker||(l._valueTracker=pf(l))}function mg(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var p=u.getValue(),g="";return l&&(g=pg(l)?l.checked?"true":"false":l.value),l=g,l!==p?(u.setValue(l),!0):!1}function qc(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Cw=/[\n"\\]/g;function jr(l){return l.replace(Cw,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function mf(l,u,p,g,b,x,R,D){l.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?l.type=R:l.removeAttribute("type"),u!=null?R==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Br(u)):l.value!==""+Br(u)&&(l.value=""+Br(u)):R!=="submit"&&R!=="reset"||l.removeAttribute("value"),u!=null?Wc(l,R,Br(u)):p!=null?Wc(l,R,Br(p)):g!=null&&l.removeAttribute("value"),b==null&&x!=null&&(l.defaultChecked=!!x),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?l.name=""+Br(D):l.removeAttribute("name")}function gg(l,u,p,g,b,x,R,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(l.type=x),u!=null||p!=null){if(!(x!=="submit"&&x!=="reset"||u!=null))return;p=p!=null?""+Br(p):"",u=u!=null?""+Br(u):p,D||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=D?l.checked:!!g,l.defaultChecked=!!g,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(l.name=R)}function Wc(l,u,p){u==="number"&&qc(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function da(l,u,p,g){if(l=l.options,u){u={};for(var b=0;b<p.length;b++)u["$"+p[b]]=!0;for(p=0;p<l.length;p++)b=u.hasOwnProperty("$"+l[p].value),l[p].selected!==b&&(l[p].selected=b),b&&g&&(l[p].defaultSelected=!0)}else{for(p=""+Br(p),u=null,b=0;b<l.length;b++){if(l[b].value===p){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function yg(l,u,p){if(u!=null&&(u=""+Br(u),u!==l.value&&(l.value=u),p==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=p!=null?""+Br(p):""}function Rl(l,u,p,g){if(u==null){if(g!=null){if(p!=null)throw Error(r(92));if(ie(g)){if(1<g.length)throw Error(r(93));g=g[0]}p=g}p==null&&(p=""),u=p}p=Br(u),l.defaultValue=p,g=l.textContent,g===p&&g!==""&&g!==null&&(l.value=g)}function ri(l,u){if(u){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=u;return}}l.textContent=u}var bg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ps(l,u,p){var g=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,p):typeof p!="number"||p===0||bg.has(u)?u==="float"?l.cssFloat=p:l[u]=(""+p).trim():l[u]=p+"px"}function vg(l,u,p){if(u!=null&&typeof u!="object")throw Error(r(62));if(l=l.style,p!=null){for(var g in p)!p.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&p[b]!==g&&Ps(l,b,g)}else for(var x in u)u.hasOwnProperty(x)&&Ps(l,x,u[x])}function gf(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gc(l){return kw.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var yf=null;function Kc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var $r=null,pa=null;function bf(l){var u=ua(l);if(u&&(l=u.stateNode)){var p=l[sr]||null;e:switch(l=u.stateNode,u.type){case"input":if(mf(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+jr(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var g=p[u];if(g!==l&&g.form===l.form){var b=g[sr]||null;if(!b)throw Error(r(90));mf(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<p.length;u++)g=p[u],g.form===l.form&&mg(g)}break e;case"textarea":yg(l,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&da(l,!!p.multiple,u,!1)}}}var vf=!1;function Yc(l,u,p){if(vf)return l(u,p);vf=!0;try{var g=l(u);return g}finally{if(vf=!1,($r!==null||pa!==null)&&(t0(),$r&&(u=$r,l=pa,pa=$r=null,bf(u),l)))for(u=0;u<l.length;u++)bf(l[u])}}function ma(l,u){var p=l.stateNode;if(p===null)return null;var g=p[sr]||null;if(g===null)return null;p=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,u,typeof p));return p}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xf=!1;if(as)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){xf=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{xf=!1}var Ds=null,ya=null,Xc=null;function Jc(){if(Xc)return Xc;var l,u=ya,p=u.length,g,b="value"in Ds?Ds.value:Ds.textContent,x=b.length;for(l=0;l<p&&u[l]===b[l];l++);var R=p-l;for(g=1;g<=R&&u[p-g]===b[x-g];g++);return Xc=b.slice(l,1<g?1-g:void 0)}function Qc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Zc(){return!0}function B(){return!1}function Q(l){function u(p,g,b,x,R){this._reactName=p,this._targetInst=b,this.type=g,this.nativeEvent=x,this.target=R,this.currentTarget=null;for(var D in l)l.hasOwnProperty(D)&&(p=l[D],this[D]=p?p(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Zc:B,this.isPropagationStopped=B,this}return f(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),u}var le={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oe=Q(le),qt=f({},le,{view:0,detail:0}),or=Q(qt),ii,Mn,ba,ls=f({},qt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ew,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ba&&(ba&&l.type==="mousemove"?(ii=l.screenX-ba.screenX,Mn=l.screenY-ba.screenY):Mn=ii=0,ba=l),ii)},movementY:function(l){return"movementY"in l?l.movementY:Mn}}),wf=Q(ls),xg=f({},ls,{dataTransfer:0}),wg=Q(xg),Sf=f({},qt,{relatedTarget:0}),va=Q(Sf),yW=f({},le,{animationName:0,elapsedTime:0,pseudoElement:0}),bW=Q(yW),vW=f({},le,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),xW=Q(vW),wW=f({},le,{data:0}),MR=Q(wW),SW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_W={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AW(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=CW[l])?!!u[l]:!1}function Ew(){return AW}var kW=f({},qt,{key:function(l){if(l.key){var u=SW[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Qc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?_W[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ew,charCode:function(l){return l.type==="keypress"?Qc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Qc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),EW=Q(kW),TW=f({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OR=Q(TW),RW=f({},qt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ew}),MW=Q(RW),OW=f({},le,{propertyName:0,elapsedTime:0,pseudoElement:0}),PW=Q(OW),DW=f({},ls,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),LW=Q(DW),IW=f({},le,{newState:0,oldState:0}),NW=Q(IW),BW=[9,13,27,32],Tw=as&&"CompositionEvent"in window,_f=null;as&&"documentMode"in document&&(_f=document.documentMode);var jW=as&&"TextEvent"in window&&!_f,PR=as&&(!Tw||_f&&8<_f&&11>=_f),DR=" ",LR=!1;function IR(l,u){switch(l){case"keyup":return BW.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NR(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var eu=!1;function $W(l,u){switch(l){case"compositionend":return NR(u);case"keypress":return u.which!==32?null:(LR=!0,DR);case"textInput":return l=u.data,l===DR&&LR?null:l;default:return null}}function VW(l,u){if(eu)return l==="compositionend"||!Tw&&IR(l,u)?(l=Jc(),Xc=ya=Ds=null,eu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return PR&&u.locale!=="ko"?null:u.data;default:return null}}var FW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BR(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!FW[l.type]:u==="textarea"}function jR(l,u,p,g){$r?pa?pa.push(g):pa=[g]:$r=g,u=a0(u,"onChange"),0<u.length&&(p=new Oe("onChange","change",null,p,g),l.push({event:p,listeners:u}))}var Cf=null,Af=null;function zW(l){bP(l,0)}function Sg(l){var u=Mi(l);if(mg(u))return l}function $R(l,u){if(l==="change")return u}var VR=!1;if(as){var Rw;if(as){var Mw="oninput"in document;if(!Mw){var FR=document.createElement("div");FR.setAttribute("oninput","return;"),Mw=typeof FR.oninput=="function"}Rw=Mw}else Rw=!1;VR=Rw&&(!document.documentMode||9<document.documentMode)}function zR(){Cf&&(Cf.detachEvent("onpropertychange",UR),Af=Cf=null)}function UR(l){if(l.propertyName==="value"&&Sg(Af)){var u=[];jR(u,Af,l,Kc(l)),Yc(zW,u)}}function UW(l,u,p){l==="focusin"?(zR(),Cf=u,Af=p,Cf.attachEvent("onpropertychange",UR)):l==="focusout"&&zR()}function HW(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Sg(Af)}function qW(l,u){if(l==="click")return Sg(u)}function WW(l,u){if(l==="input"||l==="change")return Sg(u)}function GW(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var si=typeof Object.is=="function"?Object.is:GW;function kf(l,u){if(si(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),g=Object.keys(u);if(p.length!==g.length)return!1;for(g=0;g<p.length;g++){var b=p[g];if(!Zn.call(u,b)||!si(l[b],u[b]))return!1}return!0}function HR(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function qR(l,u){var p=HR(l);l=0;for(var g;p;){if(p.nodeType===3){if(g=l+p.textContent.length,l<=u&&g>=u)return{node:p,offset:u-l};l=g}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=HR(p)}}function WR(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?WR(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function GR(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=qc(l.document);u instanceof l.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)l=u.contentWindow;else break;u=qc(l.document)}return u}function Ow(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var KW=as&&"documentMode"in document&&11>=document.documentMode,tu=null,Pw=null,Ef=null,Dw=!1;function KR(l,u,p){var g=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Dw||tu==null||tu!==qc(g)||(g=tu,"selectionStart"in g&&Ow(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ef&&kf(Ef,g)||(Ef=g,g=a0(Pw,"onSelect"),0<g.length&&(u=new Oe("onSelect","select",null,u,p),l.push({event:u,listeners:g}),u.target=tu)))}function Ml(l,u){var p={};return p[l.toLowerCase()]=u.toLowerCase(),p["Webkit"+l]="webkit"+u,p["Moz"+l]="moz"+u,p}var nu={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionrun:Ml("Transition","TransitionRun"),transitionstart:Ml("Transition","TransitionStart"),transitioncancel:Ml("Transition","TransitionCancel"),transitionend:Ml("Transition","TransitionEnd")},Lw={},YR={};as&&(YR=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function Ol(l){if(Lw[l])return Lw[l];if(!nu[l])return l;var u=nu[l],p;for(p in u)if(u.hasOwnProperty(p)&&p in YR)return Lw[l]=u[p];return l}var XR=Ol("animationend"),JR=Ol("animationiteration"),QR=Ol("animationstart"),YW=Ol("transitionrun"),XW=Ol("transitionstart"),JW=Ol("transitioncancel"),ZR=Ol("transitionend"),eM=new Map,Iw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Iw.push("scrollEnd");function cs(l,u){eM.set(l,u),Co(u,[l])}var tM=new WeakMap;function Pi(l,u){if(typeof l=="object"&&l!==null){var p=tM.get(l);return p!==void 0?p:(u={value:l,source:u,stack:dg(u)},tM.set(l,u),u)}return{value:l,source:u,stack:dg(u)}}var Di=[],ru=0,Nw=0;function _g(){for(var l=ru,u=Nw=ru=0;u<l;){var p=Di[u];Di[u++]=null;var g=Di[u];Di[u++]=null;var b=Di[u];Di[u++]=null;var x=Di[u];if(Di[u++]=null,g!==null&&b!==null){var R=g.pending;R===null?b.next=b:(b.next=R.next,R.next=b),g.pending=b}x!==0&&nM(p,b,x)}}function Cg(l,u,p,g){Di[ru++]=l,Di[ru++]=u,Di[ru++]=p,Di[ru++]=g,Nw|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function Bw(l,u,p,g){return Cg(l,u,p,g),Ag(l)}function iu(l,u){return Cg(l,null,null,u),Ag(l)}function nM(l,u,p){l.lanes|=p;var g=l.alternate;g!==null&&(g.lanes|=p);for(var b=!1,x=l.return;x!==null;)x.childLanes|=p,g=x.alternate,g!==null&&(g.childLanes|=p),x.tag===22&&(l=x.stateNode,l===null||l._visibility&1||(b=!0)),l=x,x=x.return;return l.tag===3?(x=l.stateNode,b&&u!==null&&(b=31-Be(p),l=x.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=p|536870912),x):null}function Ag(l){if(50<Qf)throw Qf=0,U1=null,Error(r(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var su={};function QW(l,u,p,g){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(l,u,p,g){return new QW(l,u,p,g)}function jw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ao(l,u){var p=l.alternate;return p===null?(p=oi(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function rM(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function kg(l,u,p,g,b,x){var R=0;if(g=l,typeof l=="function")jw(l)&&(R=1);else if(typeof l=="string")R=eK(l,p,pe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case z:return l=oi(31,p,u,b),l.elementType=z,l.lanes=x,l;case v:return Pl(p.children,b,x,u);case w:R=8,b|=24;break;case _:return l=oi(12,p,u,b|2),l.elementType=_,l.lanes=x,l;case M:return l=oi(13,p,u,b),l.elementType=M,l.lanes=x,l;case O:return l=oi(19,p,u,b),l.elementType=O,l.lanes=x,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case k:R=10;break e;case A:R=9;break e;case P:R=11;break e;case L:R=14;break e;case N:R=16,g=null;break e}R=29,p=Error(r(130,l===null?"null":typeof l,"")),g=null}return u=oi(R,p,u,b),u.elementType=l,u.type=g,u.lanes=x,u}function Pl(l,u,p,g){return l=oi(7,l,g,u),l.lanes=p,l}function $w(l,u,p){return l=oi(6,l,null,u),l.lanes=p,l}function Vw(l,u,p){return u=oi(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var ou=[],au=0,Eg=null,Tg=0,Li=[],Ii=0,Dl=null,ko=1,Eo="";function Ll(l,u){ou[au++]=Tg,ou[au++]=Eg,Eg=l,Tg=u}function iM(l,u,p){Li[Ii++]=ko,Li[Ii++]=Eo,Li[Ii++]=Dl,Dl=l;var g=ko;l=Eo;var b=32-Be(g)-1;g&=~(1<<b),p+=1;var x=32-Be(u)+b;if(30<x){var R=b-b%5;x=(g&(1<<R)-1).toString(32),g>>=R,b-=R,ko=1<<32-Be(u)+b|p<<b|g,Eo=x+l}else ko=1<<x|p<<b|g,Eo=l}function Fw(l){l.return!==null&&(Ll(l,1),iM(l,1,0))}function zw(l){for(;l===Eg;)Eg=ou[--au],ou[au]=null,Tg=ou[--au],ou[au]=null;for(;l===Dl;)Dl=Li[--Ii],Li[Ii]=null,Eo=Li[--Ii],Li[Ii]=null,ko=Li[--Ii],Li[Ii]=null}var Cr=null,Xt=null,yt=!1,Il=null,Ls=!1,Uw=Error(r(519));function Nl(l){var u=Error(r(418,""));throw Mf(Pi(u,l)),Uw}function sM(l){var u=l.stateNode,p=l.type,g=l.memoizedProps;switch(u[Rn]=l,u[sr]=g,p){case"dialog":at("cancel",u),at("close",u);break;case"iframe":case"object":case"embed":at("load",u);break;case"video":case"audio":for(p=0;p<ed.length;p++)at(ed[p],u);break;case"source":at("error",u);break;case"img":case"image":case"link":at("error",u),at("load",u);break;case"details":at("toggle",u);break;case"input":at("invalid",u),gg(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Hc(u);break;case"select":at("invalid",u);break;case"textarea":at("invalid",u),Rl(u,g.value,g.defaultValue,g.children),Hc(u)}p=g.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||g.suppressHydrationWarning===!0||SP(u.textContent,p)?(g.popover!=null&&(at("beforetoggle",u),at("toggle",u)),g.onScroll!=null&&at("scroll",u),g.onScrollEnd!=null&&at("scrollend",u),g.onClick!=null&&(u.onclick=l0),u=!0):u=!1,u||Nl(l)}function oM(l){for(Cr=l.return;Cr;)switch(Cr.tag){case 5:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:Cr=Cr.return}}function Tf(l){if(l!==Cr)return!1;if(!yt)return oM(l),yt=!0,!1;var u=l.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||sS(l.type,l.memoizedProps)),p=!p),p&&Xt&&Nl(l),oM(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(u===0){Xt=hs(l.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++;l=l.nextSibling}Xt=null}}else u===27?(u=Xt,Ia(l.type)?(l=cS,cS=null,Xt=l):Xt=u):Xt=Cr?hs(l.stateNode.nextSibling):null;return!0}function Rf(){Xt=Cr=null,yt=!1}function aM(){var l=Il;return l!==null&&(zr===null?zr=l:zr.push.apply(zr,l),Il=null),l}function Mf(l){Il===null?Il=[l]:Il.push(l)}var Hw=Z(null),Bl=null,To=null;function xa(l,u,p){I(Hw,u._currentValue),u._currentValue=p}function Ro(l){l._currentValue=Hw.current,ue(Hw)}function qw(l,u,p){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===p)break;l=l.return}}function Ww(l,u,p,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var x=b.dependencies;if(x!==null){var R=b.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=b;for(var V=0;V<u.length;V++)if(D.context===u[V]){x.lanes|=p,D=x.alternate,D!==null&&(D.lanes|=p),qw(x.return,p,l),g||(R=null);break e}x=D.next}}else if(b.tag===18){if(R=b.return,R===null)throw Error(r(341));R.lanes|=p,x=R.alternate,x!==null&&(x.lanes|=p),qw(R,p,l),R=null}else R=b.child;if(R!==null)R.return=b;else for(R=b;R!==null;){if(R===l){R=null;break}if(b=R.sibling,b!==null){b.return=R.return,R=b;break}R=R.return}b=R}}function Of(l,u,p,g){l=null;for(var b=u,x=!1;b!==null;){if(!x){if((b.flags&524288)!==0)x=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var R=b.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var D=b.type;si(b.pendingProps.value,R.value)||(l!==null?l.push(D):l=[D])}}else if(b===ke.current){if(R=b.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(od):l=[od])}b=b.return}l!==null&&Ww(u,l,p,g),u.flags|=262144}function Rg(l){for(l=l.firstContext;l!==null;){if(!si(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function jl(l){Bl=l,To=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ar(l){return lM(Bl,l)}function Mg(l,u){return Bl===null&&jl(l),lM(l,u)}function lM(l,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},To===null){if(l===null)throw Error(r(308));To=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else To=To.next=u;return p}var ZW=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},eG=t.unstable_scheduleCallback,tG=t.unstable_NormalPriority,bn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gw(){return{controller:new ZW,data:new Map,refCount:0}}function Pf(l){l.refCount--,l.refCount===0&&eG(tG,function(){l.controller.abort()})}var Df=null,Kw=0,lu=0,cu=null;function nG(l,u){if(Df===null){var p=Df=[];Kw=0,lu=X1(),cu={status:"pending",value:void 0,then:function(g){p.push(g)}}}return Kw++,u.then(cM,cM),u}function cM(){if(--Kw===0&&Df!==null){cu!==null&&(cu.status="fulfilled");var l=Df;Df=null,lu=0,cu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function rG(l,u){var p=[],g={status:"pending",value:null,reason:null,then:function(b){p.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<p.length;b++)(0,p[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<p.length;b++)(0,p[b])(void 0)}),g}var uM=F.S;F.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&nG(l,u),uM!==null&&uM(l,u)};var $l=Z(null);function Yw(){var l=$l.current;return l!==null?l:Pt.pooledCache}function Og(l,u){u===null?I($l,$l.current):I($l,u.pool)}function hM(){var l=Yw();return l===null?null:{parent:bn._currentValue,pool:l}}var Lf=Error(r(460)),fM=Error(r(474)),Pg=Error(r(542)),Xw={then:function(){}};function dM(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Dg(){}function pM(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(Dg,Dg),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,gM(l),l;default:if(typeof u.status=="string")u.then(Dg,Dg);else{if(l=Pt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,gM(l),l}throw If=u,Lf}}var If=null;function mM(){if(If===null)throw Error(r(459));var l=If;return If=null,l}function gM(l){if(l===Lf||l===Pg)throw Error(r(483))}var wa=!1;function Jw(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qw(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Sa(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function _a(l,u,p){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(bt&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=Ag(l),nM(l,null,p),u}return Cg(l,g,u,p),Ag(l)}function Nf(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,p|=g,u.lanes=p,sg(l,p)}}function Zw(l,u){var p=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,p===g)){var b=null,x=null;if(p=p.firstBaseUpdate,p!==null){do{var R={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};x===null?b=x=R:x=x.next=R,p=p.next}while(p!==null);x===null?b=x=u:x=x.next=u}else b=x=u;p={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:x,shared:g.shared,callbacks:g.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}var e1=!1;function Bf(){if(e1){var l=cu;if(l!==null)throw l}}function jf(l,u,p,g){e1=!1;var b=l.updateQueue;wa=!1;var x=b.firstBaseUpdate,R=b.lastBaseUpdate,D=b.shared.pending;if(D!==null){b.shared.pending=null;var V=D,ee=V.next;V.next=null,R===null?x=ee:R.next=ee,R=V;var ae=l.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==R&&(D===null?ae.firstBaseUpdate=ee:D.next=ee,ae.lastBaseUpdate=V))}if(x!==null){var he=b.baseState;R=0,ae=ee=V=null,D=x;do{var ne=D.lane&-536870913,re=ne!==D.lane;if(re?(ct&ne)===ne:(g&ne)===ne){ne!==0&&ne===lu&&(e1=!0),ae!==null&&(ae=ae.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var He=l,$e=D;ne=u;var St=p;switch($e.tag){case 1:if(He=$e.payload,typeof He=="function"){he=He.call(St,he,ne);break e}he=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=$e.payload,ne=typeof He=="function"?He.call(St,he,ne):He,ne==null)break e;he=f({},he,ne);break e;case 2:wa=!0}}ne=D.callback,ne!==null&&(l.flags|=64,re&&(l.flags|=8192),re=b.callbacks,re===null?b.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(ee=ae=re,V=he):ae=ae.next=re,R|=ne;if(D=D.next,D===null){if(D=b.shared.pending,D===null)break;re=D,D=re.next,re.next=null,b.lastBaseUpdate=re,b.shared.pending=null}}while(!0);ae===null&&(V=he),b.baseState=V,b.firstBaseUpdate=ee,b.lastBaseUpdate=ae,x===null&&(b.shared.lanes=0),Oa|=R,l.lanes=R,l.memoizedState=he}}function yM(l,u){if(typeof l!="function")throw Error(r(191,l));l.call(u)}function bM(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)yM(p[l],u)}var uu=Z(null),Lg=Z(0);function vM(l,u){l=No,I(Lg,l),I(uu,u),No=l|u.baseLanes}function t1(){I(Lg,No),I(uu,uu.current)}function n1(){No=Lg.current,ue(uu),ue(Lg)}var Ca=0,et=null,xt=null,on=null,Ig=!1,hu=!1,Vl=!1,Ng=0,$f=0,fu=null,iG=0;function Zt(){throw Error(r(321))}function r1(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!si(l[p],u[p]))return!1;return!0}function i1(l,u,p,g,b,x){return Ca=x,et=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,F.H=l===null||l.memoizedState===null?nO:rO,Vl=!1,x=p(g,b),Vl=!1,hu&&(x=wM(u,p,g,b)),xM(l),x}function xM(l){F.H=zg;var u=xt!==null&&xt.next!==null;if(Ca=0,on=xt=et=null,Ig=!1,$f=0,fu=null,u)throw Error(r(300));l===null||On||(l=l.dependencies,l!==null&&Rg(l)&&(On=!0))}function wM(l,u,p,g){et=l;var b=0;do{if(hu&&(fu=null),$f=0,hu=!1,25<=b)throw Error(r(301));if(b+=1,on=xt=null,l.updateQueue!=null){var x=l.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}F.H=hG,x=u(p,g)}while(hu);return x}function sG(){var l=F.H,u=l.useState()[0];return u=typeof u.then=="function"?Vf(u):u,l=l.useState()[0],(xt!==null?xt.memoizedState:null)!==l&&(et.flags|=1024),u}function s1(){var l=Ng!==0;return Ng=0,l}function o1(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function a1(l){if(Ig){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Ig=!1}Ca=0,on=xt=et=null,hu=!1,$f=Ng=0,fu=null}function Vr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?et.memoizedState=on=l:on=on.next=l,on}function an(){if(xt===null){var l=et.alternate;l=l!==null?l.memoizedState:null}else l=xt.next;var u=on===null?et.memoizedState:on.next;if(u!==null)on=u,xt=l;else{if(l===null)throw et.alternate===null?Error(r(467)):Error(r(310));xt=l,l={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},on===null?et.memoizedState=on=l:on=on.next=l}return on}function l1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vf(l){var u=$f;return $f+=1,fu===null&&(fu=[]),l=pM(fu,l,u),u=et,(on===null?u.memoizedState:on.next)===null&&(u=u.alternate,F.H=u===null||u.memoizedState===null?nO:rO),l}function Bg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Vf(l);if(l.$$typeof===k)return ar(l)}throw Error(r(438,String(l)))}function c1(l){var u=null,p=et.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var g=et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=l1(),et.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),g=0;g<l;g++)p[g]=j;return u.index++,p}function Mo(l,u){return typeof u=="function"?u(l):u}function jg(l){var u=an();return u1(u,xt,l)}function u1(l,u,p){var g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=p;var b=l.baseQueue,x=g.pending;if(x!==null){if(b!==null){var R=b.next;b.next=x.next,x.next=R}u.baseQueue=b=x,g.pending=null}if(x=l.baseState,b===null)l.memoizedState=x;else{u=b.next;var D=R=null,V=null,ee=u,ae=!1;do{var he=ee.lane&-536870913;if(he!==ee.lane?(ct&he)===he:(Ca&he)===he){var ne=ee.revertLane;if(ne===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),he===lu&&(ae=!0);else if((Ca&ne)===ne){ee=ee.next,ne===lu&&(ae=!0);continue}else he={lane:0,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(D=V=he,R=x):V=V.next=he,et.lanes|=ne,Oa|=ne;he=ee.action,Vl&&p(x,he),x=ee.hasEagerState?ee.eagerState:p(x,he)}else ne={lane:he,revertLane:ee.revertLane,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(D=V=ne,R=x):V=V.next=ne,et.lanes|=he,Oa|=he;ee=ee.next}while(ee!==null&&ee!==u);if(V===null?R=x:V.next=D,!si(x,l.memoizedState)&&(On=!0,ae&&(p=cu,p!==null)))throw p;l.memoizedState=x,l.baseState=R,l.baseQueue=V,g.lastRenderedState=x}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function h1(l){var u=an(),p=u.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var g=p.dispatch,b=p.pending,x=u.memoizedState;if(b!==null){p.pending=null;var R=b=b.next;do x=l(x,R.action),R=R.next;while(R!==b);si(x,u.memoizedState)||(On=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),p.lastRenderedState=x}return[x,g]}function SM(l,u,p){var g=et,b=an(),x=yt;if(x){if(p===void 0)throw Error(r(407));p=p()}else p=u();var R=!si((xt||b).memoizedState,p);R&&(b.memoizedState=p,On=!0),b=b.queue;var D=AM.bind(null,g,b,l);if(Ff(2048,8,D,[l]),b.getSnapshot!==u||R||on!==null&&on.memoizedState.tag&1){if(g.flags|=2048,du(9,$g(),CM.bind(null,g,b,p,u),null),Pt===null)throw Error(r(349));x||(Ca&124)!==0||_M(g,u,p)}return p}function _M(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=et.updateQueue,u===null?(u=l1(),et.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function CM(l,u,p,g){u.value=p,u.getSnapshot=g,kM(u)&&EM(l)}function AM(l,u,p){return p(function(){kM(u)&&EM(l)})}function kM(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!si(l,p)}catch{return!0}}function EM(l){var u=iu(l,2);u!==null&&hi(u,l,2)}function f1(l){var u=Vr();if(typeof l=="function"){var p=l;if(l=p(),Vl){De(!0);try{p()}finally{De(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:l},u}function TM(l,u,p,g){return l.baseState=p,u1(l,xt,typeof g=="function"?g:Mo)}function oG(l,u,p,g,b){if(Fg(l))throw Error(r(485));if(l=u.action,l!==null){var x={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){x.listeners.push(R)}};F.T!==null?p(!0):x.isTransition=!1,g(x),p=u.pending,p===null?(x.next=u.pending=x,RM(u,x)):(x.next=p.next,u.pending=p.next=x)}}function RM(l,u){var p=u.action,g=u.payload,b=l.state;if(u.isTransition){var x=F.T,R={};F.T=R;try{var D=p(b,g),V=F.S;V!==null&&V(R,D),MM(l,u,D)}catch(ee){d1(l,u,ee)}finally{F.T=x}}else try{x=p(b,g),MM(l,u,x)}catch(ee){d1(l,u,ee)}}function MM(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(g){OM(l,u,g)},function(g){return d1(l,u,g)}):OM(l,u,p)}function OM(l,u,p){u.status="fulfilled",u.value=p,PM(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,RM(l,p)))}function d1(l,u,p){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=p,PM(u),u=u.next;while(u!==g)}l.action=null}function PM(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function DM(l,u){return u}function LM(l,u){if(yt){var p=Pt.formState;if(p!==null){e:{var g=et;if(yt){if(Xt){t:{for(var b=Xt,x=Ls;b.nodeType!==8;){if(!x){b=null;break t}if(b=hs(b.nextSibling),b===null){b=null;break t}}x=b.data,b=x==="F!"||x==="F"?b:null}if(b){Xt=hs(b.nextSibling),g=b.data==="F!";break e}}Nl(g)}g=!1}g&&(u=p[0])}}return p=Vr(),p.memoizedState=p.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DM,lastRenderedState:u},p.queue=g,p=ZM.bind(null,et,g),g.dispatch=p,g=f1(!1),x=b1.bind(null,et,!1,g.queue),g=Vr(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,p=oG.bind(null,et,b,x,p),b.dispatch=p,g.memoizedState=l,[u,p,!1]}function IM(l){var u=an();return NM(u,xt,l)}function NM(l,u,p){if(u=u1(l,u,DM)[0],l=jg(Mo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Vf(u)}catch(R){throw R===Lf?Pg:R}else g=u;u=an();var b=u.queue,x=b.dispatch;return p!==u.memoizedState&&(et.flags|=2048,du(9,$g(),aG.bind(null,b,p),null)),[g,x,l]}function aG(l,u){l.action=u}function BM(l){var u=an(),p=xt;if(p!==null)return NM(u,p,l);an(),u=u.memoizedState,p=an();var g=p.queue.dispatch;return p.memoizedState=l,[u,g,!1]}function du(l,u,p,g){return l={tag:l,create:p,deps:g,inst:u,next:null},u=et.updateQueue,u===null&&(u=l1(),et.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(g=p.next,p.next=l,l.next=g,u.lastEffect=l),l}function $g(){return{destroy:void 0,resource:void 0}}function jM(){return an().memoizedState}function Vg(l,u,p,g){var b=Vr();g=g===void 0?null:g,et.flags|=l,b.memoizedState=du(1|u,$g(),p,g)}function Ff(l,u,p,g){var b=an();g=g===void 0?null:g;var x=b.memoizedState.inst;xt!==null&&g!==null&&r1(g,xt.memoizedState.deps)?b.memoizedState=du(u,x,p,g):(et.flags|=l,b.memoizedState=du(1|u,x,p,g))}function $M(l,u){Vg(8390656,8,l,u)}function VM(l,u){Ff(2048,8,l,u)}function FM(l,u){return Ff(4,2,l,u)}function zM(l,u){return Ff(4,4,l,u)}function UM(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function HM(l,u,p){p=p!=null?p.concat([l]):null,Ff(4,4,UM.bind(null,u,l),p)}function p1(){}function qM(l,u){var p=an();u=u===void 0?null:u;var g=p.memoizedState;return u!==null&&r1(u,g[1])?g[0]:(p.memoizedState=[l,u],l)}function WM(l,u){var p=an();u=u===void 0?null:u;var g=p.memoizedState;if(u!==null&&r1(u,g[1]))return g[0];if(g=l(),Vl){De(!0);try{l()}finally{De(!1)}}return p.memoizedState=[g,u],g}function m1(l,u,p){return p===void 0||(Ca&1073741824)!==0?l.memoizedState=u:(l.memoizedState=p,l=YO(),et.lanes|=l,Oa|=l,p)}function GM(l,u,p,g){return si(p,u)?p:uu.current!==null?(l=m1(l,p,g),si(l,u)||(On=!0),l):(Ca&42)===0?(On=!0,l.memoizedState=p):(l=YO(),et.lanes|=l,Oa|=l,u)}function KM(l,u,p,g,b){var x=Y.p;Y.p=x!==0&&8>x?x:8;var R=F.T,D={};F.T=D,b1(l,!1,u,p);try{var V=b(),ee=F.S;if(ee!==null&&ee(D,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ae=rG(V,g);zf(l,u,ae,ui(l))}else zf(l,u,g,ui(l))}catch(he){zf(l,u,{then:function(){},status:"rejected",reason:he},ui())}finally{Y.p=x,F.T=R}}function lG(){}function g1(l,u,p,g){if(l.tag!==5)throw Error(r(476));var b=YM(l).queue;KM(l,b,u,q,p===null?lG:function(){return XM(l),p(g)})}function YM(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:q},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function XM(l){var u=YM(l).next.queue;zf(l,u,{},ui())}function y1(){return ar(od)}function JM(){return an().memoizedState}function QM(){return an().memoizedState}function cG(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=ui();l=Sa(p);var g=_a(u,l,p);g!==null&&(hi(g,u,p),Nf(g,u,p)),u={cache:Gw()},l.payload=u;return}u=u.return}}function uG(l,u,p){var g=ui();p={lane:g,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Fg(l)?eO(u,p):(p=Bw(l,u,p,g),p!==null&&(hi(p,l,g),tO(p,u,g)))}function ZM(l,u,p){var g=ui();zf(l,u,p,g)}function zf(l,u,p,g){var b={lane:g,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Fg(l))eO(u,b);else{var x=l.alternate;if(l.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var R=u.lastRenderedState,D=x(R,p);if(b.hasEagerState=!0,b.eagerState=D,si(D,R))return Cg(l,u,b,0),Pt===null&&_g(),!1}catch{}finally{}if(p=Bw(l,u,b,g),p!==null)return hi(p,l,g),tO(p,u,g),!0}return!1}function b1(l,u,p,g){if(g={lane:2,revertLane:X1(),action:g,hasEagerState:!1,eagerState:null,next:null},Fg(l)){if(u)throw Error(r(479))}else u=Bw(l,p,g,2),u!==null&&hi(u,l,2)}function Fg(l){var u=l.alternate;return l===et||u!==null&&u===et}function eO(l,u){hu=Ig=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function tO(l,u,p){if((p&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,p|=g,u.lanes=p,sg(l,p)}}var zg={readContext:ar,use:Bg,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},nO={readContext:ar,use:Bg,useCallback:function(l,u){return Vr().memoizedState=[l,u===void 0?null:u],l},useContext:ar,useEffect:$M,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,Vg(4194308,4,UM.bind(null,u,l),p)},useLayoutEffect:function(l,u){return Vg(4194308,4,l,u)},useInsertionEffect:function(l,u){Vg(4,2,l,u)},useMemo:function(l,u){var p=Vr();u=u===void 0?null:u;var g=l();if(Vl){De(!0);try{l()}finally{De(!1)}}return p.memoizedState=[g,u],g},useReducer:function(l,u,p){var g=Vr();if(p!==void 0){var b=p(u);if(Vl){De(!0);try{p(u)}finally{De(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=uG.bind(null,et,l),[g.memoizedState,l]},useRef:function(l){var u=Vr();return l={current:l},u.memoizedState=l},useState:function(l){l=f1(l);var u=l.queue,p=ZM.bind(null,et,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:p1,useDeferredValue:function(l,u){var p=Vr();return m1(p,l,u)},useTransition:function(){var l=f1(!1);return l=KM.bind(null,et,l.queue,!0,!1),Vr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var g=et,b=Vr();if(yt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=u(),Pt===null)throw Error(r(349));(ct&124)!==0||_M(g,u,p)}b.memoizedState=p;var x={value:p,getSnapshot:u};return b.queue=x,$M(AM.bind(null,g,x,l),[l]),g.flags|=2048,du(9,$g(),CM.bind(null,g,x,p,u),null),p},useId:function(){var l=Vr(),u=Pt.identifierPrefix;if(yt){var p=Eo,g=ko;p=(g&~(1<<32-Be(g)-1)).toString(32)+p,u=""+u+"R"+p,p=Ng++,0<p&&(u+="H"+p.toString(32)),u+=""}else p=iG++,u=""+u+"r"+p.toString(32)+"";return l.memoizedState=u},useHostTransitionStatus:y1,useFormState:LM,useActionState:LM,useOptimistic:function(l){var u=Vr();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=b1.bind(null,et,!0,p),p.dispatch=u,[l,u]},useMemoCache:c1,useCacheRefresh:function(){return Vr().memoizedState=cG.bind(null,et)}},rO={readContext:ar,use:Bg,useCallback:qM,useContext:ar,useEffect:VM,useImperativeHandle:HM,useInsertionEffect:FM,useLayoutEffect:zM,useMemo:WM,useReducer:jg,useRef:jM,useState:function(){return jg(Mo)},useDebugValue:p1,useDeferredValue:function(l,u){var p=an();return GM(p,xt.memoizedState,l,u)},useTransition:function(){var l=jg(Mo)[0],u=an().memoizedState;return[typeof l=="boolean"?l:Vf(l),u]},useSyncExternalStore:SM,useId:JM,useHostTransitionStatus:y1,useFormState:IM,useActionState:IM,useOptimistic:function(l,u){var p=an();return TM(p,xt,l,u)},useMemoCache:c1,useCacheRefresh:QM},hG={readContext:ar,use:Bg,useCallback:qM,useContext:ar,useEffect:VM,useImperativeHandle:HM,useInsertionEffect:FM,useLayoutEffect:zM,useMemo:WM,useReducer:h1,useRef:jM,useState:function(){return h1(Mo)},useDebugValue:p1,useDeferredValue:function(l,u){var p=an();return xt===null?m1(p,l,u):GM(p,xt.memoizedState,l,u)},useTransition:function(){var l=h1(Mo)[0],u=an().memoizedState;return[typeof l=="boolean"?l:Vf(l),u]},useSyncExternalStore:SM,useId:JM,useHostTransitionStatus:y1,useFormState:BM,useActionState:BM,useOptimistic:function(l,u){var p=an();return xt!==null?TM(p,xt,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:c1,useCacheRefresh:QM},pu=null,Uf=0;function Ug(l){var u=Uf;return Uf+=1,pu===null&&(pu=[]),pM(pu,l,u)}function Hf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function Hg(l,u){throw u.$$typeof===d?Error(r(525)):(l=Object.prototype.toString.call(u),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function iO(l){var u=l._init;return u(l._payload)}function sO(l){function u(K,U){if(l){var J=K.deletions;J===null?(K.deletions=[U],K.flags|=16):J.push(U)}}function p(K,U){if(!l)return null;for(;U!==null;)u(K,U),U=U.sibling;return null}function g(K){for(var U=new Map;K!==null;)K.key!==null?U.set(K.key,K):U.set(K.index,K),K=K.sibling;return U}function b(K,U){return K=Ao(K,U),K.index=0,K.sibling=null,K}function x(K,U,J){return K.index=J,l?(J=K.alternate,J!==null?(J=J.index,J<U?(K.flags|=67108866,U):J):(K.flags|=67108866,U)):(K.flags|=1048576,U)}function R(K){return l&&K.alternate===null&&(K.flags|=67108866),K}function D(K,U,J,ce){return U===null||U.tag!==6?(U=$w(J,K.mode,ce),U.return=K,U):(U=b(U,J),U.return=K,U)}function V(K,U,J,ce){var Te=J.type;return Te===v?ae(K,U,J.props.children,ce,J.key):U!==null&&(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&iO(Te)===U.type)?(U=b(U,J.props),Hf(U,J),U.return=K,U):(U=kg(J.type,J.key,J.props,null,K.mode,ce),Hf(U,J),U.return=K,U)}function ee(K,U,J,ce){return U===null||U.tag!==4||U.stateNode.containerInfo!==J.containerInfo||U.stateNode.implementation!==J.implementation?(U=Vw(J,K.mode,ce),U.return=K,U):(U=b(U,J.children||[]),U.return=K,U)}function ae(K,U,J,ce,Te){return U===null||U.tag!==7?(U=Pl(J,K.mode,ce,Te),U.return=K,U):(U=b(U,J),U.return=K,U)}function he(K,U,J){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=$w(""+U,K.mode,J),U.return=K,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case m:return J=kg(U.type,U.key,U.props,null,K.mode,J),Hf(J,U),J.return=K,J;case y:return U=Vw(U,K.mode,J),U.return=K,U;case N:var ce=U._init;return U=ce(U._payload),he(K,U,J)}if(ie(U)||W(U))return U=Pl(U,K.mode,J,null),U.return=K,U;if(typeof U.then=="function")return he(K,Ug(U),J);if(U.$$typeof===k)return he(K,Mg(K,U),J);Hg(K,U)}return null}function ne(K,U,J,ce){var Te=U!==null?U.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Te!==null?null:D(K,U,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case m:return J.key===Te?V(K,U,J,ce):null;case y:return J.key===Te?ee(K,U,J,ce):null;case N:return Te=J._init,J=Te(J._payload),ne(K,U,J,ce)}if(ie(J)||W(J))return Te!==null?null:ae(K,U,J,ce,null);if(typeof J.then=="function")return ne(K,U,Ug(J),ce);if(J.$$typeof===k)return ne(K,U,Mg(K,J),ce);Hg(K,J)}return null}function re(K,U,J,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(J)||null,D(U,K,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case m:return K=K.get(ce.key===null?J:ce.key)||null,V(U,K,ce,Te);case y:return K=K.get(ce.key===null?J:ce.key)||null,ee(U,K,ce,Te);case N:var rt=ce._init;return ce=rt(ce._payload),re(K,U,J,ce,Te)}if(ie(ce)||W(ce))return K=K.get(J)||null,ae(U,K,ce,Te,null);if(typeof ce.then=="function")return re(K,U,J,Ug(ce),Te);if(ce.$$typeof===k)return re(K,U,J,Mg(U,ce),Te);Hg(U,ce)}return null}function He(K,U,J,ce){for(var Te=null,rt=null,Pe=U,Fe=U=0,Dn=null;Pe!==null&&Fe<J.length;Fe++){Pe.index>Fe?(Dn=Pe,Pe=null):Dn=Pe.sibling;var mt=ne(K,Pe,J[Fe],ce);if(mt===null){Pe===null&&(Pe=Dn);break}l&&Pe&&mt.alternate===null&&u(K,Pe),U=x(mt,U,Fe),rt===null?Te=mt:rt.sibling=mt,rt=mt,Pe=Dn}if(Fe===J.length)return p(K,Pe),yt&&Ll(K,Fe),Te;if(Pe===null){for(;Fe<J.length;Fe++)Pe=he(K,J[Fe],ce),Pe!==null&&(U=x(Pe,U,Fe),rt===null?Te=Pe:rt.sibling=Pe,rt=Pe);return yt&&Ll(K,Fe),Te}for(Pe=g(Pe);Fe<J.length;Fe++)Dn=re(Pe,K,Fe,J[Fe],ce),Dn!==null&&(l&&Dn.alternate!==null&&Pe.delete(Dn.key===null?Fe:Dn.key),U=x(Dn,U,Fe),rt===null?Te=Dn:rt.sibling=Dn,rt=Dn);return l&&Pe.forEach(function(Va){return u(K,Va)}),yt&&Ll(K,Fe),Te}function $e(K,U,J,ce){if(J==null)throw Error(r(151));for(var Te=null,rt=null,Pe=U,Fe=U=0,Dn=null,mt=J.next();Pe!==null&&!mt.done;Fe++,mt=J.next()){Pe.index>Fe?(Dn=Pe,Pe=null):Dn=Pe.sibling;var Va=ne(K,Pe,mt.value,ce);if(Va===null){Pe===null&&(Pe=Dn);break}l&&Pe&&Va.alternate===null&&u(K,Pe),U=x(Va,U,Fe),rt===null?Te=Va:rt.sibling=Va,rt=Va,Pe=Dn}if(mt.done)return p(K,Pe),yt&&Ll(K,Fe),Te;if(Pe===null){for(;!mt.done;Fe++,mt=J.next())mt=he(K,mt.value,ce),mt!==null&&(U=x(mt,U,Fe),rt===null?Te=mt:rt.sibling=mt,rt=mt);return yt&&Ll(K,Fe),Te}for(Pe=g(Pe);!mt.done;Fe++,mt=J.next())mt=re(Pe,K,Fe,mt.value,ce),mt!==null&&(l&&mt.alternate!==null&&Pe.delete(mt.key===null?Fe:mt.key),U=x(mt,U,Fe),rt===null?Te=mt:rt.sibling=mt,rt=mt);return l&&Pe.forEach(function(fK){return u(K,fK)}),yt&&Ll(K,Fe),Te}function St(K,U,J,ce){if(typeof J=="object"&&J!==null&&J.type===v&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case m:e:{for(var Te=J.key;U!==null;){if(U.key===Te){if(Te=J.type,Te===v){if(U.tag===7){p(K,U.sibling),ce=b(U,J.props.children),ce.return=K,K=ce;break e}}else if(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===N&&iO(Te)===U.type){p(K,U.sibling),ce=b(U,J.props),Hf(ce,J),ce.return=K,K=ce;break e}p(K,U);break}else u(K,U);U=U.sibling}J.type===v?(ce=Pl(J.props.children,K.mode,ce,J.key),ce.return=K,K=ce):(ce=kg(J.type,J.key,J.props,null,K.mode,ce),Hf(ce,J),ce.return=K,K=ce)}return R(K);case y:e:{for(Te=J.key;U!==null;){if(U.key===Te)if(U.tag===4&&U.stateNode.containerInfo===J.containerInfo&&U.stateNode.implementation===J.implementation){p(K,U.sibling),ce=b(U,J.children||[]),ce.return=K,K=ce;break e}else{p(K,U);break}else u(K,U);U=U.sibling}ce=Vw(J,K.mode,ce),ce.return=K,K=ce}return R(K);case N:return Te=J._init,J=Te(J._payload),St(K,U,J,ce)}if(ie(J))return He(K,U,J,ce);if(W(J)){if(Te=W(J),typeof Te!="function")throw Error(r(150));return J=Te.call(J),$e(K,U,J,ce)}if(typeof J.then=="function")return St(K,U,Ug(J),ce);if(J.$$typeof===k)return St(K,U,Mg(K,J),ce);Hg(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,U!==null&&U.tag===6?(p(K,U.sibling),ce=b(U,J),ce.return=K,K=ce):(p(K,U),ce=$w(J,K.mode,ce),ce.return=K,K=ce),R(K)):p(K,U)}return function(K,U,J,ce){try{Uf=0;var Te=St(K,U,J,ce);return pu=null,Te}catch(Pe){if(Pe===Lf||Pe===Pg)throw Pe;var rt=oi(29,Pe,null,K.mode);return rt.lanes=ce,rt.return=K,rt}finally{}}}var mu=sO(!0),oO=sO(!1),Ni=Z(null),Is=null;function Aa(l){var u=l.alternate;I(vn,vn.current&1),I(Ni,l),Is===null&&(u===null||uu.current!==null||u.memoizedState!==null)&&(Is=l)}function aO(l){if(l.tag===22){if(I(vn,vn.current),I(Ni,l),Is===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Is=l)}}else ka()}function ka(){I(vn,vn.current),I(Ni,Ni.current)}function Oo(l){ue(Ni),Is===l&&(Is=null),ue(vn)}var vn=Z(0);function qg(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||lS(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function v1(l,u,p,g){u=l.memoizedState,p=p(g,u),p=p==null?u:f({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var x1={enqueueSetState:function(l,u,p){l=l._reactInternals;var g=ui(),b=Sa(g);b.payload=u,p!=null&&(b.callback=p),u=_a(l,b,g),u!==null&&(hi(u,l,g),Nf(u,l,g))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var g=ui(),b=Sa(g);b.tag=1,b.payload=u,p!=null&&(b.callback=p),u=_a(l,b,g),u!==null&&(hi(u,l,g),Nf(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=ui(),g=Sa(p);g.tag=2,u!=null&&(g.callback=u),u=_a(l,g,p),u!==null&&(hi(u,l,p),Nf(u,l,p))}};function lO(l,u,p,g,b,x,R){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,x,R):u.prototype&&u.prototype.isPureReactComponent?!kf(p,g)||!kf(b,x):!0}function cO(l,u,p,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,g),u.state!==l&&x1.enqueueReplaceState(u,u.state,null)}function Fl(l,u){var p=u;if("ref"in u){p={};for(var g in u)g!=="ref"&&(p[g]=u[g])}if(l=l.defaultProps){p===u&&(p=f({},p));for(var b in l)p[b]===void 0&&(p[b]=l[b])}return p}var Wg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function uO(l){Wg(l)}function hO(l){console.error(l)}function fO(l){Wg(l)}function Gg(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function dO(l,u,p){try{var g=l.onCaughtError;g(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function w1(l,u,p){return p=Sa(p),p.tag=3,p.payload={element:null},p.callback=function(){Gg(l,u)},p}function pO(l){return l=Sa(l),l.tag=3,l}function mO(l,u,p,g){var b=p.type.getDerivedStateFromError;if(typeof b=="function"){var x=g.value;l.payload=function(){return b(x)},l.callback=function(){dO(u,p,g)}}var R=p.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(l.callback=function(){dO(u,p,g),typeof b!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var D=g.stack;this.componentDidCatch(g.value,{componentStack:D!==null?D:""})})}function fG(l,u,p,g,b){if(p.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=p.alternate,u!==null&&Of(u,p,b,!0),p=Ni.current,p!==null){switch(p.tag){case 13:return Is===null?q1():p.alternate===null&&Jt===0&&(Jt=3),p.flags&=-257,p.flags|=65536,p.lanes=b,g===Xw?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([g]):u.add(g),G1(l,g,b)),!1;case 22:return p.flags|=65536,g===Xw?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([g]):p.add(g)),G1(l,g,b)),!1}throw Error(r(435,p.tag))}return G1(l,g,b),q1(),!1}if(yt)return u=Ni.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==Uw&&(l=Error(r(422),{cause:g}),Mf(Pi(l,p)))):(g!==Uw&&(u=Error(r(423),{cause:g}),Mf(Pi(u,p))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Pi(g,p),b=w1(l.stateNode,g,b),Zw(l,b),Jt!==4&&(Jt=2)),!1;var x=Error(r(520),{cause:g});if(x=Pi(x,p),Jf===null?Jf=[x]:Jf.push(x),Jt!==4&&(Jt=2),u===null)return!0;g=Pi(g,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=b&-b,p.lanes|=l,l=w1(p.stateNode,g,l),Zw(p,l),!1;case 1:if(u=p.type,x=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Pa===null||!Pa.has(x))))return p.flags|=65536,b&=-b,p.lanes|=b,b=pO(b),mO(b,l,p,g),Zw(p,b),!1}p=p.return}while(p!==null);return!1}var gO=Error(r(461)),On=!1;function $n(l,u,p,g){u.child=l===null?oO(u,null,p,g):mu(u,l.child,p,g)}function yO(l,u,p,g,b){p=p.render;var x=u.ref;if("ref"in g){var R={};for(var D in g)D!=="ref"&&(R[D]=g[D])}else R=g;return jl(u),g=i1(l,u,p,R,x,b),D=s1(),l!==null&&!On?(o1(l,u,b),Po(l,u,b)):(yt&&D&&Fw(u),u.flags|=1,$n(l,u,g,b),u.child)}function bO(l,u,p,g,b){if(l===null){var x=p.type;return typeof x=="function"&&!jw(x)&&x.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=x,vO(l,u,x,g,b)):(l=kg(p.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(x=l.child,!R1(l,b)){var R=x.memoizedProps;if(p=p.compare,p=p!==null?p:kf,p(R,g)&&l.ref===u.ref)return Po(l,u,b)}return u.flags|=1,l=Ao(x,g),l.ref=u.ref,l.return=u,u.child=l}function vO(l,u,p,g,b){if(l!==null){var x=l.memoizedProps;if(kf(x,g)&&l.ref===u.ref)if(On=!1,u.pendingProps=g=x,R1(l,b))(l.flags&131072)!==0&&(On=!0);else return u.lanes=l.lanes,Po(l,u,b)}return S1(l,u,p,g,b)}function xO(l,u,p){var g=u.pendingProps,b=g.children,x=l!==null?l.memoizedState:null;if(g.mode==="hidden"){if((u.flags&128)!==0){if(g=x!==null?x.baseLanes|p:p,l!==null){for(b=u.child=l.child,x=0;b!==null;)x=x|b.lanes|b.childLanes,b=b.sibling;u.childLanes=x&~g}else u.childLanes=0,u.child=null;return wO(l,u,g,p)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Og(u,x!==null?x.cachePool:null),x!==null?vM(u,x):t1(),aO(u);else return u.lanes=u.childLanes=536870912,wO(l,u,x!==null?x.baseLanes|p:p,p)}else x!==null?(Og(u,x.cachePool),vM(u,x),ka(),u.memoizedState=null):(l!==null&&Og(u,null),t1(),ka());return $n(l,u,b,p),u.child}function wO(l,u,p,g){var b=Yw();return b=b===null?null:{parent:bn._currentValue,pool:b},u.memoizedState={baseLanes:p,cachePool:b},l!==null&&Og(u,null),t1(),aO(u),l!==null&&Of(l,u,g,!0),null}function Kg(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function S1(l,u,p,g,b){return jl(u),p=i1(l,u,p,g,void 0,b),g=s1(),l!==null&&!On?(o1(l,u,b),Po(l,u,b)):(yt&&g&&Fw(u),u.flags|=1,$n(l,u,p,b),u.child)}function SO(l,u,p,g,b,x){return jl(u),u.updateQueue=null,p=wM(u,g,p,b),xM(l),g=s1(),l!==null&&!On?(o1(l,u,x),Po(l,u,x)):(yt&&g&&Fw(u),u.flags|=1,$n(l,u,p,x),u.child)}function _O(l,u,p,g,b){if(jl(u),u.stateNode===null){var x=su,R=p.contextType;typeof R=="object"&&R!==null&&(x=ar(R)),x=new p(g,x),u.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=x1,u.stateNode=x,x._reactInternals=u,x=u.stateNode,x.props=g,x.state=u.memoizedState,x.refs={},Jw(u),R=p.contextType,x.context=typeof R=="object"&&R!==null?ar(R):su,x.state=u.memoizedState,R=p.getDerivedStateFromProps,typeof R=="function"&&(v1(u,p,R,g),x.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(R=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),R!==x.state&&x1.enqueueReplaceState(x,x.state,null),jf(u,g,x,b),Bf(),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){x=u.stateNode;var D=u.memoizedProps,V=Fl(p,D);x.props=V;var ee=x.context,ae=p.contextType;R=su,typeof ae=="object"&&ae!==null&&(R=ar(ae));var he=p.getDerivedStateFromProps;ae=typeof he=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=u.pendingProps!==D,ae||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||ee!==R)&&cO(u,x,g,R),wa=!1;var ne=u.memoizedState;x.state=ne,jf(u,g,x,b),Bf(),ee=u.memoizedState,D||ne!==ee||wa?(typeof he=="function"&&(v1(u,p,he,g),ee=u.memoizedState),(V=wa||lO(u,p,V,g,ne,ee,R))?(ae||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(u.flags|=4194308)):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=ee),x.props=g,x.state=ee,x.context=R,g=V):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{x=u.stateNode,Qw(l,u),R=u.memoizedProps,ae=Fl(p,R),x.props=ae,he=u.pendingProps,ne=x.context,ee=p.contextType,V=su,typeof ee=="object"&&ee!==null&&(V=ar(ee)),D=p.getDerivedStateFromProps,(ee=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R!==he||ne!==V)&&cO(u,x,g,V),wa=!1,ne=u.memoizedState,x.state=ne,jf(u,g,x,b),Bf();var re=u.memoizedState;R!==he||ne!==re||wa||l!==null&&l.dependencies!==null&&Rg(l.dependencies)?(typeof D=="function"&&(v1(u,p,D,g),re=u.memoizedState),(ae=wa||lO(u,p,ae,g,ne,re,V)||l!==null&&l.dependencies!==null&&Rg(l.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(g,re,V),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(g,re,V)),typeof x.componentDidUpdate=="function"&&(u.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof x.componentDidUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=re),x.props=g,x.state=re,x.context=V,g=ae):(typeof x.componentDidUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===l.memoizedProps&&ne===l.memoizedState||(u.flags|=1024),g=!1)}return x=g,Kg(l,u),g=(u.flags&128)!==0,x||g?(x=u.stateNode,p=g&&typeof p.getDerivedStateFromError!="function"?null:x.render(),u.flags|=1,l!==null&&g?(u.child=mu(u,l.child,null,b),u.child=mu(u,null,p,b)):$n(l,u,p,b),u.memoizedState=x.state,l=u.child):l=Po(l,u,b),l}function CO(l,u,p,g){return Rf(),u.flags|=256,$n(l,u,p,g),u.child}var _1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function C1(l){return{baseLanes:l,cachePool:hM()}}function A1(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=Bi),l}function AO(l,u,p){var g=u.pendingProps,b=!1,x=(u.flags&128)!==0,R;if((R=x)||(R=l!==null&&l.memoizedState===null?!1:(vn.current&2)!==0),R&&(b=!0,u.flags&=-129),R=(u.flags&32)!==0,u.flags&=-33,l===null){if(yt){if(b?Aa(u):ka(),yt){var D=Xt,V;if(V=D){e:{for(V=D,D=Ls;V.nodeType!==8;){if(!D){D=null;break e}if(V=hs(V.nextSibling),V===null){D=null;break e}}D=V}D!==null?(u.memoizedState={dehydrated:D,treeContext:Dl!==null?{id:ko,overflow:Eo}:null,retryLane:536870912,hydrationErrors:null},V=oi(18,null,null,0),V.stateNode=D,V.return=u,u.child=V,Cr=u,Xt=null,V=!0):V=!1}V||Nl(u)}if(D=u.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return lS(D)?u.lanes=32:u.lanes=536870912,null;Oo(u)}return D=g.children,g=g.fallback,b?(ka(),b=u.mode,D=Yg({mode:"hidden",children:D},b),g=Pl(g,b,p,null),D.return=u,g.return=u,D.sibling=g,u.child=D,b=u.child,b.memoizedState=C1(p),b.childLanes=A1(l,R,p),u.memoizedState=_1,g):(Aa(u),k1(u,D))}if(V=l.memoizedState,V!==null&&(D=V.dehydrated,D!==null)){if(x)u.flags&256?(Aa(u),u.flags&=-257,u=E1(l,u,p)):u.memoizedState!==null?(ka(),u.child=l.child,u.flags|=128,u=null):(ka(),b=g.fallback,D=u.mode,g=Yg({mode:"visible",children:g.children},D),b=Pl(b,D,p,null),b.flags|=2,g.return=u,b.return=u,g.sibling=b,u.child=g,mu(u,l.child,null,p),g=u.child,g.memoizedState=C1(p),g.childLanes=A1(l,R,p),u.memoizedState=_1,u=b);else if(Aa(u),lS(D)){if(R=D.nextSibling&&D.nextSibling.dataset,R)var ee=R.dgst;R=ee,g=Error(r(419)),g.stack="",g.digest=R,Mf({value:g,source:null,stack:null}),u=E1(l,u,p)}else if(On||Of(l,u,p,!1),R=(p&l.childLanes)!==0,On||R){if(R=Pt,R!==null&&(g=p&-p,g=(g&42)!==0?1:af(g),g=(g&(R.suspendedLanes|p))!==0?0:g,g!==0&&g!==V.retryLane))throw V.retryLane=g,iu(l,g),hi(R,l,g),gO;D.data==="$?"||q1(),u=E1(l,u,p)}else D.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=V.treeContext,Xt=hs(D.nextSibling),Cr=u,yt=!0,Il=null,Ls=!1,l!==null&&(Li[Ii++]=ko,Li[Ii++]=Eo,Li[Ii++]=Dl,ko=l.id,Eo=l.overflow,Dl=u),u=k1(u,g.children),u.flags|=4096);return u}return b?(ka(),b=g.fallback,D=u.mode,V=l.child,ee=V.sibling,g=Ao(V,{mode:"hidden",children:g.children}),g.subtreeFlags=V.subtreeFlags&65011712,ee!==null?b=Ao(ee,b):(b=Pl(b,D,p,null),b.flags|=2),b.return=u,g.return=u,g.sibling=b,u.child=g,g=b,b=u.child,D=l.child.memoizedState,D===null?D=C1(p):(V=D.cachePool,V!==null?(ee=bn._currentValue,V=V.parent!==ee?{parent:ee,pool:ee}:V):V=hM(),D={baseLanes:D.baseLanes|p,cachePool:V}),b.memoizedState=D,b.childLanes=A1(l,R,p),u.memoizedState=_1,g):(Aa(u),p=l.child,l=p.sibling,p=Ao(p,{mode:"visible",children:g.children}),p.return=u,p.sibling=null,l!==null&&(R=u.deletions,R===null?(u.deletions=[l],u.flags|=16):R.push(l)),u.child=p,u.memoizedState=null,p)}function k1(l,u){return u=Yg({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Yg(l,u){return l=oi(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function E1(l,u,p){return mu(u,l.child,null,p),l=k1(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function kO(l,u,p){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),qw(l.return,u,p)}function T1(l,u,p,g,b){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:p,tailMode:b}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=p,x.tailMode=b)}function EO(l,u,p){var g=u.pendingProps,b=g.revealOrder,x=g.tail;if($n(l,u,g.children,p),g=vn.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&kO(l,p,u);else if(l.tag===19)kO(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}switch(I(vn,g),b){case"forwards":for(p=u.child,b=null;p!==null;)l=p.alternate,l!==null&&qg(l)===null&&(b=p),p=p.sibling;p=b,p===null?(b=u.child,u.child=null):(b=p.sibling,p.sibling=null),T1(u,!1,b,p,x);break;case"backwards":for(p=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&qg(l)===null){u.child=b;break}l=b.sibling,b.sibling=p,p=b,b=l}T1(u,!0,p,null,x);break;case"together":T1(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Po(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Oa|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(Of(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(r(153));if(u.child!==null){for(l=u.child,p=Ao(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=Ao(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function R1(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Rg(l)))}function dG(l,u,p){switch(u.tag){case 3:ze(u,u.stateNode.containerInfo),xa(u,bn,l.memoizedState.cache),Rf();break;case 27:case 5:Kt(u);break;case 4:ze(u,u.stateNode.containerInfo);break;case 10:xa(u,u.type,u.memoizedProps.value);break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Aa(u),u.flags|=128,null):(p&u.child.childLanes)!==0?AO(l,u,p):(Aa(u),l=Po(l,u,p),l!==null?l.sibling:null);Aa(u);break;case 19:var b=(l.flags&128)!==0;if(g=(p&u.childLanes)!==0,g||(Of(l,u,p,!1),g=(p&u.childLanes)!==0),b){if(g)return EO(l,u,p);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),I(vn,vn.current),g)break;return null;case 22:case 23:return u.lanes=0,xO(l,u,p);case 24:xa(u,bn,l.memoizedState.cache)}return Po(l,u,p)}function TO(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)On=!0;else{if(!R1(l,p)&&(u.flags&128)===0)return On=!1,dG(l,u,p);On=(l.flags&131072)!==0}else On=!1,yt&&(u.flags&1048576)!==0&&iM(u,Tg,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var g=u.elementType,b=g._init;if(g=b(g._payload),u.type=g,typeof g=="function")jw(g)?(l=Fl(g,l),u.tag=1,u=_O(null,u,g,l,p)):(u.tag=0,u=S1(null,u,g,l,p));else{if(g!=null){if(b=g.$$typeof,b===P){u.tag=11,u=yO(null,u,g,l,p);break e}else if(b===L){u.tag=14,u=bO(null,u,g,l,p);break e}}throw u=G(g)||g,Error(r(306,u,""))}}return u;case 0:return S1(l,u,u.type,u.pendingProps,p);case 1:return g=u.type,b=Fl(g,u.pendingProps),_O(l,u,g,b,p);case 3:e:{if(ze(u,u.stateNode.containerInfo),l===null)throw Error(r(387));g=u.pendingProps;var x=u.memoizedState;b=x.element,Qw(l,u),jf(u,g,null,p);var R=u.memoizedState;if(g=R.cache,xa(u,bn,g),g!==x.cache&&Ww(u,[bn],p,!0),Bf(),g=R.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:R.cache},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){u=CO(l,u,g,p);break e}else if(g!==b){b=Pi(Error(r(424)),u),Mf(b),u=CO(l,u,g,p);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Xt=hs(l.firstChild),Cr=u,yt=!0,Il=null,Ls=!0,p=oO(u,null,g,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Rf(),g===b){u=Po(l,u,p);break e}$n(l,u,g,p)}u=u.child}return u;case 26:return Kg(l,u),l===null?(p=PP(u.type,null,u.pendingProps,null))?u.memoizedState=p:yt||(p=u.type,l=u.pendingProps,g=c0(ye.current).createElement(p),g[Rn]=u,g[sr]=l,Fn(g,p,l),sn(g),u.stateNode=g):u.memoizedState=PP(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return Kt(u),l===null&&yt&&(g=u.stateNode=RP(u.type,u.pendingProps,ye.current),Cr=u,Ls=!0,b=Xt,Ia(u.type)?(cS=b,Xt=hs(g.firstChild)):Xt=b),$n(l,u,u.pendingProps.children,p),Kg(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&yt&&((b=g=Xt)&&(g=FG(g,u.type,u.pendingProps,Ls),g!==null?(u.stateNode=g,Cr=u,Xt=hs(g.firstChild),Ls=!1,b=!0):b=!1),b||Nl(u)),Kt(u),b=u.type,x=u.pendingProps,R=l!==null?l.memoizedProps:null,g=x.children,sS(b,x)?g=null:R!==null&&sS(b,R)&&(u.flags|=32),u.memoizedState!==null&&(b=i1(l,u,sG,null,null,p),od._currentValue=b),Kg(l,u),$n(l,u,g,p),u.child;case 6:return l===null&&yt&&((l=p=Xt)&&(p=zG(p,u.pendingProps,Ls),p!==null?(u.stateNode=p,Cr=u,Xt=null,l=!0):l=!1),l||Nl(u)),null;case 13:return AO(l,u,p);case 4:return ze(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=mu(u,null,g,p):$n(l,u,g,p),u.child;case 11:return yO(l,u,u.type,u.pendingProps,p);case 7:return $n(l,u,u.pendingProps,p),u.child;case 8:return $n(l,u,u.pendingProps.children,p),u.child;case 12:return $n(l,u,u.pendingProps.children,p),u.child;case 10:return g=u.pendingProps,xa(u,u.type,g.value),$n(l,u,g.children,p),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,jl(u),b=ar(b),g=g(b),u.flags|=1,$n(l,u,g,p),u.child;case 14:return bO(l,u,u.type,u.pendingProps,p);case 15:return vO(l,u,u.type,u.pendingProps,p);case 19:return EO(l,u,p);case 31:return g=u.pendingProps,p=u.mode,g={mode:g.mode,children:g.children},l===null?(p=Yg(g,p),p.ref=u.ref,u.child=p,p.return=u,u=p):(p=Ao(l.child,g),p.ref=u.ref,u.child=p,p.return=u,u=p),u;case 22:return xO(l,u,p);case 24:return jl(u),g=ar(bn),l===null?(b=Yw(),b===null&&(b=Pt,x=Gw(),b.pooledCache=x,x.refCount++,x!==null&&(b.pooledCacheLanes|=p),b=x),u.memoizedState={parent:g,cache:b},Jw(u),xa(u,bn,b)):((l.lanes&p)!==0&&(Qw(l,u),jf(u,null,null,p),Bf()),b=l.memoizedState,x=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),xa(u,bn,g)):(g=x.cache,xa(u,bn,g),g!==b.cache&&Ww(u,[bn],p,!0))),$n(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Do(l){l.flags|=4}function RO(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!BP(u)){if(u=Ni.current,u!==null&&((ct&4194048)===ct?Is!==null:(ct&62914560)!==ct&&(ct&536870912)===0||u!==Is))throw If=Xw,fM;l.flags|=8192}}function Xg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Fc():536870912,l.lanes|=u,vu|=u)}function qf(l,u){if(!yt)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var g=null;p!==null;)p.alternate!==null&&(g=p),p=p.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Wt(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,g=0;if(u)for(var b=l.child;b!==null;)p|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)p|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=p,u}function pG(l,u,p){var g=u.pendingProps;switch(zw(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(u),null;case 1:return Wt(u),null;case 3:return p=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Ro(bn),Ot(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Tf(u)?Do(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,aM())),Wt(u),null;case 26:return p=u.memoizedState,l===null?(Do(u),p!==null?(Wt(u),RO(u,p)):(Wt(u),u.flags&=-16777217)):p?p!==l.memoizedState?(Do(u),Wt(u),RO(u,p)):(Wt(u),u.flags&=-16777217):(l.memoizedProps!==g&&Do(u),Wt(u),u.flags&=-16777217),null;case 27:Yt(u),p=ye.current;var b=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Do(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return Wt(u),null}l=pe.current,Tf(u)?sM(u):(l=RP(b,g,p),u.stateNode=l,Do(u))}return Wt(u),null;case 5:if(Yt(u),p=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Do(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return Wt(u),null}if(l=pe.current,Tf(u))sM(u);else{switch(b=c0(ye.current),l){case 1:l=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=b.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof g.is=="string"?b.createElement("select",{is:g.is}):b.createElement("select"),g.multiple?l.multiple=!0:g.size&&(l.size=g.size);break;default:l=typeof g.is=="string"?b.createElement(p,{is:g.is}):b.createElement(p)}}l[Rn]=u,l[sr]=g;e:for(b=u.child;b!==null;){if(b.tag===5||b.tag===6)l.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===u)break e;for(;b.sibling===null;){if(b.return===null||b.return===u)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}u.stateNode=l;e:switch(Fn(l,p,g),p){case"button":case"input":case"select":case"textarea":l=!!g.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Do(u)}}return Wt(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&Do(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(r(166));if(l=ye.current,Tf(u)){if(l=u.stateNode,p=u.memoizedProps,g=null,b=Cr,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[Rn]=u,l=!!(l.nodeValue===p||g!==null&&g.suppressHydrationWarning===!0||SP(l.nodeValue,p)),l||Nl(u)}else l=c0(l).createTextNode(g),l[Rn]=u,u.stateNode=l}return Wt(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=Tf(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(r(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Rn]=u}else Rf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Wt(u),b=!1}else b=aM(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Oo(u),u):(Oo(u),null)}if(Oo(u),(u.flags&128)!==0)return u.lanes=p,u;if(p=g!==null,l=l!==null&&l.memoizedState!==null,p){g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool);var x=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(x=g.memoizedState.cachePool.pool),x!==b&&(g.flags|=2048)}return p!==l&&p&&(u.child.flags|=8192),Xg(u,u.updateQueue),Wt(u),null;case 4:return Ot(),l===null&&eS(u.stateNode.containerInfo),Wt(u),null;case 10:return Ro(u.type),Wt(u),null;case 19:if(ue(vn),b=u.memoizedState,b===null)return Wt(u),null;if(g=(u.flags&128)!==0,x=b.rendering,x===null)if(g)qf(b,!1);else{if(Jt!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(x=qg(l),x!==null){for(u.flags|=128,qf(b,!1),l=x.updateQueue,u.updateQueue=l,Xg(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)rM(p,l),p=p.sibling;return I(vn,vn.current&1|2),u.child}l=l.sibling}b.tail!==null&&tr()>Zg&&(u.flags|=128,g=!0,qf(b,!1),u.lanes=4194304)}else{if(!g)if(l=qg(x),l!==null){if(u.flags|=128,g=!0,l=l.updateQueue,u.updateQueue=l,Xg(u,l),qf(b,!0),b.tail===null&&b.tailMode==="hidden"&&!x.alternate&&!yt)return Wt(u),null}else 2*tr()-b.renderingStartTime>Zg&&p!==536870912&&(u.flags|=128,g=!0,qf(b,!1),u.lanes=4194304);b.isBackwards?(x.sibling=u.child,u.child=x):(l=b.last,l!==null?l.sibling=x:u.child=x,b.last=x)}return b.tail!==null?(u=b.tail,b.rendering=u,b.tail=u.sibling,b.renderingStartTime=tr(),u.sibling=null,l=vn.current,I(vn,g?l&1|2:l&1),u):(Wt(u),null);case 22:case 23:return Oo(u),n1(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(p&536870912)!==0&&(u.flags&128)===0&&(Wt(u),u.subtreeFlags&6&&(u.flags|=8192)):Wt(u),p=u.updateQueue,p!==null&&Xg(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048),l!==null&&ue($l),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ro(bn),Wt(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function mG(l,u){switch(zw(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ro(bn),Ot(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Yt(u),null;case 13:if(Oo(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Rf()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ue(vn),null;case 4:return Ot(),null;case 10:return Ro(u.type),null;case 22:case 23:return Oo(u),n1(),l!==null&&ue($l),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Ro(bn),null;case 25:return null;default:return null}}function MO(l,u){switch(zw(u),u.tag){case 3:Ro(bn),Ot();break;case 26:case 27:case 5:Yt(u);break;case 4:Ot();break;case 13:Oo(u);break;case 19:ue(vn);break;case 10:Ro(u.type);break;case 22:case 23:Oo(u),n1(),l!==null&&ue($l);break;case 24:Ro(bn)}}function Wf(l,u){try{var p=u.updateQueue,g=p!==null?p.lastEffect:null;if(g!==null){var b=g.next;p=b;do{if((p.tag&l)===l){g=void 0;var x=p.create,R=p.inst;g=x(),R.destroy=g}p=p.next}while(p!==b)}}catch(D){Ct(u,u.return,D)}}function Ea(l,u,p){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var x=b.next;g=x;do{if((g.tag&l)===l){var R=g.inst,D=R.destroy;if(D!==void 0){R.destroy=void 0,b=u;var V=p,ee=D;try{ee()}catch(ae){Ct(b,V,ae)}}}g=g.next}while(g!==x)}}catch(ae){Ct(u,u.return,ae)}}function OO(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{bM(u,p)}catch(g){Ct(l,l.return,g)}}}function PO(l,u,p){p.props=Fl(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(g){Ct(l,u,g)}}function Gf(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof p=="function"?l.refCleanup=p(g):p.current=g}}catch(b){Ct(l,u,b)}}function Ns(l,u){var p=l.ref,g=l.refCleanup;if(p!==null)if(typeof g=="function")try{g()}catch(b){Ct(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(b){Ct(l,u,b)}else p.current=null}function DO(l){var u=l.type,p=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&g.focus();break e;case"img":p.src?g.src=p.src:p.srcSet&&(g.srcset=p.srcSet)}}catch(b){Ct(l,l.return,b)}}function M1(l,u,p){try{var g=l.stateNode;NG(g,l.type,p,u),g[sr]=u}catch(b){Ct(l,l.return,b)}}function LO(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ia(l.type)||l.tag===4}function O1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||LO(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ia(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function P1(l,u,p){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(l),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=l0));else if(g!==4&&(g===27&&Ia(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(P1(l,u,p),l=l.sibling;l!==null;)P1(l,u,p),l=l.sibling}function Jg(l,u,p){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?p.insertBefore(l,u):p.appendChild(l);else if(g!==4&&(g===27&&Ia(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Jg(l,u,p),l=l.sibling;l!==null;)Jg(l,u,p),l=l.sibling}function IO(l){var u=l.stateNode,p=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);Fn(u,g,p),u[Rn]=l,u[sr]=p}catch(x){Ct(l,l.return,x)}}var Lo=!1,en=!1,D1=!1,NO=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function gG(l,u){if(l=l.containerInfo,rS=m0,l=GR(l),Ow(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var g=p.getSelection&&p.getSelection();if(g&&g.rangeCount!==0){p=g.anchorNode;var b=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{p.nodeType,x.nodeType}catch{p=null;break e}var R=0,D=-1,V=-1,ee=0,ae=0,he=l,ne=null;t:for(;;){for(var re;he!==p||b!==0&&he.nodeType!==3||(D=R+b),he!==x||g!==0&&he.nodeType!==3||(V=R+g),he.nodeType===3&&(R+=he.nodeValue.length),(re=he.firstChild)!==null;)ne=he,he=re;for(;;){if(he===l)break t;if(ne===p&&++ee===b&&(D=R),ne===x&&++ae===g&&(V=R),(re=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=re}p=D===-1||V===-1?null:{start:D,end:V}}else p=null}p=p||{start:0,end:0}}else p=null;for(iS={focusedElem:l,selectionRange:p},m0=!1,Pn=u;Pn!==null;)if(u=Pn,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Pn=l;else for(;Pn!==null;){switch(u=Pn,x=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&x!==null){l=void 0,p=u,b=x.memoizedProps,x=x.memoizedState,g=p.stateNode;try{var He=Fl(p.type,b,p.elementType===p.type);l=g.getSnapshotBeforeUpdate(He,x),g.__reactInternalSnapshotBeforeUpdate=l}catch($e){Ct(p,p.return,$e)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,p=l.nodeType,p===9)aS(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":aS(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=u.sibling,l!==null){l.return=u.return,Pn=l;break}Pn=u.return}}function BO(l,u,p){var g=p.flags;switch(p.tag){case 0:case 11:case 15:Ta(l,p),g&4&&Wf(5,p);break;case 1:if(Ta(l,p),g&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(R){Ct(p,p.return,R)}else{var b=Fl(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(R){Ct(p,p.return,R)}}g&64&&OO(p),g&512&&Gf(p,p.return);break;case 3:if(Ta(l,p),g&64&&(l=p.updateQueue,l!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{bM(l,u)}catch(R){Ct(p,p.return,R)}}break;case 27:u===null&&g&4&&IO(p);case 26:case 5:Ta(l,p),u===null&&g&4&&DO(p),g&512&&Gf(p,p.return);break;case 12:Ta(l,p);break;case 13:Ta(l,p),g&4&&VO(l,p),g&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=AG.bind(null,p),UG(l,p))));break;case 22:if(g=p.memoizedState!==null||Lo,!g){u=u!==null&&u.memoizedState!==null||en,b=Lo;var x=en;Lo=g,(en=u)&&!x?Ra(l,p,(p.subtreeFlags&8772)!==0):Ta(l,p),Lo=b,en=x}break;case 30:break;default:Ta(l,p)}}function jO(l){var u=l.alternate;u!==null&&(l.alternate=null,jO(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&hf(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var jt=null,Fr=!1;function Io(l,u,p){for(p=p.child;p!==null;)$O(l,u,p),p=p.sibling}function $O(l,u,p){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(oe,p)}catch{}switch(p.tag){case 26:en||Ns(p,u),Io(l,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:en||Ns(p,u);var g=jt,b=Fr;Ia(p.type)&&(jt=p.stateNode,Fr=!1),Io(l,u,p),nd(p.stateNode),jt=g,Fr=b;break;case 5:en||Ns(p,u);case 6:if(g=jt,b=Fr,jt=null,Io(l,u,p),jt=g,Fr=b,jt!==null)if(Fr)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(p.stateNode)}catch(x){Ct(p,u,x)}else try{jt.removeChild(p.stateNode)}catch(x){Ct(p,u,x)}break;case 18:jt!==null&&(Fr?(l=jt,EP(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),ud(l)):EP(jt,p.stateNode));break;case 4:g=jt,b=Fr,jt=p.stateNode.containerInfo,Fr=!0,Io(l,u,p),jt=g,Fr=b;break;case 0:case 11:case 14:case 15:en||Ea(2,p,u),en||Ea(4,p,u),Io(l,u,p);break;case 1:en||(Ns(p,u),g=p.stateNode,typeof g.componentWillUnmount=="function"&&PO(p,u,g)),Io(l,u,p);break;case 21:Io(l,u,p);break;case 22:en=(g=en)||p.memoizedState!==null,Io(l,u,p),en=g;break;default:Io(l,u,p)}}function VO(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ud(l)}catch(p){Ct(u,u.return,p)}}function yG(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new NO),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new NO),u;default:throw Error(r(435,l.tag))}}function L1(l,u){var p=yG(l);u.forEach(function(g){var b=kG.bind(null,l,g);p.has(g)||(p.add(g),g.then(b,b))})}function ai(l,u){var p=u.deletions;if(p!==null)for(var g=0;g<p.length;g++){var b=p[g],x=l,R=u,D=R;e:for(;D!==null;){switch(D.tag){case 27:if(Ia(D.type)){jt=D.stateNode,Fr=!1;break e}break;case 5:jt=D.stateNode,Fr=!1;break e;case 3:case 4:jt=D.stateNode.containerInfo,Fr=!0;break e}D=D.return}if(jt===null)throw Error(r(160));$O(x,R,b),jt=null,Fr=!1,x=b.alternate,x!==null&&(x.return=null),b.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)FO(u,l),u=u.sibling}var us=null;function FO(l,u){var p=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ai(u,l),li(l),g&4&&(Ea(3,l,l.return),Wf(3,l),Ea(5,l,l.return));break;case 1:ai(u,l),li(l),g&512&&(en||p===null||Ns(p,p.return)),g&64&&Lo&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?g:p.concat(g))));break;case 26:var b=us;if(ai(u,l),li(l),g&512&&(en||p===null||Ns(p,p.return)),g&4){var x=p!==null?p.memoizedState:null;if(g=l.memoizedState,p===null)if(g===null)if(l.stateNode===null){e:{g=l.type,p=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":x=b.getElementsByTagName("title")[0],(!x||x[Tl]||x[Rn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=b.createElement(g),b.head.insertBefore(x,b.querySelector("head > title"))),Fn(x,g,p),x[Rn]=l,sn(x),g=x;break e;case"link":var R=IP("link","href",b).get(g+(p.href||""));if(R){for(var D=0;D<R.length;D++)if(x=R[D],x.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&x.getAttribute("rel")===(p.rel==null?null:p.rel)&&x.getAttribute("title")===(p.title==null?null:p.title)&&x.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){R.splice(D,1);break t}}x=b.createElement(g),Fn(x,g,p),b.head.appendChild(x);break;case"meta":if(R=IP("meta","content",b).get(g+(p.content||""))){for(D=0;D<R.length;D++)if(x=R[D],x.getAttribute("content")===(p.content==null?null:""+p.content)&&x.getAttribute("name")===(p.name==null?null:p.name)&&x.getAttribute("property")===(p.property==null?null:p.property)&&x.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&x.getAttribute("charset")===(p.charSet==null?null:p.charSet)){R.splice(D,1);break t}}x=b.createElement(g),Fn(x,g,p),b.head.appendChild(x);break;default:throw Error(r(468,g))}x[Rn]=l,sn(x),g=x}l.stateNode=g}else NP(b,l.type,l.stateNode);else l.stateNode=LP(b,g,l.memoizedProps);else x!==g?(x===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):x.count--,g===null?NP(b,l.type,l.stateNode):LP(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&M1(l,l.memoizedProps,p.memoizedProps)}break;case 27:ai(u,l),li(l),g&512&&(en||p===null||Ns(p,p.return)),p!==null&&g&4&&M1(l,l.memoizedProps,p.memoizedProps);break;case 5:if(ai(u,l),li(l),g&512&&(en||p===null||Ns(p,p.return)),l.flags&32){b=l.stateNode;try{ri(b,"")}catch(re){Ct(l,l.return,re)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,M1(l,b,p!==null?p.memoizedProps:b)),g&1024&&(D1=!0);break;case 6:if(ai(u,l),li(l),g&4){if(l.stateNode===null)throw Error(r(162));g=l.memoizedProps,p=l.stateNode;try{p.nodeValue=g}catch(re){Ct(l,l.return,re)}}break;case 3:if(f0=null,b=us,us=u0(u.containerInfo),ai(u,l),us=b,li(l),g&4&&p!==null&&p.memoizedState.isDehydrated)try{ud(u.containerInfo)}catch(re){Ct(l,l.return,re)}D1&&(D1=!1,zO(l));break;case 4:g=us,us=u0(l.stateNode.containerInfo),ai(u,l),li(l),us=g;break;case 12:ai(u,l),li(l);break;case 13:ai(u,l),li(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(V1=tr()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,L1(l,g)));break;case 22:b=l.memoizedState!==null;var V=p!==null&&p.memoizedState!==null,ee=Lo,ae=en;if(Lo=ee||b,en=ae||V,ai(u,l),en=ae,Lo=ee,li(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(p===null||V||Lo||en||zl(l)),p=null,u=l;;){if(u.tag===5||u.tag===26){if(p===null){V=p=u;try{if(x=V.stateNode,b)R=x.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{D=V.stateNode;var he=V.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){Ct(V,V.return,re)}}}else if(u.tag===6){if(p===null){V=u;try{V.stateNode.nodeValue=b?"":V.memoizedProps}catch(re){Ct(V,V.return,re)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(p=g.retryQueue,p!==null&&(g.retryQueue=null,L1(l,p))));break;case 19:ai(u,l),li(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,L1(l,g)));break;case 30:break;case 21:break;default:ai(u,l),li(l)}}function li(l){var u=l.flags;if(u&2){try{for(var p,g=l.return;g!==null;){if(LO(g)){p=g;break}g=g.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var b=p.stateNode,x=O1(l);Jg(l,x,b);break;case 5:var R=p.stateNode;p.flags&32&&(ri(R,""),p.flags&=-33);var D=O1(l);Jg(l,D,R);break;case 3:case 4:var V=p.stateNode.containerInfo,ee=O1(l);P1(l,ee,V);break;default:throw Error(r(161))}}catch(ae){Ct(l,l.return,ae)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function zO(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;zO(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ta(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)BO(l,u.alternate,u),u=u.sibling}function zl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Ea(4,u,u.return),zl(u);break;case 1:Ns(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&PO(u,u.return,p),zl(u);break;case 27:nd(u.stateNode);case 26:case 5:Ns(u,u.return),zl(u);break;case 22:u.memoizedState===null&&zl(u);break;case 30:zl(u);break;default:zl(u)}l=l.sibling}}function Ra(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,x=u,R=x.flags;switch(x.tag){case 0:case 11:case 15:Ra(b,x,p),Wf(4,x);break;case 1:if(Ra(b,x,p),g=x,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ee){Ct(g,g.return,ee)}if(g=x,b=g.updateQueue,b!==null){var D=g.stateNode;try{var V=b.shared.hiddenCallbacks;if(V!==null)for(b.shared.hiddenCallbacks=null,b=0;b<V.length;b++)yM(V[b],D)}catch(ee){Ct(g,g.return,ee)}}p&&R&64&&OO(x),Gf(x,x.return);break;case 27:IO(x);case 26:case 5:Ra(b,x,p),p&&g===null&&R&4&&DO(x),Gf(x,x.return);break;case 12:Ra(b,x,p);break;case 13:Ra(b,x,p),p&&R&4&&VO(b,x);break;case 22:x.memoizedState===null&&Ra(b,x,p),Gf(x,x.return);break;case 30:break;default:Ra(b,x,p)}u=u.sibling}}function I1(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Pf(p))}function N1(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Pf(l))}function Bs(l,u,p,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)UO(l,u,p,g),u=u.sibling}function UO(l,u,p,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:Bs(l,u,p,g),b&2048&&Wf(9,u);break;case 1:Bs(l,u,p,g);break;case 3:Bs(l,u,p,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Pf(l)));break;case 12:if(b&2048){Bs(l,u,p,g),l=u.stateNode;try{var x=u.memoizedProps,R=x.id,D=x.onPostCommit;typeof D=="function"&&D(R,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(V){Ct(u,u.return,V)}}else Bs(l,u,p,g);break;case 13:Bs(l,u,p,g);break;case 23:break;case 22:x=u.stateNode,R=u.alternate,u.memoizedState!==null?x._visibility&2?Bs(l,u,p,g):Kf(l,u):x._visibility&2?Bs(l,u,p,g):(x._visibility|=2,gu(l,u,p,g,(u.subtreeFlags&10256)!==0)),b&2048&&I1(R,u);break;case 24:Bs(l,u,p,g),b&2048&&N1(u.alternate,u);break;default:Bs(l,u,p,g)}}function gu(l,u,p,g,b){for(b=b&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var x=l,R=u,D=p,V=g,ee=R.flags;switch(R.tag){case 0:case 11:case 15:gu(x,R,D,V,b),Wf(8,R);break;case 23:break;case 22:var ae=R.stateNode;R.memoizedState!==null?ae._visibility&2?gu(x,R,D,V,b):Kf(x,R):(ae._visibility|=2,gu(x,R,D,V,b)),b&&ee&2048&&I1(R.alternate,R);break;case 24:gu(x,R,D,V,b),b&&ee&2048&&N1(R.alternate,R);break;default:gu(x,R,D,V,b)}u=u.sibling}}function Kf(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,g=u,b=g.flags;switch(g.tag){case 22:Kf(p,g),b&2048&&I1(g.alternate,g);break;case 24:Kf(p,g),b&2048&&N1(g.alternate,g);break;default:Kf(p,g)}u=u.sibling}}var Yf=8192;function yu(l){if(l.subtreeFlags&Yf)for(l=l.child;l!==null;)HO(l),l=l.sibling}function HO(l){switch(l.tag){case 26:yu(l),l.flags&Yf&&l.memoizedState!==null&&nK(us,l.memoizedState,l.memoizedProps);break;case 5:yu(l);break;case 3:case 4:var u=us;us=u0(l.stateNode.containerInfo),yu(l),us=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Yf,Yf=16777216,yu(l),Yf=u):yu(l));break;default:yu(l)}}function qO(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Xf(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];Pn=g,GO(g,l)}qO(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)WO(l),l=l.sibling}function WO(l){switch(l.tag){case 0:case 11:case 15:Xf(l),l.flags&2048&&Ea(9,l,l.return);break;case 3:Xf(l);break;case 12:Xf(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Qg(l)):Xf(l);break;default:Xf(l)}}function Qg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];Pn=g,GO(g,l)}qO(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Ea(8,u,u.return),Qg(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Qg(u));break;default:Qg(u)}l=l.sibling}}function GO(l,u){for(;Pn!==null;){var p=Pn;switch(p.tag){case 0:case 11:case 15:Ea(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var g=p.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Pf(p.memoizedState.cache)}if(g=p.child,g!==null)g.return=p,Pn=g;else e:for(p=l;Pn!==null;){g=Pn;var b=g.sibling,x=g.return;if(jO(g),g===p){Pn=null;break e}if(b!==null){b.return=x,Pn=b;break e}Pn=x}}}var bG={getCacheForType:function(l){var u=ar(bn),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p}},vG=typeof WeakMap=="function"?WeakMap:Map,bt=0,Pt=null,ot=null,ct=0,vt=0,ci=null,Ma=!1,bu=!1,B1=!1,No=0,Jt=0,Oa=0,Ul=0,j1=0,Bi=0,vu=0,Jf=null,zr=null,$1=!1,V1=0,Zg=1/0,e0=null,Pa=null,Vn=0,Da=null,xu=null,wu=0,F1=0,z1=null,KO=null,Qf=0,U1=null;function ui(){if((bt&2)!==0&&ct!==0)return ct&-ct;if(F.T!==null){var l=lu;return l!==0?l:X1()}return cf()}function YO(){Bi===0&&(Bi=(ct&536870912)===0||yt?Vc():536870912);var l=Ni.current;return l!==null&&(l.flags|=32),Bi}function hi(l,u,p){(l===Pt&&(vt===2||vt===9)||l.cancelPendingCommit!==null)&&(Su(l,0),La(l,ct,Bi,!1)),ss(l,p),((bt&2)===0||l!==Pt)&&(l===Pt&&((bt&2)===0&&(Ul|=p),Jt===4&&La(l,ct,Bi,!1)),js(l))}function XO(l,u,p){if((bt&6)!==0)throw Error(r(327));var g=!p&&(u&124)===0&&(u&l.expiredLanes)===0||rr(l,u),b=g?SG(l,u):W1(l,u,!0),x=g;do{if(b===0){bu&&!g&&La(l,u,0,!1);break}else{if(p=l.current.alternate,x&&!xG(p)){b=W1(l,u,!1),x=!1;continue}if(b===2){if(x=u,l.errorRecoveryDisabledLanes&x)var R=0;else R=l.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){u=R;e:{var D=l;b=Jf;var V=D.current.memoizedState.isDehydrated;if(V&&(Su(D,R).flags|=256),R=W1(D,R,!1),R!==2){if(B1&&!V){D.errorRecoveryDisabledLanes|=x,Ul|=x,b=4;break e}x=zr,zr=b,x!==null&&(zr===null?zr=x:zr.push.apply(zr,x))}b=R}if(x=!1,b!==2)continue}}if(b===1){Su(l,0),La(l,u,0,!0);break}e:{switch(g=l,x=b,x){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:La(g,u,Bi,!Ma);break e;case 2:zr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(b=V1+300-tr(),10<b)){if(La(g,u,Bi,!Ma),rn(g,0,!0)!==0)break e;g.timeoutHandle=AP(JO.bind(null,g,p,zr,e0,$1,u,Bi,Ul,vu,Ma,x,2,-0,0),b);break e}JO(g,p,zr,e0,$1,u,Bi,Ul,vu,Ma,x,0,-0,0)}}break}while(!0);js(l)}function JO(l,u,p,g,b,x,R,D,V,ee,ae,he,ne,re){if(l.timeoutHandle=-1,he=u.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(sd={stylesheets:null,count:0,unsuspend:tK},HO(u),he=rK(),he!==null)){l.cancelPendingCommit=he(iP.bind(null,l,u,x,p,g,b,R,D,V,ae,1,ne,re)),La(l,x,R,!ee);return}iP(l,u,x,p,g,b,R,D,V)}function xG(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var g=0;g<p.length;g++){var b=p[g],x=b.getSnapshot;b=b.value;try{if(!si(x(),b))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function La(l,u,p,g){u&=~j1,u&=~Ul,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var x=31-Be(b),R=1<<x;g[x]=-1,b&=~R}p!==0&&ig(l,p,u)}function t0(){return(bt&6)===0?(Zf(0),!1):!0}function H1(){if(ot!==null){if(vt===0)var l=ot.return;else l=ot,To=Bl=null,a1(l),pu=null,Uf=0,l=ot;for(;l!==null;)MO(l.alternate,l),l=l.return;ot=null}}function Su(l,u){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,jG(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),H1(),Pt=l,ot=p=Ao(l.current,null),ct=u,vt=0,ci=null,Ma=!1,bu=rr(l,u),B1=!1,vu=Bi=j1=Ul=Oa=Jt=0,zr=Jf=null,$1=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-Be(g),x=1<<b;u|=l[b],g&=~x}return No=u,_g(),p}function QO(l,u){et=null,F.H=zg,u===Lf||u===Pg?(u=mM(),vt=3):u===fM?(u=mM(),vt=4):vt=u===gO?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ci=u,ot===null&&(Jt=1,Gg(l,Pi(u,l.current)))}function ZO(){var l=F.H;return F.H=zg,l===null?zg:l}function eP(){var l=F.A;return F.A=bG,l}function q1(){Jt=4,Ma||(ct&4194048)!==ct&&Ni.current!==null||(bu=!0),(Oa&134217727)===0&&(Ul&134217727)===0||Pt===null||La(Pt,ct,Bi,!1)}function W1(l,u,p){var g=bt;bt|=2;var b=ZO(),x=eP();(Pt!==l||ct!==u)&&(e0=null,Su(l,u)),u=!1;var R=Jt;e:do try{if(vt!==0&&ot!==null){var D=ot,V=ci;switch(vt){case 8:H1(),R=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(u=!0);var ee=vt;if(vt=0,ci=null,_u(l,D,V,ee),p&&bu){R=0;break e}break;default:ee=vt,vt=0,ci=null,_u(l,D,V,ee)}}wG(),R=Jt;break}catch(ae){QO(l,ae)}while(!0);return u&&l.shellSuspendCounter++,To=Bl=null,bt=g,F.H=b,F.A=x,ot===null&&(Pt=null,ct=0,_g()),R}function wG(){for(;ot!==null;)tP(ot)}function SG(l,u){var p=bt;bt|=2;var g=ZO(),b=eP();Pt!==l||ct!==u?(e0=null,Zg=tr()+500,Su(l,u)):bu=rr(l,u);e:do try{if(vt!==0&&ot!==null){u=ot;var x=ci;t:switch(vt){case 1:vt=0,ci=null,_u(l,u,x,1);break;case 2:case 9:if(dM(x)){vt=0,ci=null,nP(u);break}u=function(){vt!==2&&vt!==9||Pt!==l||(vt=7),js(l)},x.then(u,u);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:dM(x)?(vt=0,ci=null,nP(u)):(vt=0,ci=null,_u(l,u,x,7));break;case 5:var R=null;switch(ot.tag){case 26:R=ot.memoizedState;case 5:case 27:var D=ot;if(!R||BP(R)){vt=0,ci=null;var V=D.sibling;if(V!==null)ot=V;else{var ee=D.return;ee!==null?(ot=ee,n0(ee)):ot=null}break t}}vt=0,ci=null,_u(l,u,x,5);break;case 6:vt=0,ci=null,_u(l,u,x,6);break;case 8:H1(),Jt=6;break e;default:throw Error(r(462))}}_G();break}catch(ae){QO(l,ae)}while(!0);return To=Bl=null,F.H=g,F.A=b,bt=p,ot!==null?0:(Pt=null,ct=0,_g(),Jt)}function _G(){for(;ot!==null&&!_o();)tP(ot)}function tP(l){var u=TO(l.alternate,l,No);l.memoizedProps=l.pendingProps,u===null?n0(l):ot=u}function nP(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=SO(p,u,u.pendingProps,u.type,void 0,ct);break;case 11:u=SO(p,u,u.pendingProps,u.type.render,u.ref,ct);break;case 5:a1(u);default:MO(p,u),u=ot=rM(u,No),u=TO(p,u,No)}l.memoizedProps=l.pendingProps,u===null?n0(l):ot=u}function _u(l,u,p,g){To=Bl=null,a1(u),pu=null,Uf=0;var b=u.return;try{if(fG(l,b,u,p,ct)){Jt=1,Gg(l,Pi(p,l.current)),ot=null;return}}catch(x){if(b!==null)throw ot=b,x;Jt=1,Gg(l,Pi(p,l.current)),ot=null;return}u.flags&32768?(yt||g===1?l=!0:bu||(ct&536870912)!==0?l=!1:(Ma=l=!0,(g===2||g===9||g===3||g===6)&&(g=Ni.current,g!==null&&g.tag===13&&(g.flags|=16384))),rP(u,l)):n0(u)}function n0(l){var u=l;do{if((u.flags&32768)!==0){rP(u,Ma);return}l=u.return;var p=pG(u.alternate,u,No);if(p!==null){ot=p;return}if(u=u.sibling,u!==null){ot=u;return}ot=u=l}while(u!==null);Jt===0&&(Jt=5)}function rP(l,u){do{var p=mG(l.alternate,l);if(p!==null){p.flags&=32767,ot=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){ot=l;return}ot=l=p}while(l!==null);Jt=6,ot=null}function iP(l,u,p,g,b,x,R,D,V){l.cancelPendingCommit=null;do r0();while(Vn!==0);if((bt&6)!==0)throw Error(r(327));if(u!==null){if(u===l.current)throw Error(r(177));if(x=u.lanes|u.childLanes,x|=Nw,vw(l,p,x,R,D,V),l===Pt&&(ot=Pt=null,ct=0),xu=u,Da=l,wu=p,F1=x,z1=b,KO=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,EG(Ms,function(){return cP(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=F.T,F.T=null,b=Y.p,Y.p=2,R=bt,bt|=4;try{gG(l,u,p)}finally{bt=R,Y.p=b,F.T=g}}Vn=1,sP(),oP(),aP()}}function sP(){if(Vn===1){Vn=0;var l=Da,u=xu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=F.T,F.T=null;var g=Y.p;Y.p=2;var b=bt;bt|=4;try{FO(u,l);var x=iS,R=GR(l.containerInfo),D=x.focusedElem,V=x.selectionRange;if(R!==D&&D&&D.ownerDocument&&WR(D.ownerDocument.documentElement,D)){if(V!==null&&Ow(D)){var ee=V.start,ae=V.end;if(ae===void 0&&(ae=ee),"selectionStart"in D)D.selectionStart=ee,D.selectionEnd=Math.min(ae,D.value.length);else{var he=D.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),He=D.textContent.length,$e=Math.min(V.start,He),St=V.end===void 0?$e:Math.min(V.end,He);!re.extend&&$e>St&&(R=St,St=$e,$e=R);var K=qR(D,$e),U=qR(D,St);if(K&&U&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==U.node||re.focusOffset!==U.offset)){var J=he.createRange();J.setStart(K.node,K.offset),re.removeAllRanges(),$e>St?(re.addRange(J),re.extend(U.node,U.offset)):(J.setEnd(U.node,U.offset),re.addRange(J))}}}}for(he=[],re=D;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<he.length;D++){var ce=he[D];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}m0=!!rS,iS=rS=null}finally{bt=b,Y.p=g,F.T=p}}l.current=u,Vn=2}}function oP(){if(Vn===2){Vn=0;var l=Da,u=xu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=F.T,F.T=null;var g=Y.p;Y.p=2;var b=bt;bt|=4;try{BO(l,u.alternate,u)}finally{bt=b,Y.p=g,F.T=p}}Vn=3}}function aP(){if(Vn===4||Vn===3){Vn=0,rs();var l=Da,u=xu,p=wu,g=KO;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Vn=5:(Vn=0,xu=Da=null,lP(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Pa=null),lf(p),u=u.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(oe,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=F.T,b=Y.p,Y.p=2,F.T=null;try{for(var x=l.onRecoverableError,R=0;R<g.length;R++){var D=g[R];x(D.value,{componentStack:D.stack})}}finally{F.T=u,Y.p=b}}(wu&3)!==0&&r0(),js(l),b=l.pendingLanes,(p&4194090)!==0&&(b&42)!==0?l===U1?Qf++:(Qf=0,U1=l):Qf=0,Zf(0)}}function lP(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Pf(u)))}function r0(l){return sP(),oP(),aP(),cP()}function cP(){if(Vn!==5)return!1;var l=Da,u=F1;F1=0;var p=lf(wu),g=F.T,b=Y.p;try{Y.p=32>p?32:p,F.T=null,p=z1,z1=null;var x=Da,R=wu;if(Vn=0,xu=Da=null,wu=0,(bt&6)!==0)throw Error(r(331));var D=bt;if(bt|=4,WO(x.current),UO(x,x.current,R,p),bt=D,Zf(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(oe,x)}catch{}return!0}finally{Y.p=b,F.T=g,lP(l,u)}}function uP(l,u,p){u=Pi(p,u),u=w1(l.stateNode,u,2),l=_a(l,u,2),l!==null&&(ss(l,2),js(l))}function Ct(l,u,p){if(l.tag===3)uP(l,l,p);else for(;u!==null;){if(u.tag===3){uP(u,l,p);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Pa===null||!Pa.has(g))){l=Pi(p,l),p=pO(2),g=_a(u,p,2),g!==null&&(mO(p,g,u,l),ss(g,2),js(g));break}}u=u.return}}function G1(l,u,p){var g=l.pingCache;if(g===null){g=l.pingCache=new vG;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(p)||(B1=!0,b.add(p),l=CG.bind(null,l,u,p),u.then(l,l))}function CG(l,u,p){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Pt===l&&(ct&p)===p&&(Jt===4||Jt===3&&(ct&62914560)===ct&&300>tr()-V1?(bt&2)===0&&Su(l,0):j1|=p,vu===ct&&(vu=0)),js(l)}function hP(l,u){u===0&&(u=Fc()),l=iu(l,u),l!==null&&(ss(l,u),js(l))}function AG(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),hP(l,p)}function kG(l,u){var p=0;switch(l.tag){case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(p=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(u),hP(l,p)}function EG(l,u){return er(l,u)}var i0=null,Cu=null,K1=!1,s0=!1,Y1=!1,Hl=0;function js(l){l!==Cu&&l.next===null&&(Cu===null?i0=Cu=l:Cu=Cu.next=l),s0=!0,K1||(K1=!0,RG())}function Zf(l,u){if(!Y1&&s0){Y1=!0;do for(var p=!1,g=i0;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var x=0;else{var R=g.suspendedLanes,D=g.pingedLanes;x=(1<<31-Be(42|l)+1)-1,x&=b&~(R&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(p=!0,mP(g,x))}else x=ct,x=rn(g,g===Pt?x:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(x&3)===0||rr(g,x)||(p=!0,mP(g,x));g=g.next}while(p);Y1=!1}}function TG(){fP()}function fP(){s0=K1=!1;var l=0;Hl!==0&&(BG()&&(l=Hl),Hl=0);for(var u=tr(),p=null,g=i0;g!==null;){var b=g.next,x=dP(g,u);x===0?(g.next=null,p===null?i0=b:p.next=b,b===null&&(Cu=p)):(p=g,(l!==0||(x&3)!==0)&&(s0=!0)),g=b}Zf(l)}function dP(l,u){for(var p=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,x=l.pendingLanes&-62914561;0<x;){var R=31-Be(x),D=1<<R,V=b[R];V===-1?((D&p)===0||(D&g)!==0)&&(b[R]=jn(D,u)):V<=u&&(l.expiredLanes|=D),x&=~D}if(u=Pt,p=ct,p=rn(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,p===0||l===u&&(vt===2||vt===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&ei(g),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||rr(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(g!==null&&ei(g),lf(p)){case 2:case 8:p=Rs;break;case 32:p=Ms;break;case 268435456:p=kl;break;default:p=Ms}return g=pP.bind(null,l),p=er(p,g),l.callbackPriority=u,l.callbackNode=p,u}return g!==null&&g!==null&&ei(g),l.callbackPriority=2,l.callbackNode=null,2}function pP(l,u){if(Vn!==0&&Vn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(r0()&&l.callbackNode!==p)return null;var g=ct;return g=rn(l,l===Pt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(XO(l,g,u),dP(l,tr()),l.callbackNode!=null&&l.callbackNode===p?pP.bind(null,l):null)}function mP(l,u){if(r0())return null;XO(l,u,!0)}function RG(){$G(function(){(bt&6)!==0?er(Al,TG):fP()})}function X1(){return Hl===0&&(Hl=Vc()),Hl}function gP(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Gc(""+l)}function yP(l,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,l.id&&p.setAttribute("form",l.id),u.parentNode.insertBefore(p,u),l=new FormData(l),p.parentNode.removeChild(p),l}function MG(l,u,p,g,b){if(u==="submit"&&p&&p.stateNode===b){var x=gP((b[sr]||null).action),R=g.submitter;R&&(u=(u=R[sr]||null)?gP(u.formAction):R.getAttribute("formAction"),u!==null&&(x=u,R=null));var D=new Oe("action","action",null,g,b);l.push({event:D,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Hl!==0){var V=R?yP(b,R):new FormData(b);g1(p,{pending:!0,data:V,method:b.method,action:x},null,V)}}else typeof x=="function"&&(D.preventDefault(),V=R?yP(b,R):new FormData(b),g1(p,{pending:!0,data:V,method:b.method,action:x},x,V))},currentTarget:b}]})}}for(var J1=0;J1<Iw.length;J1++){var Q1=Iw[J1],OG=Q1.toLowerCase(),PG=Q1[0].toUpperCase()+Q1.slice(1);cs(OG,"on"+PG)}cs(XR,"onAnimationEnd"),cs(JR,"onAnimationIteration"),cs(QR,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(YW,"onTransitionRun"),cs(XW,"onTransitionStart"),cs(JW,"onTransitionCancel"),cs(ZR,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Co("onBeforeInput",["compositionend","keypress","textInput","paste"]),Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ed));function bP(l,u){u=(u&4)!==0;for(var p=0;p<l.length;p++){var g=l[p],b=g.event;g=g.listeners;e:{var x=void 0;if(u)for(var R=g.length-1;0<=R;R--){var D=g[R],V=D.instance,ee=D.currentTarget;if(D=D.listener,V!==x&&b.isPropagationStopped())break e;x=D,b.currentTarget=ee;try{x(b)}catch(ae){Wg(ae)}b.currentTarget=null,x=V}else for(R=0;R<g.length;R++){if(D=g[R],V=D.instance,ee=D.currentTarget,D=D.listener,V!==x&&b.isPropagationStopped())break e;x=D,b.currentTarget=ee;try{x(b)}catch(ae){Wg(ae)}b.currentTarget=null,x=V}}}}function at(l,u){var p=u[uf];p===void 0&&(p=u[uf]=new Set);var g=l+"__bubble";p.has(g)||(vP(u,l,2,!1),p.add(g))}function Z1(l,u,p){var g=0;u&&(g|=4),vP(p,l,g,u)}var o0="_reactListening"+Math.random().toString(36).slice(2);function eS(l){if(!l[o0]){l[o0]=!0,lg.forEach(function(p){p!=="selectionchange"&&(DG.has(p)||Z1(p,!1,l),Z1(p,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[o0]||(u[o0]=!0,Z1("selectionchange",!1,u))}}function vP(l,u,p,g){switch(UP(u)){case 2:var b=oK;break;case 8:b=aK;break;default:b=pS}p=b.bind(null,u,p,l),b=void 0,!xf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,p,{capture:!0,passive:b}):l.addEventListener(u,p,!0):b!==void 0?l.addEventListener(u,p,{passive:b}):l.addEventListener(u,p,!1)}function tS(l,u,p,g,b){var x=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var R=g.tag;if(R===3||R===4){var D=g.stateNode.containerInfo;if(D===b)break;if(R===4)for(R=g.return;R!==null;){var V=R.tag;if((V===3||V===4)&&R.stateNode.containerInfo===b)return;R=R.return}for(;D!==null;){if(R=ca(D),R===null)return;if(V=R.tag,V===5||V===6||V===26||V===27){g=x=R;continue e}D=D.parentNode}}g=g.return}Yc(function(){var ee=x,ae=Kc(p),he=[];e:{var ne=eM.get(l);if(ne!==void 0){var re=Oe,He=l;switch(l){case"keypress":if(Qc(p)===0)break e;case"keydown":case"keyup":re=EW;break;case"focusin":He="focus",re=va;break;case"focusout":He="blur",re=va;break;case"beforeblur":case"afterblur":re=va;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=MW;break;case XR:case JR:case QR:re=bW;break;case ZR:re=PW;break;case"scroll":case"scrollend":re=or;break;case"wheel":re=LW;break;case"copy":case"cut":case"paste":re=xW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=OR;break;case"toggle":case"beforetoggle":re=NW}var $e=(u&4)!==0,St=!$e&&(l==="scroll"||l==="scrollend"),K=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var U=ee,J;U!==null;){var ce=U;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||K===null||(ce=ma(U,K),ce!=null&&$e.push(td(U,ce,J))),St)break;U=U.return}0<$e.length&&(ne=new re(ne,He,null,p,ae),he.push({event:ne,listeners:$e}))}}if((u&7)===0){e:{if(ne=l==="mouseover"||l==="pointerover",re=l==="mouseout"||l==="pointerout",ne&&p!==yf&&(He=p.relatedTarget||p.fromElement)&&(ca(He)||He[la]))break e;if((re||ne)&&(ne=ae.window===ae?ae:(ne=ae.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(He=p.relatedTarget||p.toElement,re=ee,He=He?ca(He):null,He!==null&&(St=s(He),$e=He.tag,He!==St||$e!==5&&$e!==27&&$e!==6)&&(He=null)):(re=null,He=ee),re!==He)){if($e=wf,ce="onMouseLeave",K="onMouseEnter",U="mouse",(l==="pointerout"||l==="pointerover")&&($e=OR,ce="onPointerLeave",K="onPointerEnter",U="pointer"),St=re==null?ne:Mi(re),J=He==null?ne:Mi(He),ne=new $e(ce,U+"leave",re,p,ae),ne.target=St,ne.relatedTarget=J,ce=null,ca(ae)===ee&&($e=new $e(K,U+"enter",He,p,ae),$e.target=J,$e.relatedTarget=St,ce=$e),St=ce,re&&He)t:{for($e=re,K=He,U=0,J=$e;J;J=Au(J))U++;for(J=0,ce=K;ce;ce=Au(ce))J++;for(;0<U-J;)$e=Au($e),U--;for(;0<J-U;)K=Au(K),J--;for(;U--;){if($e===K||K!==null&&$e===K.alternate)break t;$e=Au($e),K=Au(K)}$e=null}else $e=null;re!==null&&xP(he,ne,re,$e,!1),He!==null&&St!==null&&xP(he,St,He,$e,!0)}}e:{if(ne=ee?Mi(ee):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var Te=$R;else if(BR(ne))if(VR)Te=WW;else{Te=HW;var rt=UW}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&gf(ee.elementType)&&(Te=$R):Te=qW;if(Te&&(Te=Te(l,ee))){jR(he,Te,p,ae);break e}rt&&rt(l,ne,ee),l==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Wc(ne,"number",ne.value)}switch(rt=ee?Mi(ee):window,l){case"focusin":(BR(rt)||rt.contentEditable==="true")&&(tu=rt,Pw=ee,Ef=null);break;case"focusout":Ef=Pw=tu=null;break;case"mousedown":Dw=!0;break;case"contextmenu":case"mouseup":case"dragend":Dw=!1,KR(he,p,ae);break;case"selectionchange":if(KW)break;case"keydown":case"keyup":KR(he,p,ae)}var Pe;if(Tw)e:{switch(l){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else eu?IR(l,p)&&(Fe="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(Fe="onCompositionStart");Fe&&(PR&&p.locale!=="ko"&&(eu||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&eu&&(Pe=Jc()):(Ds=ae,ya="value"in Ds?Ds.value:Ds.textContent,eu=!0)),rt=a0(ee,Fe),0<rt.length&&(Fe=new MR(Fe,l,null,p,ae),he.push({event:Fe,listeners:rt}),Pe?Fe.data=Pe:(Pe=NR(p),Pe!==null&&(Fe.data=Pe)))),(Pe=jW?$W(l,p):VW(l,p))&&(Fe=a0(ee,"onBeforeInput"),0<Fe.length&&(rt=new MR("onBeforeInput","beforeinput",null,p,ae),he.push({event:rt,listeners:Fe}),rt.data=Pe)),MG(he,l,ee,p,ae)}bP(he,u)})}function td(l,u,p){return{instance:l,listener:u,currentTarget:p}}function a0(l,u){for(var p=u+"Capture",g=[];l!==null;){var b=l,x=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||x===null||(b=ma(l,p),b!=null&&g.unshift(td(l,b,x)),b=ma(l,u),b!=null&&g.push(td(l,b,x))),l.tag===3)return g;l=l.return}return[]}function Au(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function xP(l,u,p,g,b){for(var x=u._reactName,R=[];p!==null&&p!==g;){var D=p,V=D.alternate,ee=D.stateNode;if(D=D.tag,V!==null&&V===g)break;D!==5&&D!==26&&D!==27||ee===null||(V=ee,b?(ee=ma(p,x),ee!=null&&R.unshift(td(p,ee,V))):b||(ee=ma(p,x),ee!=null&&R.push(td(p,ee,V)))),p=p.return}R.length!==0&&l.push({event:u,listeners:R})}var LG=/\r\n?/g,IG=/\u0000|\uFFFD/g;function wP(l){return(typeof l=="string"?l:""+l).replace(LG,`
`).replace(IG,"")}function SP(l,u){return u=wP(u),wP(l)===u}function l0(){}function wt(l,u,p,g,b,x){switch(p){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||ri(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&ri(l,""+g);break;case"className":Uc(l,"class",g);break;case"tabIndex":Uc(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Uc(l,p,g);break;case"style":vg(l,g,x);break;case"data":if(u!=="object"){Uc(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||p!=="href")){l.removeAttribute(p);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(p);break}g=Gc(""+g),l.setAttribute(p,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(p==="formAction"?(u!=="input"&&wt(l,u,"name",b.name,b,null),wt(l,u,"formEncType",b.formEncType,b,null),wt(l,u,"formMethod",b.formMethod,b,null),wt(l,u,"formTarget",b.formTarget,b,null)):(wt(l,u,"encType",b.encType,b,null),wt(l,u,"method",b.method,b,null),wt(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(p);break}g=Gc(""+g),l.setAttribute(p,g);break;case"onClick":g!=null&&(l.onclick=l0);break;case"onScroll":g!=null&&at("scroll",l);break;case"onScrollEnd":g!=null&&at("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(p=g.__html,p!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}p=Gc(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(p,""+g):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":g===!0?l.setAttribute(p,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(p,g):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(p,g):l.removeAttribute(p);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(p):l.setAttribute(p,g);break;case"popover":at("beforetoggle",l),at("toggle",l),zc(l,"popover",g);break;case"xlinkActuate":Oi(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Oi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Oi(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Oi(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Oi(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Oi(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":zc(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Aw.get(p)||p,zc(l,p,g))}}function nS(l,u,p,g,b,x){switch(p){case"style":vg(l,g,x);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(p=g.__html,p!=null){if(b.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof g=="string"?ri(l,g):(typeof g=="number"||typeof g=="bigint")&&ri(l,""+g);break;case"onScroll":g!=null&&at("scroll",l);break;case"onScrollEnd":g!=null&&at("scrollend",l);break;case"onClick":g!=null&&(l.onclick=l0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cg.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(b=p.endsWith("Capture"),u=p.slice(2,b?p.length-7:void 0),x=l[sr]||null,x=x!=null?x[p]:null,typeof x=="function"&&l.removeEventListener(u,x,b),typeof g=="function")){typeof x!="function"&&x!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(u,g,b);break e}p in l?l[p]=g:g===!0?l.setAttribute(p,""):zc(l,p,g)}}}function Fn(l,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",l),at("load",l);var g=!1,b=!1,x;for(x in p)if(p.hasOwnProperty(x)){var R=p[x];if(R!=null)switch(x){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:wt(l,u,x,R,p,null)}}b&&wt(l,u,"srcSet",p.srcSet,p,null),g&&wt(l,u,"src",p.src,p,null);return;case"input":at("invalid",l);var D=x=R=b=null,V=null,ee=null;for(g in p)if(p.hasOwnProperty(g)){var ae=p[g];if(ae!=null)switch(g){case"name":b=ae;break;case"type":R=ae;break;case"checked":V=ae;break;case"defaultChecked":ee=ae;break;case"value":x=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,u));break;default:wt(l,u,g,ae,p,null)}}gg(l,x,D,V,ee,R,b,!1),Hc(l);return;case"select":at("invalid",l),g=R=x=null;for(b in p)if(p.hasOwnProperty(b)&&(D=p[b],D!=null))switch(b){case"value":x=D;break;case"defaultValue":R=D;break;case"multiple":g=D;default:wt(l,u,b,D,p,null)}u=x,p=R,l.multiple=!!g,u!=null?da(l,!!g,u,!1):p!=null&&da(l,!!g,p,!0);return;case"textarea":at("invalid",l),x=b=g=null;for(R in p)if(p.hasOwnProperty(R)&&(D=p[R],D!=null))switch(R){case"value":g=D;break;case"defaultValue":b=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:wt(l,u,R,D,p,null)}Rl(l,g,b,x),Hc(l);return;case"option":for(V in p)if(p.hasOwnProperty(V)&&(g=p[V],g!=null))switch(V){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:wt(l,u,V,g,p,null)}return;case"dialog":at("beforetoggle",l),at("toggle",l),at("cancel",l),at("close",l);break;case"iframe":case"object":at("load",l);break;case"video":case"audio":for(g=0;g<ed.length;g++)at(ed[g],l);break;case"image":at("error",l),at("load",l);break;case"details":at("toggle",l);break;case"embed":case"source":case"link":at("error",l),at("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in p)if(p.hasOwnProperty(ee)&&(g=p[ee],g!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:wt(l,u,ee,g,p,null)}return;default:if(gf(u)){for(ae in p)p.hasOwnProperty(ae)&&(g=p[ae],g!==void 0&&nS(l,u,ae,g,p,void 0));return}}for(D in p)p.hasOwnProperty(D)&&(g=p[D],g!=null&&wt(l,u,D,g,p,null))}function NG(l,u,p,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,x=null,R=null,D=null,V=null,ee=null,ae=null;for(re in p){var he=p[re];if(p.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":V=he;default:g.hasOwnProperty(re)||wt(l,u,re,null,g,he)}}for(var ne in g){var re=g[ne];if(he=p[ne],g.hasOwnProperty(ne)&&(re!=null||he!=null))switch(ne){case"type":x=re;break;case"name":b=re;break;case"checked":ee=re;break;case"defaultChecked":ae=re;break;case"value":R=re;break;case"defaultValue":D=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,u));break;default:re!==he&&wt(l,u,ne,re,g,he)}}mf(l,R,D,V,ee,ae,x,b);return;case"select":re=R=D=ne=null;for(x in p)if(V=p[x],p.hasOwnProperty(x)&&V!=null)switch(x){case"value":break;case"multiple":re=V;default:g.hasOwnProperty(x)||wt(l,u,x,null,g,V)}for(b in g)if(x=g[b],V=p[b],g.hasOwnProperty(b)&&(x!=null||V!=null))switch(b){case"value":ne=x;break;case"defaultValue":D=x;break;case"multiple":R=x;default:x!==V&&wt(l,u,b,x,g,V)}u=D,p=R,g=re,ne!=null?da(l,!!p,ne,!1):!!g!=!!p&&(u!=null?da(l,!!p,u,!0):da(l,!!p,p?[]:"",!1));return;case"textarea":re=ne=null;for(D in p)if(b=p[D],p.hasOwnProperty(D)&&b!=null&&!g.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:wt(l,u,D,null,g,b)}for(R in g)if(b=g[R],x=p[R],g.hasOwnProperty(R)&&(b!=null||x!=null))switch(R){case"value":ne=b;break;case"defaultValue":re=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==x&&wt(l,u,R,b,g,x)}yg(l,ne,re);return;case"option":for(var He in p)if(ne=p[He],p.hasOwnProperty(He)&&ne!=null&&!g.hasOwnProperty(He))switch(He){case"selected":l.selected=!1;break;default:wt(l,u,He,null,g,ne)}for(V in g)if(ne=g[V],re=p[V],g.hasOwnProperty(V)&&ne!==re&&(ne!=null||re!=null))switch(V){case"selected":l.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:wt(l,u,V,ne,g,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in p)ne=p[$e],p.hasOwnProperty($e)&&ne!=null&&!g.hasOwnProperty($e)&&wt(l,u,$e,null,g,ne);for(ee in g)if(ne=g[ee],re=p[ee],g.hasOwnProperty(ee)&&ne!==re&&(ne!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:wt(l,u,ee,ne,g,re)}return;default:if(gf(u)){for(var St in p)ne=p[St],p.hasOwnProperty(St)&&ne!==void 0&&!g.hasOwnProperty(St)&&nS(l,u,St,void 0,g,ne);for(ae in g)ne=g[ae],re=p[ae],!g.hasOwnProperty(ae)||ne===re||ne===void 0&&re===void 0||nS(l,u,ae,ne,g,re);return}}for(var K in p)ne=p[K],p.hasOwnProperty(K)&&ne!=null&&!g.hasOwnProperty(K)&&wt(l,u,K,null,g,ne);for(he in g)ne=g[he],re=p[he],!g.hasOwnProperty(he)||ne===re||ne==null&&re==null||wt(l,u,he,ne,g,re)}var rS=null,iS=null;function c0(l){return l.nodeType===9?l:l.ownerDocument}function _P(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CP(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function sS(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var oS=null;function BG(){var l=window.event;return l&&l.type==="popstate"?l===oS?!1:(oS=l,!0):(oS=null,!1)}var AP=typeof setTimeout=="function"?setTimeout:void 0,jG=typeof clearTimeout=="function"?clearTimeout:void 0,kP=typeof Promise=="function"?Promise:void 0,$G=typeof queueMicrotask=="function"?queueMicrotask:typeof kP<"u"?function(l){return kP.resolve(null).then(l).catch(VG)}:AP;function VG(l){setTimeout(function(){throw l})}function Ia(l){return l==="head"}function EP(l,u){var p=u,g=0,b=0;do{var x=p.nextSibling;if(l.removeChild(p),x&&x.nodeType===8)if(p=x.data,p==="/$"){if(0<g&&8>g){p=g;var R=l.ownerDocument;if(p&1&&nd(R.documentElement),p&2&&nd(R.body),p&4)for(p=R.head,nd(p),R=p.firstChild;R;){var D=R.nextSibling,V=R.nodeName;R[Tl]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&R.rel.toLowerCase()==="stylesheet"||p.removeChild(R),R=D}}if(b===0){l.removeChild(x),ud(u);return}b--}else p==="$"||p==="$?"||p==="$!"?b++:g=p.charCodeAt(0)-48;else g=0;p=x}while(p);ud(u)}function aS(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":aS(p),hf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function FG(l,u,p,g){for(;l.nodeType===1;){var b=p;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[Tl])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(x=l.getAttribute("rel"),x==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(x!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(x=l.getAttribute("src"),(x!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&x&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var x=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===x)return l}else return l;if(l=hs(l.nextSibling),l===null)break}return null}function zG(l,u,p){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=hs(l.nextSibling),l===null))return null;return l}function lS(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function UG(l,u){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")u();else{var g=function(){u(),p.removeEventListener("DOMContentLoaded",g)};p.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function hs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var cS=null;function TP(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return l;u--}else p==="/$"&&u++}l=l.previousSibling}return null}function RP(l,u,p){switch(u=c0(p),l){case"html":if(l=u.documentElement,!l)throw Error(r(452));return l;case"head":if(l=u.head,!l)throw Error(r(453));return l;case"body":if(l=u.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function nd(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);hf(l)}var ji=new Map,MP=new Set;function u0(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Bo=Y.d;Y.d={f:HG,r:qG,D:WG,C:GG,L:KG,m:YG,X:JG,S:XG,M:QG};function HG(){var l=Bo.f(),u=t0();return l||u}function qG(l){var u=ua(l);u!==null&&u.tag===5&&u.type==="form"?XM(u):Bo.r(l)}var ku=typeof document>"u"?null:document;function OP(l,u,p){var g=ku;if(g&&typeof u=="string"&&u){var b=jr(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof p=="string"&&(b+='[crossorigin="'+p+'"]'),MP.has(b)||(MP.add(b),l={rel:l,crossOrigin:p,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),Fn(u,"link",l),sn(u),g.head.appendChild(u)))}}function WG(l){Bo.D(l),OP("dns-prefetch",l,null)}function GG(l,u){Bo.C(l,u),OP("preconnect",l,u)}function KG(l,u,p){Bo.L(l,u,p);var g=ku;if(g&&l&&u){var b='link[rel="preload"][as="'+jr(u)+'"]';u==="image"&&p&&p.imageSrcSet?(b+='[imagesrcset="'+jr(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(b+='[imagesizes="'+jr(p.imageSizes)+'"]')):b+='[href="'+jr(l)+'"]';var x=b;switch(u){case"style":x=Eu(l);break;case"script":x=Tu(l)}ji.has(x)||(l=f({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:l,as:u},p),ji.set(x,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(rd(x))||u==="script"&&g.querySelector(id(x))||(u=g.createElement("link"),Fn(u,"link",l),sn(u),g.head.appendChild(u)))}}function YG(l,u){Bo.m(l,u);var p=ku;if(p&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+jr(g)+'"][href="'+jr(l)+'"]',x=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Tu(l)}if(!ji.has(x)&&(l=f({rel:"modulepreload",href:l},u),ji.set(x,l),p.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(id(x)))return}g=p.createElement("link"),Fn(g,"link",l),sn(g),p.head.appendChild(g)}}}function XG(l,u,p){Bo.S(l,u,p);var g=ku;if(g&&l){var b=ha(g).hoistableStyles,x=Eu(l);u=u||"default";var R=b.get(x);if(!R){var D={loading:0,preload:null};if(R=g.querySelector(rd(x)))D.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":u},p),(p=ji.get(x))&&uS(l,p);var V=R=g.createElement("link");sn(V),Fn(V,"link",l),V._p=new Promise(function(ee,ae){V.onload=ee,V.onerror=ae}),V.addEventListener("load",function(){D.loading|=1}),V.addEventListener("error",function(){D.loading|=2}),D.loading|=4,h0(R,u,g)}R={type:"stylesheet",instance:R,count:1,state:D},b.set(x,R)}}}function JG(l,u){Bo.X(l,u);var p=ku;if(p&&l){var g=ha(p).hoistableScripts,b=Tu(l),x=g.get(b);x||(x=p.querySelector(id(b)),x||(l=f({src:l,async:!0},u),(u=ji.get(b))&&hS(l,u),x=p.createElement("script"),sn(x),Fn(x,"link",l),p.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(b,x))}}function QG(l,u){Bo.M(l,u);var p=ku;if(p&&l){var g=ha(p).hoistableScripts,b=Tu(l),x=g.get(b);x||(x=p.querySelector(id(b)),x||(l=f({src:l,async:!0,type:"module"},u),(u=ji.get(b))&&hS(l,u),x=p.createElement("script"),sn(x),Fn(x,"link",l),p.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(b,x))}}function PP(l,u,p,g){var b=(b=ye.current)?u0(b):null;if(!b)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Eu(p.href),p=ha(b).hoistableStyles,g=p.get(u),g||(g={type:"style",instance:null,count:0,state:null},p.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Eu(p.href);var x=ha(b).hoistableStyles,R=x.get(l);if(R||(b=b.ownerDocument||b,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(l,R),(x=b.querySelector(rd(l)))&&!x._p&&(R.instance=x,R.state.loading=5),ji.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ji.set(l,p),x||ZG(b,l,p,R.state))),u&&g===null)throw Error(r(528,""));return R}if(u&&g!==null)throw Error(r(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Tu(p),p=ha(b).hoistableScripts,g=p.get(u),g||(g={type:"script",instance:null,count:0,state:null},p.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Eu(l){return'href="'+jr(l)+'"'}function rd(l){return'link[rel="stylesheet"]['+l+"]"}function DP(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function ZG(l,u,p,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),Fn(u,"link",p),sn(u),l.head.appendChild(u))}function Tu(l){return'[src="'+jr(l)+'"]'}function id(l){return"script[async]"+l}function LP(l,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+jr(p.href)+'"]');if(g)return u.instance=g,sn(g),g;var b=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),sn(g),Fn(g,"style",b),h0(g,p.precedence,l),u.instance=g;case"stylesheet":b=Eu(p.href);var x=l.querySelector(rd(b));if(x)return u.state.loading|=4,u.instance=x,sn(x),x;g=DP(p),(b=ji.get(b))&&uS(g,b),x=(l.ownerDocument||l).createElement("link"),sn(x);var R=x;return R._p=new Promise(function(D,V){R.onload=D,R.onerror=V}),Fn(x,"link",g),u.state.loading|=4,h0(x,p.precedence,l),u.instance=x;case"script":return x=Tu(p.src),(b=l.querySelector(id(x)))?(u.instance=b,sn(b),b):(g=p,(b=ji.get(x))&&(g=f({},p),hS(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),sn(b),Fn(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,h0(g,p.precedence,l));return u.instance}function h0(l,u,p){for(var g=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,x=b,R=0;R<g.length;R++){var D=g[R];if(D.dataset.precedence===u)x=D;else if(x!==b)break}x?x.parentNode.insertBefore(l,x.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(l,u.firstChild))}function uS(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function hS(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var f0=null;function IP(l,u,p){if(f0===null){var g=new Map,b=f0=new Map;b.set(p,g)}else b=f0,g=b.get(p),g||(g=new Map,b.set(p,g));if(g.has(l))return g;for(g.set(l,null),p=p.getElementsByTagName(l),b=0;b<p.length;b++){var x=p[b];if(!(x[Tl]||x[Rn]||l==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var R=x.getAttribute(u)||"";R=l+R;var D=g.get(R);D?D.push(x):g.set(R,[x])}}return g}function NP(l,u,p){l=l.ownerDocument||l,l.head.insertBefore(p,u==="title"?l.querySelector("head > title"):null)}function eK(l,u,p){if(p===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function BP(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var sd=null;function tK(){}function nK(l,u,p){if(sd===null)throw Error(r(475));var g=sd;if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=Eu(p.href),x=l.querySelector(rd(b));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(g.count++,g=d0.bind(g),l.then(g,g)),u.state.loading|=4,u.instance=x,sn(x);return}x=l.ownerDocument||l,p=DP(p),(b=ji.get(b))&&uS(p,b),x=x.createElement("link"),sn(x);var R=x;R._p=new Promise(function(D,V){R.onload=D,R.onerror=V}),Fn(x,"link",p),u.instance=x}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(g.count++,u=d0.bind(g),l.addEventListener("load",u),l.addEventListener("error",u))}}function rK(){if(sd===null)throw Error(r(475));var l=sd;return l.stylesheets&&l.count===0&&fS(l,l.stylesheets),0<l.count?function(u){var p=setTimeout(function(){if(l.stylesheets&&fS(l,l.stylesheets),l.unsuspend){var g=l.unsuspend;l.unsuspend=null,g()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(p)}}:null}function d0(){if(this.count--,this.count===0){if(this.stylesheets)fS(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var p0=null;function fS(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,p0=new Map,u.forEach(iK,l),p0=null,d0.call(l))}function iK(l,u){if(!(u.state.loading&4)){var p=p0.get(l);if(p)var g=p.get(null);else{p=new Map,p0.set(l,p);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<b.length;x++){var R=b[x];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(p.set(R.dataset.precedence,R),g=R)}g&&p.set(null,g)}b=u.instance,R=b.getAttribute("data-precedence"),x=p.get(R)||g,x===g&&p.set(null,b),p.set(R,b),this.count++,g=d0.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),x?x.parentNode.insertBefore(b,x.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var od={$$typeof:k,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function sK(l,u,p,g,b,x,R,D){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=El(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.hiddenUpdates=El(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=x,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function jP(l,u,p,g,b,x,R,D,V,ee,ae,he){return l=new sK(l,u,p,R,D,V,ee,he),u=1,x===!0&&(u|=24),x=oi(3,null,null,u),l.current=x,x.stateNode=l,u=Gw(),u.refCount++,l.pooledCache=u,u.refCount++,x.memoizedState={element:g,isDehydrated:p,cache:u},Jw(x),l}function $P(l){return l?(l=su,l):su}function VP(l,u,p,g,b,x){b=$P(b),g.context===null?g.context=b:g.pendingContext=b,g=Sa(u),g.payload={element:p},x=x===void 0?null:x,x!==null&&(g.callback=x),p=_a(l,g,u),p!==null&&(hi(p,l,u),Nf(p,l,u))}function FP(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function dS(l,u){FP(l,u),(l=l.alternate)&&FP(l,u)}function zP(l){if(l.tag===13){var u=iu(l,67108864);u!==null&&hi(u,l,67108864),dS(l,67108864)}}var m0=!0;function oK(l,u,p,g){var b=F.T;F.T=null;var x=Y.p;try{Y.p=2,pS(l,u,p,g)}finally{Y.p=x,F.T=b}}function aK(l,u,p,g){var b=F.T;F.T=null;var x=Y.p;try{Y.p=8,pS(l,u,p,g)}finally{Y.p=x,F.T=b}}function pS(l,u,p,g){if(m0){var b=mS(g);if(b===null)tS(l,u,g,g0,p),HP(l,g);else if(cK(b,l,u,p,g))g.stopPropagation();else if(HP(l,g),u&4&&-1<lK.indexOf(l)){for(;b!==null;){var x=ua(b);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var R=_r(x.pendingLanes);if(R!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;R;){var V=1<<31-Be(R);D.entanglements[1]|=V,R&=~V}js(x),(bt&6)===0&&(Zg=tr()+500,Zf(0))}}break;case 13:D=iu(x,2),D!==null&&hi(D,x,2),t0(),dS(x,2)}if(x=mS(g),x===null&&tS(l,u,g,g0,p),x===b)break;b=x}b!==null&&g.stopPropagation()}else tS(l,u,g,null,p)}}function mS(l){return l=Kc(l),gS(l)}var g0=null;function gS(l){if(g0=null,l=ca(l),l!==null){var u=s(l);if(u===null)l=null;else{var p=u.tag;if(p===13){if(l=o(u),l!==null)return l;l=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return g0=l,null}function UP(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(of()){case Al:return 2;case Rs:return 8;case Ms:case $c:return 32;case kl:return 268435456;default:return 32}default:return 32}}var yS=!1,Na=null,Ba=null,ja=null,ad=new Map,ld=new Map,$a=[],lK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function HP(l,u){switch(l){case"focusin":case"focusout":Na=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":ad.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ld.delete(u.pointerId)}}function cd(l,u,p,g,b,x){return l===null||l.nativeEvent!==x?(l={blockedOn:u,domEventName:p,eventSystemFlags:g,nativeEvent:x,targetContainers:[b]},u!==null&&(u=ua(u),u!==null&&zP(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function cK(l,u,p,g,b){switch(u){case"focusin":return Na=cd(Na,l,u,p,g,b),!0;case"dragenter":return Ba=cd(Ba,l,u,p,g,b),!0;case"mouseover":return ja=cd(ja,l,u,p,g,b),!0;case"pointerover":var x=b.pointerId;return ad.set(x,cd(ad.get(x)||null,l,u,p,g,b)),!0;case"gotpointercapture":return x=b.pointerId,ld.set(x,cd(ld.get(x)||null,l,u,p,g,b)),!0}return!1}function qP(l){var u=ca(l.target);if(u!==null){var p=s(u);if(p!==null){if(u=p.tag,u===13){if(u=o(p),u!==null){l.blockedOn=u,og(l.priority,function(){if(p.tag===13){var g=ui();g=af(g);var b=iu(p,g);b!==null&&hi(b,p,g),dS(p,g)}});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function y0(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var p=mS(l.nativeEvent);if(p===null){p=l.nativeEvent;var g=new p.constructor(p.type,p);yf=g,p.target.dispatchEvent(g),yf=null}else return u=ua(p),u!==null&&zP(u),l.blockedOn=p,!1;u.shift()}return!0}function WP(l,u,p){y0(l)&&p.delete(u)}function uK(){yS=!1,Na!==null&&y0(Na)&&(Na=null),Ba!==null&&y0(Ba)&&(Ba=null),ja!==null&&y0(ja)&&(ja=null),ad.forEach(WP),ld.forEach(WP)}function b0(l,u){l.blockedOn===u&&(l.blockedOn=null,yS||(yS=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,uK)))}var v0=null;function GP(l){v0!==l&&(v0=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){v0===l&&(v0=null);for(var u=0;u<l.length;u+=3){var p=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(gS(g||p)===null)continue;break}var x=ua(p);x!==null&&(l.splice(u,3),u-=3,g1(x,{pending:!0,data:b,method:p.method,action:g},g,b))}}))}function ud(l){function u(V){return b0(V,l)}Na!==null&&b0(Na,l),Ba!==null&&b0(Ba,l),ja!==null&&b0(ja,l),ad.forEach(u),ld.forEach(u);for(var p=0;p<$a.length;p++){var g=$a[p];g.blockedOn===l&&(g.blockedOn=null)}for(;0<$a.length&&(p=$a[0],p.blockedOn===null);)qP(p),p.blockedOn===null&&$a.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(g=0;g<p.length;g+=3){var b=p[g],x=p[g+1],R=b[sr]||null;if(typeof x=="function")R||GP(p);else if(R){var D=null;if(x&&x.hasAttribute("formAction")){if(b=x,R=x[sr]||null)D=R.formAction;else if(gS(b)!==null)continue}else D=R.action;typeof D=="function"?p[g+1]=D:(p.splice(g,3),g-=3),GP(p)}}}function bS(l){this._internalRoot=l}x0.prototype.render=bS.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(r(409));var p=u.current,g=ui();VP(p,g,l,u,null,null)},x0.prototype.unmount=bS.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;VP(l.current,2,null,l,null,null),t0(),u[la]=null}};function x0(l){this._internalRoot=l}x0.prototype.unstable_scheduleHydration=function(l){if(l){var u=cf();l={blockedOn:null,target:l,priority:u};for(var p=0;p<$a.length&&u!==0&&u<$a[p].priority;p++);$a.splice(p,0,l),p===0&&qP(l)}};var KP=e.version;if(KP!=="19.1.1")throw Error(r(527,KP,"19.1.1"));Y.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var hK={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var w0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!w0.isDisabled&&w0.supportsFiber)try{oe=w0.inject(hK),me=w0}catch{}}return fd.createRoot=function(l,u){if(!i(l))throw Error(r(299));var p=!1,g="",b=uO,x=hO,R=fO,D=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(D=u.unstable_transitionCallbacks)),u=jP(l,1,!1,null,null,p,g,b,x,R,D,null),l[la]=u.current,eS(l),new bS(u)},fd.hydrateRoot=function(l,u,p){if(!i(l))throw Error(r(299));var g=!1,b="",x=uO,R=hO,D=fO,V=null,ee=null;return p!=null&&(p.unstable_strictMode===!0&&(g=!0),p.identifierPrefix!==void 0&&(b=p.identifierPrefix),p.onUncaughtError!==void 0&&(x=p.onUncaughtError),p.onCaughtError!==void 0&&(R=p.onCaughtError),p.onRecoverableError!==void 0&&(D=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(V=p.unstable_transitionCallbacks),p.formState!==void 0&&(ee=p.formState)),u=jP(l,1,!0,u,p??null,g,b,x,R,D,V,ee),u.context=$P(null),p=u.current,g=ui(),g=af(g),b=Sa(g),b.callback=null,_a(p,b,g),p=g,u.current.lanes=p,ss(u,p),js(u),l[la]=u.current,eS(l),new x0(u)},fd.version="19.1.1",fd}var iD;function wK(){if(iD)return wS.exports;iD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wS.exports=xK(),wS.exports}var SK=wK(),_K=t=>Array.from(t).map(n=>n.getModelContext()).sort((n,r)=>(r.priority??0)-(n.priority??0)).reduce((n,r)=>{if(r.system&&(n.system?n.system+=`

${r.system}`:n.system=r.system),r.tools)for(const[i,s]of Object.entries(r.tools)){const o=n.tools?.[i];if(o&&o!==s)throw new Error(`You tried to define a tool with the name ${i}, but it already exists.`);n.tools||(n.tools={}),n.tools[i]=s}return r.config&&(n.config={...n.config,...r.config}),r.callSettings&&(n.callSettings={...n.callSettings,...r.callSettings}),n},{}),xB=class{_providers=new Set;getModelContext(){return _K(this._providers)}registerModelContextProvider(t){this._providers.add(t);const e=t.subscribe?.(()=>{this.notifySubscribers()});return this.notifySubscribers(),()=>{this._providers.delete(t),e?.(),this.notifySubscribers()}}_subscribers=new Set;notifySubscribers(){for(const t of this._subscribers)t()}subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}},wB=class{_contextProvider=new xB;registerModelContextProvider(t){return this._contextProvider.registerModelContextProvider(t)}},CK=class{_subscribers=new Set;subscribe(t){return this._subscribers.add(t),()=>this._subscribers.delete(t)}waitForUpdate(){return new Promise(t=>{const e=this.subscribe(()=>{e(),t()})})}_notifySubscribers(){const t=[];for(const e of this._subscribers)try{e()}catch(n){t.push(n)}if(t.length>0)throw t.length===1?t[0]:new AggregateError(t)}},AK=t=>t.status.type==="complete",SB=class extends CK{isEditing=!0;get attachmentAccept(){return this.getAttachmentAdapter()?.accept??"*"}_attachments=[];get attachments(){return this._attachments}setAttachments(t){this._attachments=t,this._notifySubscribers()}get isEmpty(){return!this.text.trim()&&!this.attachments.length}_text="";get text(){return this._text}_role="user";get role(){return this._role}_runConfig={};get runConfig(){return this._runConfig}setText(t){this._text!==t&&(this._text=t,this._notifySubscribers())}setRole(t){this._role!==t&&(this._role=t,this._notifySubscribers())}setRunConfig(t){this._runConfig!==t&&(this._runConfig=t,this._notifySubscribers())}_emptyTextAndAttachments(){this._attachments=[],this._text="",this._notifySubscribers()}async _onClearAttachments(){const t=this.getAttachmentAdapter();t&&await Promise.all(this._attachments.map(e=>t.remove(e)))}async reset(){if(this._attachments.length===0&&this._text===""&&this._role==="user"&&Object.keys(this._runConfig).length===0)return;this._role="user",this._runConfig={};const t=this._onClearAttachments();this._emptyTextAndAttachments(),await t}async clearAttachments(){const t=this._onClearAttachments();this.setAttachments([]),await t}async send(){const t=this.getAttachmentAdapter(),e=t&&this.attachments.length>0?Promise.all(this.attachments.map(async i=>AK(i)?i:await t.send(i))):[],n=this.text;this._emptyTextAndAttachments();const r={createdAt:new Date,role:this.role,content:n?[{type:"text",text:n}]:[],attachments:await e,runConfig:this.runConfig,metadata:{custom:{}}};this.handleSend(r),this._notifyEventSubscribers("send")}cancel(){this.handleCancel()}async addAttachment(t){const e=this.getAttachmentAdapter();if(!e)throw new Error("Attachments are not supported");const n=i=>{const s=this._attachments.findIndex(o=>o.id===i.id);s!==-1?this._attachments=[...this._attachments.slice(0,s),i,...this._attachments.slice(s+1)]:this._attachments=[...this._attachments,i],this._notifySubscribers()},r=e.add({file:t});if(Symbol.asyncIterator in r)for await(const i of r)n(i);else n(await r);this._notifyEventSubscribers("attachment-add"),this._notifySubscribers()}async removeAttachment(t){const e=this.getAttachmentAdapter();if(!e)throw new Error("Attachments are not supported");const n=this._attachments.findIndex(i=>i.id===t);if(n===-1)throw new Error("Attachment not found");const r=this._attachments[n];await e.remove(r),this._attachments=[...this._attachments.slice(0,n),...this._attachments.slice(n+1)],this._notifySubscribers()}_eventSubscribers=new Map;_notifyEventSubscribers(t){const e=this._eventSubscribers.get(t);if(e)for(const n of e)n()}unstable_on(t,e){const n=this._eventSubscribers.get(t);return n?n.add(e):this._eventSubscribers.set(t,new Set([e])),()=>{const r=this._eventSubscribers.get(t);r&&r.delete(e)}}},_B=class extends SB{constructor(t){super(),this.runtime=t,this.connect()}_canCancel=!1;get canCancel(){return this._canCancel}get attachments(){return super.attachments}getAttachmentAdapter(){return this.runtime.adapters?.attachments}connect(){return this.runtime.subscribe(()=>{this.canCancel!==this.runtime.capabilities.cancel&&(this._canCancel=this.runtime.capabilities.cancel,this._notifySubscribers())})}async handleSend(t){this.runtime.append({...t,parentId:this.runtime.messages.at(-1)?.id??null,sourceId:null})}async handleCancel(){this.runtime.cancelRun()}};let kK=(t,e=21)=>(n=e)=>{let r="",i=n|0;for(;i--;)r+=t[Math.random()*t.length|0];return r};var ax=kK("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7),EK="__optimistic__",TK=()=>`${EK}${ax()}`,CB=Object.freeze({type:"running"}),AB=Object.freeze({type:"complete",reason:"unknown"}),RK=Object.freeze({type:"requires-action",reason:"tool-calls"}),MK=t=>t===CB||t===AB,bk=(t,e,n)=>t&&e?CB:n?RK:AB,ql={exports:{}},sD;function OK(){if(sD)return ql.exports;sD=1;const t=typeof Buffer<"u",e=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(a,c,h){h==null&&c!==null&&typeof c=="object"&&(h=c,c=void 0),t&&Buffer.isBuffer(a)&&(a=a.toString()),a&&a.charCodeAt(0)===65279&&(a=a.slice(1));const f=JSON.parse(a,c);if(f===null||typeof f!="object")return f;const d=h&&h.protoAction||"error",m=h&&h.constructorAction||"error";if(d==="ignore"&&m==="ignore")return f;if(d!=="ignore"&&m!=="ignore"){if(e.test(a)===!1&&n.test(a)===!1)return f}else if(d!=="ignore"&&m==="ignore"){if(e.test(a)===!1)return f}else if(n.test(a)===!1)return f;return i(f,{protoAction:d,constructorAction:m,safe:h&&h.safe})}function i(a,{protoAction:c="error",constructorAction:h="error",safe:f}={}){let d=[a];for(;d.length;){const m=d;d=[];for(const y of m){if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"__proto__")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.__proto__}if(h!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"constructor")&&Object.prototype.hasOwnProperty.call(y.constructor,"prototype")){if(f===!0)return null;if(h==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.constructor}for(const v in y){const w=y[v];w&&typeof w=="object"&&d.push(w)}}}return a}function s(a,c,h){const{stackTraceLimit:f}=Error;Error.stackTraceLimit=0;try{return r(a,c,h)}finally{Error.stackTraceLimit=f}}function o(a,c){const{stackTraceLimit:h}=Error;Error.stackTraceLimit=0;try{return r(a,c,{safe:!0})}catch{return}finally{Error.stackTraceLimit=h}}return ql.exports=s,ql.exports.default=s,ql.exports.parse=s,ql.exports.safeParse=o,ql.exports.scan=i,ql.exports}var PK=OK();const oD=Mc(PK);function DK(t){const e=["ROOT"];let n=-1,r=null;const i=[];let s;function o(){s!==void 0&&(i.push(JSON.parse('"'+s+'"')),s=void 0)}function a(d,m,y){switch(d){case'"':{n=m,e.pop(),e.push(y),e.push("INSIDE_STRING"),o();break}case"f":case"t":case"n":{n=m,r=m,e.pop(),e.push(y),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(y),e.push("INSIDE_NUMBER"),o();break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=m,e.pop(),e.push(y),e.push("INSIDE_NUMBER"),o();break}case"{":{n=m,e.pop(),e.push(y),e.push("INSIDE_OBJECT_START"),o();break}case"[":{n=m,e.pop(),e.push(y),e.push("INSIDE_ARRAY_START"),o();break}}}function c(d,m){switch(d){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=m,e.pop(),s=i.pop();break}}}function h(d,m){switch(d){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA"),s=(Number(s)+1).toString();break}case"]":{n=m,e.pop(),s=i.pop();break}}}for(let d=0;d<t.length;d++){const m=t[d];switch(e[e.length-1]){case"ROOT":a(m,d,"FINISH");break;case"INSIDE_OBJECT_START":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY"),s="";break}case"}":{n=d,e.pop(),s=i.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY"),s="";break}}break}case"INSIDE_OBJECT_KEY":{switch(m){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}case"\\":{e.push("INSIDE_STRING_ESCAPE"),s+=m;break}default:{s+=m;break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(m){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(m,d,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{c(m,d);break}case"INSIDE_STRING":{switch(m){case'"':{e.pop(),n=d,s=i.pop();break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=d}break}case"INSIDE_ARRAY_START":{switch(m){case"]":{n=d,e.pop(),s=i.pop();break}default:{n=d,s="0",a(m,d,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(m){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA"),s=(Number(s)+1).toString();break}case"]":{n=d,e.pop(),s=i.pop();break}default:{n=d;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(m,d,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),e[e.length-1]==="INSIDE_STRING"?n=d:e[e.length-1]==="INSIDE_OBJECT_KEY"&&(s+=m);break}case"INSIDE_NUMBER":{switch(m){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=d;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),s=i.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(m,d),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&c(m,d);break}case"}":{e.pop(),s=i.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&c(m,d);break}case"]":{e.pop(),s=i.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(m,d);break}default:{e.pop(),s=i.pop();break}}break}case"INSIDE_LITERAL":{const v=t.substring(r,d+1);!"false".startsWith(v)&&!"true".startsWith(v)&&!"null".startsWith(v)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?c(m,d):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&h(m,d)):n=d;break}}}let f=t.slice(0,n+1);for(let d=e.length-1;d>=0;d--)switch(e[d]){case"INSIDE_STRING":{f+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{f+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{f+="]";break}case"INSIDE_LITERAL":{const y=t.substring(r,t.length);"true".startsWith(y)?f+="true".slice(y.length):"false".startsWith(y)?f+="false".slice(y.length):"null".startsWith(y)&&(f+="null".slice(y.length))}}return[f,i]}var AS=Symbol("aui.parse-partial-json-object.meta"),LK=t=>{if(t.length===0)return{[AS]:{state:"partial",partialPath:[]}};try{const e=oD.parse(t);if(typeof e!="object"||e===null)throw new Error("argsText is expected to be an object");return e[AS]={state:"complete",partialPath:[]},e}catch{try{const[e,n]=DK(t),r=oD.parse(e);if(typeof r!="object"||r===null)throw new Error("argsText is expected to be an object");return r[AS]={state:"partial",partialPath:n},r}catch{return}}},lx=(t,e,n)=>{const{role:r,id:i,createdAt:s,attachments:o,status:a,metadata:c}=t,h={id:i??e,createdAt:s??new Date},f=typeof t.content=="string"?[{type:"text",text:t.content}]:t.content,d=({image:m,...y})=>m.match(/^data:image\/(png|jpeg|jpg|gif|webp);base64,(.*)$/)?{...y,image:m}:(console.warn("Invalid image data format detected"),null);if(r!=="user"&&o?.length)throw new Error("attachments are only supported for user messages");if(r!=="assistant"&&a)throw new Error("status is only supported for assistant messages");if(r!=="assistant"&&c?.steps)throw new Error("metadata.steps is only supported for assistant messages");switch(r){case"assistant":return{...h,role:r,content:f.map(m=>{const y=m.type;switch(y){case"text":case"reasoning":return m.text.trim().length===0?null:m;case"file":case"source":return m;case"image":return d(m);case"tool-call":{const{parentId:v,...w}=m,_={...w,toolCallId:m.toolCallId??"tool-"+ax(),...v!==void 0&&{parentId:v}};return m.args?{..._,args:m.args,argsText:m.argsText??JSON.stringify(m.args)}:{..._,args:LK(m.argsText??"")??{},argsText:m.argsText??""}}default:{const v=y;throw new Error(`Unsupported assistant message part type: ${v}`)}}}).filter(m=>!!m),status:a??n,metadata:{unstable_state:c?.unstable_state??null,unstable_annotations:c?.unstable_annotations??[],unstable_data:c?.unstable_data??[],custom:c?.custom??{},steps:c?.steps??[]}};case"user":return{...h,role:r,content:f.map(m=>{const y=m.type;switch(y){case"text":case"image":case"audio":case"file":return m;default:{const v=y;throw new Error(`Unsupported user message part type: ${v}`)}}}),attachments:o??[],metadata:{custom:c?.custom??{}}};case"system":if(f.length!==1||f[0].type!=="text")throw new Error("System messages must have exactly one text message part.");return{...h,role:r,content:f,metadata:{custom:c?.custom??{}}};default:{const m=r;throw new Error(`Unknown message role: ${m}`)}}},vk={fromArray:t=>{const e=t.map(n=>lx(n,ax(),bk(!1,!1,!1)));return{messages:e.map((n,r)=>({parentId:r>0?e[r-1].id:null,message:n}))}}},Gy=t=>t.next?Gy(t.next):"current"in t?t:null,IK=class{constructor(t){this.func=t}_value=null;get value(){return this._value===null&&(this._value=this.func()),this._value}dirty(){this._value=null}},xk=class{messages=new Map;head=null;root={children:[],next:null};performOp(t,e,n){const r=e.prev??this.root,i=t??this.root;if(!(n==="relink"&&r===i)){if(n!=="link"&&(r.children=r.children.filter(s=>s!==e.current.id),r.next===e)){const s=r.children.at(-1),o=s?this.messages.get(s):null;if(o===void 0)throw new Error("MessageRepository(performOp/cut): Fallback sibling message not found. This is likely an internal bug in assistant-ui.");r.next=o}if(n!=="cut"){for(let s=t;s;s=s.prev)if(s.current.id===e.current.id)throw new Error("MessageRepository(performOp/link): A message with the same id already exists in the parent tree. This error occurs if the same message id is found multiple times. This is likely an internal bug in assistant-ui.");i.children=[...i.children,e.current.id],(Gy(e)===this.head||i.next===null)&&(i.next=e),e.prev=t}}}_messages=new IK(()=>{const t=new Array(this.head?.level??0);for(let e=this.head;e;e=e.prev)t[e.level]=e.current;return t});get headId(){return this.head?.current.id??null}getMessages(){return this._messages.value}addOrUpdateMessage(t,e){const n=this.messages.get(e.id),r=t?this.messages.get(t):null;if(r===void 0)throw new Error("MessageRepository(addOrUpdateMessage): Parent message not found. This is likely an internal bug in assistant-ui.");if(n){n.current=e,this.performOp(r,n,"relink"),this._messages.dirty();return}const i={prev:r,current:e,next:null,children:[],level:r?r.level+1:0};this.messages.set(e.id,i),this.performOp(r,i,"link"),this.head===r&&(this.head=i),this._messages.dirty()}getMessage(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(updateMessage): Message not found. This is likely an internal bug in assistant-ui.");return{parentId:e.prev?.current.id??null,message:e.current}}appendOptimisticMessage(t,e){let n;do n=TK();while(this.messages.has(n));return this.addOrUpdateMessage(t,lx(e,n,{type:"running"})),n}deleteMessage(t,e){const n=this.messages.get(t);if(!n)throw new Error("MessageRepository(deleteMessage): Message not found. This is likely an internal bug in assistant-ui.");const r=e===void 0?n.prev:e===null?null:this.messages.get(e);if(r===void 0)throw new Error("MessageRepository(deleteMessage): Replacement not found. This is likely an internal bug in assistant-ui.");for(const i of n.children){const s=this.messages.get(i);if(!s)throw new Error("MessageRepository(deleteMessage): Child message not found. This is likely an internal bug in assistant-ui.");this.performOp(r,s,"relink")}this.performOp(null,n,"cut"),this.messages.delete(t),this.head===n&&(this.head=Gy(r??this.root)),this._messages.dirty()}getBranches(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(getBranches): Message not found. This is likely an internal bug in assistant-ui.");const{children:n}=e.prev??this.root;return n}switchToBranch(t){const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(switchToBranch): Branch not found. This is likely an internal bug in assistant-ui.");const n=e.prev??this.root;n.next=e,this.head=Gy(e),this._messages.dirty()}resetHead(t){if(t===null){this.clear();return}const e=this.messages.get(t);if(!e)throw new Error("MessageRepository(resetHead): Branch not found. This is likely an internal bug in assistant-ui.");if(e.children.length>0){const n=r=>{for(const i of r.children){const s=this.messages.get(i);s&&(n(s),this.messages.delete(i))}};n(e),e.children=[],e.next=null}this.head=e;for(let n=e;n;n=n.prev)n.prev&&(n.prev.next=n);this._messages.dirty()}clear(){this.messages.clear(),this.head=null,this.root={children:[],next:null},this._messages.dirty()}export(){const t=[];for(const[,e]of this.messages)t.push({message:e.current,parentId:e.prev?.current.id??null});return{headId:this.head?.current.id??null,messages:t}}import({headId:t,messages:e}){for(const{message:n,parentId:r}of e)this.addOrUpdateMessage(r,n);this.resetHead(t??e.at(-1)?.message.id??null)}},cx=class{_subscriptions=new Set;_connection;get isConnected(){return!!this._connection}notifySubscribers(){for(const t of this._subscriptions)t()}_updateConnection(){if(this._subscriptions.size>0){if(this._connection)return;this._connection=this._connect()}else this._connection?.(),this._connection=void 0}subscribe(t){return this._subscriptions.add(t),this._updateConnection(),()=>{this._subscriptions.delete(t),this._updateConnection()}}},vs=Symbol("skip-update"),wk=class extends cx{constructor(t){super(),this.binding=t}get path(){return this.binding.path}_previousStateDirty=!0;_previousState;getState=()=>{if(!this.isConnected||this._previousStateDirty){const t=this.binding.getState();t!==vs&&(this._previousState=t),this._previousStateDirty=!1}if(this._previousState===void 0)throw new Error("Entry not available in the store");return this._previousState};_connect(){const t=()=>{this._previousStateDirty=!0,this.notifySubscribers()};return this.binding.subscribe(t)}},_0=class{constructor(t,e){this._core=t,this._threadListBinding=e,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.switchTo=this.switchTo.bind(this),this.rename=this.rename.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this),this.delete=this.delete.bind(this),this.initialize=this.initialize.bind(this),this.generateTitle=this.generateTitle.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getState=this.getState.bind(this),this.detach=this.detach.bind(this)}getState(){return this._core.getState()}switchTo(){const t=this._core.getState();return this._threadListBinding.switchToThread(t.id)}rename(t){const e=this._core.getState();return this._threadListBinding.rename(e.id,t)}archive(){const t=this._core.getState();return this._threadListBinding.archive(t.id)}unarchive(){const t=this._core.getState();return this._threadListBinding.unarchive(t.id)}delete(){const t=this._core.getState();return this._threadListBinding.delete(t.id)}initialize(){const t=this._core.getState();return this._threadListBinding.initialize(t.id)}generateTitle(){const t=this._core.getState();return this._threadListBinding.generateTitle(t.id)}unstable_on(t,e){let n=this._core.getState().isMain,r=this._core.getState().id;return this.subscribe(()=>{const i=this._core.getState(),s=i.isMain,o=i.id;n===s&&r===o||(n=s,r=o,!(t==="switched-to"&&!s)&&(t==="switched-away"&&s||e()))})}subscribe(t){return this._core.subscribe(t)}detach(){const t=this._core.getState();this._threadListBinding.detach(t.id)}__internal_getRuntime(){return this}};function NK(t,e){if(t===void 0&&e===void 0)return!0;if(t===void 0||e===void 0)return!1;for(const n of Object.keys(t)){const r=t[n],i=e[n];if(!Object.is(r,i))return!1}return!0}var ps=class extends cx{constructor(t){super(),this.binding=t;const e=t.getState();if(e===vs)throw new Error("Entry not available in the store");this._previousState=e}get path(){return this.binding.path}_previousState;getState=()=>(this.isConnected||this._syncState(),this._previousState);_syncState(){const t=this.binding.getState();return t===vs||NK(t,this._previousState)?!1:(this._previousState=t,!0)}_connect(){const t=()=>{this._syncState()&&this.notifySubscribers()};return this.binding.subscribe(t)}},kh=Symbol("innerMessage"),BK=t=>t[kh],Fp=t=>t.content.filter(n=>n.type==="text").map(n=>n.text).join(`

`),kB=class{constructor(t){this._core=t,this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.getState=this.getState.bind(this),this.remove=this.remove.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this._core.getState()}subscribe(t){return this._core.subscribe(t)}},EB=class extends kB{constructor(t,e){super(t),this._composerApi=e}remove(){const t=this._composerApi.getState();if(!t)throw new Error("Composer is not available");return t.removeAttachment(this.getState().id)}},jK=class extends EB{get source(){return"thread-composer"}},$K=class extends EB{get source(){return"edit-composer"}},VK=class extends kB{get source(){return"message"}constructor(t){super(t)}remove(){throw new Error("Message attachments cannot be removed")}},TB=class extends cx{constructor(t){super(),this.config=t}getState(){return this.config.binding.getState()}outerSubscribe(t){return this.config.binding.subscribe(t)}_connect(){const t=()=>{this.notifySubscribers()};let e=this.config.binding.getState(),n=e?.unstable_on(this.config.event,t);const r=()=>{const s=this.config.binding.getState();s!==e&&(e=s,n?.(),n=this.config.binding.getState()?.unstable_on(this.config.event,t))},i=this.outerSubscribe(r);return()=>{i?.(),n?.()}}},RB=Object.freeze([]),MB=Object.freeze({}),FK=t=>Object.freeze({type:"thread",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,attachments:t?.attachments??RB,text:t?.text??"",role:t?.role??"user",runConfig:t?.runConfig??MB,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""}),zK=t=>Object.freeze({type:"edit",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,text:t?.text??"",role:t?.role??"user",attachments:t?.attachments??RB,runConfig:t?.runConfig??MB,attachmentAccept:t?.attachmentAccept??"",value:t?.text??""}),OB=class{constructor(t){this._core=t}get path(){return this._core.path}__internal_bindMethods(){this.setText=this.setText.bind(this),this.setRunConfig=this.setRunConfig.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.addAttachment=this.addAttachment.bind(this),this.reset=this.reset.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.send=this.send.bind(this),this.cancel=this.cancel.bind(this),this.setRole=this.setRole.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_on=this.unstable_on.bind(this)}setText(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setText(t)}setRunConfig(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setRunConfig(t)}addAttachment(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");return e.addAttachment(t)}reset(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.reset()}clearAttachments(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.clearAttachments()}send(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.send()}cancel(){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.cancel()}setRole(t){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.setRole(t)}subscribe(t){return this._core.subscribe(t)}_eventSubscriptionSubjects=new Map;unstable_on(t,e){let n=this._eventSubscriptionSubjects.get(t);return n||(n=new TB({event:t,binding:this._core}),this._eventSubscriptionSubjects.set(t,n)),n.subscribe(e)}},UK=class extends OB{get path(){return this._core.path}get type(){return"thread"}_getState;constructor(t){const e=new wk({path:t.path,getState:()=>FK(t.getState()),subscribe:n=>t.subscribe(n)});super({path:t.path,getState:()=>t.getState(),subscribe:n=>e.subscribe(n)}),this._getState=e.getState.bind(e),this.__internal_bindMethods()}getState(){return this._getState()}getAttachmentByIndex(t){return new jK(new ps({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:t},ref:this.path.ref+`${this.path.ref}.attachments[${t}]`},getState:()=>{const n=this.getState().attachments[t];return n?{...n,source:"thread-composer"}:vs},subscribe:e=>this._core.subscribe(e)}),this._core)}},HK=class extends OB{constructor(t,e){const n=new wk({path:t.path,getState:()=>zK(t.getState()),subscribe:r=>t.subscribe(r)});super({path:t.path,getState:()=>t.getState(),subscribe:r=>n.subscribe(r)}),this._beginEdit=e,this._getState=n.getState.bind(n),this.__internal_bindMethods()}get path(){return this._core.path}get type(){return"edit"}_getState;__internal_bindMethods(){super.__internal_bindMethods(),this.beginEdit=this.beginEdit.bind(this)}getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(t){return new $K(new ps({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:t},ref:this.path.ref+`${this.path.ref}.attachments[${t}]`},getState:()=>{const n=this.getState().attachments[t];return n?{...n,source:"edit-composer"}:vs},subscribe:e=>this._core.subscribe(e)}),this._core)}},aD=Symbol.for("aui.tool-response"),qK=class P_{get[aD](){return!0}artifact;result;isError;constructor(e){e.artifact!==void 0&&(this.artifact=e.artifact),this.result=e.result,this.isError=e.isError??!1}static[Symbol.hasInstance](e){return typeof e=="object"&&e!==null&&aD in e}static toResponse(e){return e instanceof P_?e:new P_({result:e===void 0?"<no result>":e})}},lD=class{constructor(t,e,n){this.contentBinding=t,this.messageApi=e,this.threadApi=n,this.__internal_bindMethods()}get path(){return this.contentBinding.path}__internal_bindMethods(){this.addToolResult=this.addToolResult.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this.contentBinding.getState()}addToolResult(t){const e=this.contentBinding.getState();if(!e)throw new Error("Message part is not available");if(e.type!=="tool-call")throw new Error("Tried to add tool result to non-tool message part");if(!this.messageApi)throw new Error("Message API is not available. This is likely a bug in assistant-ui.");if(!this.threadApi)throw new Error("Thread API is not available");const n=this.messageApi.getState();if(!n)throw new Error("Message is not available");const r=e.toolName,i=e.toolCallId,s=qK.toResponse(t);this.threadApi.getState().addToolResult({messageId:n.id,toolName:r,toolCallId:i,result:s.result,artifact:s.artifact,isError:s.isError})}subscribe(t){return this.contentBinding.subscribe(t)}},Nb=class extends cx{constructor(t){super(),this.binding=t}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(t){return this.binding.subscribe(t)}_connect(){const t=()=>{this.notifySubscribers()};let e=this.binding.getState(),n=e?.subscribe(t);const r=()=>{const s=this.binding.getState();s!==e&&(e=s,n?.(),n=this.binding.getState()?.subscribe(t),t())},i=this.outerSubscribe(r);return()=>{i?.(),n?.()}}},C0=Object.freeze({type:"complete"}),WK=(t,e,n)=>{if(t.role!=="assistant")return C0;if(n.type==="tool-call")return n.result?C0:t.status;const r=e===Math.max(0,t.content.length-1);return t.status.type==="requires-action"?C0:r?t.status:C0},cD=(t,e)=>{const n=t.content[e];if(!n)return vs;const r=WK(t,e,n);return Object.freeze({...n,[kh]:n[kh],status:r})},GK=class{constructor(t,e){this._core=t,this._threadBinding=e,this.composer=new HK(new Nb({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"edit"},getState:this._getEditComposerRuntimeCore,subscribe:n=>this._threadBinding.subscribe(n)}),()=>this._threadBinding.getState().beginEdit(this._core.getState().id)),this.__internal_bindMethods()}get path(){return this._core.path}__internal_bindMethods(){this.reload=this.reload.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getMessagePartByIndex=this.getMessagePartByIndex.bind(this),this.getMessagePartByToolCallId=this.getMessagePartByToolCallId.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_getCopyText=this.unstable_getCopyText.bind(this),this.speak=this.speak.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.submitFeedback=this.submitFeedback.bind(this),this.switchToBranch=this.switchToBranch.bind(this)}composer;_getEditComposerRuntimeCore=()=>this._threadBinding.getState().getEditComposer(this._core.getState().id);getState(){return this._core.getState()}reload(t={}){const e=this._getEditComposerRuntimeCore(),n=e??this._threadBinding.getState().composer,r=e??n,{runConfig:i=r.runConfig}=t,s=this._core.getState();if(s.role!=="assistant")throw new Error("Can only reload assistant messages");this._threadBinding.getState().startRun({parentId:s.parentId,sourceId:s.id,runConfig:i})}speak(){const t=this._core.getState();return this._threadBinding.getState().speak(t.id)}stopSpeaking(){const t=this._core.getState();if(this._threadBinding.getState().speech?.messageId===t.id)this._threadBinding.getState().stopSpeaking();else throw new Error("Message is not being spoken")}submitFeedback({type:t}){const e=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:e.id,type:t})}switchToBranch({position:t,branchId:e}){const n=this._core.getState();if(e&&t)throw new Error("May not specify both branchId and position");if(!e&&!t)throw new Error("Must specify either branchId or position");const i=this._threadBinding.getState().getBranches(n.id);let s=e;if(t==="previous"?s=i[n.branchNumber-2]:t==="next"&&(s=i[n.branchNumber]),!s)throw new Error("Branch not found");this._threadBinding.getState().switchToBranch(s)}unstable_getCopyText(){return Fp(this.getState())}subscribe(t){return this._core.subscribe(t)}getMessagePartByIndex(t){if(t<0)throw new Error("Message part index must be >= 0");return new lD(new ps({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[${t}]`,messagePartSelector:{type:"index",index:t}},getState:()=>cD(this.getState(),t),subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getMessagePartByToolCallId(t){return new lD(new ps({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(t)}]`,messagePartSelector:{type:"toolCallId",toolCallId:t}},getState:()=>{const e=this._core.getState(),n=e.content.findIndex(r=>r.type==="tool-call"&&r.toolCallId===t);return n===-1?vs:cD(e,n)},subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getAttachmentByIndex(t){return new VK(new ps({path:{...this.path,ref:this.path.ref+`${this.path.ref}.attachments[${t}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:t}},getState:()=>{const n=this.getState().attachments?.[t];return n?{...n,source:"message"}:vs},subscribe:e=>this._core.subscribe(e)}))}},KK=t=>({parentId:t.parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{},...t.stream?{stream:t.stream}:{}}),YK=t=>({parentId:t.parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{}}),XK=(t,e)=>typeof e=="string"?{createdAt:new Date,parentId:t.at(-1)?.id??null,sourceId:null,runConfig:{},role:"user",content:[{type:"text",text:e}],attachments:[],metadata:{custom:{}}}:{createdAt:e.createdAt??new Date,parentId:e.parentId??t.at(-1)?.id??null,sourceId:e.sourceId??null,role:e.role??"user",content:e.content,attachments:e.attachments??[],metadata:e.metadata??{custom:{}},runConfig:e.runConfig??{},startRun:e.startRun},JK=(t,e)=>{const n=t.messages.at(-1);return Object.freeze({threadId:e.id,metadata:e,capabilities:t.capabilities,isDisabled:t.isDisabled,isLoading:t.isLoading,isRunning:n?.role!=="assistant"?!1:n.status.type==="running",messages:t.messages,state:t.state,suggestions:t.suggestions,extras:t.extras,speech:t.speech})},PB=class{get path(){return this._threadBinding.path}get __internal_threadBinding(){return this._threadBinding}_threadBinding;constructor(t,e){const n=new ps({path:t.path,getState:()=>JK(t.getState(),e.getState()),subscribe:r=>{const i=t.subscribe(r),s=e.subscribe(r);return()=>{i(),s()}}});this._threadBinding={path:t.path,getState:()=>t.getState(),getStateState:()=>n.getState(),outerSubscribe:r=>t.outerSubscribe(r),subscribe:r=>t.subscribe(r)},this.composer=new UK(new Nb({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:r=>this._threadBinding.subscribe(r)})),this.__internal_bindMethods()}__internal_bindMethods(){this.append=this.append.bind(this),this.unstable_resumeRun=this.unstable_resumeRun.bind(this),this.unstable_loadExternalState=this.unstable_loadExternalState.bind(this),this.startRun=this.startRun.bind(this),this.cancelRun=this.cancelRun.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.export=this.export.bind(this),this.import=this.import.bind(this),this.reset=this.reset.bind(this),this.getMessageByIndex=this.getMessageByIndex.bind(this),this.getMessageById=this.getMessageById.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getModelContext=this.getModelContext.bind(this),this.getModelConfig=this.getModelConfig.bind(this),this.getState=this.getState.bind(this)}composer;getState(){return this._threadBinding.getStateState()}append(t){this._threadBinding.getState().append(XK(this._threadBinding.getState().messages,t))}subscribe(t){return this._threadBinding.subscribe(t)}getModelContext(){return this._threadBinding.getState().getModelContext()}getModelConfig(){return this.getModelContext()}startRun(t){const e=t===null||typeof t=="string"?{parentId:t}:t;return this._threadBinding.getState().startRun(YK(e))}unstable_resumeRun(t){return this._threadBinding.getState().resumeRun(KK(t))}unstable_loadExternalState(t){this._threadBinding.getState().unstable_loadExternalState(t)}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}export(){return this._threadBinding.getState().export()}import(t){this._threadBinding.getState().import(t)}reset(t){this._threadBinding.getState().reset(t)}getMessageByIndex(t){if(t<0)throw new Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[${t}]`,messageSelector:{type:"index",index:t}},()=>{const e=this._threadBinding.getState().messages,n=e[t];if(n)return{message:n,parentId:e[t-1]?.id??null}})}getMessageById(t){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(t)}]`,messageSelector:{type:"messageId",messageId:t}},()=>this._threadBinding.getState().getMessageById(t))}_getMessageRuntime(t,e){return new GK(new ps({path:t,getState:()=>{const{message:n,parentId:r}=e()??{},{messages:i,speech:s}=this._threadBinding.getState();if(!n||r===void 0)return vs;const o=this._threadBinding.getState(),a=o.getBranches(n.id),c=o.getSubmittedFeedback(n.id);return{...n,[kh]:n[kh],isLast:i.at(-1)?.id===n.id,parentId:r,branchNumber:a.indexOf(n.id)+1,branchCount:a.length,speech:s?.messageId===n.id?s:void 0,submittedFeedback:c}},subscribe:n=>this._threadBinding.subscribe(n)}),this._threadBinding)}_eventSubscriptionSubjects=new Map;unstable_on(t,e){let n=this._eventSubscriptionSubjects.get(t);return n||(n=new TB({event:t,binding:this._threadBinding}),this._eventSubscriptionSubjects.set(t,n)),n.subscribe(e)}},QK=t=>({mainThreadId:t.mainThreadId,newThread:t.newThreadId,threads:t.threadIds,archivedThreads:t.archivedThreadIds,isLoading:t.isLoading,threadItems:t.threadData}),A0=(t,e)=>{if(e===void 0)return vs;const n=t.getItemById(e);return n?{id:n.id,threadId:n.id,remoteId:n.remoteId,externalId:n.externalId,title:n.title,status:n.status,isMain:n.id===t.mainThreadId}:vs},ZK=class{constructor(t,e=PB){this._core=t,this._runtimeFactory=e;const n=new wk({path:{},getState:()=>QK(t),subscribe:r=>t.subscribe(r)});this._getState=n.getState.bind(n),this._mainThreadListItemRuntime=new _0(new ps({path:{ref:"threadItems[main]",threadSelector:{type:"main"}},getState:()=>A0(this._core,this._core.mainThreadId),subscribe:r=>this._core.subscribe(r)}),this._core),this.main=new e(new Nb({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>t.getMainThreadRuntimeCore(),subscribe:r=>t.subscribe(r)}),this._mainThreadListItemRuntime),this.__internal_bindMethods()}_getState;__internal_bindMethods(){this.switchToThread=this.switchToThread.bind(this),this.switchToNewThread=this.switchToNewThread.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getById=this.getById.bind(this),this.getItemById=this.getItemById.bind(this),this.getItemByIndex=this.getItemByIndex.bind(this),this.getArchivedItemByIndex=this.getArchivedItemByIndex.bind(this)}switchToThread(t){return this._core.switchToThread(t)}switchToNewThread(){return this._core.switchToNewThread()}getState(){return this._getState()}subscribe(t){return this._core.subscribe(t)}_mainThreadListItemRuntime;main;get mainItem(){return this._mainThreadListItemRuntime}getById(t){return new this._runtimeFactory(new Nb({path:{ref:"threads[threadId="+JSON.stringify(t)+"]",threadSelector:{type:"threadId",threadId:t}},getState:()=>this._core.getThreadRuntimeCore(t),subscribe:e=>this._core.subscribe(e)}),this.mainItem)}getItemByIndex(t){return new _0(new ps({path:{ref:`threadItems[${t}]`,threadSelector:{type:"index",index:t}},getState:()=>A0(this._core,this._core.threadIds[t]),subscribe:e=>this._core.subscribe(e)}),this._core)}getArchivedItemByIndex(t){return new _0(new ps({path:{ref:`archivedThreadItems[${t}]`,threadSelector:{type:"archiveIndex",index:t}},getState:()=>A0(this._core,this._core.archivedThreadIds[t]),subscribe:e=>this._core.subscribe(e)}),this._core)}getItemById(t){return new _0(new ps({path:{ref:`threadItems[threadId=${t}]`,threadSelector:{type:"threadId",threadId:t}},getState:()=>A0(this._core,t),subscribe:e=>this._core.subscribe(e)}),this._core)}},eY=class{accept="image/*";async add(t){return{id:t.file.name,type:"image",name:t.file.name,contentType:t.file.type,file:t.file,status:{type:"requires-action",reason:"composer-send"}}}async send(t){return{...t,status:{type:"complete"},content:[{type:"image",image:await tY(t.file)}]}}async remove(){}},tY=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)}),nY=class{accept="text/plain,text/html,text/markdown,text/csv,text/xml,text/json,text/css";async add(t){return{id:t.file.name,type:"document",name:t.file.name,contentType:t.file.type,file:t.file,status:{type:"requires-action",reason:"composer-send"}}}async send(t){return{...t,status:{type:"complete"},content:[{type:"text",text:`<attachment name=${t.name}>
${await rY(t.file)}
</attachment>`}]}}async remove(){}},rY=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsText(t)});function kS(t,e){if(e==="*")return!0;const n=e.split(",").map(s=>s.trim().toLowerCase()),r="."+t.name.split(".").pop().toLowerCase(),i=t.type.toLowerCase();for(const s of n){if(s.startsWith(".")&&s===r||s.includes("/")&&s===i)return!0;if((s==="image/*"||s==="video/*"||s==="audio/*")&&s.endsWith("/*")){const o=s.split("/")[0];if(i.startsWith(o+"/"))return!0}}return!1}var iY=class{_adapters;accept;constructor(t){this._adapters=t;const e=t.findIndex(n=>n.accept==="*");if(e!==-1){if(e!==t.length-1)throw new Error("A wildcard adapter (handling all files) can only be specified as the last adapter.");this.accept="*"}else this.accept=t.map(n=>n.accept).join(",")}add(t){for(const e of this._adapters)if(kS(t.file,e.accept))return e.add(t);throw new Error("No matching adapter found for file")}async send(t){const e=this._adapters.slice();for(const n of e)if(kS(t.file,n.accept))return n.send(t);throw new Error("No matching adapter found for attachment")}async remove(t){const e=this._adapters.slice();for(const n of e)if(kS({name:t.name,type:t.contentType},n.accept))return n.remove(t);throw new Error("No matching adapter found for attachment")}},sY=E.createContext(null),oY=()=>E.useContext(sY),Wl=Object.freeze([]),oc="DEFAULT_THREAD_ID",aY=Object.freeze([oc]),DB=Object.freeze({id:oc,remoteId:void 0,externalId:void 0,status:"regular"}),lY=Promise.resolve(),uD=Object.freeze({[oc]:DB}),cY=class{constructor(t={},e){this.adapter=t,this.threadFactory=e,this._mainThread=this.threadFactory(),this.__internal_setAdapter(t,!0)}_mainThreadId=oc;_threads=aY;_archivedThreads=Wl;_threadData=uD;get isLoading(){return this.adapter.isLoading??!1}get newThreadId(){}get threadIds(){return this._threads}get archivedThreadIds(){return this._archivedThreads}get threadData(){return this._threadData}getLoadThreadsPromise(){return lY}_mainThread;get mainThreadId(){return this._mainThreadId}getMainThreadRuntimeCore(){return this._mainThread}getThreadRuntimeCore(){throw new Error("Method not implemented.")}getItemById(t){for(const e of this.adapter.threads??[])if(e.id===t)return e;for(const e of this.adapter.archivedThreads??[])if(e.id===t)return e;if(t===oc)return DB}__internal_setAdapter(t,e=!1){const n=this.adapter;this.adapter=t;const r=t.threadId??oc,i=t.threads??Wl,s=t.archivedThreads??Wl,o=n.threadId??oc,a=n.threads??Wl,c=n.archivedThreads??Wl;!e&&o===r&&a===i&&c===s||(this._threadData={...uD,...Object.fromEntries(t.threads?.map(h=>[h.id,{...h,remoteId:h.remoteId,externalId:h.externalId,status:"regular"}])??[]),...Object.fromEntries(t.archivedThreads?.map(h=>[h.id,{...h,remoteId:h.remoteId,externalId:h.externalId,status:"archived"}])??[])},a!==i&&(this._threads=this.adapter.threads?.map(h=>h.id)??Wl),c!==s&&(this._archivedThreads=this.adapter.archivedThreads?.map(h=>h.id)??Wl),o!==r&&(this._mainThreadId=r,this._mainThread=this.threadFactory()),this._notifySubscribers())}async switchToThread(t){if(this._mainThreadId===t)return;const e=this.adapter.onSwitchToThread;if(!e)throw new Error("External store adapter does not support switching to thread");e(t)}async switchToNewThread(){const t=this.adapter.onSwitchToNewThread;if(!t)throw new Error("External store adapter does not support switching to new thread");t()}async rename(t,e){const n=this.adapter.onRename;if(!n)throw new Error("External store adapter does not support renaming");n(t,e)}async detach(){}async archive(t){const e=this.adapter.onArchive;if(!e)throw new Error("External store adapter does not support archiving");e(t)}async unarchive(t){const e=this.adapter.onUnarchive;if(!e)throw new Error("External store adapter does not support unarchiving");e(t)}async delete(t){const e=this.adapter.onDelete;if(!e)throw new Error("External store adapter does not support deleting");e(t)}initialize(){throw new Error("Method not implemented.")}generateTitle(){throw new Error("Method not implemented.")}_subscriptions=new Set;subscribe(t){return this._subscriptions.add(t),()=>this._subscriptions.delete(t)}_notifySubscribers(){for(const t of this._subscriptions)t()}},hD=class{cache=new WeakMap;convertMessages(t,e){return t.map((n,r)=>{const i=this.cache.get(n),s=e(i,n,r);return this.cache.set(n,s),s})}},uY=class extends SB{constructor(t,e,{parentId:n,message:r}){super(),this.runtime=t,this.endEditCallback=e,this._parentId=n,this._sourceId=r.id,this._previousText=Fp(r),this.setText(this._previousText),this.setRole(r.role),this.setAttachments(r.attachments??[]),this._nonTextParts=r.content.filter(i=>i.type!=="text"),this.setRunConfig({...t.composer.runConfig})}get canCancel(){return!0}getAttachmentAdapter(){return this.runtime.adapters?.attachments}_nonTextParts;_previousText;_parentId;_sourceId;async handleSend(t){Fp(t)!==this._previousText&&this.runtime.append({...t,content:[...t.content,...this._nonTextParts],parentId:this._parentId,sourceId:this._sourceId}),this.handleCancel()}handleCancel(){this.endEditCallback(),this._notifySubscribers()}},hY=class{constructor(t){this._contextProvider=t}_subscriptions=new Set;_isInitialized=!1;repository=new xk;get messages(){return this.repository.getMessages()}get state(){let t;for(const e of this.messages)if(e.role==="assistant"){t=e;break}return t?.metadata.unstable_state??null}composer=new _B(this);getModelContext(){return this._contextProvider.getModelContext()}_editComposers=new Map;getEditComposer(t){return this._editComposers.get(t)}beginEdit(t){if(this._editComposers.has(t))throw new Error("Edit already in progress");this._editComposers.set(t,new uY(this,()=>this._editComposers.delete(t),this.repository.getMessage(t))),this._notifySubscribers()}getMessageById(t){try{return this.repository.getMessage(t)}catch{return}}getBranches(t){return this.repository.getBranches(t)}switchToBranch(t){this.repository.switchToBranch(t),this._notifySubscribers()}_notifySubscribers(){for(const t of this._subscriptions)t()}_notifyEventSubscribers(t){const e=this._eventSubscribers.get(t);if(e)for(const n of e)n()}subscribe(t){return this._subscriptions.add(t),()=>this._subscriptions.delete(t)}_submittedFeedback={};getSubmittedFeedback(t){return this._submittedFeedback[t]}submitFeedback({messageId:t,type:e}){const n=this.adapters?.feedback;if(!n)throw new Error("Feedback adapter not configured");const{message:r}=this.repository.getMessage(t);n.submit({message:r,type:e}),this._submittedFeedback[t]={type:e},this._notifySubscribers()}_stopSpeaking;speech;speak(t){const e=this.adapters?.speech;if(!e)throw new Error("Speech adapter not configured");const{message:n}=this.repository.getMessage(t);this._stopSpeaking?.();const r=e.speak(Fp(n)),i=r.subscribe(()=>{r.status.type==="ended"?(this._stopSpeaking=void 0,this.speech=void 0):this.speech={messageId:t,status:r.status},this._notifySubscribers()});this.speech={messageId:t,status:r.status},this._notifySubscribers(),this._stopSpeaking=()=>{r.cancel(),i(),this.speech=void 0,this._stopSpeaking=void 0}}stopSpeaking(){if(!this._stopSpeaking)throw new Error("No message is being spoken");this._stopSpeaking(),this._notifySubscribers()}ensureInitialized(){this._isInitialized||(this._isInitialized=!0,this._notifyEventSubscribers("initialize"))}export(){return this.repository.export()}import(t){this.ensureInitialized(),this.repository.clear(),this.repository.import(t),this._notifySubscribers()}reset(t){this.import(vk.fromArray(t??[]))}_eventSubscribers=new Map;unstable_on(t,e){if(t==="model-context-update")return this._contextProvider.subscribe?.(e)??(()=>{});const n=this._eventSubscribers.get(t);return n?n.add(e):this._eventSubscribers.set(t,new Set([e])),()=>{this._eventSubscribers.get(t).delete(e)}}},fY=Object.freeze([]),dY=(t,e)=>t&&e[e.length-1]?.role!=="assistant",pY=class extends hY{_assistantOptimisticId=null;_capabilities={switchToBranch:!1,edit:!1,reload:!1,cancel:!1,unstable_copy:!1,speech:!1,attachments:!1,feedback:!1};get capabilities(){return this._capabilities}_messages;isDisabled;get isLoading(){return this._store.isLoading??!1}get messages(){return this._messages}get adapters(){return this._store.adapters}suggestions=[];extras=void 0;_converter=new hD;_store;beginEdit(t){if(!this._store.onEdit)throw new Error("Runtime does not support editing.");super.beginEdit(t)}constructor(t,e){super(t),this.__internal_setAdapter(e)}__internal_setAdapter(t){if(this._store===t)return;const e=t.isRunning??!1;this.isDisabled=t.isDisabled??!1;const n=this._store;this._store=t,this.extras=t.extras,this.suggestions=t.suggestions??fY,this._capabilities={switchToBranch:this._store.setMessages!==void 0,edit:this._store.onEdit!==void 0,reload:this._store.onReload!==void 0,cancel:this._store.onCancel!==void 0,speech:this._store.adapters?.speech!==void 0,unstable_copy:this._store.unstable_capabilities?.copy!==!1,attachments:!!this._store.adapters?.attachments,feedback:!!this._store.adapters?.feedback};let r;if(t.messageRepository){if(n&&n.isRunning===t.isRunning&&n.messageRepository===t.messageRepository){this._notifySubscribers();return}this.repository.clear(),this._assistantOptimisticId=null,this.repository.import(t.messageRepository),r=this.repository.getMessages()}else if(t.messages){if(n){if(n.convertMessage!==t.convertMessage)this._converter=new hD;else if(n.isRunning===t.isRunning&&n.messages===t.messages){this._notifySubscribers();return}}r=t.convertMessage?this._converter.convertMessages(t.messages,(i,s,o)=>{if(!t.convertMessage)return s;const a=o===t.messages.length-1,c=bk(a,e,!1);if(i&&(i.role!=="assistant"||!MK(i.status)||i.status===c))return i;const h=t.convertMessage(s,o),f=lx(h,o.toString(),c);return f[kh]=s,f}):t.messages;for(let i=0;i<r.length;i++){const s=r[i],o=r[i-1];this.repository.addOrUpdateMessage(o?.id??null,s)}}else throw new Error("ExternalStoreAdapter must provide either 'messages' or 'messageRepository'");r.length>0&&this.ensureInitialized(),(n?.isRunning??!1)!==(t.isRunning??!1)&&(t.isRunning?this._notifyEventSubscribers("run-start"):this._notifyEventSubscribers("run-end")),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null),dY(e,r)&&(this._assistantOptimisticId=this.repository.appendOptimisticMessage(r.at(-1)?.id??null,{role:"assistant",content:[]})),this.repository.resetHead(this._assistantOptimisticId??r.at(-1)?.id??null),this._messages=this.repository.getMessages(),this._notifySubscribers()}switchToBranch(t){if(!this._store.setMessages)throw new Error("Runtime does not support switching branches.");this.repository.switchToBranch(t),this.updateMessages(this.repository.getMessages())}async append(t){if(t.parentId!==(this.messages.at(-1)?.id??null)){if(!this._store.onEdit)throw new Error("Runtime does not support editing messages.");await this._store.onEdit(t)}else await this._store.onNew(t)}async startRun(t){if(!this._store.onReload)throw new Error("Runtime does not support reloading messages.");await this._store.onReload(t.parentId,t)}async resumeRun(t){if(!this._store.onResume)throw new Error("Runtime does not support resuming runs.");await this._store.onResume(t)}unstable_loadExternalState(t){if(!this._store.onLoadExternalState)throw new Error("Runtime does not support importing states.");this._store.onLoadExternalState(t)}cancelRun(){if(!this._store.onCancel)throw new Error("Runtime does not support cancelling runs.");this._store.onCancel(),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null);let t=this.repository.getMessages();const e=t[t.length-1];e?.role==="user"&&e.id===t.at(-1)?.id?(this.repository.deleteMessage(e.id),this.composer.text.trim()||this.composer.setText(Fp(e)),t=this.repository.getMessages()):this._notifySubscribers(),setTimeout(()=>{this.updateMessages(t)},0)}addToolResult(t){if(!this._store.onAddToolResult&&!this._store.onAddToolResult)throw new Error("Runtime does not support tool results.");this._store.onAddToolResult?.(t)}reset(t){const e=new xk;e.import(vk.fromArray(t??[])),this.updateMessages(e.getMessages())}import(t){this._assistantOptimisticId=null,super.import(t),this._store.onImport&&this._store.onImport(this.repository.getMessages())}updateMessages=t=>{this._store.convertMessage!==void 0?this._store.setMessages?.(t.flatMap(BK).filter(n=>n!=null)):this._store.setMessages?.(t)}},fD=t=>t.adapters?.threadList??{},mY=class extends wB{threads;constructor(t){super(),this.threads=new cY(fD(t),()=>new pY(this._contextProvider,t))}setAdapter(t){this.threads.__internal_setAdapter(fD(t)),this.threads.getMainThreadRuntimeCore().__internal_setAdapter(t)}},gY=t=>{const[e]=E.useState(()=>new mY(t));E.useEffect(()=>{e.setAdapter(t)});const{modelContext:n}=oY()??{};return E.useEffect(()=>{if(n)return e.registerModelContextProvider(n)},[n,e]),E.useMemo(()=>new WB(e),[e])},ux=t=>typeof t=="string"?{scope:t.split(".")[0],event:t}:{scope:t.scope,event:t.event},pp=(t,e,n)=>e===t;const dD=t=>{let e;const n=new Set,r=(h,f)=>{const d=typeof h=="function"?h(e):h;if(!Object.is(d,e)){const m=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(y=>y(e,m))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h))},c=e=t(r,i,a);return a},yY=(t=>t?dD(t):dD),bY=t=>t;function vY(t,e=bY){const n=xe.useSyncExternalStore(t.subscribe,xe.useCallback(()=>e(t.getState()),[t,e]),xe.useCallback(()=>e(t.getInitialState()),[t,e]));return xe.useDebugValue(n),n}const pD=t=>{const e=yY(t),n=r=>vY(e,r);return Object.assign(n,e),n},na=(t=>t?pD(t):pD);var xY=()=>{const t=new Set;return na(()=>({isAtBottom:!0,scrollToBottom:()=>{for(const e of t)e()},onScrollToBottom:e=>(t.add(e),()=>{t.delete(e)})}))};function wY(t,e){function n(r){const i=E.useContext(t);if(!r?.optional&&!i)throw new Error(`This component must be used within ${e}.`);return i}return n}function LB(t,e){function n(i){const s=t(i);return s?s[e]:null}function r(i){let s=!1,o;typeof i=="function"?o=i:i&&typeof i=="object"&&(s=!!i.optional,o=i.selector);const a=n({optional:s});return a?o?a(o):a():null}return{[e]:r,[`${e}Store`]:n}}var IB=E.createContext(null),SY=wY(IB,"ThreadPrimitive.Viewport"),{useThreadViewport:_Y,useThreadViewportStore:NB}=LB(SY,"useThreadViewport"),Bb=t=>t,CY=()=>{const t=NB({optional:!0}),[e]=E.useState(()=>xY());return E.useEffect(()=>t?.getState().onScrollToBottom(()=>{e.getState().scrollToBottom()}),[t,e]),E.useEffect(()=>{if(t)return e.subscribe(n=>{t.getState().isAtBottom!==n.isAtBottom&&Bb(t).setState({isAtBottom:n.isAtBottom})})},[e,t]),e},BB=({children:t})=>{const e=CY(),[n]=E.useState(()=>({useThreadViewport:e}));return C.jsx(IB.Provider,{value:n,children:t})},Wn=t=>{const e=t.get;return e.source=t.source,e.query=t.query,e},ul=()=>()=>{},jB=E.createContext({threads:Wn({source:null,query:{},get:()=>{throw new Error("Threads is only available inside <AssistantProvider />")}}),toolUIs:Wn({source:null,query:{},get:()=>{throw new Error("ToolUIs is only available inside <AssistantProvider />")}}),threadListItem:Wn({source:null,query:{},get:()=>{throw new Error("ThreadListItem is only available inside <AssistantProvider />")}}),thread:Wn({source:null,query:{},get:()=>{throw new Error("Thread is only available inside <AssistantProvider />")}}),composer:Wn({source:null,query:{},get:()=>{throw new Error("Composer is only available inside <AssistantProvider />")}}),message:Wn({source:null,query:{},get:()=>{throw new Error("Message is only available inside <ThreadPrimitive.Messages />")}}),part:Wn({source:null,query:{},get:()=>{throw new Error("Part is only available inside <MessagePrimitive.Parts />")}}),attachment:Wn({source:null,query:{},get:()=>{throw new Error("Attachment is only available inside <MessagePrimitive.Attachments /> or <ComposerPrimitive.Attachments />")}}),subscribe:ul,flushSync:ul,on:t=>{const{scope:e}=ux(t);throw new Error(`Event scope is not available in this component: ${e}`)},registerModelContextProvider:()=>{throw new Error("Registering model context providers is only available inside <AssistantProvider />")},__internal_getRuntime:()=>null}),Ei=()=>E.useContext(jB),AY=(t,e)=>t===ul?e:e===ul?t:(...n)=>{t(...n),e(...n)},kY=(t,e)=>t===ul?e:e===ul?t:(...n)=>{const r=t(...n),i=e(...n);return()=>{r(),i()}},EY=(t,e)=>{const n=e.subscribe,r=e.flushSync;return{...t,...e,subscribe:kY(t.subscribe,n??ul),flushSync:AY(t.flushSync,r??ul)}},hx=({api:t,children:e})=>{const n=Ei(),r=E.useMemo(()=>EY(n,t),[n,t]);return C.jsx(jB,{value:r,children:C.jsx(BB,{children:e})})};function Xn(t){return(e,n)=>({type:t,props:e,...n?.key!==void 0&&{key:n.key}})}var mp=null;function TY(t,e){t.currentIndex=0;const n=mp;mp=t;try{if(e(),t.isFirstRender=!1,t.cells.length!==t.currentIndex)throw new Error(`Rendered ${t.currentIndex} hooks but expected ${t.cells.length}. Hooks must be called in the exact same order in every render.`)}finally{mp=n}}function Sk(){if(!mp)throw new Error("No resource fiber available");return mp}var RY=t=>{if(t.renderContext)throw new Error("Resource updated during render");if(t.isNeverMounted)throw new Error("Resource updated before mount");t.isMounted&&t.scheduleRerender()};function MY(t){const e=Sk(),n=e.currentIndex++;if(!e.isFirstRender&&n>=e.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!e.cells[n]){const s={type:"state",value:typeof t=="function"?t():t,set:o=>{const a=s.value,c=typeof o=="function"?o(a):o;Object.is(a,c)||(s.value=c,RY(e))}};e.cells[n]=s}const r=e.cells[n];if(r.type!=="state")throw new Error("Hook order changed between renders");return r}function Go(t){const e=MY(t);return[e.value,e.set]}function OY(){const t=Sk(),e=t.currentIndex++;if(!t.isFirstRender&&e>=t.cells.length)throw new Error("Rendered more hooks than during the previous render. Hooks must be called in the exact same order in every render.");if(!t.cells[e]){const r={type:"effect",mounted:!1};t.cells[e]=r}if(t.cells[e].type!=="effect")throw new Error("Hook order changed between renders");return e}function xs(t,e){const n=Sk(),r=OY();n.renderContext.commitTasks.push({effect:t,deps:e,cellIndex:r})}function jb(t){const[e]=Go(()=>({current:t!==void 0&&typeof t=="function"?t():t}));return e}var PY=(t,e)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0},Ht=(t,e)=>{const n=jb(()=>({value:t(),deps:e}));return PY(n.current.deps,e)||(n.current.value=t(),n.current.deps=e),n.current.value};function DY(t,e){t.commitTasks.forEach(n=>{const r=n.cellIndex,i=e.cells[r];if(i.type!=="effect")throw new Error("Cannot find effect cell");let s=!0;if(i.deps!==void 0&&n.deps!==void 0&&(s=i.deps.length!==n.deps.length||i.deps.some((o,a)=>!Object.is(o,n.deps[a]))),s){if(i.mounted){if(typeof i.deps!=typeof n.deps)throw new Error("tapEffect called with and without dependencies across re-renders");try{i.mounted&&i.cleanup&&i.cleanup()}finally{i.mounted=!1}}try{const o=n.effect();if(o!==void 0&&typeof o!="function")throw new Error(`An effect function must either return a cleanup function or nothing. Received: ${typeof o}`);i.mounted=!0,i.cleanup=typeof o=="function"?o:void 0,i.deps=n.deps}catch(o){throw o}}})}function LY(t){let e=null;for(let n=t.cells.length-1;n>=0;n--){const r=t.cells[n];if(r?.type==="effect"&&r.mounted&&r.cleanup)try{r.cleanup()}catch(i){e==null&&(e=i)}finally{r.mounted=!1}}if(e!=null)throw e}function fx(t,e){return{resourceFn:t,scheduleRerender:e,cells:[],currentIndex:0,renderContext:void 0,isFirstRender:!0,isMounted:!1,isNeverMounted:!0}}function hh(t){t.isMounted=!1,LY(t)}function zp(t,e){const n={commitTasks:[],props:e,state:void 0};return TY(t,()=>{t.renderContext=n;try{n.state=t.resourceFn(e)}finally{t.renderContext=void 0}}),n}function fh(t,e){t.isMounted=!0,t.isNeverMounted=!1,DY(e,t)}function IY(t,e){const[n,r]=Go({}),i=Ht(()=>fx(t.type,()=>r({})),[t.type]),s=e?Ht(()=>t.props,e):t.props,o=Ht(()=>zp(i,s),[i,s,n]);return xs(()=>()=>hh(i),[i]),xs(()=>{fh(i,o)},[i,o]),o.state}function ws(t){return t.type(t.props)}function NY(t){const e=new Set;t.forEach((a,c)=>{if(a.key===void 0)throw new Error(`tapResources: All resource elements must have a key. Element at index ${c} is missing a key.`);if(e.has(a.key))throw new Error(`tapResources: Duplicate key "${a.key}" found. All keys must be unique.`);e.add(a.key)});const[n,r]=Go({}),i=Ht(()=>new Map(t.map(a=>[a.key,a])),[t]),[s]=Go(()=>new Map),o=Ht(()=>{const a=new Map,c=new Set;return i.forEach((h,f)=>{c.add(f);let d=s.get(f);(!d||d.resourceFn!==h.type)&&(d&&hh(d),d=fx(h.type,()=>r({})),s.set(f,d));const m=zp(d,h.props);a.set(f,m)}),s.forEach((h,f)=>{c.has(f)||(hh(h),s.delete(f))}),a},[i,n]);return xs(()=>{o.forEach((a,c)=>{const h=s.get(c);h&&fh(h,a)})},[o,s]),xs(()=>()=>{s.forEach(a=>{hh(a)}),s.clear()},[s]),Ht(()=>t.map(a=>o.get(a.key)?.state),[t,o])}var D_=[],L_=!1;function BY(){L_=!1;const t=D_;D_=[];for(const e of t)try{e()}catch(n){console.error("Error in scheduled task:",n)}}function jY(t){D_.push(t),L_||(L_=!0,queueMicrotask(BY))}var $Y=class $B{constructor(e){this._task=e}_isDirty=!1;_hasScheduledTask=!1;_isFlushing=!1;static MAX_FLUSH_DEPTH=50;get isDirty(){return this._isDirty}markDirty(){this._isDirty=!0,!(this._hasScheduledTask||this._isFlushing)&&(this._hasScheduledTask=!0,jY(()=>{this._hasScheduledTask=!1,this.flushSync()}))}flushSync(){if(this._isFlushing)return;this._isFlushing=!0;let e=0;try{for(;this._isDirty;){if(e++,e>$B.MAX_FLUSH_DEPTH)throw new Error("Maximum update depth exceeded. This can happen when a resource repeatedly calls setState inside tapEffect.");this._isDirty=!1,this._task()}}finally{this._isFlushing=!1}}},VY=({element:t,onUpdateInput:e,onFlushSync:n,onDispose:r})=>{const[i,s]=Go(t.props),o=ws({type:t.type,props:i}),a=jb(new Set).current,c=jb(o);return xs(()=>{o!==c.current&&(c.current=o,a.forEach(f=>f()))}),Ht(()=>({getState:()=>c.current,subscribe:f=>(a.add(f),()=>a.delete(f)),updateInput:f=>{e(),s(()=>f)},flushSync:n,dispose:r}),[])},FY=(t,e=!1)=>{let n=!e;const r={element:t,onUpdateInput:()=>{n||(n=!0,fh(s,o))},onFlushSync:()=>{i.flushSync()},onDispose:()=>hh(s)},i=new $Y(()=>{o=zp(s,r),n&&fh(s,o)}),s=fx(VY,()=>i.markDirty());let o=zp(s,r);return n&&fh(s,o),o.state},gp=Symbol("tap.Context"),zY=t=>({[gp]:t}),UY=(t,e,n)=>{const r=t[gp];t[gp]=e;try{return n()}finally{t[gp]=r}},HY=t=>t[gp],VB=Xn(t=>{const e=Ht(()=>FY(t,!0),[t.type]);return xs(()=>{e.updateInput(t.props)}),e}),qY=class{constructor(t){this.getApi=t}get(t,e){return this.getApi()[e]}ownKeys(){return Object.keys(this.getApi())}has(t,e){return e in this.getApi()}getOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(this.getApi(),e)}set(){return!1}defineProperty(){return!1}deleteProperty(){return!1}},go=(t,e)=>{const n=jb(()=>t);xs(()=>{n.current=t});const r=Ht(()=>new Proxy({},new qY(()=>n.current)),[]),i=e?.key,s=t.getState();return Ht(()=>({key:i,state:s,api:r}),[s,i])},WY=globalThis.__ASSISTANT_UI_DISABLE_LAYOUT_EFFECT__===!0,mD=WY?E.useEffect:E.useLayoutEffect;function FB(t){const[,e]=E.useState({}),n=E.useMemo(()=>fx(t.type,()=>e({})),[t.type]),r=zp(n,t.props);return mD(()=>()=>hh(n),[]),mD(()=>{fh(n,r)}),r.state}var GY=Xn(()=>Ht(()=>{const e=new Map;return{on:(n,r)=>{e.has(n)||e.set(n,new Set);const i=e.get(n);return i.add(r),()=>{i.delete(r),i.size===0&&e.delete(n)}},emit:(n,r)=>{const i=e.get(n),s=e.get("*");!i&&!s||queueMicrotask(()=>{if(i)for(const o of i)o(r);if(s)for(const o of s)o({event:n,payload:r})})}}},[])),KY=Xn(()=>{const[t,e]=Go(()=>({}));return go({getState:()=>t,setToolUI:(n,r)=>(e(i=>({...i,[n]:[...i[n]??[],r]})),()=>{e(i=>({...i,[n]:i[n]?.filter(s=>s!==r)??[]}))})})}),zB=zY(null),YY=(t,e)=>UY(zB,t,e),_k=()=>{const t=HY(zB);if(!t)throw new Error("Events context is not available");return t},XY=Xn(({threads:t,registerModelContextProvider:e,__internal_runtime:n})=>{const r=ws(GY()),{threads:i,toolUIs:s}=YY(r,()=>({toolUIs:ws(KY()),threads:IY(t,[t])})),o=Ht(()=>({threads:i.state,toolUIs:s.state}),[i.state,s.state]);return go({getState:()=>o,threads:i.api,toolUIs:s.api,on:r.on,registerModelContextProvider:e,__internal_getRuntime:()=>n??null})}),JY=t=>{const e=()=>t.getState().api.threads.item("main");return{threads:Wn({source:"root",query:{},get:()=>t.getState().api.threads}),toolUIs:Wn({source:"root",query:{},get:()=>t.getState().api.toolUIs}),thread:Wn({source:"threads",query:{type:"main"},get:()=>t.getState().api.threads.thread("main")}),threadListItem:Wn({source:"threads",query:{type:"main"},get:()=>e()}),composer:Wn({source:"thread",query:{},get:()=>t.getState().api.threads.thread("main").composer}),registerModelContextProvider(n){return t.getState().api.registerModelContextProvider(n)},__internal_getRuntime(){return t.getState().api.__internal_getRuntime()},on(n,r){const{event:i,scope:s}=ux(n);if(s==="*")return t.getState().api.on(i,r);if(pp("thread",s)||pp("thread-list-item",s)||pp("composer",s))return t.getState().api.on(i,o=>{o.threadId===e().getState().id&&r(o)});throw new Error(`Event scope is not available in this component: ${s}`)},subscribe:t.subscribe,flushSync:t.flushSync}},QY=t=>{const e=FB(VB(XY(t)));return E.useMemo(()=>JY(e),[e])},Oc=t=>{const[,e]=Go(t.getState);return xs(()=>(e(t.getState()),t.subscribe(()=>{e(t.getState())})),[t]),t.getState()},ZY=Xn(({runtime:t})=>{const e=Oc(t),n=_k();return xs(()=>{const r=[],i=["switched-to","switched-away"];for(const s of i){const o=t.unstable_on(s,()=>{n.emit(`thread-list-item.${s}`,{threadId:t.getState().id})});r.push(o)}return()=>{for(const s of r)s()}},[t,n]),go({getState:()=>e,switchTo:t.switchTo,rename:t.rename,archive:t.archive,unarchive:t.unarchive,delete:t.delete,generateTitle:t.generateTitle,initialize:t.initialize,detach:t.detach,__internal_getRuntime:()=>t},{key:e.id})}),Up=t=>{const e=NY(t);return{state:e.map(n=>n.state),api:n=>{const r="index"in n?e[n.index]?.api:e.find(i=>i.key===n.key)?.api;if(!r)throw new Error(`tapLookupResources: Resource not found for lookup: ${JSON.stringify(n)}`);return r}}},UB=Xn(({runtime:t})=>{const e=Oc(t);return go({getState:()=>e,remove:t.remove,__internal_getRuntime:()=>t},{key:e.id})}),eX=Xn(({runtime:t,index:e})=>{const n=Ht(()=>t.getAttachmentByIndex(e),[t,e]);return ws(UB({runtime:n}))}),HB=Xn(({threadIdRef:t,messageIdRef:e,runtime:n})=>{const r=Oc(n),i=_k();xs(()=>{const a=[],c=["send","attachment-add"];for(const h of c){const f=n.unstable_on(h,()=>{i.emit(`composer.${h}`,{threadId:t.current,...e&&{messageId:e.current}})});a.push(f)}return()=>{for(const h of a)h()}},[n,i,t,e]);const s=Up(r.attachments.map((a,c)=>eX({runtime:n,index:c},{key:c}))),o=Ht(()=>({text:r.text,role:r.role,attachments:s.state,runConfig:r.runConfig,isEditing:r.isEditing,canCancel:r.canCancel,attachmentAccept:r.attachmentAccept,isEmpty:r.isEmpty,type:r.type??"thread"}),[r,s.state]);return go({getState:()=>o,setText:n.setText,setRole:n.setRole,setRunConfig:n.setRunConfig,addAttachment:n.addAttachment,reset:n.reset,clearAttachments:n.clearAttachments,send:n.send,cancel:n.cancel,beginEdit:n.beginEdit??(()=>{throw new Error("beginEdit is not supported in this runtime")}),attachment:a=>"id"in a?s.api({key:a.id}):s.api(a),__internal_getRuntime:()=>n})}),tX=Xn(({runtime:t})=>{const e=Oc(t);return go({getState:()=>e,addToolResult:n=>t.addToolResult(n),__internal_getRuntime:()=>t},{key:e.type==="tool-call"?"toolCallId-"+e.toolCallId:void 0})}),nX=Xn(({runtime:t,index:e})=>{const n=Ht(()=>t.getAttachmentByIndex(e),[t,e]);return ws(UB({runtime:n}))}),rX=Xn(({runtime:t,index:e})=>{const n=Ht(()=>t.getMessagePartByIndex(e),[t,e]);return ws(tX({runtime:n}))}),iX=Xn(({runtime:t,threadIdRef:e})=>{const n=Oc(t),[r,i]=Go(!1),[s,o]=Go(!1),a=Ht(()=>({get current(){return t.getState().id}}),[t]),c=ws(HB({runtime:t.composer,threadIdRef:e,messageIdRef:a})),h=Up(n.content.map((m,y)=>rX({runtime:t,index:y},{key:y}))),f=Up(n.attachments?.map((m,y)=>nX({runtime:t,index:y},{key:y}))??[]),d=Ht(()=>({...n,parts:h.state,composer:c.state,isCopied:r,isHovering:s}),[n,h.state,c.state,r,s]);return go({getState:()=>d,composer:c.api,reload:m=>t.reload(m),speak:()=>t.speak(),stopSpeaking:()=>t.stopSpeaking(),submitFeedback:m=>t.submitFeedback(m),switchToBranch:m=>t.switchToBranch(m),getCopyText:()=>t.unstable_getCopyText(),part:m=>"index"in m?h.api({index:m.index}):h.api({key:"toolCallId-"+m.toolCallId}),attachment:m=>"id"in m?f.api({key:m.id}):f.api(m),setIsCopied:i,setIsHovering:o,__internal_getRuntime:()=>t},{key:n.id})}),sX=Xn(({runtime:t,id:e,threadIdRef:n})=>{const r=Ht(()=>t.getMessageById(e),[t,e]);return ws(iX({runtime:r,threadIdRef:n}))}),oX=Xn(({runtime:t})=>{const e=Oc(t),n=_k();xs(()=>{const a=[],c=["run-start","run-end","initialize","model-context-update"];for(const h of c){const f=t.unstable_on(h,()=>{const d=t.getState()?.threadId||"unknown";n.emit(`thread.${h}`,{threadId:d})});a.push(f)}return()=>{for(const h of a)h()}},[t]);const r=Ht(()=>({get current(){return t.getState().threadId}}),[t]),i=ws(HB({runtime:t.composer,threadIdRef:r})),s=Up(e.messages.map(a=>sX({runtime:t,id:a.id,threadIdRef:r},{key:a.id}))),o=Ht(()=>({isDisabled:e.isDisabled,isLoading:e.isLoading,isRunning:e.isRunning,capabilities:e.capabilities,state:e.state,suggestions:e.suggestions,extras:e.extras,speech:e.speech,composer:i.state,messages:s.state}),[e,s,i.state]);return go({getState:()=>o,composer:i.api,append:t.append,startRun:t.startRun,unstable_resumeRun:t.unstable_resumeRun,cancelRun:t.cancelRun,getModelContext:t.getModelContext,export:t.export,import:t.import,reset:t.reset,stopSpeaking:t.stopSpeaking,message:a=>"id"in a?s.api({key:a.id}):s.api(a),__internal_getRuntime:()=>t})}),aX=Xn(({runtime:t,id:e})=>{const n=Ht(()=>t.getItemById(e),[t,e]);return ws(ZY({runtime:n}))}),lX=Xn(({runtime:t})=>{const e=Oc(t),n=ws(oX({runtime:t.main})),r=Up(Object.keys(e.threadItems).map(s=>aX({runtime:t,id:s},{key:s}))),i=Ht(()=>({mainThreadId:e.mainThreadId,newThreadId:e.newThread??null,isLoading:e.isLoading,threadIds:e.threads,archivedThreadIds:e.archivedThreads,threadItems:r.state,main:n.state}),[e,r.state,n.state]);return go({getState:()=>i,thread:()=>n.api,item:s=>{if(s==="main")return r.api({key:i.mainThreadId});if("id"in s)return r.api({key:s.id});const{index:o,archived:a=!1}=s,c=a?i.archivedThreadIds[o]:i.threadIds[o];return r.api({key:c})},switchToThread:s=>{t.switchToThread(s)},switchToNewThread:()=>{t.switchToNewThread()}})}),cX=t=>t._core?.RenderComponent,uX=({children:t,runtime:e})=>{const n=QY({threads:lX({runtime:e.threads}),registerModelContextProvider:e.registerModelContextProvider,__internal_runtime:e}),r=cX(e);return C.jsxs(hx,{api:n,children:[r&&C.jsx(r,{}),t]})},hX=E.memo(uX),fX=({index:t,children:e})=>{const n=Ei(),r=E.useMemo(()=>{const i=()=>n.thread().message({index:t});return{message:Wn({source:"thread",query:{type:"index",index:t},get:()=>i()}),composer:Wn({source:"message",query:{},get:()=>i().composer}),on(s,o){const{event:a,scope:c}=ux(s);return!pp("composer",c)&&!pp("message",c)?n.on(s,o):n.on({scope:"thread",event:a},h=>{h.messageId===i().getState().id&&o(h)})}}},[n,t]);return C.jsx(hx,{api:r,children:e})},dX=({index:t,children:e})=>{const n=Ei(),r=E.useMemo(()=>({part:Wn({source:"message",query:{type:"index",index:t},get:()=>n.message().part({index:t})})}),[n,t]);return C.jsx(hx,{api:r,children:e})},pX=Xn(({text:t,isRunning:e})=>{const n=Ht(()=>({type:"text",text:t,status:e?{type:"running"}:{type:"complete"}}),[t,e]);return go({getState:()=>n,addToolResult:()=>{throw new Error("Not supported")},__internal_getRuntime:()=>null})}),mX=({text:t,isRunning:e=!1,children:n})=>{const r=FB(VB(pX({text:t,isRunning:e}))),i=E.useMemo(()=>({part:Wn({source:"root",query:{},get:()=>r.getState().api}),subscribe:r.subscribe,flushSync:r.flushSync}),[r]);return C.jsx(hx,{api:i,children:n})},gD=class{#e;constructor(t){this.#e=t}get threads(){return this.#e.threads().getState()}get toolUIs(){return this.#e.toolUIs().getState()}get threadListItem(){return this.#e.threadListItem().getState()}get thread(){return this.#e.thread().getState()}get composer(){return this.#e.composer().getState()}get message(){return this.#e.message().getState()}get part(){return this.#e.part().getState()}get attachment(){return this.#e.attachment().getState()}},Tt=t=>{const e=Ei(),n=E.useMemo(()=>new gD(e),[e]),r=E.useSyncExternalStore(e.subscribe,()=>t(n),()=>t(n));if(E.useDebugValue(r),r instanceof gD)throw new Error("You tried to return the entire AssistantState. This is not supported due to technical limitations.");return r},gX=(t,e)=>{const n=Ei(),r=E.useRef(e);E.useEffect(()=>{r.current=e});const{scope:i,event:s}=ux(t);E.useEffect(()=>n.on({scope:i,event:s},o=>r.current(o)),[n,i,s])},yX=t=>{const e=t;e.__isBound||(e.__internal_bindMethods?.(),e.__isBound=!0)};function bX(t,e=vX){yX(t);const n=E.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getState()));return E.useDebugValue(n),n}var vX=t=>t;function xX(t){function e(n){let r=!1,i;typeof n=="function"?i=n:n&&(r=!!n.optional,i=n.selector);const s=t({optional:r});return s?bX(s,i):null}return e}function wX(t){const e=Ei(),n=e.message.source?e.message().__internal_getRuntime():null;if(!n&&!t?.optional)throw new Error("MessageRuntime is not available");return n}var qB=xX(wX),WB=class{constructor(t){this._core=t,this.threads=new ZK(t.threads),this._thread=this.threads.main,this.__internal_bindMethods()}threads;get threadList(){return this.threads}_thread;__internal_bindMethods(){this.switchToNewThread=this.switchToNewThread.bind(this),this.switchToThread=this.switchToThread.bind(this),this.registerModelContextProvider=this.registerModelContextProvider.bind(this),this.registerModelConfigProvider=this.registerModelConfigProvider.bind(this),this.reset=this.reset.bind(this)}get thread(){return this._thread}switchToNewThread(){return this._core.threads.switchToNewThread()}switchToThread(t){return this._core.threads.switchToThread(t)}registerModelContextProvider(t){return this._core.registerModelContextProvider(t)}registerModelConfigProvider(t){return this.registerModelContextProvider(t)}reset({initialMessages:t}={}){return this._core.threads.getMainThreadRuntimeCore().import(vk.fromArray(t??[]))}},SX=t=>{const{cloud:e,initialMessages:n,maxSteps:r,adapters:i,unstable_humanToolNames:s,...o}=t;return{localRuntimeOptions:{cloud:e,initialMessages:n,maxSteps:r,adapters:i,unstable_humanToolNames:s},otherOptions:o}};function Ir(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}var GB=E.createContext(null),_X=t=>({useSmoothStatus:na(()=>t)}),CX=({children:t})=>{const e=KB({optional:!0}),n=Ei(),[r]=E.useState(()=>_X(n.part().getState().status));return e?t:C.jsx(GB.Provider,{value:r,children:t})},AX=t=>{const e=E.forwardRef((n,r)=>C.jsx(CX,{children:C.jsx(t,{...n,ref:r})}));return e.displayName=t.displayName,e};function KB(t){const e=E.useContext(GB);if(!t?.optional&&!e)throw new Error("This component must be used within a SmoothContextProvider.");return e}var{useSmoothStatus:kX,useSmoothStatusStore:EX}=LB(KB,"useSmoothStatus"),TX=class{constructor(t,e){this.currentText=t,this.setText=e}animationFrameId=null;lastUpdateTime=Date.now();targetText="";start(){this.animationFrameId===null&&(this.lastUpdateTime=Date.now(),this.animate())}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}animate=()=>{const t=Date.now();let n=t-this.lastUpdateTime;const r=this.targetText.length-this.currentText.length,i=Math.min(5,250/r);let s=0;for(;n>=i&&s<r;)s++,n-=i;s!==r?this.animationFrameId=requestAnimationFrame(this.animate):this.animationFrameId=null,s!==0&&(this.currentText=this.targetText.slice(0,this.currentText.length+s),this.lastUpdateTime=t-n,this.setText(this.currentText))}},ES=Object.freeze({type:"running"}),YB=(t,e=!1)=>{const{text:n}=t,r=Tt(({message:f})=>f.id),i=E.useRef(r),[s,o]=E.useState(n),a=EX({optional:!0}),c=Ir(f=>{if(o(f),a){const d=s!==f||t.status.type==="running"?ES:t.status;Bb(a).setState(d,!0)}});E.useEffect(()=>{if(a){const f=s!==n||t.status.type==="running"?ES:t.status;Bb(a).setState(f,!0)}},[a,n,s,t.status]);const[h]=E.useState(new TX(n,c));return E.useEffect(()=>{if(!e){h.stop();return}if(i.current!==r||!n.startsWith(h.targetText)){i.current=r,c(n),h.currentText=n,h.targetText=n,h.stop();return}h.targetText=n,h.start()},[c,h,r,e,n]),E.useEffect(()=>()=>{h.stop()},[h]),E.useMemo(()=>e?{type:"text",text:s,status:n===s?t.status:ES}:t,[e,s,t,n])};const RX=Object.freeze(Object.defineProperty({__proto__:null,AssistantRuntimeImpl:WB,BaseAssistantRuntimeCore:wB,CompositeContextProvider:xB,DefaultThreadComposerRuntimeCore:_B,MessageRepository:xk,ThreadRuntimeImpl:PB,fromThreadMessageLike:lx,generateId:ax,getAutoStatus:bk,splitLocalRuntimeOptions:SX,useSmooth:YB,useSmoothStatus:kX,withSmoothContextProvider:AX},Symbol.toStringTag,{value:"Module"}));function yD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function dx(...t){return e=>{let n=!1;const r=t.map(i=>{const s=yD(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():yD(t[i],null)}}}}function Bt(...t){return E.useCallback(dx(...t),t)}var Ck=vB();const MX=Mc(Ck);function Eh(t){const e=OX(t),n=E.forwardRef((r,i)=>{const{children:s,...o}=r,a=E.Children.toArray(s),c=a.find(DX);if(c){const h=c.props.children,f=a.map(d=>d===c?E.Children.count(h)>1?E.Children.only(null):E.isValidElement(h)?h.props.children:null:d);return C.jsx(e,{...o,ref:i,children:E.isValidElement(h)?E.cloneElement(h,void 0,f):null})}return C.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var XB=Eh("Slot");function OX(t){const e=E.forwardRef((n,r)=>{const{children:i,...s}=n;if(E.isValidElement(i)){const o=IX(i),a=LX(s,i.props);return i.type!==E.Fragment&&(a.ref=r?dx(r,o):o),E.cloneElement(i,a)}return E.Children.count(i)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var JB=Symbol("radix.slottable");function PX(t){const e=({children:n})=>C.jsx(C.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=JB,e}function DX(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===JB}function LX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function IX(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var NX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=NX.reduce((t,e)=>{const n=Eh(`Primitive.${e}`),r=E.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function QB(t,e){t&&Ck.flushSync(()=>t.dispatchEvent(e))}var I_=(t=>(t.Hidden="hidden",t.Floating="floating",t.Normal="normal",t))(I_||{}),BX=({hideWhenRunning:t,autohide:e,autohideFloat:n})=>Tt(({thread:r,message:i})=>t&&r.isRunning?"hidden":e==="always"||e==="not-last"&&!i.isLast?i.isHovering?n==="always"||n==="single-branch"&&i.branchCount<=1?"floating":"normal":"hidden":"normal"),ZB=E.forwardRef(({hideWhenRunning:t,autohide:e,autohideFloat:n,...r},i)=>{const s=BX({hideWhenRunning:t,autohide:e,autohideFloat:n});return s===I_.Hidden?null:C.jsx(st.div,{...s===I_.Floating?{"data-floating":"true"}:null,...r,ref:i})});ZB.displayName="ActionBarPrimitive.Root";function Ie(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}var jX=({copiedDuration:t=3e3}={})=>{const e=Ei(),n=Tt(({message:o})=>(o.role!=="assistant"||o.status?.type!=="running")&&o.parts.some(a=>a.type==="text"&&a.text.length>0)),r=Tt(({composer:o})=>o.isEditing),i=Tt(({composer:o})=>o.text),s=E.useCallback(()=>{const o=r?i:e.message().getCopyText();o&&navigator.clipboard.writeText(o).then(()=>{e.message().setIsCopied(!0),setTimeout(()=>e.message().setIsCopied(!1),t)})},[e,r,i,t]);return n?s:null},ej=E.forwardRef(({copiedDuration:t,onClick:e,disabled:n,...r},i)=>{const s=Tt(({message:a})=>a.isCopied),o=jX({copiedDuration:t});return C.jsx(st.button,{type:"button",...s?{"data-copied":"true"}:{},...r,ref:i,disabled:n||!o,onClick:Ie(e,()=>{o?.()})})});ej.displayName="ActionBarPrimitive.Copy";var tj=(t,e,n=[])=>{const r=E.forwardRef((i,s)=>{const o={},a={};Object.keys(i).forEach(h=>{n.includes(h)?o[h]=i[h]:a[h]=i[h]});const c=e(o)??void 0;return C.jsx(st.button,{type:"button",...a,ref:s,disabled:a.disabled||!c,onClick:Ie(a.onClick,c)})});return r.displayName=t,r};function nj(t,e=globalThis?.document){const n=Ir(t);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}function $X(t,e){const n=E.createContext(e),r=s=>{const{children:o,...a}=s,c=E.useMemo(()=>a,Object.values(a));return C.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function i(s){const o=E.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function ra(t,e=[]){let n=[];function r(s,o){const a=E.createContext(o),c=n.length;n=[...n,o];const h=d=>{const{scope:m,children:y,...v}=d,w=m?.[t]?.[c]||a,_=E.useMemo(()=>v,Object.values(v));return C.jsx(w.Provider,{value:_,children:y})};h.displayName=s+"Provider";function f(d,m){const y=m?.[t]?.[c]||a,v=E.useContext(y);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[h,f]}const i=()=>{const s=n.map(o=>E.createContext(o));return function(a){const c=a?.[t]||s;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return i.scopeName=t,[r,VX(i,...e)]}function VX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:h})=>{const d=c(s)[`__scope${h}`];return{...a,...d}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var FX="DismissableLayer",N_="dismissableLayer.update",zX="dismissableLayer.pointerDownOutside",UX="dismissableLayer.focusOutside",bD,rj=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),px=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,h=E.useContext(rj),[f,d]=E.useState(null),m=f?.ownerDocument??globalThis?.document,[,y]=E.useState({}),v=Bt(e,L=>d(L)),w=Array.from(h.layers),[_]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),S=w.indexOf(_),A=f?w.indexOf(f):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,P=A>=S,M=WX(L=>{const N=L.target,z=[...h.branches].some(j=>j.contains(N));!P||z||(i?.(L),o?.(L),L.defaultPrevented||a?.())},m),O=GX(L=>{const N=L.target;[...h.branches].some(j=>j.contains(N))||(s?.(L),o?.(L),L.defaultPrevented||a?.())},m);return nj(L=>{A===h.layers.size-1&&(r?.(L),!L.defaultPrevented&&a&&(L.preventDefault(),a()))},m),E.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(bD=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),vD(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=bD)}},[f,m,n,h]),E.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),vD())},[f,h]),E.useEffect(()=>{const L=()=>y({});return document.addEventListener(N_,L),()=>document.removeEventListener(N_,L)},[]),C.jsx(st.div,{...c,ref:v,style:{pointerEvents:k?P?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,O.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,M.onPointerDownCapture)})});px.displayName=FX;var HX="DismissableLayerBranch",qX=E.forwardRef((t,e)=>{const n=E.useContext(rj),r=E.useRef(null),i=Bt(e,r);return E.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),C.jsx(st.div,{...t,ref:i})});qX.displayName=HX;function WX(t,e=globalThis?.document){const n=Ir(t),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){ij(zX,n,h,{discrete:!0})};const h={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GX(t,e=globalThis?.document){const n=Ir(t),r=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!r.current&&ij(UX,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vD(){const t=new CustomEvent(N_);document.dispatchEvent(t)}function ij(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?QB(i,s):i.dispatchEvent(s)}var TS=0;function sj(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??xD()),document.body.insertAdjacentElement("beforeend",t[1]??xD()),TS++,()=>{TS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),TS--}},[])}function xD(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var RS="focusScope.autoFocusOnMount",MS="focusScope.autoFocusOnUnmount",wD={bubbles:!1,cancelable:!0},KX="FocusScope",Ak=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=E.useState(null),h=Ir(i),f=Ir(s),d=E.useRef(null),m=Bt(e,w=>c(w)),y=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let w=function(k){if(y.paused||!a)return;const P=k.target;a.contains(P)?d.current=P:Ka(d.current,{select:!0})},_=function(k){if(y.paused||!a)return;const P=k.relatedTarget;P!==null&&(a.contains(P)||Ka(d.current,{select:!0}))},S=function(k){if(document.activeElement===document.body)for(const M of k)M.removedNodes.length>0&&Ka(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",_);const A=new MutationObserver(S);return a&&A.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",_),A.disconnect()}}},[r,a,y.paused]),E.useEffect(()=>{if(a){_D.add(y);const w=document.activeElement;if(!a.contains(w)){const S=new CustomEvent(RS,wD);a.addEventListener(RS,h),a.dispatchEvent(S),S.defaultPrevented||(YX(eJ(oj(a)),{select:!0}),document.activeElement===w&&Ka(a))}return()=>{a.removeEventListener(RS,h),setTimeout(()=>{const S=new CustomEvent(MS,wD);a.addEventListener(MS,f),a.dispatchEvent(S),S.defaultPrevented||Ka(w??document.body,{select:!0}),a.removeEventListener(MS,f),_D.remove(y)},0)}}},[a,h,f,y]);const v=E.useCallback(w=>{if(!n&&!r||y.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,S=document.activeElement;if(_&&S){const A=w.currentTarget,[k,P]=XX(A);k&&P?!w.shiftKey&&S===P?(w.preventDefault(),n&&Ka(k,{select:!0})):w.shiftKey&&S===k&&(w.preventDefault(),n&&Ka(P,{select:!0})):S===A&&w.preventDefault()}},[n,r,y.paused]);return C.jsx(st.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Ak.displayName=KX;function YX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ka(r,{select:e}),document.activeElement!==n)return}function XX(t){const e=oj(t),n=SD(e,t),r=SD(e.reverse(),t);return[n,r]}function oj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function SD(t,e){for(const n of t)if(!JX(n,{upTo:e}))return n}function JX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function QX(t){return t instanceof HTMLInputElement&&"select"in t}function Ka(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&QX(t)&&e&&t.select()}}var _D=ZX();function ZX(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=CD(t,e),t.unshift(e)},remove(e){t=CD(t,e),t[0]?.resume()}}}function CD(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function eJ(t){return t.filter(e=>e.tagName!=="A")}var hl=globalThis?.document?E.useLayoutEffect:()=>{},tJ=bB[" useId ".trim().toString()]||(()=>{}),nJ=0;function ol(t){const[e,n]=E.useState(tJ());return hl(()=>{n(r=>r??String(nJ++))},[t]),e?`radix-${e}`:""}const rJ=["top","right","bottom","left"],fl=Math.min,_i=Math.max,$b=Math.round,k0=Math.floor,so=t=>({x:t,y:t}),iJ={left:"right",right:"left",bottom:"top",top:"bottom"},sJ={start:"end",end:"start"};function B_(t,e,n){return _i(t,fl(e,n))}function Ko(t,e){return typeof t=="function"?t(e):t}function Yo(t){return t.split("-")[0]}function zh(t){return t.split("-")[1]}function kk(t){return t==="x"?"y":"x"}function Ek(t){return t==="y"?"height":"width"}const oJ=new Set(["top","bottom"]);function eo(t){return oJ.has(Yo(t))?"y":"x"}function Tk(t){return kk(eo(t))}function aJ(t,e,n){n===void 0&&(n=!1);const r=zh(t),i=Tk(t),s=Ek(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Vb(o)),[o,Vb(o)]}function lJ(t){const e=Vb(t);return[j_(t),e,j_(e)]}function j_(t){return t.replace(/start|end/g,e=>sJ[e])}const AD=["left","right"],kD=["right","left"],cJ=["top","bottom"],uJ=["bottom","top"];function hJ(t,e,n){switch(t){case"top":case"bottom":return n?e?kD:AD:e?AD:kD;case"left":case"right":return e?cJ:uJ;default:return[]}}function fJ(t,e,n,r){const i=zh(t);let s=hJ(Yo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(j_)))),s}function Vb(t){return t.replace(/left|right|bottom|top/g,e=>iJ[e])}function dJ(t){return{top:0,right:0,bottom:0,left:0,...t}}function aj(t){return typeof t!="number"?dJ(t):{top:t,right:t,bottom:t,left:t}}function Fb(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function ED(t,e,n){let{reference:r,floating:i}=t;const s=eo(e),o=Tk(e),a=Ek(o),c=Yo(e),h=s==="y",f=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let y;switch(c){case"top":y={x:f,y:r.y-i.height};break;case"bottom":y={x:f,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:d};break;case"left":y={x:r.x-i.width,y:d};break;default:y={x:r.x,y:r.y}}switch(zh(e)){case"start":y[o]-=m*(n&&h?-1:1);break;case"end":y[o]+=m*(n&&h?-1:1);break}return y}const pJ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:d}=ED(h,r,c),m=r,y={},v=0;for(let w=0;w<a.length;w++){const{name:_,fn:S}=a[w],{x:A,y:k,data:P,reset:M}=await S({x:f,y:d,initialPlacement:r,placement:m,strategy:i,middlewareData:y,rects:h,platform:o,elements:{reference:t,floating:e}});f=A??f,d=k??d,y={...y,[_]:{...y[_],...P}},M&&v<=50&&(v++,typeof M=="object"&&(M.placement&&(m=M.placement),M.rects&&(h=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):M.rects),{x:f,y:d}=ED(h,m,c)),w=-1)}return{x:f,y:d,placement:m,strategy:i,middlewareData:y}};async function Hp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:m=!1,padding:y=0}=Ko(e,t),v=aj(y),_=a[m?d==="floating"?"reference":"floating":d],S=Fb(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(_)))==null||n?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:h,rootBoundary:f,strategy:c})),A=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,k=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),P=await(s.isElement==null?void 0:s.isElement(k))?await(s.getScale==null?void 0:s.getScale(k))||{x:1,y:1}:{x:1,y:1},M=Fb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:A,offsetParent:k,strategy:c}):A);return{top:(S.top-M.top+v.top)/P.y,bottom:(M.bottom-S.bottom+v.bottom)/P.y,left:(S.left-M.left+v.left)/P.x,right:(M.right-S.right+v.right)/P.x}}const mJ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:h,padding:f=0}=Ko(t,e)||{};if(h==null)return{};const d=aj(f),m={x:n,y:r},y=Tk(i),v=Ek(y),w=await o.getDimensions(h),_=y==="y",S=_?"top":"left",A=_?"bottom":"right",k=_?"clientHeight":"clientWidth",P=s.reference[v]+s.reference[y]-m[y]-s.floating[v],M=m[y]-s.reference[y],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let L=O?O[k]:0;(!L||!await(o.isElement==null?void 0:o.isElement(O)))&&(L=a.floating[k]||s.floating[v]);const N=P/2-M/2,z=L/2-w[v]/2-1,j=fl(d[S],z),H=fl(d[A],z),W=j,X=L-w[v]-H,G=L/2-w[v]/2+N,ie=B_(W,G,X),F=!c.arrow&&zh(i)!=null&&G!==ie&&s.reference[v]/2-(G<W?j:H)-w[v]/2<0,Y=F?G<W?G-W:G-X:0;return{[y]:m[y]+Y,data:{[y]:ie,centerOffset:G-ie-Y,...F&&{alignmentOffset:Y}},reset:F}}}),gJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:h}=e,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,..._}=Ko(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const S=Yo(i),A=eo(a),k=Yo(a)===a,P=await(c.isRTL==null?void 0:c.isRTL(h.floating)),M=m||(k||!w?[Vb(a)]:lJ(a)),O=v!=="none";!m&&O&&M.push(...fJ(a,w,v,P));const L=[a,...M],N=await Hp(e,_),z=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&z.push(N[S]),d){const G=aJ(i,o,P);z.push(N[G[0]],N[G[1]])}if(j=[...j,{placement:i,overflows:z}],!z.every(G=>G<=0)){var H,W;const G=(((H=s.flip)==null?void 0:H.index)||0)+1,ie=L[G];if(ie&&(!(d==="alignment"?A!==eo(ie):!1)||j.every(q=>eo(q.placement)===A?q.overflows[0]>0:!0)))return{data:{index:G,overflows:j},reset:{placement:ie}};let F=(W=j.filter(Y=>Y.overflows[0]<=0).sort((Y,q)=>Y.overflows[1]-q.overflows[1])[0])==null?void 0:W.placement;if(!F)switch(y){case"bestFit":{var X;const Y=(X=j.filter(q=>{if(O){const se=eo(q.placement);return se===A||se==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(se=>se>0).reduce((se,T)=>se+T,0)]).sort((q,se)=>q[1]-se[1])[0])==null?void 0:X[0];Y&&(F=Y);break}case"initialPlacement":F=a;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function TD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function RD(t){return rJ.some(e=>t[e]>=0)}const yJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ko(t,e);switch(r){case"referenceHidden":{const s=await Hp(e,{...i,elementContext:"reference"}),o=TD(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:RD(o)}}}case"escaped":{const s=await Hp(e,{...i,altBoundary:!0}),o=TD(s,n.floating);return{data:{escapedOffsets:o,escaped:RD(o)}}}default:return{}}}}},lj=new Set(["left","top"]);async function bJ(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yo(n),a=zh(n),c=eo(n)==="y",h=lj.has(o)?-1:1,f=s&&c?-1:1,d=Ko(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof v=="number"&&(y=a==="end"?v*-1:v),c?{x:y*f,y:m*h}:{x:m*h,y:y*f}}const vJ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await bJ(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},xJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:S,y:A}=_;return{x:S,y:A}}},...c}=Ko(t,e),h={x:n,y:r},f=await Hp(e,c),d=eo(Yo(i)),m=kk(d);let y=h[m],v=h[d];if(s){const _=m==="y"?"top":"left",S=m==="y"?"bottom":"right",A=y+f[_],k=y-f[S];y=B_(A,y,k)}if(o){const _=d==="y"?"top":"left",S=d==="y"?"bottom":"right",A=v+f[_],k=v-f[S];v=B_(A,v,k)}const w=a.fn({...e,[m]:y,[d]:v});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:s,[d]:o}}}}}},wJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:h=!0}=Ko(t,e),f={x:n,y:r},d=eo(i),m=kk(d);let y=f[m],v=f[d];const w=Ko(a,e),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const k=m==="y"?"height":"width",P=s.reference[m]-s.floating[k]+_.mainAxis,M=s.reference[m]+s.reference[k]-_.mainAxis;y<P?y=P:y>M&&(y=M)}if(h){var S,A;const k=m==="y"?"width":"height",P=lj.has(Yo(i)),M=s.reference[d]-s.floating[k]+(P&&((S=o.offset)==null?void 0:S[d])||0)+(P?0:_.crossAxis),O=s.reference[d]+s.reference[k]+(P?0:((A=o.offset)==null?void 0:A[d])||0)-(P?_.crossAxis:0);v<M?v=M:v>O&&(v=O)}return{[m]:y,[d]:v}}}},SJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...h}=Ko(t,e),f=await Hp(e,h),d=Yo(i),m=zh(i),y=eo(i)==="y",{width:v,height:w}=s.floating;let _,S;d==="top"||d==="bottom"?(_=d,S=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(S=d,_=m==="end"?"top":"bottom");const A=w-f.top-f.bottom,k=v-f.left-f.right,P=fl(w-f[_],A),M=fl(v-f[S],k),O=!e.middlewareData.shift;let L=P,N=M;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=k),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(L=A),O&&!m){const j=_i(f.left,0),H=_i(f.right,0),W=_i(f.top,0),X=_i(f.bottom,0);y?N=v-2*(j!==0||H!==0?j+H:_i(f.left,f.right)):L=w-2*(W!==0||X!==0?W+X:_i(f.top,f.bottom))}await c({...e,availableWidth:N,availableHeight:L});const z=await o.getDimensions(a.floating);return v!==z.width||w!==z.height?{reset:{rects:!0}}:{}}}};function mx(){return typeof window<"u"}function Uh(t){return cj(t)?(t.nodeName||"").toLowerCase():"#document"}function Ai(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yo(t){var e;return(e=(cj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function cj(t){return mx()?t instanceof Node||t instanceof Ai(t).Node:!1}function Ss(t){return mx()?t instanceof Element||t instanceof Ai(t).Element:!1}function ho(t){return mx()?t instanceof HTMLElement||t instanceof Ai(t).HTMLElement:!1}function MD(t){return!mx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ai(t).ShadowRoot}const _J=new Set(["inline","contents"]);function Rm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=_s(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!_J.has(i)}const CJ=new Set(["table","td","th"]);function AJ(t){return CJ.has(Uh(t))}const kJ=[":popover-open",":modal"];function gx(t){return kJ.some(e=>{try{return t.matches(e)}catch{return!1}})}const EJ=["transform","translate","scale","rotate","perspective"],TJ=["transform","translate","scale","rotate","perspective","filter"],RJ=["paint","layout","strict","content"];function Rk(t){const e=Mk(),n=Ss(t)?_s(t):t;return EJ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||TJ.some(r=>(n.willChange||"").includes(r))||RJ.some(r=>(n.contain||"").includes(r))}function MJ(t){let e=dl(t);for(;ho(e)&&!Th(e);){if(Rk(e))return e;if(gx(e))return null;e=dl(e)}return null}function Mk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OJ=new Set(["html","body","#document"]);function Th(t){return OJ.has(Uh(t))}function _s(t){return Ai(t).getComputedStyle(t)}function yx(t){return Ss(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function dl(t){if(Uh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||MD(t)&&t.host||yo(t);return MD(e)?e.host:e}function uj(t){const e=dl(t);return Th(e)?t.ownerDocument?t.ownerDocument.body:t.body:ho(e)&&Rm(e)?e:uj(e)}function qp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=uj(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ai(i);if(s){const a=$_(o);return e.concat(o,o.visualViewport||[],Rm(i)?i:[],a&&n?qp(a):[])}return e.concat(i,qp(i,[],n))}function $_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hj(t){const e=_s(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ho(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=$b(n)!==s||$b(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Ok(t){return Ss(t)?t:t.contextElement}function dh(t){const e=Ok(t);if(!ho(e))return so(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=hj(e);let o=(s?$b(n.width):n.width)/r,a=(s?$b(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const PJ=so(0);function fj(t){const e=Ai(t);return!Mk()||!e.visualViewport?PJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function DJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ai(t)?!1:e}function vc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Ok(t);let o=so(1);e&&(r?Ss(r)&&(o=dh(r)):o=dh(t));const a=DJ(s,n,r)?fj(s):so(0);let c=(i.left+a.x)/o.x,h=(i.top+a.y)/o.y,f=i.width/o.x,d=i.height/o.y;if(s){const m=Ai(s),y=r&&Ss(r)?Ai(r):r;let v=m,w=$_(v);for(;w&&r&&y!==v;){const _=dh(w),S=w.getBoundingClientRect(),A=_s(w),k=S.left+(w.clientLeft+parseFloat(A.paddingLeft))*_.x,P=S.top+(w.clientTop+parseFloat(A.paddingTop))*_.y;c*=_.x,h*=_.y,f*=_.x,d*=_.y,c+=k,h+=P,v=Ai(w),w=$_(v)}}return Fb({width:f,height:d,x:c,y:h})}function bx(t,e){const n=yx(t).scrollLeft;return e?e.left+n:vc(yo(t)).left+n}function dj(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-bx(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function LJ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=yo(r),a=e?gx(e.floating):!1;if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},h=so(1);const f=so(0),d=ho(r);if((d||!d&&!s)&&((Uh(r)!=="body"||Rm(o))&&(c=yx(r)),ho(r))){const y=vc(r);h=dh(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}const m=o&&!d&&!s?dj(o,c):so(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-c.scrollLeft*h.x+f.x+m.x,y:n.y*h.y-c.scrollTop*h.y+f.y+m.y}}function IJ(t){return Array.from(t.getClientRects())}function NJ(t){const e=yo(t),n=yx(t),r=t.ownerDocument.body,i=_i(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=_i(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bx(t);const a=-n.scrollTop;return _s(r).direction==="rtl"&&(o+=_i(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const OD=25;function BJ(t,e){const n=Ai(t),r=yo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const f=Mk();(!f||f&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}const h=bx(r);if(h<=0){const f=r.ownerDocument,d=f.body,m=getComputedStyle(d),y=f.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(r.clientWidth-d.clientWidth-y);v<=OD&&(s-=v)}else h<=OD&&(s+=h);return{width:s,height:o,x:a,y:c}}const jJ=new Set(["absolute","fixed"]);function $J(t,e){const n=vc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ho(t)?dh(t):so(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,h=r*s.y;return{width:o,height:a,x:c,y:h}}function PD(t,e,n){let r;if(e==="viewport")r=BJ(t,n);else if(e==="document")r=NJ(yo(t));else if(Ss(e))r=$J(e,n);else{const i=fj(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Fb(r)}function pj(t,e){const n=dl(t);return n===e||!Ss(n)||Th(n)?!1:_s(n).position==="fixed"||pj(n,e)}function VJ(t,e){const n=e.get(t);if(n)return n;let r=qp(t,[],!1).filter(a=>Ss(a)&&Uh(a)!=="body"),i=null;const s=_s(t).position==="fixed";let o=s?dl(t):t;for(;Ss(o)&&!Th(o);){const a=_s(o),c=Rk(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&jJ.has(i.position)||Rm(o)&&!c&&pj(t,o))?r=r.filter(f=>f!==o):i=a,o=dl(o)}return e.set(t,r),r}function FJ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?gx(e)?[]:VJ(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((h,f)=>{const d=PD(e,f,i);return h.top=_i(d.top,h.top),h.right=fl(d.right,h.right),h.bottom=fl(d.bottom,h.bottom),h.left=_i(d.left,h.left),h},PD(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function zJ(t){const{width:e,height:n}=hj(t);return{width:e,height:n}}function UJ(t,e,n){const r=ho(e),i=yo(e),s=n==="fixed",o=vc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=so(0);function h(){c.x=bx(i)}if(r||!r&&!s)if((Uh(e)!=="body"||Rm(i))&&(a=yx(e)),r){const y=vc(e,!0,s,e);c.x=y.x+e.clientLeft,c.y=y.y+e.clientTop}else i&&h();s&&!r&&i&&h();const f=i&&!r&&!s?dj(i,a):so(0),d=o.left+a.scrollLeft-c.x-f.x,m=o.top+a.scrollTop-c.y-f.y;return{x:d,y:m,width:o.width,height:o.height}}function OS(t){return _s(t).position==="static"}function DD(t,e){if(!ho(t)||_s(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return yo(t)===n&&(n=n.ownerDocument.body),n}function mj(t,e){const n=Ai(t);if(gx(t))return n;if(!ho(t)){let i=dl(t);for(;i&&!Th(i);){if(Ss(i)&&!OS(i))return i;i=dl(i)}return n}let r=DD(t,e);for(;r&&AJ(r)&&OS(r);)r=DD(r,e);return r&&Th(r)&&OS(r)&&!Rk(r)?n:r||MJ(t)||n}const HJ=async function(t){const e=this.getOffsetParent||mj,n=this.getDimensions,r=await n(t.floating);return{reference:UJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qJ(t){return _s(t).direction==="rtl"}const WJ={convertOffsetParentRelativeRectToViewportRelativeRect:LJ,getDocumentElement:yo,getClippingRect:FJ,getOffsetParent:mj,getElementRects:HJ,getClientRects:IJ,getDimensions:zJ,getScale:dh,isElement:Ss,isRTL:qJ};function gj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function GJ(t,e){let n=null,r;const i=yo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const h=t.getBoundingClientRect(),{left:f,top:d,width:m,height:y}=h;if(a||e(),!m||!y)return;const v=k0(d),w=k0(i.clientWidth-(f+m)),_=k0(i.clientHeight-(d+y)),S=k0(f),k={rootMargin:-v+"px "+-w+"px "+-_+"px "+-S+"px",threshold:_i(0,fl(1,c))||1};let P=!0;function M(O){const L=O[0].intersectionRatio;if(L!==c){if(!P)return o();L?o(!1,L):r=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!gj(h,t.getBoundingClientRect())&&o(),P=!1}try{n=new IntersectionObserver(M,{...k,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,k)}n.observe(t)}return o(!0),s}function KJ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,h=Ok(t),f=i||s?[...h?qp(h):[],...qp(e)]:[];f.forEach(S=>{i&&S.addEventListener("scroll",n,{passive:!0}),s&&S.addEventListener("resize",n)});const d=h&&a?GJ(h,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(S=>{let[A]=S;A&&A.target===h&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var k;(k=y)==null||k.observe(e)})),n()}),h&&!c&&y.observe(h),y.observe(e));let v,w=c?vc(t):null;c&&_();function _(){const S=vc(t);w&&!gj(w,S)&&n(),w=S,v=requestAnimationFrame(_)}return n(),()=>{var S;f.forEach(A=>{i&&A.removeEventListener("scroll",n),s&&A.removeEventListener("resize",n)}),d?.(),(S=y)==null||S.disconnect(),y=null,c&&cancelAnimationFrame(v)}}const YJ=vJ,XJ=xJ,JJ=gJ,QJ=SJ,ZJ=yJ,LD=mJ,eQ=wJ,tQ=(t,e,n)=>{const r=new Map,i={platform:WJ,...n},s={...i.platform,_c:r};return pJ(t,e,{...i,platform:s})};var nQ=typeof document<"u",rQ=function(){},Ky=nQ?E.useLayoutEffect:rQ;function zb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!zb(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!zb(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function yj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ID(t,e){const n=yj(t);return Math.round(e*n)/n}function PS(t){const e=E.useRef(t);return Ky(()=>{e.current=t}),e}function iQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:h}=t,[f,d]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=E.useState(r);zb(m,r)||y(r);const[v,w]=E.useState(null),[_,S]=E.useState(null),A=E.useCallback(q=>{q!==O.current&&(O.current=q,w(q))},[]),k=E.useCallback(q=>{q!==L.current&&(L.current=q,S(q))},[]),P=s||v,M=o||_,O=E.useRef(null),L=E.useRef(null),N=E.useRef(f),z=c!=null,j=PS(c),H=PS(i),W=PS(h),X=E.useCallback(()=>{if(!O.current||!L.current)return;const q={placement:e,strategy:n,middleware:m};H.current&&(q.platform=H.current),tQ(O.current,L.current,q).then(se=>{const T={...se,isPositioned:W.current!==!1};G.current&&!zb(N.current,T)&&(N.current=T,Ck.flushSync(()=>{d(T)}))})},[m,e,n,H,W]);Ky(()=>{h===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[h]);const G=E.useRef(!1);Ky(()=>(G.current=!0,()=>{G.current=!1}),[]),Ky(()=>{if(P&&(O.current=P),M&&(L.current=M),P&&M){if(j.current)return j.current(P,M,X);X()}},[P,M,X,j,z]);const ie=E.useMemo(()=>({reference:O,floating:L,setReference:A,setFloating:k}),[A,k]),F=E.useMemo(()=>({reference:P,floating:M}),[P,M]),Y=E.useMemo(()=>{const q={position:n,left:0,top:0};if(!F.floating)return q;const se=ID(F.floating,f.x),T=ID(F.floating,f.y);return a?{...q,transform:"translate("+se+"px, "+T+"px)",...yj(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:se,top:T}},[n,a,F.floating,f.x,f.y]);return E.useMemo(()=>({...f,update:X,refs:ie,elements:F,floatingStyles:Y}),[f,X,ie,F,Y])}const sQ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?LD({element:r.current,padding:i}).fn(n):{}:r?LD({element:r,padding:i}).fn(n):{}}}},oQ=(t,e)=>({...YJ(t),options:[t,e]}),aQ=(t,e)=>({...XJ(t),options:[t,e]}),lQ=(t,e)=>({...eQ(t),options:[t,e]}),cQ=(t,e)=>({...JJ(t),options:[t,e]}),uQ=(t,e)=>({...QJ(t),options:[t,e]}),hQ=(t,e)=>({...ZJ(t),options:[t,e]}),fQ=(t,e)=>({...sQ(t),options:[t,e]});var dQ="Arrow",bj=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return C.jsx(st.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});bj.displayName=dQ;var pQ=bj;function vj(t){const[e,n]=E.useState(void 0);return hl(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,h=Array.isArray(c)?c[0]:c;o=h.inlineSize,a=h.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Pk="Popper",[xj,vx]=ra(Pk),[mQ,wj]=xj(Pk),Sj=t=>{const{__scopePopper:e,children:n}=t,[r,i]=E.useState(null);return C.jsx(mQ,{scope:e,anchor:r,onAnchorChange:i,children:n})};Sj.displayName=Pk;var _j="PopperAnchor",Cj=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=wj(_j,n),o=E.useRef(null),a=Bt(e,o),c=E.useRef(null);return E.useEffect(()=>{const h=c.current;c.current=r?.current||o.current,h!==c.current&&s.onAnchorChange(c.current)}),r?null:C.jsx(st.div,{...i,ref:a})});Cj.displayName=_j;var Dk="PopperContent",[gQ,yQ]=xj(Dk),Aj=E.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:v,...w}=t,_=wj(Dk,n),[S,A]=E.useState(null),k=Bt(e,ke=>A(ke)),[P,M]=E.useState(null),O=vj(P),L=O?.width??0,N=O?.height??0,z=r+(s!=="center"?"-"+s:""),j=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},H=Array.isArray(h)?h:[h],W=H.length>0,X={padding:j,boundary:H.filter(vQ),altBoundary:W},{refs:G,floatingStyles:ie,placement:F,isPositioned:Y,middlewareData:q}=iQ({strategy:"fixed",placement:z,whileElementsMounted:(...ke)=>KJ(...ke,{animationFrame:y==="always"}),elements:{reference:_.anchor},middleware:[oQ({mainAxis:i+N,alignmentAxis:o}),c&&aQ({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?lQ():void 0,...X}),c&&cQ({...X}),uQ({...X,apply:({elements:ke,rects:ze,availableWidth:Ot,availableHeight:Kt})=>{const{width:Yt,height:Zn}=ze.reference,er=ke.floating.style;er.setProperty("--radix-popper-available-width",`${Ot}px`),er.setProperty("--radix-popper-available-height",`${Kt}px`),er.setProperty("--radix-popper-anchor-width",`${Yt}px`),er.setProperty("--radix-popper-anchor-height",`${Zn}px`)}}),P&&fQ({element:P,padding:a}),xQ({arrowWidth:L,arrowHeight:N}),m&&hQ({strategy:"referenceHidden",...X})]}),[se,T]=Tj(F),Z=Ir(v);hl(()=>{Y&&Z?.()},[Y,Z]);const ue=q.arrow?.x,I=q.arrow?.y,pe=q.arrow?.centerOffset!==0,[Ee,ye]=E.useState();return hl(()=>{S&&ye(window.getComputedStyle(S).zIndex)},[S]),C.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:Y?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ee,"--radix-popper-transform-origin":[q.transformOrigin?.x,q.transformOrigin?.y].join(" "),...q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:C.jsx(gQ,{scope:n,placedSide:se,onArrowChange:M,arrowX:ue,arrowY:I,shouldHideArrow:pe,children:C.jsx(st.div,{"data-side":se,"data-align":T,...w,ref:k,style:{...w.style,animation:Y?void 0:"none"}})})})});Aj.displayName=Dk;var kj="PopperArrow",bQ={top:"bottom",right:"left",bottom:"top",left:"right"},Ej=E.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=yQ(kj,r),o=bQ[s.placedSide];return C.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:C.jsx(pQ,{...i,ref:n,style:{...i.style,display:"block"}})})});Ej.displayName=kj;function vQ(t){return t!==null}var xQ=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[h,f]=Tj(n),d={start:"0%",center:"50%",end:"100%"}[f],m=(i.arrow?.x??0)+a/2,y=(i.arrow?.y??0)+c/2;let v="",w="";return h==="bottom"?(v=o?d:`${m}px`,w=`${-c}px`):h==="top"?(v=o?d:`${m}px`,w=`${r.floating.height+c}px`):h==="right"?(v=`${-c}px`,w=o?d:`${y}px`):h==="left"&&(v=`${r.floating.width+c}px`,w=o?d:`${y}px`),{data:{x:v,y:w}}}});function Tj(t){const[e,n="center"]=t.split("-");return[e,n]}var Rj=Sj,Mj=Cj,Oj=Aj,Pj=Ej,wQ="Portal",xx=E.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=E.useState(!1);hl(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?MX.createPortal(C.jsx(st.div,{...r,ref:e}),o):null});xx.displayName=wQ;function SQ(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var ks=t=>{const{present:e,children:n}=t,r=_Q(e),i=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),s=Bt(r.ref,CQ(i));return typeof n=="function"||r.isPresent?E.cloneElement(i,{ref:s}):null};ks.displayName="Presence";function _Q(t){const[e,n]=E.useState(),r=E.useRef(null),i=E.useRef(t),s=E.useRef("none"),o=t?"mounted":"unmounted",[a,c]=SQ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const h=E0(r.current);s.current=a==="mounted"?h:"none"},[a]),hl(()=>{const h=r.current,f=i.current;if(f!==t){const m=s.current,y=E0(h);t?c("MOUNT"):y==="none"||h?.display==="none"?c("UNMOUNT"):c(f&&m!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),hl(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,d=y=>{const w=E0(r.current).includes(CSS.escape(y.animationName));if(y.target===e&&w&&(c("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=y=>{y.target===e&&(s.current=E0(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function E0(t){return t?.animationName||"none"}function CQ(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var AQ=bB[" useInsertionEffect ".trim().toString()]||hl;function Hh({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=kQ({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:i;{const f=E.useRef(t!==void 0);E.useEffect(()=>{const d=f.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,r])}const h=E.useCallback(f=>{if(a){const d=EQ(f)?f(t):f;d!==t&&o.current?.(d)}else s(f)},[a,t,s,o]);return[c,h]}function kQ({defaultProp:t,onChange:e}){const[n,r]=E.useState(t),i=E.useRef(n),s=E.useRef(e);return AQ(()=>{s.current=e},[e]),E.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function EQ(t){return typeof t=="function"}var TQ=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ru=new WeakMap,T0=new WeakMap,R0={},DS=0,Dj=function(t){return t&&(t.host||Dj(t.parentNode))},RQ=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Dj(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},MQ=function(t,e,n,r){var i=RQ(e,Array.isArray(t)?t:[t]);R0[n]||(R0[n]=new WeakMap);var s=R0[n],o=[],a=new Set,c=new Set(i),h=function(d){!d||a.has(d)||(a.add(d),h(d.parentNode))};i.forEach(h);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(m){if(a.has(m))f(m);else try{var y=m.getAttribute(r),v=y!==null&&y!=="false",w=(Ru.get(m)||0)+1,_=(s.get(m)||0)+1;Ru.set(m,w),s.set(m,_),o.push(m),w===1&&v&&T0.set(m,!0),_===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",m,S)}})};return f(e),a.clear(),DS++,function(){o.forEach(function(d){var m=Ru.get(d)-1,y=s.get(d)-1;Ru.set(d,m),s.set(d,y),m||(T0.has(d)||d.removeAttribute(r),T0.delete(d)),y||d.removeAttribute(n)}),DS--,DS||(Ru=new WeakMap,Ru=new WeakMap,T0=new WeakMap,R0={})}},Lj=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=TQ(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),MQ(r,i,n,"aria-hidden")):function(){return null}},Xs=function(){return Xs=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xs.apply(this,arguments)};function Ij(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Yy(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Xy="right-scroll-bar-position",Jy="width-before-scroll-bar",OQ="with-scroll-bars-hidden",PQ="--removed-body-scroll-bar-size";function LS(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function DQ(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var LQ=typeof window<"u"?E.useLayoutEffect:E.useEffect,ND=new WeakMap;function IQ(t,e){var n=DQ(null,function(r){return t.forEach(function(i){return LS(i,r)})});return LQ(function(){var r=ND.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||LS(a,null)}),s.forEach(function(a){i.has(a)||LS(a,o)})}ND.set(n,t)},[t]),n}function NQ(t){return t}function BQ(t,e){e===void 0&&(e=NQ);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var f=o;o=[],f.forEach(s)},h=function(){return Promise.resolve().then(c)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return i}function jQ(t){t===void 0&&(t={});var e=BQ(null);return e.options=Xs({async:!0,ssr:!1},t),e}var Nj=function(t){var e=t.sideCar,n=Ij(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,Xs({},n))};Nj.isSideCarExport=!0;function $Q(t,e){return t.useMedium(e),Nj}var Bj=jQ(),IS=function(){},wx=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:IS,onWheelCapture:IS,onTouchMoveCapture:IS}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,h=t.removeScrollBar,f=t.enabled,d=t.shards,m=t.sideCar,y=t.noRelative,v=t.noIsolation,w=t.inert,_=t.allowPinchZoom,S=t.as,A=S===void 0?"div":S,k=t.gapMode,P=Ij(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=m,O=IQ([n,e]),L=Xs(Xs({},P),i);return E.createElement(E.Fragment,null,f&&E.createElement(M,{sideCar:Bj,removeScrollBar:h,shards:d,noRelative:y,noIsolation:v,inert:w,setCallbacks:s,allowPinchZoom:!!_,lockRef:n,gapMode:k}),o?E.cloneElement(E.Children.only(a),Xs(Xs({},L),{ref:O})):E.createElement(A,Xs({},L,{className:c,ref:O}),a))});wx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wx.classNames={fullWidth:Jy,zeroRight:Xy};var VQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function FQ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=VQ();return e&&t.setAttribute("nonce",e),t}function zQ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function UQ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var HQ=function(){var t=0,e=null;return{add:function(n){t==0&&(e=FQ())&&(zQ(e,n),UQ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qQ=function(){var t=HQ();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jj=function(){var t=qQ(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},WQ={left:0,top:0,right:0,gap:0},NS=function(t){return parseInt(t||"",10)||0},GQ=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[NS(n),NS(r),NS(i)]},KQ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return WQ;var e=GQ(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},YQ=jj(),ph="data-scroll-locked",XQ=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(OQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ph,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xy,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Jy,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xy," .").concat(Xy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jy," .").concat(Jy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ph,`] {
    `).concat(PQ,": ").concat(a,`px;
  }
`)},BD=function(){var t=parseInt(document.body.getAttribute(ph)||"0",10);return isFinite(t)?t:0},JQ=function(){E.useEffect(function(){return document.body.setAttribute(ph,(BD()+1).toString()),function(){var t=BD()-1;t<=0?document.body.removeAttribute(ph):document.body.setAttribute(ph,t.toString())}},[])},QQ=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;JQ();var s=E.useMemo(function(){return KQ(i)},[i]);return E.createElement(YQ,{styles:XQ(s,!e,i,n?"":"!important")})},V_=!1;if(typeof window<"u")try{var M0=Object.defineProperty({},"passive",{get:function(){return V_=!0,!0}});window.addEventListener("test",M0,M0),window.removeEventListener("test",M0,M0)}catch{V_=!1}var Mu=V_?{passive:!1}:!1,ZQ=function(t){return t.tagName==="TEXTAREA"},$j=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ZQ(t)&&n[e]==="visible")},eZ=function(t){return $j(t,"overflowY")},tZ=function(t){return $j(t,"overflowX")},jD=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Vj(t,r);if(i){var s=Fj(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nZ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},rZ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Vj=function(t,e){return t==="v"?eZ(e):tZ(e)},Fj=function(t,e){return t==="v"?nZ(e):rZ(e)},iZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},sZ=function(t,e,n,r,i){var s=iZ(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,c=e.contains(a),h=!1,f=o>0,d=0,m=0;do{if(!a)break;var y=Fj(t,a),v=y[0],w=y[1],_=y[2],S=w-_-s*v;(v||S)&&Vj(t,a)&&(d+=S,m+=v);var A=a.parentNode;a=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(f&&Math.abs(d)<1||!f&&Math.abs(m)<1)&&(h=!0),h},O0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$D=function(t){return[t.deltaX,t.deltaY]},VD=function(t){return t&&"current"in t?t.current:t},oZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},aZ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lZ=0,Ou=[];function cZ(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),i=E.useState(lZ++)[0],s=E.useState(jj)[0],o=E.useRef(t);E.useEffect(function(){o.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=Yy([t.lockRef.current],(t.shards||[]).map(VD),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=E.useCallback(function(w,_){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var S=O0(w),A=n.current,k="deltaX"in w?w.deltaX:A[0]-S[0],P="deltaY"in w?w.deltaY:A[1]-S[1],M,O=w.target,L=Math.abs(k)>Math.abs(P)?"h":"v";if("touches"in w&&L==="h"&&O.type==="range")return!1;var N=jD(L,O);if(!N)return!0;if(N?M=L:(M=L==="v"?"h":"v",N=jD(L,O)),!N)return!1;if(!r.current&&"changedTouches"in w&&(k||P)&&(r.current=M),!M)return!0;var z=r.current||M;return sZ(z,_,w,z==="h"?k:P)},[]),c=E.useCallback(function(w){var _=w;if(!(!Ou.length||Ou[Ou.length-1]!==s)){var S="deltaY"in _?$D(_):O0(_),A=e.current.filter(function(M){return M.name===_.type&&(M.target===_.target||_.target===M.shadowParent)&&oZ(M.delta,S)})[0];if(A&&A.should){_.cancelable&&_.preventDefault();return}if(!A){var k=(o.current.shards||[]).map(VD).filter(Boolean).filter(function(M){return M.contains(_.target)}),P=k.length>0?a(_,k[0]):!o.current.noIsolation;P&&_.cancelable&&_.preventDefault()}}},[]),h=E.useCallback(function(w,_,S,A){var k={name:w,delta:_,target:S,should:A,shadowParent:uZ(S)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(P){return P!==k})},1)},[]),f=E.useCallback(function(w){n.current=O0(w),r.current=void 0},[]),d=E.useCallback(function(w){h(w.type,$D(w),w.target,a(w,t.lockRef.current))},[]),m=E.useCallback(function(w){h(w.type,O0(w),w.target,a(w,t.lockRef.current))},[]);E.useEffect(function(){return Ou.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Mu),document.addEventListener("touchmove",c,Mu),document.addEventListener("touchstart",f,Mu),function(){Ou=Ou.filter(function(w){return w!==s}),document.removeEventListener("wheel",c,Mu),document.removeEventListener("touchmove",c,Mu),document.removeEventListener("touchstart",f,Mu)}},[]);var y=t.removeScrollBar,v=t.inert;return E.createElement(E.Fragment,null,v?E.createElement(s,{styles:aZ(i)}):null,y?E.createElement(QQ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function uZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const hZ=$Q(Bj,cZ);var Lk=E.forwardRef(function(t,e){return E.createElement(wx,Xs({},t,{ref:e,sideCar:hZ}))});Lk.classNames=wx.classNames;var Ik=t=>{const e=E.useRef(void 0);return E.useCallback(r=>{e.current&&e.current(),r&&(e.current=t(r))},[t])},fZ=()=>{const t=Ei(),e=Tt(()=>t.message()),n=E.useCallback(r=>{const i=()=>{e.setIsHovering(!0)},s=()=>{e.setIsHovering(!1)};return r.addEventListener("mouseenter",i),r.addEventListener("mouseleave",s),r.matches(":hover")&&e.setIsHovering(!0),()=>{r.removeEventListener("mouseenter",i),r.removeEventListener("mouseleave",s),e.setIsHovering(!1)}},[e]);return Ik(n)},Nk=E.forwardRef((t,e)=>{const n=fZ(),r=Bt(e,n);return C.jsx(st.div,{...t,ref:r})});Nk.displayName="MessagePrimitive.Root";var zj=()=>Tt(({part:e})=>{if(e.type!=="text"&&e.type!=="reasoning")throw new Error("MessagePartText can only be used inside text or reasoning message parts.");return e}),Uj=E.forwardRef(({smooth:t=!0,component:e="span",...n},r)=>{const{text:i,status:s}=YB(zj(),t);return C.jsx(e,{"data-status":s.type,...n,ref:r,children:i})});Uj.displayName="MessagePartPrimitive.Text";var dZ=()=>Tt(({part:e})=>{if(e.type!=="image")throw new Error("MessagePartImage can only be used inside image message parts.");return e}),Hj=E.forwardRef((t,e)=>{const{image:n}=dZ();return C.jsx(st.img,{src:n,...t,ref:e})});Hj.displayName="MessagePartPrimitive.Image";var qj=({children:t})=>Tt(({part:n})=>n.status.type==="running")?t:null;qj.displayName="MessagePartPrimitive.InProgress";const FD=t=>Symbol.iterator in t,zD=t=>"entries"in t,UD=(t,e)=>{const n=t instanceof Map?t:new Map(t.entries()),r=e instanceof Map?e:new Map(e.entries());if(n.size!==r.size)return!1;for(const[i,s]of n)if(!r.has(i)||!Object.is(s,r.get(i)))return!1;return!0},pZ=(t,e)=>{const n=t[Symbol.iterator](),r=e[Symbol.iterator]();let i=n.next(),s=r.next();for(;!i.done&&!s.done;){if(!Object.is(i.value,s.value))return!1;i=n.next(),s=r.next()}return!!i.done&&!!s.done};function mZ(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:FD(t)&&FD(e)?zD(t)&&zD(e)?UD(t,e):pZ(t,e):UD({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function gZ(t){const e=xe.useRef(void 0);return n=>{const r=t(n);return mZ(e.current,r)?e.current:e.current=r}}var yZ=t=>{const e=[];let n=-1;for(let r=0;r<t.length;r++)t[r]==="tool-call"?n===-1&&(n=r):(n!==-1&&(e.push({type:"toolGroup",startIndex:n,endIndex:r-1}),n=-1),e.push({type:"single",index:r}));return n!==-1&&e.push({type:"toolGroup",startIndex:n,endIndex:t.length-1}),e},bZ=()=>{const t=Tt(gZ(e=>e.message.parts.map(n=>n.type)));return E.useMemo(()=>t.length===0?[]:yZ(t),[t])},vZ=({Fallback:t,...e})=>{const n=Tt(({toolUIs:r})=>{const i=r[e.toolName]??t;return Array.isArray(i)?i[0]:i});return n?C.jsx(n,{...e}):null},Xa={Text:()=>C.jsxs("p",{style:{whiteSpace:"pre-line"},children:[C.jsx(Uj,{}),C.jsx(qj,{children:C.jsx("span",{style:{fontFamily:"revert"},children:" "})})]}),Reasoning:()=>null,Source:()=>null,Image:()=>C.jsx(Hj,{}),File:()=>null,Unstable_Audio:()=>null,ToolGroup:({children:t})=>t},xZ=({components:{Text:t=Xa.Text,Reasoning:e=Xa.Reasoning,Image:n=Xa.Image,Source:r=Xa.Source,File:i=Xa.File,Unstable_Audio:s=Xa.Unstable_Audio,tools:o={}}={}})=>{const a=Ei(),c=Tt(({part:f})=>f),h=c.type;if(h==="tool-call"){const f=m=>a.part().addToolResult(m);if("Override"in o)return C.jsx(o.Override,{...c,addResult:f});const d=o.by_name?.[c.toolName]??o.Fallback;return C.jsx(vZ,{...c,Fallback:d,addResult:f})}if(c.status?.type==="requires-action")throw new Error("Encountered unexpected requires-action status");switch(h){case"text":return C.jsx(t,{...c});case"reasoning":return C.jsx(e,{...c});case"source":return C.jsx(r,{...c});case"image":return C.jsx(n,{...c});case"file":return C.jsx(i,{...c});case"audio":return C.jsx(s,{...c});default:const f=h;throw new Error(`Unknown message part type: ${f}`)}},F_=E.memo(({index:t,components:e})=>C.jsx(dX,{index:t,children:C.jsx(xZ,{components:e})}),(t,e)=>t.index===e.index&&t.components?.Text===e.components?.Text&&t.components?.Reasoning===e.components?.Reasoning&&t.components?.Source===e.components?.Source&&t.components?.Image===e.components?.Image&&t.components?.File===e.components?.File&&t.components?.Unstable_Audio===e.components?.Unstable_Audio&&t.components?.tools===e.components?.tools&&t.components?.ToolGroup===e.components?.ToolGroup);F_.displayName="MessagePrimitive.PartByIndex";var wZ=({status:t,component:e})=>C.jsx(mX,{text:"",isRunning:t.type==="running",children:C.jsx(e,{type:"text",text:"",status:t})}),SZ=Object.freeze({type:"complete"}),_Z=({components:t})=>{const e=Tt(n=>n.message.status??SZ);return t?.Empty?C.jsx(t.Empty,{status:e}):C.jsx(wZ,{status:e,component:t?.Text??Xa.Text})},CZ=E.memo(_Z,(t,e)=>t.components?.Empty===e.components?.Empty&&t.components?.Text===e.components?.Text),Bk=({components:t})=>{const e=Tt(({message:i})=>i.parts.length),n=bZ(),r=E.useMemo(()=>e===0?C.jsx(CZ,{components:t}):n.map(i=>{if(i.type==="single")return C.jsx(F_,{index:i.index,components:t},i.index);{const s=t.ToolGroup??Xa.ToolGroup;return C.jsx(s,{startIndex:i.startIndex,endIndex:i.endIndex,children:Array.from({length:i.endIndex-i.startIndex+1},(o,a)=>C.jsx(F_,{index:i.startIndex+a,components:t},a))},i.startIndex)}}),[n,t,e]);return C.jsx(C.Fragment,{children:r})};Bk.displayName="MessagePrimitive.Parts";var AZ=t=>Tt(({message:e})=>{const{role:n,attachments:r,parts:i,branchCount:s,isLast:o,speech:a,submittedFeedback:c,isCopied:h,isHovering:f}=e;return!(t.hasBranches===!0&&s<2||t.user&&n!=="user"||t.assistant&&n!=="assistant"||t.system&&n!=="system"||t.lastOrHover===!0&&!f&&!o||t.last!==void 0&&t.last!==o||t.copied===!0&&!h||t.copied===!1&&h||t.speaking===!0&&a==null||t.speaking===!1&&a!=null||t.hasAttachments===!0&&(n!=="user"||!r?.length)||t.hasAttachments===!1&&n==="user"&&r?.length||t.hasContent===!0&&i.length===0||t.hasContent===!1&&i.length>0||t.submittedFeedback!==void 0&&(c?.type??null)!==t.submittedFeedback)}),z_=({children:t,...e})=>AZ(e)?t:null;z_.displayName="MessagePrimitive.If";var Wj=({children:t})=>Tt(({message:n})=>n.status?.type==="incomplete"&&n.status.reason==="error")?C.jsx(C.Fragment,{children:t}):null;Wj.displayName="MessagePrimitive.Error";var Gj=()=>{const t=Ei(),e=Tt(r=>r.thread.isRunning||!r.composer.isEditing||r.composer.isEmpty),n=E.useCallback(()=>{t.composer().send()},[t]);return e?null:n},kZ=tj("ComposerPrimitive.Send",Gj),Kj=E.forwardRef(({onSubmit:t,...e},n)=>{const r=Gj(),i=s=>{s.preventDefault(),r&&r()};return C.jsx(st.form,{...e,ref:n,onSubmit:Ie(t,i)})});Kj.displayName="ComposerPrimitive.Root";function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wp.apply(null,arguments)}function Yj(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var EZ=E.useLayoutEffect,TZ=function(e){var n=xe.useRef(e);return EZ(function(){n.current=e}),n},HD=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},RZ=function(e,n){var r=xe.useRef();return xe.useCallback(function(i){e.current=i,r.current&&HD(r.current,null),r.current=n,n&&HD(n,i)},[n])},qD={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},MZ=function(e){Object.keys(qD).forEach(function(n){e.style.setProperty(n,qD[n],"important")})},WD=MZ,Ar=null,GD=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function OZ(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ar||(Ar=document.createElement("textarea"),Ar.setAttribute("tabindex","-1"),Ar.setAttribute("aria-hidden","true"),WD(Ar)),Ar.parentNode===null&&document.body.appendChild(Ar);var i=t.paddingSize,s=t.borderSize,o=t.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(m){var y=m;Ar.style[y]=o[y]}),WD(Ar),Ar.value=e;var c=GD(Ar,t);Ar.value=e,c=GD(Ar,t),Ar.value="x";var h=Ar.scrollHeight-i,f=h*n;a==="border-box"&&(f=f+i+s),c=Math.max(f,c);var d=h*r;return a==="border-box"&&(d=d+i+s),c=Math.min(d,c),[c,h]}var KD=function(){},PZ=function(e,n){return e.reduce(function(r,i){return r[i]=n[i],r},{})},DZ=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],LZ=!!document.documentElement.currentStyle,IZ=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=PZ(DZ,n),i=r.boxSizing;if(i==="")return null;LZ&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},NZ=IZ;function jk(t,e,n){var r=TZ(n);E.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(t)return t.addEventListener(e,i),function(){return t.removeEventListener(e,i)}},[])}var BZ=function(e,n){jk(document.body,"reset",function(r){e.current.form===r.target&&n(r)})},jZ=function(e){jk(window,"resize",e)},$Z=function(e){jk(document.fonts,"loadingdone",e)},VZ=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],FZ=function(e,n){var r=e.cacheMeasurements,i=e.maxRows,s=e.minRows,o=e.onChange,a=o===void 0?KD:o,c=e.onHeightChange,h=c===void 0?KD:c,f=Yj(e,VZ),d=f.value!==void 0,m=E.useRef(null),y=RZ(m,n),v=E.useRef(0),w=E.useRef(),_=function(){var k=m.current,P=r&&w.current?w.current:NZ(k);if(P){w.current=P;var M=OZ(P,k.value||k.placeholder||"x",s,i),O=M[0],L=M[1];v.current!==O&&(v.current=O,k.style.setProperty("height",O+"px","important"),h(O,{rowHeight:L}))}},S=function(k){d||_(),a(k)};return E.useLayoutEffect(_),BZ(m,function(){if(!d){var A=m.current.value;requestAnimationFrame(function(){var k=m.current;k&&A!==k.value&&_()})}}),jZ(_),$Z(_),E.createElement("textarea",Wp({},f,{onChange:S,ref:y}))},zZ=E.forwardRef(FZ),Xj=t=>{const e=Ir(t),n=_Y(r=>r.onScrollToBottom);E.useEffect(()=>n(e),[n,e])},Jj=E.forwardRef(({autoFocus:t=!1,asChild:e,disabled:n,onChange:r,onKeyDown:i,onPaste:s,submitOnEnter:o=!0,cancelOnEscape:a=!0,unstable_focusOnRunStart:c=!0,unstable_focusOnScrollToBottom:h=!0,unstable_focusOnThreadSwitched:f=!0,addAttachmentOnPaste:d=!0,...m},y)=>{const v=Ei(),w=Tt(({composer:N})=>N.isEditing?N.text:""),_=e?XB:zZ,S=Tt(({thread:N})=>N.isDisabled)||n,A=E.useRef(null),k=Bt(y,A);nj(N=>{if(!a)return;const z=v.composer();z.getState().canCancel&&(z.cancel(),N.preventDefault())});const P=N=>{S||!o||N.nativeEvent.isComposing||N.key==="Enter"&&N.shiftKey===!1&&(v.thread().getState().isRunning||(N.preventDefault(),A.current?.closest("form")?.requestSubmit()))},M=async N=>{if(!d)return;const z=v.thread().getState().capabilities,j=Array.from(N.clipboardData?.files||[]);if(z.attachments&&j.length>0)try{N.preventDefault(),await Promise.all(j.map(H=>v.composer().addAttachment(H)))}catch(H){console.error("Error adding attachment:",H)}},O=t&&!S,L=E.useCallback(()=>{const N=A.current;!N||!O||(N.focus({preventScroll:!0}),N.setSelectionRange(N.value.length,N.value.length))},[O]);return E.useEffect(()=>L(),[L]),Xj(()=>{v.composer().getState().type==="thread"&&h&&L()}),E.useEffect(()=>{if(!(v.composer().getState().type!=="thread"||!c))return v.on("thread.run-start",L)},[c,L,v]),E.useEffect(()=>{if(!(v.composer().getState().type!=="thread"||!f))return v.on("thread-list-item.switched-to",L)},[f,L,v]),C.jsx(_,{name:"input",value:w,...m,ref:k,disabled:S,onChange:Ie(r,N=>{v.composer().getState().isEditing&&(v.composer().setText(N.target.value),v.flushSync())}),onKeyDown:Ie(i,P),onPaste:Ie(s,M)})});Jj.displayName="ComposerPrimitive.Input";var UZ=()=>{const t=Ei(),e=Tt(({composer:r})=>!r.canCancel),n=E.useCallback(()=>{t.composer().cancel()},[t]);return e?null:n},HZ=tj("ComposerPrimitive.Cancel",UZ),Qj=E.forwardRef((t,e)=>C.jsx(st.div,{role:"alert",...t,ref:e}));Qj.displayName="ErrorPrimitive.Root";var Zj=E.forwardRef(({children:t,...e},n)=>{const r=Tt(({message:i})=>i.status?.type==="incomplete"&&i.status.reason==="error"?i.status.error:void 0);return r===void 0?null:C.jsx(st.span,{...e,ref:n,children:t??String(r)})});Zj.displayName="ErrorPrimitive.Message";var e6=E.forwardRef((t,e)=>C.jsx(st.div,{...t,ref:e}));e6.displayName="ThreadPrimitive.Root";var t6=({children:t})=>Tt(({thread:n})=>n.messages.length===0)?t:null;t6.displayName="ThreadPrimitive.Empty";var qZ=t=>Tt(({thread:e})=>!(t.empty===!0&&e.messages.length!==0||t.empty===!1&&e.messages.length===0||t.running===!0&&!e.isRunning||t.running===!1&&e.isRunning||t.disabled===!0&&!e.isDisabled||t.disabled===!1&&e.isDisabled)),Ub=({children:t,...e})=>qZ(e)?t:null;Ub.displayName="ThreadPrimitive.If";var WZ=t=>{const e=Ir(t),n=E.useCallback(r=>{const i=new ResizeObserver(()=>{e()}),s=new MutationObserver(()=>{e()});return i.observe(r),s.observe(r,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{i.disconnect(),s.disconnect()}},[e]);return Ik(n)},GZ=({autoScroll:t=!0})=>{const e=E.useRef(null),n=NB(),r=E.useRef(0),i=E.useRef(!1),s=E.useCallback(f=>{const d=e.current;!d||!t||(i.current=!0,d.scrollTo({top:d.scrollHeight,behavior:f}))},[t]),o=()=>{const f=e.current;if(!f)return;const d=n.getState().isAtBottom,m=f.scrollHeight-f.scrollTop<=f.clientHeight+1;!m&&r.current<f.scrollTop||(m&&(i.current=!1),m!==d&&Bb(n).setState({isAtBottom:m})),r.current=f.scrollTop},a=WZ(()=>{(i.current||n.getState().isAtBottom)&&s("instant"),o()}),c=Ik(f=>(f.addEventListener("scroll",o),()=>{f.removeEventListener("scroll",o)}));return Xj(()=>{s("auto")}),gX("thread.run-start",()=>s("auto")),Bt(a,c,e)},n6=E.forwardRef(({autoScroll:t,children:e,...n},r)=>{const i=GZ({autoScroll:t}),s=Bt(r,i);return C.jsx(st.div,{...n,ref:s,children:e})});n6.displayName="ThreadPrimitive.ViewportScrollable";var U_=E.forwardRef((t,e)=>C.jsx(BB,{children:C.jsx(n6,{...t,ref:e})}));U_.displayName="ThreadPrimitive.Viewport";var r6=(t,e)=>t.Message===e.Message&&t.EditComposer===e.EditComposer&&t.UserEditComposer===e.UserEditComposer&&t.AssistantEditComposer===e.AssistantEditComposer&&t.SystemEditComposer===e.SystemEditComposer&&t.UserMessage===e.UserMessage&&t.AssistantMessage===e.AssistantMessage&&t.SystemMessage===e.SystemMessage,KZ=()=>null,YZ=(t,e,n)=>{switch(e){case"user":return n?t.UserEditComposer??t.EditComposer??t.UserMessage??t.Message:t.UserMessage??t.Message;case"assistant":return n?t.AssistantEditComposer??t.EditComposer??t.AssistantMessage??t.Message:t.AssistantMessage??t.Message;case"system":return n?t.SystemEditComposer??t.EditComposer??t.SystemMessage??t.Message:t.SystemMessage??KZ;default:const r=e;throw new Error(`Unknown message role: ${r}`)}},XZ=({components:t})=>{const e=Tt(({message:i})=>i.role),n=Tt(({message:i})=>i.composer.isEditing),r=YZ(t,e,n);return C.jsx(r,{})},i6=E.memo(({index:t,components:e})=>C.jsx(fX,{index:t,children:C.jsx(XZ,{components:e})}),(t,e)=>t.index===e.index&&r6(t.components,e.components));i6.displayName="ThreadPrimitive.MessageByIndex";var s6=({components:t})=>{const e=Tt(({thread:r})=>r.messages.length);return E.useMemo(()=>e===0?null:Array.from({length:e},(r,i)=>C.jsx(i6,{index:i,components:t},i)),[e,t])};s6.displayName="ThreadPrimitive.Messages";var JZ=E.memo(s6,(t,e)=>r6(t.components,e.components));function Ke(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function de(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let o6=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return o6=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Gp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const H_=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class nt extends Error{}let Ti=class q_ extends nt{constructor(e,n,r,i){super(`${q_.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i?.get("request-id"),this.error=n}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Sx({message:r,cause:H_(n)});const s=n;return e===400?new l6(e,s,r,i):e===401?new c6(e,s,r,i):e===403?new u6(e,s,r,i):e===404?new h6(e,s,r,i):e===409?new f6(e,s,r,i):e===422?new d6(e,s,r,i):e===429?new p6(e,s,r,i):e>=500?new m6(e,s,r,i):new q_(e,s,r,i)}},ms=class extends Ti{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Sx=class extends Ti{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},a6=class extends Sx{constructor({message:e}={}){super({message:e??"Request timed out."})}},l6=class extends Ti{},c6=class extends Ti{},u6=class extends Ti{},h6=class extends Ti{},f6=class extends Ti{},d6=class extends Ti{},p6=class extends Ti{},m6=class extends Ti{};const QZ=/^[a-z][a-z0-9+.-]*:/i,ZZ=t=>QZ.test(t);let W_=t=>(W_=Array.isArray,W_(t)),YD=W_;function XD(t){return typeof t!="object"?{}:t??{}}function eee(t){if(!t)return!0;for(const e in t)return!1;return!0}function tee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const nee=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new nt(`${t} must be an integer`);if(e<0)throw new nt(`${t} must be a positive integer`);return e},g6=t=>{try{return JSON.parse(t)}catch{return}},ree=t=>new Promise(e=>setTimeout(e,t)),Uu="0.60.0",iee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function see(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const oee=()=>{const t=see();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uu,"X-Stainless-OS":QD(Deno.build.os),"X-Stainless-Arch":JD(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uu,"X-Stainless-OS":QD(globalThis.process.platform??"unknown"),"X-Stainless-Arch":JD(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=aee();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function aee(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const JD=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",QD=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ZD;const lee=()=>ZD??(ZD=oee());function cee(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function y6(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function b6(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return y6({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){await e.return?.()}})}function $k(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function uee(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const hee=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function fee(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let eL;function Vk(t){let e;return(eL??(e=new globalThis.TextEncoder,eL=e.encode.bind(e)))(t)}let tL;function nL(t){let e;return(tL??(e=new globalThis.TextDecoder,tL=e.decode.bind(e)))(t)}var pi,mi;let Mm=class{constructor(){pi.set(this,void 0),mi.set(this,void 0),Ke(this,pi,new Uint8Array),Ke(this,mi,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Vk(e):e;Ke(this,pi,fee([de(this,pi,"f"),n]));const r=[];let i;for(;(i=dee(de(this,pi,"f"),de(this,mi,"f")))!=null;){if(i.carriage&&de(this,mi,"f")==null){Ke(this,mi,i.index);continue}if(de(this,mi,"f")!=null&&(i.index!==de(this,mi,"f")+1||i.carriage)){r.push(nL(de(this,pi,"f").subarray(0,de(this,mi,"f")-1))),Ke(this,pi,de(this,pi,"f").subarray(de(this,mi,"f"))),Ke(this,mi,null);continue}const s=de(this,mi,"f")!==null?i.preceding-1:i.preceding,o=nL(de(this,pi,"f").subarray(0,s));r.push(o),Ke(this,pi,de(this,pi,"f").subarray(i.index)),Ke(this,mi,null)}return r}flush(){return de(this,pi,"f").length?this.decode(`
`):[]}};pi=new WeakMap,mi=new WeakMap;Mm.NEWLINE_CHARS=new Set([`
`,"\r"]);Mm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dee(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function pee(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Hb={off:0,error:200,warn:300,info:400,debug:500},rL=(t,e,n)=>{if(t){if(tee(Hb,t))return t;Er(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Hb))}`)}};function Fd(){}function P0(t,e,n){return!e||Hb[t]>Hb[n]?Fd:e[t].bind(e)}const mee={error:Fd,warn:Fd,info:Fd,debug:Fd};let iL=new WeakMap;function Er(t){const e=t.logger,n=t.logLevel??"off";if(!e)return mee;const r=iL.get(e);if(r&&r[0]===n)return r[1];const i={error:P0("error",e,n),warn:P0("warn",e,n),info:P0("info",e,n),debug:P0("debug",e,n)};return iL.set(e,[n,i]),i}const Jl=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var dd;let Kp=class zd{constructor(e,n,r){this.iterator=e,dd.set(this,void 0),this.controller=n,Ke(this,dd,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Er(r):console;async function*o(){if(i)throw new nt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of gee(e,n)){if(c.event==="completion")try{yield JSON.parse(c.data)}catch(h){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),h}if(c.event==="message_start"||c.event==="message_delta"||c.event==="message_stop"||c.event==="content_block_start"||c.event==="content_block_delta"||c.event==="content_block_stop")try{yield JSON.parse(c.data)}catch(h){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),h}if(c.event!=="ping"&&c.event==="error")throw new Ti(void 0,g6(c.data)??c.data,void 0,e.headers)}a=!0}catch(c){if(Gp(c))return;throw c}finally{a||n.abort()}}return new zd(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new Mm,c=$k(e);for await(const h of c)for(const f of a.decode(h))yield f;for(const h of a.flush())yield h}async function*o(){if(i)throw new nt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of s())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(Gp(c))return;throw c}finally{a||n.abort()}}return new zd(o,n,r)}[(dd=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new zd(()=>i(e),this.controller,de(this,dd,"f")),new zd(()=>i(n),this.controller,de(this,dd,"f"))]}toReadableStream(){const e=this;let n;return y6({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=Vk(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}};async function*gee(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new nt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new nt("Attempted to iterate over a response with no body");const n=new bee,r=new Mm,i=$k(t.body);for await(const s of yee(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*yee(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Vk(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=pee(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}let bee=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=vee(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function vee(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function v6(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{if(e.options.stream)return Er(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):Kp.fromSSEResponse(n,e.controller);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type")?.split(";")[0]?.trim();if(c?.includes("application/json")||c?.endsWith("+json")){const d=await n.json();return x6(d,n)}return await n.text()})();return Er(t).debug(`[${r}] response parsed`,Jl({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function x6(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var Ud;let w6=class S6 extends Promise{constructor(e,n,r=v6){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,Ud.set(this,void 0),Ke(this,Ud,e)}_thenUnwrap(e){return new S6(de(this,Ud,"f"),this.responsePromise,async(n,r)=>x6(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(de(this,Ud,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Ud=new WeakMap;var D0;let xee=class{constructor(e,n,r,i){D0.set(this,void 0),Ke(this,D0,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new nt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await de(this,D0,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(D0=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}},wee=class extends w6{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await v6(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}},Om=class extends xee{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const n=this.first_id;return n?{...this.options,query:{...XD(this.options.query),before_id:n}}:null}const e=this.last_id;return e?{...this.options,query:{...XD(this.options.query),after_id:e}}:null}};const _6=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function mh(t,e,n){return _6(),new File(t,e??"unknown_file",n)}function Qy(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const C6=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",See=async(t,e)=>({...t,body:await Cee(t.body,e)}),sL=new WeakMap;function _ee(t){const e=typeof t=="function"?t:t.fetch,n=sL.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return sL.set(e,r),r}const Cee=async(t,e)=>{if(!await _ee(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>G_(n,r,i))),n},Aee=t=>t instanceof Blob&&"name"in t,G_=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response){let r={};const i=n.headers.get("Content-Type");i&&(r={type:i}),t.append(e,mh([await n.blob()],Qy(n),r))}else if(C6(n))t.append(e,mh([await new Response(b6(n)).blob()],Qy(n)));else if(Aee(n))t.append(e,mh([n],Qy(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map(r=>G_(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>G_(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},A6=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",kee=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&A6(t),Eee=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Tee(t,e,n){if(_6(),t=await t,e||(e=Qy(t)),kee(t))return t instanceof File&&e==null&&n==null?t:mh([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...n});if(Eee(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),mh(await K_(i),e,n)}const r=await K_(t);if(!n?.type){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return mh(r,e,n)}async function K_(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(A6(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(C6(t))for await(const n of t)e.push(...await K_(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Ree(t)}`)}return e}function Ree(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let ia=class{constructor(e){this._client=e}};const k6=Symbol.for("brand.privateNullableHeaders");function*Mee(t){if(!t)return;if(k6 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():YD(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=YD(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Vt=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Mee(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[k6]:!0,values:e,nulls:n}};function E6(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const oL=Object.freeze(Object.create(null)),Oee=(t=E6)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((f,d,m)=>{/[?#]/.test(d)&&(i=!0);const y=r[m];let v=(i?encodeURIComponent:t)(""+y);return m!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??oL)??oL)?.toString)&&(v=y+"",s.push({start:f.length+d.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+d+(m===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=c.exec(a))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((f,d)=>f.start-d.start),s.length>0){let f=0;const d=s.reduce((m,y)=>{const v=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,m+v+w},"");throw new nt(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${d}`)}return o},ys=Oee(E6);let T6=class extends ia{list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/files",Om,{query:i,...n,headers:Vt([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(ys`/v1/files/${e}`,{...r,headers:Vt([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r?.headers])})}download(e,n={},r){const{betas:i}=n??{};return this._client.get(ys`/v1/files/${e}/content`,{...r,headers:Vt([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}retrieveMetadata(e,n={},r){const{betas:i}=n??{};return this._client.get(ys`/v1/files/${e}`,{...r,headers:Vt([{"anthropic-beta":[...i??[],"files-api-2025-04-14"].toString()},r?.headers])})}upload(e,n){const{betas:r,...i}=e;return this._client.post("/v1/files",See({body:i,...n,headers:Vt([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])},this._client))}},R6=class extends ia{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(ys`/v1/models/${e}?beta=true`,{...r,headers:Vt([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},r?.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models?beta=true",Om,{query:i,...n,headers:Vt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}};class _x{constructor(e,n){this.iterator=e,this.controller=n}async*decoder(){const e=new Mm;for await(const n of this.iterator)for(const r of e.decode(n))yield JSON.parse(r);for(const n of e.flush())yield JSON.parse(n)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,n){if(!e.body)throw n.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new nt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new nt("Attempted to iterate over a response with no body");return new _x($k(e.body),n)}}let M6=class extends ia{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/messages/batches?beta=true",{body:i,...n,headers:Vt([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(ys`/v1/messages/batches/${e}?beta=true`,{...r,headers:Vt([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r?.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",Om,{query:i,...n,headers:Vt([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}delete(e,n={},r){const{betas:i}=n??{};return this._client.delete(ys`/v1/messages/batches/${e}?beta=true`,{...r,headers:Vt([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r?.headers])})}cancel(e,n={},r){const{betas:i}=n??{};return this._client.post(ys`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:Vt([{"anthropic-beta":[...i??[],"message-batches-2024-09-24"].toString()},r?.headers])})}async results(e,n={},r){const i=await this.retrieve(e);if(!i.results_url)throw new nt(`No batch \`results_url\`; Has it finished processing? ${i.processing_status} - ${i.id}`);const{betas:s}=n??{};return this._client.get(i.results_url,{...r,headers:Vt([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,a)=>_x.fromResponse(a.response,a.controller))}};const Pee=t=>{let e=0,n=[];for(;e<t.length;){let r=t[e];if(r==="\\"){e++;continue}if(r==="{"){n.push({type:"brace",value:"{"}),e++;continue}if(r==="}"){n.push({type:"brace",value:"}"}),e++;continue}if(r==="["){n.push({type:"paren",value:"["}),e++;continue}if(r==="]"){n.push({type:"paren",value:"]"}),e++;continue}if(r===":"){n.push({type:"separator",value:":"}),e++;continue}if(r===","){n.push({type:"delimiter",value:","}),e++;continue}if(r==='"'){let a="",c=!1;for(r=t[++e];r!=='"';){if(e===t.length){c=!0;break}if(r==="\\"){if(e++,e===t.length){c=!0;break}a+=r+t[e],r=t[++e]}else a+=r,r=t[++e]}r=t[++e],c||n.push({type:"string",value:a});continue}if(r&&/\s/.test(r)){e++;continue}let s=/[0-9]/;if(r&&s.test(r)||r==="-"||r==="."){let a="";for(r==="-"&&(a+=r,r=t[++e]);r&&s.test(r)||r===".";)a+=r,r=t[++e];n.push({type:"number",value:a});continue}let o=/[a-z]/i;if(r&&o.test(r)){let a="";for(;r&&o.test(r)&&e!==t.length;)a+=r,r=t[++e];if(a=="true"||a=="false"||a==="null")n.push({type:"name",value:a});else{e++;continue}continue}e++}return n},Hu=t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),Hu(t);case"number":let n=e.value[e.value.length-1];if(n==="."||n==="-")return t=t.slice(0,t.length-1),Hu(t);case"string":let r=t[t.length-2];if(r?.type==="delimiter")return t=t.slice(0,t.length-1),Hu(t);if(r?.type==="brace"&&r.value==="{")return t=t.slice(0,t.length-1),Hu(t);break;case"delimiter":return t=t.slice(0,t.length-1),Hu(t)}return t},Dee=t=>{let e=[];return t.map(n=>{n.type==="brace"&&(n.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),n.type==="paren"&&(n.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(n=>{n==="}"?t.push({type:"brace",value:"}"}):n==="]"&&t.push({type:"paren",value:"]"})}),t},Lee=t=>{let e="";return t.map(n=>{switch(n.type){case"string":e+='"'+n.value+'"';break;default:e+=n.value;break}}),e},O6=t=>JSON.parse(Lee(Dee(Hu(Pee(t)))));var $i,Fa,pd,L0,md,gd,I0,yd,jo,bd,N0,B0,Pu,j0,$0,BS,aL,V0,jS,$S,VS,lL;const cL="__json_buf";function uL(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}class qb{constructor(){$i.add(this),this.messages=[],this.receivedMessages=[],Fa.set(this,void 0),this.controller=new AbortController,pd.set(this,void 0),L0.set(this,()=>{}),md.set(this,()=>{}),gd.set(this,void 0),I0.set(this,()=>{}),yd.set(this,()=>{}),jo.set(this,{}),bd.set(this,!1),N0.set(this,!1),B0.set(this,!1),Pu.set(this,!1),j0.set(this,void 0),$0.set(this,void 0),V0.set(this,e=>{if(Ke(this,N0,!0),Gp(e)&&(e=new ms),e instanceof ms)return Ke(this,B0,!0),this._emit("abort",e);if(e instanceof nt)return this._emit("error",e);if(e instanceof Error){const n=new nt(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new nt(String(e)))}),Ke(this,pd,new Promise((e,n)=>{Ke(this,L0,e,"f"),Ke(this,md,n,"f")})),Ke(this,gd,new Promise((e,n)=>{Ke(this,I0,e,"f"),Ke(this,yd,n,"f")})),de(this,pd,"f").catch(()=>{}),de(this,gd,"f").catch(()=>{})}get response(){return de(this,j0,"f")}get request_id(){return de(this,$0,"f")}async withResponse(){const e=await de(this,pd,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new qb;return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r){const i=new qb;for(const s of n.messages)i._addMessageParam(s);return i._run(()=>i._createMessage(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},de(this,V0,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){const i=r?.signal;let s;i&&(i.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),i.addEventListener("abort",s));try{de(this,$i,"m",jS).call(this);const{response:o,data:a}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of a)de(this,$i,"m",$S).call(this,c);if(a.controller.signal?.aborted)throw new ms;de(this,$i,"m",VS).call(this)}finally{i&&s&&i.removeEventListener("abort",s)}}_connected(e){this.ended||(Ke(this,j0,e),Ke(this,$0,e?.headers.get("request-id")),de(this,L0,"f").call(this,e),this._emit("connect"))}get ended(){return de(this,bd,"f")}get errored(){return de(this,N0,"f")}get aborted(){return de(this,B0,"f")}abort(){this.controller.abort()}on(e,n){return(de(this,jo,"f")[e]||(de(this,jo,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=de(this,jo,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(de(this,jo,"f")[e]||(de(this,jo,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ke(this,Pu,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ke(this,Pu,!0),await de(this,gd,"f")}get currentMessage(){return de(this,Fa,"f")}async finalMessage(){return await this.done(),de(this,$i,"m",BS).call(this)}async finalText(){return await this.done(),de(this,$i,"m",aL).call(this)}_emit(e,...n){if(de(this,bd,"f"))return;e==="end"&&(Ke(this,bd,!0),de(this,I0,"f").call(this));const r=de(this,jo,"f")[e];if(r&&(de(this,jo,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!de(this,Pu,"f")&&!r?.length&&Promise.reject(i),de(this,md,"f").call(this,i),de(this,yd,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!de(this,Pu,"f")&&!r?.length&&Promise.reject(i),de(this,md,"f").call(this,i),de(this,yd,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",de(this,$i,"m",BS).call(this))}async _fromReadableStream(e,n){const r=n?.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{de(this,$i,"m",jS).call(this),this._connected(null);const s=Kp.fromReadableStream(e,this.controller);for await(const o of s)de(this,$i,"m",$S).call(this,o);if(s.controller.signal?.aborted)throw new ms;de(this,$i,"m",VS).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(Fa=new WeakMap,pd=new WeakMap,L0=new WeakMap,md=new WeakMap,gd=new WeakMap,I0=new WeakMap,yd=new WeakMap,jo=new WeakMap,bd=new WeakMap,N0=new WeakMap,B0=new WeakMap,Pu=new WeakMap,j0=new WeakMap,$0=new WeakMap,V0=new WeakMap,$i=new WeakSet,BS=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},aL=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new nt("stream ended without producing a content block with type=text");return n.join(" ")},jS=function(){this.ended||Ke(this,Fa,void 0)},$S=function(n){if(this.ended)return;const r=de(this,$i,"m",lL).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{uL(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Ke(this,Fa,r);break}}},VS=function(){if(this.ended)throw new nt("stream has ended, this shouldn't happen");const n=de(this,Fa,"f");if(!n)throw new nt("request ended without sending any chunks");return Ke(this,Fa,void 0),n},lL=function(n){let r=de(this,Fa,"f");if(n.type==="message_start"){if(r)throw new nt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new nt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.container=n.delta.container,r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push(n.content_block),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{i?.type==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{i?.type==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&uL(i)){let s=i[cL]||"";s+=n.delta.partial_json;const o={...i};if(Object.defineProperty(o,cL,{value:s,enumerable:!1,writable:!0}),s)try{o.input=O6(s)}catch(a){const c=new nt(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${a}. JSON: ${s}`);de(this,V0,"f").call(this,c)}r.content[n.index]=o}break}case"thinking_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Kp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const P6={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192},hL={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};let Fk=class extends ia{constructor(){super(...arguments),this.batches=new M6(this._client)}create(e,n){const{betas:r,...i}=e;i.model in hL&&console.warn(`The model '${i.model}' is deprecated and will reach end-of-life on ${hL[i.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!i.stream&&s==null){const o=P6[i.model]??void 0;s=this._client.calculateNonstreamingTimeout(i.max_tokens,o)}return this._client.post("/v1/messages?beta=true",{body:i,timeout:s??6e5,...n,headers:Vt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:e.stream??!1})}stream(e,n){return qb.createMessage(this,e,n)}countTokens(e,n){const{betas:r,...i}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:i,...n,headers:Vt([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},n?.headers])})}};Fk.Batches=M6;let Pm=class extends ia{constructor(){super(...arguments),this.models=new R6(this._client),this.messages=new Fk(this._client),this.files=new T6(this._client)}};Pm.Models=R6;Pm.Messages=Fk;Pm.Files=T6;let D6=class extends ia{create(e,n){const{betas:r,...i}=e;return this._client.post("/v1/complete",{body:i,timeout:this._client._options.timeout??6e5,...n,headers:Vt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers]),stream:e.stream??!1})}};var Vi,za,vd,F0,xd,wd,z0,Sd,$o,_d,U0,H0,Du,q0,W0,FS,fL,zS,US,HS,qS,dL;const pL="__json_buf";function mL(t){return t.type==="tool_use"||t.type==="server_tool_use"}class Wb{constructor(){Vi.add(this),this.messages=[],this.receivedMessages=[],za.set(this,void 0),this.controller=new AbortController,vd.set(this,void 0),F0.set(this,()=>{}),xd.set(this,()=>{}),wd.set(this,void 0),z0.set(this,()=>{}),Sd.set(this,()=>{}),$o.set(this,{}),_d.set(this,!1),U0.set(this,!1),H0.set(this,!1),Du.set(this,!1),q0.set(this,void 0),W0.set(this,void 0),zS.set(this,e=>{if(Ke(this,U0,!0),Gp(e)&&(e=new ms),e instanceof ms)return Ke(this,H0,!0),this._emit("abort",e);if(e instanceof nt)return this._emit("error",e);if(e instanceof Error){const n=new nt(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new nt(String(e)))}),Ke(this,vd,new Promise((e,n)=>{Ke(this,F0,e,"f"),Ke(this,xd,n,"f")})),Ke(this,wd,new Promise((e,n)=>{Ke(this,z0,e,"f"),Ke(this,Sd,n,"f")})),de(this,vd,"f").catch(()=>{}),de(this,wd,"f").catch(()=>{})}get response(){return de(this,q0,"f")}get request_id(){return de(this,W0,"f")}async withResponse(){const e=await de(this,vd,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const n=new Wb;return n._run(()=>n._fromReadableStream(e)),n}static createMessage(e,n,r){const i=new Wb;for(const s of n.messages)i._addMessageParam(s);return i._run(()=>i._createMessage(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},de(this,zS,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,n=!0){this.receivedMessages.push(e),n&&this._emit("message",e)}async _createMessage(e,n,r){const i=r?.signal;let s;i&&(i.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),i.addEventListener("abort",s));try{de(this,Vi,"m",US).call(this);const{response:o,data:a}=await e.create({...n,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(o);for await(const c of a)de(this,Vi,"m",HS).call(this,c);if(a.controller.signal?.aborted)throw new ms;de(this,Vi,"m",qS).call(this)}finally{i&&s&&i.removeEventListener("abort",s)}}_connected(e){this.ended||(Ke(this,q0,e),Ke(this,W0,e?.headers.get("request-id")),de(this,F0,"f").call(this,e),this._emit("connect"))}get ended(){return de(this,_d,"f")}get errored(){return de(this,U0,"f")}get aborted(){return de(this,H0,"f")}abort(){this.controller.abort()}on(e,n){return(de(this,$o,"f")[e]||(de(this,$o,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=de(this,$o,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(de(this,$o,"f")[e]||(de(this,$o,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Ke(this,Du,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Ke(this,Du,!0),await de(this,wd,"f")}get currentMessage(){return de(this,za,"f")}async finalMessage(){return await this.done(),de(this,Vi,"m",FS).call(this)}async finalText(){return await this.done(),de(this,Vi,"m",fL).call(this)}_emit(e,...n){if(de(this,_d,"f"))return;e==="end"&&(Ke(this,_d,!0),de(this,z0,"f").call(this));const r=de(this,$o,"f")[e];if(r&&(de(this,$o,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!de(this,Du,"f")&&!r?.length&&Promise.reject(i),de(this,xd,"f").call(this,i),de(this,Sd,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!de(this,Du,"f")&&!r?.length&&Promise.reject(i),de(this,xd,"f").call(this,i),de(this,Sd,"f").call(this,i),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",de(this,Vi,"m",FS).call(this))}async _fromReadableStream(e,n){const r=n?.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{de(this,Vi,"m",US).call(this),this._connected(null);const s=Kp.fromReadableStream(e,this.controller);for await(const o of s)de(this,Vi,"m",HS).call(this,o);if(s.controller.signal?.aborted)throw new ms;de(this,Vi,"m",qS).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}[(za=new WeakMap,vd=new WeakMap,F0=new WeakMap,xd=new WeakMap,wd=new WeakMap,z0=new WeakMap,Sd=new WeakMap,$o=new WeakMap,_d=new WeakMap,U0=new WeakMap,H0=new WeakMap,Du=new WeakMap,q0=new WeakMap,W0=new WeakMap,zS=new WeakMap,Vi=new WeakSet,FS=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},fL=function(){if(this.receivedMessages.length===0)throw new nt("stream ended without producing a Message with role=assistant");const n=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(n.length===0)throw new nt("stream ended without producing a content block with type=text");return n.join(" ")},US=function(){this.ended||Ke(this,za,void 0)},HS=function(n){if(this.ended)return;const r=de(this,Vi,"m",dL).call(this,n);switch(this._emit("streamEvent",n,r),n.type){case"content_block_delta":{const i=r.content.at(-1);switch(n.delta.type){case"text_delta":{i.type==="text"&&this._emit("text",n.delta.text,i.text||"");break}case"citations_delta":{i.type==="text"&&this._emit("citation",n.delta.citation,i.citations??[]);break}case"input_json_delta":{mL(i)&&i.input&&this._emit("inputJson",n.delta.partial_json,i.input);break}case"thinking_delta":{i.type==="thinking"&&this._emit("thinking",n.delta.thinking,i.thinking);break}case"signature_delta":{i.type==="thinking"&&this._emit("signature",i.signature);break}default:n.delta}break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{Ke(this,za,r);break}}},qS=function(){if(this.ended)throw new nt("stream has ended, this shouldn't happen");const n=de(this,za,"f");if(!n)throw new nt("request ended without sending any chunks");return Ke(this,za,void 0),n},dL=function(n){let r=de(this,za,"f");if(n.type==="message_start"){if(r)throw new nt(`Unexpected event order, got ${n.type} before receiving "message_stop"`);return n.message}if(!r)throw new nt(`Unexpected event order, got ${n.type} before "message_start"`);switch(n.type){case"message_stop":return r;case"message_delta":return r.stop_reason=n.delta.stop_reason,r.stop_sequence=n.delta.stop_sequence,r.usage.output_tokens=n.usage.output_tokens,n.usage.input_tokens!=null&&(r.usage.input_tokens=n.usage.input_tokens),n.usage.cache_creation_input_tokens!=null&&(r.usage.cache_creation_input_tokens=n.usage.cache_creation_input_tokens),n.usage.cache_read_input_tokens!=null&&(r.usage.cache_read_input_tokens=n.usage.cache_read_input_tokens),n.usage.server_tool_use!=null&&(r.usage.server_tool_use=n.usage.server_tool_use),r;case"content_block_start":return r.content.push({...n.content_block}),r;case"content_block_delta":{const i=r.content.at(n.index);switch(n.delta.type){case"text_delta":{i?.type==="text"&&(r.content[n.index]={...i,text:(i.text||"")+n.delta.text});break}case"citations_delta":{i?.type==="text"&&(r.content[n.index]={...i,citations:[...i.citations??[],n.delta.citation]});break}case"input_json_delta":{if(i&&mL(i)){let s=i[pL]||"";s+=n.delta.partial_json;const o={...i};Object.defineProperty(o,pL,{value:s,enumerable:!1,writable:!0}),s&&(o.input=O6(s)),r.content[n.index]=o}break}case"thinking_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,thinking:i.thinking+n.delta.thinking});break}case"signature_delta":{i?.type==="thinking"&&(r.content[n.index]={...i,signature:n.delta.signature});break}default:n.delta}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("streamEvent",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Kp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}let L6=class extends ia{create(e,n){return this._client.post("/v1/messages/batches",{body:e,...n})}retrieve(e,n){return this._client.get(ys`/v1/messages/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/v1/messages/batches",Om,{query:e,...n})}delete(e,n){return this._client.delete(ys`/v1/messages/batches/${e}`,n)}cancel(e,n){return this._client.post(ys`/v1/messages/batches/${e}/cancel`,n)}async results(e,n){const r=await this.retrieve(e);if(!r.results_url)throw new nt(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...n,headers:Vt([{Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((i,s)=>_x.fromResponse(s.response,s.controller))}},zk=class extends ia{constructor(){super(...arguments),this.batches=new L6(this._client)}create(e,n){e.model in gL&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${gL[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!e.stream&&r==null){const i=P6[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,i)}return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...n,stream:e.stream??!1})}stream(e,n){return Wb.createMessage(this,e,n)}countTokens(e,n){return this._client.post("/v1/messages/count_tokens",{body:e,...n})}};const gL={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};zk.Batches=L6;let I6=class extends ia{retrieve(e,n={},r){const{betas:i}=n??{};return this._client.get(ys`/v1/models/${e}`,{...r,headers:Vt([{...i?.toString()!=null?{"anthropic-beta":i?.toString()}:void 0},r?.headers])})}list(e={},n){const{betas:r,...i}=e??{};return this._client.getAPIList("/v1/models",Om,{query:i,...n,headers:Vt([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}};var Iee={};const G0=t=>{if(typeof globalThis.process<"u")return Iee?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Y_,Uk,Zy,N6;class yn{constructor({baseURL:e=G0("ANTHROPIC_BASE_URL"),apiKey:n=G0("ANTHROPIC_API_KEY")??null,authToken:r=G0("ANTHROPIC_AUTH_TOKEN")??null,...i}={}){Y_.add(this),Zy.set(this,void 0);const s={apiKey:n,authToken:r,...i,baseURL:e||"https://api.anthropic.com"};if(!s.dangerouslyAllowBrowser&&iee())throw new nt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=s.baseURL,this.timeout=s.timeout??Uk.DEFAULT_TIMEOUT,this.logger=s.logger??console;const o="warn";this.logLevel=o,this.logLevel=rL(s.logLevel,"ClientOptions.logLevel",this)??rL(G0("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??o,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??cee(),Ke(this,Zy,hee),this._options=s,this.apiKey=n,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-api-key"))&&!n.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return Vt([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return Vt([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return Vt([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new nt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Uu}`}defaultIdempotencyKey(){return`stainless-node-retry-${o6()}`}makeStatusError(e,n,r,i){return Ti.generate(e,n,r,i)}buildURL(e,n,r){const i=!de(this,Y_,"m",N6).call(this)&&r||this.baseURL,s=ZZ(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return eee(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new nt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new w6(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:c}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Er(this).debug(`[${h}] sending request`,Jl({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),i.signal?.aborted)throw new ms;const m=new AbortController,y=await this.fetchWithTimeout(a,o,c,m).catch(H_),v=Date.now();if(y instanceof Error){const S=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new ms;const A=Gp(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Er(this).info(`[${h}] connection ${A?"timed out":"failed"} - ${S}`),Er(this).debug(`[${h}] connection ${A?"timed out":"failed"} (${S})`,Jl({retryOfRequestLogID:r,url:a,durationMs:v-d,message:y.message})),this.retryRequest(i,n,r??h);throw Er(this).info(`[${h}] connection ${A?"timed out":"failed"} - error; no more retries left`),Er(this).debug(`[${h}] connection ${A?"timed out":"failed"} (error; no more retries left)`,Jl({retryOfRequestLogID:r,url:a,durationMs:v-d,message:y.message})),A?new a6:new Sx({cause:y})}const w=[...y.headers.entries()].filter(([S])=>S==="request-id").map(([S,A])=>", "+S+": "+JSON.stringify(A)).join(""),_=`[${h}${f}${w}] ${o.method} ${a} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${v-d}ms`;if(!y.ok){const S=await this.shouldRetry(y);if(n&&S){const L=`retrying, ${n} attempts remaining`;return await uee(y.body),Er(this).info(`${_} - ${L}`),Er(this).debug(`[${h}] response error (${L})`,Jl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-d})),this.retryRequest(i,n,r??h,y.headers)}const A=S?"error; no more retries left":"error; not retryable";Er(this).info(`${_} - ${A}`);const k=await y.text().catch(L=>H_(L).message),P=g6(k),M=P?void 0:k;throw Er(this).debug(`[${h}] response error (${A})`,Jl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:M,durationMs:Date.now()-d})),this.makeStatusError(y.status,P,M,y.headers)}return Er(this).info(_),Er(this).debug(`[${h}] response start`,Jl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-d})),{response:y,options:i,controller:m,requestLogID:h,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new wee(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i?.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(s=c)}const a=i?.get("retry-after");if(a&&!s){const c=parseFloat(a);Number.isNaN(c)?s=Date.parse(a)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await ree(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}calculateNonstreamingTimeout(e,n){if(36e5*e/128e3>6e5||n!=null&&e>n)throw new nt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,c=this.buildURL(s,o,a);"timeout"in r&&nee("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=Vt([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...lee(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Vt([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:b6(e)}:de(this,Zy,"f").call(this,{body:e,headers:r})}}Uk=yn,Zy=new WeakMap,Y_=new WeakSet,N6=function(){return this.baseURL!=="https://api.anthropic.com"};yn.Anthropic=Uk;yn.HUMAN_PROMPT=`

Human:`;yn.AI_PROMPT=`

Assistant:`;yn.DEFAULT_TIMEOUT=6e5;yn.AnthropicError=nt;yn.APIError=Ti;yn.APIConnectionError=Sx;yn.APIConnectionTimeoutError=a6;yn.APIUserAbortError=ms;yn.NotFoundError=h6;yn.ConflictError=f6;yn.RateLimitError=p6;yn.BadRequestError=l6;yn.AuthenticationError=c6;yn.InternalServerError=m6;yn.PermissionDeniedError=u6;yn.UnprocessableEntityError=d6;yn.toFile=Tee;class al extends yn{constructor(){super(...arguments),this.completions=new D6(this),this.messages=new zk(this),this.models=new I6(this),this.beta=new Pm(this)}}al.Completions=D6;al.Messages=zk;al.Models=I6;al.Beta=Pm;const{HUMAN_PROMPT:iOe,AI_PROMPT:sOe}=al;var Hd={exports:{}};Hd.exports;var yL;function Nee(){return yL||(yL=1,(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",d="[object GeneratorFunction]",m="[object Map]",y="[object Number]",v="[object Object]",w="[object Promise]",_="[object RegExp]",S="[object Set]",A="[object String]",k="[object Symbol]",P="[object WeakMap]",M="[object ArrayBuffer]",O="[object DataView]",L="[object Float32Array]",N="[object Float64Array]",z="[object Int8Array]",j="[object Int16Array]",H="[object Int32Array]",W="[object Uint8Array]",X="[object Uint8ClampedArray]",G="[object Uint16Array]",ie="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,Y=/\w*$/,q=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,T={};T[s]=T[o]=T[M]=T[O]=T[a]=T[c]=T[L]=T[N]=T[z]=T[j]=T[H]=T[m]=T[y]=T[v]=T[_]=T[S]=T[A]=T[k]=T[W]=T[X]=T[G]=T[ie]=!0,T[h]=T[f]=T[P]=!1;var Z=typeof S0=="object"&&S0&&S0.Object===Object&&S0,ue=typeof self=="object"&&self&&self.Object===Object&&self,I=Z||ue||Function("return this")(),pe=e&&!e.nodeType&&e,Ee=pe&&!0&&t&&!t.nodeType&&t,ye=Ee&&Ee.exports===pe;function ke(B,Q){return B.set(Q[0],Q[1]),B}function ze(B,Q){return B.add(Q),B}function Ot(B,Q){for(var le=-1,Oe=B?B.length:0;++le<Oe&&Q(B[le],le,B)!==!1;);return B}function Kt(B,Q){for(var le=-1,Oe=Q.length,qt=B.length;++le<Oe;)B[qt+le]=Q[le];return B}function Yt(B,Q,le,Oe){for(var qt=-1,or=B?B.length:0;++qt<or;)le=Q(le,B[qt],qt,B);return le}function Zn(B,Q){for(var le=-1,Oe=Array(B);++le<B;)Oe[le]=Q(le);return Oe}function er(B,Q){return B?.[Q]}function ei(B){var Q=!1;if(B!=null&&typeof B.toString!="function")try{Q=!!(B+"")}catch{}return Q}function _o(B){var Q=-1,le=Array(B.size);return B.forEach(function(Oe,qt){le[++Q]=[qt,Oe]}),le}function rs(B,Q){return function(le){return B(Q(le))}}function tr(B){var Q=-1,le=Array(B.size);return B.forEach(function(Oe){le[++Q]=Oe}),le}var of=Array.prototype,Al=Function.prototype,Rs=Object.prototype,Ms=I["__core-js_shared__"],$c=(function(){var B=/[^.]+$/.exec(Ms&&Ms.keys&&Ms.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""})(),kl=Al.toString,Ri=Rs.hasOwnProperty,aa=Rs.toString,oe=RegExp("^"+kl.call(Ri).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=ye?I.Buffer:void 0,De=I.Symbol,Be=I.Uint8Array,gt=rs(Object.getPrototypeOf,Object),Sr=Object.create,is=Rs.propertyIsEnumerable,nr=of.splice,ti=Object.getOwnPropertySymbols,_r=me?me.isBuffer:void 0,rn=rs(Object.keys,Object),rr=ri(I,"DataView"),jn=ri(I,"Map"),Vc=ri(I,"Promise"),Fc=ri(I,"Set"),El=ri(I,"WeakMap"),ss=ri(Object,"create"),vw=$r(rr),ig=$r(jn),sg=$r(Vc),af=$r(Fc),lf=$r(El),cf=De?De.prototype:void 0,og=cf?cf.valueOf:void 0;function ir(B){var Q=-1,le=B?B.length:0;for(this.clear();++Q<le;){var Oe=B[Q];this.set(Oe[0],Oe[1])}}function Rn(){this.__data__=ss?ss(null):{}}function sr(B){return this.has(B)&&delete this.__data__[B]}function la(B){var Q=this.__data__;if(ss){var le=Q[B];return le===r?void 0:le}return Ri.call(Q,B)?Q[B]:void 0}function uf(B){var Q=this.__data__;return ss?Q[B]!==void 0:Ri.call(Q,B)}function xw(B,Q){var le=this.__data__;return le[B]=ss&&Q===void 0?r:Q,this}ir.prototype.clear=Rn,ir.prototype.delete=sr,ir.prototype.get=la,ir.prototype.has=uf,ir.prototype.set=xw;function os(B){var Q=-1,le=B?B.length:0;for(this.clear();++Q<le;){var Oe=B[Q];this.set(Oe[0],Oe[1])}}function ag(){this.__data__=[]}function Tl(B){var Q=this.__data__,le=fa(Q,B);if(le<0)return!1;var Oe=Q.length-1;return le==Oe?Q.pop():nr.call(Q,le,1),!0}function hf(B){var Q=this.__data__,le=fa(Q,B);return le<0?void 0:Q[le][1]}function ca(B){return fa(this.__data__,B)>-1}function ua(B,Q){var le=this.__data__,Oe=fa(le,B);return Oe<0?le.push([B,Q]):le[Oe][1]=Q,this}os.prototype.clear=ag,os.prototype.delete=Tl,os.prototype.get=hf,os.prototype.has=ca,os.prototype.set=ua;function Mi(B){var Q=-1,le=B?B.length:0;for(this.clear();++Q<le;){var Oe=B[Q];this.set(Oe[0],Oe[1])}}function ha(){this.__data__={hash:new ir,map:new(jn||os),string:new ir}}function sn(B){return Rl(this,B).delete(B)}function lg(B){return Rl(this,B).get(B)}function cg(B){return Rl(this,B).has(B)}function Co(B,Q){return Rl(this,B).set(B,Q),this}Mi.prototype.clear=ha,Mi.prototype.delete=sn,Mi.prototype.get=lg,Mi.prototype.has=cg,Mi.prototype.set=Co;function ni(B){this.__data__=new os(B)}function ww(){this.__data__=new os}function ug(B){return this.__data__.delete(B)}function hg(B){return this.__data__.get(B)}function Sw(B){return this.__data__.has(B)}function zc(B,Q){var le=this.__data__;if(le instanceof os){var Oe=le.__data__;if(!jn||Oe.length<n-1)return Oe.push([B,Q]),this;le=this.__data__=new Mi(Oe)}return le.set(B,Q),this}ni.prototype.clear=ww,ni.prototype.delete=ug,ni.prototype.get=hg,ni.prototype.has=Sw,ni.prototype.set=zc;function Uc(B,Q){var le=Yc(B)||vf(B)?Zn(B.length,String):[],Oe=le.length,qt=!!Oe;for(var or in B)Ri.call(B,or)&&!(qt&&(or=="length"||kw(or,Oe)))&&le.push(or);return le}function Oi(B,Q,le){var Oe=B[Q];(!(Ri.call(B,Q)&&bf(Oe,le))||le===void 0&&!(Q in B))&&(B[Q]=le)}function fa(B,Q){for(var le=B.length;le--;)if(bf(B[le][0],Q))return le;return-1}function fg(B,Q){return B&&Wc(Q,Jc(Q),B)}function Os(B,Q,le,Oe,qt,or,ii){var Mn;if(Oe&&(Mn=or?Oe(B,qt,or,ii):Oe(B)),Mn!==void 0)return Mn;if(!ya(B))return B;var ba=Yc(B);if(ba){if(Mn=vg(B),!Q)return gg(B,Mn)}else{var ls=Ps(B),wf=ls==f||ls==d;if(xf(B))return pg(B,Q);if(ls==v||ls==s||wf&&!or){if(ei(B))return or?B:{};if(Mn=gf(wf?{}:B),!Q)return da(B,fg(Mn,B))}else{if(!T[ls])return or?B:{};Mn=Aw(B,ls,Os,Q)}}ii||(ii=new ni);var xg=ii.get(B);if(xg)return xg;if(ii.set(B,Mn),!ba)var wg=le?yg(B):Jc(B);return Ot(wg||B,function(Sf,va){wg&&(va=Sf,Sf=B[va]),Oi(Mn,va,Os(Sf,Q,le,Oe,va,B,ii))}),Mn}function ff(B){return ya(B)?Sr(B):{}}function df(B,Q,le){var Oe=Q(B);return Yc(B)?Oe:Kt(Oe,le(B))}function _w(B){return aa.call(B)}function dg(B){if(!ya(B)||yf(B))return!1;var Q=ga(B)||ei(B)?oe:q;return Q.test($r(B))}function Br(B){if(!Kc(B))return rn(B);var Q=[];for(var le in Object(B))Ri.call(B,le)&&le!="constructor"&&Q.push(le);return Q}function pg(B,Q){if(Q)return B.slice();var le=new B.constructor(B.length);return B.copy(le),le}function pf(B){var Q=new B.constructor(B.byteLength);return new Be(Q).set(new Be(B)),Q}function Hc(B,Q){var le=Q?pf(B.buffer):B.buffer;return new B.constructor(le,B.byteOffset,B.byteLength)}function mg(B,Q,le){var Oe=Q?le(_o(B),!0):_o(B);return Yt(Oe,ke,new B.constructor)}function qc(B){var Q=new B.constructor(B.source,Y.exec(B));return Q.lastIndex=B.lastIndex,Q}function Cw(B,Q,le){var Oe=Q?le(tr(B),!0):tr(B);return Yt(Oe,ze,new B.constructor)}function jr(B){return og?Object(og.call(B)):{}}function mf(B,Q){var le=Q?pf(B.buffer):B.buffer;return new B.constructor(le,B.byteOffset,B.length)}function gg(B,Q){var le=-1,Oe=B.length;for(Q||(Q=Array(Oe));++le<Oe;)Q[le]=B[le];return Q}function Wc(B,Q,le,Oe){le||(le={});for(var qt=-1,or=Q.length;++qt<or;){var ii=Q[qt],Mn=void 0;Oi(le,ii,Mn===void 0?B[ii]:Mn)}return le}function da(B,Q){return Wc(B,bg(B),Q)}function yg(B){return df(B,Jc,bg)}function Rl(B,Q){var le=B.__data__;return Gc(Q)?le[typeof Q=="string"?"string":"hash"]:le.map}function ri(B,Q){var le=er(B,Q);return dg(le)?le:void 0}var bg=ti?rs(ti,Object):Qc,Ps=_w;(rr&&Ps(new rr(new ArrayBuffer(1)))!=O||jn&&Ps(new jn)!=m||Vc&&Ps(Vc.resolve())!=w||Fc&&Ps(new Fc)!=S||El&&Ps(new El)!=P)&&(Ps=function(B){var Q=aa.call(B),le=Q==v?B.constructor:void 0,Oe=le?$r(le):void 0;if(Oe)switch(Oe){case vw:return O;case ig:return m;case sg:return w;case af:return S;case lf:return P}return Q});function vg(B){var Q=B.length,le=B.constructor(Q);return Q&&typeof B[0]=="string"&&Ri.call(B,"index")&&(le.index=B.index,le.input=B.input),le}function gf(B){return typeof B.constructor=="function"&&!Kc(B)?ff(gt(B)):{}}function Aw(B,Q,le,Oe){var qt=B.constructor;switch(Q){case M:return pf(B);case a:case c:return new qt(+B);case O:return Hc(B,Oe);case L:case N:case z:case j:case H:case W:case X:case G:case ie:return mf(B,Oe);case m:return mg(B,Oe,le);case y:case A:return new qt(B);case _:return qc(B);case S:return Cw(B,Oe,le);case k:return jr(B)}}function kw(B,Q){return Q=Q??i,!!Q&&(typeof B=="number"||se.test(B))&&B>-1&&B%1==0&&B<Q}function Gc(B){var Q=typeof B;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?B!=="__proto__":B===null}function yf(B){return!!$c&&$c in B}function Kc(B){var Q=B&&B.constructor,le=typeof Q=="function"&&Q.prototype||Rs;return B===le}function $r(B){if(B!=null){try{return kl.call(B)}catch{}try{return B+""}catch{}}return""}function pa(B){return Os(B,!0,!0)}function bf(B,Q){return B===Q||B!==B&&Q!==Q}function vf(B){return as(B)&&Ri.call(B,"callee")&&(!is.call(B,"callee")||aa.call(B)==s)}var Yc=Array.isArray;function ma(B){return B!=null&&Ds(B.length)&&!ga(B)}function as(B){return Xc(B)&&ma(B)}var xf=_r||Zc;function ga(B){var Q=ya(B)?aa.call(B):"";return Q==f||Q==d}function Ds(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=i}function ya(B){var Q=typeof B;return!!B&&(Q=="object"||Q=="function")}function Xc(B){return!!B&&typeof B=="object"}function Jc(B){return ma(B)?Uc(B):Br(B)}function Qc(){return[]}function Zc(){return!1}t.exports=pa})(Hd,Hd.exports)),Hd.exports}var Bee=Nee();const fo=Mc(Bee),jee=t=>{const e=[];return t.forEach(({content:n})=>{n.forEach(r=>{if(r.type==="image"){const i=r.image,s=i.split(",")[1],o=i.split(";")[0].split(":")[1];let a;o==="image/jpeg"||o==="image/jpg"?a="image/jpeg":o==="image/png"?a="image/png":o==="image/gif"?a="image/gif":o==="image/webp"?a="image/webp":a="image/jpeg",e.push({type:"image",source:{type:"base64",media_type:a,data:s}})}})}),e},$ee=t=>t.map(e=>({name:e.name,description:e.description,input_schema:{type:"object",...e.inputSchema}})),K0=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?{type:"text",text:i.text}:i.type==="file"?{type:"document",source:{type:"text",media_type:"text/plain",data:i.data},context:JSON.parse(i.mimeType).path}:{type:"text",text:""});if(n.attachments?.length){const i=jee(n.attachments);Array.isArray(r)&&r.push(...i)}e.push({role:"user",content:r})}else if(n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?{type:"text",text:i.text}:{type:"text",text:""});e.push({role:"user",content:r})}else{const r=typeof n.content=="string"?n.content:[],i=[];Array.isArray(n.content)&&n.content.forEach(s=>{if(Array.isArray(r)&&(s.type==="text"&&r.push({type:"text",text:s.text}),s.type==="tool-call")){s.result&&i.push({type:"tool_result",content:s.result,tool_use_id:s.toolCallId}),r.push({type:"tool_use",id:s.toolCallId,name:s.toolName,input:s.args||{}});return}}),e.push({role:"assistant",content:r}),i.length&&e.push({role:"user",content:i})}}),e},Vee=t=>{const{message:e}=t;return{role:e.role,content:[]}},Fee=(t,e)=>{const n={...e},{content_block:r}=t;if(r.type==="text"&&Array.isArray(n.content)){const i={type:"text",text:r.text};n.content.push(i)}if(r.type==="tool_use"&&Array.isArray(n.content)){const i={type:"tool-call",toolCallId:r.id,toolName:r.name,args:{},argsText:""};n.content.push(i)}return n},zee=(t,e)=>{const n={...e},{delta:r}=t;if(r.type==="text_delta"&&Array.isArray(n.content)){const i=n.content[n.content.length-1];if(i.type!=="text")return n;const s={type:"text",text:i.text+r.text};n.content[n.content.length-1]=s}if(r.type==="input_json_delta"&&Array.isArray(n.content)){const i=n.content[n.content.length-1];if(i.type!=="tool-call")return n;const s=i.argsText+r.partial_json;let o={};if(s.trim().endsWith("}"))try{o=JSON.parse(s)}catch(c){console.log(c)}const a={...i,args:o,argsText:s};n.content[n.content.length-1]=a}return n};class Uee{modelKey="claude-3-7-sonnet-latest";systemPrompt="";apiKey;url;provider;messageStopped=!1;prevMessages=[];tools=[];client;constructor(){}setProvider=e=>{this.provider=e,this.client=new al({apiKey:e.key,baseURL:e.baseUrl,dangerouslyAllowBrowser:!0}),e.key&&this.setApiKey(e.key),e.baseUrl&&this.setUrl(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setApiKey=e=>{this.apiKey=e,this.client&&(this.client.apiKey=e)};setUrl=e=>{this.url=e,this.client&&(this.client.baseURL=e)};setPrevMessages=e=>{this.prevMessages=K0(e)};setTools=e=>{this.tools=$ee(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=K0(e),s=await this.client.messages.create({messages:[...this.prevMessages,...i],model:this.modelKey,system:this.systemPrompt,tools:this.tools,stream:!0,max_tokens:2048});this.prevMessages.push(...i);let o=n&&r?fo(r):{role:"assistant",content:[]};for await(const a of s){const{type:c}=a;if(this.messageStopped&&(this.messageStopped=!1,s.controller.abort()),c==="message_start"){if(n&&r){yield r;continue}o=Vee(a)}if(c==="content_block_start"&&(o=Fee(a,o)),c==="content_block_delta"&&(o=zee(a,o)),c==="message_stop"){if(n&&r){const f=o.content.slice(r.content.length),d={...o,content:f},m=K0([d]);this.prevMessages.push(...m),yield{isEnd:!0,responseMessage:o};continue}const h=K0([o]);this.prevMessages.push(...h),yield{isEnd:!0,responseMessage:o};continue}yield o}}catch(i){yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r={type:"tool_result",content:n.result,tool_use_id:n.toolCallId};return this.prevMessages.push({role:"user",content:[r]}),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.messageStopped=!0};getBaseUrl=()=>"https://api.anthropic.com";getName=()=>"Anthropic";checkProvider=async e=>{const n=new al({apiKey:e.apiKey,baseURL:e.url,dangerouslyAllowBrowser:!0});try{return await n.models.list(),!0}catch(r){if(typeof r=="object"&&r){if("status"in r&&r.status===401)return{field:"key",message:"Invalid API key"};if("status"in r&&r.status===404)return{field:"url",message:"Invalid URL"};if(e.apiKey)return{field:"url",message:"Invalid URL"}}return{field:"key",message:"Empty key"}}};getProviderModels=async e=>{const n=new al({apiKey:e.apiKey,baseURL:e.url,dangerouslyAllowBrowser:!0});try{return(await n.models.list()).data.map(s=>({id:s.id,name:s.display_name,provider:"anthropic"}))}catch(r){return console.log(r),[]}}}const bL=new Uee;var Gn=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},Rr={searchParams:"URLSearchParams"in Gn,iterable:"Symbol"in Gn&&"iterator"in Symbol,blob:"FileReader"in Gn&&"Blob"in Gn&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in Gn,arrayBuffer:"ArrayBuffer"in Gn};function Hee(t){return t&&DataView.prototype.isPrototypeOf(t)}if(Rr.arrayBuffer)var qee=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Wee=ArrayBuffer.isView||function(t){return t&&qee.indexOf(Object.prototype.toString.call(t))>-1};function qh(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function Hk(t){return typeof t!="string"&&(t=String(t)),t}function qk(t){var e={next:function(){var n=t.shift();return{done:n===void 0,value:n}}};return Rr.iterable&&(e[Symbol.iterator]=function(){return e}),e}function En(t){this.map={},t instanceof En?t.forEach(function(e,n){this.append(n,e)},this):Array.isArray(t)?t.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}En.prototype.append=function(t,e){t=qh(t),e=Hk(e);var n=this.map[t];this.map[t]=n?n+", "+e:e};En.prototype.delete=function(t){delete this.map[qh(t)]};En.prototype.get=function(t){return t=qh(t),this.has(t)?this.map[t]:null};En.prototype.has=function(t){return this.map.hasOwnProperty(qh(t))};En.prototype.set=function(t,e){this.map[qh(t)]=Hk(e)};En.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)};En.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),qk(t)};En.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),qk(t)};En.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),qk(t)};Rr.iterable&&(En.prototype[Symbol.iterator]=En.prototype.entries);function WS(t){if(!t._noBody){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}}function B6(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function Gee(t){var e=new FileReader,n=B6(e);return e.readAsArrayBuffer(t),n}function Kee(t){var e=new FileReader,n=B6(e),r=/charset=([A-Za-z0-9_-]+)/.exec(t.type),i=r?r[1]:"utf-8";return e.readAsText(t,i),n}function Yee(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function vL(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function j6(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:Rr.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:Rr.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:Rr.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():Rr.arrayBuffer&&Rr.blob&&Hee(t)?(this._bodyArrayBuffer=vL(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Rr.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||Wee(t))?this._bodyArrayBuffer=vL(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Rr.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Rr.blob&&(this.blob=function(){var t=WS(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=WS(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(Rr.blob)return this.blob().then(Gee);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var t=WS(this);if(t)return t;if(this._bodyBlob)return Kee(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Yee(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Rr.formData&&(this.formData=function(){return this.text().then(Qee)}),this.json=function(){return this.text().then(JSON.parse)},this}var Xee=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Jee(t){var e=t.toUpperCase();return Xee.indexOf(e)>-1?e:t}function xc(t,e){if(!(this instanceof xc))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(t instanceof xc){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new En(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!n&&t._bodyInit!=null&&(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new En(e.headers)),this.method=Jee(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||(function(){if("AbortController"in Gn){var s=new AbortController;return s.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}xc.prototype.clone=function(){return new xc(this,{body:this._bodyInit})};function Qee(t){var e=new FormData;return t.trim().split("&").forEach(function(n){if(n){var r=n.split("="),i=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(s))}}),e}function Zee(t){var e=new En,n=t.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var i=r.split(":"),s=i.shift().trim();if(s){var o=i.join(":").trim();try{e.append(s,o)}catch(a){console.warn("Response "+a.message)}}}),e}j6.call(xc.prototype);function po(t,e){if(!(this instanceof po))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new En(e.headers),this.url=e.url||"",this._initBody(t)}j6.call(po.prototype);po.prototype.clone=function(){return new po(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new En(this.headers),url:this.url})};po.error=function(){var t=new po(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var ete=[301,302,303,307,308];po.redirect=function(t,e){if(ete.indexOf(e)===-1)throw new RangeError("Invalid status code");return new po(null,{status:e,headers:{location:t}})};var nc=Gn.DOMException;try{new nc}catch{nc=function(e,n){this.message=e,this.name=n;var r=Error(e);this.stack=r.stack},nc.prototype=Object.create(Error.prototype),nc.prototype.constructor=nc}function $6(t,e){return new Promise(function(n,r){var i=new xc(t,e);if(i.signal&&i.signal.aborted)return r(new nc("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var h={statusText:s.statusText,headers:Zee(s.getAllResponseHeaders()||"")};i.url.indexOf("file://")===0&&(s.status<200||s.status>599)?h.status=200:h.status=s.status,h.url="responseURL"in s?s.responseURL:h.headers.get("X-Request-URL");var f="response"in s?s.response:s.responseText;setTimeout(function(){n(new po(f,h))},0)},s.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request timed out"))},0)},s.onabort=function(){setTimeout(function(){r(new nc("Aborted","AbortError"))},0)};function a(h){try{return h===""&&Gn.location.href?Gn.location.href:h}catch{return h}}if(s.open(i.method,a(i.url),!0),i.credentials==="include"?s.withCredentials=!0:i.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(Rr.blob?s.responseType="blob":Rr.arrayBuffer&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof En||Gn.Headers&&e.headers instanceof Gn.Headers)){var c=[];Object.getOwnPropertyNames(e.headers).forEach(function(h){c.push(qh(h)),s.setRequestHeader(h,Hk(e.headers[h]))}),i.headers.forEach(function(h,f){c.indexOf(f)===-1&&s.setRequestHeader(f,h)})}else i.headers.forEach(function(h,f){s.setRequestHeader(f,h)});i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){s.readyState===4&&i.signal.removeEventListener("abort",o)}),s.send(typeof i._bodyInit>"u"?null:i._bodyInit)})}$6.polyfill=!0;Gn.fetch||(Gn.fetch=$6,Gn.Headers=En,Gn.Request=xc,Gn.Response=po);const V6="11434",F6=`http://127.0.0.1:${V6}`,tte="0.5.18";var nte=Object.defineProperty,rte=(t,e,n)=>e in t?nte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GS=(t,e,n)=>(rte(t,typeof e!="symbol"?e+"":e,n),n);class Wk extends Error{constructor(e,n){super(e),this.error=e,this.status_code=n,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,Wk)}}class ite{constructor(e,n,r){GS(this,"abortController"),GS(this,"itr"),GS(this,"doneCallback"),this.abortController=e,this.itr=n,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(const e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||e.status==="success"){this.doneCallback();return}}throw new Error("Did not receive done or success response in stream.")}}const Gk=async t=>{if(t.ok)return;let e=`Error ${t.status}: ${t.statusText}`,n=null;if(t.headers.get("content-type")?.includes("application/json"))try{n=await t.json(),e=n.error||e}catch{console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),e=await t.text()||e}catch{console.log("Failed to get text from error response")}throw new Wk(e,t.status)};function ste(){if(typeof window<"u"&&window.navigator){const t=navigator;return"userAgentData"in t&&t.userAgentData?.platform?`${t.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}else if(typeof process<"u")return`${process.arch} ${process.platform} Node.js/${process.version}`;return""}function ote(t){if(t instanceof Headers){const e={};return t.forEach((n,r)=>{e[r]=n}),e}else return Array.isArray(t)?Object.fromEntries(t):t||{}}const Kk=async(t,e,n={})=>{const r={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/${tte} (${ste()})`};n.headers=ote(n.headers);const i=Object.fromEntries(Object.entries(n.headers).filter(([s])=>!Object.keys(r).some(o=>o.toLowerCase()===s.toLowerCase())));return n.headers={...r,...i},t(e,n)},xL=async(t,e,n)=>{const r=await Kk(t,e,{headers:n?.headers});return await Gk(r),r},Lu=async(t,e,n,r)=>{const s=(a=>a!==null&&typeof a=="object"&&!Array.isArray(a))(n)?JSON.stringify(n):n,o=await Kk(t,e,{method:"POST",body:s,signal:r?.signal,headers:r?.headers});return await Gk(o),o},ate=async(t,e,n,r)=>{const i=await Kk(t,e,{method:"DELETE",body:JSON.stringify(n),headers:r?.headers});return await Gk(i),i},lte=async function*(t){const e=new TextDecoder("utf-8");let n="";const r=t.getReader();for(;;){const{done:i,value:s}=await r.read();if(i)break;n+=e.decode(s);const o=n.split(`
`);n=o.pop()??"";for(const a of o)try{yield JSON.parse(a)}catch{console.warn("invalid json: ",a)}}for(const i of n.split(`
`).filter(s=>s!==""))try{yield JSON.parse(i)}catch{console.warn("invalid json: ",i)}},cte=t=>{if(!t)return F6;let e=t.includes("://");t.startsWith(":")&&(t=`http://127.0.0.1${t}`,e=!0),e||(t=`http://${t}`);const n=new URL(t);let r=n.port;r||(e?r=n.protocol==="https:"?"443":"80":r=V6);let i="";n.username&&(i=n.username,n.password&&(i+=`:${n.password}`),i+="@");let s=`${n.protocol}//${i}${n.hostname}:${r}${n.pathname}`;return s.endsWith("/")&&(s=s.slice(0,-1)),s};var ute=Object.defineProperty,hte=(t,e,n)=>e in t?ute(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KS=(t,e,n)=>(hte(t,typeof e!="symbol"?e+"":e,n),n);let eb=class{constructor(e){KS(this,"config"),KS(this,"fetch"),KS(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e?.headers},e?.proxy||(this.config.host=cte(e?.host??F6)),this.fetch=e?.fetch??fetch}abort(){for(const e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,n){n.stream=n.stream??!1;const r=`${this.config.host}/api/${e}`;if(n.stream){const s=new AbortController,o=await Lu(this.fetch,r,n,{signal:s.signal,headers:this.config.headers});if(!o.body)throw new Error("Missing body");const a=lte(o.body),c=new ite(s,a,()=>{const h=this.ongoingStreamedRequests.indexOf(c);h>-1&&this.ongoingStreamedRequests.splice(h,1)});return this.ongoingStreamedRequests.push(c),c}return await(await Lu(this.fetch,r,n,{headers:this.config.headers})).json()}async encodeImage(e){if(typeof e!="string"){const n=new Uint8Array(e);let r="";const i=n.byteLength;for(let s=0;s<i;s++)r+=String.fromCharCode(n[s]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(const n of e.messages)n.images&&(n.images=await Promise.all(n.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await ate(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await Lu(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){return await(await xL(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers})).json()}async show(e){return await(await Lu(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers})).json()}async embed(e){return await(await Lu(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers})).json()}async embeddings(e){return await(await Lu(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers})).json()}async ps(){return await(await xL(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers})).json()}};new eb;const yp="<TOOL_CALL>",Gb="</TOOL_CALL>",fte=t=>t.map(e=>({type:"string",function:{name:e.name,description:e.description,parameters:e.inputSchema}})),dte=t=>{let e=`

Available tools:

`;const n=JSON.stringify(t);e+=n;const i=JSON.stringify({name:"toolName",args:{arg1:"arg1",arg2:"arg2"}});return e+=`

 When you call a tool, output must look EXACTLY like this: 
${yp}
${i}
${Gb}

 Do not add explanations, markdown, or extra text outside the tags.`,e},wL=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?i.text:i.type==="file"?`File: ${JSON.parse(i.mimeType).path.split("/").pop()}
File content:
${i.data}`:"").filter(i=>i!=="").join(`

`);e.push({role:"user",content:r})}else if(n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.find(i=>i.type==="text")?.text??"";e.push({role:"user",content:r})}else{let r="";const i=Array.isArray(n.content)?n.content.map(o=>{if(o.type==="text")return o.text;if(o.type==="tool-call"){const a={name:o.toolName,result:o.result};return r=`${JSON.stringify(a)}
`,`${yp}${o.argsText}${Gb}`}}).join(""):"",s=typeof n.content=="string"?n.content:i;e.push({role:"assistant",content:s}),r&&e.push({role:"user",content:r})}}),e},pte=t=>{let e=!1,n=!1,r="";if(t.includes(yp)&&(e=!0,r=t.split(yp)[1]),!e)return{content:t};t.includes(Gb)&&(n=!0,r=r.split(Gb)[0]);const i=t.split(yp)[0];if(n){const o={type:"tool-call",toolCallId:"",toolName:JSON.parse(r).name,args:JSON.parse(r).args,argsText:r};return{content:i,toolContent:o}}return{toolContent:{type:"tool-call",toolCallId:"",toolName:"",args:{},argsText:r},content:i}};class mte{modelKey="";systemPrompt="";apiKey;url;provider;prevMessages=[];tools=[];client;constructor(){}setProvider=e=>{this.provider=e,this.client=new eb({host:e.baseUrl}),e.key&&this.setAPIKey(e.key),e.baseUrl&&this.setURL(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setAPIKey=e=>{this.apiKey=e};setURL=e=>{this.url=e};setPrevMessages=e=>{this.prevMessages=wL(e)};setTools=e=>{this.tools=fte(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=wL(e),s=dte(this.tools),o={role:"system",content:this.systemPrompt+s},a=await this.client.chat({model:this.modelKey,messages:[o,...this.prevMessages,...i],stream:!0});this.prevMessages.push(...i);const c=n&&r?fo(r):{role:"assistant",content:[]};let h="";for await(const f of a){h+=f.message.content;const{toolContent:d,content:m}=pte(h);Array.isArray(c.content)&&(c.content.length===0?c.content.push({type:"text",text:m}):d?c.content[c.content.length-1].type!=="tool-call"?(c.content[c.content.length-1]={type:"text",text:m},c.content.push(d)):c.content[c.content.length-1]=d:c.content[c.content.length-1].type==="tool-call"?c.content.push({type:"text",text:m}):c.content[c.content.length-1]={type:"text",text:m}),f.done&&(this.prevMessages.push({role:"assistant",content:h}),yield{isEnd:!0,responseMessage:c}),yield c}}catch(i){yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r=JSON.stringify({name:n.toolName,result:n.result});return this.prevMessages.push({role:"user",content:r}),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.client&&this.client.abort()};getName=()=>"Ollama";getBaseUrl=()=>"http://localhost:11434";checkProvider=async e=>{const n=new eb({host:e.url});try{return await n.list(),!0}catch(r){return console.log(r),{field:"url",message:"Invalid URL"}}};getProviderModels=async e=>(await new eb({host:e.url}).list()).models.map(i=>({id:i.model,name:i.name,provider:"ollama"}))}const SL=new mte;function We(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function te(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let z6=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return z6=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function X_(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const J_=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Le extends Error{}let Jr=class Q_ extends Le{constructor(e,n,r,i){super(`${Q_.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=n;const s=n;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Cx({message:r,cause:J_(n)});const s=n?.error;return e===400?new U6(e,s,r,i):e===401?new H6(e,s,r,i):e===403?new q6(e,s,r,i):e===404?new W6(e,s,r,i):e===409?new G6(e,s,r,i):e===422?new K6(e,s,r,i):e===429?new Y6(e,s,r,i):e>=500?new X6(e,s,r,i):new Q_(e,s,r,i)}},Wi=class extends Jr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Cx=class extends Jr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},Yk=class extends Cx{constructor({message:e}={}){super({message:e??"Request timed out."})}},U6=class extends Jr{},H6=class extends Jr{},q6=class extends Jr{},W6=class extends Jr{},G6=class extends Jr{},K6=class extends Jr{},Y6=class extends Jr{},X6=class extends Jr{};class J6 extends Le{constructor(){super("Could not parse response content as the length limit was reached")}}class Q6 extends Le{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class qd extends Error{constructor(e){super(e)}}const gte=/^[a-z][a-z0-9+.-]*:/i,yte=t=>gte.test(t);let Hr=t=>(Hr=Array.isArray,Hr(t)),_L=Hr;function Z6(t){return typeof t!="object"?{}:t??{}}function bte(t){if(!t)return!0;for(const e in t)return!1;return!0}function vte(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function YS(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const xte=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Le(`${t} must be an integer`);if(e<0)throw new Le(`${t} must be a positive integer`);return e},wte=t=>{try{return JSON.parse(t)}catch{return}},Dm=t=>new Promise(e=>setTimeout(e,t)),qu="5.22.0",Ste=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function _te(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Cte=()=>{const t=_te();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":AL(Deno.build.os),"X-Stainless-Arch":CL(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":AL(globalThis.process.platform??"unknown"),"X-Stainless-Arch":CL(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Ate();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ate(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const CL=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",AL=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let kL;const kte=()=>kL??(kL=Cte());function Ete(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function e8(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function t8(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return e8({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){await e.return?.()}})}function n8(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Tte(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Rte=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),r8="RFC3986",i8=t=>String(t),EL={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:i8},Mte="RFC1738";let Z_=(t,e)=>(Z_=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Z_(t,e));const $s=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),XS=1024,Ote=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let o="";for(let a=0;a<s.length;a+=XS){const c=s.length>=XS?s.slice(a,a+XS):s,h=[];for(let f=0;f<c.length;++f){let d=c.charCodeAt(f);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Mte&&(d===40||d===41)){h[h.length]=c.charAt(f);continue}if(d<128){h[h.length]=$s[d];continue}if(d<2048){h[h.length]=$s[192|d>>6]+$s[128|d&63];continue}if(d<55296||d>=57344){h[h.length]=$s[224|d>>12]+$s[128|d>>6&63]+$s[128|d&63];continue}f+=1,d=65536+((d&1023)<<10|c.charCodeAt(f)&1023),h[h.length]=$s[240|d>>18]+$s[128|d>>12&63]+$s[128|d>>6&63]+$s[128|d&63]}o+=h.join("")}return o};function Pte(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function TL(t,e){if(Hr(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const s8={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},o8=function(t,e){Array.prototype.push.apply(t,Hr(e)?e:[e])};let RL;const _n={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ote,encodeValuesOnly:!1,format:r8,formatter:i8,indices:!1,serializeDate(t){return(RL??(RL=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Dte(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const JS={};function a8(t,e,n,r,i,s,o,a,c,h,f,d,m,y,v,w,_,S){let A=t,k=S,P=0,M=!1;for(;(k=k.get(JS))!==void 0&&!M;){const j=k.get(t);if(P+=1,typeof j<"u"){if(j===P)throw new RangeError("Cyclic object value");M=!0}typeof k.get(JS)>"u"&&(P=0)}if(typeof h=="function"?A=h(e,A):A instanceof Date?A=m?.(A):n==="comma"&&Hr(A)&&(A=TL(A,function(j){return j instanceof Date?m?.(j):j})),A===null){if(s)return c&&!w?c(e,_n.encoder,_,"key",y):e;A=""}if(Dte(A)||Pte(A)){if(c){const j=w?e:c(e,_n.encoder,_,"key",y);return[v?.(j)+"="+v?.(c(A,_n.encoder,_,"value",y))]}return[v?.(e)+"="+v?.(String(A))]}const O=[];if(typeof A>"u")return O;let L;if(n==="comma"&&Hr(A))w&&c&&(A=TL(A,c)),L=[{value:A.length>0?A.join(",")||null:void 0}];else if(Hr(h))L=h;else{const j=Object.keys(A);L=f?j.sort(f):j}const N=a?String(e).replace(/\./g,"%2E"):String(e),z=r&&Hr(A)&&A.length===1?N+"[]":N;if(i&&Hr(A)&&A.length===0)return z+"[]";for(let j=0;j<L.length;++j){const H=L[j],W=typeof H=="object"&&typeof H.value<"u"?H.value:A[H];if(o&&W===null)continue;const X=d&&a?H.replace(/\./g,"%2E"):H,G=Hr(A)?typeof n=="function"?n(z,X):z:z+(d?"."+X:"["+X+"]");S.set(t,P);const ie=new WeakMap;ie.set(JS,S),o8(O,a8(W,G,n,r,i,s,o,a,n==="comma"&&w&&Hr(A)?null:c,h,f,d,m,y,v,w,_,ie))}return O}function Lte(t=_n){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||_n.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=r8;if(typeof t.format<"u"){if(!Z_(EL,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=EL[n];let i=_n.filter;(typeof t.filter=="function"||Hr(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in s8?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=_n.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:_n.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:_n.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:_n.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:_n.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?_n.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:_n.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:_n.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:_n.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:_n.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:_n.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:_n.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:_n.strictNullHandling}}function Ite(t,e={}){let n=t;const r=Lte(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Hr(r.filter)&&(s=r.filter,i=s);const o=[];if(typeof n!="object"||n===null)return"";const a=s8[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const h=new WeakMap;for(let m=0;m<i.length;++m){const y=i[m];r.skipNulls&&n[y]===null||o8(o,a8(n[y],y,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,h))}const f=o.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),f.length>0?d+f:""}function Nte(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let ML;function Xk(t){let e;return(ML??(e=new globalThis.TextEncoder,ML=e.encode.bind(e)))(t)}let OL;function PL(t){let e;return(OL??(e=new globalThis.TextDecoder,OL=e.decode.bind(e)))(t)}var gi,yi;let Ax=class{constructor(){gi.set(this,void 0),yi.set(this,void 0),We(this,gi,new Uint8Array),We(this,yi,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Xk(e):e;We(this,gi,Nte([te(this,gi,"f"),n]));const r=[];let i;for(;(i=Bte(te(this,gi,"f"),te(this,yi,"f")))!=null;){if(i.carriage&&te(this,yi,"f")==null){We(this,yi,i.index);continue}if(te(this,yi,"f")!=null&&(i.index!==te(this,yi,"f")+1||i.carriage)){r.push(PL(te(this,gi,"f").subarray(0,te(this,yi,"f")-1))),We(this,gi,te(this,gi,"f").subarray(te(this,yi,"f"))),We(this,yi,null);continue}const s=te(this,yi,"f")!==null?i.preceding-1:i.preceding,o=PL(te(this,gi,"f").subarray(0,s));r.push(o),We(this,gi,te(this,gi,"f").subarray(i.index)),We(this,yi,null)}return r}flush(){return te(this,gi,"f").length?this.decode(`
`):[]}};gi=new WeakMap,yi=new WeakMap;Ax.NEWLINE_CHARS=new Set([`
`,"\r"]);Ax.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Bte(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function jte(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Kb={off:0,error:200,warn:300,info:400,debug:500},DL=(t,e,n)=>{if(t){if(vte(Kb,t))return t;zn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Kb))}`)}};function Wd(){}function Y0(t,e,n){return!e||Kb[t]>Kb[n]?Wd:e[t].bind(e)}const $te={error:Wd,warn:Wd,info:Wd,debug:Wd};let LL=new WeakMap;function zn(t){const e=t.logger,n=t.logLevel??"off";if(!e)return $te;const r=LL.get(e);if(r&&r[0]===n)return r[1];const i={error:Y0("error",e,n),warn:Y0("warn",e,n),info:Y0("info",e,n),debug:Y0("debug",e,n)};return LL.set(e,[n,i]),i}const Ql=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Cd;let Yp=class Gd{constructor(e,n,r){this.iterator=e,Cd.set(this,void 0),this.controller=n,We(this,Cd,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?zn(r):console;async function*o(){if(i)throw new Le("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of Vte(e,n))if(!a){if(c.data.startsWith("[DONE]")){a=!0;continue}if(c.event===null||!c.event.startsWith("thread.")){let h;try{h=JSON.parse(c.data)}catch(f){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),f}if(h&&h.error)throw new Jr(void 0,h.error,void 0,e.headers);yield h}else{let h;try{h=JSON.parse(c.data)}catch(f){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),f}if(c.event=="error")throw new Jr(void 0,h.error,h.message,void 0);yield{event:c.event,data:h}}}a=!0}catch(c){if(X_(c))return;throw c}finally{a||n.abort()}}return new Gd(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new Ax,c=n8(e);for await(const h of c)for(const f of a.decode(h))yield f;for(const h of a.flush())yield h}async function*o(){if(i)throw new Le("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of s())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(X_(c))return;throw c}finally{a||n.abort()}}return new Gd(o,n,r)}[(Cd=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Gd(()=>i(e),this.controller,te(this,Cd,"f")),new Gd(()=>i(n),this.controller,te(this,Cd,"f"))]}toReadableStream(){const e=this;let n;return e8({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=Xk(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}};async function*Vte(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Le("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Le("Attempted to iterate over a response with no body");const n=new zte,r=new Ax,i=n8(t.body);for await(const s of Fte(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*Fte(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Xk(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=jte(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}let zte=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Ute(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}};function Ute(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function l8(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{if(e.options.stream)return zn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Yp.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type")?.split(";")[0]?.trim();if(c?.includes("application/json")||c?.endsWith("+json")){const d=await n.json();return c8(d,n)}return await n.text()})();return zn(t).debug(`[${r}] response parsed`,Ql({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}function c8(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Kd;let u8=class h8 extends Promise{constructor(e,n,r=l8){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,Kd.set(this,void 0),We(this,Kd,e)}_thenUnwrap(e){return new h8(te(this,Kd,"f"),this.responsePromise,async(n,r)=>c8(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(te(this,Kd,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Kd=new WeakMap;var X0;class Jk{constructor(e,n,r,i){X0.set(this,void 0),We(this,X0,e),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Le("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await te(this,X0,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(X0=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Hte extends u8{constructor(e,n,r){super(e,n,async(i,s)=>new r(i,s.response,await l8(i,s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class kx extends Jk{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class pn extends Jk{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Z6(this.options.query),after:n}}:null}}class qte extends Jk{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Z6(this.options.query),after:e}}:null}}const f8=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bp(t,e,n){return f8(),new File(t,e??"unknown_file",n)}function tb(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const d8=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",wc=async(t,e)=>({...t,body:await Gte(t.body,e)}),IL=new WeakMap;function Wte(t){const e=typeof t=="function"?t:t.fetch,n=IL.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return IL.set(e,r),r}const Gte=async(t,e)=>{if(!await Wte(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>eC(n,r,i))),n},Kte=t=>t instanceof Blob&&"name"in t,eC=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,bp([await n.blob()],tb(n)));else if(d8(n))t.append(e,bp([await new Response(t8(n)).blob()],tb(n)));else if(Kte(n))t.append(e,n,tb(n));else if(Array.isArray(n))await Promise.all(n.map(r=>eC(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>eC(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},p8=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Yte=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&p8(t),Xte=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Jte(t,e,n){if(f8(),t=await t,Yte(t))return t instanceof File?t:bp([await t.arrayBuffer()],t.name);if(Xte(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),bp(await tC(i),e,n)}const r=await tC(t);if(e||(e=tb(t)),!n?.type){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return bp(r,e,n)}async function tC(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(p8(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(d8(t))for await(const n of t)e.push(...await tC(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Qte(t)}`)}return e}function Qte(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}let Ve=class{constructor(e){this._client=e}};function m8(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const NL=Object.freeze(Object.create(null)),Zte=(t=m8)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((f,d,m)=>{/[?#]/.test(d)&&(i=!0);const y=r[m];let v=(i?encodeURIComponent:t)(""+y);return m!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??NL)??NL)?.toString)&&(v=y+"",s.push({start:f.length+d.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+d+(m===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=c.exec(a))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((f,d)=>f.start-d.start),s.length>0){let f=0;const d=s.reduce((m,y)=>{const v=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,m+v+w},"");throw new Le(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${d}`)}return o},be=Zte(m8);let g8=class extends Ve{list(e,n={},r){return this._client.getAPIList(be`/chat/completions/${e}/messages`,pn,{query:n,...r})}};function Yb(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Qk(t){return t?.$brand==="auto-parseable-response-format"}function Lm(t){return t?.$brand==="auto-parseable-tool"}function ene(t,e){return!e||!y8(e)?{...t,choices:t.choices.map(n=>(b8(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Zk(t,e)}function Zk(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new J6;if(r.finish_reason==="content_filter")throw new Q6;return b8(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>nne(e,i))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?tne(e,r.message.content):null}}});return{...t,choices:n}}function tne(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function nne(t,e){const n=t.tools?.find(r=>Yb(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Lm(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function rne(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Yb(r)&&r.function?.name===e.function.name);return Yb(n)&&(Lm(n)||n?.function.strict||!1)}function y8(t){return Qk(t.response_format)?!0:t.tools?.some(e=>Lm(e)||e.type==="function"&&e.function.strict===!0)??!1}function b8(t){for(const e of t||[])if(e.type!=="function")throw new Le(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function ine(t){for(const e of t??[]){if(e.type!=="function")throw new Le(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Le(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Xb=t=>t?.role==="assistant",v8=t=>t?.role==="tool";var nC,nb,rb,Yd,Xd,ib,Jd,zo,Qd,Jb,Qb,Wu,x8;class eE{constructor(){nC.add(this),this.controller=new AbortController,nb.set(this,void 0),rb.set(this,()=>{}),Yd.set(this,()=>{}),Xd.set(this,void 0),ib.set(this,()=>{}),Jd.set(this,()=>{}),zo.set(this,{}),Qd.set(this,!1),Jb.set(this,!1),Qb.set(this,!1),Wu.set(this,!1),We(this,nb,new Promise((e,n)=>{We(this,rb,e,"f"),We(this,Yd,n,"f")})),We(this,Xd,new Promise((e,n)=>{We(this,ib,e,"f"),We(this,Jd,n,"f")})),te(this,nb,"f").catch(()=>{}),te(this,Xd,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},te(this,nC,"m",x8).bind(this))},0)}_connected(){this.ended||(te(this,rb,"f").call(this),this._emit("connect"))}get ended(){return te(this,Qd,"f")}get errored(){return te(this,Jb,"f")}get aborted(){return te(this,Qb,"f")}abort(){this.controller.abort()}on(e,n){return(te(this,zo,"f")[e]||(te(this,zo,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=te(this,zo,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(te(this,zo,"f")[e]||(te(this,zo,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{We(this,Wu,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){We(this,Wu,!0),await te(this,Xd,"f")}_emit(e,...n){if(te(this,Qd,"f"))return;e==="end"&&(We(this,Qd,!0),te(this,ib,"f").call(this));const r=te(this,zo,"f")[e];if(r&&(te(this,zo,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!te(this,Wu,"f")&&!r?.length&&Promise.reject(i),te(this,Yd,"f").call(this,i),te(this,Jd,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!te(this,Wu,"f")&&!r?.length&&Promise.reject(i),te(this,Yd,"f").call(this,i),te(this,Jd,"f").call(this,i),this._emit("end")}}_emitFinal(){}}nb=new WeakMap,rb=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,ib=new WeakMap,Jd=new WeakMap,zo=new WeakMap,Qd=new WeakMap,Jb=new WeakMap,Qb=new WeakMap,Wu=new WeakMap,nC=new WeakSet,x8=function(e){if(We(this,Jb,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Wi),e instanceof Wi)return We(this,Qb,!0),this._emit("abort",e);if(e instanceof Le)return this._emit("error",e);if(e instanceof Error){const n=new Le(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Le(String(e)))};function sne(t){return typeof t.parse=="function"}var kr,rC,Zb,iC,sC,oC,w8,S8;const one=10;let _8=class extends eE{constructor(){super(...arguments),kr.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),v8(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Xb(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Le("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),te(this,kr,"m",rC).call(this)}async finalMessage(){return await this.done(),te(this,kr,"m",Zb).call(this)}async finalFunctionToolCall(){return await this.done(),te(this,kr,"m",iC).call(this)}async finalFunctionToolCallResult(){return await this.done(),te(this,kr,"m",sC).call(this)}async totalUsage(){return await this.done(),te(this,kr,"m",oC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=te(this,kr,"m",Zb).call(this);n&&this._emit("finalMessage",n);const r=te(this,kr,"m",rC).call(this);r&&this._emit("finalContent",r);const i=te(this,kr,"m",iC).call(this);i&&this._emit("finalFunctionToolCall",i);const s=te(this,kr,"m",sC).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",te(this,kr,"m",oC).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),te(this,kr,"m",w8).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Zk(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const i="tool",{tool_choice:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s.type==="function"&&s?.function?.name,{maxChatCompletions:h=one}=r||{},f=n.tools.map(y=>{if(Lm(y)){if(!y.$callback)throw new Le("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),d={};for(const y of f)y.type==="function"&&(d[y.function.name||y.function.function.name]=y.function);const m="tools"in n?f.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of n.messages)this._addMessage(y,!1);for(let y=0;y<h;++y){const w=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:m,messages:[...this.messages]},r)).choices[0]?.message;if(!w)throw new Le("missing message in ChatCompletion response");if(!w.tool_calls?.length)return;for(const _ of w.tool_calls){if(_.type!=="function")continue;const S=_.id,{name:A,arguments:k}=_.function,P=d[A];if(P){if(c&&c!==A){const N=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:S,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${Object.keys(d).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:S,content:N});continue}let M;try{M=sne(P)?await P.parse(k):k}catch(N){const z=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:S,content:z});continue}const O=await P.function(M,this),L=te(this,kr,"m",S8).call(this,O);if(this._addMessage({role:i,tool_call_id:S,content:L}),c)return}}}};kr=new WeakSet,rC=function(){return te(this,kr,"m",Zb).call(this).content??null},Zb=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Xb(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Le("stream ended without producing a ChatCompletionMessage with role=assistant")},iC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Xb(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},sC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(v8(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},oC=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},w8=function(e){if(e.n!=null&&e.n>1)throw new Le("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},S8=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class tE extends _8{static runTools(e,n,r){const i=new tE,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),Xb(e)&&e.content&&this._emit("content",e.content)}}const C8=1,A8=2,k8=4,E8=8,T8=16,R8=32,M8=64,O8=128,P8=256,D8=O8|P8,L8=T8|R8|D8|M8,I8=C8|A8|L8,N8=k8|E8,ane=I8|N8,Ln={STR:C8,NUM:A8,ARR:k8,OBJ:E8,NULL:T8,BOOL:R8,NAN:M8,INFINITY:O8,MINUS_INFINITY:P8,INF:D8,SPECIAL:L8,ATOM:I8,COLLECTION:N8,ALL:ane};class lne extends Error{}class cne extends Error{}function une(t,e=Ln.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return hne(t.trim(),e)}const hne=(t,e)=>{const n=t.length;let r=0;const i=m=>{throw new lne(`${m} at position ${r}`)},s=m=>{throw new cne(`${m} at position ${r}`)},o=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?h():t.substring(r,r+4)==="null"||Ln.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Ln.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Ln.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Ln.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Ln.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Ln.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),a=()=>{const m=r;let y=!1;for(r++;r<n&&(t[r]!=='"'||y&&t[r-1]==="\\");)y=t[r]==="\\"?!y:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(y)))}catch(v){s(String(v))}else if(Ln.STR&e)try{return JSON.parse(t.substring(m,r-Number(y))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},c=()=>{r++,d();const m={};try{for(;t[r]!=="}";){if(d(),r>=n&&Ln.OBJ&e)return m;const y=a();d(),r++;try{const v=o();Object.defineProperty(m,y,{value:v,writable:!0,enumerable:!0,configurable:!0})}catch(v){if(Ln.OBJ&e)return m;throw v}d(),t[r]===","&&r++}}catch{if(Ln.OBJ&e)return m;i("Expected '}' at end of object")}return r++,m},h=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(o()),d(),t[r]===","&&r++}catch{if(Ln.ARR&e)return m;i("Expected ']' at end of array")}return r++,m},f=()=>{if(r===0){t==="-"&&Ln.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(y){if(Ln.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(y))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Ln.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&Ln.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(v){s(String(v))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return o()},BL=t=>une(t,Ln.ALL^Ln.NUM);var xn,Vo,Iu,Ua,QS,J0,ZS,e2,t2,Q0,n2,jL;let B8=class aC extends _8{constructor(e){super(),xn.add(this),Vo.set(this,void 0),Iu.set(this,void 0),Ua.set(this,void 0),We(this,Vo,e),We(this,Iu,[])}get currentChatCompletionSnapshot(){return te(this,Ua,"f")}static fromReadableStream(e){const n=new aC(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new aC(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){super._createChatCompletion;const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),te(this,xn,"m",QS).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)te(this,xn,"m",ZS).call(this,o);if(s.controller.signal?.aborted)throw new Wi;return this._addChatCompletion(te(this,xn,"m",Q0).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),te(this,xn,"m",QS).call(this),this._connected();const i=Yp.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(te(this,xn,"m",Q0).call(this)),te(this,xn,"m",ZS).call(this,o),s=o.id;if(i.controller.signal?.aborted)throw new Wi;return this._addChatCompletion(te(this,xn,"m",Q0).call(this))}[(Vo=new WeakMap,Iu=new WeakMap,Ua=new WeakMap,xn=new WeakSet,QS=function(){this.ended||We(this,Ua,void 0)},J0=function(n){let r=te(this,Iu,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},te(this,Iu,"f")[n.index]=r,r)},ZS=function(n){if(this.ended)return;const r=te(this,xn,"m",jL).call(this,n);this._emit("chunk",n,r);for(const i of n.choices){const s=r.choices[i.index];i.delta.content!=null&&s.message?.role==="assistant"&&s.message?.content&&(this._emit("content",i.delta.content,s.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:s.message.content,parsed:s.message.parsed})),i.delta.refusal!=null&&s.message?.role==="assistant"&&s.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:s.message.refusal}),i.logprobs?.content!=null&&s.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:s.logprobs?.content??[]}),i.logprobs?.refusal!=null&&s.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:s.logprobs?.refusal??[]});const o=te(this,xn,"m",J0).call(this,s);s.finish_reason&&(te(this,xn,"m",t2).call(this,s),o.current_tool_call_index!=null&&te(this,xn,"m",e2).call(this,s,o.current_tool_call_index));for(const a of i.delta.tool_calls??[])o.current_tool_call_index!==a.index&&(te(this,xn,"m",t2).call(this,s),o.current_tool_call_index!=null&&te(this,xn,"m",e2).call(this,s,o.current_tool_call_index)),o.current_tool_call_index=a.index;for(const a of i.delta.tool_calls??[]){const c=s.message.tool_calls?.[a.index];c?.type&&(c?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:c.function?.name,index:a.index,arguments:c.function.arguments,parsed_arguments:c.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(c?.type,void 0))}}},e2=function(n,r){if(te(this,xn,"m",J0).call(this,n).done_tool_calls.has(r))return;const s=n.message.tool_calls?.[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const o=te(this,Vo,"f")?.tools?.find(a=>Yb(a)&&a.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:Lm(o)?o.$parseRaw(s.function.arguments):o?.function.strict?JSON.parse(s.function.arguments):null})}else s.type},t2=function(n){const r=te(this,xn,"m",J0).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=te(this,xn,"m",n2).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Q0=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");const n=te(this,Ua,"f");if(!n)throw new Le("request ended without sending any chunks");return We(this,Ua,void 0),We(this,Iu,[]),fne(n,te(this,Vo,"f"))},n2=function(){const n=te(this,Vo,"f")?.response_format;return Qk(n)?n:null},jL=function(n){var r,i,s,o;let a=te(this,Ua,"f");const{choices:c,...h}=n;a?Object.assign(a,h):a=We(this,Ua,{...h,choices:[]});for(const{delta:f,finish_reason:d,index:m,logprobs:y=null,...v}of n.choices){let w=a.choices[m];if(w||(w=a.choices[m]={finish_reason:d,index:m,message:{},logprobs:y,...v}),y)if(!w.logprobs)w.logprobs=Object.assign({},y);else{const{content:O,refusal:L,...N}=y;Object.assign(w.logprobs,N),O&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...O)),L&&((i=w.logprobs).refusal??(i.refusal=[]),w.logprobs.refusal.push(...L))}if(d&&(w.finish_reason=d,te(this,Vo,"f")&&y8(te(this,Vo,"f")))){if(d==="length")throw new J6;if(d==="content_filter")throw new Q6}if(Object.assign(w,v),!f)continue;const{content:_,refusal:S,function_call:A,role:k,tool_calls:P,...M}=f;if(Object.assign(w.message,M),S&&(w.message.refusal=(w.message.refusal||"")+S),k&&(w.message.role=k),A&&(w.message.function_call?(A.name&&(w.message.function_call.name=A.name),A.arguments&&((s=w.message.function_call).arguments??(s.arguments=""),w.message.function_call.arguments+=A.arguments)):w.message.function_call=A),_&&(w.message.content=(w.message.content||"")+_,!w.message.refusal&&te(this,xn,"m",n2).call(this)&&(w.message.parsed=BL(w.message.content))),P){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:O,id:L,type:N,function:z,...j}of P){const H=(o=w.message.tool_calls)[O]??(o[O]={});Object.assign(H,j),L&&(H.id=L),N&&(H.type=N),z&&(H.function??(H.function={name:z.name??"",arguments:""})),z?.name&&(H.function.name=z.name),z?.arguments&&(H.function.arguments+=z.arguments,rne(te(this,Vo,"f"),H)&&(H.function.parsed_arguments=BL(H.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Yp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function fne(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:o,...a}=t,c={...a,id:n,choices:r.map(({message:h,finish_reason:f,index:d,logprobs:m,...y})=>{if(!f)throw new Le(`missing finish_reason for choice ${d}`);const{content:v=null,function_call:w,tool_calls:_,...S}=h,A=h.role;if(!A)throw new Le(`missing role for choice ${d}`);if(w){const{arguments:k,name:P}=w;if(k==null)throw new Le(`missing function_call.arguments for choice ${d}`);if(!P)throw new Le(`missing function_call.name for choice ${d}`);return{...y,message:{content:v,function_call:{arguments:k,name:P},role:A,refusal:h.refusal??null},finish_reason:f,index:d,logprobs:m}}return _?{...y,index:d,finish_reason:f,logprobs:m,message:{...S,role:A,content:v,refusal:h.refusal??null,tool_calls:_.map((k,P)=>{const{function:M,type:O,id:L,...N}=k,{arguments:z,name:j,...H}=M||{};if(L==null)throw new Le(`missing choices[${d}].tool_calls[${P}].id
${Z0(t)}`);if(O==null)throw new Le(`missing choices[${d}].tool_calls[${P}].type
${Z0(t)}`);if(j==null)throw new Le(`missing choices[${d}].tool_calls[${P}].function.name
${Z0(t)}`);if(z==null)throw new Le(`missing choices[${d}].tool_calls[${P}].function.arguments
${Z0(t)}`);return{...N,id:L,type:O,function:{...H,name:j,arguments:z}}})}}:{...y,message:{...S,content:v,role:A,refusal:h.refusal??null},finish_reason:f,index:d,logprobs:m}}),created:i,model:s,object:"chat.completion",...o?{system_fingerprint:o}:{}};return ene(c,e)}function Z0(t){return JSON.stringify(t)}class ev extends B8{static fromReadableStream(e){const n=new ev(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const i=new ev(n),s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let nE=class extends Ve{constructor(){super(...arguments),this.messages=new g8(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(be`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(be`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/chat/completions/${e}`,n)}parse(e,n){return ine(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Zk(r,e))}runTools(e,n){return e.stream?ev.runTools(this._client,e,n):tE.runTools(this._client,e,n)}stream(e,n){return B8.createChatCompletion(this._client,e,n)}};nE.Messages=g8;let rE=class extends Ve{constructor(){super(...arguments),this.completions=new nE(this._client)}};rE.Completions=nE;const j8=Symbol("brand.privateNullableHeaders");function*dne(t){if(!t)return;if(j8 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():_L(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=_L(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Ne=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of dne(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[j8]:!0,values:e,nulls:n}};class $8 extends Ve{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:Ne([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}let V8=class extends Ve{create(e,n){return this._client.post("/audio/transcriptions",wc({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}},F8=class extends Ve{create(e,n){return this._client.post("/audio/translations",wc({body:e,...n,__metadata:{model:e.model}},this._client))}},Im=class extends Ve{constructor(){super(...arguments),this.transcriptions=new V8(this._client),this.translations=new F8(this._client),this.speech=new $8(this._client)}};Im.Transcriptions=V8;Im.Translations=F8;Im.Speech=$8;let z8=class extends Ve{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(be`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",pn,{query:e,...n})}cancel(e,n){return this._client.post(be`/batches/${e}/cancel`,n)}};class U8 extends Ve{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(be`/assistants/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(be`/assistants/${e}`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",pn,{query:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(be`/assistants/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let H8=class extends Ve{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class q8 extends Ve{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Ex=class extends Ve{constructor(){super(...arguments),this.sessions=new H8(this._client),this.transcriptionSessions=new q8(this._client)}};Ex.Sessions=H8;Ex.TranscriptionSessions=q8;class W8 extends Ve{create(e,n,r){return this._client.post(be`/threads/${e}/messages`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(be`/threads/${i}/messages/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(be`/threads/${i}/messages/${e}`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(be`/threads/${e}/messages`,pn,{query:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:i}=n;return this._client.delete(be`/threads/${i}/messages/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class G8 extends Ve{retrieve(e,n,r){const{thread_id:i,run_id:s,...o}=n;return this._client.get(be`/threads/${i}/runs/${s}/steps/${e}`,{query:o,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:i,...s}=n;return this._client.getAPIList(be`/threads/${i}/runs/${e}/steps`,pn,{query:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const pne=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var mne={};const Nu=t=>{if(typeof globalThis.process<"u")return mne?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Hn,ac,lC,Ys,sb,ds,lc,eh,rc,tv,wi,ob,ab,vp,Zd,ep,$L,VL,FL,zL,UL,HL,qL;class xp extends eE{constructor(){super(...arguments),Hn.add(this),lC.set(this,[]),Ys.set(this,{}),sb.set(this,{}),ds.set(this,void 0),lc.set(this,void 0),eh.set(this,void 0),rc.set(this,void 0),tv.set(this,void 0),wi.set(this,void 0),ob.set(this,void 0),ab.set(this,void 0),vp.set(this,void 0)}[(lC=new WeakMap,Ys=new WeakMap,sb=new WeakMap,ds=new WeakMap,lc=new WeakMap,eh=new WeakMap,rc=new WeakMap,tv=new WeakMap,wi=new WeakMap,ob=new WeakMap,ab=new WeakMap,vp=new WeakMap,Hn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new ac;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Yp.fromReadableStream(e,this.controller);for await(const s of i)te(this,Hn,"m",Zd).call(this,s);if(i.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,Hn,"m",ep).call(this))}toReadableStream(){return new Yp(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i){const s=new ac;return s._run(()=>s._runToolAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,i){const s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(n,o,{...i,signal:this.controller.signal});this._connected();for await(const c of a)te(this,Hn,"m",Zd).call(this,c);if(a.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,Hn,"m",ep).call(this))}static createThreadAssistantStream(e,n,r){const i=new ac;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new ac;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return te(this,ob,"f")}currentRun(){return te(this,ab,"f")}currentMessageSnapshot(){return te(this,ds,"f")}currentRunStepSnapshot(){return te(this,vp,"f")}async finalRunSteps(){return await this.done(),Object.values(te(this,Ys,"f"))}async finalMessages(){return await this.done(),Object.values(te(this,sb,"f"))}async finalRun(){if(await this.done(),!te(this,lc,"f"))throw Error("Final run was not received.");return te(this,lc,"f")}async _createThreadAssistantStream(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},o=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const a of o)te(this,Hn,"m",Zd).call(this,a);if(o.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,Hn,"m",ep).call(this))}async _createAssistantStream(e,n,r,i){const s=i?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.create(n,o,{...i,signal:this.controller.signal});this._connected();for await(const c of a)te(this,Hn,"m",Zd).call(this,c);if(a.controller.signal?.aborted)throw new Wi;return this._addRun(te(this,Hn,"m",ep).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(YS(s)&&YS(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(o=>typeof o=="string"||typeof o=="number")){s.push(...i);continue}for(const o of i){if(!YS(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const a=o.index;if(a==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=s[a];c==null?s.push(o):s[a]=this.accumulateDelta(c,o)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i){return await this._createToolAssistantStream(n,e,r,i)}}ac=xp,Zd=function(e){if(!this.ended)switch(We(this,ob,e),te(this,Hn,"m",FL).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":te(this,Hn,"m",qL).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":te(this,Hn,"m",VL).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":te(this,Hn,"m",$L).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ep=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");if(!te(this,lc,"f"))throw Error("Final run has not been received");return te(this,lc,"f")},$L=function(e){const[n,r]=te(this,Hn,"m",UL).call(this,e,te(this,ds,"f"));We(this,ds,n),te(this,sb,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,o=n.content[i.index];if(o&&o.type=="text")this._emit("textDelta",s,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=te(this,eh,"f")){if(te(this,rc,"f"))switch(te(this,rc,"f").type){case"text":this._emit("textDone",te(this,rc,"f").text,te(this,ds,"f"));break;case"image_file":this._emit("imageFileDone",te(this,rc,"f").image_file,te(this,ds,"f"));break}We(this,eh,i.index)}We(this,rc,n.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(te(this,eh,"f")!==void 0){const i=e.data.content[te(this,eh,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,te(this,ds,"f"));break;case"text":this._emit("textDone",i.text,te(this,ds,"f"));break}}te(this,ds,"f")&&this._emit("messageDone",e.data),We(this,ds,void 0)}},VL=function(e){const n=te(this,Hn,"m",zL).call(this,e);switch(We(this,vp,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==te(this,tv,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(te(this,wi,"f")&&this._emit("toolCallDone",te(this,wi,"f")),We(this,tv,s.index),We(this,wi,n.step_details.tool_calls[s.index]),te(this,wi,"f")&&this._emit("toolCallCreated",te(this,wi,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":We(this,vp,void 0),e.data.step_details.type=="tool_calls"&&te(this,wi,"f")&&(this._emit("toolCallDone",te(this,wi,"f")),We(this,wi,void 0)),this._emit("runStepDone",e.data,n);break}},FL=function(e){te(this,lC,"f").push(e),this._emit("event",e)},zL=function(e){switch(e.event){case"thread.run.step.created":return te(this,Ys,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=te(this,Ys,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=ac.accumulateDelta(n,r.delta);te(this,Ys,"f")[e.data.id]=i}return te(this,Ys,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":te(this,Ys,"f")[e.data.id]=e.data;break}if(te(this,Ys,"f")[e.data.id])return te(this,Ys,"f")[e.data.id];throw new Error("No snapshot available")},UL=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let o=n.content[s.index];n.content[s.index]=te(this,Hn,"m",HL).call(this,s,o)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},HL=function(e,n){return ac.accumulateDelta(n,e)},qL=function(e){switch(We(this,ab,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":We(this,lc,e.data),te(this,wi,"f")&&(this._emit("toolCallDone",te(this,wi,"f")),We(this,wi,void 0));break}};let iE=class extends Ve{constructor(){super(...arguments),this.steps=new G8(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(be`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:i}=n;return this._client.get(be`/threads/${i}/runs/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:i,...s}=n;return this._client.post(be`/threads/${i}/runs/${e}`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(be`/threads/${e}/runs`,pn,{query:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:i}=n;return this._client.post(be`/threads/${i}/runs/${e}/cancel`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(i.id,{thread_id:e},r)}createAndStream(e,n,r){return xp.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i=Ne([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:s,response:o}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(a=h)}}await Dm(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return xp.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:i,...s}=n;return this._client.post(be`/threads/${i}/runs/${e}/submit_tool_outputs`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const i=await this.submitToolOutputs(e,n,r);return await this.poll(i.id,n,r)}submitToolOutputsStream(e,n,r){return xp.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};iE.Steps=G8;class Tx extends Ve{constructor(){super(...arguments),this.runs=new iE(this._client),this.messages=new W8(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(be`/threads/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(be`/threads/${e}`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(be`/threads/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return xp.createThreadAssistantStream(e,this._client.beta.threads,n)}}Tx.Runs=iE;Tx.Messages=W8;class Nm extends Ve{constructor(){super(...arguments),this.realtime=new Ex(this._client),this.assistants=new U8(this._client),this.threads=new Tx(this._client)}}Nm.Realtime=Ex;Nm.Assistants=U8;Nm.Threads=Tx;let K8=class extends Ve{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}},Y8=class extends Ve{retrieve(e,n,r){const{container_id:i}=n;return this._client.get(be`/containers/${i}/files/${e}/content`,{...r,headers:Ne([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}},sE=class extends Ve{constructor(){super(...arguments),this.content=new Y8(this._client)}create(e,n,r){return this._client.post(be`/containers/${e}/files`,wc({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:i}=n;return this._client.get(be`/containers/${i}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(be`/containers/${e}/files`,pn,{query:n,...r})}delete(e,n,r){const{container_id:i}=n;return this._client.delete(be`/containers/${i}/files/${e}`,{...r,headers:Ne([{Accept:"*/*"},r?.headers])})}};sE.Content=Y8;class oE extends Ve{constructor(){super(...arguments),this.files=new sE(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(be`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/containers/${e}`,{...n,headers:Ne([{Accept:"*/*"},n?.headers])})}}oE.Files=sE;class X8 extends Ve{create(e,n,r){const{include:i,...s}=n;return this._client.post(be`/conversations/${e}/items`,{query:{include:i},body:s,...r})}retrieve(e,n,r){const{conversation_id:i,...s}=n;return this._client.get(be`/conversations/${i}/items/${e}`,{query:s,...r})}list(e,n={},r){return this._client.getAPIList(be`/conversations/${e}/items`,qte,{query:n,...r})}delete(e,n,r){const{conversation_id:i}=n;return this._client.delete(be`/conversations/${i}/items/${e}`,r)}}class aE extends Ve{constructor(){super(...arguments),this.items=new X8(this._client)}create(e,n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(be`/conversations/${e}`,n)}update(e,n,r){return this._client.post(be`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(be`/conversations/${e}`,n)}}aE.Items=X8;let J8=class extends Ve{create(e,n){const r=!!e.encoding_format;let i=r?e.encoding_format:"base64";r&&zn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:i},...n});return r?s:(zn(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(o=>(o&&o.data&&o.data.forEach(a=>{const c=a.embedding;a.embedding=pne(c)}),o)))}};class Q8 extends Ve{retrieve(e,n,r){const{eval_id:i,run_id:s}=n;return this._client.get(be`/evals/${i}/runs/${s}/output_items/${e}`,r)}list(e,n,r){const{eval_id:i,...s}=n;return this._client.getAPIList(be`/evals/${i}/runs/${e}/output_items`,pn,{query:s,...r})}}class lE extends Ve{constructor(){super(...arguments),this.outputItems=new Q8(this._client)}create(e,n,r){return this._client.post(be`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:i}=n;return this._client.get(be`/evals/${i}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(be`/evals/${e}/runs`,pn,{query:n,...r})}delete(e,n,r){const{eval_id:i}=n;return this._client.delete(be`/evals/${i}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:i}=n;return this._client.post(be`/evals/${i}/runs/${e}`,r)}}lE.OutputItems=Q8;class cE extends Ve{constructor(){super(...arguments),this.runs=new lE(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(be`/evals/${e}`,n)}update(e,n,r){return this._client.post(be`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/evals/${e}`,n)}}cE.Runs=lE;let Z8=class extends Ve{create(e,n){return this._client.post("/files",wc({body:e,...n},this._client))}retrieve(e,n){return this._client.get(be`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",pn,{query:e,...n})}delete(e,n){return this._client.delete(be`/files/${e}`,n)}content(e,n){return this._client.get(be`/files/${e}/content`,{...n,headers:Ne([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!i.has(o.status);)if(await Dm(n),o=await this.retrieve(e),Date.now()-s>r)throw new Yk({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return o}};class e9 extends Ve{}let t9=class extends Ve{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class uE extends Ve{constructor(){super(...arguments),this.graders=new t9(this._client)}}uE.Graders=t9;class n9 extends Ve{create(e,n,r){return this._client.getAPIList(be`/fine_tuning/checkpoints/${e}/permissions`,kx,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(be`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:i}=n;return this._client.delete(be`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}}let hE=class extends Ve{constructor(){super(...arguments),this.permissions=new n9(this._client)}};hE.Permissions=n9;class r9 extends Ve{list(e,n={},r){return this._client.getAPIList(be`/fine_tuning/jobs/${e}/checkpoints`,pn,{query:n,...r})}}let fE=class extends Ve{constructor(){super(...arguments),this.checkpoints=new r9(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(be`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",pn,{query:e,...n})}cancel(e,n){return this._client.post(be`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(be`/fine_tuning/jobs/${e}/events`,pn,{query:n,...r})}pause(e,n){return this._client.post(be`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(be`/fine_tuning/jobs/${e}/resume`,n)}};fE.Checkpoints=r9;class Wh extends Ve{constructor(){super(...arguments),this.methods=new e9(this._client),this.jobs=new fE(this._client),this.checkpoints=new hE(this._client),this.alpha=new uE(this._client)}}Wh.Methods=e9;Wh.Jobs=fE;Wh.Checkpoints=hE;Wh.Alpha=uE;class i9 extends Ve{}class dE extends Ve{constructor(){super(...arguments),this.graderModels=new i9(this._client)}}dE.GraderModels=i9;let s9=class extends Ve{createVariation(e,n){return this._client.post("/images/variations",wc({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",wc({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}},o9=class extends Ve{retrieve(e,n){return this._client.get(be`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",kx,e)}delete(e,n){return this._client.delete(be`/models/${e}`,n)}};class a9 extends Ve{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class l9 extends Ve{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class pE extends Ve{constructor(){super(...arguments),this.clientSecrets=new l9(this._client)}}pE.ClientSecrets=l9;function gne(t,e){return!e||!bne(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:c9(t,e)}function c9(t,e){const n=t.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:wne(e,i)};if(i.type==="message"){const s=i.content.map(o=>o.type==="output_text"?{...o,parsed:yne(e,o.text)}:o);return{...i,content:s}}return i}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||cC(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const i of r.output)if(i.type==="message"){for(const s of i.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function yne(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function bne(t){return!!Qk(t.text?.format)}function vne(t){return t?.$brand==="auto-parseable-tool"}function xne(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function wne(t,e){const n=xne(t.tools??[],e.name);return{...e,...e,parsed_arguments:vne(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function cC(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Bu,ey,Ha,ty,WL,GL,KL,YL;class mE extends eE{constructor(e){super(),Bu.add(this),ey.set(this,void 0),Ha.set(this,void 0),ty.set(this,void 0),We(this,ey,e)}static createResponse(e,n,r){const i=new mE(n);return i._run(()=>i._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),te(this,Bu,"m",WL).call(this);let s,o=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),o=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const a of s)te(this,Bu,"m",GL).call(this,a,o);if(s.controller.signal?.aborted)throw new Wi;return te(this,Bu,"m",KL).call(this)}[(ey=new WeakMap,Ha=new WeakMap,ty=new WeakMap,Bu=new WeakSet,WL=function(){this.ended||We(this,Ha,void 0)},GL=function(n,r){if(this.ended)return;const i=(o,a)=>{(r==null||a.sequence_number>r)&&this._emit(o,a)},s=te(this,Bu,"m",YL).call(this,n);switch(i("event",n),n.type){case"response.output_text.delta":{const o=s.output[n.output_index];if(!o)throw new Le(`missing output at index ${n.output_index}`);if(o.type==="message"){const a=o.content[n.content_index];if(!a)throw new Le(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new Le(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const o=s.output[n.output_index];if(!o)throw new Le(`missing output at index ${n.output_index}`);o.type==="function_call"&&i("response.function_call_arguments.delta",{...n,snapshot:o.arguments});break}default:i(n.type,n);break}},KL=function(){if(this.ended)throw new Le("stream has ended, this shouldn't happen");const n=te(this,Ha,"f");if(!n)throw new Le("request ended without sending any events");We(this,Ha,void 0);const r=Sne(n,te(this,ey,"f"));return We(this,ty,r),r},YL=function(n){let r=te(this,Ha,"f");if(!r){if(n.type!=="response.created")throw new Le(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=We(this,Ha,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);const s=i.type,o=n.part;s==="message"&&o.type!=="reasoning_text"?i.content.push(o):s==="reasoning"&&o.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(o));break}case"response.output_text.delta":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);if(i.type==="message"){const s=i.content[n.content_index];if(!s)throw new Le(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new Le(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);i.type==="function_call"&&(i.arguments+=n.delta);break}case"response.reasoning_text.delta":{const i=r.output[n.output_index];if(!i)throw new Le(`missing output at index ${n.output_index}`);if(i.type==="reasoning"){const s=i.content?.[n.content_index];if(!s)throw new Le(`missing content at index ${n.content_index}`);if(s.type!=="reasoning_text")throw new Le(`expected content to be 'reasoning_text', got ${s.type}`);s.text+=n.delta}break}case"response.completed":{We(this,Ha,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=te(this,ty,"f");if(!e)throw new Le("stream ended without producing a ChatCompletion");return e}}function Sne(t,e){return gne(t,e)}class u9 extends Ve{list(e,n={},r){return this._client.getAPIList(be`/responses/${e}/input_items`,pn,{query:n,...r})}}class gE extends Ve{constructor(){super(...arguments),this.inputItems=new u9(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&cC(r),r))}retrieve(e,n={},r){return this._client.get(be`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&cC(i),i))}delete(e,n){return this._client.delete(be`/responses/${e}`,{...n,headers:Ne([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>c9(r,e))}stream(e,n){return mE.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(be`/responses/${e}/cancel`,n)}}gE.InputItems=u9;class h9 extends Ve{create(e,n,r){return this._client.post(be`/uploads/${e}/parts`,wc({body:n,...r},this._client))}}class yE extends Ve{constructor(){super(...arguments),this.parts=new h9(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(be`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(be`/uploads/${e}/complete`,{body:n,...r})}}yE.Parts=h9;const _ne=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};class f9 extends Ve{create(e,n,r){return this._client.post(be`/vector_stores/${e}/file_batches`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(be`/vector_stores/${i}/file_batches/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:i}=n;return this._client.post(be`/vector_stores/${i}/file_batches/${e}/cancel`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r){const{vector_store_id:i,...s}=n;return this._client.getAPIList(be`/vector_stores/${i}/file_batches/${e}/files`,pn,{query:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const i=Ne([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:s,response:o}=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=o.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(a=h)}}await Dm(a);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=i?.maxConcurrency??5,o=Math.min(s,n.length),a=this._client,c=n.values(),h=[...r];async function f(m){for(let y of m){const v=await a.files.create({file:y,purpose:"assistants"},i);h.push(v.id)}}const d=Array(o).fill(c).map(f);return await _ne(d),await this.createAndPoll(e,{file_ids:h})}}let d9=class extends Ve{create(e,n,r){return this._client.post(be`/vector_stores/${e}/files`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:i}=n;return this._client.get(be`/vector_stores/${i}/files/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:i,...s}=n;return this._client.post(be`/vector_stores/${i}/files/${e}`,{body:s,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(be`/vector_stores/${e}/files`,pn,{query:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:i}=n;return this._client.delete(be`/vector_stores/${i}/files/${e}`,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i=Ne([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const s=await this.retrieve(n,{vector_store_id:e},{...r,headers:i}).withResponse(),o=s.data;switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.response.headers.get("openai-poll-after-ms");if(c){const h=parseInt(c);isNaN(h)||(a=h)}}await Dm(a);break;case"failed":case"completed":return o}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}content(e,n,r){const{vector_store_id:i}=n;return this._client.getAPIList(be`/vector_stores/${i}/files/${e}/content`,kx,{...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};class Rx extends Ve{constructor(){super(...arguments),this.files=new d9(this._client),this.fileBatches=new f9(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(be`/vector_stores/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(be`/vector_stores/${e}`,{body:n,...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",pn,{query:e,...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(be`/vector_stores/${e}`,{...n,headers:Ne([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(be`/vector_stores/${e}/search`,kx,{body:n,method:"post",...r,headers:Ne([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Rx.Files=d9;Rx.FileBatches=f9;var Gu,p9,lb;class m9 extends Ve{constructor(){super(...arguments),Gu.add(this)}async unwrap(e,n,r=this._client.webhookSecret,i=300){return await this.verifySignature(e,n,r,i),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");te(this,Gu,"m",p9).call(this,r);const s=Ne([n]).values,o=te(this,Gu,"m",lb).call(this,s,"webhook-signature"),a=te(this,Gu,"m",lb).call(this,s,"webhook-timestamp"),c=te(this,Gu,"m",lb).call(this,s,"webhook-id"),h=parseInt(a,10);if(isNaN(h))throw new qd("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-h>i)throw new qd("Webhook timestamp is too old");if(h>f+i)throw new qd("Webhook timestamp is too new");const d=o.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),y=c?`${c}.${a}.${e}`:`${a}.${e}`,v=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of d)try{const _=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",v,_,new TextEncoder().encode(y)))return}catch{continue}throw new qd("The given webhook signature does not match the expected signature")}}Gu=new WeakSet,p9=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},lb=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var uC,bE,cb,g9;class Ze{constructor({baseURL:e=Nu("OPENAI_BASE_URL"),apiKey:n=Nu("OPENAI_API_KEY"),organization:r=Nu("OPENAI_ORG_ID")??null,project:i=Nu("OPENAI_PROJECT_ID")??null,webhookSecret:s=Nu("OPENAI_WEBHOOK_SECRET")??null,...o}={}){if(uC.add(this),cb.set(this,void 0),this.completions=new K8(this),this.chat=new rE(this),this.embeddings=new J8(this),this.files=new Z8(this),this.images=new s9(this),this.audio=new Im(this),this.moderations=new a9(this),this.models=new o9(this),this.fineTuning=new Wh(this),this.graders=new dE(this),this.vectorStores=new Rx(this),this.webhooks=new m9(this),this.beta=new Nm(this),this.batches=new z8(this),this.uploads=new yE(this),this.responses=new gE(this),this.realtime=new pE(this),this.conversations=new aE(this),this.evals=new cE(this),this.containers=new oE(this),n===void 0)throw new Le("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const a={apiKey:n,organization:r,project:i,webhookSecret:s,...o,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&Ste())throw new Le(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=a.baseURL,this.timeout=a.timeout??bE.DEFAULT_TIMEOUT,this.logger=a.logger??console;const c="warn";this.logLevel=c,this.logLevel=DL(a.logLevel,"ClientOptions.logLevel",this)??DL(Nu("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??c,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??Ete(),We(this,cb,Rte),this._options=a,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=i,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return Ne([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Ite(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${qu}`}defaultIdempotencyKey(){return`stainless-node-retry-${z6()}`}makeStatusError(e,n,r,i){return Jr.generate(e,n,r,i)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Le?r:new Le(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Le(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const i=!te(this,uC,"m",g9).call(this)&&r||this.baseURL,s=yte(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return bte(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new u8(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:c}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(zn(this).debug(`[${h}] sending request`,Ql({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),i.signal?.aborted)throw new Wi;const m=new AbortController,y=await this.fetchWithTimeout(a,o,c,m).catch(J_),v=Date.now();if(y instanceof globalThis.Error){const S=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new Wi;const A=X_(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return zn(this).info(`[${h}] connection ${A?"timed out":"failed"} - ${S}`),zn(this).debug(`[${h}] connection ${A?"timed out":"failed"} (${S})`,Ql({retryOfRequestLogID:r,url:a,durationMs:v-d,message:y.message})),this.retryRequest(i,n,r??h);throw zn(this).info(`[${h}] connection ${A?"timed out":"failed"} - error; no more retries left`),zn(this).debug(`[${h}] connection ${A?"timed out":"failed"} (error; no more retries left)`,Ql({retryOfRequestLogID:r,url:a,durationMs:v-d,message:y.message})),A?new Yk:new Cx({cause:y})}const w=[...y.headers.entries()].filter(([S])=>S==="x-request-id").map(([S,A])=>", "+S+": "+JSON.stringify(A)).join(""),_=`[${h}${f}${w}] ${o.method} ${a} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${v-d}ms`;if(!y.ok){const S=await this.shouldRetry(y);if(n&&S){const L=`retrying, ${n} attempts remaining`;return await Tte(y.body),zn(this).info(`${_} - ${L}`),zn(this).debug(`[${h}] response error (${L})`,Ql({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-d})),this.retryRequest(i,n,r??h,y.headers)}const A=S?"error; no more retries left":"error; not retryable";zn(this).info(`${_} - ${A}`);const k=await y.text().catch(L=>J_(L).message),P=wte(k),M=P?void 0:k;throw zn(this).debug(`[${h}] response error (${A})`,Ql({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:M,durationMs:Date.now()-d})),this.makeStatusError(y.status,P,M,y.headers)}return zn(this).info(_),zn(this).debug(`[${h}] response start`,Ql({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-d})),{response:y,options:i,controller:m,requestLogID:h,retryOfRequestLogID:r,startTime:d}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Hte(this,r,e)}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i?.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(s=c)}const a=i?.get("retry-after");if(a&&!s){const c=parseFloat(a);Number.isNaN(c)?s=Date.parse(a)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Dm(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,c=this.buildURL(s,o,a);"timeout"in r&&xte("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=Ne([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...kte(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ne([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:t8(e)}:te(this,cb,"f").call(this,{body:e,headers:r})}}bE=Ze,cb=new WeakMap,uC=new WeakSet,g9=function(){return this.baseURL!=="https://api.openai.com/v1"};Ze.OpenAI=bE;Ze.DEFAULT_TIMEOUT=6e5;Ze.OpenAIError=Le;Ze.APIError=Jr;Ze.APIConnectionError=Cx;Ze.APIConnectionTimeoutError=Yk;Ze.APIUserAbortError=Wi;Ze.NotFoundError=W6;Ze.ConflictError=G6;Ze.RateLimitError=Y6;Ze.BadRequestError=U6;Ze.AuthenticationError=H6;Ze.InternalServerError=X6;Ze.PermissionDeniedError=q6;Ze.UnprocessableEntityError=K6;Ze.InvalidWebhookSignatureError=qd;Ze.toFile=Jte;Ze.Completions=K8;Ze.Chat=rE;Ze.Embeddings=J8;Ze.Files=Z8;Ze.Images=s9;Ze.Audio=Im;Ze.Moderations=a9;Ze.Models=o9;Ze.FineTuning=Wh;Ze.Graders=dE;Ze.VectorStores=Rx;Ze.Webhooks=m9;Ze.Beta=Nm;Ze.Batches=z8;Ze.Uploads=yE;Ze.Responses=gE;Ze.Realtime=pE;Ze.Conversations=aE;Ze.Evals=cE;Ze.Containers=oE;const Cne=t=>t.map(e=>({type:"function",function:{name:e.name,description:e.description,input_schema:{type:"object",...e.inputSchema}}})),r2=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"||n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?{type:"text",text:i.text}:i.type==="file"?{type:"file",file:{file_data:i.data,file_name:JSON.parse(i.mimeType).path}}:{type:"text",text:""});e.push({role:"user",content:r})}else{const r=typeof n.content=="string"?n.content:[],i=[],s=[],o=n.content;typeof o!="string"&&typeof r!="string"&&o.forEach(c=>{if(Array.isArray(r)&&(c.type==="text"&&r.push({type:"text",text:c.text}),c.type==="tool-call")){c.result&&i.push({role:"tool",content:c.result,tool_call_id:c.toolCallId}),s.push({id:c.toolCallId,type:"function",function:{arguments:c.argsText??"",name:c.toolName}});return}});const a={role:"assistant",content:r};s.length&&(a.tool_calls=s),e.push(a),i.length&&e.push(...i)}}),e},Ane=(t,e,n)=>{if(!e.delta.content)return t;let r=fo(t);const i=r.content;if(typeof i=="string")return r;const s=i[i.length-1];if((!s||n)&&typeof t.content!="string"&&(r={...r,content:[...i,{type:"text",text:e.delta.content}]}),s&&typeof s!="string"&&typeof i!="string"&&s.type==="text"){const o=s.text+e.delta.content,a=fo({...s,text:o});r={...r,content:[...i.slice(0,-1),a]}}return r},kne=(t,e)=>{let n=fo(t);if(!e.delta.tool_calls||typeof n.content=="string")return n;const r=e.delta.tool_calls[0],i=n.content[n.content.length-1];if(!i||i?.type!=="tool-call"){const s={type:"tool-call",args:{},argsText:r?.function?.arguments??"",toolName:r?.function?.name??"",toolCallId:r?.id??""};n={...n,content:[...n.content,s]}}else{const s=i,o=s.argsText+(r?.function?.arguments??""),a=s.toolName||r?.function?.name||"",c=s.toolCallId||r?.id||"",h={...s,args:{},argsText:o,toolName:a,toolCallId:c};n={...n,content:[...n.content.slice(0,-1),h]}}return n};class Ene{modelKey="";systemPrompt="";apiKey;url;provider;prevMessages=[];tools=[];client;stopStream=!1;constructor(){}setProvider=e=>{this.provider=e,this.client=new Ze({apiKey:e.key,baseURL:e.baseUrl,dangerouslyAllowBrowser:!0}),e.key&&this.setApiKey(e.key),e.baseUrl&&this.setUrl(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setApiKey=e=>{this.apiKey=e,this.client&&(this.client.apiKey=e)};setUrl=e=>{this.url=e,this.client&&(this.client.baseURL=e)};setPrevMessages=e=>{this.prevMessages=r2(e)};setTools=e=>{this.tools=Cne(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=r2(e),s={role:"system",content:this.systemPrompt},o=await this.client.chat.completions.create({messages:[s,...this.prevMessages,...i],model:this.modelKey,tools:this.tools,stream:!0,max_tokens:2048});this.prevMessages.push(...i);let a=n&&r?fo(r):{role:"assistant",content:[]},c=!1;for await(const h of o){if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(h.choices.forEach(d=>{if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(!c){if(d.finish_reason){c=!0;const m=n?{...a,content:a.content.slice(r?.content.length??0)}:a,y=r2([m]);this.prevMessages.push(...y);return}d.delta.content&&(a=Ane(a,d,n)),d.delta.tool_calls&&typeof a.content!="string"&&(a=kne(a,d))}}),c){yield{isEnd:!0,responseMessage:a};continue}else yield a}}catch(i){console.log(i),yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r={role:"tool",content:n.result,tool_call_id:n.toolCallId};return this.prevMessages.push(r),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.stopStream=!0};getName=()=>"OpenAI";getBaseUrl=()=>"https://api.openai.com/v1";checkProvider=async e=>{const n=new Ze({baseURL:e.url,apiKey:e.apiKey,dangerouslyAllowBrowser:!0});try{return await n.models.list(),!0}catch(r){if(console.log(r),r.code==="invalid_api_key")return{field:"key",message:"Invalid API Key"};if(e.apiKey)return{field:"url",message:"Invalid URL"}}return{field:"key",message:"Empty key"}};getProviderModels=async e=>(await new Ze({baseURL:e.url,apiKey:e.apiKey,dangerouslyAllowBrowser:!0}).models.list()).data.map(i=>({id:i.id,name:i.id,provider:"openai"}))}const XL=new Ene;function Lt(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function Ae(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let y9=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return y9=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function hC(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const fC=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class _t extends Error{}class yr extends _t{constructor(e,n,r,i){super(`${yr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Mx({message:r,cause:fC(n)});const s=n;return e===400?new v9(e,s,r,i):e===401?new x9(e,s,r,i):e===403?new w9(e,s,r,i):e===404?new S9(e,s,r,i):e===409?new _9(e,s,r,i):e===422?new C9(e,s,r,i):e===429?new A9(e,s,r,i):e>=500?new k9(e,s,r,i):new yr(e,s,r,i)}}class Sc extends yr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Mx extends yr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class b9 extends Mx{constructor({message:e}={}){super({message:e??"Request timed out."})}}class v9 extends yr{}class x9 extends yr{}class w9 extends yr{}class S9 extends yr{}class _9 extends yr{}class C9 extends yr{}class A9 extends yr{}class k9 extends yr{}const Tne=/^[a-z][a-z0-9+.-]*:/i,Rne=t=>Tne.test(t);let dC=t=>(dC=Array.isArray,dC(t)),JL=dC;function Mne(t){if(!t)return!0;for(const e in t)return!1;return!0}function One(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Pne=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _t(`${t} must be an integer`);if(e<0)throw new _t(`${t} must be a positive integer`);return e},Dne=t=>{try{return JSON.parse(t)}catch{return}},Lne=t=>new Promise(e=>setTimeout(e,t)),Ku="0.22.0";function Ine(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Nne=()=>{const t=Ine();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":ZL(Deno.build.os),"X-Stainless-Arch":QL(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":ZL(globalThis.process.platform??"unknown"),"X-Stainless-Arch":QL(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Bne();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ku,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Bne(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const QL=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ZL=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let eI;const jne=()=>eI??(eI=Nne());function $ne(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Together({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function E9(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function T9(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return E9({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){await e.return?.()}})}function R9(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Vne(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Fne=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),M9=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function wp(t,e,n){return M9(),new File(t,e??"unknown_file",n)}function ub(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const O9=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",P9=async(t,e)=>({...t,body:await Une(t.body,e)}),tI=new WeakMap;function zne(t){const e=typeof t=="function"?t:t.fetch,n=tI.get(e);if(n)return n;const r=(async()=>{try{const i="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new i(s).text()}catch{return!0}})();return tI.set(e,r),r}const Une=async(t,e)=>{if(!await zne(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,i])=>pC(n,r,i))),n},Hne=t=>t instanceof Blob&&"name"in t,pC=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,wp([await n.blob()],ub(n)));else if(O9(n))t.append(e,wp([await new Response(T9(n)).blob()],ub(n)));else if(Hne(n))t.append(e,n,ub(n));else if(Array.isArray(n))await Promise.all(n.map(r=>pC(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>pC(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},D9=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",qne=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&D9(t),Wne=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Gne(t,e,n){if(M9(),t=await t,qne(t))return t instanceof File?t:wp([await t.arrayBuffer()],t.name);if(Wne(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),wp(await mC(i),e,n)}const r=await mC(t);if(e||(e=ub(t)),!n?.type){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n={...n,type:i})}return wp(r,e,n)}async function mC(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(D9(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(O9(t))for await(const n of t)e.push(...await mC(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Kne(t)}`)}return e}function Kne(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class Jn{constructor(e){this._client=e}}class L9 extends Jn{create(e,n){return this._client.post("/audio/transcriptions",P9({body:e,...n},this._client))}}class I9 extends Jn{create(e,n){return this._client.post("/audio/translations",P9({body:e,...n},this._client))}}const N9=Symbol("brand.privateNullableHeaders");function*Yne(t){if(!t)return;if(N9 in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():JL(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=JL(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const gh=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Yne(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[N9]:!0,values:e,nulls:n}};class Ox extends Jn{constructor(){super(...arguments),this.transcriptions=new L9(this._client),this.translations=new I9(this._client)}create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:gh([{Accept:"application/octet-stream"},n?.headers]),stream:e.stream??!1,__binaryResponse:!0})}}Ox.Transcriptions=L9;Ox.Translations=I9;function B9(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const nI=Object.freeze(Object.create(null)),Xne=(t=B9)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((f,d,m)=>{/[?#]/.test(d)&&(i=!0);const y=r[m];let v=(i?encodeURIComponent:t)(""+y);return m!==r.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??nI)??nI)?.toString)&&(v=y+"",s.push({start:f.length+d.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+d+(m===r.length?"":v)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=c.exec(a))!==null;)s.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(s.sort((f,d)=>f.start-d.start),s.length>0){let f=0;const d=s.reduce((m,y)=>{const v=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,m+v+w},"");throw new _t(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${d}`)}return o},Gi=Xne(B9);class j9 extends Jn{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(Gi`/batches/${e}`,n)}list(e){return this._client.get("/batches",e)}}function rI(t){return typeof t.parse=="function"}const Sp=t=>t?.role==="assistant",$9=t=>t?.role==="function",V9=t=>t?.role==="tool";var ur,hb,fb,tp,np,db,rp,Uo,ip,pb,mb,Yu,gC,nv,yC,bC,vC,xC,F9,wC;const iI=10;class Jne{constructor(){ur.add(this),this.controller=new AbortController,hb.set(this,void 0),fb.set(this,()=>{}),tp.set(this,()=>{}),np.set(this,void 0),db.set(this,()=>{}),rp.set(this,()=>{}),Uo.set(this,{}),this._chatCompletions=[],this.messages=[],ip.set(this,!1),pb.set(this,!1),mb.set(this,!1),Yu.set(this,!1),xC.set(this,e=>{if(Lt(this,pb,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Sc),e instanceof Sc)return Lt(this,mb,!0),this._emit("abort",e);if(e instanceof _t)return this._emit("error",e);if(e instanceof Error){const n=new n(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new _t(String(e)))}),Lt(this,hb,new Promise((e,n)=>{Lt(this,fb,e,"f"),Lt(this,tp,n,"f")})),Lt(this,np,new Promise((e,n)=>{Lt(this,db,e,"f"),Lt(this,rp,n,"f")})),Ae(this,hb,"f").catch(()=>{}),Ae(this,np,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Ae(this,xC,"f"))},0)}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),($9(e)||V9(e))&&e.content)this._emit("functionCallResult",e.content);else if(Sp(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Sp(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}_connected(){this.ended||(Ae(this,fb,"f").call(this),this._emit("connect"))}get ended(){return Ae(this,ip,"f")}get errored(){return Ae(this,pb,"f")}get aborted(){return Ae(this,mb,"f")}abort(){this.controller.abort()}on(e,n){return(Ae(this,Uo,"f")[e]||(Ae(this,Uo,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Ae(this,Uo,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(Ae(this,Uo,"f")[e]||(Ae(this,Uo,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Lt(this,Yu,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Lt(this,Yu,!0),await Ae(this,np,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new _t("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ae(this,ur,"m",gC).call(this)}async finalMessage(){return await this.done(),Ae(this,ur,"m",nv).call(this)}async finalFunctionCall(){return await this.done(),Ae(this,ur,"m",yC).call(this)}async finalFunctionCallResult(){return await this.done(),Ae(this,ur,"m",bC).call(this)}async totalUsage(){return await this.done(),Ae(this,ur,"m",vC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...n){if(Ae(this,ip,"f"))return;e==="end"&&(Lt(this,ip,!0),Ae(this,db,"f").call(this));const r=Ae(this,Uo,"f")[e];if(r&&(Ae(this,Uo,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!Ae(this,Yu,"f")&&!r?.length&&Promise.reject(i),Ae(this,tp,"f").call(this,i),Ae(this,rp,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!Ae(this,Yu,"f")&&!r?.length&&Promise.reject(i),Ae(this,tp,"f").call(this,i),Ae(this,rp,"f").call(this,i),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Ae(this,ur,"m",nv).call(this);n&&this._emit("finalMessage",n);const r=Ae(this,ur,"m",gC).call(this);r&&this._emit("finalContent",r);const i=Ae(this,ur,"m",yC).call(this);i&&this._emit("finalFunctionCall",i);const s=Ae(this,ur,"m",bC).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",Ae(this,ur,"m",vC).call(this))}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ae(this,ur,"m",F9).call(this,n);const s=await e.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){const i="function",{function_call:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s?.name,{maxChatCompletions:h=iI}=r||{},f={};for(const m of n.functions)f[m.name||m.function.name]=m;const d=n.functions.map(m=>({name:m.name||m.function.name,parameters:m.parameters,description:m.description}));for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<h;++m){const v=(await this._createChatCompletion(e,{...a,function_call:s,functions:d,messages:[...this.messages]},r)).choices[0]?.message;if(!v)throw new _t("missing message in ChatCompletion response");if(!v.function_call)return;const{name:w,arguments:_}=v.function_call,S=f[w];if(S){if(c&&c!==w){const M=`Invalid function_call: ${JSON.stringify(w)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,name:w,content:M});continue}}else{const M=`Invalid function_call: ${JSON.stringify(w)}. Available options are: ${d.map(O=>JSON.stringify(O.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:w,content:M});continue}let A;try{A=rI(S)?await S.parse(_):_}catch(M){this._addMessage({role:i,name:w,content:M instanceof Error?M.message:String(M)});continue}const k=await S.function(A,this),P=Ae(this,ur,"m",wC).call(this,k);if(this._addMessage({role:i,name:w,content:P}),c)return}}async _runTools(e,n,r){const i="tool",{tool_choice:s="auto",stream:o,...a}=n,c=typeof s!="string"&&s?.function?.name,{maxChatCompletions:h=iI}=r||{},f={};for(const m of n.tools)m.type==="function"&&(f[m.function.name||m.function.function.name]=m.function);const d="tools"in n?n.tools.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description}}:m):void 0;for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<h;++m){const v=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:d,messages:[...this.messages]},r)).choices[0]?.message;if(!v)throw new _t("missing message in ChatCompletion response");if(!v.tool_calls)return;for(const w of v.tool_calls){if(w.type!=="function")continue;const _=w.id,{name:S,arguments:A}=w.function,k=f[S];if(k){if(c&&c!==S){const L=`Invalid tool_call: ${JSON.stringify(S)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:i,tool_call_id:_,content:L});continue}}else{const L=`Invalid tool_call: ${JSON.stringify(S)}. Available options are: ${d.map(N=>JSON.stringify(N.function.name)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:_,content:L});continue}let P;try{P=rI(k)?await k.parse(A):A}catch(L){const N=L instanceof Error?L.message:String(L);this._addMessage({role:i,tool_call_id:_,content:N});continue}const M=await k.function(P,this),O=Ae(this,ur,"m",wC).call(this,M);if(this._addMessage({role:i,tool_call_id:_,content:O}),c)return}}}}hb=new WeakMap,fb=new WeakMap,tp=new WeakMap,np=new WeakMap,db=new WeakMap,rp=new WeakMap,Uo=new WeakMap,ip=new WeakMap,pb=new WeakMap,mb=new WeakMap,Yu=new WeakMap,xC=new WeakMap,ur=new WeakSet,gC=function(){return Ae(this,ur,"m",nv).call(this).content??null},nv=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Sp(n))return{...n,content:n.content??null}}throw new _t("stream ended without producing a ChatCompletionMessage with role=assistant")},yC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Sp(n)&&n?.function_call)return n.function_call;if(Sp(n)&&n?.tool_calls?.length)return n.tool_calls.at(-1)?.function}},bC=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if($9(n)&&n.content!=null||V9(n)&&n.content!=null&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===n.tool_call_id)))return n.content}},vC=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},F9=function(e){if(e.n!=null&&e.n>1)throw new _t("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},wC=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};function Qne(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let sI;function vE(t){let e;return(sI??(e=new globalThis.TextEncoder,sI=e.encode.bind(e)))(t)}let oI;function aI(t){let e;return(oI??(e=new globalThis.TextDecoder,oI=e.decode.bind(e)))(t)}var bi,vi;class Px{constructor(){bi.set(this,void 0),vi.set(this,void 0),Lt(this,bi,new Uint8Array),Lt(this,vi,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?vE(e):e;Lt(this,bi,Qne([Ae(this,bi,"f"),n]));const r=[];let i;for(;(i=Zne(Ae(this,bi,"f"),Ae(this,vi,"f")))!=null;){if(i.carriage&&Ae(this,vi,"f")==null){Lt(this,vi,i.index);continue}if(Ae(this,vi,"f")!=null&&(i.index!==Ae(this,vi,"f")+1||i.carriage)){r.push(aI(Ae(this,bi,"f").subarray(0,Ae(this,vi,"f")-1))),Lt(this,bi,Ae(this,bi,"f").subarray(Ae(this,vi,"f"))),Lt(this,vi,null);continue}const s=Ae(this,vi,"f")!==null?i.preceding-1:i.preceding,o=aI(Ae(this,bi,"f").subarray(0,s));r.push(o),Lt(this,bi,Ae(this,bi,"f").subarray(i.index)),Lt(this,vi,null)}return r}flush(){return Ae(this,bi,"f").length?this.decode(`
`):[]}}bi=new WeakMap,vi=new WeakMap;Px.NEWLINE_CHARS=new Set([`
`,"\r"]);Px.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Zne(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function ere(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const rv={off:0,error:200,warn:300,info:400,debug:500},lI=(t,e,n)=>{if(t){if(One(rv,t))return t;Tr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(rv))}`)}};function sp(){}function ny(t,e,n){return!e||rv[t]>rv[n]?sp:e[t].bind(e)}const tre={error:sp,warn:sp,info:sp,debug:sp};let cI=new WeakMap;function Tr(t){const e=t.logger,n=t.logLevel??"off";if(!e)return tre;const r=cI.get(e);if(r&&r[0]===n)return r[1];const i={error:ny("error",e,n),warn:ny("warn",e,n),info:ny("info",e,n),debug:ny("debug",e,n)};return cI.set(e,[n,i]),i}const Zl=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Ad;class tl{constructor(e,n,r){this.iterator=e,Ad.set(this,void 0),this.controller=n,Lt(this,Ad,r)}static fromSSEResponse(e,n,r){let i=!1;const s=r?Tr(r):console;async function*o(){if(i)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of nre(e,n))if(!a){if(c.data.startsWith("[DONE]")){a=!0;continue}if(c.event===null){let h;try{h=JSON.parse(c.data)}catch(f){throw s.error("Could not parse message into JSON:",c.data),s.error("From chunk:",c.raw),f}if(h&&h.error)throw new yr(void 0,h.error,void 0,e.headers);yield h}}a=!0}catch(c){if(hC(c))return;throw c}finally{a||n.abort()}}return new tl(o,n,r)}static fromReadableStream(e,n,r){let i=!1;async function*s(){const a=new Px,c=R9(e);for await(const h of c)for(const f of a.decode(h))yield f;for(const h of a.flush())yield h}async function*o(){if(i)throw new _t("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{for await(const c of s())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(hC(c))return;throw c}finally{a||n.abort()}}return new tl(o,n,r)}[(Ad=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new tl(()=>i(e),this.controller,Ae(this,Ad,"f")),new tl(()=>i(n),this.controller,Ae(this,Ad,"f"))]}toReadableStream(){const e=this;let n;return E9({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=vE(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){await n.return?.()}})}}async function*nre(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _t("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _t("Attempted to iterate over a response with no body");const n=new ire,r=new Px,i=R9(t.body);for await(const s of rre(i))for(const o of r.decode(s)){const a=n.decode(o);a&&(yield a)}for(const s of r.flush()){const o=n.decode(s);o&&(yield o)}}async function*rre(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?vE(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=ere(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class ire{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=sre(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function sre(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}var Vs,qa,i2,s2,ry,uI;class iv extends Jne{constructor(){super(...arguments),Vs.add(this),qa.set(this,void 0)}get currentChatCompletionSnapshot(){return Ae(this,qa,"f")}static fromReadableStream(e){const n=new iv;return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new iv;return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){const i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ae(this,Vs,"m",i2).call(this);const s=await e.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)Ae(this,Vs,"m",s2).call(this,o);if(s.controller.signal?.aborted)throw new Sc;return this._addChatCompletion(Ae(this,Vs,"m",ry).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Ae(this,Vs,"m",i2).call(this),this._connected();const i=tl.fromReadableStream(e,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(Ae(this,Vs,"m",ry).call(this)),Ae(this,Vs,"m",s2).call(this,o),s=o.id;if(i.controller.signal?.aborted)throw new Sc;return this._addChatCompletion(Ae(this,Vs,"m",ry).call(this))}[(qa=new WeakMap,Vs=new WeakSet,i2=function(){this.ended||Lt(this,qa,void 0)},s2=function(n){if(this.ended)return;const r=Ae(this,Vs,"m",uI).call(this,n);this._emit("chunk",n,r);const i=n.choices[0]?.delta?.content,s=r.choices[0]?.message;i!=null&&s?.role==="assistant"&&s?.content&&this._emit("content",i,s.content)},ry=function(){if(this.ended)throw new _t("stream has ended, this shouldn't happen");const n=Ae(this,qa,"f");if(!n)throw new _t("request ended without sending any chunks");return Lt(this,qa,void 0),ore(n)},uI=function(n){var r,i,s,o,a;let c=Ae(this,qa,"f");const{choices:h,...f}=n;c?Object.assign(c,f):c=Lt(this,qa,{...f,choices:[]});for(const{delta:d,finish_reason:m,index:y,logprobs:v=null,...w}of n.choices){let _=c.choices[y];if(_||(_=c.choices[y]={finish_reason:m,index:y,message:{},logprobs:{token_ids:[],token_logprobs:[],tokens:[]},...w}),v&&(console.log({logprobs:v}),_.logprobs||(_.logprobs={token_ids:[],token_logprobs:[],tokens:[]}),(r=_.logprobs).token_ids??(r.token_ids=[]),_.logprobs.token_ids.push(d.token_id??null),(i=_.logprobs).token_logprobs??(i.token_logprobs=[]),_.logprobs.token_logprobs.push(v??null),(s=_.logprobs).tokens??(s.tokens=[]),_.logprobs.tokens.push(d.content??null)),m&&(_.finish_reason=m),Object.assign(_,w),!d)continue;const{content:S,function_call:A,role:k,tool_calls:P,...M}=d;if(Object.assign(_.message,M),S&&(_.message.content=(_.message.content||"")+S),k&&(_.message.role=k),A&&(_.message.function_call?(A.name&&(_.message.function_call.name=A.name),A.arguments&&((o=_.message.function_call).arguments??(o.arguments=""),_.message.function_call.arguments+=A.arguments)):_.message.function_call=A),P){_.message.tool_calls||(_.message.tool_calls=[]);for(const{index:O,id:L,type:N,function:z,...j}of P){const H=(a=_.message.tool_calls)[O]??(a[O]={});Object.assign(H,j),L&&(H.id=L),N&&(H.type=N),z&&(H.function??(H.function={arguments:""})),z?.name&&(H.function.name=z.name),z?.arguments&&(H.function.arguments+=z.arguments)}}}return c},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,o)=>n.push({resolve:s,reject:o})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tl(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function ore(t){const{id:e,choices:n,created:r,model:i,system_fingerprint:s,...o}=t;return{...o,id:e,choices:n.map(({message:a,finish_reason:c,index:h,logprobs:f,...d})=>{if(!c)throw new _t(`missing finish_reason for choice ${h}`);const{content:m=null,function_call:y,tool_calls:v,...w}=a,_=a.role;if(!_)throw new _t(`missing role for choice ${h}`);if(y){const{arguments:S,name:A}=y;if(S==null)throw new _t(`missing function_call.arguments for choice ${h}`);if(!A)throw new _t(`missing function_call.name for choice ${h}`);return{...d,message:{content:m,function_call:{arguments:S,name:A},role:_},finish_reason:c,index:h,logprobs:f}}return v?{...d,index:h,finish_reason:c,logprobs:f,message:{...w,role:_,content:m,tool_calls:v.map((S,A)=>{const{function:k,type:P,id:M,...O}=S,{arguments:L,name:N,...z}=k||{};if(M==null)throw new _t(`missing choices[${h}].tool_calls[${A}].id
${iy(t)}`);if(P==null)throw new _t(`missing choices[${h}].tool_calls[${A}].type
${iy(t)}`);if(N==null)throw new _t(`missing choices[${h}].tool_calls[${A}].function.name
${iy(t)}`);if(L==null)throw new _t(`missing choices[${h}].tool_calls[${A}].function.arguments
${iy(t)}`);return{...O,id:M,type:P,function:{...z,name:N,arguments:L}}})}}:{...d,message:{...w,content:m,role:_},finish_reason:c,index:h,logprobs:f}}),created:r,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}}}function iy(t){return JSON.stringify(t)}let z9=class extends Jn{create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}stream(e,n){return iv.createChatCompletion(this._client.chat.completions,e,n)}};class xE extends Jn{constructor(){super(...arguments),this.completions=new z9(this._client)}}xE.Completions=z9;class U9 extends Jn{list(e){return this._client.get("/tci/sessions",e)}}class wE extends Jn{constructor(){super(...arguments),this.sessions=new U9(this._client)}execute(e,n){return this._client.post("/tci/execute",{body:e,...n})}}wE.Sessions=U9;class H9 extends Jn{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class q9 extends Jn{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}class W9 extends Jn{create(e,n){return this._client.post("/endpoints",{body:e,...n})}retrieve(e,n){return this._client.get(Gi`/endpoints/${e}`,n)}update(e,n,r){return this._client.patch(Gi`/endpoints/${e}`,{body:n,...r})}list(e={},n){return this._client.get("/endpoints",{query:e,...n})}delete(e,n){return this._client.delete(Gi`/endpoints/${e}`,{...n,headers:gh([{Accept:"*/*"},n?.headers])})}}class G9 extends Jn{retrieve(e,n){return this._client.get(Gi`/files/${e}`,n)}list(e){return this._client.get("/files",e)}delete(e,n){return this._client.delete(Gi`/files/${e}`,n)}content(e,n){return this._client.get(Gi`/files/${e}/content`,{...n,headers:gh([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}upload(e){throw"please use together-ai/lib/upload"}}class K9 extends Jn{create(e,n){return this._client.post("/fine-tunes",{body:e,...n})}retrieve(e,n){return this._client.get(Gi`/fine-tunes/${e}`,n)}list(e){return this._client.get("/fine-tunes",e)}cancel(e,n){return this._client.post(Gi`/fine-tunes/${e}/cancel`,n)}download(e,n){return this._client.get("/finetune/download",{query:e,...n})}listEvents(e,n){return this._client.get(Gi`/fine-tunes/${e}/events`,n)}retrieveCheckpoints(e,n){return this._client.get(Gi`/fine-tunes/${e}/checkpoints`,n)}}class Y9 extends Jn{list(e={},n){return this._client.get("/hardware",{query:e,...n})}}class X9 extends Jn{create(e,n){return this._client.post("/images/generations",{body:e,...n})}}class J9 extends Jn{retrieve(e,n){return this._client.get(Gi`/jobs/${e}`,n)}list(e){return this._client.get("/jobs",e)}}class Q9 extends Jn{list(e){return this._client.get("/models",e)}upload(e,n){return this._client.post("/models",{body:e,...n})}}async function are(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{if(e.options.stream)return Tr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):tl.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type")?.split(";")[0]?.trim();return c?.includes("application/json")||c?.endsWith("+json")?await n.json():await n.text()})();return Tr(t).debug(`[${r}] response parsed`,Zl({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}var op;class SE extends Promise{constructor(e,n,r=are){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,op.set(this,void 0),Lt(this,op,e)}_thenUnwrap(e){return new SE(Ae(this,op,"f"),this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Ae(this,op,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}op=new WeakMap;var lre={};const o2=t=>{if(typeof globalThis.process<"u")return lre?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var SC,_E,gb,Z9;class pt{constructor({baseURL:e=o2("TOGETHER_BASE_URL"),apiKey:n=o2("TOGETHER_API_KEY"),...r}={}){if(SC.add(this),gb.set(this,void 0),this.chat=new xE(this),this.completions=new H9(this),this.embeddings=new q9(this),this.files=new G9(this),this.fineTune=new K9(this),this.codeInterpreter=new wE(this),this.images=new X9(this),this.audio=new Ox(this),this.models=new Q9(this),this.jobs=new J9(this),this.endpoints=new W9(this),this.hardware=new Y9(this),this.batches=new j9(this),n===void 0)throw new _t("The TOGETHER_API_KEY environment variable is missing or empty; either provide it, or instantiate the Together client with an apiKey option, like new Together({ apiKey: 'My API Key' }).");const i={apiKey:n,...r,baseURL:e||"https://api.together.xyz/v1"};this.baseURL=i.baseURL,this.timeout=i.timeout??_E.DEFAULT_TIMEOUT,this.logger=i.logger??console;const s="warn";this.logLevel=s,this.logLevel=lI(i.logLevel,"ClientOptions.logLevel",this)??lI(o2("TOGETHER_LOG"),"process.env['TOGETHER_LOG']",this)??s,this.fetchOptions=i.fetchOptions,this.maxRetries=i.maxRetries??5,this.fetch=i.fetch??$ne(),Lt(this,gb,Fne),this._options=i,this.apiKey=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,...e})}rerank(e,n){return this.post("/rerank",{body:e,...n})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return gh([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new _t(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ku}`}defaultIdempotencyKey(){return`stainless-node-retry-${y9()}`}makeStatusError(e,n,r,i){return yr.generate(e,n,r,i)}buildURL(e,n,r){const i=!Ae(this,SC,"m",Z9).call(this)&&r||this.baseURL,s=Rne(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Mne(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>({method:e,path:n,...i})))}request(e,n=null){return new SE(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const i=await e,s=i.maxRetries??this.maxRetries;n==null&&(n=s),await this.prepareOptions(i);const{req:o,url:a,timeout:c}=await this.buildRequest(i,{retryCount:s-n});await this.prepareRequest(o,{url:a,options:i});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Tr(this).debug(`[${h}] sending request`,Zl({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:o.headers})),i.signal?.aborted)throw new Sc;const m=new AbortController,y=await this.fetchWithTimeout(a,o,c,m).catch(fC),v=Date.now();if(y instanceof Error){const _=`retrying, ${n} attempts remaining`;if(i.signal?.aborted)throw new Sc;const S=hC(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return Tr(this).info(`[${h}] connection ${S?"timed out":"failed"} - ${_}`),Tr(this).debug(`[${h}] connection ${S?"timed out":"failed"} (${_})`,Zl({retryOfRequestLogID:r,url:a,durationMs:v-d,message:y.message})),this.retryRequest(i,n,r??h);throw Tr(this).info(`[${h}] connection ${S?"timed out":"failed"} - error; no more retries left`),Tr(this).debug(`[${h}] connection ${S?"timed out":"failed"} (error; no more retries left)`,Zl({retryOfRequestLogID:r,url:a,durationMs:v-d,message:y.message})),S?new b9:new Mx({cause:y})}const w=`[${h}${f}] ${o.method} ${a} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${v-d}ms`;if(!y.ok){const _=await this.shouldRetry(y);if(n&&_){const O=`retrying, ${n} attempts remaining`;return await Vne(y.body),Tr(this).info(`${w} - ${O}`),Tr(this).debug(`[${h}] response error (${O})`,Zl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-d})),this.retryRequest(i,n,r??h,y.headers)}const S=_?"error; no more retries left":"error; not retryable";Tr(this).info(`${w} - ${S}`);const A=await y.text().catch(O=>fC(O).message),k=Dne(A),P=k?void 0:A;throw Tr(this).debug(`[${h}] response error (${S})`,Zl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,message:P,durationMs:Date.now()-d})),this.makeStatusError(y.status,k,P,y.headers)}return Tr(this).info(w),Tr(this).debug(`[${h}] response start`,Zl({retryOfRequestLogID:r,url:y.url,status:y.status,headers:y.headers,durationMs:v-d})),{response:y,options:i,controller:m,requestLogID:h,retryOfRequestLogID:r,startTime:d}}async fetchWithTimeout(e,n,r,i){const{signal:s,method:o,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:i.signal,...h?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){let s;const o=i?.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(s=c)}const a=i?.get("retry-after");if(a&&!s){const c=parseFloat(a);Number.isNaN(c)?s=Date.parse(a)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){const c=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Lne(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(1*Math.pow(2,s),10),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:i,path:s,query:o,defaultBaseURL:a}=r,c=this.buildURL(s,o,a);"timeout"in r&&Pne("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:h,body:f}=this.buildBody({options:r}),d=await this.buildHeaders({options:e,method:i,bodyHeaders:h,retryCount:n});return{req:{method:i,headers:d,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=gh([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...jne()},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=gh([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:T9(e)}:Ae(this,gb,"f").call(this,{body:e,headers:r})}}_E=pt,gb=new WeakMap,SC=new WeakSet,Z9=function(){return this.baseURL!=="https://api.together.xyz/v1"};pt.Together=_E;pt.DEFAULT_TIMEOUT=6e4;pt.TogetherError=_t;pt.APIError=yr;pt.APIConnectionError=Mx;pt.APIConnectionTimeoutError=b9;pt.APIUserAbortError=Sc;pt.NotFoundError=S9;pt.ConflictError=_9;pt.RateLimitError=A9;pt.BadRequestError=v9;pt.AuthenticationError=x9;pt.InternalServerError=k9;pt.PermissionDeniedError=w9;pt.UnprocessableEntityError=C9;pt.toFile=Gne;pt.Chat=xE;pt.Completions=H9;pt.Embeddings=q9;pt.Files=G9;pt.FineTuneResource=K9;pt.CodeInterpreter=wE;pt.Images=X9;pt.Audio=Ox;pt.Models=Q9;pt.Jobs=J9;pt.Endpoints=W9;pt.Hardware=Y9;pt.Batches=j9;const cre=t=>t.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:{type:"object",...e.inputSchema}}})),a2=t=>{const e=[];return t.forEach(n=>{if(n.role==="user"||n.role==="system"){const r=typeof n.content=="string"?n.content:n.content.map(i=>i.type==="text"?i.text:i.type==="file"?`File: ${JSON.parse(i.mimeType).path.split("/").pop()}
File content:
${i.data}`:"").filter(i=>i!=="").join(`

`);e.push({role:"user",content:r})}else{let r=typeof n.content=="string"?n.content:"";const i=[],s=[];let o=0;const a=n.content;typeof a!="string"&&typeof r!="string"&&a.forEach(h=>{if(h.type==="text"&&(r+=h.text),h.type==="tool-call"){h.result&&i.push({role:"tool",content:h.result,tool_call_id:h.toolCallId}),s.push({id:h.toolCallId,index:o++,type:"function",function:{arguments:h.argsText??"",name:h.toolName}});return}});const c={role:"assistant",content:r};s.length&&(c.tool_calls=s),e.push(c),i.length&&e.push(...i)}}),e},ure=(t,e,n)=>{if(!e.delta.content)return t;let r=fo(t);const i=r.content;if(typeof i=="string")return r;const s=i[i.length-1];if((!s||n)&&typeof t.content!="string"&&(r={...r,content:[...i,{type:"text",text:e.delta.content}]}),s&&typeof s!="string"&&typeof i!="string"&&s.type==="text"){const o=s.text+e.delta.content,a=fo({...s,text:o});r={...r,content:[...i.slice(0,-1),a]}}return r},hre=(t,e)=>{let n=fo(t);if(!e.delta.tool_calls||typeof n.content=="string")return n;const r=e.delta.tool_calls[0],i=n.content[n.content.length-1];if(!i||i?.type!=="tool-call"){const s={type:"tool-call",args:{},argsText:r?.function?.arguments??"",toolName:r?.function?.name??"",toolCallId:r?.id??""};n={...n,content:[...n.content,s]}}else{const s=i,o=s.argsText+(r?.function?.arguments??""),a=s.toolName||r?.function?.name||"",c=s.toolCallId||r?.id||"",h={...s,args:{},argsText:o,toolName:a,toolCallId:c};n={...n,content:[...n.content.slice(0,-1),h]}}return n};class fre{modelKey="";systemPrompt="";apiKey;url;provider;prevMessages=[];tools=[];client;stopStream=!1;constructor(){}setProvider=e=>{this.provider=e,this.client=new pt({apiKey:e.key,baseURL:e.baseUrl}),e.key&&this.setApiKey(e.key),e.baseUrl&&this.setUrl(e.baseUrl)};setModelKey=e=>{this.modelKey=e};setSystemPrompt=e=>{this.systemPrompt=e};setApiKey=e=>{this.apiKey=e,this.client&&(this.client.apiKey=e)};setUrl=e=>{this.url=e,this.client&&(this.client.baseURL=e)};setPrevMessages=e=>{this.prevMessages=a2(e)};setTools=e=>{this.tools=cre(e)};async*sendMessage(e,n,r){try{if(!this.client)return;const i=a2(e),s={role:"system",content:this.systemPrompt},o=await this.client.chat.completions.create({messages:[s,...this.prevMessages,...i],model:this.modelKey,tools:this.tools,stream:!0,max_tokens:2048});this.prevMessages.push(...i);let a=n&&r?fo(r):{role:"assistant",content:[]},c=!1;for await(const h of o){if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(h.choices.forEach(d=>{if(this.stopStream){o.controller.abort(),this.stopStream=!1;return}if(!c){if(d.finish_reason){c=!0;const m=n?{...a,content:a.content.slice(r?.content.length??0)}:a,y=a2([m]);this.prevMessages.push(...y);return}d.delta.content&&(a=ure(a,d,n)),d.delta.tool_calls&&typeof a.content!="string"&&(a=hre(a,d))}}),c){yield{isEnd:!0,responseMessage:a};continue}else yield a}}catch(i){console.log(i),yield{isEnd:!0,responseMessage:{role:"assistant",content:"",status:{type:"incomplete",reason:"error",error:i}}}}}async*sendMessageAfterToolCall(e){if(typeof e.content=="string")return e;const n=e.content.filter(i=>i.type==="tool-call").reverse()[0];if(!n)return e;const r={role:"tool",content:n.result||"",tool_call_id:n.toolCallId};return this.prevMessages.push(r),yield*this.sendMessage([],!0,e),e}stopMessage=()=>{this.stopStream=!0};getName=()=>"TogetherAI";getBaseUrl=()=>"https://api.together.xyz/v1";checkProvider=async e=>{const n=new pt({baseURL:e.url,apiKey:e.apiKey});try{return await n.models.list(),!0}catch(r){if(console.log(r),r.status===401)return{field:"key",message:"Invalid API Key"};if(e.apiKey)return{field:"url",message:"Invalid URL"}}return{field:"key",message:"Empty key"}};getProviderModels=async e=>(await new pt({baseURL:e.url,apiKey:e.apiKey}).models.list()).filter(i=>i.type==="chat").map(i=>({id:i.id,name:i.display_name??i.id,provider:"openai"}))}const hI=new fre,dre=`You are an AI assistant with access to a set of MCP tools.
Your default behavior is to act as a helpful, conversational LLM assistant: answer questions, explain concepts, brainstorm, or chat naturally.
Only call a tool when the users request clearly indicates the need for it (e.g., "search", "open URL", "analyze file", "plot data", etc.).
If the users intent is ambiguous, respond conversationally instead of calling a tool.
Do not push the user toward tools unnecessarily.
When you do use a tool, explain in natural language what youre doing if appropriate.
Otherwise, behave as if you are a standalone LLM chat without tools`;let pre=class{currentProvider;currentProviderInfo;currentProviderType;anthropicProvider;ollamaProvider;openaiProvider;togetherProvider;constructor(){this.anthropicProvider=bL,this.ollamaProvider=SL,this.openaiProvider=XL,this.togetherProvider=hI}setCurrentProvider=e=>{if(!e){this.currentProvider=void 0,this.currentProviderInfo=void 0,this.currentProviderType=void 0;return}switch(this.currentProviderInfo=e,e.type){case"anthropic":this.currentProvider=bL,this.currentProviderType="anthropic";break;case"ollama":this.currentProvider=SL,this.currentProviderType="ollama";break;case"openai":this.currentProvider=XL,this.currentProviderType="openai";break;case"together":this.currentProvider=hI,this.currentProviderType="together";break;default:this.currentProvider=void 0,this.currentProviderType=void 0}this.currentProvider&&(this.currentProvider.setProvider(e),this.currentProvider.setSystemPrompt(dre))};setCurrentProviderModel=e=>{this.currentProvider&&this.currentProvider.setModelKey(e)};setCurrentProviderTools=e=>{this.currentProvider&&this.currentProvider.setTools(e)};setCurrentProviderPrevMessages=e=>{this.currentProvider&&this.currentProvider.setPrevMessages(e)};getCurrentProviderModel=()=>{if(this.currentProvider)return this.currentProvider.modelKey};sendMessage=e=>{if(this.currentProvider)return this.currentProvider.sendMessage(e)};sendMessageAfterToolCall=e=>{if(this.currentProvider)return this.currentProvider.sendMessageAfterToolCall(e)};stopMessage=()=>{this.currentProvider&&this.currentProvider.stopMessage()};getProvidersInfo=()=>{const e={type:"anthropic",name:this.anthropicProvider.getName(),baseUrl:this.anthropicProvider.getBaseUrl()},n={type:"ollama",name:this.ollamaProvider.getName(),baseUrl:this.ollamaProvider.getBaseUrl()},r={type:"openai",name:this.openaiProvider.getName(),baseUrl:this.openaiProvider.getBaseUrl()},i={type:"together",name:this.togetherProvider.getName(),baseUrl:this.togetherProvider.getBaseUrl()};return[e,n,r,i]};getProviderInfo=e=>e==="anthropic"?{type:e,name:this.anthropicProvider.getName(),baseUrl:this.anthropicProvider.getBaseUrl()}:e==="ollama"?{type:e,name:this.ollamaProvider.getName(),baseUrl:this.ollamaProvider.getBaseUrl()}:e==="openai"?{type:e,name:this.openaiProvider.getName(),baseUrl:this.openaiProvider.getBaseUrl()}:e==="together"?{type:e,name:this.togetherProvider.getName(),baseUrl:this.togetherProvider.getBaseUrl()}:{name:"",baseUrl:""};checkNewProvider=(e,n)=>e==="anthropic"?this.anthropicProvider.checkProvider(n):e==="ollama"?this.ollamaProvider.checkProvider(n):e==="openai"?this.openaiProvider.checkProvider(n):e==="together"?this.togetherProvider.checkProvider(n):!1;getProvidersModels=async e=>{const n=new Map,r=e.map(o=>o.type==="anthropic"?this.anthropicProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):o.type==="ollama"?this.ollamaProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):o.type==="openai"?this.openaiProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):o.type==="together"?this.togetherProvider.getProviderModels({url:o.baseUrl,apiKey:o.key}):null).filter(o=>o!==null),i=await Promise.allSettled(r);let s=0;return e.forEach(o=>{if(o.type==="anthropic"||o.type==="ollama"||o.type==="openai"||o.type==="together"){const a=i[s];a.status==="fulfilled"&&a.value&&a.value.length>0&&n.set(o.name,a.value),s++}}),n}};const $t=new pre;class mre{dbName="ChatHistory";version=1;db=null;async init(){return new Promise((e,n)=>{const r=indexedDB.open(this.dbName,this.version);r.onerror=()=>n(r.error),r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{const s=i.target.result;if(s.objectStoreNames.contains("threads")||s.createObjectStore("threads",{keyPath:"threadId"}).createIndex("updatedAt","updatedAt",{unique:!1}),!s.objectStoreNames.contains("messages")){const o=s.createObjectStore("messages",{keyPath:"id"});o.createIndex("threadId","threadId",{unique:!1}),o.createIndex("timestamp","timestamp",{unique:!1})}}})}getDB(){if(!this.db)throw new Error("Database not initialized");return this.db}async close(){this.db&&(this.db.close(),this.db=null)}}const bo=new mre,gre=()=>bo.init(),fI=async(t,e,n)=>{const r=bo.getDB(),i={id:e,threadId:t,message:n,timestamp:Date.now()};return new Promise((s,o)=>{const h=r.transaction(["messages"],"readwrite").objectStore("messages").put(i);h.onerror=()=>o(h.error),h.onsuccess=()=>s()})},e$=async(t,e)=>{const n=bo.getDB();return new Promise((r,i)=>{const c=n.transaction(["messages"],"readonly").objectStore("messages").index("threadId").getAll(IDBKeyRange.only(t));c.onerror=()=>i(c.error),c.onsuccess=()=>{let h=c.result.sort((f,d)=>f.timestamp-d.timestamp).map(f=>f.message);r(h)}})},yre=async(t,e)=>{const n=bo.getDB();return new Promise((r,i)=>{const o=n.transaction(["messages"],"readwrite").objectStore("messages"),a=o.get(t);a.onerror=()=>i(a.error),a.onsuccess=()=>{const c=a.result;if(!c){i(new Error("Message not found"));return}const h={...c,message:e,timestamp:Date.now()},f=o.put(h);f.onerror=()=>i(f.error),f.onsuccess=()=>r()}})},Gh=na((t,e)=>({messages:[],isStreamRunning:!1,isRequestRunning:!1,attachmentFiles:[],fetchPrevMessages:async n=>{const r=await e$(n);t({messages:r}),$t.setCurrentProviderPrevMessages(r)},setIsStreamRunning:n=>{t({isStreamRunning:n})},setIsRequestRunning:n=>{t({isRequestRunning:n})},addMessage:n=>{const r=e();if(r.messages.length&&r.messages[r.messages.length-1].status?.type==="incomplete"){t({messages:[...r.messages.slice(0,-1),{...n}]});return}t({messages:[...r.messages,n]})},updateLastMessage:n=>{const r=e();t({messages:[...r.messages.slice(0,-1),n]})},addAttachmentFile:n=>{t({attachmentFiles:[...e().attachmentFiles,n]})},clearAttachmentFiles:()=>{t({attachmentFiles:[]})},stopMessage:()=>{e().setIsStreamRunning(!1),$t.stopMessage()}})),Dx=na(t=>({currentPage:"chat",setCurrentPage:e=>t({currentPage:e}),goToChat:()=>t({currentPage:"chat"}),goToSettings:()=>t({currentPage:"settings"})})),sy="providers",kd="current-provider",l2="current-model",_p=100,yb=102,ts=na()((t,e)=>({providers:(()=>{const n=localStorage.getItem(sy);return n?JSON.parse(n):[]})(),currentProvider:(()=>{const n=localStorage.getItem(kd);if(!n)return null;const r=JSON.parse(n);$t.setCurrentProvider(r);const i=$t.checkNewProvider(r.type,{url:r.baseUrl,apiKey:r.key});if(i instanceof Promise)i.then(s=>{(typeof s!="boolean"||!s)&&localStorage.removeItem(kd)}).catch(s=>{console.error("Provider validation error:",s),localStorage.removeItem(kd)});else if(!i)return localStorage.removeItem(kd),null;return r})(),providersModels:new Map,fetchProvidersModels:async()=>{const n=e().providers,r=await $t.getProvidersModels(n);t({providersModels:r})},setCurrentProvider:n=>{t({currentProvider:n}),$t.setCurrentProvider(n),localStorage.setItem(kd,JSON.stringify(n))},addProvider:async n=>{if(e().providers.some(o=>o.name.toLowerCase()===n.name.toLowerCase()))return{field:"name",message:"Duplicate name"};const s=await $t.checkNewProvider(n.type,{url:n.baseUrl,apiKey:n.key});return typeof s=="boolean"&&s?(t(o=>{const a=[...o.providers,n];return localStorage.setItem(sy,JSON.stringify(a)),{providers:a}}),!0):s},editProvider:async(n,r)=>{if(e().providers.some(a=>a.name.toLowerCase()===n.name.toLowerCase()&&a.baseUrl!==n.baseUrl&&a.key!==n.key&&a.type!==n.type))return{field:"name",message:"Duplicate name"};const o=await $t.checkNewProvider(n.type,{url:n.baseUrl,apiKey:n.key});return typeof o=="boolean"&&o?(t(a=>{const c=a.providers.map(h=>h.name===r?n:h);return localStorage.setItem(sy,JSON.stringify(c)),{providers:c}}),!0):o},deleteProvider:async n=>{t(r=>{const i=r.providers.filter(s=>s.name!==n.name);return r.currentProvider?.name===n.name&&(r.currentProvider=null,$t.setCurrentProvider()),localStorage.setItem(sy,JSON.stringify(i)),{providers:i}})}})),dI="allowAlwaysDesktopTools";class bre{tools;allowAlways=!1;constructor(){this.tools=[],this.initTools(),this.allowAlways=localStorage.getItem(dI)==="true"}setAllowAlways=e=>{this.allowAlways=e,localStorage.setItem(dI,e.toString())};getAllowAlways=()=>this.allowAlways;setTools=e=>{this.tools=e};getTools=()=>[...this.tools];callTools=async(e,n)=>{const r={...n};return await window.AscDesktopEditor?.callToolFunction(e,JSON.stringify(r))};initTools=()=>{try{const e=window.AscDesktopEditor?.getToolFunctions()??"",n=JSON.parse(e).map(r=>({name:r.name,description:r.description,inputSchema:r.parameters}));this.setTools(n)}catch(e){console.error("Error parsing tools:",e)}}}const pI=t=>{let e="";const n={};let r="";return Object.entries(t).map(([s,o])=>{s=="env"&&Object.entries(o).forEach(([a,c])=>{n[a]=c}),s==="command"&&(e=o),s=="args"&&(r=o.join(" "))}),{commandLine:e+" "+r,env:n}},mI="allowAlwaysCustomServers";class vre{customServers;startedCustomServers;initedCustomServers;customServersProcesses;customServersLogs;tools;constructor(){this.customServers={},this.startedCustomServers={},this.initedCustomServers={},this.customServersProcesses={},this.customServersLogs={},this.tools={}}checkAllowAlways=e=>localStorage.getItem(mI+e)==="true";setAllowAlways=(e,n)=>{localStorage.setItem(mI+n,e.toString())};onProcess=(e,n,r)=>{try{const i=JSON.parse(r);i.jsonrpc==="2.0"&&i.id&&i.id.includes("init-"+e)&&(this.initedCustomServers[e]=!0),i.jsonrpc==="2.0"&&i.id&&i.id.includes("tools-"+e)&&(this.tools[e]=i.result.tools)}catch{}switch(n){case 0:{this.customServersLogs[e].push(`${new Date().toLocaleString()}: ${r}
`);break}case 1:{this.customServersLogs[e].push(`${new Date().toLocaleString()}: ${r}
`);break}case 2:{this.customServersLogs[e].push(`${new Date().toLocaleString()}: [stop] ${r}
`);break}}};setCustomServers=e=>{this.customServers=e.mcpServers};startCustomServers=()=>{const e=[];Object.entries(this.customServers).forEach(([n,r])=>{e.push(n);const{commandLine:i,env:s}=pI(r);if(this.startedCustomServers[n]&&this.startedCustomServers[n]===i)return;this.customServersProcesses[n]&&(this.customServersProcesses[n].end(),console.log("stop server",n)),this.customServersLogs[n]=[`${new Date().toLocaleString()}: ${i}
`];const o=new window.ExternalProcess(i,s);o.onprocess=this.onProcess.bind(this,n),this.customServersProcesses[n]=o,o.start(),this.initCustomServer(n)}),Object.keys(this.customServersProcesses).forEach(n=>{e.includes(n)||this.deleteCustomServer(n)})};restartCustomServer=e=>{Object.entries(this.customServers).forEach(([n,r])=>{if(e!==n)return;const{commandLine:i,env:s}=pI(r);this.customServersLogs[e]=[`${new Date().toLocaleString()}: ${i}
`],this.tools[e]=[];const o=new window.ExternalProcess(i,s);o.onprocess=this.onProcess.bind(this,e),this.customServersProcesses[e]=o,o.start(),this.initCustomServer(e)})};deleteCustomServer=e=>{this.customServersProcesses[e]&&(this.customServersProcesses[e].end(),delete this.customServersProcesses[e]),this.customServersLogs[e]&&delete this.customServersLogs[e],this.startedCustomServers[e]&&delete this.startedCustomServers[e],this.customServers[e]&&delete this.customServers[e],this.tools[e]&&delete this.tools[e]};initCustomServer=e=>{const n=this.customServersProcesses[e];if(!n)return;const r=setInterval(()=>{if(this.initedCustomServers[e]){clearInterval(r),this.getToolsFromMCP(e);return}try{const i={jsonrpc:"2.0",id:`init-${e}`,method:"initialize",params:{protocolVersion:"2024-11-05",capabilities:{tools:{}},clientInfo:{name:"ai-agent",version:"1.0.0"}}},o=`${JSON.stringify(i)}
`;n.stdin(o)}catch(i){console.error(`Error initializing custom server ${e}:`,i)}},1e3)};getToolsFromMCP=async e=>{const n=this.customServersProcesses[e];try{const r={jsonrpc:"2.0",id:`tools-${e}-${Date.now()}`,method:"tools/list",params:{}},s=`${JSON.stringify(r)}
`;n.stdin(s)}catch(r){console.error(`Error getting tools from MCP server ${e}:`,r)}};callToolFromMCP=async(e,n,r)=>{const i=this.customServersProcesses[e];if(!i)throw new Error(`MCP server ${e} is not running`);if(!(this.tools[e]||[]).find(a=>a.name===n))throw new Error(`Tool ${n} not found on server ${e}`);try{const a={jsonrpc:"2.0",id:`call-${e}-${n}-${Date.now()}`,method:"tools/call",params:{name:n,arguments:r}},h=`${JSON.stringify(a)}
`;return i.stdin(h),new Promise((f,d)=>{const m=setTimeout(()=>{d(new Error(`Timeout waiting for tool response from ${e}`))},3e4),y=i.onprocess;i.onprocess=(v,w)=>{if(y(v,w),v===0)try{const _=JSON.parse(w);_.id&&_.id.startsWith(`call-${e}-${n}`)&&(i.onprocess=y,clearTimeout(m),_.error?(console.error("MCP tool error response:",_.error),d(new Error(`MCP tool error (${_.error.code}): ${_.error.message}`))):(console.log("MCP tool success response:",_.result),f(JSON.stringify(_.result))))}catch{}}})}catch(a){throw new Error(`Error calling MCP tool ${n} on server ${e}: ${a}`)}};getTools=()=>this.tools}const gI="webSearchProviderData";let xre=class{tools;webSearchData=null;constructor(){this.tools=[];const e=localStorage.getItem(gI);e?this.webSearchData=JSON.parse(e):this.webSearchData=null,this.initTools()}setAllowAlways=()=>{};getAllowAlways=()=>!0;setWebSearchData=e=>{this.webSearchData=e,localStorage.setItem(gI,e?JSON.stringify(e):""),this.initTools()};getWebSearchData=()=>this.webSearchData;setTools=e=>{this.tools=e};getTools=()=>[...this.tools];webSearch=async e=>{if(this.webSearchData?.provider==="exa")try{const n=await new Promise(r=>{window.AscSimpleRequest.createRequest({url:"https://api.exa.ai/search",method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.webSearchData.key},body:JSON.stringify({query:e.query,text:!0}),complete:function(i){const s=JSON.parse(i.responseText).results;r({data:s})},error:function(i){console.log("Request failed with status:",i.statusCode),i.statusCode==-102&&(i.statusCode=404),r({error:i.statusCode,message:`Network error: ${i.statusCode}`})}})});return JSON.stringify(n)}catch(n){console.error("WebSearch error:",n)}return JSON.stringify(e)};webCrawling=async e=>{if(this.webSearchData?.provider==="exa")try{const n=await new Promise(r=>{window.AscSimpleRequest.createRequest({url:"https://api.exa.ai/contents",method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.webSearchData.key},body:JSON.stringify({urls:e.urls,text:!0}),complete:function(i){const s=JSON.parse(i.responseText).results;r({data:s})},error:function(i){console.log("Request failed with status:",i.statusCode),i.statusCode==-102&&(i.statusCode=404),r({error:i.statusCode,message:`Network error: ${i.statusCode}`})}})});return JSON.stringify(n)}catch(n){console.error(n)}return JSON.stringify(e)};callTools=async(e,n)=>{if(e==="web_search")return await this.webSearch(n);if(e==="web_crawling")return await this.webCrawling(n)};initTools=()=>{if(!this.webSearchData){this.setTools([]);return}this.setTools([{name:"web_search",description:"The search endpoint lets you intelligently search the web and extract contents from the results.",inputSchema:{query:{type:"string",description:"The query string for the search."}}},{name:"web_crawling",description:"Get the full page contents, summaries, and metadata for a list of URLs.",inputSchema:{urls:{type:"array",items:{type:"string"},description:"Array of URLs to crawl"}}}])}},wre=class{desktopEditorTool;customServers;webSearch;constructor(){this.desktopEditorTool=new bre,this.customServers=new vre,this.webSearch=new xre}checkAllowAlways=e=>e==="desktop-editor"?this.desktopEditorTool.getAllowAlways():e==="web-search"?this.webSearch.getAllowAlways():this.customServers.checkAllowAlways(e);setAllowAlways=(e,n)=>{if(n==="desktop-editor"){this.desktopEditorTool.setAllowAlways(e);return}if(n==="web-search"){this.webSearch.setAllowAlways();return}this.customServers.setAllowAlways(e,n)};getTools=async()=>{const[e,n,r]=await Promise.all([this.desktopEditorTool.getTools(),this.webSearch.getTools(),this.customServers.getTools()]);return{"desktop-editor":e,"web-search":n,...r}};callTools=async(e,n,r)=>e==="desktop-editor"?this.desktopEditorTool.callTools(n,r):e==="web-search"?await this.webSearch.callTools(n,r):await this.customServers.callToolFromMCP(e,n,r);setCustomServers=e=>{this.customServers.setCustomServers(e)};startCustomServers=()=>{this.customServers.startCustomServers()};restartCustomServer=e=>{this.customServers.restartCustomServer(e)};deleteCustomServer=e=>{this.customServers.deleteCustomServer(e)};getCustomServers=()=>this.customServers.customServers;getCustomServersLogs=()=>this.customServers.customServersLogs;setWebSearchData=e=>{this.webSearch.setWebSearchData(e)};getWebSearchData=()=>this.webSearch.getWebSearchData()};const hr=new wre,c2="disabledTools",oy="mcpServers",vo=na((t,e)=>({servers:{},tools:[],disabledTools:{},manageToolData:void 0,webSearchEnabled:!1,initServers:()=>{const n=localStorage.getItem(oy);if(n){const r=JSON.parse(n);hr.setCustomServers(r),hr.startCustomServers()}},getTools:async()=>{const n=await hr.getTools(),r=localStorage.getItem(c2),i=[],s={};let o=!1;if(r){const a=JSON.parse(r);Object.entries(n).map(([c,h])=>{if(c==="web-search"){if(s[c]=[...h],a["web-search"].length){t({webSearchEnabled:!1});return}const f=h.map(d=>({...d,name:`${c}_${d.name}`}));a[c]=[],i.push(...f),t({webSearchEnabled:!0}),o=!0;return}s[c]=h.map(f=>{a[c]||(a[c]=[]);const d=!a[c].includes(f.name);return(d&&o?i.length===yb:i.length===_p)?(a[c].push(f.name),{...f,enabled:!1}):(d&&i.push({...f,name:`${c}_${f.name}`}),{...f,enabled:d})})}),t({disabledTools:a})}else{const a={};let c=!1;Object.entries(n).map(([h,f])=>{if(a[h]=[],h==="web-search"){s[h]=[...f];const m=f.map(y=>({...y,name:`${h}_${y.name}`,enabled:!0}));i.push(...m),t({webSearchEnabled:!0}),c=!0;return}const d=f.map((m,y)=>i.length+y>=(c?yb:_p)?(a[h].push(m.name),{...m,enabled:!1}):{...m,enabled:!0});s[h]=d,i.push(...d.map(m=>({...m,name:`${h}_${m.name}`})))}),t({disabledTools:a})}t({tools:i,servers:s})},changeToolStatus:(n,r,i)=>{const s=e(),o=s.servers,a=o[n].find(c=>c.name===r);if(a){if(i){if(n==="web-search"){const h={...s.disabledTools,[n]:[]};t({disabledTools:h}),t({webSearchEnabled:!0});return}if(s.tools.length>=(s.webSearchEnabled?yb:_p))return;const c={...s.disabledTools,[n]:s.disabledTools[n].filter(h=>h!==r)};t({tools:[...s.tools,{...a,name:`${n}_${a.name}`}],disabledTools:c}),localStorage.setItem(c2,JSON.stringify(c))}else{const c=[...s.disabledTools[n],r],h={...s.disabledTools,[n]:c};let f=[];n==="web-search"?(h[n]=[...s.servers[n].map(d=>d.name)],t({webSearchEnabled:!1}),f=s.tools.filter(d=>!d.name.includes(n))):f=s.tools.filter(d=>d.name!==`${n}_${r}`),t({tools:f,disabledTools:h}),localStorage.setItem(c2,JSON.stringify(h))}t({servers:{...o,[n]:o[n].map(c=>c.name===r?{...c,enabled:i}:c)}})}},checkAllowAlways:n=>hr.checkAllowAlways(n),setAllowAlways:(n,r)=>{hr.setAllowAlways(n,r)},callTools:async(n,r)=>{const i=e(),s=n.split("_")[0],o=n.replace(s+"_","");if(!i.disabledTools[s].find(c=>c===o))return await hr.callTools(s,o,r)},setManageToolData:n=>{t({manageToolData:n})},getConfig:()=>JSON.parse(localStorage.getItem(oy)||JSON.stringify({mcpServers:{}})),saveConfig:n=>{localStorage.setItem(oy,JSON.stringify(n)),hr.setCustomServers(n),hr.startCustomServers()},deleteCustomServer:n=>{hr.deleteCustomServer(n);const r=e().getConfig();delete r.mcpServers[n],localStorage.setItem(oy,JSON.stringify(r))},getCustomServersLogs:()=>hr.getCustomServersLogs()})),Sre=(t,e,n,r)=>{const i=[n,{code:e,...r||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);pc(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...i):console?.warn&&console.warn(...i)},yI={},_C=(t,e,n,r)=>{pc(n)&&yI[n]||(pc(n)&&(yI[n]=new Date),Sre(t,e,n,r))},t$=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},CC=(t,e,n)=>{t.loadNamespaces(e,t$(t,n))},bI=(t,e,n,r)=>{if(pc(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return CC(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,t$(t,r))},_re=(t,e,n={})=>!e.languages||!e.languages.length?(_C(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),pc=t=>typeof t=="string",Cre=t=>typeof t=="object"&&t!==null,Are=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,kre={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Ere=t=>kre[t],Tre=t=>t.replace(Are,Ere);let AC={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Tre};const Rre=(t={})=>{AC={...AC,...t}},Mre=()=>AC;let n$;const Ore=t=>{n$=t},Pre=()=>n$,Dre={type:"3rdParty",init(t){Rre(t.options.react),Ore(t)}},Lre=E.createContext();class Ire{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Nre=(t,e)=>{const n=E.useRef();return E.useEffect(()=>{n.current=t},[t,e]),n.current},r$=(t,e,n,r)=>t.getFixedT(e,n,r),Bre=(t,e,n,r)=>E.useCallback(r$(t,e,n,r),[t,e,n,r]),Mt=(t,e={})=>{const{i18n:n}=e,{i18n:r,defaultNS:i}=E.useContext(Lre)||{},s=n||r||Pre();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Ire),!s){_C(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const P=(O,L)=>pc(L)?L:Cre(L)&&pc(L.defaultValue)?L.defaultValue:Array.isArray(O)?O[O.length-1]:O,M=[P,{},!1];return M.t=P,M.i18n={},M.ready=!1,M}s.options.react?.wait&&_C(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Mre(),...s.options.react,...e},{useSuspense:a,keyPrefix:c}=o;let h=i||s.options?.defaultNS;h=pc(h)?[h]:h||["translation"],s.reportNamespaces.addUsedNamespaces?.(h);const f=(s.isInitialized||s.initializedStoreOnce)&&h.every(P=>_re(P,s,o)),d=Bre(s,e.lng||null,o.nsMode==="fallback"?h:h[0],c),m=()=>d,y=()=>r$(s,e.lng||null,o.nsMode==="fallback"?h:h[0],c),[v,w]=E.useState(m);let _=h.join();e.lng&&(_=`${e.lng}${_}`);const S=Nre(_),A=E.useRef(!0);E.useEffect(()=>{const{bindI18n:P,bindI18nStore:M}=o;A.current=!0,!f&&!a&&(e.lng?bI(s,e.lng,h,()=>{A.current&&w(y)}):CC(s,h,()=>{A.current&&w(y)})),f&&S&&S!==_&&A.current&&w(y);const O=()=>{A.current&&w(y)};return P&&s?.on(P,O),M&&s?.store.on(M,O),()=>{A.current=!1,s&&P&&P?.split(" ").forEach(L=>s.off(L,O)),M&&s&&M.split(" ").forEach(L=>s.store.off(L,O))}},[s,_]),E.useEffect(()=>{A.current&&f&&w(m)},[s,c,f]);const k=[v,s,f];if(k.t=v,k.i18n=s,k.ready=f,f||!f&&!a)return k;throw new Promise(P=>{e.lng?bI(s,e.lng,h,()=>P()):CC(s,h,()=>P())})};function i$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=i$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sv(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=i$(t))&&(r&&(r+=" "),r+=e);return r}const vI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,xI=sv,jre=(t,e)=>n=>{var r;if(e?.variants==null)return xI(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(h=>{const f=n?.[h],d=s?.[h];if(f===null)return null;const m=vI(f)||vI(d);return i[h][m]}),a=n&&Object.entries(n).reduce((h,f)=>{let[d,m]=f;return m===void 0||(h[d]=m),h},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:d,className:m,...y}=f;return Object.entries(y).every(v=>{let[w,_]=v;return Array.isArray(_)?_.includes({...s,...a}[w]):{...s,...a}[w]===_})?[...h,d,m]:h},[]);return xI(t,o,c,n?.class,n?.className)},CE="-",$re=t=>{const e=Fre(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(CE);return a[0]===""&&a.length!==1&&a.shift(),s$(a,e)||Vre(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},s$=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?s$(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(CE);return e.validators.find(({validator:o})=>o(s))?.classGroupId},wI=/^\[(.+)\]$/,Vre=t=>{if(wI.test(t)){const e=wI.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Fre=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const i in n)kC(n[i],r,i,e);return r},kC=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:SI(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(zre(i)){kC(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{kC(o,SI(e,s),n,r)})})},SI=(t,e)=>{let n=t;return e.split(CE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zre=t=>t.isThemeGetter,Ure=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},EC="!",TC=":",Hre=TC.length,qre=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,c=0,h;for(let v=0;v<i.length;v++){let w=i[v];if(o===0&&a===0){if(w===TC){s.push(i.slice(c,v)),c=v+Hre;continue}if(w==="/"){h=v;continue}}w==="["?o++:w==="]"?o--:w==="("?a++:w===")"&&a--}const f=s.length===0?i:i.substring(c),d=Wre(f),m=d!==f,y=h&&h>c?h-c:void 0;return{modifiers:s,hasImportantModifier:m,baseClassName:d,maybePostfixModifierPosition:y}};if(e){const i=e+TC,s=r;r=o=>o.startsWith(i)?s(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},Wre=t=>t.endsWith(EC)?t.substring(0,t.length-1):t.startsWith(EC)?t.substring(1):t,Gre=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let s=[];return r.forEach(o=>{o[0]==="["||e[o]?(i.push(...s.sort(),o),s=[]):s.push(o)}),i.push(...s.sort()),i}},Kre=t=>({cache:Ure(t.cacheSize),parseClassName:qre(t),sortModifiers:Gre(t),...$re(t)}),Yre=/\s+/,Xre=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(Yre);let c="";for(let h=a.length-1;h>=0;h-=1){const f=a[h],{isExternal:d,modifiers:m,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:w}=n(f);if(d){c=f+(c.length>0?" "+c:c);continue}let _=!!w,S=r(_?v.substring(0,w):v);if(!S){if(!_){c=f+(c.length>0?" "+c:c);continue}if(S=r(v),!S){c=f+(c.length>0?" "+c:c);continue}_=!1}const A=s(m).join(":"),k=y?A+EC:A,P=k+S;if(o.includes(P))continue;o.push(P);const M=i(S,_);for(let O=0;O<M.length;++O){const L=M[O];o.push(k+L)}c=f+(c.length>0?" "+c:c)}return c};function Jre(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=o$(e))&&(r&&(r+=" "),r+=n);return r}const o$=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=o$(t[r]))&&(n&&(n+=" "),n+=e);return n};function Qre(t,...e){let n,r,i,s=o;function o(c){const h=e.reduce((f,d)=>d(f),t());return n=Kre(h),r=n.cache.get,i=n.cache.set,s=a,a(c)}function a(c){const h=r(c);if(h)return h;const f=Xre(c,n);return i(c,f),f}return function(){return s(Jre.apply(null,arguments))}}const wn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},a$=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,l$=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Zre=/^\d+\/\d+$/,eie=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tie=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nie=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rie=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iie=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ju=t=>Zre.test(t),tt=t=>!!t&&!Number.isNaN(Number(t)),Wa=t=>!!t&&Number.isInteger(Number(t)),u2=t=>t.endsWith("%")&&tt(t.slice(0,-1)),Fo=t=>eie.test(t),sie=()=>!0,oie=t=>tie.test(t)&&!nie.test(t),c$=()=>!1,aie=t=>rie.test(t),lie=t=>iie.test(t),cie=t=>!Re(t)&&!Me(t),uie=t=>Kh(t,f$,c$),Re=t=>a$.test(t),Gl=t=>Kh(t,d$,oie),h2=t=>Kh(t,mie,tt),_I=t=>Kh(t,u$,c$),hie=t=>Kh(t,h$,lie),ay=t=>Kh(t,p$,aie),Me=t=>l$.test(t),Ed=t=>Yh(t,d$),fie=t=>Yh(t,gie),CI=t=>Yh(t,u$),die=t=>Yh(t,f$),pie=t=>Yh(t,h$),ly=t=>Yh(t,p$,!0),Kh=(t,e,n)=>{const r=a$.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Yh=(t,e,n=!1)=>{const r=l$.exec(t);return r?r[1]?e(r[1]):n:!1},u$=t=>t==="position"||t==="percentage",h$=t=>t==="image"||t==="url",f$=t=>t==="length"||t==="size"||t==="bg-size",d$=t=>t==="length",mie=t=>t==="number",gie=t=>t==="family-name",p$=t=>t==="shadow",yie=()=>{const t=wn("color"),e=wn("font"),n=wn("text"),r=wn("font-weight"),i=wn("tracking"),s=wn("leading"),o=wn("breakpoint"),a=wn("container"),c=wn("spacing"),h=wn("radius"),f=wn("shadow"),d=wn("inset-shadow"),m=wn("text-shadow"),y=wn("drop-shadow"),v=wn("blur"),w=wn("perspective"),_=wn("aspect"),S=wn("ease"),A=wn("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...P(),Me,Re],O=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],N=()=>[Me,Re,c],z=()=>[ju,"full","auto",...N()],j=()=>[Wa,"none","subgrid",Me,Re],H=()=>["auto",{span:["full",Wa,Me,Re]},Wa,Me,Re],W=()=>[Wa,"auto",Me,Re],X=()=>["auto","min","max","fr",Me,Re],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ie=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...N()],Y=()=>[ju,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],q=()=>[t,Me,Re],se=()=>[...P(),CI,_I,{position:[Me,Re]}],T=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",die,uie,{size:[Me,Re]}],ue=()=>[u2,Ed,Gl],I=()=>["","none","full",h,Me,Re],pe=()=>["",tt,Ed,Gl],Ee=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[tt,u2,CI,_I],ze=()=>["","none",v,Me,Re],Ot=()=>["none",tt,Me,Re],Kt=()=>["none",tt,Me,Re],Yt=()=>[tt,Me,Re],Zn=()=>[ju,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Fo],breakpoint:[Fo],color:[sie],container:[Fo],"drop-shadow":[Fo],ease:["in","out","in-out"],font:[cie],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Fo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Fo],shadow:[Fo],spacing:["px",tt],text:[Fo],"text-shadow":[Fo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ju,Re,Me,_]}],container:["container"],columns:[{columns:[tt,Re,Me,a]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[Wa,"auto",Me,Re]}],basis:[{basis:[ju,"full","auto",a,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,ju,"auto","initial","none",Re]}],grow:[{grow:["",tt,Me,Re]}],shrink:[{shrink:["",tt,Me,Re]}],order:[{order:[Wa,"first","last","none",Me,Re]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":X()}],"auto-rows":[{"auto-rows":X()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...ie(),"normal"]}],"justify-self":[{"justify-self":["auto",...ie()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...ie(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ie(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...ie(),"baseline"]}],"place-self":[{"place-self":["auto",...ie()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:Y()}],w:[{w:[a,"screen",...Y()]}],"min-w":[{"min-w":[a,"screen","none",...Y()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...Y()]}],h:[{h:["screen","lh",...Y()]}],"min-h":[{"min-h":["screen","lh","none",...Y()]}],"max-h":[{"max-h":["screen","lh",...Y()]}],"font-size":[{text:["base",n,Ed,Gl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Me,h2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",u2,Re]}],"font-family":[{font:[fie,Re,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Me,Re]}],"line-clamp":[{"line-clamp":[tt,"none",Me,h2]}],leading:[{leading:[s,...N()]}],"list-image":[{"list-image":["none",Me,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",Me,Gl]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[tt,"auto",Me,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:T()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wa,Me,Re],radial:["",Me,Re],conic:[Wa,Me,Re]},pie,hie]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:ue()}],"gradient-via-pos":[{via:ue()}],"gradient-to-pos":[{to:ue()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:I()}],"rounded-s":[{"rounded-s":I()}],"rounded-e":[{"rounded-e":I()}],"rounded-t":[{"rounded-t":I()}],"rounded-r":[{"rounded-r":I()}],"rounded-b":[{"rounded-b":I()}],"rounded-l":[{"rounded-l":I()}],"rounded-ss":[{"rounded-ss":I()}],"rounded-se":[{"rounded-se":I()}],"rounded-ee":[{"rounded-ee":I()}],"rounded-es":[{"rounded-es":I()}],"rounded-tl":[{"rounded-tl":I()}],"rounded-tr":[{"rounded-tr":I()}],"rounded-br":[{"rounded-br":I()}],"rounded-bl":[{"rounded-bl":I()}],"border-w":[{border:pe()}],"border-w-x":[{"border-x":pe()}],"border-w-y":[{"border-y":pe()}],"border-w-s":[{"border-s":pe()}],"border-w-e":[{"border-e":pe()}],"border-w-t":[{"border-t":pe()}],"border-w-r":[{"border-r":pe()}],"border-w-b":[{"border-b":pe()}],"border-w-l":[{"border-l":pe()}],"divide-x":[{"divide-x":pe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":pe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ee(),"hidden","none"]}],"divide-style":[{divide:[...Ee(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...Ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,Me,Re]}],"outline-w":[{outline:["",tt,Ed,Gl]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",f,ly,ay]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",d,ly,ay]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[tt,Gl]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":pe()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",m,ly,ay]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[tt,Me,Re]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[Me,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:T()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Me,Re]}],filter:[{filter:["","none",Me,Re]}],blur:[{blur:ze()}],brightness:[{brightness:[tt,Me,Re]}],contrast:[{contrast:[tt,Me,Re]}],"drop-shadow":[{"drop-shadow":["","none",y,ly,ay]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",tt,Me,Re]}],"hue-rotate":[{"hue-rotate":[tt,Me,Re]}],invert:[{invert:["",tt,Me,Re]}],saturate:[{saturate:[tt,Me,Re]}],sepia:[{sepia:["",tt,Me,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,Re]}],"backdrop-blur":[{"backdrop-blur":ze()}],"backdrop-brightness":[{"backdrop-brightness":[tt,Me,Re]}],"backdrop-contrast":[{"backdrop-contrast":[tt,Me,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,Me,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,Me,Re]}],"backdrop-invert":[{"backdrop-invert":["",tt,Me,Re]}],"backdrop-opacity":[{"backdrop-opacity":[tt,Me,Re]}],"backdrop-saturate":[{"backdrop-saturate":[tt,Me,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,Me,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",Me,Re]}],ease:[{ease:["linear","initial",S,Me,Re]}],delay:[{delay:[tt,Me,Re]}],animate:[{animate:["none",A,Me,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Me,Re]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:Ot()}],"rotate-x":[{"rotate-x":Ot()}],"rotate-y":[{"rotate-y":Ot()}],"rotate-z":[{"rotate-z":Ot()}],scale:[{scale:Kt()}],"scale-x":[{"scale-x":Kt()}],"scale-y":[{"scale-y":Kt()}],"scale-z":[{"scale-z":Kt()}],"scale-3d":["scale-3d"],skew:[{skew:Yt()}],"skew-x":[{"skew-x":Yt()}],"skew-y":[{"skew-y":Yt()}],transform:[{transform:[Me,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Zn()}],"translate-x":[{"translate-x":Zn()}],"translate-y":[{"translate-y":Zn()}],"translate-z":[{"translate-z":Zn()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,Re]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[tt,Ed,Gl,h2]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},bie=Qre(yie),Ye=(...t)=>bie(sv(t)),m$=t=>{let e="";return t.forEach((n,r)=>{const i=n.role==="user"?"**User**":"**Assistant**";e+=`## ${i}

`,Array.isArray(n.content)?n.content.forEach(s=>{if(typeof s=="string"){e+=`${s}

`;return}!s||typeof s!="object"||!("type"in s)||(s.type==="text"&&"text"in s?e+=`${s.text}

`:s.type==="tool-call"&&"toolName"in s&&(e+=`*Tool Call: ${s.toolName}*
`,"args"in s&&s.args&&(e+=`\`\`\`json
${JSON.stringify(s.args,null,2)}
\`\`\`

`),"result"in s&&s.result!==void 0&&(e+=`*Tool Result:*
`,e+=`\`\`\`json
${s.result}
\`\`\`

`)))}):typeof n.content=="string"&&(e+=`${n.content}

`),r<t.length-1&&(e+=`---

`)}),e},vie=jre("inline-flex items-center justify-center min-w-[48px] rounded-[4px] outline-none focus:outline-none focus-visible:outline-none",{variants:{variant:{default:"bg-[var(--button-default-background-color)] border border-[var(--button-default-border-color)] text-[var(--button-default-color)] hover:enabled:bg-[var(--button-default-hover-background-color)] active:enabled:bg-[var(--button-default-pressed-background-color)] focus:enabled:bg-[var(--button-default-focus-background-color)] disabled:bg-[var(--button-default-disabled-background-color)] disabled:text-[var(--button-default-disabled-color)] disabled:cursor-not-allowed",primary:`bg-[var(--button-background-color)] 
          text-[var(--button-color)] 
          hover:enabled:bg-[var(--button-background-hover-color)] 
          active:enabled:bg-[var(--button-background-pressed-color)] 
          focus:bg-[var(--button-background-color)]
          focus:border-[var(--button-border-focus-color)] focus:shadow-[var(--button-shadow-focus)] 
          disabled:bg-[var(--button-background-disabled-color)] disabled:text-[var(--button-disabled-color)] disabled:cursor-not-allowed`},size:{small:"h-[24px] px-[8px] text-[12px] font-semibold leading-[16px] m-w-[64px]",default:"h-[32px] px-[12px] text-[14px] font-semibold leading-[16px]",normal:"h-[42px] px-[16px] text-[16px] font-bold leading-[24px]"},scale:{default:"w-fit",scale:"w-full"}},defaultVariants:{variant:"primary",size:"default",scale:"default"}}),mn=({className:t,variant:e,size:n,asChild:r=!1,...i})=>{const s=r?XB:"button";return C.jsx(s,{"data-slot":"button",className:Ye("cursor-pointer",vie({variant:e,size:n,className:t})),...i})},xie=({onConnect:t})=>{const{t:e}=Mt();return C.jsx("div",{className:"flex items-center justify-center h-full",children:C.jsxs("div",{className:"max-w-[537px] text-center flex flex-col items-center gap-[40px]",children:[C.jsxs("div",{className:"flex flex-col gap-[16px]",children:[C.jsx("h1",{className:"select-none text-center text-[32px] font-bold leading-[24px] text-[var(--empty-screen-color)]",children:e("ConnectAIModel")}),C.jsx("p",{className:"select-none text-center text-[16px] font-normal leading-[24px] text-[var(--empty-screen-description-color)]",children:e("ConnectAIModelDescription")})]}),C.jsx(mn,{onClick:t,children:e("ConnectAIModelBtn")})]})})};function g$(t){const e=t+"CollectionProvider",[n,r]=ra(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:_,children:S}=w,A=xe.useRef(null),k=xe.useRef(new Map).current;return C.jsx(i,{scope:_,itemMap:k,collectionRef:A,children:S})};o.displayName=e;const a=t+"CollectionSlot",c=Eh(a),h=xe.forwardRef((w,_)=>{const{scope:S,children:A}=w,k=s(a,S),P=Bt(_,k.collectionRef);return C.jsx(c,{ref:P,children:A})});h.displayName=a;const f=t+"CollectionItemSlot",d="data-radix-collection-item",m=Eh(f),y=xe.forwardRef((w,_)=>{const{scope:S,children:A,...k}=w,P=xe.useRef(null),M=Bt(_,P),O=s(f,S);return xe.useEffect(()=>(O.itemMap.set(P,{ref:P,...k}),()=>void O.itemMap.delete(P))),C.jsx(m,{[d]:"",ref:M,children:A})});y.displayName=f;function v(w){const _=s(t+"CollectionConsumer",w);return xe.useCallback(()=>{const A=_.collectionRef.current;if(!A)return[];const k=Array.from(A.querySelectorAll(`[${d}]`));return Array.from(_.itemMap.values()).sort((O,L)=>k.indexOf(O.ref.current)-k.indexOf(L.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:h,ItemSlot:y},v,r]}var wie=E.createContext(void 0);function AE(t){const e=E.useContext(wie);return t||e||"ltr"}var f2="rovingFocusGroup.onEntryFocus",Sie={bubbles:!1,cancelable:!0},Bm="RovingFocusGroup",[RC,y$,_ie]=g$(Bm),[Cie,Lx]=ra(Bm,[_ie]),[Aie,kie]=Cie(Bm),b$=E.forwardRef((t,e)=>C.jsx(RC.Provider,{scope:t.__scopeRovingFocusGroup,children:C.jsx(RC.Slot,{scope:t.__scopeRovingFocusGroup,children:C.jsx(Eie,{...t,ref:e})})}));b$.displayName=Bm;var Eie=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...d}=t,m=E.useRef(null),y=Bt(e,m),v=AE(s),[w,_]=Hh({prop:o,defaultProp:a??null,onChange:c,caller:Bm}),[S,A]=E.useState(!1),k=Ir(h),P=y$(n),M=E.useRef(!1),[O,L]=E.useState(0);return E.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(f2,k),()=>N.removeEventListener(f2,k)},[k]),C.jsx(Aie,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:w,onItemFocus:E.useCallback(N=>_(N),[_]),onItemShiftTab:E.useCallback(()=>A(!0),[]),onFocusableItemAdd:E.useCallback(()=>L(N=>N+1),[]),onFocusableItemRemove:E.useCallback(()=>L(N=>N-1),[]),children:C.jsx(st.div,{tabIndex:S||O===0?-1:0,"data-orientation":r,...d,ref:y,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{M.current=!0}),onFocus:Ie(t.onFocus,N=>{const z=!M.current;if(N.target===N.currentTarget&&z&&!S){const j=new CustomEvent(f2,Sie);if(N.currentTarget.dispatchEvent(j),!j.defaultPrevented){const H=P().filter(F=>F.focusable),W=H.find(F=>F.active),X=H.find(F=>F.id===w),ie=[W,X,...H].filter(Boolean).map(F=>F.ref.current);w$(ie,f)}}M.current=!1}),onBlur:Ie(t.onBlur,()=>A(!1))})})}),v$="RovingFocusGroupItem",x$=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,c=ol(),h=s||c,f=kie(v$,n),d=f.currentTabStopId===h,m=y$(n),{onFocusableItemAdd:y,onFocusableItemRemove:v,currentTabStopId:w}=f;return E.useEffect(()=>{if(r)return y(),()=>v()},[r,y,v]),C.jsx(RC.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:C.jsx(st.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...a,ref:e,onMouseDown:Ie(t.onMouseDown,_=>{r?f.onItemFocus(h):_.preventDefault()}),onFocus:Ie(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:Ie(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const S=Mie(_,f.orientation,f.dir);if(S!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let k=m().filter(P=>P.focusable).map(P=>P.ref.current);if(S==="last")k.reverse();else if(S==="prev"||S==="next"){S==="prev"&&k.reverse();const P=k.indexOf(_.currentTarget);k=f.loop?Oie(k,P+1):k.slice(P+1)}setTimeout(()=>w$(k))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:w!=null}):o})})});x$.displayName=v$;var Tie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Rie(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Mie(t,e,n){const r=Rie(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Tie[r]}function w$(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Oie(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var S$=b$,_$=x$,Ix="Tabs",[Pie]=ra(Ix,[Lx]),C$=Lx(),[Die,kE]=Pie(Ix),A$=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...h}=t,f=AE(a),[d,m]=Hh({prop:r,onChange:i,defaultProp:s??"",caller:Ix});return C.jsx(Die,{scope:n,baseId:ol(),value:d,onValueChange:m,orientation:o,dir:f,activationMode:c,children:C.jsx(st.div,{dir:f,"data-orientation":o,...h,ref:e})})});A$.displayName=Ix;var k$="TabsList",E$=E.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=kE(k$,n),o=C$(n);return C.jsx(S$,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:C.jsx(st.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});E$.displayName=k$;var T$="TabsTrigger",R$=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=kE(T$,n),a=C$(n),c=P$(o.baseId,r),h=D$(o.baseId,r),f=r===o.value;return C.jsx(_$,{asChild:!0,...a,focusable:!i,active:f,children:C.jsx(st.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:Ie(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ie(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ie(t.onFocus,()=>{const d=o.activationMode!=="manual";!f&&!i&&d&&o.onValueChange(r)})})})});R$.displayName=T$;var M$="TabsContent",O$=E.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=kE(M$,n),c=P$(a.baseId,r),h=D$(a.baseId,r),f=r===a.value,d=E.useRef(f);return E.useEffect(()=>{const m=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(m)},[]),C.jsx(ks,{present:i||f,children:({present:m})=>C.jsx(st.div,{"data-state":f?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:h,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:m&&s})})});O$.displayName=M$;function P$(t,e){return`${t}-trigger-${e}`}function D$(t,e){return`${t}-content-${e}`}var Lie=A$,Iie=E$,Nie=R$,Bie=O$;const jie=({items:t,defaultValue:e,value:n,onValueChange:r,className:i})=>C.jsxs(Lie,{defaultValue:e||t[0]?.value,value:n,onValueChange:r,className:Ye("w-full",i),children:[C.jsx(Iie,{className:"w-full inline-flex h-[32px] gap-[20px] items-center border-b-[1px] border-[var(--tabs-border-color)]",children:t.map(s=>C.jsx(Nie,{value:s.value,className:Ye("font-normal text-[14px] leading-[20px] text-[var(--tabs-color)] cursor-pointer pb-[3px] relative","hover:data-[state=inactive]:after:content-[''] hover:data-[state=inactive]:after:absolute hover:data-[state=inactive]:after:bottom-[-5px] hover:data-[state=inactive]:after:left-1/2 hover:data-[state=inactive]:after:transform hover:data-[state=inactive]:after:-translate-x-1/2 hover:data-[state=inactive]:after:w-[24px] hover:data-[state=inactive]:after:h-[4px] hover:data-[state=inactive]:after:bg-[var(--tabs-hover-border-color)] hover:data-[state=inactive]:after:rounded-t-[3px]","data-[state=active]:font-bold data-[state=active]:after:content-[''] data-[state=active]:after:absolute data-[state=active]:after:bottom-[-5px] data-[state=active]:after:left-0 data-[state=active]:after:right-0 data-[state=active]:after:h-[4px] data-[state=active]:after:bg-[var(--tabs-active-border-color)] data-[state=active]:after:rounded-t-[3px]","disabled:opacity-50 disabled:cursor-not-allowed"),children:s.label},s.value))}),t.map(s=>C.jsx(Bie,{value:s.value,className:"mt-[24px]",children:s.content},s.value))]}),EE="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='14.9998'%20cy='9.99975'%20r='0.999754'%20fill='%231C1B1F'/%3e%3ccircle%20cx='4.99975'%20cy='9.99975'%20r='0.999754'%20fill='%231C1B1F'/%3e%3ccircle%20cx='9.99975'%20cy='9.99975'%20r='0.999754'%20fill='%231C1B1F'/%3e%3c/svg%3e",TE="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.5%205C14.3284%205%2015%205.67157%2015%206.5V8H17.5C17.7761%208%2018%208.22386%2018%208.5C18%208.77614%2017.7761%209%2017.5%209H17V17.5C17%2018.3284%2016.3284%2019%2015.5%2019H8.5C7.67157%2019%207%2018.3284%207%2017.5V9H6.5C6.22386%209%206%208.77614%206%208.5C6%208.22386%206.22386%208%206.5%208H9V6.5C9%205.67157%209.67157%205%2010.5%205H13.5ZM8%2017.5C8%2017.7761%208.22386%2018%208.5%2018H15.5C15.7761%2018%2016%2017.7761%2016%2017.5V9H8V17.5ZM10.5%2011C10.7761%2011%2011%2011.2239%2011%2011.5V15.5C11%2015.7761%2010.7761%2016%2010.5%2016C10.2239%2016%2010%2015.7761%2010%2015.5V11.5C10%2011.2239%2010.2239%2011%2010.5%2011ZM13.5%2011C13.7761%2011%2014%2011.2239%2014%2011.5V15.5C14%2015.7761%2013.7761%2016%2013.5%2016C13.2239%2016%2013%2015.7761%2013%2015.5V11.5C13%2011.2239%2013.2239%2011%2013.5%2011ZM10.5%206C10.2239%206%2010%206.22386%2010%206.5V8H14V6.5C14%206.22386%2013.7761%206%2013.5%206H10.5Z'%20fill='%23383838'/%3e%3c/svg%3e",$ie="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.5%207.49985L5.5%2014.4998V17.4998H8.5L15.5%2010.4998M12.5%207.49985L14.7929%205.20696C15.1834%204.81643%2015.8166%204.81643%2016.2071%205.20696L17.7929%206.79274C18.1834%207.18327%2018.1834%207.81643%2017.7929%208.20696L15.5%2010.4998M12.5%207.49985L15.5%2010.4998M12.5%2017.4998H18.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function MC(t,e){return MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},MC(t,e)}function Vie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,MC(t,e)}var cy={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var AI;function Fie(){if(AI)return cy;AI=1;var t=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,e=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,i=/([\\"])/g,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;cy.format=o,cy.parse=a;function o(d){if(!d||typeof d!="object")throw new TypeError("argument obj is required");var m=d.parameters,y=d.type;if(!y||!s.test(y))throw new TypeError("invalid type");var v=y;if(m&&typeof m=="object")for(var w,_=Object.keys(m).sort(),S=0;S<_.length;S++){if(w=_[S],!n.test(w))throw new TypeError("invalid parameter name");v+="; "+w+"="+h(m[w])}return v}function a(d){if(!d)throw new TypeError("argument string is required");var m=typeof d=="object"?c(d):d;if(typeof m!="string")throw new TypeError("argument string is required to be a string");var y=m.indexOf(";"),v=y!==-1?m.slice(0,y).trim():m.trim();if(!s.test(v))throw new TypeError("invalid media type");var w=new f(v.toLowerCase());if(y!==-1){var _,S,A;for(t.lastIndex=y;S=t.exec(m);){if(S.index!==y)throw new TypeError("invalid parameter format");y+=S[0].length,_=S[1].toLowerCase(),A=S[2],A.charCodeAt(0)===34&&(A=A.slice(1,-1),A.indexOf("\\")!==-1&&(A=A.replace(r,"$1"))),w.parameters[_]=A}if(y!==m.length)throw new TypeError("invalid parameter format")}return w}function c(d){var m;if(typeof d.getHeader=="function"?m=d.getHeader("content-type"):typeof d.headers=="object"&&(m=d.headers&&d.headers["content-type"]),typeof m!="string")throw new TypeError("content-type header is missing from object");return m}function h(d){var m=String(d);if(n.test(m))return m;if(m.length>0&&!e.test(m))throw new TypeError("invalid parameter value");return'"'+m.replace(i,"\\$1")+'"'}function f(d){this.parameters=Object.create(null),this.type=d}return cy}var zie=Fie(),Xu=new Map,L$=function(e){return e.cloneNode(!0)},kI=function(){return window.location.protocol==="file:"},I$=function(e,n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){try{if(!/\.svg/i.test(e)&&i.readyState===2){var s=i.getResponseHeader("Content-Type");if(!s)throw new Error("Content type not found");var o=zie.parse(s).type;if(!(o==="image/svg+xml"||o==="text/plain"))throw new Error("Invalid content type: ".concat(o))}if(i.readyState===4){if(i.status===404||i.responseXML===null)throw new Error(kI()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+e);if(i.status===200||kI()&&i.status===0)r(null,i);else throw new Error("There was a problem injecting the SVG: "+i.status+" "+i.statusText)}}catch(a){if(i.abort(),a instanceof Error)r(a,i);else throw a}},i.open("GET",e),i.withCredentials=n,i.overrideMimeType&&i.overrideMimeType("text/xml"),i.send()},Za={},EI=function(e,n){Za[e]=Za[e]||[],Za[e].push(n)},Uie=function(e){for(var n=function(o,a){setTimeout(function(){if(Array.isArray(Za[e])){var c=Xu.get(e),h=Za[e][o];c instanceof SVGSVGElement&&h(null,L$(c)),c instanceof Error&&h(c),o===Za[e].length-1&&delete Za[e]}},0)},r=0,i=Za[e].length;r<i;r++)n(r)},Hie=function(e,n,r){if(Xu.has(e)){var i=Xu.get(e);if(i===void 0){EI(e,r);return}if(i instanceof SVGSVGElement){r(null,L$(i));return}}Xu.set(e,void 0),EI(e,r),I$(e,n,function(s,o){var a;s?Xu.set(e,s):((a=o.responseXML)===null||a===void 0?void 0:a.documentElement)instanceof SVGSVGElement&&Xu.set(e,o.responseXML.documentElement),Uie(e)})},qie=function(e,n,r){I$(e,n,function(i,s){var o;i?r(i):((o=s.responseXML)===null||o===void 0?void 0:o.documentElement)instanceof SVGSVGElement&&r(null,s.responseXML.documentElement)})},Wie=0,Gie=function(){return++Wie},Fs=[],TI={},Kie="http://www.w3.org/2000/svg",d2="http://www.w3.org/1999/xlink",RI=function(e,n,r,i,s,o,a){var c=e.getAttribute("data-src")||e.getAttribute("src");if(!c){a(new Error("Invalid data-src or src attribute"));return}if(Fs.indexOf(e)!==-1){Fs.splice(Fs.indexOf(e),1),e=null;return}Fs.push(e),e.setAttribute("src","");var h=i?Hie:qie;h(c,s,function(f,d){if(!d){Fs.splice(Fs.indexOf(e),1),e=null,a(f);return}var m=e.getAttribute("id");m&&d.setAttribute("id",m);var y=e.getAttribute("title");y&&d.setAttribute("title",y);var v=e.getAttribute("width");v&&d.setAttribute("width",v);var w=e.getAttribute("height");w&&d.setAttribute("height",w);var _=Array.from(new Set(Yy(Yy(Yy([],(d.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(e.getAttribute("class")||"").split(" "),!0))).join(" ").trim();d.setAttribute("class",_);var S=e.getAttribute("style");S&&d.setAttribute("style",S),d.setAttribute("data-src",c);var A=[].filter.call(e.attributes,function(q){return/^data-\w[\w-]*$/.test(q.name)});if(Array.prototype.forEach.call(A,function(q){q.name&&q.value&&d.setAttribute(q.name,q.value)}),r){var k={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]},P,M,O,L,N;Object.keys(k).forEach(function(q){P=q,O=k[q],M=d.querySelectorAll(P+"[id]");for(var se=function(I,pe){L=M[I].id,N=L+"-"+Gie();var Ee;Array.prototype.forEach.call(O,function(er){Ee=d.querySelectorAll("["+er+'*="'+L+'"]');for(var ei=0,_o=Ee.length;ei<_o;ei++){var rs=Ee[ei].getAttribute(er);rs&&!rs.match(new RegExp('url\\("?#'+L+'"?\\)'))||Ee[ei].setAttribute(er,"url(#"+N+")")}});for(var ye=d.querySelectorAll("[*|href]"),ke=[],ze=0,Ot=ye.length;ze<Ot;ze++){var Kt=ye[ze].getAttributeNS(d2,"href");Kt&&Kt.toString()==="#"+M[I].id&&ke.push(ye[ze])}for(var Yt=0,Zn=ke.length;Yt<Zn;Yt++)ke[Yt].setAttributeNS(d2,"href","#"+N);M[I].id=N},T=0,Z=M.length;T<Z;T++)se(T)})}d.removeAttribute("xmlns:a");for(var z=d.querySelectorAll("script"),j=[],H,W,X=0,G=z.length;X<G;X++)W=z[X].getAttribute("type"),(!W||W==="application/ecmascript"||W==="application/javascript"||W==="text/javascript")&&(H=z[X].innerText||z[X].textContent,H&&j.push(H),d.removeChild(z[X]));if(j.length>0&&(n==="always"||n==="once"&&!TI[c])){for(var ie=0,F=j.length;ie<F;ie++)new Function(j[ie])(window);TI[c]=!0}var Y=d.querySelectorAll("style");if(Array.prototype.forEach.call(Y,function(q){q.textContent+=""}),d.setAttribute("xmlns",Kie),d.setAttribute("xmlns:xlink",d2),o(d),!e.parentNode){Fs.splice(Fs.indexOf(e),1),e=null,a(new Error("Parent node is null"));return}e.parentNode.replaceChild(d,e),Fs.splice(Fs.indexOf(e),1),e=null,a(null,d)})},Yie=function(e,n){var r=n===void 0?{}:n,i=r.afterAll,s=i===void 0?function(){}:i,o=r.afterEach,a=o===void 0?function(){}:o,c=r.beforeEach,h=c===void 0?function(){}:c,f=r.cacheRequests,d=f===void 0?!0:f,m=r.evalScripts,y=m===void 0?"never":m,v=r.httpRequestWithCredentials,w=v===void 0?!1:v,_=r.renumerateIRIElements,S=_===void 0?!0:_;if(e&&"length"in e)for(var A=0,k=0,P=e.length;k<P;k++)RI(e[k],y,S,d,w,h,function(M,O){a(M,O),e&&"length"in e&&e.length===++A&&s(A)});else e?RI(e,y,S,d,w,h,function(M,O){a(M,O),s(1),e=null}):s(0)},p2={exports:{}},m2,MI;function Xie(){if(MI)return m2;MI=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return m2=t,m2}var g2,OI;function Jie(){if(OI)return g2;OI=1;var t=Xie();function e(){}function n(){}return n.resetWarningCache=e,g2=function(){function r(o,a,c,h,f,d){if(d!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},g2}var PI;function Qie(){return PI||(PI=1,p2.exports=Jie()()),p2.exports}var Sn=Qie(),Zie=function(e){var n=e?.ownerDocument||document;return n.defaultView||window},ese=function(e,n){for(var r in e)if(!(r in n))return!0;for(var i in n)if(e[i]!==n[i])return!0;return!1},tse=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],uy="http://www.w3.org/2000/svg",DI="http://www.w3.org/1999/xlink",fn=(function(t){function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.initialState={hasError:!1,isLoading:!0},r.state=r.initialState,r._isMounted=!1,r.reactWrapper=void 0,r.nonReactWrapper=void 0,r.refCallback=function(a){r.reactWrapper=a},r}Vie(e,t);var n=e.prototype;return n.renderSVG=function(){var i=this;if(this.reactWrapper instanceof Zie(this.reactWrapper).Node){var s=this.props,o=s.desc,a=s.evalScripts,c=s.httpRequestWithCredentials,h=s.renumerateIRIElements,f=s.src,d=s.title,m=s.useRequestCache,y=this.props.onError,v=this.props.beforeInjection,w=this.props.afterInjection,_=this.props.wrapper,S,A;_==="svg"?(S=document.createElementNS(uy,_),S.setAttribute("xmlns",uy),S.setAttribute("xmlns:xlink",DI),A=document.createElementNS(uy,_)):(S=document.createElement(_),A=document.createElement(_)),S.appendChild(A),A.dataset.src=f,this.nonReactWrapper=this.reactWrapper.appendChild(S);var k=function(L){if(i.removeSVG(),!i._isMounted){y(L);return}i.setState(function(){return{hasError:!0,isLoading:!1}},function(){y(L)})},P=function(L,N){if(L){k(L);return}i._isMounted&&i.setState(function(){return{isLoading:!1}},function(){try{w(N)}catch(z){k(z)}})},M=function(L){if(L.setAttribute("role","img"),o){var N=L.querySelector(":scope > desc");N&&L.removeChild(N);var z=document.createElement("desc");z.innerHTML=o,L.prepend(z)}if(d){var j=L.querySelector(":scope > title");j&&L.removeChild(j);var H=document.createElement("title");H.innerHTML=d,L.prepend(H)}try{v(L)}catch(W){k(W)}};Yie(A,{afterEach:P,beforeEach:M,cacheRequests:m,evalScripts:a,httpRequestWithCredentials:c,renumerateIRIElements:h})}},n.removeSVG=function(){var i;(i=this.nonReactWrapper)!=null&&i.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},n.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},n.componentDidUpdate=function(i){var s=this;ese(Wp({},i),this.props)&&this.setState(function(){return s.initialState},function(){s.removeSVG(),s.renderSVG()})},n.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},n.render=function(){var i=this.props;i.afterInjection,i.beforeInjection,i.desc,i.evalScripts;var s=i.fallback;i.httpRequestWithCredentials;var o=i.loading;i.renumerateIRIElements,i.src,i.title,i.useRequestCache;var a=i.wrapper,c=Yj(i,tse),h=a;return E.createElement(h,Wp({},c,{ref:this.refCallback},a==="svg"?{xmlns:uy,xmlnsXlink:DI}:{}),this.state.isLoading&&o&&E.createElement(o,null),this.state.hasError&&s&&E.createElement(s,null))},e})(E.Component);fn.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"};fn.propTypes={afterInjection:Sn.func,beforeInjection:Sn.func,desc:Sn.string,evalScripts:Sn.oneOf(["always","once","never"]),fallback:Sn.oneOfType([Sn.func,Sn.object,Sn.string]),httpRequestWithCredentials:Sn.bool,loading:Sn.oneOfType([Sn.func,Sn.object,Sn.string]),onError:Sn.func,renumerateIRIElements:Sn.bool,src:Sn.string.isRequired,title:Sn.string,useRequestCache:Sn.bool,wrapper:Sn.oneOf(["div","span","svg"])};const Ft=({iconName:t,size:e,color:n,isStroke:r,isTransform:i,isActive:s,className:o,insideElement:a,disableHover:c,...h})=>C.jsx("button",{className:Ye("border-none cursor-pointer rounded-[4px] cursor-pointer bg-none p-0 m-0 ","flex items-center justify-center ",c?void 0:a?"hover:enabled:bg-[var(--icon-button-hover-on-active-background-color)]":"hover:enabled:bg-[var(--icon-button-hover-background-color)]",c?void 0:"active:enabled:bg-[var(--icon-button-pressed-background-color)]","disabled:cursor-not-allowed disabled:opacity-[0.5]","outline-none focus:outline-none focus-visible:outline-none",`${o}`),style:{width:`${e}px`,height:`${e}px`,...s&&{backgroundColor:"var(--icon-button-pressed-background-color)"}},...h,children:C.jsx(fn,{src:t,className:`flex items-center justify-center ${i?"rotate-90":""}`,beforeInjection:f=>{f.querySelectorAll("path").forEach(m=>{r?m.setAttribute("stroke",n??"var(--icon-button-color)"):m.setAttribute("fill",n??"var(--icon-button-color)")})}})});var OC=["Enter"," "],nse=["ArrowDown","PageUp","Home"],N$=["ArrowUp","PageDown","End"],rse=[...nse,...N$],ise={ltr:[...OC,"ArrowRight"],rtl:[...OC,"ArrowLeft"]},sse={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jm="Menu",[Xp,ose,ase]=g$(jm),[Pc,B$]=ra(jm,[ase,vx,Lx]),Nx=vx(),j$=Lx(),[lse,Dc]=Pc(jm),[cse,$m]=Pc(jm),$$=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Nx(e),[c,h]=E.useState(null),f=E.useRef(!1),d=Ir(s),m=AE(i);return E.useEffect(()=>{const y=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),C.jsx(Rj,{...a,children:C.jsx(lse,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:h,children:C.jsx(cse,{scope:e,onClose:E.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};$$.displayName=jm;var use="MenuAnchor",RE=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Nx(n);return C.jsx(Mj,{...i,...r,ref:e})});RE.displayName=use;var ME="MenuPortal",[hse,V$]=Pc(ME,{forceMount:void 0}),F$=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=Dc(ME,e);return C.jsx(hse,{scope:e,forceMount:n,children:C.jsx(ks,{present:n||s.open,children:C.jsx(xx,{asChild:!0,container:i,children:r})})})};F$.displayName=ME;var Xi="MenuContent",[fse,OE]=Pc(Xi),z$=E.forwardRef((t,e)=>{const n=V$(Xi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Dc(Xi,t.__scopeMenu),o=$m(Xi,t.__scopeMenu);return C.jsx(Xp.Provider,{scope:t.__scopeMenu,children:C.jsx(ks,{present:r||s.open,children:C.jsx(Xp.Slot,{scope:t.__scopeMenu,children:o.modal?C.jsx(dse,{...i,ref:e}):C.jsx(pse,{...i,ref:e})})})})}),dse=E.forwardRef((t,e)=>{const n=Dc(Xi,t.__scopeMenu),r=E.useRef(null),i=Bt(e,r);return E.useEffect(()=>{const s=r.current;if(s)return Lj(s)},[]),C.jsx(PE,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ie(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pse=E.forwardRef((t,e)=>{const n=Dc(Xi,t.__scopeMenu);return C.jsx(PE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),mse=Eh("MenuContent.ScrollLock"),PE=E.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:m,onDismiss:y,disableOutsideScroll:v,...w}=t,_=Dc(Xi,n),S=$m(Xi,n),A=Nx(n),k=j$(n),P=ose(n),[M,O]=E.useState(null),L=E.useRef(null),N=Bt(e,L,_.onContentChange),z=E.useRef(0),j=E.useRef(""),H=E.useRef(0),W=E.useRef(null),X=E.useRef("right"),G=E.useRef(0),ie=v?Lk:E.Fragment,F=v?{as:mse,allowPinchZoom:!0}:void 0,Y=se=>{const T=j.current+se,Z=P().filter(ke=>!ke.disabled),ue=document.activeElement,I=Z.find(ke=>ke.ref.current===ue)?.textValue,pe=Z.map(ke=>ke.textValue),Ee=Ese(pe,T,I),ye=Z.find(ke=>ke.textValue===Ee)?.ref.current;(function ke(ze){j.current=ze,window.clearTimeout(z.current),ze!==""&&(z.current=window.setTimeout(()=>ke(""),1e3))})(T),ye&&setTimeout(()=>ye.focus())};E.useEffect(()=>()=>window.clearTimeout(z.current),[]),sj();const q=E.useCallback(se=>X.current===W.current?.side&&Rse(se,W.current?.area),[]);return C.jsx(fse,{scope:n,searchRef:j,onItemEnter:E.useCallback(se=>{q(se)&&se.preventDefault()},[q]),onItemLeave:E.useCallback(se=>{q(se)||(L.current?.focus(),O(null))},[q]),onTriggerLeave:E.useCallback(se=>{q(se)&&se.preventDefault()},[q]),pointerGraceTimerRef:H,onPointerGraceIntentChange:E.useCallback(se=>{W.current=se},[]),children:C.jsx(ie,{...F,children:C.jsx(Ak,{asChild:!0,trapped:i,onMountAutoFocus:Ie(s,se=>{se.preventDefault(),L.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:C.jsx(px,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:m,onDismiss:y,children:C.jsx(S$,{asChild:!0,...k,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:O,onEntryFocus:Ie(c,se=>{S.isUsingKeyboardRef.current||se.preventDefault()}),preventScrollOnEntryFocus:!0,children:C.jsx(Oj,{role:"menu","aria-orientation":"vertical","data-state":iV(_.open),"data-radix-menu-content":"",dir:S.dir,...A,...w,ref:N,style:{outline:"none",...w.style},onKeyDown:Ie(w.onKeyDown,se=>{const Z=se.target.closest("[data-radix-menu-content]")===se.currentTarget,ue=se.ctrlKey||se.altKey||se.metaKey,I=se.key.length===1;Z&&(se.key==="Tab"&&se.preventDefault(),!ue&&I&&Y(se.key));const pe=L.current;if(se.target!==pe||!rse.includes(se.key))return;se.preventDefault();const ye=P().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);N$.includes(se.key)&&ye.reverse(),Ase(ye)}),onBlur:Ie(t.onBlur,se=>{se.currentTarget.contains(se.target)||(window.clearTimeout(z.current),j.current="")}),onPointerMove:Ie(t.onPointerMove,Jp(se=>{const T=se.target,Z=G.current!==se.clientX;if(se.currentTarget.contains(T)&&Z){const ue=se.clientX>G.current?"right":"left";X.current=ue,G.current=se.clientX}}))})})})})})})});z$.displayName=Xi;var gse="MenuGroup",DE=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(st.div,{role:"group",...r,ref:e})});DE.displayName=gse;var yse="MenuLabel",U$=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(st.div,{...r,ref:e})});U$.displayName=yse;var ov="MenuItem",LI="menu.itemSelect",Bx=E.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=E.useRef(null),o=$m(ov,t.__scopeMenu),a=OE(ov,t.__scopeMenu),c=Bt(e,s),h=E.useRef(!1),f=()=>{const d=s.current;if(!n&&d){const m=new CustomEvent(LI,{bubbles:!0,cancelable:!0});d.addEventListener(LI,y=>r?.(y),{once:!0}),QB(d,m),m.defaultPrevented?h.current=!1:o.onClose()}};return C.jsx(H$,{...i,ref:c,disabled:n,onClick:Ie(t.onClick,f),onPointerDown:d=>{t.onPointerDown?.(d),h.current=!0},onPointerUp:Ie(t.onPointerUp,d=>{h.current||d.currentTarget?.click()}),onKeyDown:Ie(t.onKeyDown,d=>{const m=a.searchRef.current!=="";n||m&&d.key===" "||OC.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Bx.displayName=ov;var H$=E.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=OE(ov,n),a=j$(n),c=E.useRef(null),h=Bt(e,c),[f,d]=E.useState(!1),[m,y]=E.useState("");return E.useEffect(()=>{const v=c.current;v&&y((v.textContent??"").trim())},[s.children]),C.jsx(Xp.ItemSlot,{scope:n,disabled:r,textValue:i??m,children:C.jsx(_$,{asChild:!0,...a,focusable:!r,children:C.jsx(st.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:h,onPointerMove:Ie(t.onPointerMove,Jp(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(t.onPointerLeave,Jp(v=>o.onItemLeave(v))),onFocus:Ie(t.onFocus,()=>d(!0)),onBlur:Ie(t.onBlur,()=>d(!1))})})})}),bse="MenuCheckboxItem",q$=E.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return C.jsx(X$,{scope:t.__scopeMenu,checked:n,children:C.jsx(Bx,{role:"menuitemcheckbox","aria-checked":av(n)?"mixed":n,...i,ref:e,"data-state":IE(n),onSelect:Ie(i.onSelect,()=>r?.(av(n)?!0:!n),{checkForDefaultPrevented:!1})})})});q$.displayName=bse;var W$="MenuRadioGroup",[vse,xse]=Pc(W$,{value:void 0,onValueChange:()=>{}}),G$=E.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Ir(r);return C.jsx(vse,{scope:t.__scopeMenu,value:n,onValueChange:s,children:C.jsx(DE,{...i,ref:e})})});G$.displayName=W$;var K$="MenuRadioItem",Y$=E.forwardRef((t,e)=>{const{value:n,...r}=t,i=xse(K$,t.__scopeMenu),s=n===i.value;return C.jsx(X$,{scope:t.__scopeMenu,checked:s,children:C.jsx(Bx,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":IE(s),onSelect:Ie(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Y$.displayName=K$;var LE="MenuItemIndicator",[X$,wse]=Pc(LE,{checked:!1}),J$=E.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=wse(LE,n);return C.jsx(ks,{present:r||av(s.checked)||s.checked===!0,children:C.jsx(st.span,{...i,ref:e,"data-state":IE(s.checked)})})});J$.displayName=LE;var Sse="MenuSeparator",Q$=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Q$.displayName=Sse;var _se="MenuArrow",Z$=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Nx(n);return C.jsx(Pj,{...i,...r,ref:e})});Z$.displayName=_se;var Cse="MenuSub",[GOe,eV]=Pc(Cse),ap="MenuSubTrigger",tV=E.forwardRef((t,e)=>{const n=Dc(ap,t.__scopeMenu),r=$m(ap,t.__scopeMenu),i=eV(ap,t.__scopeMenu),s=OE(ap,t.__scopeMenu),o=E.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,h={__scopeMenu:t.__scopeMenu},f=E.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return E.useEffect(()=>f,[f]),E.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),C.jsx(RE,{asChild:!0,...h,children:C.jsx(H$,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":iV(n.open),...t,ref:dx(e,i.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ie(t.onPointerMove,Jp(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ie(t.onPointerLeave,Jp(d=>{f();const m=n.content?.getBoundingClientRect();if(m){const y=n.content?.dataset.side,v=y==="right",w=v?-5:5,_=m[v?"left":"right"],S=m[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+w,y:d.clientY},{x:_,y:m.top},{x:S,y:m.top},{x:S,y:m.bottom},{x:_,y:m.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(t.onKeyDown,d=>{const m=s.searchRef.current!=="";t.disabled||m&&d.key===" "||ise[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});tV.displayName=ap;var nV="MenuSubContent",rV=E.forwardRef((t,e)=>{const n=V$(Xi,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=Dc(Xi,t.__scopeMenu),o=$m(Xi,t.__scopeMenu),a=eV(nV,t.__scopeMenu),c=E.useRef(null),h=Bt(e,c);return C.jsx(Xp.Provider,{scope:t.__scopeMenu,children:C.jsx(ks,{present:r||s.open,children:C.jsx(Xp.Slot,{scope:t.__scopeMenu,children:C.jsx(PE,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{o.isUsingKeyboardRef.current&&c.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ie(t.onFocusOutside,f=>{f.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ie(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ie(t.onKeyDown,f=>{const d=f.currentTarget.contains(f.target),m=sse[o.dir].includes(f.key);d&&m&&(s.onOpenChange(!1),a.trigger?.focus(),f.preventDefault())})})})})})});rV.displayName=nV;function iV(t){return t?"open":"closed"}function av(t){return t==="indeterminate"}function IE(t){return av(t)?"indeterminate":t?"checked":"unchecked"}function Ase(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function kse(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Ese(t,e,n){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=kse(t,Math.max(s,0));i.length===1&&(o=o.filter(h=>h!==n));const c=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function Tse(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],h=a.x,f=a.y,d=c.x,m=c.y;f>r!=m>r&&n<(d-h)*(r-f)/(m-f)+h&&(i=!i)}return i}function Rse(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Tse(n,e)}function Jp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Mse=$$,Ose=RE,Pse=F$,Dse=z$,Lse=DE,Ise=U$,Nse=Bx,Bse=q$,jse=G$,$se=Y$,Vse=J$,Fse=Q$,zse=Z$,Use=tV,Hse=rV,jx="DropdownMenu",[qse]=ra(jx,[B$]),Nr=B$(),[Wse,sV]=qse(jx),oV=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=Nr(e),h=E.useRef(null),[f,d]=Hh({prop:i,defaultProp:s??!1,onChange:o,caller:jx});return C.jsx(Wse,{scope:e,triggerId:ol(),triggerRef:h,contentId:ol(),open:f,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(m=>!m),[d]),modal:a,children:C.jsx(Mse,{...c,open:f,onOpenChange:d,dir:r,modal:a,children:n})})};oV.displayName=jx;var aV="DropdownMenuTrigger",lV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=sV(aV,n),o=Nr(n);return C.jsx(Ose,{asChild:!0,...o,children:C.jsx(st.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:dx(e,s.triggerRef),onPointerDown:Ie(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Ie(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});lV.displayName=aV;var Gse="DropdownMenuPortal",cV=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Nr(e);return C.jsx(Pse,{...r,...n})};cV.displayName=Gse;var uV="DropdownMenuContent",hV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=sV(uV,n),s=Nr(n),o=E.useRef(!1);return C.jsx(Dse,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Ie(t.onCloseAutoFocus,a=>{o.current||i.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Ie(t.onInteractOutside,a=>{const c=a.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0,f=c.button===2||h;(!i.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hV.displayName=uV;var Kse="DropdownMenuGroup",Yse=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Lse,{...i,...r,ref:e})});Yse.displayName=Kse;var Xse="DropdownMenuLabel",Jse=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Ise,{...i,...r,ref:e})});Jse.displayName=Xse;var Qse="DropdownMenuItem",fV=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Nse,{...i,...r,ref:e})});fV.displayName=Qse;var Zse="DropdownMenuCheckboxItem",eoe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Bse,{...i,...r,ref:e})});eoe.displayName=Zse;var toe="DropdownMenuRadioGroup",noe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(jse,{...i,...r,ref:e})});noe.displayName=toe;var roe="DropdownMenuRadioItem",ioe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx($se,{...i,...r,ref:e})});ioe.displayName=roe;var soe="DropdownMenuItemIndicator",ooe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Vse,{...i,...r,ref:e})});ooe.displayName=soe;var aoe="DropdownMenuSeparator",loe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Fse,{...i,...r,ref:e})});loe.displayName=aoe;var coe="DropdownMenuArrow",uoe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(zse,{...i,...r,ref:e})});uoe.displayName=coe;var hoe="DropdownMenuSubTrigger",foe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Use,{...i,...r,ref:e})});foe.displayName=hoe;var doe="DropdownMenuSubContent",poe=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Nr(n);return C.jsx(Hse,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});poe.displayName=doe;var moe=oV,goe=lV,yoe=cV,boe=hV,voe=fV;const NE="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.5%209.5L7.5%206.5L4.5%203.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Rh="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5%208.5L10.5%2015.5L7.5%2012.5'%20stroke='%23444444'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function xoe(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var $x="Switch",[woe]=ra($x),[Soe,_oe]=woe($x),dV=E.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c="on",onCheckedChange:h,form:f,...d}=t,[m,y]=E.useState(null),v=Bt(e,k=>y(k)),w=E.useRef(!1),_=m?f||!!m.closest("form"):!0,[S,A]=Hh({prop:i,defaultProp:s??!1,onChange:h,caller:$x});return C.jsxs(Soe,{scope:n,checked:S,disabled:a,children:[C.jsx(st.button,{type:"button",role:"switch","aria-checked":S,"aria-required":o,"data-state":yV(S),"data-disabled":a?"":void 0,disabled:a,value:c,...d,ref:v,onClick:Ie(t.onClick,k=>{A(P=>!P),_&&(w.current=k.isPropagationStopped(),w.current||k.stopPropagation())})}),_&&C.jsx(gV,{control:m,bubbles:!w.current,name:r,value:c,checked:S,required:o,disabled:a,form:f,style:{transform:"translateX(-100%)"}})]})});dV.displayName=$x;var pV="SwitchThumb",mV=E.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=_oe(pV,n);return C.jsx(st.span,{"data-state":yV(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});mV.displayName=pV;var Coe="SwitchBubbleInput",gV=E.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=E.useRef(null),a=Bt(o,s),c=xoe(n),h=vj(e);return E.useEffect(()=>{const f=o.current;if(!f)return;const d=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==n&&y){const v=new Event("click",{bubbles:r});y.call(f,n),f.dispatchEvent(v)}},[c,n,r]),C.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});gV.displayName=Coe;function yV(t){return t?"checked":"unchecked"}var Aoe=dV,koe=mV;const bV=({checked:t,onCheckedChange:e,disabled:n=!1,size:r="small",label:i,id:s,className:o})=>{const a={small:"w-[24px] h-[14px]",medium:"w-[42px] h-[24px]",large:"w-[52px] h-[30px]"},c={small:"w-[10px] h-[10px] translate-x-[1px] data-[state=checked]:translate-x-[10px]",medium:"w-[20px] h-[20px] translate-x-[2px] data-[state=checked]:translate-x-[20px]",large:"w-[26px] h-[26px] translate-x-[2px] data-[state=checked]:translate-x-[24px]"};return C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx(Aoe,{id:s,checked:t,onCheckedChange:e,disabled:n,className:Ye("relative inline-flex align-center shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out","focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50","bg-[var(--toggle-button-off-backround-color)] data-[state=checked]:bg-[var(--toggle-button-backround-color)]",a[r],o),children:C.jsx(koe,{className:Ye("pointer-events-none inline-block rounded-full bg-[var(--toggle-button-circle-color)] ring-0 transition-transform duration-200 ease-in-out",c[r])})}),i&&C.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700 cursor-pointer",children:i})]})},Eoe=({text:t,icon:e,iconSize:n=16,iconColor:r,onClick:i,isActive:s,isSeparator:o,withToggle:a,toggleChecked:c,onToggleChange:h,subMenu:f,checked:d})=>{const[m,y]=E.useState(!1),v=E.useRef(null),w=E.useRef(null);if(o)return C.jsx("div",{className:"h-px min-h-[1px] w-full bg-[var(--drop-down-menu-separator-color)] my-[4px] flex-shrink-0"});const _=P=>{if(a){P.stopPropagation(),P.preventDefault();return}i(P)},S=P=>{P.stopPropagation(),P.preventDefault(),h?.(!c)},A=P=>{if(!v.current||!w.current)return;const M=P.clientX,O=P.clientY,L=v.current.getBoundingClientRect(),N=w.current?.getBoundingClientRect(),z=M>=L.left&&M<=L.right&&O>=L.top&&O<=L.bottom,j=N&&M>=N.left&&M<=N.right&&O>=N.top&&O<=N.bottom;!z&&!j&&(y(!1),window.removeEventListener("mousemove",A))},k=()=>{m||!f||(y(!0),window.addEventListener("mousemove",A))};return C.jsxs(voe,{className:Ye("dropdown-menu-item","flex items-center justify-between gap-[16px] min-w-0 w-full max-w-full min-h-[32px] h-[32px] px-[12px] select-none cursor-pointer","outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0 focus-visible:ring-0 border-0","hover:bg-[var(--drop-down-menu-item-hover-color)] hover:text-[var(--drop-down-menu-item-hover-color)]","data-[disabled]:opacity-50 data-[disabled]:pointer-events-none",s||f&&m?"bg-[var(--drop-down-menu-item-active-color)] text-[var(--drop-down-menu-item-active-color)]":""),onSelect:a?P=>P.preventDefault():_,onClick:a?S:void 0,onMouseEnter:k,ref:v,children:[C.jsxs("div",{className:"flex items-center gap-[8px]",children:[e&&typeof e=="string"?C.jsx(Ft,{iconName:e,size:n,color:r,disableHover:!0}):e??null,C.jsx("span",{className:"flex-1 basis-0 min-w-0 truncate font-normal text-[14px] leading-[20px] text-[var(--drop-down-menu-item-color)]",children:t})]}),f?C.jsx(Lc,{trigger:C.jsx(Ft,{iconName:NE,size:12,insideElement:!0,isStroke:!0}),items:f,side:"right",align:"start",sideOffset:0,open:m,contentClassName:"ms-[12px] mt-[-15px]",containerRef:v.current,dropdownRef:w}):null,d?C.jsx(fn,{src:Rh}):null,a&&h?C.jsx("div",{onClick:P=>P.stopPropagation(),children:C.jsx(bV,{checked:c??!1,onCheckedChange:h,size:"small"})}):null]})},Lc=({trigger:t,items:e,side:n,align:r,sideOffset:i,contentClassName:s,maxWidth:o,matchTriggerWidth:a,open:c,containerRef:h,dropdownRef:f,onOpenChange:d})=>{const m=document.getElementById("app");return C.jsxs(moe,{open:c,onOpenChange:d,children:[C.jsx(goe,{asChild:!0,children:t}),C.jsx(yoe,{container:h??m,children:C.jsx(boe,{ref:f,side:n??"bottom",align:r??"start",sideOffset:i??6,"data-side":n,"data-align":r,"data-orientation":"vertical",className:Ye("dropdown-menu z-50 border border-[var(--drop-down-menu-border-color)] rounded-[8px] shadow-[var(--drop-down-menu-shadow)] bg-[var(--drop-down-menu-background-color)] py-[8px] max-h-56 overflow-y-auto flex flex-col gap-[4px]",a?"w-[var(--radix-dropdown-menu-trigger-width)]":"w-fit",s),style:o?{maxWidth:o}:void 0,children:e.map((y,v)=>C.jsx(Eoe,{...y},y.id||y.text||`item-${v}`))})})]})};var Vx="Dialog",[vV]=ra(Vx),[Toe,Es]=vV(Vx),xV=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=E.useRef(null),c=E.useRef(null),[h,f]=Hh({prop:r,defaultProp:i??!1,onChange:s,caller:Vx});return C.jsx(Toe,{scope:e,triggerRef:a,contentRef:c,contentId:ol(),titleId:ol(),descriptionId:ol(),open:h,onOpenChange:f,onOpenToggle:E.useCallback(()=>f(d=>!d),[f]),modal:o,children:n})};xV.displayName=Vx;var wV="DialogTrigger",Roe=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Es(wV,n),s=Bt(e,i.triggerRef);return C.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":$E(i.open),...r,ref:s,onClick:Ie(t.onClick,i.onOpenToggle)})});Roe.displayName=wV;var BE="DialogPortal",[Moe,SV]=vV(BE,{forceMount:void 0}),_V=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Es(BE,e);return C.jsx(Moe,{scope:e,forceMount:n,children:E.Children.map(r,o=>C.jsx(ks,{present:n||s.open,children:C.jsx(xx,{asChild:!0,container:i,children:o})}))})};_V.displayName=BE;var lv="DialogOverlay",CV=E.forwardRef((t,e)=>{const n=SV(lv,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Es(lv,t.__scopeDialog);return s.modal?C.jsx(ks,{present:r||s.open,children:C.jsx(Poe,{...i,ref:e})}):null});CV.displayName=lv;var Ooe=Eh("DialogOverlay.RemoveScroll"),Poe=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Es(lv,n);return C.jsx(Lk,{as:Ooe,allowPinchZoom:!0,shards:[i.contentRef],children:C.jsx(st.div,{"data-state":$E(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),_c="DialogContent",AV=E.forwardRef((t,e)=>{const n=SV(_c,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Es(_c,t.__scopeDialog);return C.jsx(ks,{present:r||s.open,children:s.modal?C.jsx(Doe,{...i,ref:e}):C.jsx(Loe,{...i,ref:e})})});AV.displayName=_c;var Doe=E.forwardRef((t,e)=>{const n=Es(_c,t.__scopeDialog),r=E.useRef(null),i=Bt(e,n.contentRef,r);return E.useEffect(()=>{const s=r.current;if(s)return Lj(s)},[]),C.jsx(kV,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ie(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ie(t.onFocusOutside,s=>s.preventDefault())})}),Loe=E.forwardRef((t,e)=>{const n=Es(_c,t.__scopeDialog),r=E.useRef(!1),i=E.useRef(!1);return C.jsx(kV,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),kV=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Es(_c,n),c=E.useRef(null),h=Bt(e,c);return sj(),C.jsxs(C.Fragment,{children:[C.jsx(Ak,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:C.jsx(px,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":$E(a.open),...o,ref:h,onDismiss:()=>a.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(Noe,{titleId:a.titleId}),C.jsx(joe,{contentRef:c,descriptionId:a.descriptionId})]})]})}),jE="DialogTitle",EV=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Es(jE,n);return C.jsx(st.h2,{id:i.titleId,...r,ref:e})});EV.displayName=jE;var TV="DialogDescription",RV=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Es(TV,n);return C.jsx(st.p,{id:i.descriptionId,...r,ref:e})});RV.displayName=TV;var MV="DialogClose",Ioe=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Es(MV,n);return C.jsx(st.button,{type:"button",...r,ref:e,onClick:Ie(t.onClick,()=>i.onOpenChange(!1))})});Ioe.displayName=MV;function $E(t){return t?"open":"closed"}var OV="DialogTitleWarning",[KOe,PV]=$X(OV,{contentName:_c,titleName:jE,docsSlug:"dialog"}),Noe=({titleId:t})=>{const e=PV(OV),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Boe="DialogDescriptionWarning",joe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PV(Boe).contentName}}.`;return E.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},$oe=xV,Voe=_V,Foe=CV,zoe=AV,Uoe=EV,Hoe=RV;const Ic=({...t})=>C.jsx($oe,{"data-slot":"dialog",...t}),qoe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.1475%206.14844C17.3428%205.95347%2017.6593%205.95325%2017.8545%206.14844C18.0495%206.34361%2018.0494%206.66023%2017.8545%206.85547L12.707%2012.001L17.8545%2017.1465C18.0495%2017.3417%2018.0494%2017.6583%2017.8545%2017.8535C17.6593%2018.0488%2017.3428%2018.0486%2017.1475%2017.8535L12%2012.708L6.85352%2017.8535C6.65826%2018.0487%206.34173%2018.0487%206.14648%2017.8535C5.95128%2017.6583%205.95129%2017.3417%206.14648%2017.1465L11.293%2012.001L6.14648%206.85645C5.9512%206.66121%205.95125%206.34372%206.14648%206.14844C6.34167%205.95358%206.65832%205.95357%206.85352%206.14844L12%2011.2939L17.1475%206.14844Z'%20fill='%23383838'/%3e%3c/svg%3e",Woe="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.62623%2016.5952L9.18302%203.47138C9.54492%202.84288%2010.4551%202.84287%2010.817%203.47138L18.3738%2016.5952C18.7339%2017.2206%2018.2806%2018%2017.5568%2018H2.44321C1.7194%2018%201.26612%2017.2206%201.62623%2016.5952Z'%20fill='%23FFD112'/%3e%3cpath%20d='M11%2014.5V16.5H9V14.5H11ZM11%207V10L10.5%2013.5H9.5L9%2010V7H11Z'%20fill='black'%20fill-opacity='0.8'/%3e%3c/svg%3e",Goe=({...t})=>C.jsx(Voe,{"data-slot":"dialog-portal",container:document.getElementById("app"),...t}),Koe=({className:t,...e})=>C.jsx(Foe,{"data-slot":"dialog-overlay",className:Ye("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-[var(--modal-dialog-overlay-background)]",t),...e}),Yoe=({className:t,withWarningIcon:e,...n})=>C.jsx(Uoe,{"data-slot":"dialog-title",className:Ye("font-bold text-[var(--modal-dialog-header-color)] select-none",t,e?"text-[14px] leading-[20px]":"text-[18px] leading-[24px]"),...n}),Xoe=()=>C.jsx(C.Fragment,{children:C.jsx(Hoe,{className:"hidden",children:"Dialog content"})}),Joe="w-[348px]",Qoe="w-[548px]",Zoe=" box-border h-fit-content fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 rounded-[8px]",eae="w-[352px] box-border h-fit-content fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 rounded-[8px]",tae="bg-[var(--modal-dialog-background-color)]  shadow-[var(--modal-dialog-shadows)]",Nc=({className:t,children:e,header:n,onClose:r,isHuge:i=!1,withWarningIcon:s=!1,...o})=>{const a=i?Qoe:Joe,c=s?eae:Zoe;return xe.useEffect(()=>{const h=f=>{f.key==="Escape"&&r()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[r]),C.jsxs(Goe,{"data-slot":"dialog-portal",children:[C.jsx(Koe,{}),C.jsxs(zoe,{id:"dialog-content","data-slot":"dialog-content",className:Ye(a,c,tae,"flex flex-col",t),onInteractOutside:h=>h.preventDefault(),...o,children:[C.jsx(Xoe,{}),C.jsxs("div",{className:Ye("flex items-center justify-between align-center",s?"h-[40px]":"h-[56px]",s?"ps-[16px] pe-[8px]":"ps-[32px] pe-[16px]"),children:[C.jsxs("div",{className:"flex items-center gap-[4px]",children:[s?C.jsx(fn,{src:Woe}):null,C.jsx(Yoe,{withWarningIcon:s,children:n})]}),C.jsx(Ft,{iconName:qoe,size:24,color:"var(--modal-dialog-close-color)",onClick:r})]}),C.jsx("div",{className:Ye("flex-1 min-h-0",s?"px-[16px]":"px-[32px]"),children:e})]})]})},to=({children:t,header:e,error:n})=>C.jsxs("div",{className:"flex flex-col gap-[4px]",children:[C.jsx("p",{className:"select-none text-[14px] leading-[20px] text-[var(--field-container-header-color)]",children:e}),t,n&&C.jsx("p",{className:"text-[var(--field-container-error-color)]",children:n})]}),DV="data:image/svg+xml,%3csvg%20width='8'%20height='8'%20viewBox='0%200%208%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.5%203.66699L4.5%205.66699L6.5%203.66699'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Fx=({placeholder:t,value:e,className:n,isError:r,withoutBg:i,items:s})=>{const[o,a]=xe.useState(!1),c=xe.useRef(null);return C.jsx(Lc,{onOpenChange:h=>a(h),trigger:C.jsxs("div",{ref:c,className:Ye("h-[32px] rounded-[4px] ps-[12px] pe-[12px] box-border","cursor-pointer flex items-center justify-between","text-[var(--input-color)] text-[14px] leading-[16px]",o?"border bg-[var(--input-background-color)] border-[var(--input-active-border-color)]":i?"hover:bg-[var(--input-hover-background-color)] hover:border-[var(--input-hover-border-color)]":"border bg-[var(--input-background-color)] border-[var(--input-border-color)] hover:bg-[var(--input-hover-background-color)] hover:border-[var(--input-hover-border-color)]",n,s.length===0?"cursor-not-allowed pointer-events-none opacity-50":""),style:{borderColor:r?"var(--border-error)":void 0},children:[C.jsx("span",{className:Ye(e?"text-[var(--input-color)]":"text-[var(--input-placeholder-color)]"),children:e||t}),C.jsx(fn,{src:DV,className:Ye("w-[15px] h-[24px] flex items-center justify-center transition-transform",o?"rotate-180":"")})]}),align:"start",side:"bottom",containerRef:c.current,matchTriggerWidth:!0,items:s})},oo=xe.forwardRef(({className:t,isError:e,icon:n,iconColor:r,...i},s)=>C.jsxs("div",{className:`relative ${t}`,children:[n&&C.jsx(fn,{className:"absolute left-[10px] top-[50%] translate-y-[-50%] w-[20px] h-[20px] flex items-center justify-center",src:n,beforeInjection:o=>{const a=o.querySelector("path");a&&a.setAttribute("stroke",r||"var(--input-color)")}}),C.jsx("input",{ref:s,type:i.type??"text",className:Ye("h-[32px] rounded-[4px] pe-[2px] box-border border border-[var(--input-border-color)]","bg-[var(--input-background-color)]",i.disabled?"":"hover:bg-[var(--input-hover-background-color)] hover:border-[var(--input-hover-border-color)]","focus:bg-[var(--input-active-background-color)] focus:border focus:border-[var(--input-active-border-color)]","outline-none","placeholder:text-[var(--input-placeholder-color)] text-[var(--input-color)]",n?"ps-[40px]":"ps-[12px]",t),style:{border:e?"1px solid var(--input-error-color)":""},value:i.value,...i})]}));oo.displayName="Input";const LV="flex flex-col justify-between h-full",IV="flex flex-col gap-[12px] mb-[32px]",NV="flex flex-row justify-end items-center gap-[8px] h-[64px] border-t-[1px] border-[var(--border-divider)] mx-[-32px] px-[32px]",nae=({name:t,onClose:e})=>{const{t:n}=Mt(),{providers:r,editProvider:i}=ts(),[s,o]=xe.useState(()=>{const S=r.find(A=>A.name===t);return S||{name:"",type:"",icon:"",key:"",baseUrl:""}}),[a,c]=xe.useState({name:s.name,url:s.baseUrl,key:s.key}),[h,f]=xe.useState({key:"",url:"",name:""});xe.useEffect(()=>{const S=r.find(A=>A.name===t);S&&(o(S),c({name:S.name,url:S.baseUrl,key:S.key}))},[r,t]),xe.useEffect(()=>{c({name:s.name,url:s.baseUrl,key:s.key})},[s]);const d=xe.useRef(null),m=S=>{c(A=>({...A,[S.target.name]:S.target.value})),f(A=>({...A,[S.target.name]:""}))},y=async()=>{const S=await i({type:s.type,name:a.name,key:a.key,baseUrl:a.url},s.name);typeof S=="boolean"&&S?e():S&&f(A=>({...A,[S.field]:S.message}))},v=a.name===s.name&&a.url===s.baseUrl,_=a.key===s.key&&v||!!h.key||!!h.url||!!h.name;return C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:n("EditAIProvider"),onClose:e,ref:d,children:C.jsxs("div",{className:LV,children:[C.jsxs("div",{className:IV,children:[C.jsx(to,{header:n("Provider"),children:C.jsx(Fx,{value:s.type,items:[]})}),C.jsx(to,{header:n("Name"),error:h.name,children:C.jsx(oo,{name:"name",onChange:m,value:a.name,isError:!!h.name,placeholder:n("EnterName"),className:"w-full"})}),C.jsx(to,{header:n("URL"),error:h.url,children:C.jsx(oo,{name:"url",onChange:m,value:a.url,isError:!!h.url,placeholder:n("EnterURL"),className:"w-full"})}),C.jsx(to,{header:n("APIKey"),error:h.key,children:C.jsx(oo,{name:"key",onChange:m,value:a.key,isError:!!h.key,placeholder:n("EnterKey"),className:"w-full",type:"password"})})]}),C.jsxs("div",{className:NV,children:[C.jsx(mn,{variant:"default",onClick:e,children:n("Cancel")}),C.jsx(mn,{onClick:y,disabled:_,children:n("Save")})]})]})})})},rae=({name:t,onClose:e})=>{const{providers:n,deleteProvider:r}=ts(),[i,s]=xe.useState(()=>{const c=n.find(h=>h.name===t);return c||{name:"",type:"",icon:"",key:"",baseUrl:""}}),{t:o}=Mt();xe.useEffect(()=>{const c=n.find(h=>h.name===t);c&&s(c)},[n,t]);const a=async()=>{await r(i),e()};return C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:o("Warning"),onClose:e,withWarningIcon:!0,children:C.jsxs("div",{className:"flex flex-col justify-between h-full",children:[C.jsx("p",{className:"select-none h-[40px] flex items-center text-[12px] leading-[16px]",children:o("WantDeleteProvider?")}),C.jsxs("div",{className:"flex flex-row justify-end items-center gap-[8px] h-[48px]",children:[C.jsx(mn,{size:"small",variant:"default",onClick:e,children:o("No")}),C.jsx(mn,{size:"small",onClick:a,children:o("Yes")})]})]})})})},iae=({provider:t})=>{const[e,n]=xe.useState(!1),[r,i]=xe.useState(!1),[s,o]=xe.useState(null),[a,c]=xe.useState(!1),h=xe.useCallback(d=>{o(d)},[]),{t:f}=Mt();return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"flex flex-row justify-between gap-[12px] px-[16px] py-[12px] min-w-[274px] max-w-[312px] flex-1 rounded-[8px] bg-[var(--ai-provider-item-background-color)] shadow-[var(--ai-provider-item-shadow)]",children:[C.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--ai-provider-item-color)] truncate",children:t.name}),C.jsxs("p",{className:"text-[12px] leading-[14px] text-[var(--ai-provider-item-description-color)]",children:[t.type,C.jsx("br",{}),t.baseUrl]})]}),C.jsx("div",{className:"flex items-center justify-end",ref:h,children:C.jsx(Lc,{onOpenChange:c,trigger:C.jsx(Ft,{iconName:EE,color:"var(--ai-provider-item-icon-color)",size:20,isActive:a}),items:[{icon:C.jsx(Ft,{iconName:$ie,size:20,disableHover:!0,isStroke:!0}),text:f("Edit"),onClick:()=>n(!0)},{text:"",onClick:()=>{},isSeparator:!0},{icon:C.jsx(Ft,{iconName:TE,size:20,disableHover:!0}),text:f("Delete"),onClick:()=>i(!0)}],side:"right",align:"start",sideOffset:0,containerRef:s})})]}),e?C.jsx(nae,{name:t.name,onClose:()=>n(!1)}):null,r?C.jsx(rae,{name:t.name,onClose:()=>i(!1)}):null]})},II=$t.getProvidersInfo(),sae=({onClose:t})=>{const{addProvider:e}=ts(),{t:n}=Mt(),[r,i]=xe.useState(II[0]),[s,o]=xe.useState({name:"",url:r.baseUrl,key:""}),[a,c]=xe.useState({key:"",url:"",name:""}),h=xe.useRef(null),f=y=>{o(v=>({...v,[y.target.name]:y.target.value})),c(v=>({...v,[y.target.name]:""}))},d=async()=>{const y=await e({type:r.type,name:s.name,key:s.key,baseUrl:s.url});typeof y=="boolean"&&y?t():y&&c(v=>({...v,[y.field]:y.message}))};xe.useEffect(()=>{o(y=>({...y,url:r.baseUrl}))},[r]);const m=!s.name||!s.url||!!a.key||!!a.url||!!a.name;return C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:n("AIProvider"),onClose:t,ref:h,children:C.jsxs("div",{className:LV,children:[C.jsxs("div",{className:IV,children:[C.jsx(to,{header:n("Provider"),children:C.jsx(Fx,{value:r.name,items:II.map(y=>({text:y.name,id:y.name,onClick:()=>i(y)}))})}),C.jsx(to,{header:n("Name"),error:a.name,children:C.jsx(oo,{name:"name",onChange:f,value:s.name,isError:!!a.name,placeholder:n("EnterName"),className:"w-full"})}),C.jsx(to,{header:n("URL"),error:a.url,children:C.jsx(oo,{name:"url",onChange:f,value:s.url,isError:!!a.url,placeholder:n("EnterURL"),className:"w-full"})}),C.jsx(to,{header:n("APIKey"),error:a.key,children:C.jsx(oo,{name:"key",onChange:f,value:s.key,isError:!!a.key,placeholder:n("EnterKey"),className:"w-full",type:"password"})})]}),C.jsxs("div",{className:NV,children:[C.jsx(mn,{variant:"default",onClick:t,children:n("Cancel")}),C.jsx(mn,{onClick:d,disabled:m,children:n("AddProvider")})]})]})})})},oae=({isActive:t})=>{const[e,n]=xe.useState(!1),{providers:r}=ts(),{t:i}=Mt();return C.jsxs(C.Fragment,{children:[C.jsx(mn,{className:"max-w-[fit-content]",onClick:()=>n(!0),disabled:!t,children:i("AddProvider")}),C.jsx("div",{className:Ye("flex flex-wrap gap-[16px]",t?"":"opacity-70 pointer-events-none"),children:r.map(s=>C.jsx(iae,{provider:s},s.name))}),e?C.jsx(sae,{onClose:()=>n(!1)}):null]})},aae=({isActive:t})=>{const{t:e}=Mt();return C.jsx(mn,{className:"max-w-[fit-content]",disabled:!t,children:e("RegisterConnectWallet")})};let PC=[],BV=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?BV:PC).push(n=n+t[e])})();function lae(t){if(t<768)return!1;for(let e=0,n=PC.length;;){let r=e+n>>1;if(t<PC[r])n=r;else if(t>=BV[r])e=r+1;else return!0;if(e==n)return!1}}function NI(t){return t>=127462&&t<=127487}const BI=8205;function cae(t,e,n=!0,r=!0){return(n?jV:uae)(t,e,r)}function jV(t,e,n){if(e==t.length)return e;e&&$V(t.charCodeAt(e))&&VV(t.charCodeAt(e-1))&&e--;let r=y2(t,e);for(e+=jI(r);e<t.length;){let i=y2(t,e);if(r==BI||i==BI||n&&lae(i))e+=jI(i),r=i;else if(NI(i)){let s=0,o=e-2;for(;o>=0&&NI(y2(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function uae(t,e,n){for(;e>0;){let r=jV(t,e-2,n);if(r<e)return r;e--}return 0}function y2(t,e){let n=t.charCodeAt(e);if(!VV(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return $V(r)?(n-55296<<10)+(r-56320)+65536:n}function $V(t){return t>=56320&&t<57344}function VV(t){return t>=55296&&t<56320}function jI(t){return t<65536?1:2}class dt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Mh(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Js.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Mh(this,e,n);let r=[];return this.decompose(e,n,r,0),Js.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Cp(this),s=new Cp(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Cp(this,e)}iterRange(e,n=this.length){return new FV(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new zV(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?dt.empty:e.length<=32?new nn(e):Js.from(nn.split(e,[]))}}class nn extends dt{constructor(e,n=hae(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new fae(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new nn($I(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=bb(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new nn(a,o.length+s.length));else{let c=a.length>>1;r.push(new nn(a.slice(0,c)),new nn(a.slice(c)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof nn))return super.replace(e,n,r);[e,n]=Mh(this,e,n);let i=bb(this.text,bb(r.text,$I(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new nn(i,s):Js.from(nn.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=Mh(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],c=s+a.length;s>e&&o&&(i+=r),e<c&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=c+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new nn(r,i)),r=[],i=-1);return i>-1&&n.push(new nn(r,i)),n}}class Js extends dt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,c=r+o.lines-1;if((n?c:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=c+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],c=o+a.length;if(e<=c&&n>=o){let h=i&((o<=e?1:0)|(c>=n?2:0));o>=e&&c<=n&&!h?r.push(a):a.decompose(e-o,n-o,r,h)}o=c+1}}replace(e,n,r){if([e,n]=Mh(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let c=o.replace(e-s,n-s,r),h=this.lines-o.lines+c.lines;if(c.lines<h>>4&&c.lines>h>>6){let f=this.children.slice();return f[i]=c,new Js(f,this.length-(n-e)+r.length)}return super.replace(s,a,c)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Mh(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],c=o+a.length;o>e&&s&&(i+=r),e<c&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=c+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Js))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let c=this.children[i],h=e.children[s];if(c!=h)return r+c.scanIdentical(h,n);r+=c.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let y of e)r+=y.lines;if(r<32){let y=[];for(let v of e)v.flatten(y);return new nn(y,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],c=0,h=-1,f=[];function d(y){let v;if(y.lines>s&&y instanceof Js)for(let w of y.children)d(w);else y.lines>o&&(c>o||!c)?(m(),a.push(y)):y instanceof nn&&c&&(v=f[f.length-1])instanceof nn&&y.lines+v.lines<=32?(c+=y.lines,h+=y.length+1,f[f.length-1]=new nn(v.text.concat(y.text),v.length+1+y.length)):(c+y.lines>i&&m(),c+=y.lines,h+=y.length+1,f.push(y))}function m(){c!=0&&(a.push(f.length==1?f[0]:Js.from(f,h)),h=-1,c=f.length=0)}for(let y of e)d(y);return m(),a.length==1?a[0]:new Js(a,n)}}dt.empty=new nn([""],0);function hae(t){let e=-1;for(let n of t)e+=n.length+1;return e}function bb(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],c=i+a.length;c>=n&&(c>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=c+1}return e}function $I(t,e,n){return bb(t,[""],e,n)}class Cp{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof nn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof nn?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof nn){let c=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,c.length>Math.max(0,e))return this.value=e==0?c:n>0?c.slice(e):c.slice(0,c.length-e),this;e-=c.length}else{let c=i.children[o+(n<0?-1:0)];e>c.length?(e-=c.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(c),this.offsets.push(n>0?1:(c instanceof nn?c.text.length:c.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class FV{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new Cp(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class zV{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(dt.prototype[Symbol.iterator]=function(){return this.iter()},Cp.prototype[Symbol.iterator]=FV.prototype[Symbol.iterator]=zV.prototype[Symbol.iterator]=function(){return this});class fae{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function Mh(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Yn(t,e,n=!0,r=!0){return cae(t,e,n,r)}function dae(t){return t>=56320&&t<57344}function pae(t){return t>=55296&&t<56320}function qr(t,e){let n=t.charCodeAt(e);if(!pae(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dae(r)?(n-55296<<10)+(r-56320)+65536:n}function VE(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Qs(t){return t<65536?1:2}const DC=/\r\n?|\n/;var Mr=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(Mr||(Mr={}));class ao{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){LC(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new ao(e)}composeDesc(e){return this.empty?e:e.empty?this:UV(this,e)}mapDesc(e,n=!1){return e.empty?this:IC(this,e,n)}mapPos(e,n=-1,r=Mr.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],c=this.sections[o++],h=i+a;if(c<0){if(h>e)return s+(e-i);s+=a}else{if(r!=Mr.Simple&&h>=e&&(r==Mr.TrackDel&&i<e&&h>e||r==Mr.TrackBefore&&i<e||r==Mr.TrackAfter&&h>e))return null;if(h>e||h==e&&n<0&&!a)return e==i||n<0?s:s+c;s+=c}i=h}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ao(e)}static create(e){return new ao(e)}}class An extends ao{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return LC(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return IC(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let c=i>>1;for(;r.length<c;)r.push(dt.empty);r.push(o?e.slice(s,s+o):dt.empty)}s+=o}return new An(n,r)}compose(e){return this.empty?e:e.empty?this:UV(this,e,!0)}map(e,n=!1){return e.empty?this:IC(this,e,n,!0)}iterChanges(e,n=!1){LC(this,e,n)}get desc(){return ao.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Qp(this);e:for(let o=0,a=0;;){let c=o==e.length?1e9:e[o++];for(;a<c||a==c&&s.len==0;){if(s.done)break e;let f=Math.min(s.len,c-a);fr(i,f,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;fr(n,f,d),d>0&&nl(r,n,s.text),s.forward(f),a+=f}let h=e[o++];for(;a<h;){if(s.done)break e;let f=Math.min(s.len,h-a);fr(n,f,-1),fr(i,f,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(f),a+=f}}return{changes:new An(n,r),filtered:ao.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function c(f=!1){if(!f&&!i.length)return;o<n&&fr(i,n-o,-1);let d=new An(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function h(f){if(Array.isArray(f))for(let d of f)h(d);else if(f instanceof An){if(f.length!=n)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${n})`);c(),a=a?a.compose(f.map(a)):f}else{let{from:d,to:m=d,insert:y}=f;if(d>m||d<0||m>n)throw new RangeError(`Invalid change range ${d} to ${m} (in doc of length ${n})`);let v=y?typeof y=="string"?dt.of(y.split(r||DC)):y:dt.empty,w=v.length;if(d==m&&w==0)return;d<o&&c(),d>o&&fr(i,d-o,-1),fr(i,m-d,w),nl(s,i,v),o=m}}return h(e),c(!a),a}static empty(e){return new An(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(dt.empty);r[i]=dt.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new An(n,r)}static createSet(e,n){return new An(e,n)}}function fr(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function nl(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(dt.empty);t.push(n)}}function LC(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],c=t.sections[o++];if(c<0)i+=a,s+=a;else{let h=i,f=s,d=dt.empty;for(;h+=a,f+=c,c&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],c=t.sections[o++];e(i,h,s,f,d),i=h,s=f}}}function IC(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Qp(t),a=new Qp(e);for(let c=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let h=Math.min(o.len,a.len);fr(i,h,-1),o.forward(h),a.forward(h)}else if(a.ins>=0&&(o.ins<0||c==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let h=a.len;for(fr(i,a.ins,-1);h;){let f=Math.min(o.len,h);o.ins>=0&&c<o.i&&o.len<=f&&(fr(i,0,o.ins),s&&nl(s,i,o.text),c=o.i),o.forward(f),h-=f}a.next()}else if(o.ins>=0){let h=0,f=o.len;for(;f;)if(a.ins==-1){let d=Math.min(f,a.len);h+=d,f-=d,a.forward(d)}else if(a.ins==0&&a.len<f)f-=a.len,a.next();else break;fr(i,h,c<o.i?o.ins:0),s&&c<o.i&&nl(s,i,o.text),c=o.i,o.forward(o.len-f)}else{if(o.done&&a.done)return s?An.createSet(i,s):ao.create(i);throw new Error("Mismatched change set lengths")}}}function UV(t,e,n=!1){let r=[],i=n?[]:null,s=new Qp(t),o=new Qp(e);for(let a=!1;;){if(s.done&&o.done)return i?An.createSet(r,i):ao.create(r);if(s.ins==0)fr(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)fr(r,0,o.ins,a),i&&nl(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let c=Math.min(s.len2,o.len),h=r.length;if(s.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;fr(r,c,f,a),i&&f&&nl(i,r,o.text)}else o.ins==-1?(fr(r,s.off?0:s.len,c,a),i&&nl(i,r,s.textBit(c))):(fr(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&nl(i,r,o.text));a=(s.ins>c||o.ins>=0&&o.len>c)&&(a||r.length>h),s.forward2(c),o.forward(c)}}}}class Qp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?dt.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?dt.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class cc{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new cc(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return fe.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return fe.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,n,r){return new cc(e,n,r)}}class fe{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:fe.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,n=!0){return fe.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,fe.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(n=>cc.fromJSON(n)),e.main)}static single(e,n=e){return new fe([fe.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return fe.normalized(e.slice(),n);r=s.to}return new fe(e,n)}static cursor(e,n=0,r,i){return cc.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?cc.create(n,e,48|s):cc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,c=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?fe.range(c,a):fe.range(a,c))}}return new fe(e,n)}}function HV(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let FE=0;class Ce{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=FE++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ce(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:zE),!!e.static,e.enables)}of(e){return new vb([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new vb(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new vb(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function zE(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class vb{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=FE++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,c=!1,h=!1,f=[];for(let d of this.dependencies)d=="doc"?c=!0:d=="selection"?h=!0:(((n=e[d.id])!==null&&n!==void 0?n:1)&1)==0&&f.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,m){if(c&&m.docChanged||h&&(m.docChanged||m.selection)||NC(d,f)){let y=r(d);if(a?!VI(y,d.values[o],i):!i(y,d.values[o]))return d.values[o]=y,1}return 0},reconfigure:(d,m)=>{let y,v=m.config.address[s];if(v!=null){let w=uv(m,v);if(this.dependencies.every(_=>_ instanceof Ce?m.facet(_)===d.facet(_):_ instanceof Qn?m.field(_,!1)==d.field(_,!1):!0)||(a?VI(y=r(d),w,i):i(y=r(d),w)))return d.values[o]=w,0}else y=r(d);return d.values[o]=y,1}}}}function VI(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function NC(t,e){let n=!1;for(let r of e)Ap(t,r)&1&&(n=!0);return n}function mae(t,e,n){let r=n.map(c=>t[c.id]),i=n.map(c=>c.type),s=r.filter(c=>!(c&1)),o=t[e.id]>>1;function a(c){let h=[];for(let f=0;f<r.length;f++){let d=uv(c,r[f]);if(i[f]==2)for(let m of d)h.push(m);else h.push(d)}return e.combine(h)}return{create(c){for(let h of r)Ap(c,h);return c.values[o]=a(c),1},update(c,h){if(!NC(c,s))return 0;let f=a(c);return e.compare(f,c.values[o])?0:(c.values[o]=f,1)},reconfigure(c,h){let f=NC(c,r),d=h.config.facets[e.id],m=h.facet(e);if(d&&!f&&zE(n,d))return c.values[o]=m,0;let y=a(c);return e.compare(y,m)?(c.values[o]=m,0):(c.values[o]=y,1)}}}const hy=Ce.define({static:!0});class Qn{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Qn(FE++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(hy).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(hy),o=i.facet(hy),a;return(a=s.find(c=>c.field==this))&&a!=o.find(c=>c.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,hy.of({field:this,create:e})]}get extension(){return this}}const ic={lowest:4,low:3,default:2,high:1,highest:0};function Td(t){return e=>new qV(e,t)}const Bc={highest:Td(ic.highest),high:Td(ic.high),default:Td(ic.default),low:Td(ic.low),lowest:Td(ic.lowest)};class qV{constructor(e,n){this.inner=e,this.prec=n}}class zx{of(e){return new BC(this,e)}reconfigure(e){return zx.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class BC{constructor(e,n){this.compartment=e,this.inner=n}}class cv{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let m of gae(e,n,o))m instanceof Qn?i.push(m):(s[m.facet.id]||(s[m.facet.id]=[])).push(m);let a=Object.create(null),c=[],h=[];for(let m of i)a[m.id]=h.length<<1,h.push(y=>m.slot(y));let f=r?.config.facets;for(let m in s){let y=s[m],v=y[0].facet,w=f&&f[m]||[];if(y.every(_=>_.type==0))if(a[v.id]=c.length<<1|1,zE(w,y))c.push(r.facet(v));else{let _=v.combine(y.map(S=>S.value));c.push(r&&v.compare(_,r.facet(v))?r.facet(v):_)}else{for(let _ of y)_.type==0?(a[_.id]=c.length<<1|1,c.push(_.value)):(a[_.id]=h.length<<1,h.push(S=>_.dynamicSlot(S)));a[v.id]=h.length<<1,h.push(_=>mae(_,v,y))}}let d=h.map(m=>m(a));return new cv(e,o,d,a,c,s)}}function gae(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let c=i.get(o);if(c!=null){if(c<=a)return;let h=r[c].indexOf(o);h>-1&&r[c].splice(h,1),o instanceof BC&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let h of o)s(h,a);else if(o instanceof BC){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;n.set(o.compartment,h),s(h,a)}else if(o instanceof qV)s(o.inner,o.prec);else if(o instanceof Qn)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof vb)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,ic.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,a)}}return s(t,ic.default),r.reduce((o,a)=>o.concat(a))}function Ap(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function uv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const WV=Ce.define(),jC=Ce.define({combine:t=>t.some(e=>e),static:!0}),GV=Ce.define({combine:t=>t.length?t[0]:void 0,static:!0}),KV=Ce.define(),YV=Ce.define(),XV=Ce.define(),JV=Ce.define({combine:t=>t.length?t[0]:!1});class sa{constructor(e,n){this.type=e,this.value=n}static define(){return new yae}}class yae{of(e){return new sa(this,e)}}class bae{constructor(e){this.map=e}of(e){return new Qe(this,e)}}class Qe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Qe(this.type,n)}is(e){return this.type==e}static define(e={}){return new bae(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Qe.reconfigure=Qe.define();Qe.appendConfig=Qe.define();class kn{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&HV(r,n.newLength),s.some(a=>a.type==kn.time)||(this.annotations=s.concat(kn.time.of(Date.now())))}static create(e,n,r,i,s,o){return new kn(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(kn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}kn.time=sa.define();kn.userEvent=sa.define();kn.addToHistory=sa.define();kn.remote=sa.define();function vae(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function QV(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=An.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Qe.mapEffects(t.effects,i).concat(Qe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function $C(t,e,n){let r=e.selection,i=yh(e.annotations);return e.userEvent&&(i=i.concat(kn.userEvent.of(e.userEvent))),{changes:e.changes instanceof An?e.changes:An.of(e.changes||[],n,t.facet(GV)),selection:r&&(r instanceof fe?r:fe.single(r.anchor,r.head)),effects:yh(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function ZV(t,e,n){let r=$C(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=QV(r,$C(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=kn.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return wae(n?xae(i):i)}function xae(t){let e=t.startState,n=!0;for(let i of e.facet(KV)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:vae(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=An.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=kn.create(e,i,t.selection&&t.selection.map(s),Qe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(YV);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof kn?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof kn?t=s[0]:t=ZV(e,yh(s),!1)}return t}function wae(t){let e=t.startState,n=e.facet(XV),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=QV(r,$C(e,s,t.changes.newLength),!0))}return r==t?t:kn.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const Sae=[];function yh(t){return t==null?Sae:Array.isArray(t)?t:[t]}var zt=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(zt||(zt={}));const _ae=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let VC;try{VC=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Cae(t){if(VC)return VC.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||_ae.test(n)))return!0}return!1}function Aae(t){return e=>{if(!/\S/.test(e))return zt.Space;if(Cae(e))return zt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return zt.Word;return zt.Other}}class ht{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Ap(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return Ap(this,r),uv(this,r)}update(...e){return ZV(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(zx.reconfigure)?(n&&(i=new Map,n.compartments.forEach((c,h)=>i.set(h,c)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Qe.reconfigure)?(n=null,r=a.value):a.is(Qe.appendConfig)&&(n=null,r=yh(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=cv.resolve(r,i,this),s=new ht(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(c,h)=>h.reconfigure(c,this),null).values);let o=e.startState.facet(jC)?e.newSelection:e.newSelection.asSingle();new ht(n,e.newDoc,o,s,(a,c)=>c.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:fe.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=yh(r.effects);for(let a=1;a<n.ranges.length;a++){let c=e(n.ranges[a]),h=this.changes(c.changes),f=h.map(i);for(let m=0;m<a;m++)s[m]=s[m].map(f);let d=i.mapDesc(h,!0);s.push(c.range.map(d)),i=i.compose(f),o=Qe.mapEffects(o,f).concat(Qe.mapEffects(yh(c.effects),d))}return{changes:i,selection:fe.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof An?e:An.of(e,this.doc.length,this.facet(ht.lineSeparator))}toText(e){return dt.of(e.split(this.facet(ht.lineSeparator)||DC))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Ap(this,n),uv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Qn&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(c=>o.spec.fromJSON(a,c)))}}return ht.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=cv.resolve(e.extensions||[],new Map),r=e.doc instanceof dt?e.doc:dt.of((e.doc||"").split(n.staticFacet(ht.lineSeparator)||DC)),i=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return HV(i,r.length),n.staticFacet(jC)||(i=i.asSingle()),new ht(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ht.tabSize)}get lineBreak(){return this.facet(ht.lineSeparator)||`
`}get readOnly(){return this.facet(JV)}phrase(e,...n){for(let r of this.facet(ht.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(WV))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return Aae(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let c=Yn(n,o,!1);if(s(n.slice(c,o))!=zt.Word)break;o=c}for(;a<i;){let c=Yn(n,a);if(s(n.slice(a,c))!=zt.Word)break;a=c}return o==a?null:fe.range(o+r,a+r)}}ht.allowMultipleSelections=jC;ht.tabSize=Ce.define({combine:t=>t.length?t[0]:4});ht.lineSeparator=GV;ht.readOnly=JV;ht.phrases=Ce.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});ht.languageData=WV;ht.changeFilter=KV;ht.transactionFilter=YV;ht.transactionExtender=XV;zx.reconfigure=Qe.define();function xo(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Cc{eq(e){return this==e}range(e,n=e){return FC.create(e,n,this)}}Cc.prototype.startSide=Cc.prototype.endSide=0;Cc.prototype.point=!1;Cc.prototype.mapMode=Mr.TrackDel;let FC=class e7{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new e7(e,n,r)}};function zC(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class UE{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let c=o+a>>1,h=s[c]-e||(r?this.value[c].endSide:this.value[c].startSide)-n;if(c==o)return h>=0?o:a;h>=0?a=c:o=c+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let c=0;c<this.value.length;c++){let h=this.value[c],f=this.from[c]+e,d=this.to[c]+e,m,y;if(f==d){let v=n.mapPos(f,h.startSide,h.mapMode);if(v==null||(m=y=v,h.startSide!=h.endSide&&(y=n.mapPos(f,h.endSide),y<m)))continue}else if(m=n.mapPos(f,h.startSide),y=n.mapPos(d,h.endSide),m>y||m==y&&h.startSide>0&&h.endSide<=0)continue;(y-m||h.endSide-h.startSide)<0||(o<0&&(o=m),h.point&&(a=Math.max(a,y-m)),r.push(h),i.push(m-o),s.push(y-o))}return{mapped:r.length?new UE(i,s,r,a):null,pos:o}}}class ft{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new ft(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(zC)),this.isEmpty)return n.length?ft.of(n):this;let a=new t7(this,null,-1).goto(0),c=0,h=[],f=new Xo;for(;a.value||c<n.length;)if(c<n.length&&(a.from-n[c].from||a.startSide-n[c].value.startSide)>=0){let d=n[c++];f.addInner(d.from,d.to,d.value)||h.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(c==n.length||this.chunkEnd(a.chunkIndex)<n[c].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&f.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(f.addInner(a.from,a.to,a.value)||h.push(FC.create(a.from,a.to,a.value))),a.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?ft.empty:this.nextLayer.update({add:h,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],c=this.chunk[o],h=e.touchesRange(a,a+c.length);if(h===!1)i=Math.max(i,c.maxPoint),n.push(c),r.push(e.mapPos(a));else if(h===!0){let{mapped:f,pos:d}=c.map(a,e);f&&(i=Math.max(i,f.maxPoint),n.push(f),r.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ft(r,n,s||ft.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Zp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Zp.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),c=FI(o,a,r),h=new Rd(o,c,s),f=new Rd(a,c,s);r.iterGaps((d,m,y)=>zI(h,d,f,m,y,i)),r.empty&&r.length==0&&zI(h,0,f,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(f=>!f.isEmpty&&n.indexOf(f)<0),o=n.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=FI(s,o),c=new Rd(s,a,0).goto(r),h=new Rd(o,a,0).goto(r);for(;;){if(c.to!=h.to||!UC(c.active,h.active)||c.point&&(!h.point||!c.point.eq(h.point)))return!1;if(c.to>i)return!0;c.next(),h.next()}}static spans(e,n,r,i,s=-1){let o=new Rd(e,null,s).goto(n),a=n,c=o.openStart;for(;;){let h=Math.min(o.to,r);if(o.point){let f=o.activeForPoint(o.to),d=o.pointFrom<n?f.length+1:o.point.startSide<0?f.length:Math.min(f.length,c);i.point(a,h,o.point,f,d,o.pointRank),c=Math.min(o.openEnd(h),f.length)}else h>a&&(i.span(a,h,o.active,c),c=o.openEnd(h));if(o.to>r)return c+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Xo;for(let i of e instanceof FC?[e]:n?kae(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return ft.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=ft.empty;i=i.nextLayer)n=new ft(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}ft.empty=new ft([],[],null,-1);function kae(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(zC(e,r)>0)return t.slice().sort(zC);e=r}return t}ft.empty.nextLayer=ft.empty;class Xo{finishChunk(e){this.chunks.push(new UE(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Xo)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(ft.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ft.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function FI(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class t7{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Zp{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new t7(o,n,r,s));return i.length==1?i[0]:new Zp(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)b2(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)b2(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),b2(this.heap,0)}}}function b2(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Rd{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Zp.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){fy(this.active,e),fy(this.activeTo,e),fy(this.activeRank,e),this.minActive=UI(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;dy(this.active,n,r),dy(this.activeTo,n,i),dy(this.activeRank,n,s),e&&dy(e,n,this.cursor.from),this.minActive=UI(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&fy(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function zI(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,c=r-e;for(;;){let h=t.to+c-n.to,f=h||t.endSide-n.endSide,d=f<0?t.to+c:n.to,m=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&UC(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,m,t.point,n.point):m>a&&!UC(t.active,n.active)&&s.compareRange(a,m,t.active,n.active),d>o)break;(h||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,f<=0&&t.next(),f>=0&&n.next()}}function UC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function fy(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function dy(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function UI(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Xh(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Yn(t,i));return r}function HC(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Yn(t,i)}return r===!0?-1:t.length}const qC="",HI=typeof Symbol>"u"?"__"+qC:Symbol.for(qC),WC=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),qI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class pl{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,c,h){let f=[],d=/^@(\w+)\b/.exec(o[0]),m=d&&d[1]=="keyframes";if(d&&a==null)return c.push(o[0]+";");for(let y in a){let v=a[y];if(/&/.test(y))s(y.split(/,\s*/).map(w=>o.map(_=>w.replace(/&/,_))).reduce((w,_)=>w.concat(_)),v,c);else if(v&&typeof v=="object"){if(!d)throw new RangeError("The value of a property ("+y+") should be a primitive value.");s(i(y),v,f,m)}else v!=null&&f.push(y.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+v+";")}(f.length||m)&&c.push((r&&!d&&!h?o.map(r):o).join(", ")+" {"+f.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=qI[HI]||1;return qI[HI]=e+1,qC+e.toString(36)}static mount(e,n,r){let i=e[WC],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Eae(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let WI=new Map;class Eae{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=WI.get(r);if(s)return e[WC]=s;this.sheet=new i.CSSStyleSheet,WI.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[WC]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],c=this.modules.indexOf(a);if(c<s&&c>-1&&(this.modules.splice(c,1),s--,c=-1),c==-1){if(this.modules.splice(s++,0,a),r)for(let h=0;h<a.rules.length;h++)r.insertRule(a.rules[h],i++)}else{for(;s<c;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let c=0;c<this.modules.length;c++)o+=this.modules[c].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ml={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},em={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Tae=typeof navigator<"u"&&/Mac/.test(navigator.platform),Rae=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Kn=0;Kn<10;Kn++)ml[48+Kn]=ml[96+Kn]=String(Kn);for(var Kn=1;Kn<=24;Kn++)ml[Kn+111]="F"+Kn;for(var Kn=65;Kn<=90;Kn++)ml[Kn]=String.fromCharCode(Kn+32),em[Kn]=String.fromCharCode(Kn);for(var v2 in ml)em.hasOwnProperty(v2)||(em[v2]=ml[v2]);function Mae(t){var e=Tae&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Rae&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?em:ml)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function At(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)n7(t,arguments[e]);return t}function n7(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)n7(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function tm(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function GC(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function xb(t,e){if(!e.anchorNode)return!1;try{return GC(t,e.anchorNode)}catch{return!1}}function nm(t){return t.nodeType==3?kc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function kp(t,e,n,r){return n?GI(t,e,n,r,-1)||GI(t,e,n,r,1):!1}function Ac(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function hv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function GI(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:mo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Ac(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?mo(t):0}else return!1}}function mo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ux(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Oae(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function r7(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Pae(t,e,n,r,i,s,o,a){let c=t.ownerDocument,h=c.defaultView||window;for(let f=t,d=!1;f&&!d;)if(f.nodeType==1){let m,y=f==c.body,v=1,w=1;if(y)m=Oae(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(d=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let A=f.getBoundingClientRect();({scaleX:v,scaleY:w}=r7(f,A)),m={left:A.left,right:A.left+f.clientWidth*v,top:A.top,bottom:A.top+f.clientHeight*w}}let _=0,S=0;if(i=="nearest")e.top<m.top?(S=e.top-(m.top+o),n>0&&e.bottom>m.bottom+S&&(S=e.bottom-m.bottom+o)):e.bottom>m.bottom&&(S=e.bottom-m.bottom+o,n<0&&e.top-S<m.top&&(S=e.top-(m.top+o)));else{let A=e.bottom-e.top,k=m.bottom-m.top;S=(i=="center"&&A<=k?e.top+A/2-k/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-k+o)-m.top}if(r=="nearest"?e.left<m.left?(_=e.left-(m.left+s),n>0&&e.right>m.right+_&&(_=e.right-m.right+s)):e.right>m.right&&(_=e.right-m.right+s,n<0&&e.left<m.left+_&&(_=e.left-(m.left+s))):_=(r=="center"?e.left+(e.right-e.left)/2-(m.right-m.left)/2:r=="start"==a?e.left-s:e.right-(m.right-m.left)+s)-m.left,_||S)if(y)h.scrollBy(_,S);else{let A=0,k=0;if(S){let P=f.scrollTop;f.scrollTop+=S/w,k=(f.scrollTop-P)*w}if(_){let P=f.scrollLeft;f.scrollLeft+=_/v,A=(f.scrollLeft-P)*v}e={left:e.left-A,top:e.top-k,right:e.right-A,bottom:e.bottom-k},A&&Math.abs(A-_)<1&&(r="nearest"),k&&Math.abs(k-S)<1&&(i="nearest")}if(y)break;(e.top<m.top||e.bottom>m.bottom||e.left<m.left||e.right>m.right)&&(e={left:Math.max(e.left,m.left),right:Math.min(e.right,m.right),top:Math.max(e.top,m.top),bottom:Math.min(e.bottom,m.bottom)}),f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function Dae(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Lae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?mo(n):0),r,Math.min(e.focusOffset,r?mo(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let $u=null;function i7(t){if(t.setActive)return t.setActive();if($u)return t.focus($u);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus($u==null?{get preventScroll(){return $u={preventScroll:!0},!0}}:void 0),!$u){$u=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let KI;function kc(t,e,n=e){let r=KI||(KI=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function bh(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Iae(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function s7(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Nae(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,mo(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=mo(n))}else{if(n==t)return!0;r=Ac(n),n=n.parentNode}}function o7(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function a7(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=mo(n)}else if(n.parentNode&&!hv(n))r=Ac(n),n=n.parentNode;else return null}}function l7(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!hv(n))r=Ac(n)+1,n=n.parentNode;else return null}}class dr{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new dr(e.parentNode,Ac(e),n)}static after(e,n){return new dr(e.parentNode,Ac(e)+1,n)}}const HE=[];class Et{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Et.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=YI(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=YI(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=mo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Et.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let c=0,h=r,f=r;c<this.children.length;c++){let d=this.children[c],m=h+d.length;if(h<e&&m>n)return d.domBoundsAround(e,n,h);if(m>=e&&i==-1&&(i=c,s=h),h>n&&d.dom.parentNode==this.dom){o=c,a=f;break}f=m,h=m+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=HE){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new c7(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Et.prototype.breakAfter=0;function YI(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class c7{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function u7(t,e,n,r,i,s,o,a,c){let{children:h}=t,f=h.length?h[e]:null,d=s.length?s[s.length-1]:null,m=d?d.breakAfter:o;if(!(e==r&&f&&!o&&!m&&s.length<2&&f.merge(n,i,s.length?d:null,n==0,a,c))){if(r<h.length){let y=h[r];y&&(i<y.length||y.breakAfter&&d?.breakAfter)?(e==r&&(y=y.split(i),i=0),!m&&d&&y.merge(0,i,d,!0,0,c)?s[s.length-1]=y:((i||y.children.length&&!y.children[0].length)&&y.merge(0,i,null,!1,0,c),s.push(y))):y?.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(f&&(f.breakAfter=o,n>0&&(!o&&s.length&&f.merge(n,f.length,s[0],!1,a,0)?f.breakAfter=s.shift().breakAfter:(n<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(n,f.length,null,!1,a,0),e++));e<r&&s.length;)if(h[r-1].become(s[s.length-1]))r--,s.pop(),c=s.length?0:a;else if(h[e].become(s[0]))e++,s.shift(),a=s.length?0:c;else break;!s.length&&e&&r<h.length&&!h[e-1].breakAfter&&h[r].merge(0,0,h[e-1],!1,a,c)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function h7(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:c}=o.findPos(n,1),{i:h,off:f}=o.findPos(e,-1),d=e-n;for(let m of r)d+=m.length;t.length+=d,u7(t,h,f,a,c,r,0,i,s)}let Wr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},KC=typeof document<"u"?document:{documentElement:{style:{}}};const YC=/Edge\/(\d+)/.exec(Wr.userAgent),f7=/MSIE \d/.test(Wr.userAgent),XC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wr.userAgent),Hx=!!(f7||XC||YC),XI=!Hx&&/gecko\/(\d+)/i.test(Wr.userAgent),x2=!Hx&&/Chrome\/(\d+)/.exec(Wr.userAgent),Bae="webkitFontSmoothing"in KC.documentElement.style,d7=!Hx&&/Apple Computer/.test(Wr.vendor),JI=d7&&(/Mobile\/\w+/.test(Wr.userAgent)||Wr.maxTouchPoints>2);var Se={mac:JI||/Mac/.test(Wr.platform),windows:/Win/.test(Wr.platform),linux:/Linux|X11/.test(Wr.platform),ie:Hx,ie_version:f7?KC.documentMode||6:XC?+XC[1]:YC?+YC[1]:0,gecko:XI,gecko_version:XI?+(/Firefox\/(\d+)/.exec(Wr.userAgent)||[0,0])[1]:0,chrome:!!x2,chrome_version:x2?+x2[1]:0,ios:JI,android:/Android\b/.test(Wr.userAgent),safari:d7,webkit_version:Bae?+(/\bAppleWebKit\/(\d+)/.exec(Wr.userAgent)||[0,0])[1]:0,tabSize:KC.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const jae=256;class Cs extends Et{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Cs)||this.length-(n-e)+r.length>jae||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Cs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new dr(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return $ae(this.dom,e,n)}}class Jo extends Et{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(s7(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof Jo&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(h7(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let c=r+a.length;c>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=c,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Jo(this.mark,n,o)}domAtPos(e){return p7(this,e)}coordsAt(e,n){return g7(this,e,n)}}function $ae(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Se.chrome||Se.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=kc(t,i,s).getClientRects();if(!a.length)return null;let c=a[(o?o<0:n>=0)?0:a.length-1];return Se.safari&&!o&&c.width==0&&(c=Array.prototype.find.call(a,h=>h.width)||c),o?Ux(c,o<0):c||null}class rl extends Et{static create(e,n,r){return new rl(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=rl.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof rl)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof rl&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return dt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):dt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?dr.before(this.dom):dr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Ux(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Oh extends Et{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Oh&&e.side==this.side}split(){return new Oh(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?dr.before(this.dom):dr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return dt.empty}get isHidden(){return!0}}Cs.prototype.children=rl.prototype.children=Oh.prototype.children=HE;function p7(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new dr(n,0)}function m7(t,e,n){let r,{children:i}=t;n>0&&e instanceof Jo&&i.length&&(r=i[i.length-1])instanceof Jo&&r.mark.eq(e.mark)?m7(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function g7(t,e,n){let r=null,i=-1,s=null,o=-1;function a(h,f){for(let d=0,m=0;d<h.children.length&&m<=f;d++){let y=h.children[d],v=m+y.length;v>=f&&(y.children.length?a(y,f-m):(!s||s.isHidden&&(n>0||Fae(s,y)))&&(v>f||m==v&&y.getSide()>0)?(s=y,o=f-m):(m<f||m==v&&y.getSide()<0&&!y.isHidden)&&(r=y,i=f-m)),m=v}}a(t,e);let c=(n<0?r:s)||r||s;return c?c.coordsAt(Math.max(0,c==r?i:o),n):Vae(t)}function Vae(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=nm(e);return n[n.length-1]||null}function Fae(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function JC(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const QI=Object.create(null);function fv(t,e,n){if(t==e)return!0;t||(t=QI),e||(e=QI);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function QC(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function zae(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class wl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Dr=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(Dr||(Dr={}));class Ue extends Cc{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Vm(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new gl(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=y7(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new gl(e,r,i,n,e.widget||null,!0)}static line(e){return new Fm(e)}static set(e,n=!1){return ft.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ue.none=ft.empty;class Vm extends Ue{constructor(e){let{start:n,end:r}=y7(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Vm&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&fv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Vm.prototype.point=!1;class Fm extends Ue{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Fm&&this.spec.class==e.spec.class&&fv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Fm.prototype.mapMode=Mr.TrackBefore;Fm.prototype.point=!0;class gl extends Ue{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?Mr.TrackBefore:Mr.TrackAfter:Mr.TrackDel}get type(){return this.startSide!=this.endSide?Dr.WidgetRange:this.startSide<=0?Dr.WidgetBefore:Dr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof gl&&Uae(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}gl.prototype.point=!0;function y7(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function Uae(t,e){return t==e||!!(t&&e&&t.compare(e))}function wb(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class cn extends Et{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof cn))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),h7(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new cn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){fv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){m7(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=JC(n,this.attrs||{})),r&&(this.attrs=JC({class:r},this.attrs||{}))}domAtPos(e){return p7(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(s7(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(QC(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Et.get(i)instanceof Jo;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Et.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Se.ios||!this.children.some(s=>s instanceof Cs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Cs)||/[^ -~]/.test(r.text))return null;let i=nm(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=g7(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof cn&&this.children.length==0&&e.children.length==0&&fv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof cn)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Wo extends Et{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Wo)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?dr.before(this.dom):dr.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Wo(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return HE}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):dt.empty}domBoundsAround(){return null}become(e){return e instanceof Wo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof ZC?null:Ux(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class ZC extends wl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Ep{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Wo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new cn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(py(new Oh(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Wo)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(py(new Cs(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof gl){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof gl)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Wo(r.widget||Ph.block,a,r));else{let c=rl.create(r.widget||Ph.inline,a,a?0:r.startSide),h=this.atCursorPos&&!c.isEditable&&s<=i.length&&(e<n||r.startSide>0),f=!c.isEditable&&(e<n||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!h&&!c.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),h&&(d.append(py(new Oh(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(py(c,i),s),this.atCursorPos=f,this.pendingBuffer=f?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new Ep(e,n,r,s);return o.openEnd=ft.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function py(t,e){for(let n of e)t=new Jo(n,[t],t.length);return t}class Ph extends wl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ph.inline=new Ph("span");Ph.block=new Ph("div");var Nt=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(Nt||(Nt={}));const Ec=Nt.LTR,qE=Nt.RTL;function b7(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Hae=b7("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),qae=b7("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),eA=Object.create(null),zs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);eA[e]=n,eA[n]=-e}function v7(t){return t<=247?Hae[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?qae[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Wae=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class il{get dir(){return this.level%2?qE:Ec}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function x7(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!x7(r.inner,i.inner))return!1}return!0}const kt=[];function Gae(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,c=s?256:i;for(let h=o,f=c,d=c;h<a;h++){let m=v7(t.charCodeAt(h));m==512?m=f:m==8&&d==4&&(m=16),kt[h]=m==4?2:m,m&7&&(d=m),f=m}for(let h=o,f=c,d=c;h<a;h++){let m=kt[h];if(m==128)h<a-1&&f==kt[h+1]&&f&24?m=kt[h]=f:kt[h]=256;else if(m==64){let y=h+1;for(;y<a&&kt[y]==64;)y++;let v=h&&f==8||y<n&&kt[y]==8?d==1?1:8:256;for(let w=h;w<y;w++)kt[w]=v;h=y-1}else m==8&&d==1&&(kt[h]=1);f=m,m&7&&(d=m)}}}function Kae(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,c=0;o<=r.length;o++){let h=o?r[o-1].to:e,f=o<r.length?r[o].from:n;for(let d=h,m,y,v;d<f;d++)if(y=eA[m=t.charCodeAt(d)])if(y<0){for(let w=a-3;w>=0;w-=3)if(zs[w+1]==-y){let _=zs[w+2],S=_&2?i:_&4?_&1?s:i:0;S&&(kt[d]=kt[zs[w]]=S),a=w;break}}else{if(zs.length==189)break;zs[a++]=d,zs[a++]=m,zs[a++]=c}else if((v=kt[d])==2||v==1){let w=v==i;c=w?0:1;for(let _=a-3;_>=0;_-=3){let S=zs[_+2];if(S&2)break;if(w)zs[_+2]|=2;else{if(S&4)break;zs[_+2]|=4}}}}}function Yae(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let c=o;c<a;){let h=kt[c];if(h==256){let f=c+1;for(;;)if(f==a){if(i==n.length)break;f=n[i++].to,a=i<n.length?n[i].from:e}else if(kt[f]==256)f++;else break;let d=s==1,m=(f<e?kt[f]:r)==1,y=d==m?d?1:2:r;for(let v=f,w=i,_=w?n[w-1].to:t;v>c;)v==_&&(v=n[--w].from,_=w?n[w-1].to:t),kt[--v]=y;c=f}else s=h,c++}}}function tA(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let c=e,h=0;c<n;){let f=!0,d=!1;if(h==s.length||c<s[h].from){let w=kt[c];w!=a&&(f=!1,d=w==16)}let m=!f&&a==1?[]:null,y=f?r:r+1,v=c;e:for(;;)if(h<s.length&&v==s[h].from){if(d)break e;let w=s[h];if(!f)for(let _=w.to,S=h+1;;){if(_==n)break e;if(S<s.length&&s[S].from==_)_=s[S++].to;else{if(kt[_]==a)break e;break}}if(h++,m)m.push(w);else{w.from>c&&o.push(new il(c,w.from,y));let _=w.direction==Ec!=!(y%2);nA(t,_?r+1:r,i,w.inner,w.from,w.to,o),c=w.to}v=w.to}else{if(v==n||(f?kt[v]!=a:kt[v]==a))break;v++}m?tA(t,c,v,r+1,i,m,o):c<v&&o.push(new il(c,v,y)),c=v}else for(let c=n,h=s.length;c>e;){let f=!0,d=!1;if(!h||c>s[h-1].to){let w=kt[c-1];w!=a&&(f=!1,d=w==16)}let m=!f&&a==1?[]:null,y=f?r:r+1,v=c;e:for(;;)if(h&&v==s[h-1].to){if(d)break e;let w=s[--h];if(!f)for(let _=w.from,S=h;;){if(_==e)break e;if(S&&s[S-1].to==_)_=s[--S].from;else{if(kt[_-1]==a)break e;break}}if(m)m.push(w);else{w.to<c&&o.push(new il(w.to,c,y));let _=w.direction==Ec!=!(y%2);nA(t,_?r+1:r,i,w.inner,w.from,w.to,o),c=w.from}v=w.from}else{if(v==e||(f?kt[v-1]!=a:kt[v-1]==a))break;v--}m?tA(t,v,c,r+1,i,m,o):v<c&&o.push(new il(v,c,y)),c=v}}function nA(t,e,n,r,i,s,o){let a=e%2?2:1;Gae(t,i,s,r,a),Kae(t,i,s,r,a),Yae(i,s,r,a),tA(t,i,s,e,n,r,o)}function Xae(t,e,n){if(!t)return[new il(0,0,e==qE?1:0)];if(e==Ec&&!n.length&&!Wae.test(t))return w7(t.length);if(n.length)for(;t.length>kt.length;)kt[kt.length]=256;let r=[],i=e==Ec?0:1;return nA(t,i,i,n,0,t.length,r),r}function w7(t){return[new il(0,t,0)]}let S7="";function Jae(t,e,n,r,i){var s;let o=r.head-t.from,a=il.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),c=e[a],h=c.side(i,n);if(o==h){let m=a+=i?1:-1;if(m<0||m>=e.length)return null;c=e[a=m],o=c.side(!i,n),h=c.side(i,n)}let f=Yn(t.text,o,c.forward(i,n));(f<c.from||f>c.to)&&(f=h),S7=t.text.slice(Math.min(o,f),Math.max(o,f));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&f==h&&d.level+(i?0:1)<c.level?fe.cursor(d.side(!i,n)+t.from,d.forward(i,n)?1:-1,d.level):fe.cursor(f+t.from,c.forward(i,n)?-1:1,c.level)}function Qae(t,e,n){for(let r=e;r<n;r++){let i=v7(t.charCodeAt(r));if(i==1)return Ec;if(i==2||i==4)return qE}return Ec}const _7=Ce.define(),C7=Ce.define(),A7=Ce.define(),k7=Ce.define(),rA=Ce.define(),E7=Ce.define(),T7=Ce.define(),WE=Ce.define(),GE=Ce.define(),R7=Ce.define({combine:t=>t.some(e=>e)}),M7=Ce.define({combine:t=>t.some(e=>e)}),O7=Ce.define();class vh{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new vh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new vh(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const my=Qe.define({map:(t,e)=>t.map(e)}),P7=Qe.define();function Kr(t,e,n){let r=t.facet(k7);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const qo=Ce.define({combine:t=>t.length?t[0]:!0});let Zae=0;const th=Ce.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class gn{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(th.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(th.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new gn(Zae++,e,r,i,a=>{let c=[];return o&&c.push(rm.of(h=>{let f=h.plugin(a);return f?o(f):Ue.none})),s&&c.push(s(a)),c})}static fromClass(e,n){return gn.define((r,i)=>new e(r,i),n)}}class w2{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Kr(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Kr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Kr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const D7=Ce.define(),KE=Ce.define(),rm=Ce.define(),L7=Ce.define(),qx=Ce.define(),I7=Ce.define();function ZI(t,e){let n=t.state.facet(I7);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return ft.spans(r,e.from,e.to,{point(){},span(s,o,a,c){let h=s-e.from,f=o-e.from,d=i;for(let m=a.length-1;m>=0;m--,c--){let y=a[m].spec.bidiIsolate,v;if(y==null&&(y=Qae(e.text,h,f)),c>0&&d.length&&(v=d[d.length-1]).to==h&&v.direction==y)v.to=f,d=v.inner;else{let w={from:h,to:f,direction:y,inner:[]};d.push(w),d=w.inner}}}}),i}const N7=Ce.define();function YE(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(N7)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const lp=Ce.define();class Ji{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new Ji(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let c=i==e.length?null:e[i],h=o-a,f=c?c.fromB:1e9;for(;s<n.length&&n[s]<f;){let d=n[s],m=n[s+1],y=Math.max(a,d),v=Math.min(f,m);if(y<=v&&new Ji(y+h,v+h,y,v).addToSet(r),m>f)break;s+=2}if(!c)return r;new Ji(c.fromA,c.toA,c.fromB,c.toB).addToSet(r),o=c.toA,a=c.toB}}}class dv{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=An.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,c)=>i.push(new Ji(s,o,a,c))),this.changedRanges=i}static create(e,n,r){return new dv(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class eN extends Et{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ue.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new cn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ji(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:h,toA:f})=>f<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!ole(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?tle(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:f}=this.hasComposition;r=new Ji(h,f,e.changes.mapPos(h,-1),e.changes.mapPos(f,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Se.ie||Se.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),c=ile(o,a,e.changes);return r=Ji.extendWithRanges(r,c),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Se.chrome||Se.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Wo&&o.widget instanceof ZC&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:c,toA:h,fromB:f,toB:d}=a,m,y,v,w;if(r&&r.range.fromB<d&&r.range.toB>f){let P=Ep.build(this.view.state.doc,f,r.range.fromB,this.decorations,this.dynamicDecorationMap),M=Ep.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);y=P.breakAtStart,v=P.openStart,w=M.openEnd;let O=this.compositionView(r);M.breakAtStart?O.breakAfter=1:M.content.length&&O.merge(O.length,O.length,M.content[0],!1,M.openStart,0)&&(O.breakAfter=M.content[0].breakAfter,M.content.shift()),P.content.length&&O.merge(0,0,P.content[P.content.length-1],!0,0,P.openEnd)&&P.content.pop(),m=P.content.concat(O).concat(M.content)}else({content:m,breakAtStart:y,openStart:v,openEnd:w}=Ep.build(this.view.state.doc,f,d,this.decorations,this.dynamicDecorationMap));let{i:_,off:S}=s.findPos(h,1),{i:A,off:k}=s.findPos(c,-1);u7(this,A,k,_,S,m,y,v,w)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(P7)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Cs(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new Jo(i,[n],n.length);let r=new cn;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(c=>c.flags&7)?1:0),this.markedForComposition.add(o);let a=Et.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(qo)||this.dom.tabIndex>-1)&&xb(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,c=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?c:this.moveToLine(this.domAtPos(a.head));if(Se.gecko&&a.empty&&!this.hasComposition&&ele(c)){let d=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(d,c.node.childNodes[c.offset]||null)),c=h=new dr(d,0),o=!0}let f=this.view.observer.selectionRange;(o||!f.focusNode||(!kp(c.node,c.offset,f.anchorNode,f.anchorOffset)||!kp(h.node,h.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,a))&&(this.view.observer.ignore(()=>{Se.android&&Se.chrome&&this.dom.contains(f.focusNode)&&sle(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=tm(this.view.root);if(d)if(a.empty){if(Se.gecko){let m=nle(c.node,c.offset);if(m&&m!=3){let y=(m==1?a7:l7)(c.node,c.offset);y&&(c=new dr(y.node,y.offset))}}d.collapse(c.node,c.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(c.node,c.offset);try{d.extend(h.node,h.offset)}catch{}}else{let m=document.createRange();a.anchor>a.head&&([c,h]=[h,c]),m.setEnd(h.node,h.offset),m.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(m)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(c,h)),this.impreciseAnchor=c.precise?null:new dr(f.anchorNode,f.anchorOffset),this.impreciseHead=h.precise?null:new dr(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&kp(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=tm(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=cn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let c=this.coordsAt(n.head,-1),h=this.coordsAt(n.head,1);if(!c||!h||c.bottom>h.top)return;let f=this.domAtPos(n.head+n.assoc);r.collapse(f.node,f.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=Et.get(n.childNodes[i]);s instanceof cn&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Et.get(n.childNodes[i]);s instanceof cn&&(r=s.domAtPos(s.length))}return r?new dr(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=Et.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof cn)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],c=s-a.breakAfter,h=c-a.length;if(c<e)break;if(h<=e&&(h<e||a.covers(-1))&&(c>e||a.covers(1))&&(!r||a instanceof cn&&!(r instanceof cn&&n>=0)))r=a,i=h;else if(r&&h==e&&c==e&&a instanceof Wo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=h}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof cn))return null;for(;i.children.length;){let{i:a,off:c}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=c}if(!(i instanceof Cs))return null;let s=Yn(i.text,r);if(s==r)return null;let o=kc(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let c=o[a];if(a==o.length-1||c.top<c.bottom&&c.left<c.right)return c}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,c=this.view.textDirection==Nt.LTR;for(let h=0,f=0;f<this.children.length;f++){let d=this.children[f],m=h+d.length;if(m>i)break;if(h>=r){let y=d.dom.getBoundingClientRect();if(n.push(y.height),o){let v=d.dom.lastChild,w=v?nm(v):[];if(w.length){let _=w[w.length-1],S=c?_.right-y.left:y.right-_.left;S>a&&(a=S,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=m)}}}h=m+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Nt.RTL:Nt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof cn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=nm(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new c7(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Ue.replace({widget:new ZC(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Ue.set(e)}updateDeco(){let e=1,n=this.view.state.facet(rm).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(L7).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(ft.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(O7))try{if(h(this.view,e.range,e))return!0}catch(f){Kr(this.view.state,f,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=YE(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:c}=this.view.scrollDOM;Pae(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,c),-c),this.view.textDirection==Nt.LTR)}}function ele(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function B7(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=a7(n.focusNode,n.focusOffset),i=l7(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Et.get(i.node);if(!a||a instanceof Cs&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let c=Et.get(r.node);!c||c instanceof Cs&&c.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function tle(t,e,n){let r=B7(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let c=e.invertedDesc,h=new Ji(c.mapPos(s),c.mapPos(o),s,o),f=[];for(let d=i.parentNode;;d=d.parentNode){let m=Et.get(d);if(m instanceof Jo)f.push({node:d,deco:m.mark});else{if(m instanceof cn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:h,text:i,marks:f,line:d};if(d!=t.contentDOM)f.push({node:d,deco:new Vm({inclusive:!0,attributes:zae(d),tagName:d.tagName.toLowerCase()})});else return null}}}function nle(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let rle=class{constructor(){this.changes=[]}compareRange(e,n){wb(e,n,this.changes)}comparePoint(e,n){wb(e,n,this.changes)}boundChange(e){wb(e,e,this.changes)}};function ile(t,e,n){let r=new rle;return ft.compare(t,e,n,r),r.changes}function sle(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function ole(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function ale(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return fe.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Yn(i.text,s,!1):a=Yn(i.text,s);let c=r(i.text.slice(o,a));for(;o>0;){let h=Yn(i.text,o,!1);if(r(i.text.slice(h,o))!=c)break;o=h}for(;a<i.length;){let h=Yn(i.text,a);if(r(i.text.slice(a,h))!=c)break;a=h}return fe.range(o+i.from,a+i.from)}function lle(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function cle(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function S2(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function tN(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function nN(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function iA(t,e,n){let r,i,s,o,a=!1,c,h,f,d;for(let v=t.firstChild;v;v=v.nextSibling){let w=nm(v);for(let _=0;_<w.length;_++){let S=w[_];i&&S2(i,S)&&(S=tN(nN(S,i.bottom),i.top));let A=lle(e,S),k=cle(n,S);if(A==0&&k==0)return v.nodeType==3?rN(v,e,n):iA(v,e,n);(!r||o>k||o==k&&s>A)&&(r=v,i=S,s=A,o=k,a=A?e<S.left?_>0:_<w.length-1:!0),A==0?n>S.bottom&&(!f||f.bottom<S.bottom)?(c=v,f=S):n<S.top&&(!d||d.top>S.top)&&(h=v,d=S):f&&S2(f,S)?f=nN(f,S.bottom):d&&S2(d,S)&&(d=tN(d,S.top))}}if(f&&f.bottom>=n?(r=c,i=f):d&&d.top<=n&&(r=h,i=d),!r)return{node:t,offset:0};let m=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return rN(r,m,n);if(a&&r.contentEditable!="false")return iA(r,m,n);let y=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:y}}function rN(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let c=kc(t,a,a+1).getClientRects();for(let h=0;h<c.length;h++){let f=c[h];if(f.top==f.bottom)continue;o||(o=e-f.left);let d=(f.top>n?f.top-n:n-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&d<s){let m=e>=(f.left+f.right)/2,y=m;if((Se.chrome||Se.gecko)&&kc(t,a).getBoundingClientRect().left==f.right&&(y=!m),d<=0)return{node:t,offset:a+(y?1:0)};i=a+(y?1:0),s=d}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function j7(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,c,{docHeight:h}=t.viewState,{x:f,y:d}=e,m=d-a;if(m<0)return 0;if(m>h)return t.state.doc.length;for(let P=t.viewState.heightOracle.textHeight/2,M=!1;c=t.elementAtHeight(m),c.type!=Dr.Text;)for(;m=r>0?c.bottom+P:c.top-P,!(m>=0&&m<=h);){if(M)return n?null:0;M=!0,r=-r}d=a+m;let y=c.from;if(y<t.viewport.from)return t.viewport.from==0?0:n?null:iN(t,o,c,f,d);if(y>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:iN(t,o,c,f,d);let v=t.dom.ownerDocument,w=t.root.elementFromPoint?t.root:v,_=w.elementFromPoint(f,d);_&&!t.contentDOM.contains(_)&&(_=null),_||(f=Math.max(o.left+1,Math.min(o.right-1,f)),_=w.elementFromPoint(f,d),_&&!t.contentDOM.contains(_)&&(_=null));let S,A=-1;if(_&&((i=t.docView.nearest(_))===null||i===void 0?void 0:i.isEditable)!=!1){if(v.caretPositionFromPoint){let P=v.caretPositionFromPoint(f,d);P&&({offsetNode:S,offset:A}=P)}else if(v.caretRangeFromPoint){let P=v.caretRangeFromPoint(f,d);P&&({startContainer:S,startOffset:A}=P,(!t.contentDOM.contains(S)||Se.safari&&ule(S,A,f)||Se.chrome&&hle(S,A,f))&&(S=void 0))}S&&(A=Math.min(mo(S),A))}if(!S||!t.docView.dom.contains(S)){let P=cn.find(t.docView,y);if(!P)return m>c.top+c.height/2?c.to:c.from;({node:S,offset:A}=iA(P.dom,f,d))}let k=t.docView.nearest(S);if(!k)return null;if(k.isWidget&&((s=k.dom)===null||s===void 0?void 0:s.nodeType)==1){let P=k.dom.getBoundingClientRect();return e.y<P.top||e.y<=P.bottom&&e.x<=(P.left+P.right)/2?k.posAtStart:k.posAtEnd}else return k.localPosFromDOM(S,A)+k.posAtStart}function iN(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,c=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=c*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+HC(o,s,t.state.tabSize)}function ule(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return kc(t,r-1,r).getBoundingClientRect().right>n}function hle(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():kc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function sA(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Dr.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function fle(t,e,n,r){let i=sA(t,e.head,e.assoc||-1),s=!r||i.type!=Dr.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),c=t.posAtCoords({x:n==(a==Nt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(c!=null)return fe.cursor(c,n?-1:1)}return fe.cursor(n?i.to:i.from,n?-1:1)}function sN(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,c=null;;){let h=Jae(i,s,o,a,n),f=S7;if(!h){if(i.number==(n?t.state.doc.lines:1))return a;f=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),h=t.visualLineSide(i,!n)}if(c){if(!c(f))return a}else{if(!r)return h;c=r(f)}a=h}}function dle(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==zt.Space&&(i=o),i==o}}function ple(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return fe.cursor(i,e.assoc);let o=e.goalColumn,a,c=t.contentDOM.getBoundingClientRect(),h=t.coordsAtPos(i,e.assoc||-1),f=t.documentTop;if(h)o==null&&(o=h.left-c.left),a=s<0?h.top:h.bottom;else{let y=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(c.right-c.left,t.defaultCharacterWidth*(i-y.from))),a=(s<0?y.top:y.bottom)+f}let d=c.left+o,m=r??t.viewState.heightOracle.textHeight>>1;for(let y=0;;y+=10){let v=a+(m+y)*s,w=j7(t,{x:d,y:v},!1,s);if(v<c.top||v>c.bottom||(s<0?w<i:w>i)){let _=t.docView.coordsForChar(w),S=!_||v<_.top?-1:1;return fe.cursor(w,S,void 0,o)}}}function Sb(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let c=r||n||(e-s<o-e?-1:1);e=c<0?s:o,r=c}});if(!r)return e}}function $7(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Sb(t,i.from,0);o!=i.from&&(s=fe.cursor(o,-1))}else{let o=Sb(t,i.from,-1),a=Sb(t,i.to,1);(o!=i.from||a!=i.to)&&(s=fe.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?fe.create(n,e.mainIndex):e}function _2(t,e,n){let r=Sb(t.state.facet(qx).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:fe.cursor(r,r<n.from?1:-1)}const cp="";class mle{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ht.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=cp}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=Et.get(i),c=Et.get(o);(a&&c?a.breakAfter:(a?a.breakAfter:hv(i))||hv(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let c of this.points)c.node==e&&c.pos>this.text.length&&(c.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=Et.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(gle(e,r.node,r.offset)?n:0))}}function gle(t,e,n){for(;;){if(!e||n<mo(e))return!1;if(e==t)return!0;n=Ac(e)+1,e=e.parentNode}}class oN{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class yle{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:xle(e),c=new mle(a,e.state);c.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=c.text,this.newSel=wle(a,this.bounds.from)}else{let a=e.observer.selectionRange,c=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!GC(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!GC(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),f=e.viewport;if((Se.ios||Se.chrome)&&e.state.selection.main.empty&&c!=h&&(f.from>0||f.to<e.state.doc.length)){let d=Math.min(c,h),m=Math.max(c,h),y=f.from-d,v=f.to-m;(y==0||y==1||d==0)&&(v==0||v==-1||m==e.state.doc.length)&&(c=0,h=e.state.doc.length)}this.newSel=fe.single(h,c)}}}function V7(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,c=i.from,h=null;(s===8||Se.android&&e.text.length<a-o)&&(c=i.to,h="end");let f=vle(t.state.doc.sliceString(o,a,cp),e.text,c-o,h);f&&(Se.chrome&&s==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==cp+cp&&f.toB--,n={from:o+f.from,to:o+f.toA,insert:dt.of(e.text.slice(f.from,f.toB).split(cp))})}else r&&(!t.hasFocus&&t.state.facet(qo)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Se.mac||Se.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=fe.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:dt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:Se.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=fe.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:dt.of([" "])}),n)return XE(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(r=$7(t.state.facet(qx).map(c=>c(t)),r))),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function XE(t,e,n,r=-1){if(Se.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Se.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&bh(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&bh(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&bh(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=ble(t,e,n));return t.state.facet(E7).some(c=>c(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function ble(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",c=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+c))}else{let a=i.changes(e),c=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=t.state.sliceDoc(e.from,e.to),f,d=n&&B7(t,n.main.head);if(d){let v=e.insert.length-(e.to-e.from);f={from:d.from,to:d.to-v}}else f=t.state.doc.lineAt(s.head);let m=s.to-e.to,y=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:c||v.map(a)};let w=v.to-m,_=w-h.length;if(v.to-v.from!=y||t.state.sliceDoc(_,w)!=h||v.to>=f.from&&v.from<=f.to)return{range:v};let S=i.changes({from:_,to:w,insert:e.insert}),A=v.to-s.to;return{changes:S,range:c?fe.range(Math.max(0,c.anchor+A),Math.max(0,c.head+A)):v.map(S)}})}else r={changes:a,selection:c&&i.selection.replaceRange(c)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function vle(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let c=Math.max(0,s-Math.min(o,a));n-=o+c-s}if(o<s&&t.length<e.length){let c=n<=s&&n>=o?s-n:0;s-=c,a=s+(a-o),o=s}else if(a<s){let c=n<=s&&n>=a?s-n:0;s-=c,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function xle(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new oN(n,r)),(i!=n||s!=r)&&e.push(new oN(i,s))),e}function wle(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?fe.single(n+e,r+e):null}class Sle{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Se.safari&&e.contentDOM.addEventListener("input",()=>null),Se.gecko&&jle(e.contentDOM.ownerDocument)}handleEvent(e){!Mle(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=_le(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&z7.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Se.android&&Se.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Se.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=F7.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Cle.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,bh(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Se.safari&&!Se.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function aN(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Kr(n.state,i)}}}function _le(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let c=s[a];c&&n(a).handlers.push(aN(r.value,c))}if(o)for(let a in o){let c=o[a];c&&n(a).observers.push(aN(r.value,c))}}for(let r in As)n(r).handlers.push(As[r]);for(let r in es)n(r).observers.push(es[r]);return e}const F7=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Cle="dthko",z7=[16,17,18,20,91,92,224,225],gy=6;function yy(t){return Math.max(0,t)*.7+8}function Ale(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class kle{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Dae(e.contentDOM),this.atoms=e.state.facet(qx).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ht.allowMultipleSelections)&&Ele(e,n),this.dragging=Rle(e,n)&&q7(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Ale(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let c=YE(this.view);e.clientX-c.left<=i+gy?n=-yy(i-e.clientX):e.clientX+c.right>=o-gy&&(n=yy(e.clientX-o)),e.clientY-c.top<=s+gy?r=-yy(s-e.clientY):e.clientY+c.bottom>=a-gy&&(r=yy(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=$7(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Ele(t,e){let n=t.state.facet(_7);return n.length?n[0](e):Se.mac?e.metaKey:e.ctrlKey}function Tle(t,e){let n=t.state.facet(C7);return n.length?n[0](e):Se.mac?!e.altKey:!e.ctrlKey}function Rle(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=tm(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Mle(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Et.get(n))&&r.ignoreEvent(e))return!1;return!0}const As=Object.create(null),es=Object.create(null),U7=Se.ie&&Se.ie_version<15||Se.ios&&Se.webkit_version<604;function Ole(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),H7(t,n.value)},50)}function Wx(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function H7(t,e){e=Wx(t.state,WE,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(oA!=null&&n.selection.ranges.every(c=>c.empty)&&oA==s.toString()){let c=-1;r=n.changeByRange(h=>{let f=n.doc.lineAt(h.from);if(f.from==c)return{range:h};c=f.from;let d=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:f.from,insert:d},range:fe.cursor(h.from+d.length)}})}else o?r=n.changeByRange(c=>{let h=s.line(i++);return{changes:{from:c.from,to:c.to,insert:h.text},range:fe.cursor(c.from+h.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}es.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};As.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);es.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};es.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};As.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(A7))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Lle(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new kle(t,e,n,r)),r&&t.observer.ignore(()=>{i7(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function lN(t,e,n,r){if(r==1)return fe.cursor(e,n);if(r==2)return ale(t.state,e,n);{let i=cn.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,fe.range(o,a)}}let cN=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Ple(t,e,n,r){let i=cn.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&cN(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&cN(n,r,a)?1:o&&o.bottom>=r?-1:1}function uN(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Ple(t,n,e.clientX,e.clientY)}}const Dle=Se.ie&&Se.ie_version<=11;let hN=null,fN=0,dN=0;function q7(t){if(!Dle)return t.detail;let e=hN,n=dN;return hN=t,dN=Date.now(),fN=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(fN+1)%3:1}function Lle(t,e){let n=uN(t,e),r=q7(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let c=uN(t,s),h,f=lN(t,c.pos,c.bias,r);if(n.pos!=c.pos&&!o){let d=lN(t,n.pos,n.bias,r),m=Math.min(d.from,f.from),y=Math.max(d.to,f.to);f=m<f.from?fe.range(m,y):fe.range(y,m)}return o?i.replaceRange(i.main.extend(f.from,f.to)):a&&r==1&&i.ranges.length>1&&(h=Ile(i,c.pos))?h:a?i.addRange(f):fe.create([f])}}}function Ile(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return fe.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}As.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=fe.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Wx(t.state,GE,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};As.dragend=t=>(t.inputState.draggedContent=null,!1);function pN(t,e,n,r){if(n=Wx(t.state,WE,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&Tle(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},c=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:c,selection:{anchor:c.mapPos(i,-1),head:c.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}As.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&pN(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return pN(t,e,r,!0),!0}return!1};As.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=U7?null:e.clipboardData;return n?(H7(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Ole(t),!1)};function Nle(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Ble(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Wx(t,GE,e.join(t.lineBreak)),ranges:n,linewise:r}}let oA=null;As.copy=As.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=Ble(t.state);if(!n&&!i)return!1;oA=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=U7?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Nle(t,n),!1)};const W7=sa.define();function G7(t,e){let n=[];for(let r of t.facet(T7)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:W7.of(!0)}):null}function K7(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=G7(t.state,e);n?t.dispatch(n):t.update([])}},10)}es.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),K7(t)};es.blur=t=>{t.observer.clearSelectionRange(),K7(t)};es.compositionstart=es.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};es.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Se.chrome&&Se.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};es.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};As.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],c=t.posAtDOM(a.startContainer,a.startOffset),h=t.posAtDOM(a.endContainer,a.endOffset);return XE(t,{from:c,to:h,insert:t.state.toText(s)},null),!0}}let i;if(Se.chrome&&Se.android&&(i=F7.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Se.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Se.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>es.compositionend(t,e),20),!1};const mN=new Set;function jle(t){mN.has(t)||(mN.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const gN=["pre-wrap","normal","pre-line","break-spaces"];let Dh=!1;function yN(){Dh=!1}class $le{constructor(e){this.lineWrapping=e,this.doc=dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return gN.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=gN.indexOf(e)>-1,c=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,c){this.heightSamples={};for(let h=0;h<o.length;h++){let f=o[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return c}}class Vle{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Zs{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Dr.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof gl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Zs(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var It=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(It||(It={}));const _b=.001;class Lr{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>_b&&(Dh=!0),this.height=e)}replace(e,n,r){return Lr.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:c,toA:h,fromB:f,toB:d}=i[a],m=s.lineAt(c,It.ByPosNoHeight,r.setDoc(n),0,0),y=m.to>=h?m:s.lineAt(h,It.ByPosNoHeight,r,0,0);for(d+=y.to-h,h=y.to;a>0&&m.from<=i[a-1].toA;)c=i[a-1].fromA,f=i[a-1].fromB,a--,c<m.from&&(m=s.lineAt(c,It.ByPosNoHeight,r,0,0));f+=m.from-c,c=m.from;let v=JE.build(r.setDoc(o),e,f,d);s=pv(s,s.replace(c,h,v))}return s.updateHeight(r,0)}static empty(){return new Si(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new Fle(Lr.of(e.slice(0,n)),o,Lr.of(e.slice(r)))}}function pv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Dh=!0),e)}Lr.prototype.size=1;class Y7 extends Lr{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Zs(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Si extends Y7{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Zs(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Si||i instanceof qn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof qn?i=new Si(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Lr.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class qn extends Lr{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let c=Math.min(this.height,e.lineHeight*s);o=c/s,this.length>s+1&&(a=(this.height-c)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:c}=this.heightMetrics(n,i);if(n.lineWrapping){let h=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),f=n.doc.lineAt(h),d=a+f.length*c,m=Math.max(r,e-d/2);return new Zs(f.from,f.length,m,d,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:f,length:d}=n.doc.line(s+h);return new Zs(f,d,r+a*h,a,0)}}lineAt(e,n,r,i,s){if(n==It.ByHeight)return this.blockAt(e,r,i,s);if(n==It.ByPosNoHeight){let{from:y,to:v}=r.doc.lineAt(e);return new Zs(y,v-y,0,0,0)}let{firstLine:o,perLine:a,perChar:c}=this.heightMetrics(r,s),h=r.doc.lineAt(e),f=a+h.length*c,d=h.number-o,m=i+a*d+c*(h.from-s-d);return new Zs(h.from,h.length,Math.max(i,Math.min(m,i+this.height-f)),f,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,s);for(let f=e,d=i;f<=n;){let m=r.doc.lineAt(f);if(f==e){let v=m.number-a;d+=c*v+h*(e-s-v)}let y=c+h*m.length;o(new Zs(m.from,m.length,d,y,0)),d+=y,f=m.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof qn?r[r.length-1]=new qn(s.length+i):r.push(null,new qn(i-1))}if(e>0){let s=r[0];s instanceof qn?r[0]=new qn(e+s.length):r.unshift(new qn(e-1),null)}return Lr.of(r)}decomposeLeft(e,n){n.push(new qn(e-1),null)}decomposeRight(e,n){n.push(null,new qn(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),c=-1;for(i.from>n&&o.push(new qn(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let f=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];c==-1?c=d:Math.abs(d-c)>=_b&&(c=-2);let m=new Si(f,d);m.outdated=!1,o.push(m),a+=f+1}a<=s&&o.push(null,new qn(s-a).updateHeight(e,a));let h=Lr.of(o);return(c<0||Math.abs(h.height-this.height)>=_b||Math.abs(c-this.heightMetrics(e,n).perLine)>=_b)&&(Dh=!0),pv(this,h)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Fle extends Lr{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,c=n==It.ByHeight?e<o:e<a,h=c?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(c?h.to<a:h.from>a))return h;let f=n==It.ByPosNoHeight?It.ByPosNoHeight:It.ByPos;return c?h.join(this.right.lineAt(a,f,r,o,a)):this.left.lineAt(a,f,r,i,s).join(h)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,c=s+this.left.length+this.break;if(this.break)e<c&&this.left.forEachLine(e,n,r,i,s,o),n>=c&&this.right.forEachLine(e,n,r,a,c,o);else{let h=this.lineAt(c,It.ByPos,r,i,s);e<h.from&&this.left.forEachLine(e,h.from-1,r,i,s,o),h.to>=e&&h.from<=n&&o(h),n>h.to&&this.right.forEachLine(h.to+1,n,r,a,c,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&bN(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),bN(s,a)}return Lr.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Lr.of(this.break?[e,null,n]:[e,n]):(this.left=pv(this.left,e),this.right=pv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,c=null;return i&&i.from<=n+s.length&&i.more?c=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?c=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),c?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function bN(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof qn&&(r=t[e+1])instanceof qn&&t.splice(e-1,3,new qn(n.length+1+r.length))}const zle=5;class JE{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Si?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Si(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new Y7(o,i,r)):(o||s||i>=zle)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Si(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new qn(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Si)return e;let n=new Si(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Si)&&!this.isCovered?this.nodes.push(new Si(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Si&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new JE(r,e);return ft.spans(n,r,i,s,0),s.finish(r)}}function Ule(t,e,n){let r=new Hle;return ft.compare(t,e,n,r,0),r.changes}class Hle{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&wb(e,n,this.changes,5)}}function qle(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),c=Math.min(i.innerHeight,n.bottom);for(let h=t.parentNode;h&&h!=r.body;)if(h.nodeType==1){let f=h,d=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&d.overflow!="visible"){let m=f.getBoundingClientRect();s=Math.max(s,m.left),o=Math.min(o,m.right),a=Math.max(a,m.top),c=Math.min(h==t.parentNode?i.innerHeight:c,m.bottom)}h=d.position=="absolute"||d.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,c)-(n.top+e)}}function Wle(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Gle(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class C2{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Ue.replace({widget:new Kle(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Kle extends wl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class vN{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=xN,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Nt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(KE).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new $le(n),this.stateDeco=e.facet(rm).filter(r=>typeof r!="function"),this.heightMap=Lr.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle.setDoc(e.doc),[new Ji(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ue.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new by(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?xN:new QE(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(up(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(rm).filter(f=>typeof f!="function");let i=e.changedRanges,s=Ji.extendWithRanges(i,Ule(r,this.stateDeco,e?e.changes:An.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);yN(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Dh)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let c=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<c.from||n.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,n));let h=c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(M7)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Nt.RTL:Nt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),c=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,f=0;if(a.width&&a.height){let{scaleX:P,scaleY:M}=r7(n,a);(P>.005&&Math.abs(this.scaleX-P)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=P,this.scaleY=M,h|=16,o=c=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,m=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=m)&&(this.paddingTop=d,this.paddingBottom=m,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(c=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let y=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=y&&(this.scrollAnchorHeight=-1,this.scrollTop=y),this.scrolledToBottom=o7(e.scrollDOM);let v=(this.printing?Gle:qle)(n,this.paddingTop),w=v.top-this.pixelViewport.top,_=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let S=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(S!=this.inView&&(this.inView=S,S&&(c=!0)),!this.inView&&!this.scrollTarget&&!Wle(e.dom))return 0;let A=a.width;if((this.contentDOMWidth!=A||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),c){let P=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(P)&&(o=!0),o||i.lineWrapping&&Math.abs(A-this.contentDOMWidth)>i.charWidth){let{lineHeight:M,charWidth:O,textHeight:L}=e.docView.measureTextSize();o=M>0&&i.refresh(s,M,O,L,Math.max(5,A/O),P),o&&(e.docView.minWidth=0,h|=16)}w>0&&_>0?f=Math.max(w,_):w<0&&_<0&&(f=Math.min(w,_)),yN();for(let M of this.viewports){let O=M.from==this.viewport.from?P:e.docView.measureVisibleLineHeights(M);this.heightMap=(o?Lr.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle,[new Ji(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new Vle(M.from,O))}Dh&&(h|=2)}let k=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,c=new by(i.lineAt(o-r*1e3,It.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,It.ByHeight,s,0,0).to);if(n){let{head:h}=n.range;if(h<c.from||h>c.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(h,It.ByPos,s,0,0),m;n.y=="center"?m=(d.top+d.bottom)/2-f/2:n.y=="start"||n.y=="nearest"&&h<c.from?m=d.top:m=d.bottom-f,c=new by(i.lineAt(m-1e3/2,It.ByHeight,s,0,0).from,i.lineAt(m+f+1e3/2,It.ByHeight,s,0,0).to)}}return c}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new by(this.heightMap.lineAt(r,It.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,It.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,It.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new C2(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Nt.LTR&&!r)return[];let a=[],c=(f,d,m,y)=>{if(d-f<s)return;let v=this.state.selection.main,w=[v.from];v.empty||w.push(v.to);for(let S of w)if(S>f&&S<d){c(f,S-10,m,y),c(S+10,d,m,y);return}let _=Xle(e,S=>S.from>=m.from&&S.to<=m.to&&Math.abs(S.from-f)<s&&Math.abs(S.to-d)<s&&!w.some(A=>S.from<A&&S.to>A));if(!_){if(d<m.to&&n&&r&&n.visibleRanges.some(k=>k.from<=d&&k.to>=d)){let k=n.moveToLineBoundary(fe.cursor(d),!1,!0).head;k>f&&(d=k)}let S=this.gapSize(m,f,d,y),A=r||S<2e6?S:2e6;_=new C2(f,d,S,A)}a.push(_)},h=f=>{if(f.length<o||f.type!=Dr.Text)return;let d=Yle(f.from,f.to,this.stateDeco);if(d.total<o)return;let m=this.scrollTarget?this.scrollTarget.range.head:null,y,v;if(r){let w=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,_,S;if(m!=null){let A=xy(d,m),k=((this.visibleBottom-this.visibleTop)/2+w)/f.height;_=A-k,S=A+k}else _=(this.visibleTop-f.top-w)/f.height,S=(this.visibleBottom-f.top+w)/f.height;y=vy(d,_),v=vy(d,S)}else{let w=d.total*this.heightOracle.charWidth,_=i*this.heightOracle.charWidth,S=0;if(w>2e6)for(let O of e)O.from>=f.from&&O.from<f.to&&O.size!=O.displaySize&&O.from*this.heightOracle.charWidth+S<this.pixelViewport.left&&(S=O.size-O.displaySize);let A=this.pixelViewport.left+S,k=this.pixelViewport.right+S,P,M;if(m!=null){let O=xy(d,m),L=((k-A)/2+_)/w;P=O-L,M=O+L}else P=(A-_)/w,M=(k+_)/w;y=vy(d,P),v=vy(d,M)}y>f.from&&c(f.from,y,f,d),v<f.to&&c(v,f.to,f,d)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return a}gapSize(e,n,r,i){let s=xy(i,r)-xy(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){C2.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ue.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];ft.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||up(this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||up(this.heightMap.lineAt(this.scaler.fromDOM(e),It.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return up(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class by{constructor(e,n){this.from=e,this.to=n}}function Yle(t,e,n){let r=[],i=t,s=0;return ft.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function vy({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function xy(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function Xle(t,e){for(let n of t)if(e(n))return n}const xN={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class QE{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:c})=>{let h=n.lineAt(a,It.ByPos,e,0,0).top,f=n.lineAt(c,It.ByPos,e,0,0).bottom;return i+=f-h,{from:a,to:c,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof QE?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function up(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Zs(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>up(i,e)):t._content)}const wy=Ce.define({combine:t=>t.join(" ")}),aA=Ce.define({combine:t=>t.indexOf(!0)>-1}),lA=pl.newName(),X7=pl.newName(),J7=pl.newName(),Q7={"&light":"."+X7,"&dark":"."+J7};function cA(t,e,n){return new pl(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Jle=cA("."+lA,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Q7),Qle={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},A2=Se.ie&&Se.ie_version<=11;class Zle{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Lae,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Se.ie&&Se.ie_version<=11||Se.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Se.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Se.chrome&&Se.chrome_version<126)&&(this.editContext=new tce(e),e.state.facet(qo)&&(e.contentDOM.editContext=this.editContext.editContext)),A2&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(qo)?r.root.activeElement!=this.dom:!xb(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Se.ie&&Se.ie_version<=11||Se.android&&Se.chrome)&&!r.state.selection.main.empty&&i.focusNode&&kp(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=tm(e.root);if(!n)return!1;let r=Se.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&ece(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=xb(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Nae(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Qle),A2&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),A2&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&bh(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&xb(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new yle(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=V7(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=wN(n,e.previousSibling||e.target.previousSibling,-1),i=wN(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(qo)!=e.state.facet(qo)&&(e.view.contentDOM.editContext=e.state.facet(qo)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function wN(t,e,n){for(;e;){let r=Et.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function SN(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return kp(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function ece(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return SN(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?SN(t,n):null}class tce{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),c=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let h={from:a,to:c,insert:dt.of(r.text.split(`
`))};if(h.from==this.from&&s<this.from?h.from=s:h.to==this.to&&s>this.to&&(h.to=s),h.from==h.to&&!h.insert.length){let f=fe.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));f.main.eq(i)||e.dispatch({selection:f,userEvent:"select"});return}if((Se.mac||Se.android)&&h.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:a,to:c,insert:dt.of([r.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let f=this.to-this.from+(h.to-h.from+h.insert.length);XE(e,h,fe.single(this.toEditorPos(r.selectionStart,f),this.toEditorPos(r.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let c=e.coordsForChar(o);s=c&&new DOMRect(c.left,c.top,c.right-c.left,c.bottom-c.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let c=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(c<h){let f=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Ue.mark({attributes:{style:f}}).range(c,h))}}}e.dispatch({effects:P7.of(Ue.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=tm(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,c,h)=>{if(r)return;let f=h.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(h)){i=this.pendingContextChange=null,n+=f,this.to+=f;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=f,this.to+=f;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=f}n+=f}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class _e{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Iae(e.parent)||document,this.viewState=new vN(e.state||ht.create(e)),e.scrollTo&&e.scrollTo.is(my)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(th).map(i=>new w2(i));for(let i of this.plugins)i.update(this);this.observer=new Zle(this),this.inputState=new Sle(this),this.inputState.ensureHandlers(this.plugins),this.docView=new eN(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof kn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let m of e){if(m.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=m.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,c=null;e.some(m=>m.annotation(W7))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,c=G7(s,o),c||(a=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(ht.phrases)!=this.state.facet(ht.phrases))return this.setState(s);i=dv.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let m of e){if(d&&(d=d.map(m.changes)),m.scrollIntoView){let{main:y}=m.state.selection;d=new vh(y.empty?y:fe.cursor(y.head,y.head>y.anchor?-1:1))}for(let y of m.effects)y.is(my)&&(d=y.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=mv.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(lp)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(m=>m.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(wy)!=i.state.facet(wy)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let m of this.state.facet(rA))try{m(i)}catch(y){Kr(this.state,y,"update listener")}(c||f)&&Promise.resolve().then(()=>{c&&this.state==c.startState&&this.dispatch(c),f&&!V7(this,f)&&h.force&&bh(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new vN(e),this.plugins=e.facet(th).map(r=>new w2(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new eN(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(th),r=e.state.facet(th);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new w2(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Kr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(o7(r))s=-1,o=this.viewState.heightMap.height;else{let y=this.viewState.scrollAnchorAt(i);s=y.from,o=y.top}this.updateState=1;let c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];c&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(y=>{try{return y.read(this)}catch(v){return Kr(this.state,v),_N}}),d=dv.create(this,this.state,[]),m=!1;d.flags|=c,n?n.flags|=c:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),m=this.docView.update(d),m&&this.docViewUpdate());for(let y=0;y<h.length;y++)if(f[y]!=_N)try{let v=h[y];v.write&&v.write(f[y],this)}catch(v){Kr(this.state,v)}if(m&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(v>1||v<-1){i=i+v,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(rA))a(n)}get themeClasses(){return lA+" "+(this.state.facet(aA)?J7:X7)+" "+this.state.facet(wy)}updateAttrs(){let e=CN(this,D7,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(qo)?"true":"false",class:"cm-content",style:`${Se.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),CN(this,KE,n);let r=this.observer.ignore(()=>{let i=QC(this.contentDOM,this.contentAttrs,n),s=QC(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(_e.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(lp);let e=this.state.facet(_e.cspNonce);pl.mount(this.root,this.styleModules.concat(Jle).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return _2(this,e,sN(this,e,n,r))}moveByGroup(e,n){return _2(this,e,sN(this,e,n,r=>dle(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return fe.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return fle(this,e,n,r)}moveVertically(e,n,r){return _2(this,e,ple(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),j7(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[il.find(s,e-i.from,-1,n)];return Ux(r,o.dir==Nt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(R7)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>nce)return w7(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||x7(s.isolates,r=ZI(this,e))))return s.order;r||(r=ZI(this,e));let i=Xae(e.text,n,r);return this.bidiCache.push(new mv(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Se.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{i7(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return my.of(new vh(typeof e=="number"?fe.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return my.of(new vh(fe.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return gn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return gn.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=pl.newName(),i=[wy.of(r),lp.of(cA(`.${r}`,e))];return n&&n.dark&&i.push(aA.of(!0)),i}static baseTheme(e){return Bc.lowest(lp.of(cA("."+lA,e,Q7)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Et.get(r)||Et.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}}_e.styleModule=lp;_e.inputHandler=E7;_e.clipboardInputFilter=WE;_e.clipboardOutputFilter=GE;_e.scrollHandler=O7;_e.focusChangeEffect=T7;_e.perLineTextDirection=R7;_e.exceptionSink=k7;_e.updateListener=rA;_e.editable=qo;_e.mouseSelectionStyle=A7;_e.dragMovesSelection=C7;_e.clickAddsSelectionRange=_7;_e.decorations=rm;_e.outerDecorations=L7;_e.atomicRanges=qx;_e.bidiIsolatedRanges=I7;_e.scrollMargins=N7;_e.darkTheme=aA;_e.cspNonce=Ce.define({combine:t=>t.length?t[0]:""});_e.contentAttributes=KE;_e.editorAttributes=D7;_e.lineWrapping=_e.contentAttributes.of({class:"cm-lineWrapping"});_e.announce=Qe.define();const nce=4096,_N={};class mv{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:Nt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new mv(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function CN(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&JC(o,n)}return n}const rce=Se.mac?"mac":Se.windows?"win":Se.linux?"linux":"key";function ice(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let c=0;c<n.length-1;++c){const h=n[c];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Sy(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const sce=Bc.default(_e.domEventHandlers({keydown(t,e){return eF(Z7(e.state),t,e,"editor")}})),ZE=Ce.define({enables:sce}),AN=new WeakMap;function Z7(t){let e=t.facet(ZE),n=AN.get(e);return n||AN.set(e,n=lce(e.reduce((r,i)=>r.concat(i),[]))),n}function oce(t,e,n){return eF(Z7(t.state),e,t,n)}let el=null;const ace=4e3;function lce(t,e=rce){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let c=r[o];if(c==null)r[o]=a;else if(c!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,c,h,f)=>{var d,m;let y=n[o]||(n[o]=Object.create(null)),v=a.split(/ (?!$)/).map(S=>ice(S,e));for(let S=1;S<v.length;S++){let A=v.slice(0,S).join(" ");i(A,!0),y[A]||(y[A]={preventDefault:!0,stopPropagation:!1,run:[k=>{let P=el={view:k,prefix:A,scope:o};return setTimeout(()=>{el==P&&(el=null)},ace),!0}]})}let w=v.join(" ");i(w,!1);let _=y[w]||(y[w]={preventDefault:!1,stopPropagation:!1,run:((m=(d=y._any)===null||d===void 0?void 0:d.run)===null||m===void 0?void 0:m.slice())||[]});c&&_.run.push(c),h&&(_.preventDefault=!0),f&&(_.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of a){let f=n[h]||(n[h]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let m in f)f[m].run.push(y=>d(y,uA))}let c=o[e]||o.key;if(c)for(let h of a)s(h,c,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+c,o.shift,o.preventDefault,o.stopPropagation)}return n}let uA=null;function eF(t,e,n,r){uA=e;let i=Mae(e),s=qr(i,0),o=Qs(s)==i.length&&i!=" ",a="",c=!1,h=!1,f=!1;el&&el.view==n&&el.scope==r&&(a=el.prefix+" ",z7.indexOf(e.keyCode)<0&&(h=!0,el=null));let d=new Set,m=_=>{if(_){for(let S of _.run)if(!d.has(S)&&(d.add(S),S(n)))return _.stopPropagation&&(f=!0),!0;_.preventDefault&&(_.stopPropagation&&(f=!0),h=!0)}return!1},y=t[r],v,w;return y&&(m(y[a+Sy(i,e,!o)])?c=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Se.windows&&e.ctrlKey&&e.altKey)&&!(Se.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(v=ml[e.keyCode])&&v!=i?(m(y[a+Sy(v,e,!0)])||e.shiftKey&&(w=em[e.keyCode])!=i&&w!=v&&m(y[a+Sy(w,e,!1)]))&&(c=!0):o&&e.shiftKey&&m(y[a+Sy(i,e,!0)])&&(c=!0),!c&&m(y._any)&&(c=!0)),h&&(c=!0),c&&f&&e.stopPropagation(),uA=null,c}class zm{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=tF(e);return[new zm(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return cce(e,n,r)}}function tF(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Nt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function kN(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),c=t.posAtCoords({x:s.right-1,y:o});return a==null||c==null?r:{from:Math.max(r.from,Math.min(a,c)),to:Math.min(r.to,Math.max(a,c))}}function cce(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==Nt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),c=tF(t),h=o.querySelector(".cm-line"),f=h&&window.getComputedStyle(h),d=a.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),m=a.right-(f?parseInt(f.paddingRight):0),y=sA(t,r,1),v=sA(t,i,-1),w=y.type==Dr.Text?y:null,_=v.type==Dr.Text?v:null;if(w&&(t.lineWrapping||y.widgetLineBreaks)&&(w=kN(t,r,1,w)),_&&(t.lineWrapping||v.widgetLineBreaks)&&(_=kN(t,i,-1,_)),w&&_&&w.from==_.from&&w.to==_.to)return A(k(n.from,n.to,w));{let M=w?k(n.from,null,w):P(y,!1),O=_?k(null,n.to,_):P(v,!0),L=[];return(w||y).to<(_||v).from-(w&&_?1:0)||y.widgetLineBreaks>1&&M.bottom+t.defaultLineHeight/2<O.top?L.push(S(d,M.bottom,m,O.top)):M.bottom<O.top&&t.elementAtHeight((M.bottom+O.top)/2).type==Dr.Text&&(M.bottom=O.top=(M.bottom+O.top)/2),A(M).concat(L).concat(A(O))}function S(M,O,L,N){return new zm(e,M-c.left,O-c.top,L-M,N-O)}function A({top:M,bottom:O,horizontal:L}){let N=[];for(let z=0;z<L.length;z+=2)N.push(S(L[z],M,L[z+1],O));return N}function k(M,O,L){let N=1e9,z=-1e9,j=[];function H(G,ie,F,Y,q){let se=t.coordsAtPos(G,G==L.to?-2:2),T=t.coordsAtPos(F,F==L.from?2:-2);!se||!T||(N=Math.min(se.top,T.top,N),z=Math.max(se.bottom,T.bottom,z),q==Nt.LTR?j.push(s&&ie?d:se.left,s&&Y?m:T.right):j.push(!s&&Y?d:T.left,!s&&ie?m:se.right))}let W=M??L.from,X=O??L.to;for(let G of t.visibleRanges)if(G.to>W&&G.from<X)for(let ie=Math.max(G.from,W),F=Math.min(G.to,X);;){let Y=t.state.doc.lineAt(ie);for(let q of t.bidiSpans(Y)){let se=q.from+Y.from,T=q.to+Y.from;if(se>=F)break;T>ie&&H(Math.max(se,ie),M==null&&se<=W,Math.min(T,F),O==null&&T>=X,q.dir)}if(ie=Y.to+1,ie>=F)break}return j.length==0&&H(W,M==null,X,O==null,t.textDirection),{top:N,bottom:z,horizontal:j}}function P(M,O){let L=a.top+(O?M.top:M.bottom);return{top:L,bottom:L,horizontal:[]}}}function uce(t,e){return t.constructor==e.constructor&&t.eq(e)}class hce{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Cb)!=e.state.facet(Cb)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(Cb);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!uce(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Cb=Ce.define();function nF(t){return[gn.define(e=>new hce(e,t)),Cb.of(t)]}const im=Ce.define({combine(t){return xo(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function fce(t={}){return[im.of(t),dce,pce,mce,M7.of(!0)]}function rF(t){return t.startState.facet(im)!=t.state.facet(im)}const dce=nF({above:!0,markers(t){let{state:e}=t,n=e.facet(im),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:fe.cursor(i.head,i.head>i.anchor?-1:1);for(let c of zm.forRange(t,o,a))r.push(c)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=rF(t);return n&&EN(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){EN(e.state,t)},class:"cm-cursorLayer"});function EN(t,e){e.style.animationDuration=t.facet(im).cursorBlinkRate+"ms"}const pce=nF({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:zm.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||rF(t)},class:"cm-selectionLayer"}),mce=Bc.highest(_e.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),iF=Qe.define({map(t,e){return t==null?null:e.mapPos(t)}}),hp=Qn.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(iF)?r.value:n,t)}}),gce=gn.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(hp);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(hp)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(hp),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(hp)!=t&&this.view.dispatch({effects:iF.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function yce(){return[hp,gce]}function TN(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function bce(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class vce{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,c,h,f)=>i(f,h,h+a[0].length,a,c);else if(typeof r=="function")this.addMatch=(a,c,h,f)=>{let d=r(a,c,h);d&&f(h,h+a[0].length,d)};else if(r)this.addMatch=(a,c,h,f)=>f(h,h+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Xo,r=n.add.bind(n);for(let{from:i,to:s}of bce(e,this.maxLength))TN(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,c)=>{c>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(c,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let c=e.state.doc.lineAt(o),h=c.to<a?e.state.doc.lineAt(a):c,f=Math.max(s.from,c.from),d=Math.min(s.to,h.to);if(this.boundary){for(;o>c.from;o--)if(this.boundary.test(c.text[o-1-c.from])){f=o;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){d=a;break}}let m=[],y,v=(w,_,S)=>m.push(S.range(w,_));if(c==h)for(this.regexp.lastIndex=f-c.from;(y=this.regexp.exec(c.text))&&y.index<d-c.from;)this.addMatch(y,e,y.index+c.from,v);else TN(e.state.doc,this.regexp,f,d,(w,_)=>this.addMatch(_,e,w,v));n=n.update({filterFrom:f,filterTo:d,filter:(w,_)=>w<f||_>d,add:m})}}return n}}const hA=/x/.unicode!=null?"gu":"g",xce=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,hA),wce={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let k2=null;function Sce(){var t;if(k2==null&&typeof document<"u"&&document.body){let e=document.body.style;k2=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return k2||!1}const Ab=Ce.define({combine(t){let e=xo(t,{render:null,specialChars:xce,addSpecialChars:null});return(e.replaceTabs=!Sce())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,hA)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,hA)),e}});function _ce(t={}){return[Ab.of(t),Cce()]}let RN=null;function Cce(){return RN||(RN=gn.fromClass(class{constructor(t){this.view=t,this.decorations=Ue.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Ab)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new vce({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=qr(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,c=Xh(o.text,a,r-o.from);return Ue.replace({widget:new Tce((a-c%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Ue.replace({widget:new Ece(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Ab);t.startState.facet(Ab)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Ace="";function kce(t){return t>=32?Ace:t==10?"":String.fromCharCode(9216+t)}class Ece extends wl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=kce(this.code),r=e.state.phrase("Control character")+" "+(wce[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class Tce extends wl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Rce(){return Oce}const Mce=Ue.line({class:"cm-activeLine"}),Oce=gn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(Mce.range(i.from)),e=i.from)}return Ue.set(n)}},{decorations:t=>t.decorations}),fA=2e3;function Pce(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>fA||n.off>fA||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let c=r;c<=i;c++){let h=t.doc.line(c);h.length<=a&&s.push(fe.range(h.from+o,h.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let c=r;c<=i;c++){let h=t.doc.line(c),f=HC(h.text,o,t.tabSize,!0);if(f<0)s.push(fe.cursor(h.to));else{let d=HC(h.text,a,t.tabSize);s.push(fe.range(h.from+f,h.from+d))}}}return s}function Dce(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function MN(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>fA?-1:i==r.length?Dce(t,e.clientX):Xh(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function Lce(t,e){let n=MN(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=MN(t,i);if(!a)return r;let c=Pce(t.state,n,a);return c.length?o?fe.create(c.concat(r.ranges)):fe.create(c):r}}:null}function Ice(t){let e=(n=>n.altKey&&n.button==0);return _e.mouseSelectionStyle.of((n,r)=>e(r)?Lce(n,r):null)}const Nce={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},Bce={style:"cursor: crosshair"};function jce(t={}){let[e,n]=Nce[t.key||"Alt"],r=gn.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,_e.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?Bce:null})]}const Md="-10000px";class sF{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(c=>c);if(i===this.input){for(let c of this.tooltipViews)c.update&&c.update(e);return!1}let o=[],a=n?[]:null;for(let c=0;c<s.length;c++){let h=s[c],f=-1;if(h){for(let d=0;d<this.tooltips.length;d++){let m=this.tooltips[d];m&&m.create==h.create&&(f=d)}if(f<0)o[c]=this.createTooltipView(h,c?o[c-1]:null),a&&(a[c]=!!h.above);else{let d=o[c]=this.tooltipViews[f];a&&(a[c]=n[f]),d.update&&d.update(e)}}}for(let c of this.tooltipViews)o.indexOf(c)<0&&(this.removeTooltipView(c),(r=c.destroy)===null||r===void 0||r.call(c));return n&&(a.forEach((c,h)=>n[h]=c),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function $ce(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const E2=Ce.define({combine:t=>{var e,n,r;return{position:Se.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||$ce}}}),ON=new WeakMap,eT=gn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(E2);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new sF(t,tT,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(E2);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=Md,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Se.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Md&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=YE(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(E2).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let c=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:f}=h,d=t.pos[a],m=t.size[a];if(!d||c.clip!==!1&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){f.style.top=Md;continue}let y=c.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,v=y?7:0,w=m.right-m.left,_=(e=ON.get(h))!==null&&e!==void 0?e:m.bottom-m.top,S=h.offset||Fce,A=this.view.textDirection==Nt.LTR,k=m.width>r.right-r.left?A?r.left:r.right-m.width:A?Math.max(r.left,Math.min(d.left-(y?14:0)+S.x,r.right-w)):Math.min(Math.max(r.left,d.left-w+(y?14:0)-S.x),r.right-w),P=this.above[a];!c.strictSide&&(P?d.top-_-v-S.y<r.top:d.bottom+_+v+S.y>r.bottom)&&P==r.bottom-d.bottom>d.top-r.top&&(P=this.above[a]=!P);let M=(P?d.top-r.top:r.bottom-d.bottom)-v;if(M<_&&h.resize!==!1){if(M<this.view.defaultLineHeight){f.style.top=Md;continue}ON.set(h,_),f.style.height=(_=M)/s+"px"}else f.style.height&&(f.style.height="");let O=P?d.top-_-v-S.y:d.bottom+v+S.y,L=k+w;if(h.overlap!==!0)for(let N of o)N.left<L&&N.right>k&&N.top<O+_&&N.bottom>O&&(O=P?N.top-_-2-v:N.bottom+v+2);if(this.position=="absolute"?(f.style.top=(O-t.parent.top)/s+"px",PN(f,(k-t.parent.left)/i)):(f.style.top=O/s+"px",PN(f,k/i)),y){let N=d.left+(A?S.x:-S.x)-(k+14-7);y.style.left=N/i+"px"}h.overlap!==!0&&o.push({left:k,top:O,right:L,bottom:O+_}),f.classList.toggle("cm-tooltip-above",P),f.classList.toggle("cm-tooltip-below",!P),h.positioned&&h.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Md}},{eventObservers:{scroll(){this.maybeMeasure()}}});function PN(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Vce=_e.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Fce={x:0,y:0},tT=Ce.define({enables:[eT,Vce]}),gv=Ce.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Gx{static create(e){return new Gx(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new sF(e,gv,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const zce=tT.compute([gv],t=>{let e=t.facet(gv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:Gx.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Uce{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof rl)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let c=e.bidiSpans(e.state.doc.lineAt(i)).find(f=>f.from<=i&&f.to>=i),h=c&&c.dir==Nt.RTL?-1:1;s=n.x<a.left?-h:h}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(c=>{this.pending==a&&(this.pending=null,c&&!(Array.isArray(c)&&!c.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(c)?c:[c])}))},c=>Kr(e.state,c,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(eT),n=e?e.manager.tooltips.findIndex(r=>r.create==Gx.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!Hce(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!qce(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const _y=4;function Hce(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-_y&&e.clientX<=r+_y&&e.clientY>=i-_y&&e.clientY<=s+_y}function qce(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let c=t.posAtCoords({x:r,y:i},!1);return c>=e&&c<=n}function Wce(t,e={}){let n=Qe.define(),r=Qn.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let c=s.changes.mapPos(a.pos,-1,Mr.TrackDel);if(c!=null){let h=Object.assign(Object.create(null),a);h.pos=c,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(Gce)&&(i=[]);return i},provide:i=>gv.from(i)});return{active:r,extension:[r,gn.define(i=>new Uce(i,t,r,n,e.hoverTime||300)),zce]}}function oF(t,e){let n=t.plugin(eT);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const Gce=Qe.define(),DN=Ce.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function sm(t,e){let n=t.plugin(aF),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const aF=gn.fromClass(class{constructor(t){this.input=t.state.facet(om),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(DN);this.top=new Cy(t,!0,e.topContainer),this.bottom=new Cy(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(DN);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Cy(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Cy(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(om);if(n!=this.input){let r=n.filter(c=>c),i=[],s=[],o=[],a=[];for(let c of r){let h=this.specs.indexOf(c),f;h<0?(f=c(t.view),a.push(f)):(f=this.panels[h],f.update&&f.update(t)),i.push(f),(f.top?s:o).push(f)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let c of a)c.dom.classList.add("cm-panel"),c.mount&&c.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>_e.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Cy{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=LN(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=LN(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function LN(t){let e=t.nextSibling;return t.remove(),e}const om=Ce.define({enables:aF});class Qo extends Cc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Qo.prototype.elementClass="";Qo.prototype.toDOM=void 0;Qo.prototype.mapMode=Mr.TrackBefore;Qo.prototype.startSide=Qo.prototype.endSide=-1;Qo.prototype.point=!0;const kb=Ce.define(),Kce=Ce.define(),Yce={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ft.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Tp=Ce.define();function Xce(t){return[lF(),Tp.of({...Yce,...t})]}const IN=Ce.define({combine:t=>t.some(e=>e)});function lF(t){return[Jce]}const Jce=gn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Tp).map(e=>new BN(t,e)),this.fixed=!t.state.facet(IN);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(IN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ft.iter(this.view.state.facet(kb),this.view.viewport.from),r=[],i=this.gutters.map(s=>new Qce(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Dr.Text&&o){dA(n,r,a.from);for(let c of i)c.line(this.view,a,r);o=!1}else if(a.widget)for(let c of i)c.widget(this.view,a)}else if(s.type==Dr.Text){dA(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(Tp),n=t.state.facet(Tp),r=t.docChanged||t.heightChanged||t.viewportChanged||!ft.eq(t.startState.facet(kb),t.state.facet(kb),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new BN(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>_e.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Nt.LTR?{left:r,right:i}:{right:r,left:i}})});function NN(t){return Array.isArray(t)?t:[t]}function dA(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Qce{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=ft.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new cF(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];dA(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(Kce)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class BN{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let c=s.getBoundingClientRect();o=(c.top+c.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=NN(n.markers(e)),n.initialSpacer&&(this.spacer=new cF(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=NN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!ft.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class cF{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),Zce(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,c=s<n.length?n[s++]:null,h=!1;if(c){let f=c.elementClass;f&&(r+=" "+f);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(c)){a=d,h=!0;break}}else a=this.markers.length;for(;o<a;){let f=this.markers[o++];if(f.toDOM){f.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!c)break;c.toDOM&&(h?i=i.nextSibling:this.dom.insertBefore(c.toDOM(e),i)),h&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function Zce(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const eue=Ce.define(),tue=Ce.define(),nh=Ce.define({combine(t){return xo(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,c,h)=>s(a,c,h)||o(a,c,h):o}return r}})}});class T2 extends Qo{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function R2(t,e){return t.state.facet(nh).formatNumber(e,t.state)}const nue=Tp.compute([nh],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(eue)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new T2(R2(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(tue)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(nh)!=e.state.facet(nh),initialSpacer(e){return new T2(R2(e,jN(e.state.doc.lines)))},updateSpacer(e,n){let r=R2(n.view,jN(n.view.state.doc.lines));return r==e.number?e:new T2(r)},domEventHandlers:t.facet(nh).domEventHandlers,side:"before"}));function rue(t={}){return[nh.of(t),lF(),nue]}function jN(t){let e=9;for(;e<t;)e=e*10+9;return e}const iue=new class extends Qo{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},sue=kb.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(iue.range(i)))}return ft.of(e)});function oue(){return sue}const uF=1024;let aue=0;class M2{constructor(e,n){this.from=e,this.to=n}}class it{constructor(e={}){this.id=aue++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Qr.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}it.closedBy=new it({deserialize:t=>t.split(" ")});it.openedBy=new it({deserialize:t=>t.split(" ")});it.group=new it({deserialize:t=>t.split(" ")});it.isolate=new it({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});it.contextHash=new it({perNode:!0});it.lookAhead=new it({perNode:!0});it.mounted=new it({perNode:!0});class yv{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[it.mounted.id]}}const lue=Object.create(null);class Qr{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):lue,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Qr(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(it.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(it.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}Qr.none=new Qr("",Object.create(null),0,8);class nT{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Qr(r.name,i,r.id,r.flags):r)}return new nT(n)}}const Ay=new WeakMap,$N=new WeakMap;var Nn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Nn||(Nn={}));class dn{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=yv.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new mA(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Ay.get(this)||this.topNode,s=new mA(i);return s.moveTo(e,n),Ay.set(this,s._tree),s}get topNode(){return new Qi(this,0,0,null)}resolve(e,n=0){let r=am(Ay.get(this)||this.topNode,e,n,!1);return Ay.set(this,r),r}resolveInner(e,n=0){let r=am($N.get(this)||this.topNode,e,n,!0);return $N.set(this,r),r}resolveStack(e,n=0){return hue(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Nn.IncludeAnonymous)>0;for(let c=this.cursor(o|Nn.IncludeAnonymous);;){let h=!1;if(c.from<=s&&c.to>=i&&(!a&&c.type.isAnonymous||n(c)!==!1)){if(c.firstChild())continue;h=!0}for(;h&&r&&(a||!c.type.isAnonymous)&&r(c),!c.nextSibling();){if(!c.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:sT(Qr.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new dn(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new dn(Qr.none,n,r,i)))}static build(e){return fue(e)}}dn.empty=new dn(Qr.none,[],[],0);class rT{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rT(this.buffer,this.index)}}class yl{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Qr.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let c=e;c!=n&&!(hF(s,i,o[c+1],o[c+2])&&(a=c,r>0));c=o[c+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,c=0;a<n;){s[c++]=i[a++],s[c++]=i[a++]-r;let h=s[c++]=i[a++]-r;s[c++]=i[a++]-e,o=Math.max(o,h)}return new yl(s,o,this.set)}}function hF(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function am(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Qi&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:Nn.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Qi&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class fF{cursor(e=0){return new mA(this,e)}getChild(e,n=null,r=null){let i=VN(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return VN(this,e,n,r)}resolve(e,n=0){return am(this,e,n,!1)}resolveInner(e,n=0){return am(this,e,n,!0)}matchContext(e){return pA(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Qi extends fF{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:c}=o._tree,h=n>0?a.length:-1;e!=h;e+=n){let f=a[e],d=c[e]+o.from;if(hF(i,r,d,d+f.length)){if(f instanceof yl){if(s&Nn.ExcludeBuffers)continue;let m=f.findChild(0,f.buffer.length,n,r-d,i);if(m>-1)return new sl(new cue(o,f,e,d),null,m)}else if(s&Nn.IncludeAnonymous||!f.type.isAnonymous||iT(f)){let m;if(!(s&Nn.IgnoreMounts)&&(m=yv.get(f))&&!m.overlay)return new Qi(m.tree,d,e,o);let y=new Qi(f,d,e,o);return s&Nn.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(n<0?f.children.length-1:0,n,r,i)}}}if(s&Nn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Nn.IgnoreOverlays)&&(i=yv.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new Qi(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function VN(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function pA(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class cue{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class sl extends fF{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new sl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Nn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new sl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new sl(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new sl(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new dn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function dF(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof Qi&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new uue(i,n)}class uue{constructor(e,n){this.heads=e,this.node=n}get next(){return dF(this.heads)}}function hue(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof Qi?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=yv.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Qi(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(am(a,e,n,!1))}}return i?dF(i):r}class mA{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Qi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Qi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Nn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Nn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Nn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Nn.IncludeAnonymous||a instanceof yl||!a.type.isAnonymous||iT(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new sl(this.buffer,n,this.stack[i]);return this.bufferNode=new sl(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return pA(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return pA(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function iT(t){return t.children.some(e=>e instanceof yl||!e.type.isAnonymous||iT(e))}function fue(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=uF,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new rT(n,n.length):n,c=r.types,h=0,f=0;function d(M,O,L,N,z,j){let{id:H,start:W,end:X,size:G}=a,ie=f,F=h;for(;G<0;)if(a.next(),G==-1){let Z=s[H];L.push(Z),N.push(W-M);return}else if(G==-3){h=H;return}else if(G==-4){f=H;return}else throw new RangeError(`Unrecognized record size: ${G}`);let Y=c[H],q,se,T=W-M;if(X-W<=i&&(se=_(a.pos-O,z))){let Z=new Uint16Array(se.size-se.skip),ue=a.pos-se.size,I=Z.length;for(;a.pos>ue;)I=S(se.start,Z,I);q=new yl(Z,X-se.start,r),T=se.start-M}else{let Z=a.pos-G;a.next();let ue=[],I=[],pe=H>=o?H:-1,Ee=0,ye=X;for(;a.pos>Z;)pe>=0&&a.id==pe&&a.size>=0?(a.end<=ye-i&&(v(ue,I,W,Ee,a.end,ye,pe,ie,F),Ee=ue.length,ye=a.end),a.next()):j>2500?m(W,Z,ue,I):d(W,Z,ue,I,pe,j+1);if(pe>=0&&Ee>0&&Ee<ue.length&&v(ue,I,W,Ee,W,ye,pe,ie,F),ue.reverse(),I.reverse(),pe>-1&&Ee>0){let ke=y(Y,F);q=sT(Y,ue,I,0,ue.length,0,X-W,ke,ke)}else q=w(Y,ue,I,X-W,ie-X,F)}L.push(q),N.push(T)}function m(M,O,L,N){let z=[],j=0,H=-1;for(;a.pos>O;){let{id:W,start:X,end:G,size:ie}=a;if(ie>4)a.next();else{if(H>-1&&X<H)break;H<0&&(H=G-i),z.push(W,X,G),j++,a.next()}}if(j){let W=new Uint16Array(j*4),X=z[z.length-2];for(let G=z.length-3,ie=0;G>=0;G-=3)W[ie++]=z[G],W[ie++]=z[G+1]-X,W[ie++]=z[G+2]-X,W[ie++]=ie;L.push(new yl(W,z[2]-X,r)),N.push(X-M)}}function y(M,O){return(L,N,z)=>{let j=0,H=L.length-1,W,X;if(H>=0&&(W=L[H])instanceof dn){if(!H&&W.type==M&&W.length==z)return W;(X=W.prop(it.lookAhead))&&(j=N[H]+W.length+X)}return w(M,L,N,z,j,O)}}function v(M,O,L,N,z,j,H,W,X){let G=[],ie=[];for(;M.length>N;)G.push(M.pop()),ie.push(O.pop()+L-z);M.push(w(r.types[H],G,ie,j-z,W-j,X)),O.push(z-L)}function w(M,O,L,N,z,j,H){if(j){let W=[it.contextHash,j];H=H?[W].concat(H):[W]}if(z>25){let W=[it.lookAhead,z];H=H?[W].concat(H):[W]}return new dn(M,O,L,N,H)}function _(M,O){let L=a.fork(),N=0,z=0,j=0,H=L.end-i,W={size:0,start:0,skip:0};e:for(let X=L.pos-M;L.pos>X;){let G=L.size;if(L.id==O&&G>=0){W.size=N,W.start=z,W.skip=j,j+=4,N+=4,L.next();continue}let ie=L.pos-G;if(G<0||ie<X||L.start<H)break;let F=L.id>=o?4:0,Y=L.start;for(L.next();L.pos>ie;){if(L.size<0)if(L.size==-3)F+=4;else break e;else L.id>=o&&(F+=4);L.next()}z=Y,N+=G,j+=F}return(O<0||N==M)&&(W.size=N,W.start=z,W.skip=j),W.size>4?W:void 0}function S(M,O,L){let{id:N,start:z,end:j,size:H}=a;if(a.next(),H>=0&&N<o){let W=L;if(H>4){let X=a.pos-(H-4);for(;a.pos>X;)L=S(M,O,L)}O[--L]=W,O[--L]=j-M,O[--L]=z-M,O[--L]=N}else H==-3?h=N:H==-4&&(f=N);return L}let A=[],k=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,A,k,-1,0);let P=(e=t.length)!==null&&e!==void 0?e:A.length?k[0]+A[0].length:0;return new dn(c[t.topID],A.reverse(),k.reverse(),P)}const FN=new WeakMap;function Eb(t,e){if(!t.isAnonymous||e instanceof yl||e.type!=t)return 1;let n=FN.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof dn)){n=1;break}n+=Eb(t,r)}FN.set(e,n)}return n}function sT(t,e,n,r,i,s,o,a,c){let h=0;for(let v=r;v<i;v++)h+=Eb(t,e[v]);let f=Math.ceil(h*1.5/8),d=[],m=[];function y(v,w,_,S,A){for(let k=_;k<S;){let P=k,M=w[k],O=Eb(t,v[k]);for(k++;k<S;k++){let L=Eb(t,v[k]);if(O+L>=f)break;O+=L}if(k==P+1){if(O>f){let L=v[P];y(L.children,L.positions,0,L.children.length,w[P]+A);continue}d.push(v[P])}else{let L=w[k-1]+v[k-1].length-M;d.push(sT(t,v,w,P,k,M,L,null,c))}m.push(M+A-s)}}return y(e,n,r,i,0),(a||c)(d,m,o)}class mc{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new mc(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,c=0,h=0;;a++){let f=a<n.length?n[a]:null,d=f?f.fromA:1e9;if(d-c>=r)for(;o&&o.from<d;){let m=o;if(c>=m.from||d<=m.to||h){let y=Math.max(m.from,c)-h,v=Math.min(m.to,d)-h;m=y>=v?null:new mc(y,v,m.tree,m.offset+h,a>0,!!f)}if(m&&i.push(m),o.to>d)break;o=s<e.length?e[s++]:null}if(!f)break;c=f.toA,h=f.toA-f.toB}return i}}class pF{startParse(e,n,r){return typeof e=="string"&&(e=new due(e)),r=r?r.length?r.map(i=>new M2(i.from,i.to)):[new M2(0,0)]:[new M2(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}}class due{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new it({perNode:!0});let pue=0;class Hi{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=pue++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Hi&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new Hi(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new bv(e);return r=>r.modified.indexOf(n)>-1?r:bv.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let mue=0;class bv{constructor(e){this.name=e,this.instances=[],this.id=mue++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&gue(n,a.modified));if(r)return r;let i=[],s=new Hi(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=yue(n);for(let a of e.set)if(!a.modified.length)for(let c of o)i.push(bv.get(a,c));return s}}function gue(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function yue(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function mF(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let m=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!m)throw new RangeError("Invalid path: "+i);if(s.push(m[0]=="*"?"":m[0][0]=='"'?JSON.parse(m[0]):m[0]),d+=m[0].length,d==i.length)break;let y=i[d++];if(d==i.length&&y=="!"){o=0;break}if(y!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let c=s.length-1,h=s[c];if(!h)throw new RangeError("Invalid path: "+i);let f=new vv(r,o,c>0?s.slice(0,c):null);e[h]=f.sort(e[h])}}return gF.add(e)}const gF=new it;let vv=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};vv.empty=new vv([],2,null);function yF(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let c of a.set){let h=n[c.id];if(h){o=o?o+" "+h:h;break}}return o},scope:r}}function bue(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function vue(t,e,n,r=0,i=t.length){let s=new xue(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class xue{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:c}=e;if(a>=r||c<=n)return;o.isTop&&(s=this.highlighters.filter(y=>!y.scope||y.scope(o)));let h=i,f=wue(e)||vv.empty,d=bue(s,f.tags);if(d&&(h&&(h+=" "),h+=d,f.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(n,a),h),f.opaque)return;let m=e.tree&&e.tree.prop(it.mounted);if(m&&m.overlay){let y=e.node.enter(m.overlay[0].from+a,1),v=this.highlighters.filter(_=>!_.scope||_.scope(m.tree.type)),w=e.firstChild();for(let _=0,S=a;;_++){let A=_<m.overlay.length?m.overlay[_]:null,k=A?A.from+a:c,P=Math.max(n,S),M=Math.min(r,k);if(P<M&&w)for(;e.from<M&&(this.highlightRange(e,P,M,i,s),this.startSpan(Math.min(M,e.to),h),!(e.to>=k||!e.nextSibling())););if(!A||k>r)break;S=A.to+a,S>n&&(this.highlightRange(y.cursor(),Math.max(n,A.from+a),Math.min(r,S),"",v),this.startSpan(Math.min(r,S),h))}w&&e.parent()}else if(e.firstChild()){m&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),h)}while(e.nextSibling());e.parent()}}}function wue(t){let e=t.type.prop(gF);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const we=Hi.define,ky=we(),Ja=we(),zN=we(Ja),UN=we(Ja),Qa=we(),Ey=we(Qa),O2=we(Qa),qs=we(),Kl=we(qs),Us=we(),Hs=we(),gA=we(),Od=we(gA),Ty=we(),ve={comment:ky,lineComment:we(ky),blockComment:we(ky),docComment:we(ky),name:Ja,variableName:we(Ja),typeName:zN,tagName:we(zN),propertyName:UN,attributeName:we(UN),className:we(Ja),labelName:we(Ja),namespace:we(Ja),macroName:we(Ja),literal:Qa,string:Ey,docString:we(Ey),character:we(Ey),attributeValue:we(Ey),number:O2,integer:we(O2),float:we(O2),bool:we(Qa),regexp:we(Qa),escape:we(Qa),color:we(Qa),url:we(Qa),keyword:Us,self:we(Us),null:we(Us),atom:we(Us),unit:we(Us),modifier:we(Us),operatorKeyword:we(Us),controlKeyword:we(Us),definitionKeyword:we(Us),moduleKeyword:we(Us),operator:Hs,derefOperator:we(Hs),arithmeticOperator:we(Hs),logicOperator:we(Hs),bitwiseOperator:we(Hs),compareOperator:we(Hs),updateOperator:we(Hs),definitionOperator:we(Hs),typeOperator:we(Hs),controlOperator:we(Hs),punctuation:gA,separator:we(gA),bracket:Od,angleBracket:we(Od),squareBracket:we(Od),paren:we(Od),brace:we(Od),content:qs,heading:Kl,heading1:we(Kl),heading2:we(Kl),heading3:we(Kl),heading4:we(Kl),heading5:we(Kl),heading6:we(Kl),contentSeparator:we(qs),list:we(qs),quote:we(qs),emphasis:we(qs),strong:we(qs),link:we(qs),monospace:we(qs),strikethrough:we(qs),inserted:we(),deleted:we(),changed:we(),invalid:we(),meta:Ty,documentMeta:we(Ty),annotation:we(Ty),processingInstruction:we(Ty),definition:Hi.defineModifier("definition"),constant:Hi.defineModifier("constant"),function:Hi.defineModifier("function"),standard:Hi.defineModifier("standard"),local:Hi.defineModifier("local"),special:Hi.defineModifier("special")};for(let t in ve){let e=ve[t];e instanceof Hi&&(e.name=t)}yF([{tag:ve.link,class:"tok-link"},{tag:ve.heading,class:"tok-heading"},{tag:ve.emphasis,class:"tok-emphasis"},{tag:ve.strong,class:"tok-strong"},{tag:ve.keyword,class:"tok-keyword"},{tag:ve.atom,class:"tok-atom"},{tag:ve.bool,class:"tok-bool"},{tag:ve.url,class:"tok-url"},{tag:ve.labelName,class:"tok-labelName"},{tag:ve.inserted,class:"tok-inserted"},{tag:ve.deleted,class:"tok-deleted"},{tag:ve.literal,class:"tok-literal"},{tag:ve.string,class:"tok-string"},{tag:ve.number,class:"tok-number"},{tag:[ve.regexp,ve.escape,ve.special(ve.string)],class:"tok-string2"},{tag:ve.variableName,class:"tok-variableName"},{tag:ve.local(ve.variableName),class:"tok-variableName tok-local"},{tag:ve.definition(ve.variableName),class:"tok-variableName tok-definition"},{tag:ve.special(ve.variableName),class:"tok-variableName2"},{tag:ve.definition(ve.propertyName),class:"tok-propertyName tok-definition"},{tag:ve.typeName,class:"tok-typeName"},{tag:ve.namespace,class:"tok-namespace"},{tag:ve.className,class:"tok-className"},{tag:ve.macroName,class:"tok-macroName"},{tag:ve.propertyName,class:"tok-propertyName"},{tag:ve.operator,class:"tok-operator"},{tag:ve.comment,class:"tok-comment"},{tag:ve.meta,class:"tok-meta"},{tag:ve.invalid,class:"tok-invalid"},{tag:ve.punctuation,class:"tok-punctuation"}]);var P2;const rh=new it;function Sue(t){return Ce.define({combine:t?e=>e.concat(t):void 0})}const _ue=new it;class gs{constructor(e,n,r=[],i=""){this.data=e,this.name=i,ht.prototype.hasOwnProperty("tree")||Object.defineProperty(ht.prototype,"tree",{get(){return br(this)}}),this.parser=n,this.extension=[bl.of(this),ht.languageData.of((s,o,a)=>{let c=HN(s,o,a),h=c.type.prop(rh);if(!h)return[];let f=s.facet(h),d=c.type.prop(_ue);if(d){let m=c.resolve(o-c.from,a);for(let y of d)if(y.test(m,s)){let v=s.facet(y.facet);return y.type=="replace"?v:v.concat(f)}}return f})].concat(r)}isActiveAt(e,n,r=-1){return HN(e,n,r).type.prop(rh)==this.data}findRegions(e){let n=e.facet(bl);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(rh)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(it.mounted);if(a){if(a.tree.prop(rh)==this.data){if(a.overlay)for(let c of a.overlay)r.push({from:c.from+o,to:c.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let c=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>c)return}}for(let c=0;c<s.children.length;c++){let h=s.children[c];h instanceof dn&&i(h,s.positions[c]+o)}};return i(br(e),0),r}get allowsNesting(){return!0}}gs.setState=Qe.define();function HN(t,e,n){let r=t.facet(bl),i=br(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,Nn.ExcludeBuffers))s.type.isTop&&(i=s);return i}class xv extends gs{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=Sue(e.languageData);return new xv(n,e.parser.configure({props:[rh.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new xv(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function br(t){let e=t.field(gs.state,!1);return e?e.tree:dn.empty}class Cue{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Pd=null;class wv{constructor(e,n,r=[],i,s,o,a,c){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=c,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new wv(e,n,[],dn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Cue(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=dn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(mc.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(mc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Pd;Pd=this;try{return e()}finally{Pd=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=qN(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let c=[];if(e.iterChangedRanges((h,f,d,m)=>c.push({fromA:h,toA:f,fromB:d,toB:m})),r=mc.applyChanges(r,c),i=dn.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let f=e.mapPos(h.from,1),d=e.mapPos(h.to,-1);f<d&&a.push({from:f,to:d})}}}return new wv(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=qN(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends pF{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let c=Pd;if(c){for(let h of i)c.tempSkipped.push(h);e&&(c.scheduleOn=c.scheduleOn?Promise.all([c.scheduleOn,e]):e)}return this.parsedPos=o,new dn(Qr.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Pd}}function qN(t,e,n){return mc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Lh{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Lh(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=wv.create(e.facet(bl).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Lh(r)}}gs.state=Qn.define({create:Lh.init,update(t,e){for(let n of e.effects)if(n.is(gs.setState))return n.value;return e.startState.facet(bl)!=e.state.facet(bl)?Lh.init(e.state):t.apply(e)}});let bF=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(bF=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const D2=typeof navigator<"u"&&(!((P2=navigator.scheduling)===null||P2===void 0)&&P2.isInputPending)?()=>navigator.scheduling.isInputPending():null,Aue=gn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(gs.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(gs.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=bF(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(gs.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!D2?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,c=s.context.work(()=>D2&&D2()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(c||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:gs.setState.of(new Lh(s.context))})),this.chunkBudget>0&&!(c&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Kr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),bl=Ce.define({combine(t){return t.length?t[0]:null},enables:t=>[gs.state,Aue,_e.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class kue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Eue=Ce.define(),oT=Ce.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Sv(t){let e=t.facet(oT);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function lm(t,e){let n="",r=t.tabSize,i=t.facet(oT)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function aT(t,e){t instanceof ht&&(t=new Kx(t));for(let r of t.state.facet(Eue)){let i=r(t,e);if(i!==void 0)return i}let n=br(t.state);return n.length>=e?Tue(t,n,e):null}class Kx{constructor(e,n={}){this.state=e,this.options=n,this.unit=Sv(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Xh(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const vF=new it;function Tue(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return xF(r,t,n)}function xF(t,e,n){for(let r=t;r;r=r.next){let i=Mue(r.node);if(i)return i(lT.create(e,n,r))}return 0}function Rue(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Mue(t){let e=t.type.prop(vF);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(it.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Lue(o,!0,1,void 0,s&&!Rue(o)?i.from:void 0)}return t.parent==null?Oue:null}function Oue(){return 0}class lT extends Kx{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new lT(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(Pue(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return xF(this.context.next,this.base,this.pos)}}function Pue(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Due(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let c=e.childAfter(a);if(!c||c==r)return null;if(!c.type.isSkipped){if(c.from>=o)return null;let h=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+h}}a=c.to}}function Lue(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,c=Due(t);return c?a?t.column(c.from):t.column(c.to):t.baseIndent+(a?0:t.unit*n)}function WN({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const Iue=200;function Nue(){return ht.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+Iue)return t;let s=n.sliceString(i.from,r);if(!e.some(h=>h.test(s)))return t;let{state:o}=t,a=-1,c=[];for(let{head:h}of o.selection.ranges){let f=o.doc.lineAt(h);if(f.from==a)continue;a=f.from;let d=aT(o,f.from);if(d==null)continue;let m=/^\s*/.exec(f.text)[0],y=lm(o,d);m!=y&&c.push({from:f.from,to:f.from+m.length,insert:y})}return c.length?[t,{changes:c,sequential:!0}]:t})}const Bue=Ce.define(),wF=new it;function jue(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function $ue(t,e,n){let r=br(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let c=a.type.prop(wF);if(c&&(a.to<r.length-50||r.length==t.doc.length||!Vue(a))){let h=c(a,t);h&&h.from<=n&&h.from>=e&&h.to>n&&(s=h)}}return s}function Vue(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function _v(t,e,n){for(let r of t.facet(Bue)){let i=r(t,e,n);if(i)return i}return $ue(t,e,n)}function SF(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Yx=Qe.define({map:SF}),Um=Qe.define({map:SF});function _F(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Tc=Qn.define({create(){return Ue.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=GN(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Yx)&&!Fue(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(kF),i=r?Ue.replace({widget:new Kue(r(e.state,n.value))}):KN;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Um)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=GN(t,e.selection.main.head)),t},provide:t=>_e.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(KN.range(r,i))}return Ue.set(e,!0)}});function GN(t,e,n=e){let r=!1;return t.between(e,n,(i,s)=>{i<n&&s>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,s)=>i>=n||s<=e}):t}function Cv(t,e,n){var r;let i=null;return(r=t.field(Tc,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function Fue(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}function CF(t,e){return t.field(Tc,!1)?e:e.concat(Qe.appendConfig.of(EF()))}const zue=t=>{for(let e of _F(t)){let n=_v(t.state,e.from,e.to);if(n)return t.dispatch({effects:CF(t.state,[Yx.of(n),AF(t,n)])}),!0}return!1},Uue=t=>{if(!t.state.field(Tc,!1))return!1;let e=[];for(let n of _F(t)){let r=Cv(t.state,n.from,n.to);r&&e.push(Um.of(r),AF(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function AF(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return _e.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const Hue=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),s=_v(e,i.from,i.to);s&&n.push(Yx.of(s)),r=(s?t.lineBlockAt(s.to):i).to+1}return n.length&&t.dispatch({effects:CF(t.state,n)}),!!n.length},que=t=>{let e=t.state.field(Tc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Um.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},Wue=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:zue},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Uue},{key:"Ctrl-Alt-[",run:Hue},{key:"Ctrl-Alt-]",run:que}],Gue={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},kF=Ce.define({combine(t){return xo(t,Gue)}});function EF(t){return[Tc,Jue]}function TF(t,e){let{state:n}=t,r=n.facet(kF),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),c=Cv(t.state,a.from,a.to);c&&t.dispatch({effects:Um.of(c)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const KN=Ue.replace({widget:new class extends wl{toDOM(t){return TF(t,null)}}});class Kue extends wl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return TF(e,this.value)}}const Yue={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class L2 extends Qo{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function Xue(t={}){let e={...Yue,...t},n=new L2(e,!0),r=new L2(e,!1),i=gn.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(bl)!=o.state.facet(bl)||o.startState.field(Tc,!1)!=o.state.field(Tc,!1)||br(o.startState)!=br(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Xo;for(let c of o.viewportLineBlocks){let h=Cv(o.state,c.from,c.to)?r:_v(o.state,c.from,c.to)?n:null;h&&a.add(c.from,c.from,h)}return a.finish()}}),{domEventHandlers:s}=e;return[i,Xce({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||ft.empty},initialSpacer(){return new L2(e,!1)},domEventHandlers:{...s,click:(o,a,c)=>{if(s.click&&s.click(o,a,c))return!0;let h=Cv(o.state,a.from,a.to);if(h)return o.dispatch({effects:Um.of(h)}),!0;let f=_v(o.state,a.from,a.to);return f?(o.dispatch({effects:Yx.of(f)}),!0):!1}}}),EF()]}const Jue=_e.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Xx{constructor(e,n){this.specs=e;let r;function i(a){let c=pl.newName();return(r||(r=Object.create(null)))["."+c]=a,c}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof gs?a=>a.prop(rh)==o.data:o?a=>a==o:void 0,this.style=yF(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new pl(r):null,this.themeType=n.themeType}static define(e,n){return new Xx(e,n||{})}}const yA=Ce.define(),RF=Ce.define({combine(t){return t.length?[t[0]]:null}});function I2(t){let e=t.facet(yA);return e.length?e:t.facet(RF)}function Que(t,e){let n=[ehe],r;return t instanceof Xx&&(t.module&&n.push(_e.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(RF.of(t)):r?n.push(yA.computeN([_e.darkTheme],i=>i.facet(_e.darkTheme)==(r=="dark")?[t]:[])):n.push(yA.of(t)),n}class Zue{constructor(e){this.markCache=Object.create(null),this.tree=br(e.state),this.decorations=this.buildDeco(e,I2(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=br(e.state),r=I2(e.state),i=r!=I2(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Ue.none;let r=new Xo;for(let{from:i,to:s}of e.visibleRanges)vue(this.tree,n,(o,a,c)=>{r.add(o,a,this.markCache[c]||(this.markCache[c]=Ue.mark({class:c})))},i,s);return r.finish()}}const ehe=Bc.high(gn.fromClass(Zue,{decorations:t=>t.decorations})),the=Xx.define([{tag:ve.meta,color:"#404740"},{tag:ve.link,textDecoration:"underline"},{tag:ve.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ve.emphasis,fontStyle:"italic"},{tag:ve.strong,fontWeight:"bold"},{tag:ve.strikethrough,textDecoration:"line-through"},{tag:ve.keyword,color:"#708"},{tag:[ve.atom,ve.bool,ve.url,ve.contentSeparator,ve.labelName],color:"#219"},{tag:[ve.literal,ve.inserted],color:"#164"},{tag:[ve.string,ve.deleted],color:"#a11"},{tag:[ve.regexp,ve.escape,ve.special(ve.string)],color:"#e40"},{tag:ve.definition(ve.variableName),color:"#00f"},{tag:ve.local(ve.variableName),color:"#30a"},{tag:[ve.typeName,ve.namespace],color:"#085"},{tag:ve.className,color:"#167"},{tag:[ve.special(ve.variableName),ve.macroName],color:"#256"},{tag:ve.definition(ve.propertyName),color:"#00c"},{tag:ve.comment,color:"#940"},{tag:ve.invalid,color:"#f00"}]),nhe=_e.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),MF=1e4,OF="()[]{}",PF=Ce.define({combine(t){return xo(t,{afterCursor:!0,brackets:OF,maxScanDistance:MF,renderMatch:she})}}),rhe=Ue.mark({class:"cm-matchingBracket"}),ihe=Ue.mark({class:"cm-nonmatchingBracket"});function she(t){let e=[],n=t.matched?rhe:ihe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const ohe=Qn.define({create(){return Ue.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(PF);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=no(e.state,i.head,-1,r)||i.head>0&&no(e.state,i.head-1,1,r)||r.afterCursor&&(no(e.state,i.head,1,r)||i.head<e.state.doc.length&&no(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Ue.set(n,!0)},provide:t=>_e.decorations.from(t)}),ahe=[ohe,nhe];function lhe(t={}){return[PF.of(t),ahe]}const che=new it;function bA(t,e,n){let r=t.prop(e<0?it.openedBy:it.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function vA(t){let e=t.type.prop(che);return e?e(t.node):t}function no(t,e,n,r={}){let i=r.maxScanDistance||MF,s=r.brackets||OF,o=br(t),a=o.resolveInner(e,n);for(let c=a;c;c=c.parent){let h=bA(c.type,n,s);if(h&&c.from<c.to){let f=vA(c);if(f&&(n>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return uhe(t,e,n,c,f,h,s)}}return hhe(t,e,n,o,a.type,i,s)}function uhe(t,e,n,r,i,s,o){let a=r.parent,c={from:i.from,to:i.to},h=0,f=a?.cursor();if(f&&(n<0?f.childBefore(r.from):f.childAfter(r.to)))do if(n<0?f.to<=r.from:f.from>=r.to){if(h==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let d=vA(f);return{start:c,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(bA(f.type,n,o))h++;else if(bA(f.type,-n,o)){if(h==0){let d=vA(f);return{start:c,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}h--}}while(n<0?f.prevSibling():f.nextSibling());return{start:c,matched:!1}}function hhe(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),c=o.indexOf(a);if(c<0||c%2==0!=n>0)return null;let h={from:n<0?e-1:e,to:n>0?e+1:e},f=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let m=0;!f.next().done&&m<=s;){let y=f.value;n<0&&(m+=y.length);let v=e+m*n;for(let w=n>0?0:y.length-1,_=n>0?y.length:-1;w!=_;w+=n){let S=o.indexOf(y[w]);if(!(S<0||r.resolveInner(v+w,1).type!=i))if(S%2==0==n>0)d++;else{if(d==1)return{start:h,end:{from:v+w,to:v+w+1},matched:S>>1==c>>1};d--}}n>0&&(m+=y.length)}return f.done?{start:h,matched:!1}:null}const fhe=Object.create(null),YN=[Qr.none],XN=[],JN=Object.create(null),dhe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])dhe[t]=phe(fhe,e);function N2(t,e){XN.indexOf(t)>-1||(XN.push(t),console.warn(e))}function phe(t,e){let n=[];for(let a of e.split(" ")){let c=[];for(let h of a.split(".")){let f=t[h]||ve[h];f?typeof f=="function"?c.length?c=c.map(f):N2(h,`Modifier ${h} used at start of tag`):c.length?N2(h,`Tag ${h} used as modifier`):c=Array.isArray(f)?f:[f]:N2(h,`Unknown highlighting tag ${h}`)}for(let h of c)n.push(h)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=JN[i];if(s)return s.id;let o=JN[i]=Qr.define({id:YN.length,name:r,props:[mF({[r]:n})]});return YN.push(o),o.id}Nt.RTL,Nt.LTR;const mhe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=uT(t.state,n.from);return r.line?ghe(t):r.block?bhe(t):!1};function cT(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const ghe=cT(whe,0),yhe=cT(DF,0),bhe=cT((t,e)=>DF(t,e,xhe(e)),0);function uT(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Dd=50;function vhe(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-Dd,r),o=t.sliceDoc(i,i+Dd),a=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(o)[0].length,h=s.length-a;if(s.slice(h-e.length,h)==e&&o.slice(c,c+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+c,margin:c&&1}};let f,d;i-r<=2*Dd?f=d=t.sliceDoc(r,i):(f=t.sliceDoc(r,r+Dd),d=t.sliceDoc(i-Dd,i));let m=/^\s*/.exec(f)[0].length,y=/\s*$/.exec(d)[0].length,v=d.length-y-n.length;return f.slice(m,m+e.length)==e&&d.slice(v,v+n.length)==n?{open:{pos:r+m+e.length,margin:/\s/.test(f.charAt(m+e.length))?1:0},close:{pos:i-y-n.length,margin:/\s/.test(d.charAt(v-1))?1:0}}:null}function xhe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function DF(t,e,n=e.selection.ranges){let r=n.map(s=>uT(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>vhe(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let c=r[o],{open:h,close:f}=a;s.push({from:h.pos-c.open.length,to:h.pos+h.margin},{from:f.pos-f.margin,to:f.pos+c.close.length})}return{changes:s}}return null}function whe(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,c=1e9,h=uT(e,s).line;if(h){for(let f=s;f<=o;){let d=e.doc.lineAt(f);if(d.from>i&&(s==o||o>d.from)){i=d.from;let m=/^\s*/.exec(d.text)[0].length,y=m==d.length,v=d.text.slice(m,m+h.length)==h?m:-1;m<d.text.length&&m<c&&(c=m),r.push({line:d,comment:v,token:h,indent:m,empty:y,single:!1})}f=d.to+1}if(c<1e9)for(let f=a;f<r.length;f++)r[f].indent<r[f].line.text.length&&(r[f].indent=c);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:c,indent:h,empty:f,single:d}of r)(d||!f)&&s.push({from:a.from+h,insert:c+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:c}of r)if(a>=0){let h=o.from+a,f=h+c.length;o.text[f-o.from]==" "&&f++,s.push({from:h,to:f})}return{changes:s}}return null}const xA=sa.define(),She=sa.define(),_he=Ce.define(),LF=Ce.define({combine(t){return xo(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),IF=Qn.define({create(){return ro.empty},update(t,e){let n=e.state.facet(LF),r=e.annotation(xA);if(r){let c=Yr.fromTransaction(e,r.selection),h=r.side,f=h==0?t.undone:t.done;return c?f=Av(f,f.length,n.minDepth,c):f=jF(f,e.startState.selection),new ro(h==0?r.rest:f,h==0?f:r.rest)}let i=e.annotation(She);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(kn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Yr.fromTransaction(e),o=e.annotation(kn.time),a=e.annotation(kn.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new ro(t.done.map(Yr.fromJSON),t.undone.map(Yr.fromJSON))}});function Che(t={}){return[IF,LF.of(t),_e.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?NF:e.inputType=="historyRedo"?wA:null;return r?(e.preventDefault(),r(n)):!1}})]}function Jx(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(IF,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const NF=Jx(0,!1),wA=Jx(1,!1),Ahe=Jx(0,!0),khe=Jx(1,!0);class Yr{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Yr(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Yr(e.changes&&An.fromJSON(e.changes),[],e.mapped&&ao.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,n){let r=Ki;for(let i of e.startState.facet(_he)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Yr(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Ki)}static selection(e){return new Yr(void 0,Ki,void 0,void 0,e)}}function Av(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function Ehe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let c=0;c<n.length;){let h=n[c++],f=n[c++];a>=h&&o<=f&&(r=!0)}}),r}function The(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function BF(t,e){return t.length?e.length?t.concat(e):t:e}const Ki=[],Rhe=200;function jF(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Rhe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),Av(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Yr.selection([e])]}function Mhe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function B2(t,e){if(!t.length)return t;let n=t.length,r=Ki;for(;n;){let i=Ohe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Yr.selection(r)]:Ki}function Ohe(t,e,n){let r=BF(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Ki,n);if(!t.changes)return Yr.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Yr(i,Qe.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const Phe=/^(input\.type|delete)($|\.)/;class ro{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new ro(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||Phe.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,Ehe(a.changes,e.changes))||r=="input.type.compose")?o=Av(o,o.length-1,i.minDepth,new Yr(e.changes.compose(a.changes),BF(Qe.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Ki)):o=Av(o,o.length,i.minDepth,e),new ro(o,Ki,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ki;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&The(s[s.length-1],e)?this:new ro(jF(this.done,e),this.undone,n,r)}addMapping(e){return new ro(B2(this.done,e),B2(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:xA.of({side:e,rest:Mhe(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Ki:i.slice(0,i.length-1);return s.mapped&&(a=B2(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:xA.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ro.empty=new ro(Ki,Ki);const Dhe=[{key:"Mod-z",run:NF,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:wA,preventDefault:!0},{linux:"Ctrl-Shift-z",run:wA,preventDefault:!0},{key:"Mod-u",run:Ahe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:khe,preventDefault:!0}];function Jh(t,e){return fe.create(t.ranges.map(e),t.mainIndex)}function wo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ts({state:t,dispatch:e},n){let r=Jh(t.selection,n);return r.eq(t.selection,!0)?!1:(e(wo(t,r)),!0)}function Qx(t,e){return fe.cursor(e?t.to:t.from)}function $F(t,e){return Ts(t,n=>n.empty?t.moveByChar(n,e):Qx(n,e))}function vr(t){return t.textDirectionAt(t.state.selection.main.head)==Nt.LTR}const VF=t=>$F(t,!vr(t)),FF=t=>$F(t,vr(t));function zF(t,e){return Ts(t,n=>n.empty?t.moveByGroup(n,e):Qx(n,e))}const Lhe=t=>zF(t,!vr(t)),Ihe=t=>zF(t,vr(t));function Nhe(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Zx(t,e,n){let r=br(t).resolveInner(e.head),i=n?it.closedBy:it.openedBy;for(let c=e.head;;){let h=n?r.childAfter(c):r.childBefore(c);if(!h)break;Nhe(t,h,i)?r=h:c=n?h.to:h.from}let s=r.type.prop(i),o,a;return s&&(o=n?no(t,r.from,1):no(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,fe.cursor(a,n?-1:1)}const Bhe=t=>Ts(t,e=>Zx(t.state,e,!vr(t))),jhe=t=>Ts(t,e=>Zx(t.state,e,vr(t)));function UF(t,e){return Ts(t,n=>{if(!n.empty)return Qx(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const HF=t=>UF(t,!1),qF=t=>UF(t,!0);function WF(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(_e.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function GF(t,e){let n=WF(t),{state:r}=t,i=Jh(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):Qx(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),c=a.top+n.marginTop,h=a.bottom-n.marginBottom;o&&o.top>c&&o.bottom<h&&(s=_e.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-c}))}return t.dispatch(wo(r,i),{effects:s}),!0}const QN=t=>GF(t,!1),SA=t=>GF(t,!0);function Sl(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=fe.cursor(r.from+s))}return i}const $he=t=>Ts(t,e=>Sl(t,e,!0)),Vhe=t=>Ts(t,e=>Sl(t,e,!1)),Fhe=t=>Ts(t,e=>Sl(t,e,!vr(t))),zhe=t=>Ts(t,e=>Sl(t,e,vr(t))),Uhe=t=>Ts(t,e=>fe.cursor(t.lineBlockAt(e.head).from,1)),Hhe=t=>Ts(t,e=>fe.cursor(t.lineBlockAt(e.head).to,-1));function qhe(t,e,n){let r=!1,i=Jh(t.selection,s=>{let o=no(t,s.head,-1)||no(t,s.head,1)||s.head>0&&no(t,s.head-1,1)||s.head<t.doc.length&&no(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return fe.cursor(a)});return r?(e(wo(t,i)),!0):!1}const Whe=({state:t,dispatch:e})=>qhe(t,e);function ns(t,e){let n=Jh(t.state.selection,r=>{let i=e(r);return fe.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(wo(t.state,n)),!0)}function KF(t,e){return ns(t,n=>t.moveByChar(n,e))}const YF=t=>KF(t,!vr(t)),XF=t=>KF(t,vr(t));function JF(t,e){return ns(t,n=>t.moveByGroup(n,e))}const Ghe=t=>JF(t,!vr(t)),Khe=t=>JF(t,vr(t)),Yhe=t=>ns(t,e=>Zx(t.state,e,!vr(t))),Xhe=t=>ns(t,e=>Zx(t.state,e,vr(t)));function QF(t,e){return ns(t,n=>t.moveVertically(n,e))}const ZF=t=>QF(t,!1),ez=t=>QF(t,!0);function tz(t,e){return ns(t,n=>t.moveVertically(n,e,WF(t).height))}const ZN=t=>tz(t,!1),e3=t=>tz(t,!0),Jhe=t=>ns(t,e=>Sl(t,e,!0)),Qhe=t=>ns(t,e=>Sl(t,e,!1)),Zhe=t=>ns(t,e=>Sl(t,e,!vr(t))),efe=t=>ns(t,e=>Sl(t,e,vr(t))),tfe=t=>ns(t,e=>fe.cursor(t.lineBlockAt(e.head).from)),nfe=t=>ns(t,e=>fe.cursor(t.lineBlockAt(e.head).to)),t3=({state:t,dispatch:e})=>(e(wo(t,{anchor:0})),!0),n3=({state:t,dispatch:e})=>(e(wo(t,{anchor:t.doc.length})),!0),r3=({state:t,dispatch:e})=>(e(wo(t,{anchor:t.selection.main.anchor,head:0})),!0),i3=({state:t,dispatch:e})=>(e(wo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),rfe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),ife=({state:t,dispatch:e})=>{let n=ew(t).map(({from:r,to:i})=>fe.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:fe.create(n),userEvent:"select"})),!0},sfe=({state:t,dispatch:e})=>{let n=Jh(t.selection,r=>{let i=br(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return fe.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(wo(t,n)),!0)},ofe=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=fe.create([n.main]):n.main.empty||(r=fe.create([fe.cursor(n.main.head)])),r?(e(wo(t,r)),!0):!1};function Hm(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let c=e(s);c<o?(n="delete.backward",c=Ry(t,c,!1)):c>o&&(n="delete.forward",c=Ry(t,c,!0)),o=Math.min(o,c),a=Math.max(a,c)}else o=Ry(t,o,!1),a=Ry(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:fe.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?_e.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ry(t,e,n){if(t instanceof _e)for(let r of t.state.facet(_e.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const nz=(t,e,n)=>Hm(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,c;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let h=Xh(a,s.tabSize),f=h%Sv(s)||Sv(s);for(let d=0;d<f&&a[a.length-1-d]==" ";d++)i--;c=i}else c=Yn(o.text,i-o.from,e,e)+o.from,c==i&&o.number!=(e?s.doc.lines:1)?c+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(c-o.from,i-o.from))&&(c=Yn(o.text,c-o.from,!1,!1)+o.from);return c}),_A=t=>nz(t,!1,!0),rz=t=>nz(t,!0,!1),iz=(t,e)=>Hm(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let c=Yn(s.text,r-s.from,e)+s.from,h=s.text.slice(Math.min(r,c)-s.from,Math.max(r,c)-s.from),f=o(h);if(a!=null&&f!=a)break;(h!=" "||r!=n.head)&&(a=f),r=c}return r}),sz=t=>iz(t,!1),afe=t=>iz(t,!0),lfe=t=>Hm(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),cfe=t=>Hm(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),ufe=t=>Hm(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),hfe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:dt.of(["",""])},range:fe.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},ffe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Yn(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Yn(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:fe.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ew(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function oz(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of ew(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let c of s.ranges)i.push(fe.range(Math.min(t.doc.length,c.anchor+a),Math.min(t.doc.length,c.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let c of s.ranges)i.push(fe.range(c.anchor-a,c.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:fe.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const dfe=({state:t,dispatch:e})=>oz(t,e,!1),pfe=({state:t,dispatch:e})=>oz(t,e,!0);function az(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of ew(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const mfe=({state:t,dispatch:e})=>az(t,e,!1),gfe=({state:t,dispatch:e})=>az(t,e,!0),yfe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(ew(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Jh(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function bfe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=br(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(it.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const s3=lz(!1),vfe=lz(!0);function lz(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),c=!t&&s==o&&bfe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let h=new Kx(e,{simulateBreak:s,simulateDoubleBreak:!!c}),f=aT(h,s);for(f==null&&(f=Xh(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;c?{from:s,to:o}=c:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",lm(e,f)];return c&&d.push(lm(e,h.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:dt.of(d)},range:fe.cursor(s+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function hT(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:fe.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const xfe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Kx(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=hT(t,(s,o,a)=>{let c=aT(r,s.from);if(c==null)return;/\S/.test(s.text)||(c=0);let h=/^\s*/.exec(s.text)[0],f=lm(t,c);(h!=f||a.from<s.from+h.length)&&(n[s.from]=c,o.push({from:s.from,to:s.from+h.length,insert:f}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},wfe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hT(t,(n,r)=>{r.push({from:n.from,insert:t.facet(oT)})}),{userEvent:"input.indent"})),!0),Sfe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hT(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Xh(i,t.tabSize),o=0,a=lm(t,Math.max(0,s-Sv(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),_fe=t=>(t.setTabFocusMode(),!0),Cfe=[{key:"Ctrl-b",run:VF,shift:YF,preventDefault:!0},{key:"Ctrl-f",run:FF,shift:XF},{key:"Ctrl-p",run:HF,shift:ZF},{key:"Ctrl-n",run:qF,shift:ez},{key:"Ctrl-a",run:Uhe,shift:tfe},{key:"Ctrl-e",run:Hhe,shift:nfe},{key:"Ctrl-d",run:rz},{key:"Ctrl-h",run:_A},{key:"Ctrl-k",run:lfe},{key:"Ctrl-Alt-h",run:sz},{key:"Ctrl-o",run:hfe},{key:"Ctrl-t",run:ffe},{key:"Ctrl-v",run:SA}],Afe=[{key:"ArrowLeft",run:VF,shift:YF,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Lhe,shift:Ghe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Fhe,shift:Zhe,preventDefault:!0},{key:"ArrowRight",run:FF,shift:XF,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Ihe,shift:Khe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:zhe,shift:efe,preventDefault:!0},{key:"ArrowUp",run:HF,shift:ZF,preventDefault:!0},{mac:"Cmd-ArrowUp",run:t3,shift:r3},{mac:"Ctrl-ArrowUp",run:QN,shift:ZN},{key:"ArrowDown",run:qF,shift:ez,preventDefault:!0},{mac:"Cmd-ArrowDown",run:n3,shift:i3},{mac:"Ctrl-ArrowDown",run:SA,shift:e3},{key:"PageUp",run:QN,shift:ZN},{key:"PageDown",run:SA,shift:e3},{key:"Home",run:Vhe,shift:Qhe,preventDefault:!0},{key:"Mod-Home",run:t3,shift:r3},{key:"End",run:$he,shift:Jhe,preventDefault:!0},{key:"Mod-End",run:n3,shift:i3},{key:"Enter",run:s3,shift:s3},{key:"Mod-a",run:rfe},{key:"Backspace",run:_A,shift:_A},{key:"Delete",run:rz},{key:"Mod-Backspace",mac:"Alt-Backspace",run:sz},{key:"Mod-Delete",mac:"Alt-Delete",run:afe},{mac:"Mod-Backspace",run:cfe},{mac:"Mod-Delete",run:ufe}].concat(Cfe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),kfe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Bhe,shift:Yhe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:jhe,shift:Xhe},{key:"Alt-ArrowUp",run:dfe},{key:"Shift-Alt-ArrowUp",run:mfe},{key:"Alt-ArrowDown",run:pfe},{key:"Shift-Alt-ArrowDown",run:gfe},{key:"Escape",run:ofe},{key:"Mod-Enter",run:vfe},{key:"Alt-l",mac:"Ctrl-l",run:ife},{key:"Mod-i",run:sfe,preventDefault:!0},{key:"Mod-[",run:Sfe},{key:"Mod-]",run:wfe},{key:"Mod-Alt-\\",run:xfe},{key:"Shift-Mod-k",run:yfe},{key:"Shift-Mod-\\",run:Whe},{key:"Mod-/",run:mhe},{key:"Alt-A",run:yhe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:_fe}].concat(Afe),o3=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ih{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(o3(a)):o3,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return qr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=VE(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Qs(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),c=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(c)return this.value=c,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Ih.prototype[Symbol.iterator]=function(){return this});const cz={from:-1,to:-1,match:/.*/.exec("")},fT="gm"+(/x/.unicode==null?"":"u");class uz{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=cz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new hz(e,n,r,i,s);this.re=new RegExp(n,fT+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=kv(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=kv(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const j2=new WeakMap;class xh{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=j2.get(e);if(!i||i.from>=r||i.to<=n){let a=new xh(n,e.sliceString(n,r));return j2.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),j2.set(e,new xh(o,s)),new xh(n,s.slice(n-o,r-o))}}class hz{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=cz,this.matchPos=kv(e,i),this.re=new RegExp(n,fT+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=xh.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=kv(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=xh.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(uz.prototype[Symbol.iterator]=hz.prototype[Symbol.iterator]=function(){return this});function Efe(t){try{return new RegExp(t,fT),!0}catch{return!1}}function kv(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function CA(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=At("input",{class:"cm-textfield",name:"line",value:e}),r=At("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Rp.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},At("label",t.state.phrase("Go to line"),": ",n)," ",At("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),At("button",{name:"close",onclick:()=>{t.dispatch({effects:Rp.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,c,h,f,d]=s,m=f?+f.slice(1):0,y=h?+h:a.number;if(h&&d){let _=y/100;c&&(_=_*(c=="-"?-1:1)+a.number/o.doc.lines),y=Math.round(o.doc.lines*_)}else h&&c&&(y=y*(c=="-"?-1:1)+a.number);let v=o.doc.line(Math.max(1,Math.min(o.doc.lines,y))),w=fe.cursor(v.from+Math.max(0,Math.min(m,v.length)));t.dispatch({effects:[Rp.of(!1),_e.scrollIntoView(w.from,{y:"center"})],selection:w}),t.focus()}return{dom:r}}const Rp=Qe.define(),a3=Qn.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Rp)&&(t=n.value);return t},provide:t=>om.from(t,e=>e?CA:null)}),Tfe=t=>{let e=sm(t,CA);if(!e){let n=[Rp.of(!0)];t.state.field(a3,!1)==null&&n.push(Qe.appendConfig.of([a3,Rfe])),t.dispatch({effects:n}),e=sm(t,CA)}return e&&e.dom.querySelector("input").select(),!0},Rfe=_e.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Mfe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Ofe=Ce.define({combine(t){return xo(t,Mfe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function Pfe(t){return[Bfe,Nfe]}const Dfe=Ue.mark({class:"cm-selectionMatch"}),Lfe=Ue.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function l3(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=zt.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=zt.Word)}function Ife(t,e,n,r){return t(e.sliceDoc(n,n+1))==zt.Word&&t(e.sliceDoc(r-1,r))==zt.Word}const Nfe=gn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Ofe),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Ue.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Ue.none;let c=n.wordAt(i.head);if(!c)return Ue.none;o=n.charCategorizer(i.head),s=n.sliceDoc(c.from,c.to)}else{let c=i.to-i.from;if(c<e.minSelectionLength||c>200)return Ue.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(l3(o,n,i.from,i.to)&&Ife(o,n,i.from,i.to)))return Ue.none}else if(s=n.sliceDoc(i.from,i.to),!s)return Ue.none}let a=[];for(let c of t.visibleRanges){let h=new Ih(n.doc,s,c.from,c.to);for(;!h.next().done;){let{from:f,to:d}=h.value;if((!o||l3(o,n,f,d))&&(i.empty&&f<=i.from&&d>=i.to?a.push(Lfe.range(f,d)):(f>=i.to||d<=i.from)&&a.push(Dfe.range(f,d)),a.length>e.maxMatches))return Ue.none}}return Ue.set(a)}},{decorations:t=>t.decorations}),Bfe=_e.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),jfe=({state:t,dispatch:e})=>{let{selection:n}=t,r=fe.create(n.ranges.map(i=>t.wordAt(i.head)||fe.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function $fe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Ih(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Ih(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(c=>c.from==a.value.from))continue;if(s){let c=t.wordAt(a.value.from);if(!c||c.from!=a.value.from||c.to!=a.value.to)continue}return a.value}}const Vfe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return jfe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=$fe(t,r);return i?(e(t.update({selection:t.selection.addRange(fe.range(i.from,i.to),!1),effects:_e.scrollIntoView(i.to)})),!0):!1},Qh=Ce.define({combine(t){return xo(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Qfe(e),scrollToMatch:e=>_e.scrollIntoView(e)})}});class fz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Efe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Hfe(this):new zfe(this)}getCursor(e,n=0,r){let i=e.doc?e:ht.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Qu(this,i,n,r):Ju(this,i,n,r)}}class dz{constructor(e){this.spec=e}}function Ju(t,e,n,r){return new Ih(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Ffe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Ffe(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(Ev(i,n-s))!=zt.Word||e(Tv(i,n-s))!=zt.Word)&&(e(Tv(i,r-s))!=zt.Word||e(Ev(i,r-s))!=zt.Word))}class zfe extends dz{constructor(e){super(e)}nextMatch(e,n,r){let i=Ju(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=Ju(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Ju(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Ju(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Ju(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Qu(t,e,n,r){return new uz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Ufe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function Ev(t,e){return t.slice(Yn(t,e,!1),e)}function Tv(t,e){return t.slice(e,Yn(t,e))}function Ufe(t){return(e,n,r)=>!r[0].length||(t(Ev(r.input,r.index))!=zt.Word||t(Tv(r.input,r.index))!=zt.Word)&&(t(Tv(r.input,r.index+r[0].length))!=zt.Word||t(Ev(r.input,r.index+r[0].length))!=zt.Word)}class Hfe extends dz{nextMatch(e,n,r){let i=Qu(this.spec,e,r,e.doc.length).next();return i.done&&(i=Qu(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=Qu(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Qu(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Qu(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const cm=Qe.define(),dT=Qe.define(),ll=Qn.define({create(t){return new $2(AA(t).create(),null)},update(t,e){for(let n of e.effects)n.is(cm)?t=new $2(n.value.create(),t.panel):n.is(dT)&&(t=new $2(t.query,n.value?pT:null));return t},provide:t=>om.from(t,e=>e.panel)});class $2{constructor(e,n){this.query=e,this.panel=n}}const qfe=Ue.mark({class:"cm-searchMatch"}),Wfe=Ue.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Gfe=gn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ll))}update(t){let e=t.state.field(ll);(e!=t.startState.field(ll)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ue.none;let{view:n}=this,r=new Xo;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:c}=s[i];for(;i<o-1&&c>s[i+1].from-500;)c=s[++i].to;t.highlight(n.state,a,c,(h,f)=>{let d=n.state.selection.ranges.some(m=>m.from==h&&m.to==f);r.add(h,f,d?Wfe:qfe)})}return r.finish()}},{decorations:t=>t.decorations});function qm(t){return e=>{let n=e.state.field(ll,!1);return n&&n.query.spec.valid?t(e,n):gz(e)}}const Rv=qm((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=fe.single(r.from,r.to),s=t.state.facet(Qh);return t.dispatch({selection:i,effects:[mT(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),mz(t),!0}),Mv=qm((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=fe.single(i.from,i.to),o=t.state.facet(Qh);return t.dispatch({selection:s,effects:[mT(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),mz(t),!0}),Kfe=qm((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:fe.create(n.map(r=>fe.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Yfe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Ih(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(fe.range(a.value.from,a.value.to))}return e(t.update({selection:fe.create(s,o),userEvent:"select.search.matches"})),!0},c3=qm((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],c,h,f=[];o.from==r&&o.to==i&&(h=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:h}),o=e.nextMatch(n,o.from,o.to),f.push(_e.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let d=t.state.changes(a);return o&&(c=fe.single(o.from,o.to).map(d),f.push(mT(t,o)),f.push(n.facet(Qh).scrollToMatch(c.main,t))),t.dispatch({changes:d,selection:c,effects:f,userEvent:"input.replace"}),!0}),Xfe=qm((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:_e.announce.of(r),userEvent:"input.replace.all"}),!0});function pT(t){return t.state.facet(Qh).createPanel(t)}function AA(t,e){var n,r,i,s,o;let a=t.selection.main,c=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!c)return e;let h=t.facet(Qh);return new fz({search:((n=e?.literal)!==null&&n!==void 0?n:h.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:h.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:h.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function pz(t){let e=sm(t,pT);return e&&e.dom.querySelector("[main-field]")}function mz(t){let e=pz(t);e&&e==t.root.activeElement&&e.select()}const gz=t=>{let e=t.state.field(ll,!1);if(e&&e.panel){let n=pz(t);if(n&&n!=t.root.activeElement){let r=AA(t.state,e.query.spec);r.valid&&t.dispatch({effects:cm.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[dT.of(!0),e?cm.of(AA(t.state,e.query.spec)):Qe.appendConfig.of(ede)]});return!0},yz=t=>{let e=t.state.field(ll,!1);if(!e||!e.panel)return!1;let n=sm(t,pT);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:dT.of(!1)}),!0},Jfe=[{key:"Mod-f",run:gz,scope:"editor search-panel"},{key:"F3",run:Rv,shift:Mv,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Rv,shift:Mv,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:yz,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Yfe},{key:"Mod-Alt-g",run:Tfe},{key:"Mod-d",run:Vfe,preventDefault:!0}];class Qfe{constructor(e){this.view=e;let n=this.query=e.state.field(ll).query.spec;this.commit=this.commit.bind(this),this.searchField=At("input",{value:n.search,placeholder:fi(e,"Find"),"aria-label":fi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=At("input",{value:n.replace,placeholder:fi(e,"Replace"),"aria-label":fi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=At("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=At("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=At("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return At("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=At("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Rv(e),[fi(e,"next")]),r("prev",()=>Mv(e),[fi(e,"previous")]),r("select",()=>Kfe(e),[fi(e,"all")]),At("label",null,[this.caseField,fi(e,"match case")]),At("label",null,[this.reField,fi(e,"regexp")]),At("label",null,[this.wordField,fi(e,"by word")]),...e.state.readOnly?[]:[At("br"),this.replaceField,r("replace",()=>c3(e),[fi(e,"replace")]),r("replaceAll",()=>Xfe(e),[fi(e,"replace all")])],At("button",{name:"close",onclick:()=>yz(e),"aria-label":fi(e,"close"),type:"button"},[""])])}commit(){let e=new fz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:cm.of(e)}))}keydown(e){oce(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Mv:Rv)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),c3(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(cm)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Qh).top}}function fi(t,e){return t.state.phrase(e)}const My=30,Oy=/[\s\.,:;?!]/;function mT(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-My),o=Math.min(i,n+My),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let c=0;c<My;c++)if(!Oy.test(a[c+1])&&Oy.test(a[c])){a=a.slice(c);break}}if(o!=i){for(let c=a.length-1;c>a.length-My;c--)if(!Oy.test(a[c-1])&&Oy.test(a[c])){a=a.slice(0,c);break}}return _e.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const Zfe=_e.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ede=[ll,Bc.low(Gfe),Zfe];class bz{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=br(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(vz(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function u3(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function tde(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=u3(e)+u3(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function nde(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:tde(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}class h3{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function gc(t){return t.selection.main.from}function vz(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const xz=sa.define();function rde(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return{...t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let c=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:c},range:fe.cursor(a.from+s+c.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const f3=new WeakMap;function ide(t){if(!Array.isArray(t))return t;let e=f3.get(t);return e||f3.set(t,e=nde(t)),e}const Ov=Qe.define(),um=Qe.define();class sde{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=qr(e,n),i=Qs(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(qr(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let A=qr(e,0),k=Qs(A),P=k==e.length?0:-100;if(A!=n[0])if(A==r[0])P+=-200;else return null;return this.ret(P,[0,k])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let c=n.length,h=0;if(a<0){for(let A=0,k=Math.min(e.length,200);A<k&&h<c;){let P=qr(e,A);(P==n[h]||P==r[h])&&(i[h++]=A),A+=Qs(P)}if(h<c)return null}let f=0,d=0,m=!1,y=0,v=-1,w=-1,_=/[a-z]/.test(e),S=!0;for(let A=0,k=Math.min(e.length,200),P=0;A<k&&d<c;){let M=qr(e,A);a<0&&(f<c&&M==n[f]&&(s[f++]=A),y<c&&(M==n[y]||M==r[y]?(y==0&&(v=A),w=A+1,y++):y=0));let O,L=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(O=VE(M))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!A||L==1&&_||P==0&&L!=0)&&(n[d]==M||r[d]==M&&(m=!0)?o[d++]=A:o.length&&(S=!1)),P=L,A+=Qs(M)}return d==c&&o[0]==0&&S?this.result(-100+(m?-200:0),o,e):y==c&&v==0?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):y==c?this.ret(-900-e.length,[v,w]):d==c?this.result(-100+(m?-200:0)+-700+(S?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?Qs(qr(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class ode{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Bn=Ce.define({combine(t){return xo(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ade,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>d3(e(r),n(r)),optionClass:(e,n)=>r=>d3(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function d3(t,e){return t?e?t+" "+e:t:e}function ade(t,e,n,r,i,s){let o=t.textDirection==Nt.RTL,a=o,c=!1,h="top",f,d,m=e.left-i.left,y=i.right-e.right,v=r.right-r.left,w=r.bottom-r.top;if(a&&m<Math.min(v,y)?a=!1:!a&&y<Math.min(v,m)&&(a=!0),v<=(a?m:y))f=Math.max(i.top,Math.min(n.top,i.bottom-w))-e.top,d=Math.min(400,a?m:y);else{c=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let A=i.bottom-e.bottom;A>=w||A>e.top?f=n.bottom-e.top:(h="bottom",f=e.bottom-n.top)}let _=(e.bottom-e.top)/s.offsetHeight,S=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${f/_}px; max-width: ${d/S}px`,class:"cm-completionInfo-"+(c?o?"left-narrow":"right-narrow":a?"left":"right")}}function lde(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,c=0;for(let h=0;h<s.length;){let f=s[h++],d=s[h++];f>c&&o.appendChild(document.createTextNode(a.slice(c,f)));let m=o.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(a.slice(f,d))),m.className="cm-completionMatchedText",c=d}return c<a.length&&o.appendChild(document.createTextNode(a.slice(c))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function V2(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class cde{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Bn);this.optionContent=lde(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=V2(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{let{options:h}=e.state.field(n).open;for(let f=c.target,d;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(d=/-(\d+)$/.exec(f.id))&&+d[1]<h.length){this.applyCompletion(e,h[+d[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Bn).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:um.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=V2(s.length,o,e.state.facet(Bn).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=V2(n.options.length,n.selected,this.view.state.facet(Bn).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Kr(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&hde(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Bn).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:c}=e[o],{section:h}=a;if(h){let m=typeof h=="string"?h:h.name;if(m!=s&&(o>r.from||r.from==0))if(s=m,typeof h!="string"&&h.header)i.appendChild(h.header(h));else{let y=i.appendChild(document.createElement("completion-section"));y.textContent=m}}const f=i.appendChild(document.createElement("li"));f.id=n+"-"+o,f.setAttribute("role","option");let d=this.optionClass(a);d&&(f.className=d);for(let m of this.optionContent){let y=m(a,this.view.state,this.view,c);y&&f.appendChild(y)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function ude(t,e){return n=>new cde(n,t,e)}function hde(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function p3(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function fde(t,e){let n=[],r=null,i=h=>{n.push(h);let{section:f}=h.completion;if(f){r||(r=[]);let d=typeof f=="string"?f:f.name;r.some(m=>m.name==d)||r.push(typeof f=="string"?{name:d}:f)}},s=e.facet(Bn);for(let h of t)if(h.hasResult()){let f=h.result.getMatch;if(h.result.filter===!1)for(let d of h.result.options)i(new h3(d,h.source,f?f(d):[],1e9-n.length));else{let d=e.sliceDoc(h.from,h.to),m,y=s.filterStrict?new ode(d):new sde(d);for(let v of h.result.options)if(m=y.match(v.label)){let w=v.displayLabel?f?f(v,m.matched):[]:m.matched;i(new h3(v,h.source,w,m.score+(v.boost||0)))}}}if(r){let h=Object.create(null),f=0,d=(m,y)=>{var v,w;return((v=m.rank)!==null&&v!==void 0?v:1e9)-((w=y.rank)!==null&&w!==void 0?w:1e9)||(m.name<y.name?-1:1)};for(let m of r.sort(d))f-=1e5,h[m.name]=f;for(let m of n){let{section:y}=m.completion;y&&(m.score+=h[typeof y=="string"?y:y.name])}}let o=[],a=null,c=s.compareCompletions;for(let h of n.sort((f,d)=>d.score-f.score||c(f.completion,d.completion))){let f=h.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?o.push(h):p3(h.completion)>p3(a)&&(o[o.length-1]=h),a=h.completion}return o}class ih{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ih(this.options,m3(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(h=>h.isPending))return i.setDisabled();let a=fde(e,n);if(!a.length)return i&&e.some(h=>h.isPending)?i.setDisabled():null;let c=n.facet(Bn).selectOnOpen?0:-1;if(i&&i.selected!=c&&i.selected!=-1){let h=i.options[i.selected].completion;for(let f=0;f<a.length;f++)if(a[f].completion==h){c=f;break}}return new ih(a,m3(r,c),{pos:e.reduce((h,f)=>f.hasResult()?Math.min(h,f.from):h,1e8),create:bde,above:s.aboveCursor},i?i.timestamp:Date.now(),c,!1)}map(e){return new ih(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new ih(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Pv{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new Pv(gde,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Bn),s=(r.override||n.languageDataAt("autocomplete",gc(n)).map(ide)).map(c=>(this.active.find(f=>f.source==c)||new Yi(c,this.active.some(f=>f.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((c,h)=>c==this.active[h])&&(s=this.active);let o=this.open,a=e.effects.some(c=>c.is(gT));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!dde(s,this.active)||a?o=ih.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(c=>c.isPending)&&(o=null),!o&&s.every(c=>!c.isPending)&&s.some(c=>c.hasResult())&&(s=s.map(c=>c.hasResult()?new Yi(c.source,0):c));for(let c of e.effects)c.is(Sz)&&(o=o&&o.setSelected(c.value,this.id));return s==this.active&&o==this.open?this:new Pv(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?pde:mde}}function dde(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const pde={"aria-autocomplete":"list"},mde={};function m3(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const gde=[];function wz(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(xz);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Yi{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=wz(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new Yi(i.source,0)),r&4&&i.state==0&&(i=new Yi(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(Ov))i=new Yi(i.source,1,s.value);else if(s.is(um))i=new Yi(i.source,0);else if(s.is(gT))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(gc(e.state))}}class wh extends Yi{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=gc(e.state);if(a>o||!i||n&2&&(gc(e.startState)==this.from||a<this.limit))return new Yi(this.source,n&4?1:0);let c=e.changes.mapPos(this.limit);return yde(i.validFor,e.state,s,o)?new wh(this.source,this.explicit,c,i,s,o):i.update&&(i=i.update(i,s,o,new bz(e.state,a,!1)))?new wh(this.source,this.explicit,c,i,i.from,(r=i.to)!==null&&r!==void 0?r:gc(e.state)):new Yi(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new wh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Yi(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function yde(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):vz(t,!0).test(i)}const gT=Qe.define({map(t,e){return t.map(n=>n.map(e))}}),Sz=Qe.define(),Gr=Qn.define({create(){return Pv.start()},update(t,e){return t.update(e)},provide:t=>[tT.from(t,e=>e.tooltip),_e.contentAttributes.from(t,e=>e.attrs)]});function yT(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Gr).active.find(i=>i.source==e.source);return r instanceof wh?(typeof n=="string"?t.dispatch({...rde(t.state,n,r.from,r.to),annotations:xz.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const bde=ude(Gr,yT);function Py(t,e="option"){return n=>{let r=n.state.field(Gr,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Bn).interactionDelay)return!1;let i=1,s;e=="page"&&(s=oF(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:Sz.of(a)}),!0}}const vde=t=>{let e=t.state.field(Gr,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Bn).interactionDelay?!1:yT(t,e.open.options[e.open.selected])},F2=t=>t.state.field(Gr,!1)?(t.dispatch({effects:Ov.of(!0)}),!0):!1,xde=t=>{let e=t.state.field(Gr,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:um.of(null)}),!0)};class wde{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const Sde=50,_de=1e3,Cde=gn.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Gr).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Gr),n=t.state.facet(Bn);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Gr)==e)return;let r=t.transactions.some(s=>{let o=wz(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>Sde&&Date.now()-o.time>_de){for(let a of o.context.abortListeners)try{a()}catch(c){Kr(this.view.state,c)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(Ov)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Gr);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bn).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=gc(e),r=new bz(e,n,t.explicit,this.view),i=new wde(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:um.of(null)}),Kr(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bn).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Bn),r=this.view.state.field(Gr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=gc(s.updates.length?s.updates[0].startState:this.view.state),c=Math.min(a,s.done.from+(s.active.explicit?0:1)),h=new wh(s.active.source,s.active.explicit,c,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let f of s.updates)h=h.update(f,n);if(h.hasResult()){e.push(h);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new Yi(s.active.source,0);for(let c of s.updates)a=a.update(c,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:gT.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Gr,!1);if(e&&e.tooltip&&this.view.state.facet(Bn).closeOnBlur){let n=e.open&&oF(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:um.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ov.of(!1)}),20),this.composing=0}}}),Ade=typeof navigator=="object"&&/Win/.test(navigator.platform),kde=Bc.highest(_e.domEventHandlers({keydown(t,e){let n=e.state.field(Gr,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(Ade&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&yT(e,r),!1}})),Ede=_e.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),hm={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},uc=Qe.define({map(t,e){let n=e.mapPos(t,-1,Mr.TrackAfter);return n??void 0}}),bT=new class extends Cc{};bT.startSide=1;bT.endSide=-1;const _z=Qn.define({create(){return ft.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(uc)&&(t=t.update({add:[bT.range(n.value,n.value+1)]}));return t}});function Tde(){return[Mde,_z]}const z2="()[]{}<>";function Cz(t){for(let e=0;e<z2.length;e+=2)if(z2.charCodeAt(e)==t)return z2.charAt(e+1);return VE(t<128?t:t+1)}function Az(t,e){return t.languageDataAt("closeBrackets",e)[0]||hm}const Rde=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Mde=_e.inputHandler.of((t,e,n,r)=>{if((Rde?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Qs(qr(r,0))==1||e!=i.from||n!=i.to)return!1;let s=Dde(t.state,r);return s?(t.dispatch(s),!0):!1}),Ode=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Az(t,t.selection.main.head).brackets||hm.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=Lde(t.doc,o.head);for(let c of r)if(c==a&&tw(t.doc,o.head)==Cz(qr(c,0)))return{changes:{from:o.head-c.length,to:o.head+c.length},range:fe.cursor(o.head-c.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Pde=[{key:"Backspace",run:Ode}];function Dde(t,e){let n=Az(t,t.selection.main.head),r=n.brackets||hm.brackets;for(let i of r){let s=Cz(qr(i,0));if(e==i)return s==i?Bde(t,i,r.indexOf(i+i+i)>-1,n):Ide(t,i,s,n.before||hm.before);if(e==s&&kz(t,t.selection.main.from))return Nde(t,i,s)}return null}function kz(t,e){let n=!1;return t.field(_z).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function tw(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Qs(qr(n,0)))}function Lde(t,e){let n=t.sliceString(e-2,e);return Qs(qr(n,0))==n.length?n:n.slice(1)}function Ide(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:uc.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let a=tw(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:uc.of(o.head+e.length),range:fe.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Nde(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&tw(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:fe.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Bde(t,e,n,r){let i=r.stringPrefixes||hm.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:uc.of(a.to+e.length),range:fe.range(a.anchor+e.length,a.head+e.length)};let c=a.head,h=tw(t.doc,c),f;if(h==e){if(g3(t,c))return{changes:{insert:e+e,from:c},effects:uc.of(c+e.length),range:fe.cursor(c+e.length)};if(kz(t,c)){let m=n&&t.sliceDoc(c,c+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:c,to:c+m.length,insert:m},range:fe.cursor(c+m.length)}}}else{if(n&&t.sliceDoc(c-2*e.length,c)==e+e&&(f=y3(t,c-2*e.length,i))>-1&&g3(t,f))return{changes:{insert:e+e+e+e,from:c},effects:uc.of(c+e.length),range:fe.cursor(c+e.length)};if(t.charCategorizer(c)(h)!=zt.Word&&y3(t,c,i)>-1&&!jde(t,c,e,i))return{changes:{insert:e+e,from:c},effects:uc.of(c+e.length),range:fe.cursor(c+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function g3(t,e){let n=br(t).resolveInner(e+1);return n.parent&&n.from==e}function jde(t,e,n,r){let i=br(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),c=a.indexOf(n);if(!c||c>-1&&r.indexOf(a.slice(0,c))>-1){let f=i.firstChild;for(;f&&f.from==i.from&&f.to-f.from>n.length+c;){if(t.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let h=i.to==e&&i.parent;if(!h)break;i=h}return!1}function y3(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=zt.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=zt.Word)return s}return-1}function $de(t={}){return[kde,Gr,Bn.of(t),Cde,Vde,Ede]}const Ez=[{key:"Ctrl-Space",run:F2},{mac:"Alt-`",run:F2},{mac:"Alt-i",run:F2},{key:"Escape",run:xde},{key:"ArrowDown",run:Py(!0)},{key:"ArrowUp",run:Py(!1)},{key:"PageDown",run:Py(!0,"page")},{key:"PageUp",run:Py(!1,"page")},{key:"Enter",run:vde}],Vde=Bc.highest(ZE.computeN([Bn],t=>t.facet(Bn).defaultKeymap?[Ez]:[]));class b3{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class sc{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(fm).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((f,d)=>f.from-d.from||f.to-d.to),o=new Xo,a=[],c=0;for(let f=0;;){let d=f==s.length?null:s[f];if(!d&&!a.length)break;let m,y;for(a.length?(m=c,y=a.reduce((w,_)=>Math.min(w,_.to),d&&d.from>m?d.from:1e8)):(m=d.from,y=d.to,a.push(d),f++);f<s.length;){let w=s[f];if(w.from==m&&(w.to>w.from||w.to==m))a.push(w),f++,y=Math.min(w.to,y);else{y=Math.min(w.from,y);break}}let v=Zde(a);if(a.some(w=>w.from==w.to||w.from==w.to-1&&r.doc.lineAt(w.from).to==w.from))o.add(m,m,Ue.widget({widget:new Yde(v),diagnostics:a.slice()}));else{let w=a.reduce((_,S)=>S.markClass?_+" "+S.markClass:_,"");o.add(m,y,Ue.mark({class:"cm-lintRange cm-lintRange-"+v+w,diagnostics:a.slice(),inclusiveEnd:a.some(_=>_.to>y)}))}c=y;for(let w=0;w<a.length;w++)a[w].to<=c&&a.splice(w--,1)}let h=o.finish();return new sc(h,n,Nh(h))}}function Nh(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new b3(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new b3(r.from,s,r.diagnostic)}}),r}function Fde(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(fm).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(Tz))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function zde(t,e){return t.field(Ci,!1)?e:e.concat(Qe.appendConfig.of(epe))}const Tz=Qe.define(),vT=Qe.define(),Rz=Qe.define(),Ci=Qn.define({create(){return new sc(Ue.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=Nh(n,t.selected.diagnostic,s)||Nh(n,null,s)}!n.size&&i&&e.state.facet(fm).autoPanel&&(i=null),t=new sc(n,i,r)}for(let n of e.effects)if(n.is(Tz)){let r=e.state.facet(fm).autoPanel?n.value.length?dm.open:null:t.panel;t=sc.init(n.value,r,e.state)}else n.is(vT)?t=new sc(t.diagnostics,n.value?dm.open:null,t.selected):n.is(Rz)&&(t=new sc(t.diagnostics,t.panel,n.value));return t},provide:t=>[om.from(t,e=>e.panel),_e.decorations.from(t,e=>e.diagnostics)]}),Ude=Ue.mark({class:"cm-lintRange cm-lintRange-active"});function Hde(t,e,n){let{diagnostics:r}=t.state.field(Ci),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(c,h,{spec:f})=>{if(e>=c&&e<=h&&(c==h||(e>c||n>0)&&(e<h||n<0)))return i=f.diagnostics,s=c,o=h,!1});let a=t.state.facet(fm).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:qde(t,i)}}}:null}function qde(t,e){return At("ul",{class:"cm-tooltip-lint"},e.map(n=>Oz(t,n,!1)))}const Wde=t=>{let e=t.state.field(Ci,!1);(!e||!e.panel)&&t.dispatch({effects:zde(t.state,[vT.of(!0)])});let n=sm(t,dm.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},v3=t=>{let e=t.state.field(Ci,!1);return!e||!e.panel?!1:(t.dispatch({effects:vT.of(!1)}),!0)},Gde=t=>{let e=t.state.field(Ci,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},Kde=[{key:"Mod-Shift-m",run:Wde,preventDefault:!0},{key:"F8",run:Gde}],fm=Ce.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},xo(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n}))}});function Mz(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Oz(t,e,n){var r;let i=n?Mz(e.actions):[];return At("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},At("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,c=m=>{if(m.preventDefault(),a)return;a=!0;let y=Nh(t.state.field(Ci).diagnostics,e);y&&s.apply(t,y.from,y.to)},{name:h}=s,f=i[o]?h.indexOf(i[o]):-1,d=f<0?h:[h.slice(0,f),At("u",h.slice(f,f+1)),h.slice(f+1)];return At("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${h}${f<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&At("div",{class:"cm-diagnosticSource"},e.source))}class Yde extends wl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return At("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class x3{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Oz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class dm{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)v3(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Mz(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let c=Nh(this.view.state.field(Ci).diagnostics,s);c&&s.actions[a].apply(e,c.from,c.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=At("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=At("div",{class:"cm-panel-lint"},this.list,At("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>v3(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ci).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Ci),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,c,{spec:h})=>{for(let f of h.diagnostics){if(o.has(f))continue;o.add(f);let d=-1,m;for(let y=r;y<this.items.length;y++)if(this.items[y].diagnostic==f){d=y;break}d<0?(m=new x3(this.view,f),this.items.splice(r,0,m),i=!0):(m=this.items[d],d>r&&(this.items.splice(r,d-r),i=!0)),n&&m.diagnostic==n.diagnostic?m.dom.hasAttribute("aria-selected")||(m.dom.setAttribute("aria-selected","true"),s=m):m.dom.hasAttribute("aria-selected")&&m.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new x3(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{let h=c.height/this.list.offsetHeight;a.top<c.top?this.list.scrollTop-=(c.top-a.top)/h:a.bottom>c.bottom&&(this.list.scrollTop+=(a.bottom-c.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Ci),r=Nh(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Rz.of(r)})}static open(e){return new dm(e)}}function Xde(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Dy(t){return Xde(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Jde=_e.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Dy("#d11")},".cm-lintRange-warning":{backgroundImage:Dy("orange")},".cm-lintRange-info":{backgroundImage:Dy("#999")},".cm-lintRange-hint":{backgroundImage:Dy("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Qde(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Zde(t){let e="hint",n=1;for(let r of t){let i=Qde(r.severity);i>n&&(n=i,e=r.severity)}return e}const epe=[Ci,_e.decorations.compute([Ci],t=>{let{selected:e,panel:n}=t.field(Ci);return!e||!n||e.from==e.to?Ue.none:Ue.set([Ude.range(e.from,e.to)])}),Wce(Hde,{hideOn:Fde}),Jde],tpe=[rue(),oue(),_ce(),Che(),Xue(),fce(),yce(),ht.allowMultipleSelections.of(!0),Nue(),Que(the,{fallback:!0}),lhe(),Tde(),$de(),Ice(),jce(),Rce(),Pfe(),ZE.of([...Pde,...kfe,...Jfe,...Dhe,...Wue,...Ez,...Kde])];var w3={};class Dv{constructor(e,n,r,i,s,o,a,c,h,f=0,d){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=c,this.curContext=h,this.lookAhead=f,this.parent=d}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new Dv(e,[],n,r,r,0,[],0,i?new S3(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let c=this.stack.length-(r-1)*3-(e&262144?6:0),h=c?this.stack[c-2]:this.p.ranges[0].from,f=this.reducePos-h;f>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=f));let d=c?this.stack[c-1]:0,m=this.bufferBase+this.buffer.length-d;if(i<s.minRepeatTerm||e&131072){let y=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,h,y,m+4,!0)}if(e&262144)this.state=this.stack[c];else{let y=this.stack[c-3];this.state=s.getGoto(y,i,!0)}for(;this.stack.length>c;)this.stack.pop();this.reduceContext(i,h)}storeNode(e,n,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==r)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let c=o;c>0&&this.buffer[c-2]>r;c-=4)if(this.buffer[c-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||n<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(n,r),n<=o.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new Dv(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new npe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let o=n[s+1];i.some((a,c)=>c&1&&a==o)||i.push(n[s],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let c=o&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],c,!1)>=0)return a<<19|65536|c}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new S3(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class S3{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class npe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class Lv{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new Lv(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Lv(this.stack,this.pos,this.index)}}function Ly(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let c=o-32;if(c>=46&&(c-=46,a=!0),s+=c,a)break;s*=46}n?n[i++]=s:n=new e(s)}return n}class Tb{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const _3=new Tb;class rpe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=_3,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=_3,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class Sh{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;ipe(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}Sh.prototype.contextual=Sh.prototype.fallback=Sh.prototype.extend=!1;Sh.prototype.fallback=Sh.prototype.extend=!1;function ipe(t,e,n,r,i,s){let o=0,a=1<<r,{dialect:c}=n.p.parser;e:for(;(a&t[o])!=0;){let h=t[o+1];for(let y=o+3;y<h;y+=2)if((t[y+1]&a)>0){let v=t[y];if(c.allows(v)&&(e.token.value==-1||e.token.value==v||spe(v,e.token.value,i,s))){e.acceptToken(v);break}}let f=e.next,d=0,m=t[o+2];if(e.next<0&&m>d&&t[h+m*3-3]==65535){o=t[h+m*3-1];continue e}for(;d<m;){let y=d+m>>1,v=h+y+(y<<1),w=t[v],_=t[v+1]||65536;if(f<w)m=y;else if(f>=_)d=y+1;else{o=t[v+2],e.advance();continue e}}break}}function C3(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function spe(t,e,n,r){let i=C3(n,r,e);return i<0||C3(n,r,t)<i}const di=typeof process<"u"&&w3&&/\bparse\b/.test(w3.LOG);let U2=null;function A3(t,e,n){let r=t.cursor(Nn.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class ope{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?A3(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?A3(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof dn){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let c=s.prop(it.lookAhead);if(!c||a+c<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class ape{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Tb)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,c=0;for(let h=0;h<s.length;h++){if((1<<h&o)==0)continue;let f=s[h],d=this.tokens[h];if(!(r&&!f.fallback)&&((f.contextual||d.start!=e.pos||d.mask!=o||d.context!=a)&&(this.updateCachedToken(d,f,e),d.mask=o,d.context=a),d.lookAhead>d.end+25&&(c=Math.max(d.lookAhead,c)),d.value!=0)){let m=n;if(d.extended>-1&&(n=this.addActions(e,d.extended,d.end,n)),n=this.addActions(e,d.value,d.end,n),!f.extend&&(r=d,n>m))break}}for(;this.actions.length>n;)this.actions.pop();return c&&e.setLookAhead(c),!r&&e.pos==this.stream.end&&(r=new Tb,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Tb,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let c=0;c<2;c++)for(let h=o.stateSlot(s,c?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=Ho(a,h+2);else{i==0&&a[h+1]==2&&(i=this.putAction(Ho(a,h+2),n,r,i));break}a[h]==n&&(i=this.putAction(Ho(a,h+1),n,r,i))}return i}}class lpe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new rpe(n,i),this.tokens=new ape(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[Dv.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new ope(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let c=this.tokens.getMainToken(a);s.push(c.value,c.end)}}break}}if(!r.length){let o=i&&upe(i);if(o)return di&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw di&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return di&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,c)=>c.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let c=o+1;c<r.length;c++){let h=r[c];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)r.splice(c--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=di?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,f=h?e.curContext.hash:0;for(let d=this.fragments.nodeAt(i);d;){let m=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(e.state,d.type.id):-1;if(m>-1&&d.length&&(!h||(d.prop(it.contextHash)||0)==f))return e.useNode(d,m),di&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof dn)||d.children.length==0||d.positions[0]>0)break;let y=d.children[0];if(y instanceof dn&&d.positions[0]==0)d=y;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),di&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let c=this.tokens.getActions(e);for(let h=0;h<c.length;){let f=c[h++],d=c[h++],m=c[h++],y=h==c.length||!r,v=y?e:e.split(),w=this.tokens.mainToken;if(v.apply(f,d,w?w.start:v.pos,m),di&&console.log(o+this.stackID(v)+` (via ${(f&65536)==0?"shift":`reduce of ${s.getName(f&65535)}`} for ${s.getName(d)} @ ${i}${v==e?"":", split"})`),y)return!0;v.pos>i?n.push(v):r.push(v)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return k3(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],c=n[o<<1],h=n[(o<<1)+1],f=di?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),di&&console.log(f+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let d=a.split(),m=f;for(let y=0;d.forceReduce()&&y<10&&(di&&console.log(m+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,r));y++)di&&(m=this.stackID(d)+" -> ");for(let y of a.recoverByInsert(c))di&&console.log(f+this.stackID(y)+" (via recover-insert)"),this.advanceFully(y,r);this.stream.end>a.pos?(h==a.pos&&(h++,c=0),a.recoverByDelete(c,h),di&&console.log(f+this.stackID(a)+` (via recover-delete ${this.parser.getName(c)})`),k3(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),dn.build({buffer:Lv.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(U2||(U2=new WeakMap)).get(e);return n||U2.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function k3(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class cpe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class Iv extends pF{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,c,h){i[a].push([c,c.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let c=a[0];typeof c=="string"&&(c=it[c]);for(let h=1;h<a.length;){let f=a[h++];if(f>=0)s(f,c,a[h++]);else{let d=a[h+-f];for(let m=-f;m>0;m--)s(a[h++],c,d);h++}}}this.nodeSet=new nT(n.map((a,c)=>Qr.define({name:c>=this.minRepeatTerm?void 0:a,id:c,props:i[c],top:r.indexOf(c)>-1,error:c==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(c)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=uF;let o=Ly(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(E3),this.states=Ly(e.states,Uint32Array),this.data=Ly(e.stateData),this.goto=Ly(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Sh(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new lpe(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let o=i[s++],a=o&1,c=i[s++];if(a&&r)return c;for(let h=s+(o>>1);s<h;s++)if(i[s]==e)return c;if(a)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Ho(r,s+2)];else{if(r[s+1]==2)return Ho(r,s+2);break}if(o==n||o==0)return Ho(r,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Ho(this.data,s+2);else break;i=n(Ho(this.data,s+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Ho(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((s,o)=>o&1&&s==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(Iv.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=E3(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let o=this.dialects[n[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new cpe(e,r,i)}static deserialize(e){return new Iv(e)}}function Ho(t,e){return t[e]|t[e+1]<<16}function upe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function E3(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const hpe=mF({String:ve.string,Number:ve.number,"True False":ve.bool,PropertyName:ve.propertyName,Null:ve.null,", :":ve.separator,"[ ]":ve.squareBracket,"{ }":ve.brace}),fpe=Iv.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:" JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[hpe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),dpe=xv.define({name:"json",parser:fpe.configure({props:[vF.add({Object:WN({except:/^\s*\}/}),Array:WN({except:/^\s*\]/})}),wF.add({"Object Array":jue})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function ppe(){return new kue(dpe)}const mpe=({open:t,onClose:e})=>{const{t:n}=Mt(),{saveConfig:r,getConfig:i}=vo(),s=xe.useRef(null),o=xe.useRef(null),[a,c]=xe.useState(""),[h,f]=xe.useState(!0),d=m=>{try{return JSON.parse(m),f(!0),!0}catch{return f(!1),!1}};return xe.useEffect(()=>{if(!t)return;const m=()=>{if(s.current&&!o.current){const y=JSON.stringify(i(),null,2);c(y),d(y);const v=ht.create({doc:y,extensions:[tpe,ppe(),_e.updateListener.of(w=>{if(w.docChanged){const _=w.state.doc.toString();c(_),d(_)}}),_e.theme({"&":{height:"200px",maxHeight:"200px"},".cm-content":{padding:"10px"},".cm-focused":{outline:"none"},".cm-editor":{height:"200px",maxHeight:"200px"},".cm-scroller":{fontFamily:"monospace",height:"200px",maxHeight:"200px"},".cm-gutters":{height:"200px",maxHeight:"200px"}})]});o.current=new _e({state:v,parent:s.current})}else setTimeout(m,100)};return setTimeout(m,50),()=>{o.current&&(o.current.destroy(),o.current=null)}},[t,i]),C.jsx(Ic,{open:t,onOpenChange:()=>{},children:C.jsxs(Nc,{header:n("EditConfiguration"),onClose:e,className:"w-[564px] h-[400px]",children:[C.jsx("div",{className:"flex flex-col gap-[8px] h-[280px] pt-[8px] pb-[16px]",children:C.jsxs("div",{className:"flex flex-col gap-[8px] h-[256px] p-[12px] bg-[var(--servers-edit-config-json-background-color)] rounded-[12px]",children:[C.jsxs("div",{className:"flex flex-row justify-between",children:[C.jsx("p",{className:"font-bold text-[14px] leading-[20px] text-[var(--servers-edit-config-json-header-color)]",children:n("EnterYourJSONConfiguration")}),C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-edit-config-json-lang-color)]",children:"json"})]}),C.jsx("div",{ref:s,className:"border border-[var(--servers-edit-config-json-editor-border-color)] bg-[var(--servers-edit-config-json-editor-background-color)] rounded-[4px] overflow-hidden h-full max-h-full"})]})}),C.jsxs("div",{className:"flex flex-row items-center justify-end gap-[16px] h-[64px] border-t border-[var(--servers-edit-config-buttons-border-color)] mx-[-32px] px-[32px]",children:[C.jsx(mn,{onClick:e,variant:"default",children:n("Cancel")}),C.jsx(mn,{disabled:!h,onClick:()=>{r(JSON.parse(a)),e()},children:n("Save")})]})]})})},xT=({className:t,size:e=16})=>C.jsx("div",{className:Ye("inline-block animate-spin rounded-full border-2 border-solid border-[var(--loader-border-color)] border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",t),style:{width:`${e}px`,height:`${e}px`},role:"status","aria-label":"loading"}),gpe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5%209.3018C6.08346%206.49281%208.80901%204.5%2012%204.5C16.1421%204.5%2019.5%207.85786%2019.5%2012C19.5%2016.1421%2016.1421%2019.5%2012%2019.5C8.80901%2019.5%206.08346%2017.5072%205%2014.6982M7.5%209.5H4.5V6.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ype="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.5%2017.5H14.5M7.5%209.5H16.5M5.5%205.5H14.5M9.5%2013.5H18.5'%20stroke='%23383838'%20stroke-miterlimit='1.41421'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",bpe=({type:t,open:e,onClose:n})=>{const{t:r}=Mt(),[i,s]=xe.useState([]),{getCustomServersLogs:o}=vo();xe.useEffect(()=>{const c=async()=>{const f=o();s(f[t])};c();const h=setInterval(()=>{c()},500);return()=>clearInterval(h)},[o,t]);const a=async()=>{await navigator.clipboard.writeText(i.join(`
`)),n()};return C.jsx(Ic,{open:e,onOpenChange:()=>{},children:C.jsxs(Nc,{header:`${t} ${r("logs").toLowerCase()}`,onClose:n,className:"w-[720px] h-[520px]",children:[C.jsx("div",{className:"flex flex-col gap-[8px] h-[400px] py-[8px]",children:C.jsx("div",{className:"flex flex-col border h-[384px] border-[var(--servers-logs-dialog-border-color)] overflow-y-auto rounded-[8px]",children:i.map(c=>C.jsx("p",{className:"text-[var(--servers-logs-dialog-log-color)] font-normal text-[14px] leading-[20px]",children:c},c))})}),C.jsxs("div",{className:"flex flex-row items-center justify-end gap-[16px] h-[64px] border-t border-[var(--servers-edit-config-buttons-border-color)] mx-[-32px] px-[32px]",children:[C.jsx(mn,{onClick:a,variant:"default",children:r("CopyToClipboard")}),C.jsx(mn,{onClick:n,children:r("Close")})]})]})})},T3=({name:t,mcpItems:e,isLoading:n,isSystem:r,disableEnable:i})=>{const{t:s}=Mt(),[o,a]=xe.useState(!1),[c,h]=xe.useState(!1),[f,d]=xe.useState(!1),m=xe.useRef(null),{changeToolStatus:y,deleteCustomServer:v}=vo(),w=()=>{e.filter(A=>!A.enabled).forEach(A=>{y(t,A.name,!0)})},_=()=>{e.filter(A=>A.enabled).forEach(A=>{y(t,A.name,!1)})},S=()=>d(!0);return xe.useEffect(()=>{n&&a(!1)},[n]),C.jsxs("div",{className:"flex flex-col",children:[C.jsxs("div",{className:`h-[36px] px-[8px] rounded-[4px] flex items-center justify-between ${n?"":"cursor-pointer"} ${o?"bg-[var(--servers-available-tools-item-active-background-color)]":"bg-[var(--servers-available-tools-item-background-color)]"} ${!n&&!o?"hover:bg-[var(--servers-available-tools-item-hover-background-color)]":""}`,onClick:()=>{n||c||e.length===0||a(A=>!A)},children:[C.jsxs("div",{className:"flex items-center gap-[8px]",children:[C.jsx(Ft,{iconName:NE,size:24,disableHover:!0,isStroke:!0,isTransform:o}),C.jsx("p",{children:t}),n?null:C.jsxs("p",{className:"font-normal text-[14px] text-[var(--servers-available-tools-sub-header-color)]",children:[C.jsx("span",{className:"text-[var(--servers-available-tools-current-tool-color)]",children:e.filter(A=>A.enabled).length}),"/",e.length," ",s("ToolsEnabled")]})]}),C.jsx("div",{ref:m,children:n?C.jsx(xT,{}):C.jsx(Lc,{onOpenChange:h,trigger:C.jsx(Ft,{iconName:EE,color:"var(--ai-provider-item-icon-color)",size:20,isActive:c,insideElement:!0}),items:[...e.length===0?[]:[{text:s("EnableAllTools"),onClick:w},{text:s("DisableAllTools"),onClick:_}],...r?[]:[{text:"",onClick:()=>{},isSeparator:!0},{icon:C.jsx(Ft,{iconName:gpe,size:20,disableHover:!0,isStroke:!0}),text:s("Restart"),onClick:()=>{hr.restartCustomServer(t)}},{icon:C.jsx(Ft,{iconName:ype,size:20,disableHover:!0}),text:s("Logs"),onClick:S},{text:"",onClick:()=>{},isSeparator:!0},{icon:C.jsx(Ft,{iconName:TE,size:20,disableHover:!0}),text:s("Delete"),onClick:()=>{v(t)}}]],side:"right",align:"start",sideOffset:0,containerRef:m.current})})]}),o?C.jsx("div",{className:"flex flex-col gap-[2px] mt-[4px]",children:e.map(A=>C.jsxs("div",{className:"h-[36px] rounded-[4px] cursor-pointer flex items-center justify-between ps-[40px] pe-[8px] hover:bg-[var(--servers-available-tools-item-hover-background-color)]",onClick:()=>{y(t,A.name,!A.enabled)},children:[C.jsx("p",{children:A.name}),C.jsx(bV,{checked:A.enabled??!1,disabled:i&&!A.enabled,onCheckedChange:()=>{}})]}))}):null,f?C.jsx(bpe,{type:t,open:f,onClose:()=>d(!1)}):null]})},vpe=()=>{const{t}=Mt(),[e,n]=xe.useState({}),{servers:r,tools:i,webSearchEnabled:s}=vo(),[o,a]=xe.useState(s?i.length-2:i.length);xe.useEffect(()=>{a(s?i.length-2:i.length)},[i.length,s]),xe.useEffect(()=>{n(hr.getCustomServers());const h=setInterval(()=>{n(hr.getCustomServers())},1e3);return()=>clearInterval(h)},[]);const c=s?i.length>=yb:i.length>=_p;return C.jsxs("div",{className:"w-[640px] h-[560px] border border-[var(--servers-available-tools-border-color)] rounded-[8px] flex flex-col",children:[C.jsxs("div",{className:"min-h-[44px] h-[44px] flex items-center justify-between px-[16px] border-b border-[var(--servers-available-tools-border-color)]",children:[C.jsx("p",{className:"font-bold text-[14px] leading-[20px] text-[var(--servers-available-tools-header-color)]",children:t("AvailableTools")}),C.jsxs("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-available-tools-sub-header-color)]",children:[C.jsx("span",{className:"text-[var(--servers-available-tools-current-tool-color)]",children:o}),"/",_p," ",t("Tools")]})]}),C.jsxs("div",{className:"flex flex-col gap-[8px] pt-[12px] pb-[16px] px-[8px] overflow-y-auto",children:[C.jsx(T3,{name:"desktop-editor",mcpItems:r["desktop-editor"]??[],isLoading:!1,isSystem:!0,disableEnable:c}),Object.keys(e).map(h=>C.jsx(T3,{name:h,mcpItems:r[h]??[],isLoading:!r[h]?.length,isSystem:!1,disableEnable:c},h))]})]})},xpe=()=>{const{t}=Mt(),[e,n]=xe.useState(!1);return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"flex flex-col gap-[16px] mt-[16px]",children:[C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-description-color)]",children:t("CustomServersDescription")}),C.jsx(mn,{className:"w-fit",onClick:()=>n(!0),children:t("EditConfiguration")}),C.jsx(vpe,{})]}),C.jsx(mpe,{open:e,onClose:()=>n(!1)})]})},wpe=()=>{const{t}=Mt(),[e,n]=xe.useState(""),[r,i]=xe.useState(""),[s,o]=xe.useState(!1);xe.useEffect(()=>{const h=hr.getWebSearchData();h&&(n(h.provider),i(h.key),o(!0))},[]);const a=()=>{!e||!r||(hr.setWebSearchData({provider:e,key:r}),o(!0))},c=()=>{n(""),i(""),o(!1),hr.setWebSearchData(null)};return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"flex flex-col gap-[16px] mt-[16px]",children:[C.jsx("p",{className:"font-normal text-[14px] leading-[20px] text-[var(--servers-description-color)]",children:t("WebSearchDescription")}),C.jsxs("div",{className:"flex flex-col gap-[16px]",children:[C.jsx(to,{header:t("WebSearchEngine"),children:C.jsx(Fx,{className:"w-[260px]",value:e||t("SelectEngine"),items:s?[]:[{text:"Exa",id:"exa",onClick:()=>n("exa")}]})}),C.jsx(to,{header:t("APIKey"),children:C.jsx(oo,{className:"w-[260px]",type:"password",value:r,disabled:s,onChange:h=>i(h.target.value)})})]}),C.jsxs("div",{className:"flex flex-row gap-[8px]",children:[C.jsx(mn,{className:"w-fit",onClick:a,disabled:!e||!r||s,children:t("Save")}),C.jsx(mn,{className:"w-fit",disabled:!s,onClick:c,variant:"default",children:t("ResetSettings")})]})]})})},Spe=()=>{const{t}=Mt(),[e,n]=xe.useState("providers"),{providers:r}=ts(),i=C.jsxs("div",{className:"flex flex-col gap-[16px] select-none",children:[null,["providers"].map(s=>{const o=s==="wallet";return C.jsxs("div",{className:"flex gap-[12px]",children:[null,C.jsxs("div",{className:"select-none flex flex-col gap-[12px]",children:[C.jsxs("div",{className:"flex flex-col gap-[4px]",children:[null,C.jsx("p",{className:"text-[14px] leading-[20px] text-[var(--settings-description-color)]",children:t(o?"ONLYOFFICEWalletDescription":"AIProvidersDescription")})]}),o?C.jsx(aae,{isActive:e===s}):C.jsx(oae,{isActive:e===s})]})]},s)})]});return C.jsx(C.Fragment,{children:C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"flex flex-col gap-[16px] box-border max-w-[640px] w-[640px] mx-[32px] mt-[32px]",children:[C.jsx("h1",{className:"select-none font-bold text-[20px] leading-[28px] text-[var(--settings-header-color)]",children:t("Settings")}),C.jsx(jie,{items:[{value:"ai-settings",label:t("Connection"),content:i},{value:"mcp-servers",label:t("MCPServers"),content:C.jsx(xpe,{}),disabled:!r.length},{value:"web-search",label:t("WebSearch"),content:C.jsx(wpe,{}),disabled:!r.length}]})]})})})},Pz=E.createContext({});function _pe(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const wT=typeof window<"u",Cpe=wT?E.useLayoutEffect:E.useEffect,ST=E.createContext(null);function _T(t,e){t.indexOf(e)===-1&&t.push(e)}function CT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Zo=(t,e,n)=>n>e?e:n<t?t:n;let AT=()=>{};const ea={},Dz=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Lz(t){return typeof t=="object"&&t!==null}const Iz=t=>/^0[^.\s]+$/u.test(t);function kT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Zi=t=>t,Ape=(t,e)=>n=>e(t(n)),Wm=(...t)=>t.reduce(Ape),pm=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class ET{constructor(){this.subscriptions=[]}add(e){return _T(this.subscriptions,e),()=>CT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lo=t=>t*1e3,co=t=>t/1e3;function Nz(t,e){return e?t*(1e3/e):0}const Bz=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kpe=1e-7,Epe=12;function Tpe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Bz(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>kpe&&++a<Epe);return o}function Gm(t,e,n,r){if(t===e&&n===r)return Zi;const i=s=>Tpe(s,0,1,t,n);return s=>s===0||s===1?s:Bz(i(s),e,r)}const jz=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$z=t=>e=>1-t(1-e),Vz=Gm(.33,1.53,.69,.99),TT=$z(Vz),Fz=jz(TT),zz=t=>(t*=2)<1?.5*TT(t):.5*(2-Math.pow(2,-10*(t-1))),RT=t=>1-Math.sin(Math.acos(t)),Uz=$z(RT),Hz=jz(RT),Rpe=Gm(.42,0,1,1),Mpe=Gm(0,0,.58,1),qz=Gm(.42,0,.58,1),Ope=t=>Array.isArray(t)&&typeof t[0]!="number",Wz=t=>Array.isArray(t)&&typeof t[0]=="number",Ppe={linear:Zi,easeIn:Rpe,easeInOut:qz,easeOut:Mpe,circIn:RT,circInOut:Hz,circOut:Uz,backIn:TT,backInOut:Fz,backOut:Vz,anticipate:zz},Dpe=t=>typeof t=="string",R3=t=>{if(Wz(t)){AT(t.length===4);const[e,n,r,i]=t;return Gm(e,n,r,i)}else if(Dpe(t))return Ppe[t];return t},Iy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Lpe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(f){o.has(f)&&(h.schedule(f),t()),f(a)}const h={schedule:(f,d=!1,m=!1)=>{const v=m&&i?n:r;return d&&o.add(f),v.has(f)||v.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,h.process(f))}};return h}const Ipe=40;function Gz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Iy.reduce((k,P)=>(k[P]=Lpe(s),k),{}),{setup:a,read:c,resolveKeyframes:h,preUpdate:f,update:d,preRender:m,render:y,postRender:v}=o,w=()=>{const k=ea.useManualTiming?i.timestamp:performance.now();n=!1,ea.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,Ipe),1)),i.timestamp=k,i.isProcessing=!0,a.process(i),c.process(i),h.process(i),f.process(i),d.process(i),m.process(i),y.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},_=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:Iy.reduce((k,P)=>{const M=o[P];return k[P]=(O,L=!1,N=!1)=>(n||_(),M.schedule(O,L,N)),k},{}),cancel:k=>{for(let P=0;P<Iy.length;P++)o[Iy[P]].cancel(k)},state:i,steps:o}}const{schedule:Ut,cancel:vl,state:Un,steps:H2}=Gz(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zi,!0);let Rb;function Npe(){Rb=void 0}const Xr={now:()=>(Rb===void 0&&Xr.set(Un.isProcessing||ea.useManualTiming?Un.timestamp:performance.now()),Rb),set:t=>{Rb=t,queueMicrotask(Npe)}},Kz=t=>e=>typeof e=="string"&&e.startsWith(t),MT=Kz("--"),Bpe=Kz("var(--"),OT=t=>Bpe(t)?jpe.test(t.split("/*")[0].trim()):!1,jpe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Zh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mm={...Zh,transform:t=>Zo(0,1,t)},Ny={...Zh,default:1},Mp=t=>Math.round(t*1e5)/1e5,PT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $pe(t){return t==null}const Vpe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,DT=(t,e)=>n=>!!(typeof n=="string"&&Vpe.test(n)&&n.startsWith(t)||e&&!$pe(n)&&Object.prototype.hasOwnProperty.call(n,e)),Yz=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(PT);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Fpe=t=>Zo(0,255,t),q2={...Zh,transform:t=>Math.round(Fpe(t))},hc={test:DT("rgb","red"),parse:Yz("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+q2.transform(t)+", "+q2.transform(e)+", "+q2.transform(n)+", "+Mp(mm.transform(r))+")"};function zpe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kA={test:DT("#"),parse:zpe,transform:hc.transform},Km=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ya=Km("deg"),uo=Km("%"),qe=Km("px"),Upe=Km("vh"),Hpe=Km("vw"),M3={...uo,parse:t=>uo.parse(t)/100,transform:t=>uo.transform(t*100)},sh={test:DT("hsl","hue"),parse:Yz("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+uo.transform(Mp(e))+", "+uo.transform(Mp(n))+", "+Mp(mm.transform(r))+")"},un={test:t=>hc.test(t)||kA.test(t)||sh.test(t),parse:t=>hc.test(t)?hc.parse(t):sh.test(t)?sh.parse(t):kA.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?hc.transform(t):sh.transform(t),getAnimatableNone:t=>{const e=un.parse(t);return e.alpha=0,un.transform(e)}},qpe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Wpe(t){return isNaN(t)&&typeof t=="string"&&(t.match(PT)?.length||0)+(t.match(qpe)?.length||0)>0}const Xz="number",Jz="color",Gpe="var",Kpe="var(",O3="${}",Ype=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gm(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Ype,c=>(un.test(c)?(r.color.push(s),i.push(Jz),n.push(un.parse(c))):c.startsWith(Kpe)?(r.var.push(s),i.push(Gpe),n.push(c)):(r.number.push(s),i.push(Xz),n.push(parseFloat(c))),++s,O3)).split(O3);return{values:n,split:a,indexes:r,types:i}}function Qz(t){return gm(t).values}function Zz(t){const{split:e,types:n}=gm(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Xz?s+=Mp(i[o]):a===Jz?s+=un.transform(i[o]):s+=i[o]}return s}}const Xpe=t=>typeof t=="number"?0:un.test(t)?un.getAnimatableNone(t):t;function Jpe(t){const e=Qz(t);return Zz(t)(e.map(Xpe))}const xl={test:Wpe,parse:Qz,createTransformer:Zz,getAnimatableNone:Jpe};function W2(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Qpe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=W2(c,a,t+1/3),s=W2(c,a,t),o=W2(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Nv(t,e){return n=>n>0?e:t}const Gt=(t,e,n)=>t+(e-t)*n,G2=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Zpe=[kA,hc,sh],eme=t=>Zpe.find(e=>e.test(t));function P3(t){const e=eme(t);if(!e)return!1;let n=e.parse(t);return e===sh&&(n=Qpe(n)),n}const D3=(t,e)=>{const n=P3(t),r=P3(e);if(!n||!r)return Nv(t,e);const i={...n};return s=>(i.red=G2(n.red,r.red,s),i.green=G2(n.green,r.green,s),i.blue=G2(n.blue,r.blue,s),i.alpha=Gt(n.alpha,r.alpha,s),hc.transform(i))},EA=new Set(["none","hidden"]);function tme(t,e){return EA.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function nme(t,e){return n=>Gt(t,e,n)}function LT(t){return typeof t=="number"?nme:typeof t=="string"?OT(t)?Nv:un.test(t)?D3:sme:Array.isArray(t)?eU:typeof t=="object"?un.test(t)?D3:rme:Nv}function eU(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>LT(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function rme(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=LT(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function ime(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const sme=(t,e)=>{const n=xl.createTransformer(e),r=gm(t),i=gm(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?EA.has(t)&&!i.values.length||EA.has(e)&&!r.values.length?tme(t,e):Wm(eU(ime(r,i),i.values),n):Nv(t,e)};function tU(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Gt(t,e,n):LT(t)(t,e)}const ome=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ut.update(e,n),stop:()=>vl(e),now:()=>Un.isProcessing?Un.timestamp:Xr.now()}},nU=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Bv=2e4;function IT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Bv;)e+=n,r=t.next(e);return e>=Bv?1/0:e}function ame(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(IT(r),Bv);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:co(i)}}const lme=5;function rU(t,e,n){const r=Math.max(e-lme,0);return Nz(n-t(r),e-r)}const Qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},K2=.001;function cme({duration:t=Qt.duration,bounce:e=Qt.bounce,velocity:n=Qt.velocity,mass:r=Qt.mass}){let i,s,o=1-e;o=Zo(Qt.minDamping,Qt.maxDamping,o),t=Zo(Qt.minDuration,Qt.maxDuration,co(t)),o<1?(i=h=>{const f=h*o,d=f*t,m=f-n,y=TA(h,o),v=Math.exp(-d);return K2-m/y*v},s=h=>{const d=h*o*t,m=d*n+n,y=Math.pow(o,2)*Math.pow(h,2)*t,v=Math.exp(-d),w=TA(Math.pow(h,2),o);return(-i(h)+K2>0?-1:1)*((m-y)*v)/w}):(i=h=>{const f=Math.exp(-h*t),d=(h-n)*t+1;return-K2+f*d},s=h=>{const f=Math.exp(-h*t),d=(n-h)*(t*t);return f*d});const a=5/t,c=hme(i,s,a);if(t=lo(t),isNaN(c))return{stiffness:Qt.stiffness,damping:Qt.damping,duration:t};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:t}}}const ume=12;function hme(t,e,n){let r=n;for(let i=1;i<ume;i++)r=r-t(r)/e(r);return r}function TA(t,e){return t*Math.sqrt(1-e*e)}const fme=["duration","bounce"],dme=["stiffness","damping","mass"];function L3(t,e){return e.some(n=>t[n]!==void 0)}function pme(t){let e={velocity:Qt.velocity,stiffness:Qt.stiffness,damping:Qt.damping,mass:Qt.mass,isResolvedFromDuration:!1,...t};if(!L3(t,dme)&&L3(t,fme))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Zo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Qt.mass,stiffness:i,damping:s}}else{const n=cme(t);e={...e,...n,mass:Qt.mass},e.isResolvedFromDuration=!0}return e}function jv(t=Qt.visualDuration,e=Qt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:h,mass:f,duration:d,velocity:m,isResolvedFromDuration:y}=pme({...n,velocity:-co(n.velocity||0)}),v=m||0,w=h/(2*Math.sqrt(c*f)),_=o-s,S=co(Math.sqrt(c/f)),A=Math.abs(_)<5;r||(r=A?Qt.restSpeed.granular:Qt.restSpeed.default),i||(i=A?Qt.restDelta.granular:Qt.restDelta.default);let k;if(w<1){const M=TA(S,w);k=O=>{const L=Math.exp(-w*S*O);return o-L*((v+w*S*_)/M*Math.sin(M*O)+_*Math.cos(M*O))}}else if(w===1)k=M=>o-Math.exp(-S*M)*(_+(v+S*_)*M);else{const M=S*Math.sqrt(w*w-1);k=O=>{const L=Math.exp(-w*S*O),N=Math.min(M*O,300);return o-L*((v+w*S*_)*Math.sinh(N)+M*_*Math.cosh(N))/M}}const P={calculatedDuration:y&&d||null,next:M=>{const O=k(M);if(y)a.done=M>=d;else{let L=M===0?v:0;w<1&&(L=M===0?lo(v):rU(k,M,O));const N=Math.abs(L)<=r,z=Math.abs(o-O)<=i;a.done=N&&z}return a.value=a.done?o:O,a},toString:()=>{const M=Math.min(IT(P),Bv),O=nU(L=>P.next(M*L).value,M,30);return M+"ms "+O},toTransition:()=>{}};return P}jv.applyToOptions=t=>{const e=ame(t,100,jv);return t.ease=e.ease,t.duration=lo(e.duration),t.type="keyframes",t};function RA({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:h=.5,restSpeed:f}){const d=t[0],m={done:!1,value:d},y=N=>a!==void 0&&N<a||c!==void 0&&N>c,v=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let w=n*e;const _=d+w,S=o===void 0?_:o(_);S!==_&&(w=S-d);const A=N=>-w*Math.exp(-N/r),k=N=>S+A(N),P=N=>{const z=A(N),j=k(N);m.done=Math.abs(z)<=h,m.value=m.done?S:j};let M,O;const L=N=>{y(m.value)&&(M=N,O=jv({keyframes:[m.value,v(m.value)],velocity:rU(k,N,m.value),damping:i,stiffness:s,restDelta:h,restSpeed:f}))};return L(0),{calculatedDuration:null,next:N=>{let z=!1;return!O&&M===void 0&&(z=!0,P(N),L(N)),M!==void 0&&N>=M?O.next(N-M):(!z&&P(N),m)}}}function mme(t,e,n){const r=[],i=n||ea.mix||tU,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Zi:e;a=Wm(c,a)}r.push(a)}return r}function gme(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(AT(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=mme(e,r,i),c=a.length,h=f=>{if(o&&f<t[0])return e[0];let d=0;if(c>1)for(;d<t.length-2&&!(f<t[d+1]);d++);const m=pm(t[d],t[d+1],f);return a[d](m)};return n?f=>h(Zo(t[0],t[s-1],f)):h}function yme(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=pm(0,e,r);t.push(Gt(n,1,i))}}function bme(t){const e=[0];return yme(e,t.length-1),e}function vme(t,e){return t.map(n=>n*e)}function xme(t,e){return t.map(()=>e||qz).splice(0,t.length-1)}function Op({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Ope(r)?r.map(R3):R3(r),s={done:!1,value:e[0]},o=vme(n&&n.length===e.length?n:bme(e),t),a=gme(o,e,{ease:Array.isArray(i)?i:xme(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}const wme=t=>t!==null;function NT(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(wme),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Sme={decay:RA,inertia:RA,tween:Op,keyframes:Op,spring:jv};function iU(t){typeof t.type=="string"&&(t.type=Sme[t.type])}class BT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const _me=t=>t/100;class jT extends BT{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Xr.now()&&this.tick(Xr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;iU(e);const{type:n=Op,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const c=n||Op;c!==Op&&typeof a[0]!="number"&&(this.mixKeyframes=Wm(_me,tU(a[0],a[1])),a=[0,100]);const h=c({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=IT(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:f,repeat:d,repeatType:m,repeatDelay:y,type:v,onUpdate:w,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const S=this.currentTime-h*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,P=r;if(d){const N=Math.min(this.currentTime,i)/a;let z=Math.floor(N),j=N%1;!j&&N>=1&&(j=1),j===1&&z--,z=Math.min(z,d+1),!!(z%2)&&(m==="reverse"?(j=1-j,y&&(j-=y/a)):m==="mirror"&&(P=o)),k=Zo(0,1,j)*a}const M=A?{done:!1,value:f[0]}:P.next(k);s&&(M.value=s(M.value));let{done:O}=M;!A&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return L&&v!==RA&&(M.value=NT(f,this.options,_,this.speed)),w&&w(M.value),L&&this.finish(),M}then(e,n){return this.finished.then(e,n)}get duration(){return co(this.calculatedDuration)}get time(){return co(this.currentTime)}set time(e){e=lo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Xr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=co(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=ome,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Cme(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const fc=t=>t*180/Math.PI,MA=t=>{const e=fc(Math.atan2(t[1],t[0]));return OA(e)},Ame={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:MA,rotateZ:MA,skewX:t=>fc(Math.atan(t[1])),skewY:t=>fc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},OA=t=>(t=t%360,t<0&&(t+=360),t),I3=MA,N3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),B3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kme={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:N3,scaleY:B3,scale:t=>(N3(t)+B3(t))/2,rotateX:t=>OA(fc(Math.atan2(t[6],t[5]))),rotateY:t=>OA(fc(Math.atan2(-t[2],t[0]))),rotateZ:I3,rotate:I3,skewX:t=>fc(Math.atan(t[4])),skewY:t=>fc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function PA(t){return t.includes("scale")?1:0}function DA(t,e){if(!t||t==="none")return PA(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=kme,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Ame,i=a}if(!i)return PA(e);const s=r[e],o=i[1].split(",").map(Tme);return typeof s=="function"?s(o):o[s]}const Eme=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return DA(n,e)};function Tme(t){return parseFloat(t.trim())}const ef=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tf=new Set(ef),j3=t=>t===Zh||t===qe,Rme=new Set(["x","y","z"]),Mme=ef.filter(t=>!Rme.has(t));function Ome(t){const e=[];return Mme.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>DA(e,"x"),y:(t,{transform:e})=>DA(e,"y")};yc.translateX=yc.x;yc.translateY=yc.y;const bc=new Set;let LA=!1,IA=!1,NA=!1;function sU(){if(IA){const t=Array.from(bc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Ome(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}IA=!1,LA=!1,bc.forEach(t=>t.complete(NA)),bc.clear()}function oU(){bc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(IA=!0)})}function Pme(){NA=!0,oU(),sU(),NA=!1}class $T{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(bc.add(this),LA||(LA=!0,Ut.read(oU),Ut.resolveKeyframes(sU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Cme(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bc.delete(this)}cancel(){this.state==="scheduled"&&(bc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Dme=t=>t.startsWith("--");function Lme(t,e,n){Dme(e)?t.style.setProperty(e,n):t.style[e]=n}const Ime=kT(()=>window.ScrollTimeline!==void 0),Nme={};function Bme(t,e){const n=kT(t);return()=>Nme[e]??n()}const aU=Bme(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,$3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fp([0,.65,.55,1]),circOut:fp([.55,0,1,.45]),backIn:fp([.31,.01,.66,-.59]),backOut:fp([.33,1.53,.69,.99])};function lU(t,e){if(t)return typeof t=="function"?aU()?nU(t,e):"ease-out":Wz(t)?fp(t):Array.isArray(t)?t.map(n=>lU(n,e)||$3.easeOut):$3[t]}function jme(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:c}={},h=void 0){const f={[e]:n};c&&(f.offset=c);const d=lU(a,i);Array.isArray(d)&&(f.easing=d);const m={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),t.animate(f,m)}function cU(t){return typeof t=="function"&&"applyToOptions"in t}function $me({type:t,...e}){return cU(t)&&aU()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Vme extends BT{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,AT(typeof e.type!="string");const h=$me(e);this.animation=jme(n,r,i,h,s),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=NT(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(f):Lme(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return co(Number(e))}get time(){return co(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=lo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Ime()?(this.animation.timeline=e,Zi):n(this)}}const uU={anticipate:zz,backInOut:Fz,circInOut:Hz};function Fme(t){return t in uU}function zme(t){typeof t.ease=="string"&&Fme(t.ease)&&(t.ease=uU[t.ease])}const V3=10;class Ume extends Vme{constructor(e){zme(e),iU(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new jT({...o,autoplay:!1}),c=lo(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-V3).value,a.sample(c).value,V3),a.stop()}}const F3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xl.test(t)||t==="0")&&!t.startsWith("url("));function Hme(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function qme(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=F3(i,e),a=F3(s,e);return!o||!a?!1:Hme(t)||(n==="spring"||cU(n))&&r}function BA(t){t.duration=0,t.type}const Wme=new Set(["opacity","clipPath","filter","transform"]),Gme=kT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kme(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=e.owner.getProps();return Gme()&&n&&Wme.has(n)&&(n!=="transform"||!h)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Yme=40;class Xme extends BT{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:c,motionValue:h,element:f,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Xr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:h,element:f,...d},y=f?.KeyframeResolver||$T;this.keyframeResolver=new y(a,(v,w,_)=>this.onKeyframesResolved(v,w,m,!_),c,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:c,isHandoff:h,onUpdate:f}=r;this.resolvedAt=Xr.now(),qme(e,s,o,a)||((ea.instantAnimations||!c)&&f?.(NT(e,r,n)),e[0]=e[e.length-1],BA(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Yme?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!h&&Kme(m)?new Ume({...m,element:m.motionValue.owner.current}):new jT(m);y.finished.then(()=>this.notifyFinished()).catch(Zi),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Pme()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Jme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Qme(t){const e=Jme.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function hU(t,e,n=1){const[r,i]=Qme(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Dz(o)?parseFloat(o):o}return OT(i)?hU(i,e,n+1):i}function VT(t,e){return t?.[e]??t?.default??t}const fU=new Set(["width","height","top","left","right","bottom",...ef]),Zme={test:t=>t==="auto",parse:t=>t},dU=t=>e=>e.test(t),pU=[Zh,qe,uo,Ya,Hpe,Upe,Zme],z3=t=>pU.find(dU(t));function ege(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Iz(t):!0}const tge=new Set(["brightness","contrast","saturate","opacity"]);function nge(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(PT)||[];if(!r)return t;const i=n.replace(r,"");let s=tge.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const rge=/\b([a-z-]*)\(.*?\)/gu,jA={...xl,getAnimatableNone:t=>{const e=t.match(rge);return e?e.map(nge).join(" "):t}},U3={...Zh,transform:Math.round},ige={rotate:Ya,rotateX:Ya,rotateY:Ya,rotateZ:Ya,scale:Ny,scaleX:Ny,scaleY:Ny,scaleZ:Ny,skew:Ya,skewX:Ya,skewY:Ya,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:mm,originX:M3,originY:M3,originZ:qe},FT={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe,...ige,zIndex:U3,fillOpacity:mm,strokeOpacity:mm,numOctaves:U3},sge={...FT,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:jA,WebkitFilter:jA},mU=t=>sge[t];function gU(t,e){let n=mU(t);return n!==jA&&(n=xl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const oge=new Set(["auto","none","0"]);function age(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!oge.has(s)&&gm(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=gU(n,i)}class lge extends $T{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),OT(h))){const f=hU(h,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!fU.has(r)||e.length!==2)return;const[i,s]=e,o=z3(i),a=z3(s);if(o!==a)if(j3(o)&&j3(a))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else yc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||ege(e[i]))&&r.push(i);r.length&&age(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=yc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,c])=>{e.getValue(a).set(c)}),this.resolveNoneKeyframes()}}function cge(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const yU=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function uge(t){return Lz(t)&&"offsetHeight"in t}const H3=30,hge=t=>!isNaN(parseFloat(t));class fge{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Xr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Xr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hge(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ET);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ut.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>H3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,H3);return Nz(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bh(t,e){return new fge(t,e)}const{schedule:zT}=Gz(queueMicrotask,!1),fs={x:!1,y:!1};function bU(){return fs.x||fs.y}function dge(t){return t==="x"||t==="y"?fs[t]?null:(fs[t]=!0,()=>{fs[t]=!1}):fs.x||fs.y?null:(fs.x=fs.y=!0,()=>{fs.x=fs.y=!1})}function vU(t,e){const n=cge(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function q3(t){return!(t.pointerType==="touch"||bU())}function pge(t,e,n={}){const[r,i,s]=vU(t,n),o=a=>{if(!q3(a))return;const{target:c}=a,h=e(c,a);if(typeof h!="function"||!c)return;const f=d=>{q3(d)&&(h(d),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const xU=(t,e)=>e?t===e?!0:xU(t,e.parentElement):!1,UT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,mge=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gge(t){return mge.has(t.tagName)||t.tabIndex!==-1}const Mb=new WeakSet;function W3(t){return e=>{e.key==="Enter"&&t(e)}}function Y2(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yge=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=W3(()=>{if(Mb.has(n))return;Y2(n,"down");const i=W3(()=>{Y2(n,"up")}),s=()=>Y2(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function G3(t){return UT(t)&&!bU()}function bge(t,e,n={}){const[r,i,s]=vU(t,n),o=a=>{const c=a.currentTarget;if(!G3(a))return;Mb.add(c);const h=e(c,a),f=(y,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",m),Mb.has(c)&&Mb.delete(c),G3(y)&&typeof h=="function"&&h(y,{success:v})},d=y=>{f(y,c===window||c===document||n.useGlobalTarget||xU(c,y.target))},m=y=>{f(y,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),uge(a)&&(a.addEventListener("focus",h=>yge(h,i)),!gge(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function wU(t){return Lz(t)&&"ownerSVGElement"in t}function vge(t){return wU(t)&&t.tagName==="svg"}const mr=t=>!!(t&&t.getVelocity),xge=[...pU,un,xl],wge=t=>xge.find(dU(t)),SU=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Sge(t=!0){const e=E.useContext(ST);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=E.useId();E.useEffect(()=>{if(t)return i(s)},[t]);const o=E.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const _U=E.createContext({strict:!1}),K3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jh={};for(const t in K3)jh[t]={isEnabled:e=>K3[t].some(n=>!!e[n])};function _ge(t){for(const e in t)jh[e]={...jh[e],...t[e]}}const Cge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $v(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Cge.has(t)}let CU=t=>!$v(t);function Age(t){typeof t=="function"&&(CU=e=>e.startsWith("on")?!$v(e):t(e))}try{Age(require("@emotion/is-prop-valid").default)}catch{}function kge(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(CU(i)||n===!0&&$v(i)||!e&&!$v(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const nw=E.createContext({});function rw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ym(t){return typeof t=="string"||Array.isArray(t)}const HT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qT=["initial",...HT];function iw(t){return rw(t.animate)||qT.some(e=>ym(t[e]))}function AU(t){return!!(iw(t)||t.variants)}function Ege(t,e){if(iw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ym(n)?n:void 0,animate:ym(r)?r:void 0}}return t.inherit!==!1?e:{}}function Tge(t){const{initial:e,animate:n}=Ege(t,E.useContext(nw));return E.useMemo(()=>({initial:e,animate:n}),[Y3(e),Y3(n)])}function Y3(t){return Array.isArray(t)?t.join(" "):t}const bm={};function Rge(t){for(const e in t)bm[e]=t[e],MT(e)&&(bm[e].isCSSVariable=!0)}function kU(t,{layout:e,layoutId:n}){return tf.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bm[t]||t==="opacity")}const Mge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Oge=ef.length;function Pge(t,e,n){let r="",i=!0;for(let s=0;s<Oge;s++){const o=ef[s],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const h=yU(a,FT[o]);if(!c){i=!1;const f=Mge[o]||o;r+=`${f}(${h}) `}n&&(e[o]=h)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function WT(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const c in e){const h=e[c];if(tf.has(c)){o=!0;continue}else if(MT(c)){i[c]=h;continue}else{const f=yU(h,FT[c]);c.startsWith("origin")?(a=!0,s[c]=f):r[c]=f}}if(e.transform||(o||n?r.transform=Pge(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:h="50%",originZ:f=0}=s;r.transformOrigin=`${c} ${h} ${f}`}}const GT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EU(t,e,n){for(const r in e)!mr(e[r])&&!kU(r,n)&&(t[r]=e[r])}function Dge({transformTemplate:t},e){return E.useMemo(()=>{const n=GT();return WT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Lge(t,e){const n=t.style||{},r={};return EU(r,n,t),Object.assign(r,Dge(t,e)),r}function Ige(t,e){const n={},r=Lge(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Nge={offset:"stroke-dashoffset",array:"stroke-dasharray"},Bge={offset:"strokeDashoffset",array:"strokeDasharray"};function jge(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Nge:Bge;t[s.offset]=qe.transform(-r);const o=qe.transform(e),a=qe.transform(n);t[s.array]=`${o} ${a}`}function TU(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},c,h,f){if(WT(t,a,h),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:m}=t;d.transform&&(m.transform=d.transform,delete d.transform),(m.transform||d.transformOrigin)&&(m.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&jge(d,i,s,o,!1)}const RU=()=>({...GT(),attrs:{}}),MU=t=>typeof t=="string"&&t.toLowerCase()==="svg";function $ge(t,e,n,r){const i=E.useMemo(()=>{const s=RU();return TU(s,e,MU(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};EU(s,t.style,t),i.style={...s,...i.style}}return i}const Vge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function KT(t){return typeof t!="string"||t.includes("-")?!1:!!(Vge.indexOf(t)>-1||/[A-Z]/u.test(t))}function Fge(t,e,n,{latestValues:r},i,s=!1){const a=(KT(t)?$ge:Ige)(e,r,i,t),c=kge(e,typeof t=="string",s),h=t!==E.Fragment?{...c,...a,ref:n}:{},{children:f}=e,d=E.useMemo(()=>mr(f)?f.get():f,[f]);return E.createElement(t,{...h,children:d})}function X3(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function YT(t,e,n,r){if(typeof e=="function"){const[i,s]=X3(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=X3(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Ob(t){return mr(t)?t.get():t}function zge({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Uge(n,r,i,t),renderState:e()}}function Uge(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Ob(s[m]);let{initial:o,animate:a}=t;const c=iw(t),h=AU(t);e&&h&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const d=f?a:o;if(d&&typeof d!="boolean"&&!rw(d)){const m=Array.isArray(d)?d:[d];for(let y=0;y<m.length;y++){const v=YT(t,m[y]);if(v){const{transitionEnd:w,transition:_,...S}=v;for(const A in S){let k=S[A];if(Array.isArray(k)){const P=f?k.length-1:0;k=k[P]}k!==null&&(i[A]=k)}for(const A in w)i[A]=w[A]}}}return i}const OU=t=>(e,n)=>{const r=E.useContext(nw),i=E.useContext(ST),s=()=>zge(t,e,r,i);return n?s():_pe(s)};function XT(t,e,n){const{style:r}=t,i={};for(const s in r)(mr(r[s])||e.style&&mr(e.style[s])||kU(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const Hge=OU({scrapeMotionValuesFromProps:XT,createRenderState:GT});function PU(t,e,n){const r=XT(t,e,n);for(const i in t)if(mr(t[i])||mr(e[i])){const s=ef.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const qge=OU({scrapeMotionValuesFromProps:PU,createRenderState:RU}),Wge=Symbol.for("motionComponentSymbol");function oh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Gge(t,e,n){return E.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):oh(n)&&(n.current=r))},[e,n])}const JT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kge="framerAppearId",DU="data-"+JT(Kge),LU=E.createContext({});function Yge(t,e,n,r,i){const{visualElement:s}=E.useContext(nw),o=E.useContext(_U),a=E.useContext(ST),c=E.useContext(SU).reducedMotion,h=E.useRef(null);r=r||o.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const f=h.current,d=E.useContext(LU);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Xge(h.current,n,i,d);const m=E.useRef(!1);E.useInsertionEffect(()=>{f&&m.current&&f.update(n,a)});const y=n[DU],v=E.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return Cpe(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),v.current&&f.animationState&&f.animationState.animateChanges())}),E.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),v.current=!1),f.enteringChildren=void 0)}),f}function Xge(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:h,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:IU(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&oh(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:h})}function IU(t){if(t)return t.options.allowProjection!==!1?t.projection:IU(t.parent)}function X2(t,{forwardMotionProps:e=!1}={},n,r){n&&_ge(n);const i=KT(t)?qge:Hge;function s(a,c){let h;const f={...E.useContext(SU),...a,layoutId:Jge(a)},{isStatic:d}=f,m=Tge(a),y=i(a,d);if(!d&&wT){Qge();const v=Zge(f);h=v.MeasureLayout,m.visualElement=Yge(t,y,f,r,v.ProjectionNode)}return C.jsxs(nw.Provider,{value:m,children:[h&&m.visualElement?C.jsx(h,{visualElement:m.visualElement,...f}):null,Fge(t,a,Gge(y,m.visualElement,c),y,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=E.forwardRef(s);return o[Wge]=t,o}function Jge({layoutId:t}){const e=E.useContext(Pz).id;return e&&t!==void 0?e+"-"+t:t}function Qge(t,e){E.useContext(_U).strict}function Zge(t){const{drag:e,layout:n}=jh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function e0e(t,e){if(typeof Proxy>"u")return X2;const n=new Map,r=(s,o)=>X2(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,X2(o,void 0,t,e)),n.get(o))})}function NU({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function t0e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function n0e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function J2(t){return t===void 0||t===1}function $A({scale:t,scaleX:e,scaleY:n}){return!J2(t)||!J2(e)||!J2(n)}function ec(t){return $A(t)||BU(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BU(t){return J3(t.x)||J3(t.y)}function J3(t){return t&&t!=="0%"}function Vv(t,e,n){const r=t-n,i=e*r;return n+i}function Q3(t,e,n,r,i){return i!==void 0&&(t=Vv(t,i,r)),Vv(t,n,r)+e}function VA(t,e=0,n=1,r,i){t.min=Q3(t.min,e,n,r,i),t.max=Q3(t.max,e,n,r,i)}function jU(t,{x:e,y:n}){VA(t.x,e.translate,e.scale,e.originPoint),VA(t.y,n.translate,n.scale,n.originPoint)}const Z3=.999999999999,e4=1.0000000000001;function r0e(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&lh(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,jU(t,o)),r&&ec(s.latestValues)&&lh(t,s.latestValues))}e.x<e4&&e.x>Z3&&(e.x=1),e.y<e4&&e.y>Z3&&(e.y=1)}function ah(t,e){t.min=t.min+e,t.max=t.max+e}function t4(t,e,n,r,i=.5){const s=Gt(t.min,t.max,i);VA(t,e,n,s,r)}function lh(t,e){t4(t.x,e.x,e.scaleX,e.scale,e.originX),t4(t.y,e.y,e.scaleY,e.scale,e.originY)}function $U(t,e){return NU(n0e(t.getBoundingClientRect(),e))}function i0e(t,e,n){const r=$U(t,n),{scroll:i}=e;return i&&(ah(r.x,i.offset.x),ah(r.y,i.offset.y)),r}const n4=()=>({translate:0,scale:1,origin:0,originPoint:0}),ch=()=>({x:n4(),y:n4()}),r4=()=>({min:0,max:0}),tn=()=>({x:r4(),y:r4()}),FA={current:null},VU={current:!1};function s0e(){if(VU.current=!0,!!wT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>FA.current=t.matches;t.addEventListener("change",e),e()}else FA.current=!1}const o0e=new WeakMap;function a0e(t,e,n){for(const r in e){const i=e[r],s=n[r];if(mr(i))t.addValue(r,i);else if(mr(s))t.addValue(r,Bh(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Bh(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const i4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class l0e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$T,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Xr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ut.render(this.render,!1,!0))};const{latestValues:c,renderState:h}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=iw(n),this.isVariantNode=AU(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in d){const y=d[m];c[m]!==void 0&&mr(y)&&y.set(c[m])}}mount(e){this.current=e,o0e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),VU.current||s0e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:FA.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vl(this.notifyUpdate),vl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=tf.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ut.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jh){const n=jh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<i4.length;r++){const i=i4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=a0e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Dz(r)||Iz(r))?r=parseFloat(r):!wge(r)&&xl.test(n)&&(r=gU(e,n)),this.setBaseTarget(e,mr(r)?r.get():r)),mr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=YT(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!mr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ET),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){zT.render(this.render)}}class FU extends l0e{constructor(){super(...arguments),this.KeyframeResolver=lge}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function zU(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function c0e(t){return window.getComputedStyle(t)}class u0e extends FU{constructor(){super(...arguments),this.type="html",this.renderInstance=zU}readValueFromInstance(e,n){if(tf.has(n))return this.projection?.isProjecting?PA(n):Eme(e,n);{const r=c0e(e),i=(MT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return $U(e,n)}build(e,n,r){WT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return XT(e,n,r)}}const UU=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function h0e(t,e,n,r){zU(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(UU.has(i)?i:JT(i),e.attrs[i])}class f0e extends FU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(tf.has(n)){const r=mU(n);return r&&r.default||0}return n=UU.has(n)?n:JT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return PU(e,n,r)}build(e,n,r){TU(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){h0e(e,n,r,i)}mount(e){this.isSVGTag=MU(e.tagName),super.mount(e)}}const d0e=(t,e)=>KT(t)?new f0e(e):new u0e(e,{allowProjection:t!==E.Fragment});function _h(t,e,n){const r=t.getProps();return YT(r,e,n!==void 0?n:r.custom,t)}const zA=t=>Array.isArray(t);function p0e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bh(n))}function m0e(t){return zA(t)?t[t.length-1]||0:t}function g0e(t,e){const n=_h(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=m0e(s[o]);p0e(t,o,a)}}function y0e(t){return!!(mr(t)&&t.add)}function UA(t,e){const n=t.getValue("willChange");if(y0e(n))return n.add(e);if(!n&&ea.WillChange){const r=new ea.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function HU(t){return t.props[DU]}const b0e=t=>t!==null;function v0e(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(b0e),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const x0e={type:"spring",stiffness:500,damping:25,restSpeed:10},w0e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),S0e={type:"keyframes",duration:.8},_0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},C0e=(t,{keyframes:e})=>e.length>2?S0e:tf.has(t)?t.startsWith("scale")?w0e(e[1]):x0e:_0e;function A0e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:h,...f}){return!!Object.keys(f).length}const QT=(t,e,n,r={},i,s)=>o=>{const a=VT(r,t)||{},c=a.delay||r.delay||0;let{elapsed:h=0}=r;h=h-lo(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-h,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};A0e(a)||Object.assign(f,C0e(t,f)),f.duration&&(f.duration=lo(f.duration)),f.repeatDelay&&(f.repeatDelay=lo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(BA(f),f.delay===0&&(d=!0)),(ea.instantAnimations||ea.skipAnimations)&&(d=!0,BA(f),f.delay=0),f.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const m=v0e(f.keyframes,a);if(m!==void 0){Ut.update(()=>{f.onUpdate(m),f.onComplete()});return}}return a.isSync?new jT(f):new Xme(f)};function k0e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function qU(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const d=t.getValue(f,t.latestValues[f]??null),m=a[f];if(m===void 0||h&&k0e(h,f))continue;const y={delay:n,...VT(s||{},f)},v=d.get();if(v!==void 0&&!d.isAnimating&&!Array.isArray(m)&&m===v&&!y.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const S=HU(t);if(S){const A=window.MotionHandoffAnimation(S,f,Ut);A!==null&&(y.startTime=A,w=!0)}}UA(t,f),d.start(QT(f,d,m,t.shouldReduceMotion&&fU.has(f)?{type:!1}:y,t,w));const _=d.animation;_&&c.push(_)}return o&&Promise.all(c).then(()=>{Ut.update(()=>{o&&g0e(t,o)})}),c}function WU(t,e,n,r=0,i=1){const s=Array.from(t).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function HA(t,e,n={}){const r=_h(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(qU(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:d}=i;return E0e(t,e,c,h,f,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function E0e(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(HA(c,e,{...o,delay:n+(typeof r=="function"?0:r)+WU(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function T0e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>HA(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=HA(t,e,n);else{const i=typeof e=="function"?_h(t,e,n.custom):e;r=Promise.all(qU(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function GU(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const R0e=qT.length;function KU(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?KU(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<R0e;n++){const r=qT[n],i=t.props[r];(ym(i)||i===!1)&&(e[r]=i)}return e}const M0e=[...HT].reverse(),O0e=HT.length;function P0e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>T0e(t,n,r)))}function D0e(t){let e=P0e(t),n=s4(),r=!0;const i=c=>(h,f)=>{const d=_h(t,f,c==="exit"?t.presenceContext?.custom:void 0);if(d){const{transition:m,transitionEnd:y,...v}=d;h={...h,...v,...y}}return h};function s(c){e=c(t)}function o(c){const{props:h}=t,f=KU(t.parent)||{},d=[],m=new Set;let y={},v=1/0;for(let _=0;_<O0e;_++){const S=M0e[_],A=n[S],k=h[S]!==void 0?h[S]:f[S],P=ym(k),M=S===c?A.isActive:null;M===!1&&(v=_);let O=k===f[S]&&k!==h[S]&&P;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),A.protectedKeys={...y},!A.isActive&&M===null||!k&&!A.prevProp||rw(k)||typeof k=="boolean")continue;const L=L0e(A.prevProp,k);let N=L||S===c&&A.isActive&&!O&&P||_>v&&P,z=!1;const j=Array.isArray(k)?k:[k];let H=j.reduce(i(S),{});M===!1&&(H={});const{prevResolvedValues:W={}}=A,X={...W,...H},G=Y=>{N=!0,m.has(Y)&&(z=!0,m.delete(Y)),A.needsAnimating[Y]=!0;const q=t.getValue(Y);q&&(q.liveStyle=!1)};for(const Y in X){const q=H[Y],se=W[Y];if(y.hasOwnProperty(Y))continue;let T=!1;zA(q)&&zA(se)?T=!GU(q,se):T=q!==se,T?q!=null?G(Y):m.add(Y):q!==void 0&&m.has(Y)?G(Y):A.protectedKeys[Y]=!0}A.prevProp=k,A.prevResolvedValues=H,A.isActive&&(y={...y,...H}),r&&t.blockInitialAnimation&&(N=!1);const ie=O&&L;N&&(!ie||z)&&d.push(...j.map(Y=>{const q={type:S};if(typeof Y=="string"&&r&&!ie&&t.manuallyAnimateOnMount&&t.parent){const{parent:se}=t,T=_h(se,Y);if(se.enteringChildren&&T){const{delayChildren:Z}=T.transition||{};q.delay=WU(se.enteringChildren,t,Z)}}return{animation:Y,options:q}}))}if(m.size){const _={};if(typeof h.initial!="boolean"){const S=_h(t,Array.isArray(h.initial)?h.initial[0]:h.initial);S&&S.transition&&(_.transition=S.transition)}m.forEach(S=>{const A=t.getBaseTarget(S),k=t.getValue(S);k&&(k.liveStyle=!0),_[S]=A??null}),d.push({animation:_})}let w=!!d.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(d):Promise.resolve()}function a(c,h){if(n[c].isActive===h)return Promise.resolve();t.variantChildren?.forEach(d=>d.animationState?.setActive(c,h)),n[c].isActive=h;const f=o(c);for(const d in n)n[d].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=s4(),r=!0}}}function L0e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!GU(e,t):!1}function Yl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function s4(){return{animate:Yl(!0),whileInView:Yl(),whileHover:Yl(),whileTap:Yl(),whileDrag:Yl(),whileFocus:Yl(),exit:Yl()}}class _l{constructor(e){this.isMounted=!1,this.node=e}update(){}}class I0e extends _l{constructor(e){super(e),e.animationState||(e.animationState=D0e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let N0e=0;class B0e extends _l{constructor(){super(...arguments),this.id=N0e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const j0e={animation:{Feature:I0e},exit:{Feature:B0e}};function vm(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ym(t){return{point:{x:t.pageX,y:t.pageY}}}const $0e=t=>e=>UT(e)&&t(e,Ym(e));function Pp(t,e,n,r){return vm(t,e,$0e(n),r)}const YU=1e-4,V0e=1-YU,F0e=1+YU,XU=.01,z0e=0-XU,U0e=0+XU;function Pr(t){return t.max-t.min}function H0e(t,e,n){return Math.abs(t-e)<=n}function o4(t,e,n,r=.5){t.origin=r,t.originPoint=Gt(e.min,e.max,t.origin),t.scale=Pr(n)/Pr(e),t.translate=Gt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=V0e&&t.scale<=F0e||isNaN(t.scale))&&(t.scale=1),(t.translate>=z0e&&t.translate<=U0e||isNaN(t.translate))&&(t.translate=0)}function Dp(t,e,n,r){o4(t.x,e.x,n.x,r?r.originX:void 0),o4(t.y,e.y,n.y,r?r.originY:void 0)}function a4(t,e,n){t.min=n.min+e.min,t.max=t.min+Pr(e)}function q0e(t,e,n){a4(t.x,e.x,n.x),a4(t.y,e.y,n.y)}function l4(t,e,n){t.min=e.min-n.min,t.max=t.min+Pr(e)}function Lp(t,e,n){l4(t.x,e.x,n.x),l4(t.y,e.y,n.y)}function Ui(t){return[t("x"),t("y")]}const JU=({current:t})=>t?t.ownerDocument.defaultView:null,c4=(t,e)=>Math.abs(t-e);function W0e(t,e){const n=c4(t.x,e.x),r=c4(t.y,e.y);return Math.sqrt(n**2+r**2)}class QU{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Z2(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=W0e(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!v)return;const{point:w}=m,{timestamp:_}=Un;this.history.push({...w,timestamp:_});const{onStart:S,onMove:A}=this.handlers;y||(S&&S(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Q2(y,this.transformPagePoint),Ut.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Z2(m.type==="pointercancel"?this.lastMoveEventInfo:Q2(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,S),w&&w(m,S)},!UT(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Ym(e),c=Q2(a,this.transformPagePoint),{point:h}=c,{timestamp:f}=Un;this.history=[{...h,timestamp:f}];const{onSessionStart:d}=n;d&&d(e,Z2(c,this.history)),this.removeListeners=Wm(Pp(this.contextWindow,"pointermove",this.handlePointerMove),Pp(this.contextWindow,"pointerup",this.handlePointerUp),Pp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vl(this.updatePoint)}}function Q2(t,e){return e?{point:e(t.point)}:t}function u4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Z2({point:t},e){return{point:t,delta:u4(t,ZU(e)),offset:u4(t,G0e(e)),velocity:K0e(e,.1)}}function G0e(t){return t[0]}function ZU(t){return t[t.length-1]}function K0e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ZU(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>lo(e)));)n--;if(!r)return{x:0,y:0};const s=co(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Y0e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Gt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Gt(n,t,r.max):Math.min(t,n)),t}function h4(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function X0e(t,{top:e,left:n,bottom:r,right:i}){return{x:h4(t.x,n,i),y:h4(t.y,e,r)}}function f4(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function J0e(t,e){return{x:f4(t.x,e.x),y:f4(t.y,e.y)}}function Q0e(t,e){let n=.5;const r=Pr(t),i=Pr(e);return i>r?n=pm(e.min,e.max-r,t.min):r>i&&(n=pm(t.min,t.max-i,e.min)),Zo(0,1,n)}function Z0e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qA=.35;function eye(t=qA){return t===!1?t=0:t===!0&&(t=qA),{x:d4(t,"left","right"),y:d4(t,"top","bottom")}}function d4(t,e,n){return{min:p4(t,e),max:p4(t,n)}}function p4(t,e){return typeof t=="number"?t:t[e]||0}const tye=new WeakMap;class nye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ym(d).point)},o=(d,m)=>{const{drag:y,dragPropagation:v,onDragStart:w}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dge(y),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ui(S=>{let A=this.getAxisMotionValue(S).get()||0;if(uo.test(A)){const{projection:k}=this.visualElement;if(k&&k.layout){const P=k.layout.layoutBox[S];P&&(A=Pr(P)*(parseFloat(A)/100))}}this.originPoint[S]=A}),w&&Ut.postRender(()=>w(d,m)),UA(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},a=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:w,onDrag:_}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:S}=m;if(v&&this.currentDirection===null){this.currentDirection=rye(S),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),_&&_(d,m)},c=(d,m)=>{this.latestPointerEvent=d,this.latestPanInfo=m,this.stop(d,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ui(d=>this.getAnimationState(d)==="paused"&&this.getAxisMotionValue(d).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new QU(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:JU(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ut.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!By(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Y0e(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&oh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=X0e(r.layoutBox,e):this.constraints=!1,this.elastic=eye(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ui(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Z0e(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!oh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=i0e(r,i.root,this.visualElement.getTransformPagePoint());let o=J0e(i.layout.layoutBox,s);if(n){const a=n(t0e(o));this.hasMutatedConstraints=!!a,a&&(o=NU(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},h=Ui(f=>{if(!By(f,n,this.currentDirection))return;let d=c&&c[f]||{};o&&(d={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,v={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,v)});return Promise.all(h).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return UA(this.visualElement,e),r.start(QT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ui(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ui(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ui(n=>{const{drag:r}=this.getProps();if(!By(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Gt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!oh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ui(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();i[o]=Q0e({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ui(o=>{if(!By(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:h}=this.constraints[o];a.set(Gt(c,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;tye.set(this.visualElement,this);const e=this.visualElement.current,n=Pp(e,"pointerdown",c=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();oh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ut.read(r);const o=vm(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ui(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=qA,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function By(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function rye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iye extends _l{constructor(e){super(e),this.removeGroupControls=Zi,this.removeListeners=Zi,this.controls=new nye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zi}unmount(){this.removeGroupControls(),this.removeListeners()}}const m4=t=>(e,n)=>{t&&Ut.postRender(()=>t(e,n))};class sye extends _l{constructor(){super(...arguments),this.removePointerDownListener=Zi}onPointerDown(e){this.session=new QU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JU(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:m4(e),onStart:m4(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ut.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Pp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Pb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function g4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ld={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(qe.test(t))t=parseFloat(t);else return t;const n=g4(t,e.target.x),r=g4(t,e.target.y);return`${n}% ${r}%`}},oye={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=xl.parse(t);if(i.length>5)return r;const s=xl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const h=Gt(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),s(i)}};let e_=!1;class aye extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Rge(lye),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),e_&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Pb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,e_=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ut.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;e_=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function eH(t){const[e,n]=Sge(),r=E.useContext(Pz);return C.jsx(aye,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(LU),isPresent:e,safeToRemove:n})}const lye={borderRadius:{...Ld,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ld,borderTopRightRadius:Ld,borderBottomLeftRadius:Ld,borderBottomRightRadius:Ld,boxShadow:oye};function cye(t,e,n){const r=mr(t)?t:Bh(t);return r.start(QT("",r,e,n)),r.animation}const uye=(t,e)=>t.depth-e.depth;class hye{constructor(){this.children=[],this.isDirty=!1}add(e){_T(this.children,e),this.isDirty=!0}remove(e){CT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uye),this.isDirty=!1,this.children.forEach(e)}}function fye(t,e){const n=Xr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(vl(r),t(s-e))};return Ut.setup(r,!0),()=>vl(r)}const tH=["TopLeft","TopRight","BottomLeft","BottomRight"],dye=tH.length,y4=t=>typeof t=="string"?parseFloat(t):t,b4=t=>typeof t=="number"||qe.test(t);function pye(t,e,n,r,i,s){i?(t.opacity=Gt(0,n.opacity??1,mye(r)),t.opacityExit=Gt(e.opacity??1,0,gye(r))):s&&(t.opacity=Gt(e.opacity??1,n.opacity??1,r));for(let o=0;o<dye;o++){const a=`border${tH[o]}Radius`;let c=v4(e,a),h=v4(n,a);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||b4(c)===b4(h)?(t[a]=Math.max(Gt(y4(c),y4(h),r),0),(uo.test(h)||uo.test(c))&&(t[a]+="%")):t[a]=h}(e.rotate||n.rotate)&&(t.rotate=Gt(e.rotate||0,n.rotate||0,r))}function v4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mye=nH(0,.5,Uz),gye=nH(.5,.95,Zi);function nH(t,e,n){return r=>r<t?0:r>e?1:n(pm(t,e,r))}function x4(t,e){t.min=e.min,t.max=e.max}function Fi(t,e){x4(t.x,e.x),x4(t.y,e.y)}function w4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function S4(t,e,n,r,i){return t-=e,t=Vv(t,1/n,r),i!==void 0&&(t=Vv(t,1/i,r)),t}function yye(t,e=0,n=1,r=.5,i,s=t,o=t){if(uo.test(e)&&(e=parseFloat(e),e=Gt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Gt(s.min,s.max,r);t===s&&(a-=e),t.min=S4(t.min,e,n,a,i),t.max=S4(t.max,e,n,a,i)}function _4(t,e,[n,r,i],s,o){yye(t,e[n],e[r],e[i],e.scale,s,o)}const bye=["x","scaleX","originX"],vye=["y","scaleY","originY"];function C4(t,e,n,r){_4(t.x,e,bye,n?n.x:void 0,r?r.x:void 0),_4(t.y,e,vye,n?n.y:void 0,r?r.y:void 0)}function A4(t){return t.translate===0&&t.scale===1}function rH(t){return A4(t.x)&&A4(t.y)}function k4(t,e){return t.min===e.min&&t.max===e.max}function xye(t,e){return k4(t.x,e.x)&&k4(t.y,e.y)}function E4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function iH(t,e){return E4(t.x,e.x)&&E4(t.y,e.y)}function T4(t){return Pr(t.x)/Pr(t.y)}function R4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class wye{constructor(){this.members=[]}add(e){_T(this.members,e),e.scheduleRender()}remove(e){if(CT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sye(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:d,rotateY:m,skewX:y,skewY:v}=n;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const t_=["","X","Y","Z"],_ye=1e3;let Cye=0;function n_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function sH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=HU(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ut,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&sH(r)}function oH({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Cye++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Eye),this.nodes.forEach(Oye),this.nodes.forEach(Pye),this.nodes.forEach(Tye)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new hye)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ET),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=wU(o)&&!vge(o),this.instance=o;const{layoutId:a,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let f,d=0;const m=()=>this.root.updateBlockedByResize=!1;Ut.read(()=>{d=window.innerWidth}),t(o,()=>{const y=window.innerWidth;y!==d&&(d=y,this.root.updateBlockedByResize=!0,f&&f(),f=fye(m,250),Pb.hasAnimatedSinceResize&&(Pb.hasAnimatedSinceResize=!1,this.nodes.forEach(P4)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&h&&(a||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||h.getDefaultTransition()||Bye,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=h.getProps(),S=!this.targetLayout||!iH(this.targetLayout,y),A=!d&&m;if(this.options.layoutRoot||this.resumeFrom||A||d&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...VT(v,"layout"),onPlay:w,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(f,A)}else d||P4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Dye),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&sH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(O4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Mye),this.nodes.forEach(Aye),this.nodes.forEach(kye)):this.nodes.forEach(O4),this.clearAllSnapshots();const a=Xr.now();Un.delta=Zo(0,1e3/60,a-Un.timestamp),Un.timestamp=a,Un.isProcessing=!0,H2.update.process(Un),H2.preRender.process(Un),H2.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Rye),this.sharedNodes.forEach(Lye)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ut.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ut.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pr(this.snapshot.measuredBox.x)&&!Pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!rH(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(a||ec(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),jye(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return tn();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some($ye))){const{scroll:h}=this.root;h&&(ah(a.x,h.offset.x),ah(a.y,h.offset.y))}return a}removeElementScroll(o){const a=tn();if(Fi(a,o),this.scroll?.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:d}=h;h!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&Fi(a,o),ah(a.x,f.offset.x),ah(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const c=tn();Fi(c,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&lh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ec(f.latestValues)&&lh(c,f.latestValues)}return ec(this.latestValues)&&lh(c,this.latestValues),c}removeTransform(o){const a=tn();Fi(a,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!ec(h.latestValues))continue;$A(h.latestValues)&&h.updateSnapshot();const f=tn(),d=h.measurePageBox();Fi(f,d),C4(a,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return ec(this.latestValues)&&C4(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=Un.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),Lp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fi(this.target,this.layout.layoutBox),jU(this.target,this.targetDelta)):Fi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),Lp(this.relativeTargetOrigin,this.target,m.target),Fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$A(this.parent.latestValues)||BU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Fi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;r0e(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=tn());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(w4(this.prevProjectionDelta.x,this.projectionDelta.x),w4(this.prevProjectionDelta.y,this.projectionDelta.y)),Dp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!R4(this.projectionDelta.x,this.prevProjectionDelta.x)||!R4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ch(),this.projectionDelta=ch(),this.projectionDeltaWithTransform=ch()}setAnimationOrigin(o,a=!1){const c=this.snapshot,h=c?c.latestValues:{},f={...this.latestValues},d=ch();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=tn(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,w=y!==v,_=this.getStack(),S=!_||_.members.length<=1,A=!!(w&&!S&&this.options.crossfade===!0&&!this.path.some(Nye));this.animationProgress=0;let k;this.mixTargetDelta=P=>{const M=P/1e3;D4(d.x,o.x,M),D4(d.y,o.y,M),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lp(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Iye(this.relativeTarget,this.relativeTargetOrigin,m,M),k&&xye(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=tn()),Fi(k,this.relativeTarget)),w&&(this.animationValues=f,pye(f,h,this.latestValues,M,A,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(vl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ut.update(()=>{Pb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bh(0)),this.currentAnimation=cye(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_ye),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:h,latestValues:f}=o;if(!(!a||!c||!h)){if(this!==o&&this.layout&&h&&aH(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||tn();const d=Pr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const m=Pr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}Fi(a,c),lh(a,f),Dp(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wye),this.sharedNodes.get(o).add(a);const h=a.options.initialPromotionConfig;a.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const h={};c.z&&n_("z",o,h,this.animationValues);for(let f=0;f<t_.length;f++)n_(`rotate${t_[f]}`,o,h,this.animationValues),n_(`skew${t_[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ob(a?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ob(a?.pointerEvents)||""),this.hasProjected&&!ec(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let d=Sye(this.projectionDeltaWithTransform,this.treeScale,f);c&&(d=c(f,d)),o.transform=d;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in bm){if(f[v]===void 0)continue;const{correct:w,applyTo:_,isCSSVariable:S}=bm[v],A=d==="none"?f[v]:w(f[v],h);if(_){const k=_.length;for(let P=0;P<k;P++)o[_[P]]=A}else S?this.options.visualElement.renderState.vars[v]=A:o[v]=A}this.options.layoutId&&(o.pointerEvents=h===this?Ob(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(M4),this.root.sharedNodes.clear()}}}function Aye(t){t.updateLayout()}function kye(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?Ui(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],m=Pr(d);d.min=n[f].min,d.max=d.min+m}):aH(i,e.layoutBox,n)&&Ui(f=>{const d=s?e.measuredBox[f]:e.layoutBox[f],m=Pr(n[f]);d.max=d.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const o=ch();Dp(o,n,e.layoutBox);const a=ch();s?Dp(a,t.applyTransform(r,!0),e.measuredBox):Dp(a,n,e.layoutBox);const c=!rH(o);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:m}=f;if(d&&m){const y=tn();Lp(y,e.layoutBox,d.layoutBox);const v=tn();Lp(v,n,m.layoutBox),iH(y,v)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Eye(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Tye(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Rye(t){t.clearSnapshot()}function M4(t){t.clearMeasurements()}function O4(t){t.isLayoutDirty=!1}function Mye(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function P4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Oye(t){t.resolveTargetDelta()}function Pye(t){t.calcProjection()}function Dye(t){t.resetSkewAndRotation()}function Lye(t){t.removeLeadSnapshot()}function D4(t,e,n){t.translate=Gt(e.translate,0,n),t.scale=Gt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function L4(t,e,n,r){t.min=Gt(e.min,n.min,r),t.max=Gt(e.max,n.max,r)}function Iye(t,e,n,r){L4(t.x,e.x,n.x,r),L4(t.y,e.y,n.y,r)}function Nye(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Bye={duration:.45,ease:[.4,0,.1,1]},I4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),N4=I4("applewebkit/")&&!I4("chrome/")?Math.round:Zi;function B4(t){t.min=N4(t.min),t.max=N4(t.max)}function jye(t){B4(t.x),B4(t.y)}function aH(t,e,n){return t==="position"||t==="preserve-aspect"&&!H0e(T4(e),T4(n),.2)}function $ye(t){return t!==t.root&&t.scroll?.wasRoot}const Vye=oH({attachResizeListener:(t,e)=>vm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),r_={current:void 0},lH=oH({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!r_.current){const t=new Vye({});t.mount(window),t.setOptions({layoutScroll:!0}),r_.current=t}return r_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Fye={pan:{Feature:sye},drag:{Feature:iye,ProjectionNode:lH,MeasureLayout:eH}};function j4(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ut.postRender(()=>s(e,Ym(e)))}class zye extends _l{mount(){const{current:e}=this.node;e&&(this.unmount=pge(e,(n,r)=>(j4(this.node,r,"Start"),i=>j4(this.node,i,"End"))))}unmount(){}}class Uye extends _l{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wm(vm(this.node.current,"focus",()=>this.onFocus()),vm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $4(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ut.postRender(()=>s(e,Ym(e)))}class Hye extends _l{mount(){const{current:e}=this.node;e&&(this.unmount=bge(e,(n,r)=>($4(this.node,r,"Start"),(i,{success:s})=>$4(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const WA=new WeakMap,i_=new WeakMap,qye=t=>{const e=WA.get(t.target);e&&e(t)},Wye=t=>{t.forEach(qye)};function Gye({root:t,...e}){const n=t||document;i_.has(n)||i_.set(n,{});const r=i_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Wye,{root:t,...e})),r[i]}function Kye(t,e,n){const r=Gye(e);return WA.set(t,n),r.observe(t),()=>{WA.delete(t),r.unobserve(t)}}const Yye={some:0,all:1};class Xye extends _l{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Yye[i]},a=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),m=h?f:d;m&&m(c)};return Kye(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Jye(e,n))&&this.startObserver()}unmount(){}}function Jye({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Qye={inView:{Feature:Xye},tap:{Feature:Hye},focus:{Feature:Uye},hover:{Feature:zye}},Zye={layout:{ProjectionNode:lH,MeasureLayout:eH}},ebe={...j0e,...Qye,...Fye,...Zye},ZT=e0e(ebe,d0e),tbe=()=>{const{t}=Mt();return C.jsx(t6,{children:C.jsx("div",{className:"mx-auto flex w-full max-w-[var(--thread-max-width)] flex-col px-[var(--thread-padding-x)] justify-center items-center mb-[16px]",children:C.jsxs("div",{className:"max-w-[490px] flex flex-col items-center gap-[16px] text-center",children:[C.jsx("p",{className:"font-[700] text-[32px] leading-[24px]",style:{color:"var(--chat-welcome-color)"},children:t("WelcomeTitle")}),C.jsx("p",{className:"text-[20px] leading-[20px]",style:{color:"var(--chat-welcome-description-color)"},children:t("WelcomeDescription")})]})})})},sw=na((t,e)=>({attachmentFiles:[],addAttachmentFile:n=>{t({attachmentFiles:[...e().attachmentFiles,n]})},deleteAttachmentFile:n=>{t({attachmentFiles:e().attachmentFiles.filter(r=>r.path!==n)})},clearAttachmentFiles:()=>{t({attachmentFiles:[]})}})),nbe="data:image/svg+xml,%3csvg%20width='17'%20height='16'%20viewBox='0%200%2017%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.38672%205.07617L6.4082%206.0918L8.33008%208.00098L6.41016%209.91016L5.3877%2010.9258L4.87695%2011.4346L5.15918%2011.7178L5.44141%2012.002L5.95215%2011.4932L6.97461%2010.4775L8.89746%208.56543L11.7627%2011.4131L12.3135%2011.9619L12.5957%2011.6777L12.8779%2011.3945L12.3262%2010.8457L11.2227%209.74902L9.46484%208.00098L11.2246%206.25293L12.3281%205.15625L12.8799%204.6084L12.3154%204.04004L11.7637%204.58887L10.6611%205.68555L8.89746%207.4375L6.97266%205.52441L5.9502%204.50879L5.43945%204L4.875%204.56836L5.38672%205.07617Z'%20fill='%23444444'/%3e%3c/svg%3e",rbe="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%201.5H20.5859C20.7185%201.50004%2020.8457%201.55275%2020.9395%201.64648L26.3535%207.06055C26.4472%207.15428%2026.5%207.28151%2026.5%207.41406V29C26.5%2029.8284%2025.8284%2030.5%2025%2030.5H7C6.17157%2030.5%205.5%2029.8284%205.5%2029V3C5.5%202.17157%206.17157%201.5%207%201.5Z'%20fill='white'%20stroke='%23BBBBBB'/%3e%3cpath%20d='M20.5%202V6C20.5%206.82843%2021.1716%207.5%2022%207.5H26'%20stroke='%23BBBBBB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2012C9.44772%2012%209%2012.4477%209%2013C9%2013.5523%209.44772%2014%2010%2014H22C22.5523%2014%2023%2013.5523%2023%2013C23%2012.4477%2022.5523%2012%2022%2012H10ZM9%2017C9%2016.4477%209.44771%2016%2010%2016H13C13.5523%2016%2014%2016.4477%2014%2017C14%2017.5523%2013.5523%2018%2013%2018H10C9.44771%2018%209%2017.5523%209%2017ZM9%2021C9%2020.4477%209.44772%2020%2010%2020H13C13.5523%2020%2014%2020.4477%2014%2021C14%2021.5523%2013.5523%2022%2013%2022H10C9.44771%2022%209%2021.5523%209%2021Z'%20fill='%23A9CBDD'/%3e%3cpath%20d='M16%2018C16%2016.8954%2016.8954%2016%2018%2016H26C27.1046%2016%2028%2016.8954%2028%2018V26C28%2027.1046%2027.1046%2028%2026%2028H18C16.8954%2028%2016%2027.1046%2016%2026V18Z'%20fill='%23287CA9'/%3e%3cpath%20d='M26.93%2018.4596L25.14%2025.5996H23.16L22.33%2022.1496C22.31%2022.0763%2022.2867%2021.9696%2022.26%2021.8296C22.2333%2021.6829%2022.2%2021.5229%2022.16%2021.3496C22.1267%2021.1696%2022.0967%2020.9996%2022.07%2020.8396C22.0433%2020.6729%2022.0233%2020.5396%2022.01%2020.4396C21.9967%2020.5396%2021.9733%2020.6729%2021.94%2020.8396C21.9133%2020.9996%2021.8833%2021.1696%2021.85%2021.3496C21.8167%2021.5229%2021.7833%2021.6829%2021.75%2021.8296C21.7233%2021.9696%2021.7%2022.0763%2021.68%2022.1496L20.84%2025.5996H18.87L17.07%2018.4596H18.73L19.58%2022.2096C19.6067%2022.3096%2019.6367%2022.4429%2019.67%2022.6096C19.7033%2022.7696%2019.7367%2022.9429%2019.77%2023.1296C19.8033%2023.3096%2019.8333%2023.4863%2019.86%2023.6596C19.8933%2023.8263%2019.9167%2023.9696%2019.93%2024.0896C19.95%2023.9296%2019.9767%2023.7463%2020.01%2023.5396C20.05%2023.3329%2020.09%2023.1229%2020.13%2022.9096C20.17%2022.6963%2020.21%2022.4963%2020.25%2022.3096C20.29%2022.1229%2020.3267%2021.9729%2020.36%2021.8596L21.21%2018.4596H22.8L23.65%2021.8596C23.67%2021.9729%2023.7%2022.1229%2023.74%2022.3096C23.7867%2022.4963%2023.83%2022.6996%2023.87%2022.9196C23.9167%2023.1329%2023.9567%2023.3429%2023.99%2023.5496C24.0233%2023.7563%2024.05%2023.9363%2024.07%2024.0896C24.09%2023.9229%2024.12%2023.7229%2024.16%2023.4896C24.2067%2023.2496%2024.2533%2023.0129%2024.3%2022.7796C24.3467%2022.5396%2024.3867%2022.3529%2024.42%2022.2196L25.27%2018.4596H26.93Z'%20fill='white'/%3e%3c/svg%3e",ibe="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%201.5H20.5859C20.7185%201.50004%2020.8457%201.55275%2020.9395%201.64648L26.3535%207.06055C26.4472%207.15428%2026.5%207.28151%2026.5%207.41406V29C26.5%2029.8284%2025.8284%2030.5%2025%2030.5H7C6.17157%2030.5%205.5%2029.8284%205.5%2029V3C5.5%202.17157%206.17157%201.5%207%201.5Z'%20fill='white'%20stroke='%23BBBBBB'/%3e%3cpath%20d='M20.5%202V6C20.5%206.82843%2021.1716%207.5%2022%207.5H26'%20stroke='%23BBBBBB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2012C9.44772%2012%209%2012.4477%209%2013C9%2013.5523%209.44772%2014%2010%2014H22C22.5523%2014%2023%2013.5523%2023%2013C23%2012.4477%2022.5523%2012%2022%2012H10ZM9%2017C9%2016.4477%209.44771%2016%2010%2016H13C13.5523%2016%2014%2016.4477%2014%2017C14%2017.5523%2013.5523%2018%2013%2018H10C9.44771%2018%209%2017.5523%209%2017ZM9%2021C9%2020.4477%209.44772%2020%2010%2020H13C13.5523%2020%2014%2020.4477%2014%2021C14%2021.5523%2013.5523%2022%2013%2022H10C9.44771%2022%209%2021.5523%209%2021Z'%20fill='%23F5B8B0'/%3e%3cpath%20d='M16%2018C16%2016.8954%2016.8954%2016%2018%2016H26C27.1046%2016%2028%2016.8954%2028%2018V26C28%2027.1046%2027.1046%2028%2026%2028H18C16.8954%2028%2016%2027.1046%2016%2026V18Z'%20fill='%23E54D39'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M20.8924%2017.5C20.8924%2018.8103%2020.5181%2020.3557%2019.8855%2021.7815C19.2505%2023.2131%2018.3933%2024.4378%2017.5%2025.1598L18.4707%2026.5C20.8784%2024.8781%2023.5444%2023.7664%2026.1241%2024.1387L26.5%2022.5276C24.302%2021.7881%2022.5384%2019.5689%2022.5384%2017.5H20.8924ZM21.9659%2020.9307C21.8013%2021.4516%2021.6064%2021.9659%2021.3859%2022.462C21.2669%2022.7306%2021.1403%2022.9954%2021.0043%2023.2563C21.7701%2022.9505%2022.5614%2022.7104%2023.3692%2022.5642C22.8309%2022.0858%2022.3589%2021.5364%2021.9659%2020.9307Z'%20fill='white'/%3e%3c/svg%3e",sbe="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%201.5H20.5859C20.7185%201.50004%2020.8457%201.55275%2020.9395%201.64648L26.3535%207.06055C26.4472%207.15428%2026.5%207.28151%2026.5%207.41406V29C26.5%2029.8284%2025.8284%2030.5%2025%2030.5H7C6.17157%2030.5%205.5%2029.8284%205.5%2029V3C5.5%202.17157%206.17157%201.5%207%201.5Z'%20fill='white'%20stroke='%23BBBBBB'/%3e%3cpath%20d='M20.5%202V6C20.5%206.82843%2021.1716%207.5%2022%207.5H26'%20stroke='%23BBBBBB'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%2012C9.44772%2012%209%2012.4477%209%2013C9%2013.5523%209.44772%2014%2010%2014H14C14.5523%2014%2015%2013.5523%2015%2013C15%2012.4477%2014.5523%2012%2014%2012H10ZM10%2016C9.44772%2016%209%2016.4477%209%2017C9%2017.5523%209.44772%2018%2010%2018H14C14.5523%2018%2015%2017.5523%2015%2017C15%2016.4477%2014.5523%2016%2014%2016H10ZM9%2021C9%2020.4477%209.44772%2020%2010%2020H14C14.5523%2020%2015%2020.4477%2015%2021C15%2021.5523%2014.5523%2022%2014%2022H10C9.44772%2022%209%2021.5523%209%2021ZM18%2012C17.4477%2012%2017%2012.4477%2017%2013C17%2013.5523%2017.4477%2014%2018%2014H22C22.5523%2014%2023%2013.5523%2023%2013C23%2012.4477%2022.5523%2012%2022%2012H18Z'%20fill='%23B0D9AD'/%3e%3cpath%20d='M16%2018C16%2016.8954%2016.8954%2016%2018%2016H26C27.1046%2016%2028%2016.8954%2028%2018V26C28%2027.1046%2027.1046%2028%2026%2028H18C16.8954%2028%2016%2027.1046%2016%2026V18Z'%20fill='%233AA133'/%3e%3cpath%20d='M25.4432%2025.5996H23.4832L21.9532%2023.1196L20.4232%2025.5996H18.5432L20.9132%2021.9296L18.6832%2018.4596H20.5732L22.0032%2020.8596L23.3832%2018.4596H25.2732L23.0332%2022.0496L25.4432%2025.5996Z'%20fill='white'/%3e%3c/svg%3e",cH=({file:t,withoutClose:e})=>{const{deleteAttachmentFile:n}=sw(),r=()=>{n(t.path)},i=t.path.split("/").pop()??"",s=i.split(".").pop()??"",o=i.replace(`.${s}`,""),a=s==="pdf"?ibe:s==="docx"?rbe:sbe;return C.jsxs("div",{className:Ye(" w-fit flex flex-row gap-[12px] h-[44px] rounded-[8px] p-[4px] box-border border-[var(--file-items-border-color)]",e?"cursor-pointer pe-[24px]":"",e?"bg-[var(--file-items-chat-background-color)]":"border bg-[var(--file-items-background-color)]",e?"hover:bg-[var(--file-items-chat-hover-background-color)]":"",e?"active:bg-[var(--file-items-chat-pressed-background-color)]":""),onClick:()=>{e&&window.AscDesktopEditor.openTemplate(t.path,i)},children:[t.isImage?C.jsx("img",{className:"h-[31px]",src:t.content,alt:""}):C.jsxs("div",{className:"flex flex-row items-center h-[36px] gap-[4px]",children:[C.jsx(fn,{className:"",src:a}),C.jsxs("p",{className:"text-[var(--file-items-color)]",children:[o,C.jsxs("span",{className:"text-[var(--file-items-ext-color)]",children:[".",s]})]})]}),e?null:C.jsx(Ft,{iconName:nbe,size:16,onClick:r,color:"var(--file-items-icon-color)"})]})};function Fv(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const Or=Cl(/[A-Za-z]/),gr=Cl(/[\dA-Za-z]/),obe=Cl(/[#-'*+\--9=?A-Z^-~]/);function zv(t){return t!==null&&(t<32||t===127)}const GA=Cl(/\d/),abe=Cl(/[\dA-Fa-f]/),lbe=Cl(/[!-/:-@[-`{-~]/);function je(t){return t!==null&&t<-2}function Rt(t){return t!==null&&(t<0||t===32)}function lt(t){return t===-2||t===-1||t===32}const ow=Cl(new RegExp("\\p{P}|\\p{S}","u")),Rc=Cl(/\s/);function Cl(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function cbe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const aw=(function(t){if(t==null)return dbe;if(typeof t=="function")return lw(t);if(typeof t=="object")return Array.isArray(t)?ube(t):hbe(t);if(typeof t=="string")return fbe(t);throw new Error("Expected function, string, or object as test")});function ube(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=aw(t[n]);return lw(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function hbe(t){const e=t;return lw(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function fbe(t){return lw(e);function e(n){return n&&n.type===t}}function lw(t){return e;function e(n,r,i){return!!(pbe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function dbe(){return!0}function pbe(t){return t!==null&&typeof t=="object"&&"type"in t}const uH=[],mbe=!0,KA=!1,gbe="skip";function hH(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=aw(i),o=r?-1:1;a(t,void 0,[])();function a(c,h,f){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const y=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return m;function m(){let y=uH,v,w,_;if((!e||s(c,h,f[f.length-1]||void 0))&&(y=ybe(n(c,f)),y[0]===KA))return y;if("children"in c&&c.children){const S=c;if(S.children&&y[0]!==gbe)for(w=(r?S.children.length:-1)+o,_=f.concat(S);w>-1&&w<S.children.length;){const A=S.children[w];if(v=a(A,w,_)(),v[0]===KA)return v;w=typeof v[1]=="number"?v[1]:w+o}}return y}}}function ybe(t){return Array.isArray(t)?t:typeof t=="number"?[mbe,t]:t==null?uH:[t]}function bbe(t,e,n){const i=aw((n||{}).ignore||[]),s=vbe(e);let o=-1;for(;++o<s.length;)hH(t,"text",a);function a(h,f){let d=-1,m;for(;++d<f.length;){const y=f[d],v=m?m.children:void 0;if(i(y,v?v.indexOf(y):void 0,m))return;m=y}if(m)return c(h,f)}function c(h,f){const d=f[f.length-1],m=s[o][0],y=s[o][1];let v=0;const _=d.children.indexOf(h);let S=!1,A=[];m.lastIndex=0;let k=m.exec(h.value);for(;k;){const P=k.index,M={index:k.index,input:k.input,stack:[...f,h]};let O=y(...k,M);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?m.lastIndex=P+1:(v!==P&&A.push({type:"text",value:h.value.slice(v,P)}),Array.isArray(O)?A.push(...O):O&&A.push(O),v=P+k[0].length,S=!0),!m.global)break;k=m.exec(h.value)}return S?(v<h.value.length&&A.push({type:"text",value:h.value.slice(v)}),d.children.splice(_,1,...A)):A=[h],_+A.length}}function vbe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([xbe(i[0]),wbe(i[1])])}return e}function xbe(t){return typeof t=="string"?new RegExp(cbe(t),"g"):t}function wbe(t){return typeof t=="function"?t:function(){return t}}const s_="phrasing",o_=["autolink","link","image","label"];function Sbe(){return{transforms:[Rbe],enter:{literalAutolink:Cbe,literalAutolinkEmail:a_,literalAutolinkHttp:a_,literalAutolinkWww:a_},exit:{literalAutolink:Tbe,literalAutolinkEmail:Ebe,literalAutolinkHttp:Abe,literalAutolinkWww:kbe}}}function _be(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:":",before:"[ps]",after:"\\/",inConstruct:s_,notInConstruct:o_}]}}function Cbe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function a_(t){this.config.enter.autolinkProtocol.call(this,t)}function Abe(t){this.config.exit.autolinkProtocol.call(this,t)}function kbe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Ebe(t){this.config.exit.autolinkEmail.call(this,t)}function Tbe(t){this.exit(t)}function Rbe(t){bbe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Mbe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Obe]],{ignore:["link","linkReference"]})}function Mbe(t,e,n,r,i){let s="";if(!fH(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Pbe(n)))return!1;const o=Dbe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Obe(t,e,n,r){return!fH(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Pbe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Dbe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Fv(t,"(");let s=Fv(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function fH(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Rc(n)||ow(n))&&(!e||n!==47)}function bs(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}dH.peek=zbe;function Lbe(){this.buffer()}function Ibe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Nbe(){this.buffer()}function Bbe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function jbe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=bs(this.sliceSerialize(t)).toLowerCase(),n.label=e}function $be(t){this.exit(t)}function Vbe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=bs(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Fbe(t){this.exit(t)}function zbe(){return"["}function dH(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Ube(){return{enter:{gfmFootnoteCallString:Lbe,gfmFootnoteCall:Ibe,gfmFootnoteDefinitionLabelString:Nbe,gfmFootnoteDefinition:Bbe},exit:{gfmFootnoteCallString:jbe,gfmFootnoteCall:$be,gfmFootnoteDefinitionLabelString:Vbe,gfmFootnoteDefinition:Fbe}}}function Hbe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:dH},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let c=a.move("[^");const h=s.enter("footnoteDefinition"),f=s.enter("label");return c+=a.move(s.safe(s.associationId(r),{before:c,after:"]"})),f(),c+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),c+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?pH:qbe))),h(),c}}function qbe(t,e,n){return e===0?t:pH(t,e,n)}function pH(t,e,n){return(n?"":"    ")+t}const Wbe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];mH.peek=Jbe;function Gbe(){return{canContainEols:["delete"],enter:{strikethrough:Ybe},exit:{strikethrough:Xbe}}}function Kbe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Wbe}],handlers:{delete:mH}}}function Ybe(t){this.enter({type:"delete",children:[]},t)}function Xbe(t){this.exit(t)}function mH(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Jbe(){return"~"}function Qbe(t){return t.length}function Zbe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||Qbe,s=[],o=[],a=[],c=[];let h=0,f=-1;for(;++f<t.length;){const w=[],_=[];let S=-1;for(t[f].length>h&&(h=t[f].length);++S<t[f].length;){const A=eve(t[f][S]);if(n.alignDelimiters!==!1){const k=i(A);_[S]=k,(c[S]===void 0||k>c[S])&&(c[S]=k)}w.push(A)}o[f]=w,a[f]=_}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<h;)s[d]=V4(r[d]);else{const w=V4(r);for(;++d<h;)s[d]=w}d=-1;const m=[],y=[];for(;++d<h;){const w=s[d];let _="",S="";w===99?(_=":",S=":"):w===108?_=":":w===114&&(S=":");let A=n.alignDelimiters===!1?1:Math.max(1,c[d]-_.length-S.length);const k=_+"-".repeat(A)+S;n.alignDelimiters!==!1&&(A=_.length+A+S.length,A>c[d]&&(c[d]=A),y[d]=A),m[d]=k}o.splice(1,0,m),a.splice(1,0,y),f=-1;const v=[];for(;++f<o.length;){const w=o[f],_=a[f];d=-1;const S=[];for(;++d<h;){const A=w[d]||"";let k="",P="";if(n.alignDelimiters!==!1){const M=c[d]-(_[d]||0),O=s[d];O===114?k=" ".repeat(M):O===99?M%2?(k=" ".repeat(M/2+.5),P=" ".repeat(M/2-.5)):(k=" ".repeat(M/2),P=k):P=" ".repeat(M)}n.delimiterStart!==!1&&!d&&S.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&A==="")&&(n.delimiterStart!==!1||d)&&S.push(" "),n.alignDelimiters!==!1&&S.push(k),S.push(A),n.alignDelimiters!==!1&&S.push(P),n.padding!==!1&&S.push(" "),(n.delimiterEnd!==!1||d!==h-1)&&S.push("|")}v.push(n.delimiterEnd===!1?S.join("").replace(/ +$/,""):S.join(""))}return v.join(`
`)}function eve(t){return t==null?"":String(t)}function V4(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}const F4={}.hasOwnProperty;function tve(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&F4.call(i,t)){const c=String(i[t]);o=F4.call(a,c)?a[c]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function nve(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),rve);return i(),o}function rve(t,e,n){return">"+(n?"":" ")+t}function ive(t,e){return z4(t,e.inConstruct,!0)&&!z4(t,e.notInConstruct,!1)}function z4(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function U4(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&ive(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function sve(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function ove(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function ave(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function lve(t,e,n,r){const i=ave(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(ove(t,n)){const d=n.enter("codeIndented"),m=n.indentLines(s,cve);return d(),m}const a=n.createTracker(r),c=i.repeat(Math.max(sve(s,i)+1,3)),h=n.enter("codeFenced");let f=a.move(c);if(t.lang){const d=n.enter(`codeFencedLang${o}`);f+=a.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);f+=a.move(" "),f+=a.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...a.current()})),d()}return f+=a.move(`
`),s&&(f+=a.move(s+`
`)),f+=a.move(c),h(),f}function cve(t,e,n){return(n?"":"    ")+t}function eR(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function uve(t,e,n,r){const i=eR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const c=n.createTracker(r);let h=c.move("[");return h+=c.move(n.safe(n.associationId(t),{before:h,after:"]",...c.current()})),h+=c.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(a=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...c.current()}))),a(),t.title&&(a=n.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(n.safe(t.title,{before:h,after:i,...c.current()})),h+=c.move(i),a()),o(),h}function hve(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function xm(t){return"&#x"+t.toString(16).toUpperCase()+";"}function $h(t){if(t===null||Rt(t)||Rc(t))return 1;if(ow(t))return 2}function Uv(t,e,n){const r=$h(t),i=$h(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}gH.peek=fve;function gH(t,e,n,r){const i=hve(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const h=c.charCodeAt(0),f=Uv(r.before.charCodeAt(r.before.length-1),h,i);f.inside&&(c=xm(h)+c.slice(1));const d=c.charCodeAt(c.length-1),m=Uv(r.after.charCodeAt(0),d,i);m.inside&&(c=c.slice(0,-1)+xm(d));const y=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+y}function fve(t,e,n){return n.options.emphasis||"*"}function tR(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),hH(t,s,a,i);function a(c,h){const f=h[h.length-1],d=f?f.children.indexOf(c):void 0;return o(c,d,f)}}const dve={};function nR(t,e){const n=dve,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return yH(t,r,i)}function yH(t,e,n){if(pve(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return H4(t.children,e,n)}return Array.isArray(t)?H4(t,e,n):""}function H4(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=yH(t[i],e,n);return r.join("")}function pve(t){return!!(t&&typeof t=="object")}function mve(t,e){let n=!1;return tR(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,KA}),!!((!t.depth||t.depth<3)&&nR(t)&&(e.options.setext||n))}function gve(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(mve(t,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),f(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=xm(h.charCodeAt(0))+h.slice(1)),h=h?o+" "+h:o,n.options.closeAtx&&(h+=" "+o),c(),a(),h}bH.peek=yve;function bH(t){return t.value||""}function yve(){return"<"}vH.peek=bve;function vH(t,e,n,r){const i=eR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const c=n.createTracker(r);let h=c.move("![");return h+=c.move(n.safe(t.alt,{before:h,after:"]",...c.current()})),h+=c.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(a=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":")",...c.current()}))),a(),t.title&&(a=n.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(n.safe(t.title,{before:h,after:i,...c.current()})),h+=c.move(i),a()),h+=c.move(")"),o(),h}function bve(){return"!"}xH.peek=vve;function xH(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let c=a.move("![");const h=n.safe(t.alt,{before:c,after:"]",...a.current()});c+=a.move(h+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...a.current()});return o(),n.stack=f,s(),i==="full"||!h||h!==d?c+=a.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function vve(){return"!"}wH.peek=xve;function wH(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let c;if(o.atBreak)for(;c=a.exec(r);){let h=c.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(c.index+1)}}return i+r+i}function xve(){return"`"}function SH(t,e){const n=nR(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}_H.peek=wve;function _H(t,e,n,r){const i=eR(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,c;if(SH(t,n)){const f=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=f,d}a=n.enter("link"),c=n.enter("label");let h=o.move("[");return h+=o.move(n.containerPhrasing(t,{before:h,after:"](",...o.current()})),h+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=o.move("<"),h+=o.move(n.safe(t.url,{before:h,after:">",...o.current()})),h+=o.move(">")):(c=n.enter("destinationRaw"),h+=o.move(n.safe(t.url,{before:h,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=o.move(" "+i),h+=o.move(n.safe(t.title,{before:h,after:i,...o.current()})),h+=o.move(i),c()),h+=o.move(")"),a(),h}function wve(t,e,n){return SH(t,n)?"<":"["}CH.peek=Sve;function CH(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let c=a.move("[");const h=n.containerPhrasing(t,{before:c,after:"]",...a.current()});c+=a.move(h+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...a.current()});return o(),n.stack=f,s(),i==="full"||!h||h!==d?c+=a.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function Sve(){return"["}function rR(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function _ve(t){const e=rR(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Cve(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function AH(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Ave(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?Cve(n):rR(n);const a=t.ordered?o==="."?")":".":_ve(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const f=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),AH(n)===o&&f){let d=-1;for(;++d<t.children.length;){const m=t.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=a),n.bulletCurrent=o;const h=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),h}function kve(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Eve(t,e,n,r){const i=kve(n);let s=n.bulletCurrent||rR(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const c=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,a.current()),f);return c(),h;function f(d,m,y){return m?(y?"":" ".repeat(o))+d:(y?s:s+" ".repeat(o-s.length))+d}}function Tve(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const Rve=aw(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Mve(t,e,n,r){return(t.children.some(function(o){return Rve(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Ove(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}kH.peek=Pve;function kH(t,e,n,r){const i=Ove(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const h=c.charCodeAt(0),f=Uv(r.before.charCodeAt(r.before.length-1),h,i);f.inside&&(c=xm(h)+c.slice(1));const d=c.charCodeAt(c.length-1),m=Uv(r.after.charCodeAt(0),d,i);m.inside&&(c=c.slice(0,-1)+xm(d));const y=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+y}function Pve(t,e,n){return n.options.strong||"*"}function Dve(t,e,n,r){return n.safe(t.value,r)}function Lve(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function Ive(t,e,n){const r=(AH(n)+(n.options.ruleSpaces?" ":"")).repeat(Lve(n));return n.options.ruleSpaces?r.slice(0,-1):r}const EH={blockquote:nve,break:U4,code:lve,definition:uve,emphasis:gH,hardBreak:U4,heading:gve,html:bH,image:vH,imageReference:xH,inlineCode:wH,link:_H,linkReference:CH,list:Ave,listItem:Eve,paragraph:Tve,root:Mve,strong:kH,text:Dve,thematicBreak:Ive},q4=document.createElement("i");function iR(t){const e="&"+t+";";q4.innerHTML=e;const n=q4.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function TH(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const Nve=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Bve(t){return t.replace(Nve,jve)}function jve(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return TH(n.slice(s?2:1),s?16:10)}return iR(n)||t}function $ve(){return{enter:{table:Vve,tableData:W4,tableHeader:W4,tableRow:zve},exit:{codeText:Uve,table:Fve,tableData:l_,tableHeader:l_,tableRow:l_}}}function Vve(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Fve(t){this.exit(t),this.data.inTable=void 0}function zve(t){this.enter({type:"tableRow",children:[]},t)}function l_(t){this.exit(t)}function W4(t){this.enter({type:"tableCell",children:[]},t)}function Uve(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Hve));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Hve(t,e){return e==="|"?e:t}function qve(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:a}};function o(y,v,w,_){return h(f(y,w,_),y.align)}function a(y,v,w,_){const S=d(y,w,_),A=h([S]);return A.slice(0,A.indexOf(`
`))}function c(y,v,w,_){const S=w.enter("tableCell"),A=w.enter("phrasing"),k=w.containerPhrasing(y,{..._,before:s,after:s});return A(),S(),k}function h(y,v){return Zbe(y,{align:v,alignDelimiters:r,padding:n,stringLength:i})}function f(y,v,w){const _=y.children;let S=-1;const A=[],k=v.enter("table");for(;++S<_.length;)A[S]=d(_[S],v,w);return k(),A}function d(y,v,w){const _=y.children;let S=-1;const A=[],k=v.enter("tableRow");for(;++S<_.length;)A[S]=c(_[S],y,v,w);return k(),A}function m(y,v,w){let _=EH.inlineCode(y,v,w);return w.stack.includes("tableCell")&&(_=_.replace(/\|/g,"\\$&")),_}}function Wve(){return{exit:{taskListCheckValueChecked:G4,taskListCheckValueUnchecked:G4,paragraph:Kve}}}function Gve(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Yve}}}function G4(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Kve(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Yve(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let c=EH.listItem(t,e,n,{...r,...a.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),c;function h(f){return f+o}}function Xve(){return[Sbe(),Ube(),Gbe(),$ve(),Wve()]}function Jve(t){return{extensions:[_be(),Hbe(t),Kbe(),qve(t),Gve()]}}function ki(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function qi(t,e){return t.length>0?(ki(t,t.length,0,e),t):e}const K4={}.hasOwnProperty;function RH(t){const e={};let n=-1;for(;++n<t.length;)Qve(e,t[n]);return e}function Qve(t,e){let n;for(n in e){const i=(K4.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){K4.call(i,o)||(i[o]=[]);const a=s[o];Zve(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Zve(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ki(t,0,0,r)}const exe={tokenize:oxe,partial:!0},MH={tokenize:axe,partial:!0},OH={tokenize:lxe,partial:!0},PH={tokenize:cxe,partial:!0},txe={tokenize:uxe,partial:!0},DH={name:"wwwAutolink",tokenize:ixe,previous:IH},LH={name:"protocolAutolink",tokenize:sxe,previous:NH},oa={name:"emailAutolink",tokenize:rxe,previous:BH},So={};function nxe(){return{text:So}}let Xl=48;for(;Xl<123;)So[Xl]=oa,Xl++,Xl===58?Xl=65:Xl===91&&(Xl=97);So[43]=oa;So[45]=oa;So[46]=oa;So[95]=oa;So[72]=[oa,LH];So[104]=[oa,LH];So[87]=[oa,DH];So[119]=[oa,DH];function rxe(t,e,n){const r=this;let i,s;return o;function o(d){return!YA(d)||!BH.call(r,r.previous)||sR(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return YA(d)?(t.consume(d),a):d===64?(t.consume(d),c):n(d)}function c(d){return d===46?t.check(txe,f,h)(d):d===45||d===95||gr(d)?(s=!0,t.consume(d),c):f(d)}function h(d){return t.consume(d),i=!0,c}function f(d){return s&&i&&Or(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function ixe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!IH.call(r,r.previous)||sR(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(exe,t.attempt(MH,t.attempt(OH,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function sxe(t,e,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&NH.call(r,r.previous)&&!sR(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(Or(d)&&i.length<5)return i+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(d),c}return n(d)}function c(d){return d===47?(t.consume(d),s?h:(s=!0,c)):n(d)}function h(d){return d===null||zv(d)||Rt(d)||Rc(d)||ow(d)?n(d):t.attempt(MH,t.attempt(OH,f),n)(d)}function f(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function oxe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function axe(t,e,n){let r,i,s;return o;function o(h){return h===46||h===95?t.check(PH,c,a)(h):h===null||Rt(h)||Rc(h)||h!==45&&ow(h)?c(h):(s=!0,t.consume(h),o)}function a(h){return h===95?r=!0:(i=r,r=void 0),t.consume(h),o}function c(h){return i||r||!s?n(h):e(h)}}function lxe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(PH,e,s)(o):o===null||Rt(o)||Rc(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function cxe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||Rt(a)||Rc(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||Rt(a)||Rc(a)?e(a):r(a)}function s(a){return Or(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Or(a)?(t.consume(a),o):n(a)}}function uxe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return gr(s)?n(s):e(s)}}function IH(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Rt(t)}function NH(t){return!Or(t)}function BH(t){return!(t===47||YA(t))}function YA(t){return t===43||t===45||t===46||t===95||gr(t)}function sR(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function nf(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&gr(t.charCodeAt(n+1))&&gr(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function cw(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const XA={name:"attention",resolveAll:hxe,tokenize:fxe};function hxe(t,e){let n=-1,r,i,s,o,a,c,h,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},m={...t[n][1].start};Y4(d,-c),Y4(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=qi(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=qi(h,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),h=qi(h,cw(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=qi(h,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,h=qi(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,ki(t,r-1,n-r+3,h),n=r+h.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function fxe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=$h(r);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),a(c)}function a(c){if(c===s)return t.consume(c),a;const h=t.exit("attentionSequence"),f=$h(c),d=!f||f===2&&i||n.includes(c),m=!i||i===2&&f||n.includes(r);return h._open=!!(s===42?d:d&&(i||!m)),h._close=!!(s===42?m:m&&(f||!d)),e(c)}}function Y4(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const dxe={name:"autolink",tokenize:pxe};function pxe(t,e,n){let r=0;return i;function i(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(y){return Or(y)?(t.consume(y),o):y===64?n(y):h(y)}function o(y){return y===43||y===45||y===46||gr(y)?(r=1,a(y)):h(y)}function a(y){return y===58?(t.consume(y),r=0,c):(y===43||y===45||y===46||gr(y))&&r++<32?(t.consume(y),a):(r=0,h(y))}function c(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||zv(y)?n(y):(t.consume(y),c)}function h(y){return y===64?(t.consume(y),f):obe(y)?(t.consume(y),h):n(y)}function f(y){return gr(y)?d(y):n(y)}function d(y){return y===46?(t.consume(y),r=0,f):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):m(y)}function m(y){if((y===45||gr(y))&&r++<63){const v=y===45?m:d;return t.consume(y),v}return n(y)}}function ut(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return lt(c)?(t.enter(n),a(c)):e(c)}function a(c){return lt(c)&&s++<i?(t.consume(c),a):(t.exit(n),e(c))}}const Xm={partial:!0,tokenize:mxe};function mxe(t,e,n){return r;function r(s){return lt(s)?ut(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||je(s)?e(s):n(s)}}const jH={continuation:{tokenize:yxe},exit:bxe,name:"blockQuote",tokenize:gxe};function gxe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return lt(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function yxe(t,e,n){const r=this;return i;function i(o){return lt(o)?ut(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(jH,e,n)(o)}}function bxe(t){t.exit("blockQuote")}const $H={name:"characterEscape",tokenize:vxe};function vxe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return lbe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const VH={name:"characterReference",tokenize:xxe};function xxe(t,e,n){const r=this;let i=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),c}function c(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,o=gr,f(d))}function h(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=abe,f):(t.enter("characterReferenceValue"),s=7,o=GA,f(d))}function f(d){if(d===59&&i){const m=t.exit("characterReferenceValue");return o===gr&&!iR(r.sliceSerialize(m))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),f):n(d)}}const X4={partial:!0,tokenize:Sxe},J4={concrete:!0,name:"codeFenced",tokenize:wxe};function wxe(t,e,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return c;function c(O){return h(O)}function h(O){const L=r.events[r.events.length-1];return s=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,a=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(O)}function f(O){return O===a?(o++,t.consume(O),f):o<3?n(O):(t.exit("codeFencedFenceSequence"),lt(O)?ut(t,d,"whitespace")(O):d(O))}function d(O){return O===null||je(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(X4,w,P)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(O))}function m(O){return O===null||je(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(O)):lt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ut(t,y,"whitespace")(O)):O===96&&O===a?n(O):(t.consume(O),m)}function y(O){return O===null||je(O)?d(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(O))}function v(O){return O===null||je(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(O)):O===96&&O===a?n(O):(t.consume(O),v)}function w(O){return t.attempt(i,P,_)(O)}function _(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),S}function S(O){return s>0&&lt(O)?ut(t,A,"linePrefix",s+1)(O):A(O)}function A(O){return O===null||je(O)?t.check(X4,w,P)(O):(t.enter("codeFlowValue"),k(O))}function k(O){return O===null||je(O)?(t.exit("codeFlowValue"),A(O)):(t.consume(O),k)}function P(O){return t.exit("codeFenced"),e(O)}function M(O,L,N){let z=0;return j;function j(ie){return O.enter("lineEnding"),O.consume(ie),O.exit("lineEnding"),H}function H(ie){return O.enter("codeFencedFence"),lt(ie)?ut(O,W,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ie):W(ie)}function W(ie){return ie===a?(O.enter("codeFencedFenceSequence"),X(ie)):N(ie)}function X(ie){return ie===a?(z++,O.consume(ie),X):z>=o?(O.exit("codeFencedFenceSequence"),lt(ie)?ut(O,G,"whitespace")(ie):G(ie)):N(ie)}function G(ie){return ie===null||je(ie)?(O.exit("codeFencedFence"),L(ie)):N(ie)}}}function Sxe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const c_={name:"codeIndented",tokenize:Cxe},_xe={partial:!0,tokenize:Axe};function Cxe(t,e,n){const r=this;return i;function i(h){return t.enter("codeIndented"),ut(t,s,"linePrefix",5)(h)}function s(h){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(h):n(h)}function o(h){return h===null?c(h):je(h)?t.attempt(_xe,o,c)(h):(t.enter("codeFlowValue"),a(h))}function a(h){return h===null||je(h)?(t.exit("codeFlowValue"),o(h)):(t.consume(h),a)}function c(h){return t.exit("codeIndented"),e(h)}}function Axe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):ut(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):je(o)?i(o):n(o)}}const kxe={name:"codeText",previous:Txe,resolve:Exe,tokenize:Rxe};function Exe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Txe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Rxe(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),c):d===96?(s=t.enter("codeTextSequence"),i=0,f(d)):je(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("codeTextData"),h(d))}function h(d){return d===null||d===32||d===96||je(d)?(t.exit("codeTextData"),c(d)):(t.consume(d),h)}function f(d){return d===96?(t.consume(d),i++,f):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",h(d))}}class Mxe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Id(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Id(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Id(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Id(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Id(this.left,n.reverse())}}}function Id(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function FH(t){const e={};let n=-1,r,i,s,o,a,c,h;const f=new Mxe(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Oxe(f,n)),n=e[n],h=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...f.get(i)[1].start},a=f.slice(i,n),a.unshift(r),f.splice(i,n-i+1,a))}}return ki(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!h}function Oxe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,c=[],h={};let f,d,m=-1,y=n,v=0,w=0;const _=[w];for(;y;){for(;t.get(++i)[1]!==y;);s.push(i),y._tokenizer||(f=r.sliceStream(y),y.next||f.push(null),d&&o.defineSkip(y.start),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),y._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=y,y=y.next}for(y=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(w=m+1,_.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(o.events=[],y?(y._tokenizer=void 0,y.previous=void 0):_.pop(),m=_.length;m--;){const S=a.slice(_[m],_[m+1]),A=s.pop();c.push([A,A+S.length-1]),t.splice(A,2,S)}for(c.reverse(),m=-1;++m<c.length;)h[v+c[m][0]]=v+c[m][1],v+=c[m][1]-c[m][0]-1;return h}const Pxe={resolve:Lxe,tokenize:Ixe},Dxe={partial:!0,tokenize:Nxe};function Lxe(t){return FH(t),t}function Ixe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):je(a)?t.check(Dxe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Nxe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ut(t,s,"linePrefix")}function s(o){if(o===null||je(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function zH(t,e,n,r,i,s,o,a,c){const h=c||Number.POSITIVE_INFINITY;let f=0;return d;function d(S){return S===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(S),t.exit(s),m):S===null||S===32||S===41||zv(S)?n(S):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),w(S))}function m(S){return S===62?(t.enter(s),t.consume(S),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),y(S))}function y(S){return S===62?(t.exit("chunkString"),t.exit(a),m(S)):S===null||S===60||je(S)?n(S):(t.consume(S),S===92?v:y)}function v(S){return S===60||S===62||S===92?(t.consume(S),y):y(S)}function w(S){return!f&&(S===null||S===41||Rt(S))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(S)):f<h&&S===40?(t.consume(S),f++,w):S===41?(t.consume(S),f--,w):S===null||S===32||S===40||zv(S)?n(S):(t.consume(S),S===92?_:w)}function _(S){return S===40||S===41||S===92?(t.consume(S),w):w(S)}}function UH(t,e,n,r,i,s){const o=this;let a=0,c;return h;function h(y){return t.enter(r),t.enter(i),t.consume(y),t.exit(i),t.enter(s),f}function f(y){return a>999||y===null||y===91||y===93&&!c||y===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(y):y===93?(t.exit(s),t.enter(i),t.consume(y),t.exit(i),t.exit(r),e):je(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===null||y===91||y===93||je(y)||a++>999?(t.exit("chunkString"),f(y)):(t.consume(y),c||(c=!lt(y)),y===92?m:d)}function m(y){return y===91||y===92||y===93?(t.consume(y),a++,d):d(y)}}function HH(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,c):n(m)}function c(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),h(m))}function h(m){return m===o?(t.exit(s),c(o)):m===null?n(m):je(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),ut(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===o||m===null||je(m)?(t.exit("chunkString"),h(m)):(t.consume(m),m===92?d:f)}function d(m){return m===o||m===92?(t.consume(m),f):f(m)}}function Ip(t,e){let n;return r;function r(i){return je(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):lt(i)?ut(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const Bxe={name:"definition",tokenize:$xe},jxe={partial:!0,tokenize:Vxe};function $xe(t,e,n){const r=this;let i;return s;function s(y){return t.enter("definition"),o(y)}function o(y){return UH.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function a(y){return i=bs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),c):n(y)}function c(y){return Rt(y)?Ip(t,h)(y):h(y)}function h(y){return zH(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function f(y){return t.attempt(jxe,d,d)(y)}function d(y){return lt(y)?ut(t,m,"whitespace")(y):m(y)}function m(y){return y===null||je(y)?(t.exit("definition"),r.parser.defined.push(i),e(y)):n(y)}}function Vxe(t,e,n){return r;function r(a){return Rt(a)?Ip(t,i)(a):n(a)}function i(a){return HH(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return lt(a)?ut(t,o,"whitespace")(a):o(a)}function o(a){return a===null||je(a)?e(a):n(a)}}const Fxe={name:"hardBreakEscape",tokenize:zxe};function zxe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return je(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Uxe={name:"headingAtx",resolve:Hxe,tokenize:qxe};function Hxe(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ki(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function qxe(t,e,n){let r=0;return i;function i(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(t.consume(f),o):f===null||Rt(f)?(t.exit("atxHeadingSequence"),a(f)):n(f)}function a(f){return f===35?(t.enter("atxHeadingSequence"),c(f)):f===null||je(f)?(t.exit("atxHeading"),e(f)):lt(f)?ut(t,a,"whitespace")(f):(t.enter("atxHeadingText"),h(f))}function c(f){return f===35?(t.consume(f),c):(t.exit("atxHeadingSequence"),a(f))}function h(f){return f===null||f===35||Rt(f)?(t.exit("atxHeadingText"),a(f)):(t.consume(f),h)}}const Wxe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Q4=["pre","script","style","textarea"],Gxe={concrete:!0,name:"htmlFlow",resolveTo:Xxe,tokenize:Jxe},Kxe={partial:!0,tokenize:Zxe},Yxe={partial:!0,tokenize:Qxe};function Xxe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Jxe(t,e,n){const r=this;let i,s,o,a,c;return h;function h(I){return f(I)}function f(I){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(I),d}function d(I){return I===33?(t.consume(I),m):I===47?(t.consume(I),s=!0,w):I===63?(t.consume(I),i=3,r.interrupt?e:T):Or(I)?(t.consume(I),o=String.fromCharCode(I),_):n(I)}function m(I){return I===45?(t.consume(I),i=2,y):I===91?(t.consume(I),i=5,a=0,v):Or(I)?(t.consume(I),i=4,r.interrupt?e:T):n(I)}function y(I){return I===45?(t.consume(I),r.interrupt?e:T):n(I)}function v(I){const pe="CDATA[";return I===pe.charCodeAt(a++)?(t.consume(I),a===pe.length?r.interrupt?e:W:v):n(I)}function w(I){return Or(I)?(t.consume(I),o=String.fromCharCode(I),_):n(I)}function _(I){if(I===null||I===47||I===62||Rt(I)){const pe=I===47,Ee=o.toLowerCase();return!pe&&!s&&Q4.includes(Ee)?(i=1,r.interrupt?e(I):W(I)):Wxe.includes(o.toLowerCase())?(i=6,pe?(t.consume(I),S):r.interrupt?e(I):W(I)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):s?A(I):k(I))}return I===45||gr(I)?(t.consume(I),o+=String.fromCharCode(I),_):n(I)}function S(I){return I===62?(t.consume(I),r.interrupt?e:W):n(I)}function A(I){return lt(I)?(t.consume(I),A):j(I)}function k(I){return I===47?(t.consume(I),j):I===58||I===95||Or(I)?(t.consume(I),P):lt(I)?(t.consume(I),k):j(I)}function P(I){return I===45||I===46||I===58||I===95||gr(I)?(t.consume(I),P):M(I)}function M(I){return I===61?(t.consume(I),O):lt(I)?(t.consume(I),M):k(I)}function O(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),c=I,L):lt(I)?(t.consume(I),O):N(I)}function L(I){return I===c?(t.consume(I),c=null,z):I===null||je(I)?n(I):(t.consume(I),L)}function N(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||Rt(I)?M(I):(t.consume(I),N)}function z(I){return I===47||I===62||lt(I)?k(I):n(I)}function j(I){return I===62?(t.consume(I),H):n(I)}function H(I){return I===null||je(I)?W(I):lt(I)?(t.consume(I),H):n(I)}function W(I){return I===45&&i===2?(t.consume(I),F):I===60&&i===1?(t.consume(I),Y):I===62&&i===4?(t.consume(I),Z):I===63&&i===3?(t.consume(I),T):I===93&&i===5?(t.consume(I),se):je(I)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Kxe,ue,X)(I)):I===null||je(I)?(t.exit("htmlFlowData"),X(I)):(t.consume(I),W)}function X(I){return t.check(Yxe,G,ue)(I)}function G(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),ie}function ie(I){return I===null||je(I)?X(I):(t.enter("htmlFlowData"),W(I))}function F(I){return I===45?(t.consume(I),T):W(I)}function Y(I){return I===47?(t.consume(I),o="",q):W(I)}function q(I){if(I===62){const pe=o.toLowerCase();return Q4.includes(pe)?(t.consume(I),Z):W(I)}return Or(I)&&o.length<8?(t.consume(I),o+=String.fromCharCode(I),q):W(I)}function se(I){return I===93?(t.consume(I),T):W(I)}function T(I){return I===62?(t.consume(I),Z):I===45&&i===2?(t.consume(I),T):W(I)}function Z(I){return I===null||je(I)?(t.exit("htmlFlowData"),ue(I)):(t.consume(I),Z)}function ue(I){return t.exit("htmlFlow"),e(I)}}function Qxe(t,e,n){const r=this;return i;function i(o){return je(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function Zxe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Xm,e,n)}}const ewe={name:"htmlText",tokenize:twe};function twe(t,e,n){const r=this;let i,s,o;return a;function a(T){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(T),c}function c(T){return T===33?(t.consume(T),h):T===47?(t.consume(T),M):T===63?(t.consume(T),k):Or(T)?(t.consume(T),N):n(T)}function h(T){return T===45?(t.consume(T),f):T===91?(t.consume(T),s=0,v):Or(T)?(t.consume(T),A):n(T)}function f(T){return T===45?(t.consume(T),y):n(T)}function d(T){return T===null?n(T):T===45?(t.consume(T),m):je(T)?(o=d,Y(T)):(t.consume(T),d)}function m(T){return T===45?(t.consume(T),y):d(T)}function y(T){return T===62?F(T):T===45?m(T):d(T)}function v(T){const Z="CDATA[";return T===Z.charCodeAt(s++)?(t.consume(T),s===Z.length?w:v):n(T)}function w(T){return T===null?n(T):T===93?(t.consume(T),_):je(T)?(o=w,Y(T)):(t.consume(T),w)}function _(T){return T===93?(t.consume(T),S):w(T)}function S(T){return T===62?F(T):T===93?(t.consume(T),S):w(T)}function A(T){return T===null||T===62?F(T):je(T)?(o=A,Y(T)):(t.consume(T),A)}function k(T){return T===null?n(T):T===63?(t.consume(T),P):je(T)?(o=k,Y(T)):(t.consume(T),k)}function P(T){return T===62?F(T):k(T)}function M(T){return Or(T)?(t.consume(T),O):n(T)}function O(T){return T===45||gr(T)?(t.consume(T),O):L(T)}function L(T){return je(T)?(o=L,Y(T)):lt(T)?(t.consume(T),L):F(T)}function N(T){return T===45||gr(T)?(t.consume(T),N):T===47||T===62||Rt(T)?z(T):n(T)}function z(T){return T===47?(t.consume(T),F):T===58||T===95||Or(T)?(t.consume(T),j):je(T)?(o=z,Y(T)):lt(T)?(t.consume(T),z):F(T)}function j(T){return T===45||T===46||T===58||T===95||gr(T)?(t.consume(T),j):H(T)}function H(T){return T===61?(t.consume(T),W):je(T)?(o=H,Y(T)):lt(T)?(t.consume(T),H):z(T)}function W(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),i=T,X):je(T)?(o=W,Y(T)):lt(T)?(t.consume(T),W):(t.consume(T),G)}function X(T){return T===i?(t.consume(T),i=void 0,ie):T===null?n(T):je(T)?(o=X,Y(T)):(t.consume(T),X)}function G(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||Rt(T)?z(T):(t.consume(T),G)}function ie(T){return T===47||T===62||Rt(T)?z(T):n(T)}function F(T){return T===62?(t.consume(T),t.exit("htmlTextData"),t.exit("htmlText"),e):n(T)}function Y(T){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),q}function q(T){return lt(T)?ut(t,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):se(T)}function se(T){return t.enter("htmlTextData"),o(T)}}const oR={name:"labelEnd",resolveAll:swe,resolveTo:owe,tokenize:awe},nwe={tokenize:lwe},rwe={tokenize:cwe},iwe={tokenize:uwe};function swe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&ki(t,0,t.length,n),t}function owe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},f={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",c,e],["enter",h,e]],a=qi(a,t.slice(s+1,s+r+3)),a=qi(a,[["enter",f,e]]),a=qi(a,cw(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=qi(a,[["exit",f,e],t[o-2],t[o-1],["exit",h,e]]),a=qi(a,t.slice(o+1)),a=qi(a,[["exit",c,e]]),ki(t,s,t.length,a),t}function awe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?d(m):(o=r.parser.defined.includes(bs(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),c):n(m)}function c(m){return m===40?t.attempt(nwe,f,o?f:d)(m):m===91?t.attempt(rwe,f,o?h:d)(m):o?f(m):d(m)}function h(m){return t.attempt(iwe,f,d)(m)}function f(m){return e(m)}function d(m){return s._balanced=!0,n(m)}}function lwe(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return Rt(d)?Ip(t,s)(d):s(d)}function s(d){return d===41?f(d):zH(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Rt(d)?Ip(t,c)(d):f(d)}function a(d){return n(d)}function c(d){return d===34||d===39||d===40?HH(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function h(d){return Rt(d)?Ip(t,f)(d):f(d)}function f(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function cwe(t,e,n){const r=this;return i;function i(a){return UH.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(bs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function uwe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const hwe={name:"labelStartImage",resolveAll:oR.resolveAll,tokenize:fwe};function fwe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const dwe={name:"labelStartLink",resolveAll:oR.resolveAll,tokenize:pwe};function pwe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const u_={name:"lineEnding",tokenize:mwe};function mwe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),ut(t,e,"linePrefix")}}const Db={name:"thematicBreak",tokenize:gwe};function gwe(t,e,n){let r=0,i;return s;function s(h){return t.enter("thematicBreak"),o(h)}function o(h){return i=h,a(h)}function a(h){return h===i?(t.enter("thematicBreakSequence"),c(h)):r>=3&&(h===null||je(h))?(t.exit("thematicBreak"),e(h)):n(h)}function c(h){return h===i?(t.consume(h),r++,c):(t.exit("thematicBreakSequence"),lt(h)?ut(t,a,"whitespace")(h):a(h))}}const Ur={continuation:{tokenize:xwe},exit:Swe,name:"list",tokenize:vwe},ywe={partial:!0,tokenize:_we},bwe={partial:!0,tokenize:wwe};function vwe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(y){const v=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:GA(y)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Db,n,h)(y):h(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(y)}return n(y)}function c(y){return GA(y)&&++o<10?(t.consume(y),c):(!r.interrupt||o<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),h(y)):n(y)}function h(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(Xm,r.interrupt?n:f,t.attempt(ywe,m,d))}function f(y){return r.containerState.initialBlankLine=!0,s++,m(y)}function d(y){return lt(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),m):n(y)}function m(y){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function xwe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Xm,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ut(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!lt(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(bwe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ut(t,t.attempt(Ur,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function wwe(t,e,n){const r=this;return ut(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function Swe(t){t.exit(this.containerState.type)}function _we(t,e,n){const r=this;return ut(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!lt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Z4={name:"setextUnderline",resolveTo:Cwe,tokenize:Awe};function Cwe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function Awe(t,e,n){const r=this;let i;return s;function s(h){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=h,o(h)):n(h)}function o(h){return t.enter("setextHeadingLineSequence"),a(h)}function a(h){return h===i?(t.consume(h),a):(t.exit("setextHeadingLineSequence"),lt(h)?ut(t,c,"lineSuffix")(h):c(h))}function c(h){return h===null||je(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const kwe={tokenize:Lwe,partial:!0};function Ewe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Owe,continuation:{tokenize:Pwe},exit:Dwe}},text:{91:{name:"gfmFootnoteCall",tokenize:Mwe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Twe,resolveTo:Rwe}}}}function Twe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return a;function a(c){if(!o||!o._balanced)return n(c);const h=bs(r.sliceSerialize({start:o.end,end:r.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function Rwe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function Mwe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(d){if(s>999||d===93&&!o||d===null||d===91||Rt(d))return n(d);if(d===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(bs(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return Rt(d)||(o=!0),s++,t.consume(d),d===92?f:h}function f(d){return d===91||d===92||d===93?(t.consume(d),s++,h):h(d)}}function Owe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return c;function c(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",f):n(v)}function f(v){if(o>999||v===93&&!a||v===null||v===91||Rt(v))return n(v);if(v===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return s=bs(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return Rt(v)||(a=!0),o++,t.consume(v),v===92?d:f}function d(v){return v===91||v===92||v===93?(t.consume(v),o++,f):f(v)}function m(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),i.includes(s)||i.push(s),ut(t,y,"gfmFootnoteDefinitionWhitespace")):n(v)}function y(v){return e(v)}}function Pwe(t,e,n){return t.check(Xm,e,t.attempt(kwe,e,n))}function Dwe(t){t.exit("gfmFootnoteDefinition")}function Lwe(t,e,n){const r=this;return ut(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function Iwe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let h=c;for(;h--;)if(o[h][0]==="exit"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[h][1].end.offset-o[h][1].start.offset){o[c][1].type="strikethroughSequence",o[h][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[h][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[h][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",f,a],["enter",o[h][1],a],["exit",o[h][1],a],["enter",d,a]],y=a.parser.constructs.insideSpan.null;y&&ki(m,m.length,0,cw(y,o.slice(h+1,c),a)),ki(m,m.length,0,[["exit",d,a],["enter",o[c][1],a],["exit",o[c][1],a],["exit",f,a]]),ki(o,h-1,c-h+3,m),c=h+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,a,c){const h=this.previous,f=this.events;let d=0;return m;function m(v){return h===126&&f[f.length-1][1].type!=="characterEscape"?c(v):(o.enter("strikethroughSequenceTemporary"),y(v))}function y(v){const w=$h(h);if(v===126)return d>1?c(v):(o.consume(v),d++,y);if(d<2&&!n)return c(v);const _=o.exit("strikethroughSequenceTemporary"),S=$h(v);return _._open=!S||S===2&&!!w,_._close=!w||w===2&&!!S,a(v)}}}class Nwe{constructor(){this.map=[]}add(e,n,r){Bwe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function Bwe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function jwe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function $we(){return{flow:{null:{name:"table",tokenize:Vwe,resolveAll:Fwe}}}}function Vwe(t,e,n){const r=this;let i=0,s=0,o;return a;function a(j){let H=r.events.length-1;for(;H>-1;){const G=r.events[H][1].type;if(G==="lineEnding"||G==="linePrefix")H--;else break}const W=H>-1?r.events[H][1].type:null,X=W==="tableHead"||W==="tableRow"?O:c;return X===O&&r.parser.lazy[r.now().line]?n(j):X(j)}function c(j){return t.enter("tableHead"),t.enter("tableRow"),h(j)}function h(j){return j===124||(o=!0,s+=1),f(j)}function f(j){return j===null?n(j):je(j)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),y):n(j):lt(j)?ut(t,f,"whitespace")(j):(s+=1,o&&(o=!1,i+=1),j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),o=!0,f):(t.enter("data"),d(j)))}function d(j){return j===null||j===124||Rt(j)?(t.exit("data"),f(j)):(t.consume(j),j===92?m:d)}function m(j){return j===92||j===124?(t.consume(j),d):d(j)}function y(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(t.enter("tableDelimiterRow"),o=!1,lt(j)?ut(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):v(j))}function v(j){return j===45||j===58?_(j):j===124?(o=!0,t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),w):M(j)}function w(j){return lt(j)?ut(t,_,"whitespace")(j):_(j)}function _(j){return j===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),S):j===45?(s+=1,S(j)):j===null||je(j)?P(j):M(j)}function S(j){return j===45?(t.enter("tableDelimiterFiller"),A(j)):M(j)}function A(j){return j===45?(t.consume(j),A):j===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(j))}function k(j){return lt(j)?ut(t,P,"whitespace")(j):P(j)}function P(j){return j===124?v(j):j===null||je(j)?!o||i!==s?M(j):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(j)):M(j)}function M(j){return n(j)}function O(j){return t.enter("tableRow"),L(j)}function L(j){return j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),L):j===null||je(j)?(t.exit("tableRow"),e(j)):lt(j)?ut(t,L,"whitespace")(j):(t.enter("data"),N(j))}function N(j){return j===null||j===124||Rt(j)?(t.exit("data"),L(j)):(t.consume(j),j===92?z:N)}function z(j){return j===92||j===124?(t.consume(j),N):N(j)}}function Fwe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,c=0,h,f,d;const m=new Nwe;for(;++n<t.length;){const y=t[n],v=y[1];y[0]==="enter"?v.type==="tableHead"?(a=!1,c!==0&&(e5(m,e,c,h,f),f=void 0,c=0),h={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",h,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",f,e]])),i=v.type==="tableDelimiterRow"?2:f?3:1):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=jy(m,e,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=jy(m,e,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):v.type==="tableHead"?(a=!0,c=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=jy(m,e,s,i,n,d)):o[1]!==0&&(d=jy(m,e,o,i,n,d)),i=0):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&e5(m,e,c,h,f),m.consume(e.events),n=-1;++n<e.events.length;){const y=e.events[n];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=jwe(e.events,n))}return t}function jy(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Zu(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Zu(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const h=Zu(e.events,n[2]),f=Zu(e.events,n[3]),d={type:a,start:Object.assign({},h),end:Object.assign({},f)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const m=e.events[n[2]],y=e.events[n[3]];if(m[1].end=Object.assign({},y[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,w=n[3]-n[2]-1;t.add(v,w,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return i!==void 0&&(s.end=Object.assign({},Zu(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function e5(t,e,n,r,i){const s=[],o=Zu(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Zu(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const zwe={name:"tasklistCheck",tokenize:Hwe};function Uwe(){return{text:{91:zwe}}}function Hwe(t,e,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return Rt(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(c)}function a(c){return je(c)?e(c):lt(c)?t.check({tokenize:qwe},e,n)(c):n(c)}}function qwe(t,e,n){return ut(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function Wwe(t){return RH([nxe(),Ewe(),Iwe(t),$we(),Uwe()])}const Gwe={};function Kwe(t){const e=this,n=t||Gwe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Wwe(n)),s.push(Xve()),o.push(Jve(n))}function qH(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Ywe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Xwe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jwe={};function t5(t,e){return(Jwe.jsx?Xwe:Ywe).test(t)}const Qwe=/[ \t\n\f\r]/g;function uw(t){return typeof t=="object"?t.type==="text"?n5(t.value):!1:n5(t)}function n5(t){return t.replace(Qwe,"")===""}class Jm{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Jm.prototype.normal={};Jm.prototype.property={};Jm.prototype.space=void 0;function WH(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Jm(n,r,e)}function JA(t){return t.toLowerCase()}class Zr{constructor(e,n){this.attribute=n,this.property=e}}Zr.prototype.attribute="";Zr.prototype.booleanish=!1;Zr.prototype.boolean=!1;Zr.prototype.commaOrSpaceSeparated=!1;Zr.prototype.commaSeparated=!1;Zr.prototype.defined=!1;Zr.prototype.mustUseProperty=!1;Zr.prototype.number=!1;Zr.prototype.overloadedBoolean=!1;Zr.prototype.property="";Zr.prototype.spaceSeparated=!1;Zr.prototype.space=void 0;let Zwe=0;const Je=jc(),ln=jc(),QA=jc(),ge=jc(),Dt=jc(),Ch=jc(),xi=jc();function jc(){return 2**++Zwe}const ZA=Object.freeze(Object.defineProperty({__proto__:null,boolean:Je,booleanish:ln,commaOrSpaceSeparated:xi,commaSeparated:Ch,number:ge,overloadedBoolean:QA,spaceSeparated:Dt},Symbol.toStringTag,{value:"Module"})),h_=Object.keys(ZA);class aR extends Zr{constructor(e,n,r,i){let s=-1;if(super(e,n),r5(this,"space",i),typeof r=="number")for(;++s<h_.length;){const o=h_[s];r5(this,h_[s],(r&ZA[o])===ZA[o])}}}aR.prototype.defined=!0;function r5(t,e,n){n&&(t[e]=n)}function rf(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new aR(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[JA(r)]=r,n[JA(s.attribute)]=r}return new Jm(e,n,t.space)}const GH=rf({properties:{ariaActiveDescendant:null,ariaAtomic:ln,ariaAutoComplete:null,ariaBusy:ln,ariaChecked:ln,ariaColCount:ge,ariaColIndex:ge,ariaColSpan:ge,ariaControls:Dt,ariaCurrent:null,ariaDescribedBy:Dt,ariaDetails:null,ariaDisabled:ln,ariaDropEffect:Dt,ariaErrorMessage:null,ariaExpanded:ln,ariaFlowTo:Dt,ariaGrabbed:ln,ariaHasPopup:null,ariaHidden:ln,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Dt,ariaLevel:ge,ariaLive:null,ariaModal:ln,ariaMultiLine:ln,ariaMultiSelectable:ln,ariaOrientation:null,ariaOwns:Dt,ariaPlaceholder:null,ariaPosInSet:ge,ariaPressed:ln,ariaReadOnly:ln,ariaRelevant:null,ariaRequired:ln,ariaRoleDescription:Dt,ariaRowCount:ge,ariaRowIndex:ge,ariaRowSpan:ge,ariaSelected:ln,ariaSetSize:ge,ariaSort:null,ariaValueMax:ge,ariaValueMin:ge,ariaValueNow:ge,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function KH(t,e){return e in t?t[e]:e}function YH(t,e){return KH(t,e.toLowerCase())}const e1e=rf({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ch,acceptCharset:Dt,accessKey:Dt,action:null,allow:null,allowFullScreen:Je,allowPaymentRequest:Je,allowUserMedia:Je,alt:null,as:null,async:Je,autoCapitalize:null,autoComplete:Dt,autoFocus:Je,autoPlay:Je,blocking:Dt,capture:null,charSet:null,checked:Je,cite:null,className:Dt,cols:ge,colSpan:null,content:null,contentEditable:ln,controls:Je,controlsList:Dt,coords:ge|Ch,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Je,defer:Je,dir:null,dirName:null,disabled:Je,download:QA,draggable:ln,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Je,formTarget:null,headers:Dt,height:ge,hidden:QA,high:ge,href:null,hrefLang:null,htmlFor:Dt,httpEquiv:Dt,id:null,imageSizes:null,imageSrcSet:null,inert:Je,inputMode:null,integrity:null,is:null,isMap:Je,itemId:null,itemProp:Dt,itemRef:Dt,itemScope:Je,itemType:Dt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Je,low:ge,manifest:null,max:null,maxLength:ge,media:null,method:null,min:null,minLength:ge,multiple:Je,muted:Je,name:null,nonce:null,noModule:Je,noValidate:Je,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Je,optimum:ge,pattern:null,ping:Dt,placeholder:null,playsInline:Je,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Je,referrerPolicy:null,rel:Dt,required:Je,reversed:Je,rows:ge,rowSpan:ge,sandbox:Dt,scope:null,scoped:Je,seamless:Je,selected:Je,shadowRootClonable:Je,shadowRootDelegatesFocus:Je,shadowRootMode:null,shape:null,size:ge,sizes:null,slot:null,span:ge,spellCheck:ln,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ge,step:null,style:null,tabIndex:ge,target:null,title:null,translate:null,type:null,typeMustMatch:Je,useMap:null,value:ln,width:ge,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Dt,axis:null,background:null,bgColor:null,border:ge,borderColor:null,bottomMargin:ge,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Je,declare:Je,event:null,face:null,frame:null,frameBorder:null,hSpace:ge,leftMargin:ge,link:null,longDesc:null,lowSrc:null,marginHeight:ge,marginWidth:ge,noResize:Je,noHref:Je,noShade:Je,noWrap:Je,object:null,profile:null,prompt:null,rev:null,rightMargin:ge,rules:null,scheme:null,scrolling:ln,standby:null,summary:null,text:null,topMargin:ge,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ge,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Je,disableRemotePlayback:Je,prefix:null,property:null,results:ge,security:null,unselectable:null},space:"html",transform:YH}),t1e=rf({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:xi,accentHeight:ge,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ge,amplitude:ge,arabicForm:null,ascent:ge,attributeName:null,attributeType:null,azimuth:ge,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ge,by:null,calcMode:null,capHeight:ge,className:Dt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ge,diffuseConstant:ge,direction:null,display:null,dur:null,divisor:ge,dominantBaseline:null,download:Je,dx:null,dy:null,edgeMode:null,editable:null,elevation:ge,enableBackground:null,end:null,event:null,exponent:ge,externalResourcesRequired:null,fill:null,fillOpacity:ge,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ch,g2:Ch,glyphName:Ch,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ge,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ge,horizOriginX:ge,horizOriginY:ge,id:null,ideographic:ge,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ge,k:ge,k1:ge,k2:ge,k3:ge,k4:ge,kernelMatrix:xi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ge,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ge,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ge,overlineThickness:ge,paintOrder:null,panose1:null,path:null,pathLength:ge,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Dt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ge,pointsAtY:ge,pointsAtZ:ge,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:xi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:xi,rev:xi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:xi,requiredFeatures:xi,requiredFonts:xi,requiredFormats:xi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ge,specularExponent:ge,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ge,strikethroughThickness:ge,string:null,stroke:null,strokeDashArray:xi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ge,strokeOpacity:ge,strokeWidth:null,style:null,surfaceScale:ge,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:xi,tabIndex:ge,tableValues:null,target:null,targetX:ge,targetY:ge,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:xi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ge,underlineThickness:ge,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ge,values:null,vAlphabetic:ge,vMathematical:ge,vectorEffect:null,vHanging:ge,vIdeographic:ge,version:null,vertAdvY:ge,vertOriginX:ge,vertOriginY:ge,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ge,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:KH}),XH=rf({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),JH=rf({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:YH}),QH=rf({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),n1e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},r1e=/[A-Z]/g,i5=/-[a-z]/g,i1e=/^data[-\w.:]+$/i;function ZH(t,e){const n=JA(e);let r=e,i=Zr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&i1e.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(i5,o1e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!i5.test(s)){let o=s.replace(r1e,s1e);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=aR}return new i(r,e)}function s1e(t){return"-"+t.toLowerCase()}function o1e(t){return t.charAt(1).toUpperCase()}const eq=WH([GH,e1e,XH,JH,QH],"html"),Qm=WH([GH,t1e,XH,JH,QH],"svg");function tq(t){return t.join(" ").trim()}var Vu={},f_,s5;function a1e(){if(s5)return f_;s5=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,h="/",f="*",d="",m="comment",y="declaration";f_=function(w,_){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];_=_||{};var S=1,A=1;function k(X){var G=X.match(e);G&&(S+=G.length);var ie=X.lastIndexOf(c);A=~ie?X.length-ie:A+X.length}function P(){var X={line:S,column:A};return function(G){return G.position=new M(X),N(),G}}function M(X){this.start=X,this.end={line:S,column:A},this.source=_.source}M.prototype.content=w;function O(X){var G=new Error(_.source+":"+S+":"+A+": "+X);if(G.reason=X,G.filename=_.source,G.line=S,G.column=A,G.source=w,!_.silent)throw G}function L(X){var G=X.exec(w);if(G){var ie=G[0];return k(ie),w=w.slice(ie.length),G}}function N(){L(n)}function z(X){var G;for(X=X||[];G=j();)G!==!1&&X.push(G);return X}function j(){var X=P();if(!(h!=w.charAt(0)||f!=w.charAt(1))){for(var G=2;d!=w.charAt(G)&&(f!=w.charAt(G)||h!=w.charAt(G+1));)++G;if(G+=2,d===w.charAt(G-1))return O("End of comment missing");var ie=w.slice(2,G-2);return A+=2,k(ie),w=w.slice(G),A+=2,X({type:m,comment:ie})}}function H(){var X=P(),G=L(r);if(G){if(j(),!L(i))return O("property missing ':'");var ie=L(s),F=X({type:y,property:v(G[0].replace(t,d)),value:ie?v(ie[0].replace(t,d)):d});return L(o),F}}function W(){var X=[];z(X);for(var G;G=H();)G!==!1&&(X.push(G),z(X));return X}return N(),W()};function v(w){return w?w.replace(a,d):d}return f_}var o5;function l1e(){if(o5)return Vu;o5=1;var t=Vu&&Vu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.default=n;var e=t(a1e());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,e.default)(r),a=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var h=c.property,f=c.value;a?i(h,f,c):f&&(s=s||{},s[h]=f)}}),s}return Vu}var Nd={},a5;function c1e(){if(a5)return Nd;a5=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(h){return!h||n.test(h)||t.test(h)},o=function(h,f){return f.toUpperCase()},a=function(h,f){return"".concat(f,"-")},c=function(h,f){return f===void 0&&(f={}),s(h)?h:(h=h.toLowerCase(),f.reactCompat?h=h.replace(i,a):h=h.replace(r,a),h.replace(e,o))};return Nd.camelCase=c,Nd}var Bd,l5;function u1e(){if(l5)return Bd;l5=1;var t=Bd&&Bd.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(l1e()),n=c1e();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,c){a&&c&&(o[(0,n.camelCase)(a,s)]=c)}),o}return r.default=r,Bd=r,Bd}var h1e=u1e();const f1e=Mc(h1e),nq=rq("end"),lR=rq("start");function rq(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function d1e(t){const e=lR(t),n=nq(t);if(e&&n)return{start:e,end:n}}function Np(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?c5(t.position):"start"in t||"end"in t?c5(t):"line"in t||"column"in t?ek(t):""}function ek(t){return u5(t&&t.line)+":"+u5(t&&t.column)}function c5(t){return ek(t&&t.start)+"-"+ek(t&&t.end)}function u5(t){return t&&typeof t=="number"?t:1}class xr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=Np(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}xr.prototype.file="";xr.prototype.name="";xr.prototype.reason="";xr.prototype.message="";xr.prototype.stack="";xr.prototype.column=void 0;xr.prototype.line=void 0;xr.prototype.ancestors=void 0;xr.prototype.cause=void 0;xr.prototype.fatal=void 0;xr.prototype.place=void 0;xr.prototype.ruleId=void 0;xr.prototype.source=void 0;const cR={}.hasOwnProperty,p1e=new Map,m1e=/[A-Z]/g,g1e=new Set(["table","tbody","thead","tfoot","tr"]),y1e=new Set(["td","th"]),iq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=A1e(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=C1e(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Qm:eq,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=oq(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function oq(t,e,n){if(e.type==="element")return b1e(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return v1e(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return w1e(t,e,n);if(e.type==="mdxjsEsm")return x1e(t,e);if(e.type==="root")return S1e(t,e,n);if(e.type==="text")return _1e(t,e)}function b1e(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Qm,t.schema=i),t.ancestors.push(e);const s=lq(t,e.tagName,!1),o=k1e(t,e);let a=hR(t,e);return g1e.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!uw(c):!0})),aq(t,o,s,e),uR(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function v1e(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}wm(t,e.position)}function x1e(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);wm(t,e.position)}function w1e(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Qm,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:lq(t,e.name,!0),o=E1e(t,e),a=hR(t,e);return aq(t,o,s,e),uR(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function S1e(t,e,n){const r={};return uR(r,hR(t,e)),t.create(e,t.Fragment,r,n)}function _1e(t,e){return e.value}function aq(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function uR(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function C1e(t,e,n){return r;function r(i,s,o,a){const h=Array.isArray(o.children)?n:e;return a?h(s,o,a):h(s,o)}}function A1e(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),c=lR(r);return e(i,s,o,a,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function k1e(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&cR.call(e.properties,i)){const s=T1e(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&y1e.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function E1e(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else wm(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else wm(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function hR(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:p1e;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const h=i.get(c)||0;o=c+"-"+h,i.set(c,h+1)}}const a=oq(t,s,o);a!==void 0&&n.push(a)}return n}function T1e(t,e,n){const r=ZH(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?qH(n):tq(n)),r.property==="style"){let i=typeof n=="object"?n:R1e(t,String(n));return t.stylePropertyNameCase==="css"&&(i=M1e(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?n1e[r.property]||r.property:r.attribute,n]}}function R1e(t,e){try{return f1e(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new xr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=iq+"#cannot-parse-style-attribute",i}}function lq(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=t5(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=t5(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return cR.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);wm(t)}function wm(t,e){const n=new xr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=iq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function M1e(t){const e={};let n;for(n in t)cR.call(t,n)&&(e[O1e(n)]=t[n]);return e}function O1e(t){let e=t.replace(m1e,P1e);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function P1e(t){return"-"+t.toLowerCase()}const d_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},D1e={tokenize:L1e};function L1e(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),ut(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return je(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const I1e={tokenize:N1e},h5={tokenize:B1e};function N1e(t){const e=this,n=[];let r=0,i,s,o;return a;function a(k){if(r<n.length){const P=n[r];return e.containerState=P[1],t.attempt(P[0].continuation,c,h)(k)}return h(k)}function c(k){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&A();const P=e.events.length;let M=P,O;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){O=e.events[M][1].end;break}S(r);let L=P;for(;L<e.events.length;)e.events[L][1].end={...O},L++;return ki(e.events,M+1,0,e.events.slice(P)),e.events.length=L,h(k)}return a(k)}function h(k){if(r===n.length){if(!i)return m(k);if(i.currentConstruct&&i.currentConstruct.concrete)return v(k);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(h5,f,d)(k)}function f(k){return i&&A(),S(r),m(k)}function d(k){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,v(k)}function m(k){return e.containerState={},t.attempt(h5,y,v)(k)}function y(k){return r++,n.push([e.currentConstruct,e.containerState]),m(k)}function v(k){if(k===null){i&&A(),S(0),t.consume(k);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),w(k)}function w(k){if(k===null){_(t.exit("chunkFlow"),!0),S(0),t.consume(k);return}return je(k)?(t.consume(k),_(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(k),w)}function _(k,P){const M=e.sliceStream(k);if(P&&M.push(null),k.previous=s,s&&(s.next=k),s=k,i.defineSkip(k.start),i.write(M),e.parser.lazy[k.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<o&&(!i.events[O][1].end||i.events[O][1].end.offset>o))return;const L=e.events.length;let N=L,z,j;for(;N--;)if(e.events[N][0]==="exit"&&e.events[N][1].type==="chunkFlow"){if(z){j=e.events[N][1].end;break}z=!0}for(S(r),O=L;O<e.events.length;)e.events[O][1].end={...j},O++;ki(e.events,N+1,0,e.events.slice(L)),e.events.length=O}}function S(k){let P=n.length;for(;P-- >k;){const M=n[P];e.containerState=M[1],M[0].exit.call(e,t)}n.length=k}function A(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function B1e(t,e,n){return ut(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const j1e={tokenize:$1e};function $1e(t){const e=this,n=t.attempt(Xm,r,t.attempt(this.parser.constructs.flowInitial,i,ut(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Pxe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const V1e={resolveAll:uq()},F1e=cq("string"),z1e=cq("text");function cq(t){return{resolveAll:uq(t==="text"?U1e:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(f){return h(f)?s(f):a(f)}function a(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return h(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function h(f){if(f===null)return!0;const d=i[f];let m=-1;if(d)for(;++m<d.length;){const y=d[m];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function uq(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function U1e(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,c;for(;s--;){const h=i[s];if(typeof h=="string"){for(o=h.length;h.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(h===-2)c=!0,a++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const h={type:n===t.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const H1e={42:Ur,43:Ur,45:Ur,48:Ur,49:Ur,50:Ur,51:Ur,52:Ur,53:Ur,54:Ur,55:Ur,56:Ur,57:Ur,62:jH},q1e={91:Bxe},W1e={[-2]:c_,[-1]:c_,32:c_},G1e={35:Uxe,42:Db,45:[Z4,Db],60:Gxe,61:Z4,95:Db,96:J4,126:J4},K1e={38:VH,92:$H},Y1e={[-5]:u_,[-4]:u_,[-3]:u_,33:hwe,38:VH,42:XA,60:[dxe,ewe],91:dwe,92:[Fxe,$H],93:oR,95:XA,96:kxe},X1e={null:[XA,V1e]},J1e={null:[42,95]},Q1e={null:[]},Z1e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:J1e,contentInitial:q1e,disable:Q1e,document:H1e,flow:G1e,flowInitial:W1e,insideSpan:X1e,string:K1e,text:Y1e},Symbol.toStringTag,{value:"Module"}));function eSe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const c={attempt:L(M),check:L(O),consume:A,enter:k,exit:P,interrupt:L(O,{interrupt:!0})},h={code:null,containerState:{},defineSkip:w,events:[],now:v,parser:t,previous:null,sliceSerialize:m,sliceStream:y,write:d};let f=e.tokenize.call(h,c);return e.resolveAll&&s.push(e),h;function d(H){return o=qi(o,H),_(),o[o.length-1]!==null?[]:(N(e,0),h.events=cw(s,h.events,h),h.events)}function m(H,W){return nSe(y(H),W)}function y(H){return tSe(o,H)}function v(){const{_bufferIndex:H,_index:W,line:X,column:G,offset:ie}=r;return{_bufferIndex:H,_index:W,line:X,column:G,offset:ie}}function w(H){i[H.line]=H.column,j()}function _(){let H;for(;r._index<o.length;){const W=o[r._index];if(typeof W=="string")for(H=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===H&&r._bufferIndex<W.length;)S(W.charCodeAt(r._bufferIndex));else S(W)}}function S(H){f=f(H)}function A(H){je(H)?(r.line++,r.column=1,r.offset+=H===-3?2:1,j()):H!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=H}function k(H,W){const X=W||{};return X.type=H,X.start=v(),h.events.push(["enter",X,h]),a.push(X),X}function P(H){const W=a.pop();return W.end=v(),h.events.push(["exit",W,h]),W}function M(H,W){N(H,W.from)}function O(H,W){W.restore()}function L(H,W){return X;function X(G,ie,F){let Y,q,se,T;return Array.isArray(G)?ue(G):"tokenize"in G?ue([G]):Z(G);function Z(ye){return ke;function ke(ze){const Ot=ze!==null&&ye[ze],Kt=ze!==null&&ye.null,Yt=[...Array.isArray(Ot)?Ot:Ot?[Ot]:[],...Array.isArray(Kt)?Kt:Kt?[Kt]:[]];return ue(Yt)(ze)}}function ue(ye){return Y=ye,q=0,ye.length===0?F:I(ye[q])}function I(ye){return ke;function ke(ze){return T=z(),se=ye,ye.partial||(h.currentConstruct=ye),ye.name&&h.parser.constructs.disable.null.includes(ye.name)?Ee():ye.tokenize.call(W?Object.assign(Object.create(h),W):h,c,pe,Ee)(ze)}}function pe(ye){return H(se,T),ie}function Ee(ye){return T.restore(),++q<Y.length?I(Y[q]):F}}}function N(H,W){H.resolveAll&&!s.includes(H)&&s.push(H),H.resolve&&ki(h.events,W,h.events.length-W,H.resolve(h.events.slice(W),h)),H.resolveTo&&(h.events=H.resolveTo(h.events,h))}function z(){const H=v(),W=h.previous,X=h.currentConstruct,G=h.events.length,ie=Array.from(a);return{from:G,restore:F};function F(){r=H,h.previous=W,h.currentConstruct=X,h.events.length=G,a=ie,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function tSe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function nSe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function rSe(t){const r={constructs:RH([Z1e,...(t||{}).extensions||[]]),content:i(D1e),defined:[],document:i(I1e),flow:i(j1e),lazy:{},string:i(F1e),text:i(z1e)};return r;function i(s){return o;function o(a){return eSe(r,s,a)}}}function iSe(t){for(;!FH(t););return t}const f5=/[\0\t\n\r]/g;function sSe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const c=[];let h,f,d,m,y;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(f5.lastIndex=d,h=f5.exec(s),m=h&&h.index!==void 0?h.index:s.length,y=s.charCodeAt(m),!h){e=s.slice(d);break}if(y===10&&d===m&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<m&&(c.push(s.slice(d,m)),t+=m-d),y){case 0:{c.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,c.push(-2);t++<f;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}d=m+1}return a&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const hq={}.hasOwnProperty;function oSe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),aSe(n)(iSe(rSe(n).document().write(sSe()(t,e,!0))))}function aSe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Al),autolinkProtocol:z,autolinkEmail:z,atxHeading:s(_o),blockQuote:s(Kt),characterEscape:z,characterReference:z,codeFenced:s(Yt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Yt,o),codeText:s(Zn,o),codeTextData:z,data:z,codeFlowValue:z,definition:s(er),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ei),hardBreakEscape:s(rs),hardBreakTrailing:s(rs),htmlFlow:s(tr,o),htmlFlowData:z,htmlText:s(tr,o),htmlTextData:z,image:s(of),label:o,link:s(Al),listItem:s(Ms),listItemValue:m,listOrdered:s(Rs,d),listUnordered:s(Rs),paragraph:s($c),reference:I,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(_o),strong:s(kl),thematicBreak:s(aa)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:Ot,autolinkProtocol:ze,blockQuote:c(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:Ee,characterReferenceMarkerNumeric:Ee,characterReferenceValue:ye,characterReference:ke,codeFenced:c(_),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:v,codeFlowValue:j,codeIndented:c(S),codeText:c(ie),codeTextData:j,data:j,definition:c(),definitionDestinationString:P,definitionLabelString:A,definitionTitleString:k,emphasis:c(),hardBreakEscape:c(W),hardBreakTrailing:c(W),htmlFlow:c(X),htmlFlowData:j,htmlText:c(G),htmlTextData:j,image:c(Y),label:se,labelText:q,lineEnding:H,link:c(F),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:pe,resourceDestinationString:T,resourceTitleString:Z,resource:ue,setextHeading:c(N),setextHeadingLineSequence:L,setextHeadingText:O,strong:c(),thematicBreak:c()}};fq(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(oe){let me={type:"root",children:[]};const De={stack:[me],tokenStack:[],config:e,enter:a,exit:h,buffer:o,resume:f,data:n},Be=[];let gt=-1;for(;++gt<oe.length;)if(oe[gt][1].type==="listOrdered"||oe[gt][1].type==="listUnordered")if(oe[gt][0]==="enter")Be.push(gt);else{const Sr=Be.pop();gt=i(oe,Sr,gt)}for(gt=-1;++gt<oe.length;){const Sr=e[oe[gt][0]];hq.call(Sr,oe[gt][1].type)&&Sr[oe[gt][1].type].call(Object.assign({sliceSerialize:oe[gt][2].sliceSerialize},De),oe[gt][1])}if(De.tokenStack.length>0){const Sr=De.tokenStack[De.tokenStack.length-1];(Sr[1]||d5).call(De,void 0,Sr[0])}for(me.position={start:Ga(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:Ga(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},gt=-1;++gt<e.transforms.length;)me=e.transforms[gt](me)||me;return me}function i(oe,me,De){let Be=me-1,gt=-1,Sr=!1,is,nr,ti,_r;for(;++Be<=De;){const rn=oe[Be];switch(rn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{rn[0]==="enter"?gt++:gt--,_r=void 0;break}case"lineEndingBlank":{rn[0]==="enter"&&(is&&!_r&&!gt&&!ti&&(ti=Be),_r=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_r=void 0}if(!gt&&rn[0]==="enter"&&rn[1].type==="listItemPrefix"||gt===-1&&rn[0]==="exit"&&(rn[1].type==="listUnordered"||rn[1].type==="listOrdered")){if(is){let rr=Be;for(nr=void 0;rr--;){const jn=oe[rr];if(jn[1].type==="lineEnding"||jn[1].type==="lineEndingBlank"){if(jn[0]==="exit")continue;nr&&(oe[nr][1].type="lineEndingBlank",Sr=!0),jn[1].type="lineEnding",nr=rr}else if(!(jn[1].type==="linePrefix"||jn[1].type==="blockQuotePrefix"||jn[1].type==="blockQuotePrefixWhitespace"||jn[1].type==="blockQuoteMarker"||jn[1].type==="listItemIndent"))break}ti&&(!nr||ti<nr)&&(is._spread=!0),is.end=Object.assign({},nr?oe[nr][1].start:rn[1].end),oe.splice(nr||Be,0,["exit",is,rn[2]]),Be++,De++}if(rn[1].type==="listItemPrefix"){const rr={type:"listItem",_spread:!1,start:Object.assign({},rn[1].start),end:void 0};is=rr,oe.splice(Be,0,["enter",rr,rn[2]]),Be++,De++,ti=void 0,_r=!0}}}return oe[me][1]._spread=Sr,De}function s(oe,me){return De;function De(Be){a.call(this,oe(Be),Be),me&&me.call(this,Be)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(oe,me,De){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([me,De||void 0]),oe.position={start:Ga(me.start),end:void 0}}function c(oe){return me;function me(De){oe&&oe.call(this,De),h.call(this,De)}}function h(oe,me){const De=this.stack.pop(),Be=this.tokenStack.pop();if(Be)Be[0].type!==oe.type&&(me?me.call(this,oe,Be[0]):(Be[1]||d5).call(this,oe,Be[0]));else throw new Error("Cannot close `"+oe.type+"` ("+Np({start:oe.start,end:oe.end})+"): its not open");De.position.end=Ga(oe.end)}function f(){return nR(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(oe){if(this.data.expectingFirstListItemValue){const me=this.stack[this.stack.length-2];me.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function y(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.lang=oe}function v(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.meta=oe}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function _(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe.replace(/(\r?\n|\r)$/g,"")}function A(oe){const me=this.resume(),De=this.stack[this.stack.length-1];De.label=me,De.identifier=bs(this.sliceSerialize(oe)).toLowerCase()}function k(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.title=oe}function P(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.url=oe}function M(oe){const me=this.stack[this.stack.length-1];if(!me.depth){const De=this.sliceSerialize(oe).length;me.depth=De}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function L(oe){const me=this.stack[this.stack.length-1];me.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function z(oe){const De=this.stack[this.stack.length-1].children;let Be=De[De.length-1];(!Be||Be.type!=="text")&&(Be=Ri(),Be.position={start:Ga(oe.start),end:void 0},De.push(Be)),this.stack.push(Be)}function j(oe){const me=this.stack.pop();me.value+=this.sliceSerialize(oe),me.position.end=Ga(oe.end)}function H(oe){const me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const De=me.children[me.children.length-1];De.position.end=Ga(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(me.type)&&(z.call(this,oe),j.call(this,oe))}function W(){this.data.atHardBreak=!0}function X(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe}function G(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe}function ie(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.value=oe}function F(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=me,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function Y(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=me,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function q(oe){const me=this.sliceSerialize(oe),De=this.stack[this.stack.length-2];De.label=Bve(me),De.identifier=bs(me).toLowerCase()}function se(){const oe=this.stack[this.stack.length-1],me=this.resume(),De=this.stack[this.stack.length-1];if(this.data.inReference=!0,De.type==="link"){const Be=oe.children;De.children=Be}else De.alt=me}function T(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.url=oe}function Z(){const oe=this.resume(),me=this.stack[this.stack.length-1];me.title=oe}function ue(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function pe(oe){const me=this.resume(),De=this.stack[this.stack.length-1];De.label=me,De.identifier=bs(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function Ee(oe){this.data.characterReferenceType=oe.type}function ye(oe){const me=this.sliceSerialize(oe),De=this.data.characterReferenceType;let Be;De?(Be=TH(me,De==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Be=iR(me);const gt=this.stack[this.stack.length-1];gt.value+=Be}function ke(oe){const me=this.stack.pop();me.position.end=Ga(oe.end)}function ze(oe){j.call(this,oe);const me=this.stack[this.stack.length-1];me.url=this.sliceSerialize(oe)}function Ot(oe){j.call(this,oe);const me=this.stack[this.stack.length-1];me.url="mailto:"+this.sliceSerialize(oe)}function Kt(){return{type:"blockquote",children:[]}}function Yt(){return{type:"code",lang:null,meta:null,value:""}}function Zn(){return{type:"inlineCode",value:""}}function er(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ei(){return{type:"emphasis",children:[]}}function _o(){return{type:"heading",depth:0,children:[]}}function rs(){return{type:"break"}}function tr(){return{type:"html",value:""}}function of(){return{type:"image",title:null,url:"",alt:null}}function Al(){return{type:"link",title:null,url:"",children:[]}}function Rs(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function Ms(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function $c(){return{type:"paragraph",children:[]}}function kl(){return{type:"strong",children:[]}}function Ri(){return{type:"text",value:""}}function aa(){return{type:"thematicBreak"}}}function Ga(t){return{line:t.line,column:t.column,offset:t.offset}}function fq(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?fq(t,r):lSe(t,r)}}function lSe(t,e){let n;for(n in e)if(hq.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function d5(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Np({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Np({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Np({start:e.start,end:e.end})+") is still open")}function cSe(t){const e=this;e.parser=n;function n(r){return oSe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function uSe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function hSe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function fSe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function dSe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pSe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mSe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=nf(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,h),t.applyData(e,h)}function gSe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ySe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function dq(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function bSe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return dq(t,e);const i={src:nf(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function vSe(t,e){const n={src:nf(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function xSe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function wSe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return dq(t,e);const i={href:nf(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function SSe(t,e){const n={href:nf(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function _Se(t,e,n){const r=t.all(e),i=n?CSe(n):pq(e),s={},o=[];if(typeof e.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const f=r[a];(i||a!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?o.push(...f.children):o.push(f)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,h),t.applyData(e,h)}function CSe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=pq(n[r])}return e}function pq(t){const e=t.spread;return e??t.children.length>1}function ASe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function kSe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ESe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function TSe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RSe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=lR(e.children[1]),c=nq(e.children[e.children.length-1]);a&&c&&(o.position={start:a,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function MSe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let c=-1;const h=[];for(;++c<a;){const d=e.children[c],m={},y=o?o[c]:void 0;y&&(m.align=y);let v={type:"element",tagName:s,properties:m,children:[]};d&&(v.children=t.all(d),t.patch(d,v),v=t.applyData(d,v)),h.push(v)}const f={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,f),t.applyData(e,f)}function OSe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const p5=9,m5=32;function PSe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(g5(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(g5(e.slice(i),i>0,!1)),s.join("")}function g5(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===p5||s===m5;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===p5||s===m5;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function DSe(t,e){const n={type:"text",value:PSe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function LSe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const ISe={blockquote:uSe,break:hSe,code:fSe,delete:dSe,emphasis:pSe,footnoteReference:mSe,heading:gSe,html:ySe,imageReference:bSe,image:vSe,inlineCode:xSe,linkReference:wSe,link:SSe,listItem:_Se,list:ASe,paragraph:kSe,root:ESe,strong:TSe,table:RSe,tableCell:OSe,tableRow:MSe,text:DSe,thematicBreak:LSe,toml:$y,yaml:$y,definition:$y,footnoteDefinition:$y};function $y(){}const mq=-1,hw=0,Bp=1,Hv=2,fR=3,dR=4,pR=5,mR=6,gq=7,yq=8,y5=typeof self=="object"?self:globalThis,NSe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case hw:case mq:return n(o,i);case Bp:{const a=n([],i);for(const c of o)a.push(r(c));return a}case Hv:{const a=n({},i);for(const[c,h]of o)a[r(c)]=r(h);return a}case fR:return n(new Date(o),i);case dR:{const{source:a,flags:c}=o;return n(new RegExp(a,c),i)}case pR:{const a=n(new Map,i);for(const[c,h]of o)a.set(r(c),r(h));return a}case mR:{const a=n(new Set,i);for(const c of o)a.add(r(c));return a}case gq:{const{name:a,message:c}=o;return n(new y5[a](c),i)}case yq:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new y5[s](o),i)};return r},b5=t=>NSe(new Map,t)(0),Fu="",{toString:BSe}={},{keys:jSe}=Object,jd=t=>{const e=typeof t;if(e!=="object"||!t)return[hw,e];const n=BSe.call(t).slice(8,-1);switch(n){case"Array":return[Bp,Fu];case"Object":return[Hv,Fu];case"Date":return[fR,Fu];case"RegExp":return[dR,Fu];case"Map":return[pR,Fu];case"Set":return[mR,Fu];case"DataView":return[Bp,n]}return n.includes("Array")?[Bp,n]:n.includes("Error")?[gq,n]:[Hv,n]},Vy=([t,e])=>t===hw&&(e==="function"||e==="symbol"),$Se=(t,e,n,r)=>{const i=(o,a)=>{const c=r.push(o)-1;return n.set(a,c),c},s=o=>{if(n.has(o))return n.get(o);let[a,c]=jd(o);switch(a){case hw:{let f=o;switch(c){case"bigint":a=yq,f=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return i([mq],o)}return i([a,f],o)}case Bp:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),i([c,[...m]],o)}const f=[],d=i([a,f],o);for(const m of o)f.push(s(m));return d}case Hv:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],d=i([a,f],o);for(const m of jSe(o))(t||!Vy(jd(o[m])))&&f.push([s(m),s(o[m])]);return d}case fR:return i([a,o.toISOString()],o);case dR:{const{source:f,flags:d}=o;return i([a,{source:f,flags:d}],o)}case pR:{const f=[],d=i([a,f],o);for(const[m,y]of o)(t||!(Vy(jd(m))||Vy(jd(y))))&&f.push([s(m),s(y)]);return d}case mR:{const f=[],d=i([a,f],o);for(const m of o)(t||!Vy(jd(m)))&&f.push(s(m));return d}}const{message:h}=o;return i([a,{name:c,message:h}],o)};return s},v5=(t,{json:e,lossy:n}={})=>{const r=[];return $Se(!(e||n),!!e,new Map,r)(t),r},qv=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?b5(v5(t,e)):structuredClone(t):(t,e)=>b5(v5(t,e));function VSe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function FSe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function zSe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||VSe,r=t.options.footnoteBackLabel||FSe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[c]);if(!h)continue;const f=t.all(h),d=String(h.identifier).toUpperCase(),m=nf(d.toLowerCase());let y=0;const v=[],w=t.footnoteCounts.get(d);for(;w!==void 0&&++y<=w;){v.length>0&&v.push({type:"text",value:" "});let A=typeof n=="string"?n:n(c,y);typeof A=="string"&&(A={type:"text",value:A}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(A)?A:[A]})}const _=f[f.length-1];if(_&&_.type==="element"&&_.tagName==="p"){const A=_.children[_.children.length-1];A&&A.type==="text"?A.value+=" ":_.children.push({type:"text",value:" "}),_.children.push(...v)}else f.push(...v);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(f,!0)};t.patch(h,S),a.push(S)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...qv(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const tk={}.hasOwnProperty,USe={};function HSe(t,e){const n=e||USe,r=new Map,i=new Map,s=new Map,o={...ISe,...n.handlers},a={all:h,applyData:WSe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:qSe,wrap:KSe};return tR(t,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:i,m=String(f.identifier).toUpperCase();d.has(m)||d.set(m,f)}}),a;function c(f,d){const m=f.type,y=a.handlers[m];if(tk.call(a.handlers,m)&&y)return y(a,f,d);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in f){const{children:w,..._}=f,S=qv(_);return S.children=a.all(f),S}return qv(f)}return(a.options.unknownHandler||GSe)(a,f,d)}function h(f){const d=[];if("children"in f){const m=f.children;let y=-1;for(;++y<m.length;){const v=a.one(m[y],f);if(v){if(y&&m[y-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=x5(v.value)),!Array.isArray(v)&&v.type==="element")){const w=v.children[0];w&&w.type==="text"&&(w.value=x5(w.value))}Array.isArray(v)?d.push(...v):d.push(v)}}}return d}}function qSe(t,e){t.position&&(e.position=d1e(t))}function WSe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,qv(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function GSe(t,e){const n=e.data||{},r="value"in e&&!(tk.call(n,"hProperties")||tk.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function KSe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function x5(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function w5(t,e){const n=HSe(t,e),r=n.one(t,void 0),i=zSe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function YSe(t,e){return t&&"run"in t?async function(n,r){const i=w5(n,{file:r,...e});await t.run(i,r)}:function(n,r){return w5(n,{file:r,...t||e})}}function S5(t){if(t)throw t}var p_,_5;function XSe(){if(_5)return p_;_5=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},s=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var f=t.call(h,"constructor"),d=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!f&&!d)return!1;var m;for(m in h);return typeof m>"u"||t.call(h,m)},o=function(h,f){n&&f.name==="__proto__"?n(h,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):h[f.name]=f.newValue},a=function(h,f){if(f==="__proto__")if(t.call(h,f)){if(r)return r(h,f).value}else return;return h[f]};return p_=function c(){var h,f,d,m,y,v,w=arguments[0],_=1,S=arguments.length,A=!1;for(typeof w=="boolean"&&(A=w,w=arguments[1]||{},_=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});_<S;++_)if(h=arguments[_],h!=null)for(f in h)d=a(w,f),m=a(h,f),w!==m&&(A&&m&&(s(m)||(y=i(m)))?(y?(y=!1,v=d&&i(d)?d:[]):v=d&&s(d)?d:{},o(w,{name:f,newValue:c(A,v,m)})):typeof m<"u"&&o(w,{name:f,newValue:m}));return w},p_}var JSe=XSe();const m_=Mc(JSe);function nk(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function QSe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(c,...h){const f=t[++s];let d=-1;if(c){o(c);return}for(;++d<i.length;)(h[d]===null||h[d]===void 0)&&(h[d]=i[d]);i=h,f?ZSe(f,a)(...h):o(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function ZSe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let c;a&&o.push(i);try{c=t.apply(this,o)}catch(h){const f=h;if(a&&n)throw f;return i(f)}a||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Ks={basename:e2e,dirname:t2e,extname:n2e,join:r2e,sep:"/"};function e2e(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Zm(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function t2e(t){if(Zm(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function n2e(t){Zm(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function r2e(...t){let e=-1,n;for(;++e<t.length;)Zm(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":i2e(n)}function i2e(t){Zm(t);const e=t.codePointAt(0)===47;let n=s2e(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function s2e(t,e){let n="",r=0,i=-1,s=0,o=-1,a,c;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Zm(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const o2e={cwd:a2e};function a2e(){return"/"}function rk(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function l2e(t){if(typeof t=="string")t=new URL(t);else if(!rk(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return c2e(t)}function c2e(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const g_=["history","path","basename","stem","extname","dirname"];class bq{constructor(e){let n;e?rk(e)?n={path:e}:typeof e=="string"||u2e(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":o2e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<g_.length;){const s=g_[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)g_.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ks.basename(this.path):void 0}set basename(e){b_(e,"basename"),y_(e,"basename"),this.path=Ks.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ks.dirname(this.path):void 0}set dirname(e){C5(this.basename,"dirname"),this.path=Ks.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ks.extname(this.path):void 0}set extname(e){if(y_(e,"extname"),C5(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ks.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){rk(e)&&(e=l2e(e)),b_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ks.basename(this.path,this.extname):void 0}set stem(e){b_(e,"stem"),y_(e,"stem"),this.path=Ks.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new xr(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function y_(t,e){if(t&&t.includes(Ks.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ks.sep+"`")}function b_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function C5(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function u2e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const h2e=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),f2e={}.hasOwnProperty;class gR extends h2e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QSe()}copy(){const e=new gR;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(m_(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(w_("data",this.frozen),this.namespace[e]=n,this):f2e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(w_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Fy(e),r=this.parser||this.Parser;return v_("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),v_("process",this.parser||this.Parser),x_("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Fy(e),c=r.parse(a);r.run(c,a,function(f,d,m){if(f||!d||!m)return h(f);const y=d,v=r.stringify(y,m);m2e(v)?m.value=v:m.result=v,h(f,m)});function h(f,d){f||!d?o(f):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),v_("processSync",this.parser||this.Parser),x_("processSync",this.compiler||this.Compiler),this.process(e,i),k5("processSync","process",n),r;function i(s,o){n=!0,S5(s),r=o}}run(e,n,r){A5(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const c=Fy(n);i.run(e,c,h);function h(f,d,m){const y=d||e;f?a(f):o?o(y):r(void 0,y,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),k5("runSync","run",r),i;function s(o,a){S5(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Fy(n),i=this.compiler||this.Compiler;return x_("stringify",i),A5(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(w_("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[f,...d]=h;c(f,d)}else o(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function o(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(h.plugins),h.settings&&(i.settings=m_(!0,i.settings,h.settings))}function a(h){let f=-1;if(h!=null)if(Array.isArray(h))for(;++f<h.length;){const d=h[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,f){let d=-1,m=-1;for(;++d<r.length;)if(r[d][0]===h){m=d;break}if(m===-1)r.push([h,...f]);else if(f.length>0){let[y,...v]=f;const w=r[m][1];nk(w)&&nk(y)&&(y=m_(!0,w,y)),r[m]=[h,y,...v]}}}}const d2e=new gR().freeze();function v_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function x_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function w_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function A5(t){if(!nk(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function k5(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Fy(t){return p2e(t)?t:new bq(t)}function p2e(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function m2e(t){return typeof t=="string"||g2e(t)}function g2e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const y2e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",E5=[],T5={allowDangerousHtml:!0},b2e=/^(https?|ircs?|mailto|xmpp)$/i,v2e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function x2e(t){const e=w2e(t),n=S2e(t);return _2e(e.runSync(e.parse(n),n),t)}function w2e(t){const e=t.rehypePlugins||E5,n=t.remarkPlugins||E5,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...T5}:T5;return d2e().use(cSe).use(n).use(YSe,r).use(e)}function S2e(t){const e=t.children||"",n=new bq;return typeof e=="string"&&(n.value=e),n}function _2e(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||C2e;for(const f of v2e)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+y2e+f.id,void 0);return tR(t,h),sq(t,{Fragment:C.Fragment,components:i,ignoreInvalidStyle:!0,jsx:C.jsx,jsxs:C.jsxs,passKeys:!0,passNode:!0});function h(f,d,m){if(f.type==="raw"&&m&&typeof d=="number")return o?m.children.splice(d,1):m.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let y;for(y in d_)if(Object.hasOwn(d_,y)&&Object.hasOwn(f.properties,y)){const v=f.properties[y],w=d_[y];(w===null||w.includes(f.tagName))&&(f.properties[y]=c(String(v||""),y,f))}}if(f.type==="element"){let y=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!y&&r&&typeof d=="number"&&(y=!r(f,d,m)),y&&m&&typeof d=="number")return a&&f.children?m.children.splice(d,1,...f.children):m.children.splice(d,1),d}}}function C2e(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||b2e.test(t.slice(0,e))?t:""}var A2e=(t,e)=>typeof t=="string"?t===e:JSON.stringify(t)===JSON.stringify(e),k2e=(t,e)=>{if(!t||!e)return!1;const n=r=>{const{position:i,data:s,...o}=r||{};return o};return JSON.stringify(n(t.properties))===JSON.stringify(n(e.properties))&&A2e(t.children,e.children)},yR=(t,e)=>k2e(t.node,e.node),E2e=(t={})=>Object.fromEntries(Object.entries(t??{}).map(([e,n])=>{if(!n)return[e,n];const r=n,i=({node:s,...o})=>C.jsx(r,{...o});return[e,E.memo(i,yR)]})),bR=E.createContext(null),vq=()=>E.useContext(bR)!==null,T2e=({children:t,...e})=>C.jsx(bR.Provider,{value:e,children:t}),R2e=E.memo(T2e,yR),M2e=({node:t,...e})=>C.jsx("pre",{...e}),O2e=({node:t,...e})=>C.jsx("code",{...e}),vR=({node:t,components:{Pre:e,Code:n},code:r})=>C.jsx(e,{children:C.jsx(n,{node:t,children:r})}),P2e=()=>null,D2e=({node:t,components:{Pre:e,Code:n,SyntaxHighlighter:r,CodeHeader:i},language:s,code:o})=>{const a=E.useMemo(()=>({Pre:e,Code:n}),[e,n]),c=s?r:vR;return C.jsxs(C.Fragment,{children:[C.jsx(i,{node:t,language:s,code:o}),C.jsx(c,{node:t,components:a,language:s??"unknown",code:o})]})},S_={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var R5;function L2e(){return R5||(R5=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(S_)),S_.exports}var I2e=L2e();const xq=Mc(I2e);var M5=({className:t,...e})=>({className:n,...r})=>({className:xq(t,n),...e,...r}),N2e=({node:t,components:{Pre:e,Code:n,SyntaxHighlighter:r,CodeHeader:i},componentsByLanguage:s={},children:o,...a})=>{const c=E.useContext(bR),h=M5(c),f=Ir(_=>C.jsx(e,{...h(_)})),d=M5(a),m=Ir(_=>C.jsx(n,{...d(_)})),y=/language-(\w+)/.exec(a.className||"")?.[1]??"";if(typeof o!="string")return C.jsx(vR,{node:t,components:{Pre:f,Code:m},code:o});const v=s[y]?.SyntaxHighlighter??r,w=s[y]?.CodeHeader??i;return C.jsx(D2e,{node:t,components:{Pre:f,Code:m,SyntaxHighlighter:v,CodeHeader:w},language:y||"unknown",code:o})},B2e=({node:t,components:e,componentsByLanguage:n,...r})=>vq()?C.jsx(N2e,{node:t,components:e,componentsByLanguage:n,...r}):C.jsx(e.Code,{...r}),j2e=E.memo(B2e,(t,e)=>t.components===e.components&&t.componentsByLanguage===e.componentsByLanguage&&yR(t,e)),{useSmooth:$2e,useSmoothStatus:V2e,withSmoothContextProvider:F2e}=RX,z2e=({components:t,componentsByLanguage:e,smooth:n=!0,preprocess:r,...i})=>{const s=zj(),o=E.useMemo(()=>r?{...s,text:r(s.text)}:s,[s,r]),{text:a}=$2e(o,n),{pre:c=M2e,code:h=O2e,SyntaxHighlighter:f=vR,CodeHeader:d=P2e}=t??{},m=E.useMemo(()=>({Pre:c,Code:h,SyntaxHighlighter:f,CodeHeader:d}),[c,h,f,d]),y=Ir(w=>C.jsx(j2e,{components:m,componentsByLanguage:e,...w})),v=E.useMemo(()=>{const{pre:w,code:_,SyntaxHighlighter:S,CodeHeader:A,...k}=t??{};return{...k,pre:R2e,code:y}},[y,t]);return C.jsx(x2e,{components:v,...i,children:a})},wq=E.forwardRef(({className:t,containerProps:e,containerComponent:n="div",...r},i)=>{const s=V2e();return C.jsx(n,{"data-status":s.type,...e,className:xq(t,e?.className),ref:i,children:C.jsx(z2e,{...r})})});wq.displayName="MarkdownTextPrimitive";var U2e=F2e(wq),O5=Object.prototype.hasOwnProperty;function P5(t,e,n){for(n of t.keys())if(jp(n,e))return n}function jp(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&jp(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=P5(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=P5(e,i),!i)||!jp(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(O5.call(t,n)&&++r&&!O5.call(e,n)||!(n in e)||!jp(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}var __=t=>{const e=E.useRef(t),n=E.useRef(0);return typeof t!="object"||t===null?(t!==e.current&&(e.current=t,n.current+=1),[t,n.current]):(t!==e.current&&(jp(t,e.current)||(e.current=t,n.current+=1)),[e.current,n.current])},H2e=(t,e,n)=>{const r=Date.now();clearTimeout(e.current.timeoutId);const i=Math.max(0,e.current.nextAllowedTime-r);e.current.timeoutId=setTimeout(()=>{t().catch(console.error),e.current.nextAllowedTime=r+n},i)},Sq=(t,e,n)=>{const r=e?Array.isArray(e)?e:[e]:[];if(t==null||typeof t=="string"&&!t.trim())return{languageId:"plaintext",displayLanguageId:"plaintext",langsToLoad:void 0};if(typeof t=="object")return{languageId:t.name,displayLanguageId:t.name||null,langsToLoad:t};const i=t.toLowerCase(),s=a=>a?.toLowerCase()===i,o=r.find(a=>s(a.name)||s(a.scopeName)||s(a.scopeName?.split(".").pop())||a.aliases?.some(s)||a.fileTypes?.some(s));return o?{languageId:o.name||t,displayLanguageId:t,langsToLoad:o}:n?.[t]?{languageId:n[t],displayLanguageId:t,langsToLoad:n[t]}:{languageId:t,displayLanguageId:t,langsToLoad:t}};function q2e(t){const e=typeof t=="object"&&"tokenColors"in t&&Array.isArray(t.tokenColors),n=typeof t=="object"&&t!==null&&!e,r=typeof t=="object"&&t!==null&&!e&&Object.entries(t).some(([i,s])=>i&&s&&i.trim()!==""&&s!==""&&(typeof s=="string"||e));return n?{isMultiTheme:!0,themeId:r?`multi-${Object.values(t).map(s=>(typeof s=="string"?s:s?.name)||"custom").sort().join("-")}`:"multi-default",multiTheme:r?t:null,themesToLoad:r?Object.values(t):[]}:{isMultiTheme:!1,themeId:typeof t=="string"?t:t?.name||"custom",singleTheme:t,themesToLoad:[t]}}function W2e(t=1){return{name:"react-shiki:line-numbers",code(e){if(this.addClassToHast(e,"has-line-numbers"),t!==1){const n=e.properties?.style||"",r=n?`${n}; --line-start: ${t}`:`--line-start: ${t}`;e.properties={...e.properties,style:r}}},line(e){return this.addClassToHast(e,"line-numbers"),e}}}var D5={light:"github-light",dark:"github-dark"},G2e=(t,e,n,r,i={})=>{const[s,o]=E.useState(null),[a,c]=__(e),[h,f]=__(n),[d,m]=__(i),{languageId:y,langsToLoad:v}=E.useMemo(()=>Sq(a,d.customLanguages,d.langAlias),[a,d.customLanguages,d.langAlias]),{isMultiTheme:w,themeId:_,multiTheme:S,singleTheme:A,themesToLoad:k}=E.useMemo(()=>q2e(h),[h]),P=E.useRef({nextAllowedTime:0,timeoutId:void 0}),M=E.useMemo(()=>{const O={lang:y},{defaultColor:L,cssVariablePrefix:N,showLineNumbers:z,startingLineNumber:j,...H}=d,W=w?{themes:S||D5,defaultColor:L,cssVariablePrefix:N}:{theme:A||D5.dark},X=H.transformers||[];return z&&X.push(W2e(j)),{...O,...W,...H,transformers:X}},[y,_,c,f,m]);return E.useEffect(()=>{let O=!0;const L=async()=>{if(!y)return;const z=d.highlighter?d.highlighter:await r(v,k),H=z.getLoadedLanguages().includes(y)?y:"plaintext",W={...M,lang:H};if(O){const X=d.outputFormat==="html"?z.codeToHtml(t,W):sq(z.codeToHast(t,W),{jsx:C.jsx,jsxs:C.jsxs,Fragment:C.Fragment});o(X)}},{delay:N}=d;return N?H2e(L,P,N):L().catch(console.error),()=>{O=!1,clearTimeout(P.current.timeoutId)}},[t,M,d.delay,d.highlighter,v,k]),s};function K2e(t,{insertAt:e}={}){if(typeof document>"u")return;const n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}K2e(`.relative {
  position: relative;
}
.defaultStyles pre {
  overflow: auto;
  border-radius: 0.5rem;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 1.25rem;
  padding-bottom: 1.25rem;
}
.languageLabel {
  position: absolute;
  right: 0.75rem;
  top: 0.5rem;
  font-family: monospace;
  font-size: 0.75rem;
  letter-spacing: -0.05em;
  color: rgba(107, 114, 128, 0.85);
}
.line-numbers::before {
  counter-increment: line-number;
  content: counter(line-number);
  display: inline-flex;
  justify-content: flex-end;
  align-items: flex-start;
  box-sizing: content-box;
  min-width: var(--line-numbers-width, 2ch);
  padding-left: var(--line-numbers-padding-left, 2ch);
  padding-right: var(--line-numbers-padding-right, 2ch);
  color: var(--line-numbers-foreground, rgba(107, 114, 128, 0.6));
  font-size: var(--line-numbers-font-size, inherit);
  font-weight: var(--line-numbers-font-weight, inherit);
  line-height: var(--line-numbers-line-height, inherit);
  font-family: var(--line-numbers-font-family, inherit);
  opacity: var(--line-numbers-opacity, 1);
  user-select: none;
  pointer-events: none;
}
.has-line-numbers {
  counter-reset: line-number calc(var(--line-start, 1) - 1);
  --line-numbers-foreground: rgba(107, 114, 128, 0.5);
  --line-numbers-width: 2ch;
  --line-numbers-padding-left: 0ch;
  --line-numbers-padding-right: 2ch;
  --line-numbers-font-size: inherit;
  --line-numbers-font-weight: inherit;
  --line-numbers-line-height: inherit;
  --line-numbers-font-family: inherit;
  --line-numbers-opacity: 1;
}
`);var Y2e=t=>E.forwardRef(({language:e,theme:n,delay:r,transformers:i,defaultColor:s,cssVariablePrefix:o,addDefaultStyles:a=!0,style:c,langStyle:h,className:f,langClassName:d,showLanguage:m=!0,showLineNumbers:y=!1,startingLineNumber:v=1,children:w,as:_="pre",customLanguages:S,...A},k)=>{const P={delay:r,transformers:i,customLanguages:S,showLineNumbers:y,defaultColor:s,cssVariablePrefix:o,startingLineNumber:v,...A},{displayLanguageId:M}=Sq(e,S),O=t(w,e,n,P),L=typeof O=="string";return C.jsxs(_,{ref:k,"data-testid":"shiki-container",className:sv("relative","not-prose",a&&"defaultStyles",f),style:c,id:"shiki-container",children:[m&&M?C.jsx("span",{className:sv("languageLabel",d),style:h,id:"language-label",children:M}):null,L?C.jsx("div",{dangerouslySetInnerHTML:{__html:O}}):O]})});const X2e="modulepreload",J2e=function(t){return"/"+t},L5={},$=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var o=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=h(n.map(f=>{if(f=J2e(f),f in L5)return;L5[f]=!0;const d=f.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":X2e,d||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};let hn=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function Q2e(t){return xR(t)}function xR(t){return Array.isArray(t)?Z2e(t):t instanceof RegExp?t:typeof t=="object"?e_e(t):t}function Z2e(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=xR(t[n]);return e}function e_e(t){let e={};for(let n in t)e[n]=xR(t[n]);return e}function _q(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Cq(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Cq(t.substring(0,t.length-1)):t.substr(~e+1)}var C_=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,zy=class{static hasCaptures(t){return t===null?!1:(C_.lastIndex=0,C_.test(t))}static replaceCaptures(t,e,n){return t.replace(C_,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let c=e.substring(a.start,a.end);for(;c[0]===".";)c=c.substring(1);switch(o){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}}else return r})}};function Aq(t,e){return t<e?-1:t>e?1:0}function kq(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=Aq(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function I5(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Eq(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Tq=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Wv=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(r_e(t),e)}static createFromParsedTheme(t,e){return s_e(t,e)}_cachedMatchRoot=new Tq(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>t_e(t.parent,i.parentScopes));return r?new Rq(r.fontStyle,r.foreground,r.background):null}},A_=class Lb{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new Lb(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Lb(n,e[r]);return n}push(e){return new Lb(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function t_e(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!n_e(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function n_e(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var Rq=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function r_e(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),a=d.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let c=-1;if(typeof o.settings.fontStyle=="string"){c=0;let d=o.settings.fontStyle.split(" ");for(let m=0,y=d.length;m<y;m++)switch(d[m]){case"italic":c=c|1;break;case"bold":c=c|2;break;case"underline":c=c|4;break;case"strikethrough":c=c|8;break}}let h=null;typeof o.settings.foreground=="string"&&I5(o.settings.foreground)&&(h=o.settings.foreground);let f=null;typeof o.settings.background=="string"&&I5(o.settings.background)&&(f=o.settings.background);for(let d=0,m=a.length;d<m;d++){let v=a[d].trim().split(" "),w=v[v.length-1],_=null;v.length>1&&(_=v.slice(0,v.length-1),_.reverse()),n[r++]=new i_e(w,_,i,c,h,f)}}return n}var i_e=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},pr=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(pr||{});function s_e(t,e){t.sort((c,h)=>{let f=Aq(c.scope,h.scope);return f!==0||(f=kq(c.parentScopes,h.parentScopes),f!==0)?f:c.index-h.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let c=t.shift();c.fontStyle!==-1&&(n=c.fontStyle),c.foreground!==null&&(r=c.foreground),c.background!==null&&(i=c.background)}let s=new o_e(e),o=new Rq(n,s.getId(r),s.getId(i)),a=new l_e(new ik(0,null,-1,0,0),[]);for(let c=0,h=t.length;c<h;c++){let f=t[c];a.insert(0,f.scope,f.parentScopes,f.fontStyle,s.getId(f.foreground),s.getId(f.background))}return new Wv(s,o,a)}var o_e=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},a_e=Object.freeze([]),ik=class Mq{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||a_e,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new Mq(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},l_e=class sk{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(sk._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),c,h;a===-1?(c=n,h=""):(c=n.substring(0,a),h=n.substring(a+1));let f;this._children.hasOwnProperty(c)?f=this._children[c]:(f=new sk(this._mainRule.clone(),ik.cloneArr(this._rulesWithParentScopes)),this._children[c]=f),f.insert(e+1,h,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let c=this._rulesWithParentScopes[o];if(kq(c.parentScopes,n)===0){c.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new ik(e,n,r,i,s))}},Vh=class zi{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=zi.getLanguageId(e),r=zi.getTokenType(e),i=zi.getFontStyle(e),s=zi.getForeground(e),o=zi.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let c=zi.getLanguageId(e),h=zi.getTokenType(e),f=zi.containsBalancedBrackets(e)?1:0,d=zi.getFontStyle(e),m=zi.getForeground(e),y=zi.getBackground(e);return n!==0&&(c=n),r!==8&&(h=r),i!==null&&(f=i?1:0),s!==-1&&(d=s),o!==0&&(m=o),a!==0&&(y=a),(c<<0|h<<8|f<<10|d<<11|m<<15|y<<24)>>>0}};function Gv(t,e){const n=[],r=c_e(t);let i=r.next();for(;i!==null;){let c=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":c=1;break;case"L":c=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let h=o();if(n.push({matcher:h,priority:c}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const c=s();return h=>!!c&&!c(h)}if(i==="("){i=r.next();const c=a();return i===")"&&(i=r.next()),c}if(N5(i)){const c=[];do c.push(i),i=r.next();while(N5(i));return h=>e(c,h)}return null}function o(){const c=[];let h=s();for(;h;)c.push(h),h=s();return f=>c.every(d=>d(f))}function a(){const c=[];let h=o();for(;h&&(c.push(h),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");h=o()}return f=>c.some(d=>d(f))}}function N5(t){return!!t&&!!t.match(/[\w\.:]+/)}function c_e(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function Oq(t){typeof t.dispose=="function"&&t.dispose()}var Sm=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},u_e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},h_e=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},f_e=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Sm(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new h_e;for(const n of t)d_e(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Sm){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function d_e(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof Sm?Ib({baseGrammar:s,selfGrammar:i},r):ok(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new Sm(a))}function ok(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Kv([r],e,n)}}function Ib(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Kv(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Kv(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Kv(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?_q({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Kv(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=Pq(s);switch(o.kind){case 0:Ib({...e,selfGrammar:e.baseGrammar},n);break;case 1:Ib(e,n);break;case 2:ok(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const c={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?ok(o.ruleName,c,n):Ib(c,n)}else o.kind===4?n.add(new u_e(o.scopeName,o.ruleName)):n.add(new Sm(o.scopeName));break}}}var p_e=class{kind=0},m_e=class{kind=1},g_e=class{constructor(t){this.ruleName=t}kind=2},y_e=class{constructor(t){this.scopeName=t}kind=3},b_e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Pq(t){if(t==="$base")return new p_e;if(t==="$self")return new m_e;const e=t.indexOf("#");if(e===-1)return new y_e(t);if(e===0)return new g_e(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new b_e(n,r)}}var v_e=/\\(\d+)/,B5=/\\(\d+)/g,x_e=-1,Dq=-2;var eg=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=zy.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=zy.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Cq(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:zy.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:zy.replaceCaptures(this._contentName,t,e)}},w_e=class extends eg{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},S_e=class extends eg{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new _m(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Cm,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},j5=class extends eg{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Cm,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},ak=class extends eg{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,c,h){super(t,e,n,r),this._begin=new _m(i,this.id),this.beginCaptures=s,this._end=new _m(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=c||!1,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Cm;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Yv=class extends eg{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,c){super(t,e,n,r),this._begin=new _m(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new _m(o,Dq),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Cm;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Cm,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},Lq=class cr{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new w_e(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new S_e(e.$vscodeTextmateLocation,e.id,e.name,e.match,cr._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=_q({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new j5(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,cr._compilePatterns(s,n,r))}return e.while?new Yv(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,cr._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,cr._compileCaptures(e.whileCaptures||e.captures,n,r),cr._compilePatterns(e.patterns,n,r)):new ak(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,cr._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,cr._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,cr._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let c=0;e[o].patterns&&(c=cr.getCompiledRuleId(e[o],n,r)),i[a]=cr.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,c)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let c=-1;if(a.include){const h=Pq(a.include);switch(h.kind){case 0:case 1:c=cr.getCompiledRuleId(r[a.include],n,r);break;case 2:let f=r[h.ruleName];f&&(c=cr.getCompiledRuleId(f,n,r));break;case 3:case 4:const d=h.scopeName,m=h.kind===4?h.ruleName:null,y=n.getExternalGrammar(d,r);if(y)if(m){let v=y.repository[m];v&&(c=cr.getCompiledRuleId(v,n,y.repository))}else c=cr.getCompiledRuleId(y.repository.$self,n,y.repository);break}}else c=cr.getCompiledRuleId(a,n,r);if(c!==-1){const h=n.getRule(c);let f=!1;if((h instanceof j5||h instanceof ak||h instanceof Yv)&&h.hasMissingPatterns&&h.patterns.length===0&&(f=!0),f)continue;i.push(c)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},_m=class Iq{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const h=e.charAt(a+1);h==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(h==="A"||h==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=v_e.test(this.source):this.hasBackReferences=!1}clone(){return new Iq(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return B5.lastIndex=0,this.source.replace(B5,(i,s)=>Eq(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,c;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(c=this.source.charAt(s+1),c==="A"?(e[s+1]="",n[s+1]="",r[s+1]="A",i[s+1]="A"):c==="G"?(e[s+1]="",n[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=c,n[s+1]=c,r[s+1]=c,i[s+1]=c),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Cm=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new $5(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new $5(t,r,this._items.map(i=>i.ruleId))}},$5=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},k_=class{constructor(t,e){this.languageId=t,this.tokenType=e}},__e=class lk{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new k_(e,8),this._embeddedLanguagesMatcher=new C_e(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?lk._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new k_(0,0);_getBasicScopeAttributes=new Tq(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new k_(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(lk.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},C_e=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Eq(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},V5=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Nq(t,e,n,r,i,s,o,a){const c=e.content.length;let h=!1,f=-1;if(o){const y=A_e(t,e,n,r,i,s);i=y.stack,r=y.linePos,n=y.isFirstLine,f=y.anchorPosition}const d=Date.now();for(;!h;){if(a!==0&&Date.now()-d>a)return new V5(i,!0);m()}return new V5(i,!1);function m(){const y=k_e(t,e,n,r,i,f);if(!y){s.produce(i,c),h=!0;return}const v=y.captureIndices,w=y.matchedRuleId,_=v&&v.length>0?v[0].end>r:!1;if(w===x_e){const S=i.getRule(t);s.produce(i,v[0].start),i=i.withContentNameScopesList(i.nameScopesList),dp(t,e,n,i,s,S.endCaptures,v),s.produce(i,v[0].end);const A=i;if(i=i.parent,f=A.getAnchorPos(),!_&&A.getEnterPos()===r){i=A,s.produce(i,c),h=!0;return}}else{const S=t.getRule(w);s.produce(i,v[0].start);const A=i,k=S.getName(e.content,v),P=i.contentNameScopesList.pushAttributed(k,t);if(i=i.push(w,r,f,v[0].end===c,null,P,P),S instanceof ak){const M=S;dp(t,e,n,i,s,M.beginCaptures,v),s.produce(i,v[0].end),f=v[0].end;const O=M.getContentName(e.content,v),L=P.pushAttributed(O,t);if(i=i.withContentNameScopesList(L),M.endHasBackReferences&&(i=i.withEndRule(M.getEndWithResolvedBackReferences(e.content,v))),!_&&A.hasSameRuleAs(i)){i=i.pop(),s.produce(i,c),h=!0;return}}else if(S instanceof Yv){const M=S;dp(t,e,n,i,s,M.beginCaptures,v),s.produce(i,v[0].end),f=v[0].end;const O=M.getContentName(e.content,v),L=P.pushAttributed(O,t);if(i=i.withContentNameScopesList(L),M.whileHasBackReferences&&(i=i.withEndRule(M.getWhileWithResolvedBackReferences(e.content,v))),!_&&A.hasSameRuleAs(i)){i=i.pop(),s.produce(i,c),h=!0;return}}else if(dp(t,e,n,i,s,S.captures,v),s.produce(i,v[0].end),i=i.pop(),!_){i=i.safePop(),s.produce(i,c),h=!0;return}}v[0].end>r&&(r=v[0].end,n=!1)}}function A_e(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let c=i;c;c=c.pop()){const h=c.getRule(t);h instanceof Yv&&a.push({rule:h,stack:c})}for(let c=a.pop();c;c=a.pop()){const{ruleScanner:h,findOptions:f}=R_e(c.rule,t,c.stack.endRule,n,r===o),d=h.findNextMatchSync(e,r,f);if(d){if(d.ruleId!==Dq){i=c.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(s.produce(c.stack,d.captureIndices[0].start),dp(t,e,n,c.stack,s,c.rule.whileCaptures,d.captureIndices),s.produce(c.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>r&&(r=d.captureIndices[0].end,n=!1))}else{i=c.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function k_e(t,e,n,r,i,s){const o=E_e(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const c=T_e(a,t,e,n,r,i,s);if(!c)return o;if(!o)return c;const h=o.captureIndices[0].start,f=c.captureIndices[0].start;return f<h||c.priorityMatch&&f===h?c:o}function E_e(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:c}=Bq(o,t,i.endRule,n,r===s),h=a.findNextMatchSync(e,r,c);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}function T_e(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,c=null,h,f=0;const d=s.contentNameScopesList.getScopeNames();for(let m=0,y=t.length;m<y;m++){const v=t[m];if(!v.matcher(d))continue;const w=e.getRule(v.ruleId),{ruleScanner:_,findOptions:S}=Bq(w,e,null,r,i===o),A=_.findNextMatchSync(n,i,S);if(!A)continue;const k=A.captureIndices[0].start;if(!(k>=a)&&(a=k,c=A.captureIndices,h=A.ruleId,f=v.priority,a===i))break}return c?{priorityMatch:f===-1,captureIndices:c,matchedRuleId:h}:null}function Bq(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function R_e(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function dp(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,c=Math.min(s.length,o.length),h=[],f=o[0].end;for(let d=0;d<c;d++){const m=s[d];if(m===null)continue;const y=o[d];if(y.length===0)continue;if(y.start>f)break;for(;h.length>0&&h[h.length-1].endPos<=y.start;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?i.produceFromScopes(h[h.length-1].scopes,y.start):i.produce(r,y.start),m.retokenizeCapturedWithRuleId){const w=m.getName(a,o),_=r.contentNameScopesList.pushAttributed(w,t),S=m.getContentName(a,o),A=_.pushAttributed(S,t),k=r.push(m.retokenizeCapturedWithRuleId,y.start,-1,!1,null,_,A),P=t.createOnigString(a.substring(0,y.end));Nq(t,P,n&&y.start===0,y.start,k,i,!1,0),Oq(P);continue}const v=m.getName(a,o);if(v!==null){const _=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(v,t);h.push(new M_e(_,y.end))}}for(;h.length>0;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}var M_e=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function O_e(t,e,n,r,i,s,o,a){return new D_e(t,e,n,r,i,s,o,a)}function F5(t,e,n,r,i){const s=Gv(e,Xv),o=Lq.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function Xv(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(P_e(e[i],r))return n=i+1,!0;return!1})}function P_e(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var D_e=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new __e(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=z5(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const c of Object.keys(i)){const h=Gv(c,Xv);for(const f of h)this._tokenTypeMatchers.push({matcher:f.matcher,type:i[c]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)F5(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const c=a.injectionSelector;c&&F5(e,c,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=z5(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=Lq.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===ck.NULL){i=!0;const h=this._basicScopeAttributesProvider.getDefaultAttributes(),f=this.themeProvider.getDefaults(),d=Vh.set(0,h.languageId,h.tokenType,null,f.fontStyle,f.foregroundId,f.backgroundId),m=this.getRule(this._rootId).getName(null,null);let y;m?y=$p.createRootAndLookUpScopeName(m,d,this):y=$p.createRoot("unknown",d),e=new ck(null,this._rootId,-1,-1,!1,null,y,y)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new I_e(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),c=Nq(this,s,i,0,e,a,!0,r);return Oq(s),{lineLength:o,lineTokens:a,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}};function z5(t,e){return t=Q2e(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var $p=class Ws{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=A_.push(i,s.scopeNames),r=new Ws(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new Ws(null,new A_(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new A_(null,e),o=r.themeProvider.themeMatch(s),a=Ws.mergeAttributes(n,i,o);return new Ws(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Ws.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),Vh.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Ws._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=Ws._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=Ws.mergeAttributes(e.tokenAttributes,i,o);return new Ws(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},ck=class tc{constructor(e,n,r,i,s,o,a,c){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=c,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new tc(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:tc._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?$p.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){tc._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new tc(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new tc(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=$p.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new tc(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,$p.fromExtension(r,n.contentNameScopesList))}},L_e=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Gv(n,Xv).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Gv(n,Xv).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},I_e=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=Vh.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=Vh.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},N_e=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,O_e(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},B_e=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new N_e(Wv.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Wv.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new L_e(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new f_e(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},uk=ck.NULL;const j_e=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],$_e=/["&'<>`]/g,V_e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,F_e=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,z_e=/[|\\{}()[\]^$+*?.]/g,U5=new WeakMap;function U_e(t,e){if(t=t.replace(e.subset?H_e(e.subset):$_e,r),e.subset||e.escapeOnly)return t;return t.replace(V_e,n).replace(F_e,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function H_e(t){let e=U5.get(t);return e||(e=q_e(t),U5.set(t,e)),e}function q_e(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(z_e,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const W_e=/[\dA-Fa-f]/;function G_e(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!W_e.test(String.fromCharCode(e))?r:r+";"}const K_e=/\d/;function Y_e(t,e,n){const r="&#"+String(t);return n&&e&&!K_e.test(String.fromCharCode(e))?r:r+";"}const X_e=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],E_={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},J_e=["cent","copy","divide","gt","lt","not","para","times"],jq={}.hasOwnProperty,hk={};let Uy;for(Uy in E_)jq.call(E_,Uy)&&(hk[E_[Uy]]=Uy);const Q_e=/[^\dA-Za-z]/;function Z_e(t,e,n,r){const i=String.fromCharCode(t);if(jq.call(hk,i)){const s=hk[i],o="&"+s;return n&&X_e.includes(s)&&!J_e.includes(s)&&(!r||e&&e!==61&&Q_e.test(String.fromCharCode(e)))?o:o+";"}return""}function eCe(t,e,n){let r=G_e(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=Z_e(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=Y_e(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Ah(t,e){return U_e(t,Object.assign({format:eCe},e))}const tCe=/^>|^->|<!--|-->|--!>|<!-$/g,nCe=[">"],rCe=["<",">"];function iCe(t,e,n,r){return r.settings.bogusComments?"<?"+Ah(t.value,Object.assign({},r.settings.characterReferences,{subset:nCe}))+">":"<!--"+t.value.replace(tCe,i)+"-->";function i(s){return Ah(s,Object.assign({},r.settings.characterReferences,{subset:rCe}))}}function sCe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const Tn=Vq(1),$q=Vq(-1),oCe=[];function Vq(t){return e;function e(n,r,i){const s=n?n.children:oCe;let o=(r||0)+t,a=s[o];if(!i)for(;a&&uw(a);)o+=t,a=s[o];return a}}const aCe={}.hasOwnProperty;function Fq(t){return e;function e(n,r,i){return aCe.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const wR=Fq({body:cCe,caption:T_,colgroup:T_,dd:dCe,dt:fCe,head:T_,html:lCe,li:hCe,optgroup:pCe,option:mCe,p:uCe,rp:H5,rt:H5,tbody:yCe,td:q5,tfoot:bCe,th:q5,thead:gCe,tr:vCe});function T_(t,e,n){const r=Tn(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&uw(r.value.charAt(0)))}function lCe(t,e,n){const r=Tn(n,e);return!r||r.type!=="comment"}function cCe(t,e,n){const r=Tn(n,e);return!r||r.type!=="comment"}function uCe(t,e,n){const r=Tn(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function hCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&r.tagName==="li"}function fCe(t,e,n){const r=Tn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function dCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function H5(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function pCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function mCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function gCe(t,e,n){const r=Tn(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function yCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function bCe(t,e,n){return!Tn(n,e)}function vCe(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function q5(t,e,n){const r=Tn(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const xCe=Fq({body:_Ce,colgroup:CCe,head:SCe,html:wCe,tbody:ACe});function wCe(t){const e=Tn(t,-1);return!e||e.type!=="comment"}function SCe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function _Ce(t){const e=Tn(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&uw(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function CCe(t,e,n){const r=$q(n,e),i=Tn(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&wR(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function ACe(t,e,n){const r=$q(n,e),i=Tn(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&wR(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Hy={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function kCe(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let c;i.space==="html"&&t.tagName==="svg"&&(r.schema=Qm);const h=ECe(r,t.properties),f=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,f&&(o=!1),(h||!s||!xCe(t,e,n))&&(a.push("<",t.tagName,h?" "+h:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(c=h.charAt(h.length-1),(!r.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(f),!o&&(!s||!wR(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function ECe(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=TCe(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function TCe(t,e,n){const r=ZH(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const c=Ah(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Hy.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?qH:tq)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?c:(t.settings.preferUnquoted&&(a=Ah(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Hy.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&Fv(n,o)>Fv(n,t.alternative)&&(o=t.alternative),a=o+Ah(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?Hy.single:Hy.double)[i][s],attribute:!0}))+o),c+(a&&"="+a))}const RCe=["<","&"];function zq(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Ah(t.value,Object.assign({},r.settings.characterReferences,{subset:RCe}))}function MCe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:zq(t,e,n,r)}function OCe(t,e,n,r){return r.all(t)}const PCe=tve("type",{invalid:DCe,unknown:LCe,handlers:{comment:iCe,doctype:sCe,element:kCe,raw:MCe,root:OCe,text:zq}});function DCe(t){throw new Error("Expected node, not `"+t+"`")}function LCe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const ICe={},NCe={},BCe=[];function jCe(t,e){const n=e||ICe,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:$Ce,all:VCe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||j_e,characterReferences:n.characterReferences||NCe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Qm:eq,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function $Ce(t,e,n){return PCe(t,e,n,this)}function VCe(t){const e=[],n=t&&t.children||BCe;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Jv(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function cl(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function FCe(t){return Array.isArray(t)?t:[t]}async function Uq(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function SR(t){return!t||["plaintext","txt","text","plain"].includes(t)}function Hq(t){return t==="ansi"||SR(t)}function _R(t){return t==="none"}function qq(t){return _R(t)}function Wq(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function fw(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function zCe(t){const e=fw(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}function UCe(t,e,n){const r=new Set;for(const s of t.matchAll(/lang=["']([\w-]+)["']/g))r.add(s[1]);for(const s of t.matchAll(/(?:```|~~~)([\w-]+)/g))r.add(s[1]);for(const s of t.matchAll(/\\begin\{([\w-]+)\}/g))r.add(s[1]);if(!n)return Array.from(r);const i=n.getBundledLanguages();return Array.from(r).filter(s=>s&&i[s])}const CR="light-dark()",HCe=["color","background-color"];function qCe(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function WCe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?qCe(i,s):i})):t}function GCe(t,e,n,r,i="css-vars"){const s={content:t.content,explanation:t.explanation,offset:t.offset},o=e.map(f=>Qv(t.variants[f])),a=new Set(o.flatMap(f=>Object.keys(f))),c={},h=(f,d)=>{const m=d==="color"?"":d==="background-color"?"-bg":`-${d}`;return n+e[f]+(d==="color"?"":m)};return o.forEach((f,d)=>{for(const m of a){const y=f[m]||"inherit";if(d===0&&r&&HCe.includes(m))if(r===CR&&o.length>1){const v=e.findIndex(A=>A==="light"),w=e.findIndex(A=>A==="dark");if(v===-1||w===-1)throw new hn('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const _=o[v][m]||"inherit",S=o[w][m]||"inherit";c[m]=`light-dark(${_}, ${S})`,i==="css-vars"&&(c[h(d,m)]=y)}else c[m]=y;else i==="css-vars"&&(c[h(d,m)]=y)}}),s.htmlStyle=c,s}function Qv(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&pr.Italic&&(e["font-style"]="italic"),t.fontStyle&pr.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&pr.Underline&&n.push("underline"),t.fontStyle&pr.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function fk(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const Gq=new WeakMap;function dw(t,e){Gq.set(t,e)}function Am(t){return Gq.get(t)}class sf{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new sf(Object.fromEntries(FCe(n).map(r=>[r,uk])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return KCe(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function KCe(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function YCe(t,e){if(!(t instanceof sf))throw new hn("Invalid grammar state");return t.getInternalStack(e)}function XCe(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new hn(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new hn(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);let c=o.character;if(c<0&&(c=a.length+c),c<0||c>a.length)throw new hn(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,character:c,offset:i.posToIndex(o.line,c)}}};const i=zCe(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));JCe(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return WCe(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(f=>f.type==="element"&&f.tagName==="span");if(i.length!==r.converter.lines.length)throw new hn(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(f,d,m,y){const v=i[f];let w="",_=-1,S=-1;if(d===0&&(_=0),m===0&&(S=0),m===Number.POSITIVE_INFINITY&&(S=v.children.length),_===-1||S===-1)for(let k=0;k<v.children.length;k++)w+=Kq(v.children[k]),_===-1&&w.length===d&&(_=k+1),S===-1&&w.length===m&&(S=k+1);if(_===-1)throw new hn(`Failed to find start index for decoration ${JSON.stringify(y.start)}`);if(S===-1)throw new hn(`Failed to find end index for decoration ${JSON.stringify(y.end)}`);const A=v.children.slice(_,S);if(!y.alwaysWrap&&A.length===v.children.length)a(v,y,"line");else if(!y.alwaysWrap&&A.length===1&&A[0].type==="element")a(A[0],y,"token");else{const k={type:"element",tagName:"span",properties:{},children:A};a(k,y,"wrapper"),v.children.splice(_,A.length,k)}}function o(f,d){i[f]=a(i[f],d,"line")}function a(f,d,m){const y=d.properties||{},v=d.transform||(w=>w);return f.tagName=d.tagName||"span",f.properties={...f.properties,...y,class:f.properties.class},d.properties?.class&&Wq(f,d.properties.class),f=v(f,m)||f,f}const c=[],h=r.decorations.sort((f,d)=>d.start.offset-f.start.offset||f.end.offset-d.end.offset);for(const f of h){const{start:d,end:m}=f;if(d.line===m.line)s(d.line,d.character,m.character,f);else if(d.line<m.line){s(d.line,d.character,Number.POSITIVE_INFINITY,f);for(let y=d.line+1;y<m.line;y++)c.unshift(()=>o(y,f));s(m.line,0,m.character,f)}}c.forEach(f=>f())}}}function JCe(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new hn(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<=i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<=n.end.offset,a=i.start.offset<=n.start.offset&&n.start.offset<i.end.offset,c=i.start.offset<n.end.offset&&n.end.offset<=i.end.offset;if(s||o||a||c){if(s&&o||a&&c||a&&n.start.offset===n.end.offset||o&&i.start.offset===i.end.offset)continue;throw new hn(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function Kq(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(Kq).join(""):""}const QCe=[XCe()];function Zv(t){const e=ZCe(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...QCe]}function ZCe(t){const e=[],n=[],r=[];for(const i of t)switch(i.enforce){case"pre":e.push(i);break;case"post":n.push(i);break;default:r.push(i)}return{pre:e,post:n,normal:r}}var dc=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],R_={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function eAe(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function W5(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function tAe(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)R_[r]&&e.push({type:"setDecoration",value:R_[r]});else if(r<=29){const i=R_[r-20];i&&(e.push({type:"resetDecoration",value:i}),i==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:dc[r-30]}});else if(r===38){const i=W5(t);i&&e.push({type:"setForegroundColor",value:i})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:dc[r-40]}});else if(r===48){const i=W5(t);i&&e.push({type:"setBackgroundColor",value:i})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:dc[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:dc[r-100+8]}})}return e}function nAe(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=eAe(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const c=tAe(o.sequence);for(const h of c)h.type==="resetAll"?(t=null,e=null,n.clear()):h.type==="resetForegroundColor"?t=null:h.type==="resetBackgroundColor"?e=null:h.type==="resetDecoration"&&n.delete(h.value);for(const h of c)h.type==="setForegroundColor"?t=h.value:h.type==="setBackgroundColor"?e=h.value:h.type==="setDecoration"&&n.add(h.value)}s=o.position}while(s<r.length);return i}}}var rAe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function iAe(t=rAe){function e(a){return t[a]}function n(a){return`#${a.map(c=>Math.max(0,Math.min(c,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let h=0;h<dc.length;h++)r.push(e(dc[h]));let a=[0,95,135,175,215,255];for(let h=0;h<6;h++)for(let f=0;f<6;f++)for(let d=0;d<6;d++)r.push(n([a[h],a[f],a[d]]));let c=8;for(let h=0;h<24;h++,c+=10)r.push(n([c,c,c]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}function sAe(t,e,n){const r=Jv(t,n),i=fw(e),s=iAe(Object.fromEntries(dc.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=nAe();return i.map(a=>o.parse(a[0]).map(c=>{let h,f;c.decorations.has("reverse")?(h=c.background?s.value(c.background):t.bg,f=c.foreground?s.value(c.foreground):t.fg):(h=c.foreground?s.value(c.foreground):t.fg,f=c.background?s.value(c.background):void 0),h=cl(h,r),f=cl(f,r),c.decorations.has("dim")&&(h=oAe(h));let d=pr.None;return c.decorations.has("bold")&&(d|=pr.Bold),c.decorations.has("italic")&&(d|=pr.Italic),c.decorations.has("underline")&&(d|=pr.Underline),c.decorations.has("strikethrough")&&(d|=pr.Strikethrough),{content:c.value,offset:a[1],color:h,bgColor:f,fontStyle:d}}))}function oAe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function AR(t,e,n={}){const{lang:r="text",theme:i=t.getLoadedThemes()[0]}=n;if(SR(r)||_R(i))return fw(e).map(c=>[{content:c[0],offset:c[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(r==="ansi")return sAe(s,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new hn(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new hn(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return lAe(e,a,s,o,n)}function aAe(...t){if(t.length===2)return Am(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(SR(i)||_R(s))throw new hn("Plain language does not have grammar state");if(i==="ansi")throw new hn("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),c=e.getLanguage(i);return new sf(ex(n,c,o,a,r).stateStack,c.name,o.name)}function lAe(t,e,n,r,i){const s=ex(t,e,n,r,i),o=new sf(ex(t,e,n,r,i).stateStack,e.name,n.name);return dw(s.tokens,o),s.tokens}function ex(t,e,n,r,i){const s=Jv(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,c=fw(t);let h=i.grammarState?YCe(i.grammarState,n.name)??uk:i.grammarContextCode!=null?ex(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:uk,f=[];const d=[];for(let m=0,y=c.length;m<y;m++){const[v,w]=c[m];if(v===""){f=[],d.push([]);continue}if(o>0&&v.length>=o){f=[],d.push([{content:v,offset:w,color:"",fontStyle:0}]);continue}let _,S,A;i.includeExplanation&&(_=e.tokenizeLine(v,h,a),S=_.tokens,A=0);const k=e.tokenizeLine2(v,h,a),P=k.tokens.length/2;for(let M=0;M<P;M++){const O=k.tokens[2*M],L=M+1<P?k.tokens[2*M+2]:v.length;if(O===L)continue;const N=k.tokens[2*M+1],z=cl(r[Vh.getForeground(N)],s),j=Vh.getFontStyle(N),H={content:v.substring(O,L),offset:w+O,color:z,fontStyle:j};if(i.includeExplanation){const W=[];if(i.includeExplanation!=="scopeName")for(const G of n.settings){let ie;switch(typeof G.scope){case"string":ie=G.scope.split(/,/).map(F=>F.trim());break;case"object":ie=G.scope;break;default:continue}W.push({settings:G,selectors:ie.map(F=>F.split(/ /))})}H.explanation=[];let X=0;for(;O+X<L;){const G=S[A],ie=v.substring(G.startIndex,G.endIndex);X+=ie.length,H.explanation.push({content:ie,scopes:i.includeExplanation==="scopeName"?cAe(G.scopes):uAe(W,G.scopes)}),A+=1}}f.push(H)}d.push(f),f=[],h=k.ruleStack}return{tokens:d,stateStack:h}}function cAe(t){return t.map(e=>({scopeName:e}))}function uAe(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:fAe(t,s,e.slice(0,r))}}return n}function G5(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function hAe(t,e,n){if(!G5(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)G5(t[r],n[i])&&(r-=1),i-=1;return r===-1}function fAe(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(hAe(o,e,n)){r.push(s);break}return r}function Yq(t,e,n){const r=Object.entries(n.themes).filter(c=>c[1]).map(c=>({color:c[0],theme:c[1]})),i=r.map(c=>{const h=AR(t,e,{...n,theme:c.theme}),f=Am(h),d=typeof c.theme=="string"?c.theme:c.theme.name;return{tokens:h,state:f,theme:d}}),s=dAe(...i.map(c=>c.tokens)),o=s[0].map((c,h)=>c.map((f,d)=>{const m={content:f.content,variants:{},offset:f.offset};return"includeExplanation"in n&&n.includeExplanation&&(m.explanation=f.explanation),s.forEach((y,v)=>{const{content:w,explanation:_,offset:S,...A}=y[h][d];m.variants[r[v].color]=A}),m})),a=i[0].state?new sf(Object.fromEntries(i.map(c=>[c.theme,c.state?.getInternalStack(c.theme)])),i[0].state.lang):void 0;return a&&dw(o,a),o}function dAe(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(c=>c[r]),s=e.map(()=>[]);e.forEach((c,h)=>c.push(s[h]));const o=i.map(()=>0),a=i.map(c=>c[0]);for(;a.every(c=>c);){const c=Math.min(...a.map(h=>h.content.length));for(let h=0;h<n;h++){const f=a[h];f.content.length===c?(s[h].push(f),o[h]+=1,a[h]=i[h][o[h]]):(s[h].push({...f,content:f.content.slice(0,c)}),a[h]={...f,content:f.content.slice(c),offset:f.offset+c})}}}return e}function tx(t,e,n){let r,i,s,o,a,c;if("themes"in n){const{defaultColor:h="light",cssVariablePrefix:f="--shiki-",colorsRendering:d="css-vars"}=n,m=Object.entries(n.themes).filter(S=>S[1]).map(S=>({color:S[0],theme:S[1]})).sort((S,A)=>S.color===h?-1:A.color===h?1:0);if(m.length===0)throw new hn("`themes` option must not be empty");const y=Yq(t,e,n);if(c=Am(y),h&&CR!==h&&!m.find(S=>S.color===h))throw new hn(`\`themes\` option must contain the defaultColor key \`${h}\``);const v=m.map(S=>t.getTheme(S.theme)),w=m.map(S=>S.color);s=y.map(S=>S.map(A=>GCe(A,w,f,h,d))),c&&dw(s,c);const _=m.map(S=>Jv(S.theme,n));i=K5(m,v,_,f,h,"fg",d),r=K5(m,v,_,f,h,"bg",d),o=`shiki-themes ${v.map(S=>S.name).join(" ")}`,a=h?void 0:[i,r].join(";")}else if("theme"in n){const h=Jv(n.theme,n);s=AR(t,e,n);const f=t.getTheme(n.theme);r=cl(f.bg,h),i=cl(f.fg,h),o=f.name,c=Am(s)}else throw new hn("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:c}}function K5(t,e,n,r,i,s,o){return t.map((a,c)=>{const h=cl(e[c][s],n[c])||"inherit",f=`${r+a.color}${s==="bg"?"-bg":""}:${h}`;if(c===0&&i){if(i===CR&&t.length>1){const d=t.findIndex(w=>w.color==="light"),m=t.findIndex(w=>w.color==="dark");if(d===-1||m===-1)throw new hn('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const y=cl(e[d][s],n[d])||"inherit",v=cl(e[m][s],n[m])||"inherit";return`light-dark(${y}, ${v});${f}`}return h}return o==="css-vars"?f:null}).filter(a=>!!a).join(";")}function nx(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>nx(t,i,s),codeToTokens:(i,s)=>tx(t,i,s)}){let i=e;for(const v of Zv(n))i=v.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:c,rootStyle:h,grammarState:f}=tx(t,i,n);const{mergeWhitespaces:d=!0,mergeSameStyleTokens:m=!1}=n;d===!0?s=mAe(s):d==="never"&&(s=gAe(s)),m&&(s=yAe(s));const y={...r,get source(){return i}};for(const v of Zv(n))s=v.tokens?.call(y,s)||s;return pAe(s,{...n,fg:o,bg:a,themeName:c,rootStyle:h},y,f)}function pAe(t,e,n,r=Am(t)){const i=Zv(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:c="0"}=e;let h={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...c!==!1&&c!=null?{tabindex:c.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([v])=>!v.startsWith("_")))},children:[]},f={type:"element",tagName:"code",properties:{},children:s};const d=[],m={...n,structure:a,addClassToHast:Wq,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return h},get code(){return f},get lines(){return d}};if(t.forEach((v,w)=>{w&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let _={type:"element",tagName:"span",properties:{class:"line"},children:[]},S=0;for(const A of v){let k={type:"element",tagName:"span",properties:{...A.htmlAttrs},children:[{type:"text",value:A.content}]};const P=fk(A.htmlStyle||Qv(A));P&&(k.properties.style=P);for(const M of i)k=M?.span?.call(m,k,w+1,S,_,A)||k;a==="inline"?o.children.push(k):a==="classic"&&_.children.push(k),S+=A.content.length}if(a==="classic"){for(const A of i)_=A?.line?.call(m,_,w+1)||_;d.push(_),s.push(_)}}),a==="classic"){for(const v of i)f=v?.code?.call(m,f)||f;h.children.push(f);for(const v of i)h=v?.pre?.call(m,h)||h;o.children.push(h)}let y=o;for(const v of i)y=v?.root?.call(m,y)||y;return r&&dw(y,r),y}function mAe(t){return t.map(e=>{const n=[];let r="",i=0;return e.forEach((s,o)=>{const c=!(s.fontStyle&&(s.fontStyle&pr.Underline||s.fontStyle&pr.Strikethrough));c&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(c?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n})}function gAe(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function yAe(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const i=n[n.length-1],s=fk(i.htmlStyle||Qv(i)),o=fk(r.htmlStyle||Qv(r)),a=i.fontStyle&&(i.fontStyle&pr.Underline||i.fontStyle&pr.Strikethrough),c=r.fontStyle&&(r.fontStyle&pr.Underline||r.fontStyle&pr.Strikethrough);!a&&!c&&s===o?i.content+=r.content:n.push({...r})}return n})}const bAe=jCe;function vAe(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>nx(t,s,o),codeToTokens:(s,o)=>tx(t,s,o)};let i=bAe(nx(t,e,n,r));for(const s of Zv(n))i=s.postprocess?.call(r,i,n)||i;return i}const Y5={light:"#333333",dark:"#bbbbbb"},X5={light:"#fffffe",dark:"#1e1e1e"},J5="__shiki_resolved";function kR(t){if(t?.[J5])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(c=>!c.name&&!c.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?Y5.light:Y5.dark),n||(n=e.type==="light"?X5.light:X5.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const c=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${c}`]?o(a):(s.set(a,c),c)}e.settings=e.settings.map(a=>{const c=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),h=a.settings?.background&&!a.settings.background.startsWith("#");if(!c&&!h)return a;const f={...a,settings:{...a.settings}};if(c){const d=o(a.settings.foreground);e.colorReplacements[d]=a.settings.foreground,f.settings.foreground=d}if(h){const d=o(a.settings.background);e.colorReplacements[d]=a.settings.background,f.settings.background=d}return f});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const c=o(e.colors[a]);e.colorReplacements[c]=e.colors[a],e.colors[a]=c}return Object.defineProperty(e,J5,{enumerable:!1,writable:!1,value:!0}),e}async function Xq(t){return Array.from(new Set((await Promise.all(t.filter(e=>!Hq(e)).map(async e=>await Uq(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function Jq(t){return(await Promise.all(t.map(async n=>qq(n)?null:kR(await Uq(n))))).filter(n=>!!n)}let xAe=3;function wAe(t,e=3){e>xAe||console.trace(`[SHIKI DEPRECATE]: ${t}`)}let uh=class extends Error{constructor(e){super(e),this.name="ShikiError"}};class SAe extends B_e{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=kR(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Wv.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new uh(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>r.map(([c])=>c).includes(a))).filter(s=>!r.includes(s));throw new uh(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class _Ae{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let $d=0;function CAe(t){$d+=1,t.warnings!==!1&&$d>=10&&$d%10===0&&console.warn(`[Shiki] ${$d} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new uh("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(kR),i=new _Ae(t.engine,n),s=new SAe(i,r,n,t.langAlias);let o;function a(A){_();const k=s.getGrammar(typeof A=="string"?A:A.name);if(!k)throw new uh(`Language \`${A}\` not found, you may need to load it first`);return k}function c(A){if(A==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};_();const k=s.getTheme(A);if(!k)throw new uh(`Theme \`${A}\` not found, you may need to load it first`);return k}function h(A){_();const k=c(A);o!==A&&(s.setTheme(k),o=A);const P=s.getColorMap();return{theme:k,colorMap:P}}function f(){return _(),s.getLoadedThemes()}function d(){return _(),s.getLoadedLanguages()}function m(...A){_(),s.loadLanguages(A.flat(1))}async function y(...A){return m(await Xq(A))}function v(...A){_();for(const k of A.flat(1))s.loadTheme(k)}async function w(...A){return _(),v(await Jq(A))}function _(){if(e)throw new uh("Shiki instance has been disposed")}function S(){e||(e=!0,s.dispose(),$d-=1)}return{setTheme:h,getTheme:c,getLanguage:a,getLoadedThemes:f,getLoadedLanguages:d,loadLanguage:y,loadLanguageSync:m,loadTheme:w,loadThemeSync:v,dispose:S,[Symbol.dispose]:S}}async function AAe(t){t.engine||wAe("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([Jq(t.themes||[]),Xq(t.langs||[]),t.engine]);return CAe({...t,themes:e,langs:n,engine:r})}async function kAe(t){const e=await AAe(t);return{getLastGrammarState:(...n)=>aAe(e,...n),codeToTokensBase:(n,r)=>AR(e,n,r),codeToTokensWithThemes:(n,r)=>Yq(e,n,r),codeToTokens:(n,r)=>tx(e,n,r),codeToHast:(n,r)=>nx(e,n,r),codeToHtml:(n,r)=>vAe(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function EAe(t){const e=t.langs,n=t.themes,r=t.engine;async function i(s){function o(d){if(typeof d=="string"){if(Hq(d))return[];d=s.langAlias?.[d]||d;const m=e[d];if(!m)throw new hn(`Language \`${d}\` is not included in this bundle. You may want to load it from external source.`);return m}return d}function a(d){if(qq(d))return"none";if(typeof d=="string"){const m=n[d];if(!m)throw new hn(`Theme \`${d}\` is not included in this bundle. You may want to load it from external source.`);return m}return d}const c=(s.themes??[]).map(d=>a(d)),h=(s.langs??[]).map(d=>o(d)),f=await kAe({engine:s.engine??r(),...s,themes:c,langs:h});return{...f,loadLanguage(...d){return f.loadLanguage(...d.map(o))},loadTheme(...d){return f.loadTheme(...d.map(a))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return i}function TAe(t){let e;async function n(r={}){if(e){const i=await e;return await Promise.all([i.loadTheme(...r.themes||[]),i.loadLanguage(...r.langs||[])]),i}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function RAe(t,e){const n=TAe(t);async function r(i,s){const o=await n({langs:[s.lang],themes:"theme"in s?[s.theme]:Object.values(s.themes)}),a=await e?.guessEmbeddedLanguages?.(i,s.lang,o);return a&&await o.loadLanguage(...a),o}return{getSingletonHighlighter(i){return n(i)},async codeToHtml(i,s){return(await r(i,s)).codeToHtml(i,s)},async codeToHast(i,s){return(await r(i,s)).codeToHast(i,s)},async codeToTokens(i,s){return(await r(i,s)).codeToTokens(i,s)},async codeToTokensBase(i,s){return(await r(i,s)).codeToTokensBase(i,s)},async codeToTokensWithThemes(i,s){return(await r(i,s)).codeToTokensWithThemes(i,s)},async getLastGrammarState(i,s){return(await n({langs:[s.lang],themes:[s.theme]})).getLastGrammarState(i,s)}}}const Qq=[{id:"abap",name:"ABAP",import:(()=>$(()=>import("./abap.js"),[]))},{id:"actionscript-3",name:"ActionScript",import:(()=>$(()=>import("./actionscript-3.js"),[]))},{id:"ada",name:"Ada",import:(()=>$(()=>import("./ada.js"),[]))},{id:"angular-html",name:"Angular HTML",import:(()=>$(()=>import("./angular-html.js").then(t=>t.f),__vite__mapDeps([0,1,2,3])))},{id:"angular-ts",name:"Angular TypeScript",import:(()=>$(()=>import("./angular-ts.js"),__vite__mapDeps([4,0,1,2,3,5])))},{id:"apache",name:"Apache Conf",import:(()=>$(()=>import("./apache.js"),[]))},{id:"apex",name:"Apex",import:(()=>$(()=>import("./apex.js"),[]))},{id:"apl",name:"APL",import:(()=>$(()=>import("./apl.js"),__vite__mapDeps([6,1,2,3,7,8,9])))},{id:"applescript",name:"AppleScript",import:(()=>$(()=>import("./applescript.js"),[]))},{id:"ara",name:"Ara",import:(()=>$(()=>import("./ara.js"),[]))},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:(()=>$(()=>import("./asciidoc.js"),[]))},{id:"asm",name:"Assembly",import:(()=>$(()=>import("./asm.js"),[]))},{id:"astro",name:"Astro",import:(()=>$(()=>import("./astro.js"),__vite__mapDeps([10,9,2,11,3,12,13])))},{id:"awk",name:"AWK",import:(()=>$(()=>import("./awk.js"),[]))},{id:"ballerina",name:"Ballerina",import:(()=>$(()=>import("./ballerina.js"),[]))},{id:"bat",name:"Batch File",aliases:["batch"],import:(()=>$(()=>import("./bat.js"),[]))},{id:"beancount",name:"Beancount",import:(()=>$(()=>import("./beancount.js"),[]))},{id:"berry",name:"Berry",aliases:["be"],import:(()=>$(()=>import("./berry.js"),[]))},{id:"bibtex",name:"BibTeX",import:(()=>$(()=>import("./bibtex.js"),[]))},{id:"bicep",name:"Bicep",import:(()=>$(()=>import("./bicep.js"),[]))},{id:"blade",name:"Blade",import:(()=>$(()=>import("./blade.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9])))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:(()=>$(()=>import("./bsl.js"),__vite__mapDeps([17,18])))},{id:"c",name:"C",import:(()=>$(()=>import("./c.js"),[]))},{id:"cadence",name:"Cadence",aliases:["cdc"],import:(()=>$(()=>import("./cadence.js"),[]))},{id:"cairo",name:"Cairo",import:(()=>$(()=>import("./cairo.js"),__vite__mapDeps([19,20])))},{id:"clarity",name:"Clarity",import:(()=>$(()=>import("./clarity.js"),[]))},{id:"clojure",name:"Clojure",aliases:["clj"],import:(()=>$(()=>import("./clojure.js"),[]))},{id:"cmake",name:"CMake",import:(()=>$(()=>import("./cmake.js"),[]))},{id:"cobol",name:"COBOL",import:(()=>$(()=>import("./cobol.js"),__vite__mapDeps([21,1,2,3,8])))},{id:"codeowners",name:"CODEOWNERS",import:(()=>$(()=>import("./codeowners.js"),[]))},{id:"codeql",name:"CodeQL",aliases:["ql"],import:(()=>$(()=>import("./codeql.js"),[]))},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:(()=>$(()=>import("./coffee.js"),__vite__mapDeps([22,2])))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:(()=>$(()=>import("./common-lisp.js"),[]))},{id:"coq",name:"Coq",import:(()=>$(()=>import("./coq.js"),[]))},{id:"cpp",name:"C++",aliases:["c++"],import:(()=>$(()=>import("./cpp.js"),__vite__mapDeps([23,24,25,26,16])))},{id:"crystal",name:"Crystal",import:(()=>$(()=>import("./crystal.js"),__vite__mapDeps([27,1,2,3,16,26,28])))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:(()=>$(()=>import("./csharp.js"),[]))},{id:"css",name:"CSS",import:(()=>$(()=>import("./css.js"),[]))},{id:"csv",name:"CSV",import:(()=>$(()=>import("./csv.js"),[]))},{id:"cue",name:"CUE",import:(()=>$(()=>import("./cue.js"),[]))},{id:"cypher",name:"Cypher",aliases:["cql"],import:(()=>$(()=>import("./cypher.js"),[]))},{id:"d",name:"D",import:(()=>$(()=>import("./d.js"),[]))},{id:"dart",name:"Dart",import:(()=>$(()=>import("./dart.js"),[]))},{id:"dax",name:"DAX",import:(()=>$(()=>import("./dax.js"),[]))},{id:"desktop",name:"Desktop",import:(()=>$(()=>import("./desktop.js"),[]))},{id:"diff",name:"Diff",import:(()=>$(()=>import("./diff.js"),[]))},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:(()=>$(()=>import("./docker.js"),[]))},{id:"dotenv",name:"dotEnv",import:(()=>$(()=>import("./dotenv.js"),[]))},{id:"dream-maker",name:"Dream Maker",import:(()=>$(()=>import("./dream-maker.js"),[]))},{id:"edge",name:"Edge",import:(()=>$(()=>import("./edge.js"),__vite__mapDeps([29,11,1,2,3,15])))},{id:"elixir",name:"Elixir",import:(()=>$(()=>import("./elixir.js"),__vite__mapDeps([30,1,2,3])))},{id:"elm",name:"Elm",import:(()=>$(()=>import("./elm.js"),__vite__mapDeps([31,25,26])))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:(()=>$(()=>import("./emacs-lisp.js"),[]))},{id:"erb",name:"ERB",import:(()=>$(()=>import("./erb.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"erlang",name:"Erlang",aliases:["erl"],import:(()=>$(()=>import("./erlang.js"),__vite__mapDeps([39,40])))},{id:"fennel",name:"Fennel",import:(()=>$(()=>import("./fennel.js"),[]))},{id:"fish",name:"Fish",import:(()=>$(()=>import("./fish.js"),[]))},{id:"fluent",name:"Fluent",aliases:["ftl"],import:(()=>$(()=>import("./fluent.js"),[]))},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:(()=>$(()=>import("./fortran-fixed-form.js"),__vite__mapDeps([41,42])))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:(()=>$(()=>import("./fortran-free-form.js"),[]))},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:(()=>$(()=>import("./fsharp.js"),__vite__mapDeps([43,40])))},{id:"gdresource",name:"GDResource",import:(()=>$(()=>import("./gdresource.js"),__vite__mapDeps([44,45,46])))},{id:"gdscript",name:"GDScript",import:(()=>$(()=>import("./gdscript.js"),[]))},{id:"gdshader",name:"GDShader",import:(()=>$(()=>import("./gdshader.js"),[]))},{id:"genie",name:"Genie",import:(()=>$(()=>import("./genie.js"),[]))},{id:"gherkin",name:"Gherkin",import:(()=>$(()=>import("./gherkin.js"),[]))},{id:"git-commit",name:"Git Commit Message",import:(()=>$(()=>import("./git-commit.js"),__vite__mapDeps([47,48])))},{id:"git-rebase",name:"Git Rebase Message",import:(()=>$(()=>import("./git-rebase.js"),__vite__mapDeps([49,28])))},{id:"gleam",name:"Gleam",import:(()=>$(()=>import("./gleam.js"),[]))},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:(()=>$(()=>import("./glimmer-js.js"),__vite__mapDeps([50,2,11,3,1])))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:(()=>$(()=>import("./glimmer-ts.js"),__vite__mapDeps([51,11,3,2,1])))},{id:"glsl",name:"GLSL",import:(()=>$(()=>import("./glsl.js"),__vite__mapDeps([25,26])))},{id:"gnuplot",name:"Gnuplot",import:(()=>$(()=>import("./gnuplot.js"),[]))},{id:"go",name:"Go",import:(()=>$(()=>import("./go.js"),[]))},{id:"graphql",name:"GraphQL",aliases:["gql"],import:(()=>$(()=>import("./graphql.js"),__vite__mapDeps([35,2,11,36,13])))},{id:"groovy",name:"Groovy",import:(()=>$(()=>import("./groovy.js"),[]))},{id:"hack",name:"Hack",import:(()=>$(()=>import("./hack.js"),__vite__mapDeps([52,1,2,3,16])))},{id:"haml",name:"Ruby Haml",import:(()=>$(()=>import("./haml.js"),__vite__mapDeps([34,2,3])))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:(()=>$(()=>import("./handlebars.js"),__vite__mapDeps([53,1,2,3,38])))},{id:"haskell",name:"Haskell",aliases:["hs"],import:(()=>$(()=>import("./haskell.js"),[]))},{id:"haxe",name:"Haxe",import:(()=>$(()=>import("./haxe.js"),[]))},{id:"hcl",name:"HashiCorp HCL",import:(()=>$(()=>import("./hcl.js"),[]))},{id:"hjson",name:"Hjson",import:(()=>$(()=>import("./hjson.js"),[]))},{id:"hlsl",name:"HLSL",import:(()=>$(()=>import("./hlsl.js"),[]))},{id:"html",name:"HTML",import:(()=>$(()=>import("./html.js"),__vite__mapDeps([1,2,3])))},{id:"html-derivative",name:"HTML (Derivative)",import:(()=>$(()=>import("./html-derivative.js"),__vite__mapDeps([15,1,2,3])))},{id:"http",name:"HTTP",import:(()=>$(()=>import("./http.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13])))},{id:"hxml",name:"HXML",import:(()=>$(()=>import("./hxml.js"),__vite__mapDeps([55,56])))},{id:"hy",name:"Hy",import:(()=>$(()=>import("./hy.js"),[]))},{id:"imba",name:"Imba",import:(()=>$(()=>import("./imba.js"),[]))},{id:"ini",name:"INI",aliases:["properties"],import:(()=>$(()=>import("./ini.js"),[]))},{id:"java",name:"Java",import:(()=>$(()=>import("./java.js"),[]))},{id:"javascript",name:"JavaScript",aliases:["js"],import:(()=>$(()=>import("./javascript.js"),[]))},{id:"jinja",name:"Jinja",import:(()=>$(()=>import("./jinja.js"),__vite__mapDeps([57,1,2,3])))},{id:"jison",name:"Jison",import:(()=>$(()=>import("./jison.js"),__vite__mapDeps([58,2])))},{id:"json",name:"JSON",import:(()=>$(()=>import("./json.js"),[]))},{id:"json5",name:"JSON5",import:(()=>$(()=>import("./json5.js"),[]))},{id:"jsonc",name:"JSON with Comments",import:(()=>$(()=>import("./jsonc.js"),[]))},{id:"jsonl",name:"JSON Lines",import:(()=>$(()=>import("./jsonl.js"),[]))},{id:"jsonnet",name:"Jsonnet",import:(()=>$(()=>import("./jsonnet.js"),[]))},{id:"jssm",name:"JSSM",aliases:["fsl"],import:(()=>$(()=>import("./jssm.js"),[]))},{id:"jsx",name:"JSX",import:(()=>$(()=>import("./jsx.js"),[]))},{id:"julia",name:"Julia",aliases:["jl"],import:(()=>$(()=>import("./julia.js"),__vite__mapDeps([59,23,24,25,26,16,20,2,60])))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:(()=>$(()=>import("./kotlin.js"),[]))},{id:"kusto",name:"Kusto",aliases:["kql"],import:(()=>$(()=>import("./kusto.js"),[]))},{id:"latex",name:"LaTeX",import:(()=>$(()=>import("./latex.js"),__vite__mapDeps([61,62,60])))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:(()=>$(()=>import("./lean.js"),[]))},{id:"less",name:"Less",import:(()=>$(()=>import("./less.js"),[]))},{id:"liquid",name:"Liquid",import:(()=>$(()=>import("./liquid.js"),__vite__mapDeps([63,1,2,3,9])))},{id:"llvm",name:"LLVM IR",import:(()=>$(()=>import("./llvm.js"),[]))},{id:"log",name:"Log file",import:(()=>$(()=>import("./log.js"),[]))},{id:"logo",name:"Logo",import:(()=>$(()=>import("./logo.js"),[]))},{id:"lua",name:"Lua",import:(()=>$(()=>import("./lua.js"),__vite__mapDeps([37,26])))},{id:"luau",name:"Luau",import:(()=>$(()=>import("./luau.js"),[]))},{id:"make",name:"Makefile",aliases:["makefile"],import:(()=>$(()=>import("./make.js"),[]))},{id:"markdown",name:"Markdown",aliases:["md"],import:(()=>$(()=>import("./markdown.js"),[]))},{id:"marko",name:"Marko",import:(()=>$(()=>import("./marko.js"),__vite__mapDeps([64,3,65,5,11])))},{id:"matlab",name:"MATLAB",import:(()=>$(()=>import("./matlab.js"),[]))},{id:"mdc",name:"MDC",import:(()=>$(()=>import("./mdc.js"),__vite__mapDeps([66,40,38,15,1,2,3])))},{id:"mdx",name:"MDX",import:(()=>$(()=>import("./mdx.js"),[]))},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:(()=>$(()=>import("./mermaid.js"),[]))},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:(()=>$(()=>import("./mipsasm.js"),[]))},{id:"mojo",name:"Mojo",import:(()=>$(()=>import("./mojo.js"),[]))},{id:"move",name:"Move",import:(()=>$(()=>import("./move.js"),[]))},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:(()=>$(()=>import("./narrat.js"),[]))},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:(()=>$(()=>import("./nextflow.js"),[]))},{id:"nginx",name:"Nginx",import:(()=>$(()=>import("./nginx.js"),__vite__mapDeps([67,37,26])))},{id:"nim",name:"Nim",import:(()=>$(()=>import("./nim.js"),__vite__mapDeps([68,26,1,2,3,7,8,25,40])))},{id:"nix",name:"Nix",import:(()=>$(()=>import("./nix.js"),[]))},{id:"nushell",name:"nushell",aliases:["nu"],import:(()=>$(()=>import("./nushell.js"),[]))},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:(()=>$(()=>import("./objective-c.js"),[]))},{id:"objective-cpp",name:"Objective-C++",import:(()=>$(()=>import("./objective-cpp.js"),[]))},{id:"ocaml",name:"OCaml",import:(()=>$(()=>import("./ocaml.js"),[]))},{id:"pascal",name:"Pascal",import:(()=>$(()=>import("./pascal.js"),[]))},{id:"perl",name:"Perl",import:(()=>$(()=>import("./perl.js"),__vite__mapDeps([69,1,2,3,7,8,16])))},{id:"php",name:"PHP",import:(()=>$(()=>import("./php.js"),__vite__mapDeps([70,1,2,3,7,8,16,9])))},{id:"plsql",name:"PL/SQL",import:(()=>$(()=>import("./plsql.js"),[]))},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:(()=>$(()=>import("./po.js"),[]))},{id:"polar",name:"Polar",import:(()=>$(()=>import("./polar.js"),[]))},{id:"postcss",name:"PostCSS",import:(()=>$(()=>import("./postcss.js"),[]))},{id:"powerquery",name:"PowerQuery",import:(()=>$(()=>import("./powerquery.js"),[]))},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:(()=>$(()=>import("./powershell.js"),[]))},{id:"prisma",name:"Prisma",import:(()=>$(()=>import("./prisma.js"),[]))},{id:"prolog",name:"Prolog",import:(()=>$(()=>import("./prolog.js"),[]))},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:(()=>$(()=>import("./proto.js"),[]))},{id:"pug",name:"Pug",aliases:["jade"],import:(()=>$(()=>import("./pug.js"),__vite__mapDeps([71,2,3,1])))},{id:"puppet",name:"Puppet",import:(()=>$(()=>import("./puppet.js"),[]))},{id:"purescript",name:"PureScript",import:(()=>$(()=>import("./purescript.js"),[]))},{id:"python",name:"Python",aliases:["py"],import:(()=>$(()=>import("./python.js"),[]))},{id:"qml",name:"QML",import:(()=>$(()=>import("./qml.js"),__vite__mapDeps([72,2])))},{id:"qmldir",name:"QML Directory",import:(()=>$(()=>import("./qmldir.js"),[]))},{id:"qss",name:"Qt Style Sheets",import:(()=>$(()=>import("./qss.js"),[]))},{id:"r",name:"R",import:(()=>$(()=>import("./r.js"),[]))},{id:"racket",name:"Racket",import:(()=>$(()=>import("./racket.js"),[]))},{id:"raku",name:"Raku",aliases:["perl6"],import:(()=>$(()=>import("./raku.js"),[]))},{id:"razor",name:"ASP.NET Razor",import:(()=>$(()=>import("./razor.js"),__vite__mapDeps([73,1,2,3,74])))},{id:"reg",name:"Windows Registry Script",import:(()=>$(()=>import("./reg.js"),[]))},{id:"regexp",name:"RegExp",aliases:["regex"],import:(()=>$(()=>import("./regexp.js"),[]))},{id:"rel",name:"Rel",import:(()=>$(()=>import("./rel.js"),[]))},{id:"riscv",name:"RISC-V",import:(()=>$(()=>import("./riscv.js"),[]))},{id:"rst",name:"reStructuredText",import:(()=>$(()=>import("./rst.js"),__vite__mapDeps([75,15,1,2,3,23,24,25,26,16,20,28,38,76,33,34,7,8,35,11,36,13,37])))},{id:"ruby",name:"Ruby",aliases:["rb"],import:(()=>$(()=>import("./ruby.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38])))},{id:"rust",name:"Rust",aliases:["rs"],import:(()=>$(()=>import("./rust.js"),[]))},{id:"sas",name:"SAS",import:(()=>$(()=>import("./sas.js"),__vite__mapDeps([77,16])))},{id:"sass",name:"Sass",import:(()=>$(()=>import("./sass.js"),[]))},{id:"scala",name:"Scala",import:(()=>$(()=>import("./scala.js"),[]))},{id:"scheme",name:"Scheme",import:(()=>$(()=>import("./scheme.js"),[]))},{id:"scss",name:"SCSS",import:(()=>$(()=>import("./scss.js"),__vite__mapDeps([5,3])))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:(()=>$(()=>import("./sdbl.js"),[]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:(()=>$(()=>import("./shaderlab.js"),__vite__mapDeps([78,79])))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:(()=>$(()=>import("./shellscript.js"),[]))},{id:"shellsession",name:"Shell Session",aliases:["console"],import:(()=>$(()=>import("./shellsession.js"),__vite__mapDeps([80,28])))},{id:"smalltalk",name:"Smalltalk",import:(()=>$(()=>import("./smalltalk.js"),[]))},{id:"solidity",name:"Solidity",import:(()=>$(()=>import("./solidity.js"),[]))},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:(()=>$(()=>import("./soy.js"),__vite__mapDeps([81,1,2,3])))},{id:"sparql",name:"SPARQL",import:(()=>$(()=>import("./sparql.js"),__vite__mapDeps([82,83])))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:(()=>$(()=>import("./splunk.js"),[]))},{id:"sql",name:"SQL",import:(()=>$(()=>import("./sql.js"),[]))},{id:"ssh-config",name:"SSH Config",import:(()=>$(()=>import("./ssh-config.js"),[]))},{id:"stata",name:"Stata",import:(()=>$(()=>import("./stata.js"),__vite__mapDeps([84,16])))},{id:"stylus",name:"Stylus",aliases:["styl"],import:(()=>$(()=>import("./stylus.js"),[]))},{id:"svelte",name:"Svelte",import:(()=>$(()=>import("./svelte.js"),__vite__mapDeps([85,2,11,3,12])))},{id:"swift",name:"Swift",import:(()=>$(()=>import("./swift.js"),[]))},{id:"system-verilog",name:"SystemVerilog",import:(()=>$(()=>import("./system-verilog.js"),[]))},{id:"systemd",name:"Systemd Units",import:(()=>$(()=>import("./systemd.js"),[]))},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:(()=>$(()=>import("./talonscript.js"),[]))},{id:"tasl",name:"Tasl",import:(()=>$(()=>import("./tasl.js"),[]))},{id:"tcl",name:"Tcl",import:(()=>$(()=>import("./tcl.js"),[]))},{id:"templ",name:"Templ",import:(()=>$(()=>import("./templ.js"),__vite__mapDeps([86,87,2,3])))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:(()=>$(()=>import("./terraform.js"),[]))},{id:"tex",name:"TeX",import:(()=>$(()=>import("./tex.js"),__vite__mapDeps([62,60])))},{id:"toml",name:"TOML",import:(()=>$(()=>import("./toml.js"),[]))},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:(()=>$(()=>import("./ts-tags.js"),__vite__mapDeps([88,11,3,2,25,26,1,16,7,8])))},{id:"tsv",name:"TSV",import:(()=>$(()=>import("./tsv.js"),[]))},{id:"tsx",name:"TSX",import:(()=>$(()=>import("./tsx.js"),[]))},{id:"turtle",name:"Turtle",import:(()=>$(()=>import("./turtle.js"),[]))},{id:"twig",name:"Twig",import:(()=>$(()=>import("./twig.js"),__vite__mapDeps([89,3,2,5,70,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38])))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:(()=>$(()=>import("./typescript.js"),[]))},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:(()=>$(()=>import("./typespec.js"),[]))},{id:"typst",name:"Typst",aliases:["typ"],import:(()=>$(()=>import("./typst.js"),[]))},{id:"v",name:"V",import:(()=>$(()=>import("./v.js"),[]))},{id:"vala",name:"Vala",import:(()=>$(()=>import("./vala.js"),[]))},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:(()=>$(()=>import("./vb.js"),[]))},{id:"verilog",name:"Verilog",import:(()=>$(()=>import("./verilog.js"),[]))},{id:"vhdl",name:"VHDL",import:(()=>$(()=>import("./vhdl.js"),[]))},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:(()=>$(()=>import("./viml.js"),[]))},{id:"vue",name:"Vue",import:(()=>$(()=>import("./vue.js"),__vite__mapDeps([90,3,2,11,9,15,1])))},{id:"vue-html",name:"Vue HTML",import:(()=>$(()=>import("./vue-html.js"),__vite__mapDeps([91,90,3,2,11,9,15,1])))},{id:"vue-vine",name:"Vue Vine",import:(()=>$(()=>import("./vue-vine.js"),__vite__mapDeps([92,3,5,65,93,12,90,2,11,9,15,1])))},{id:"vyper",name:"Vyper",aliases:["vy"],import:(()=>$(()=>import("./vyper.js"),[]))},{id:"wasm",name:"WebAssembly",import:(()=>$(()=>import("./wasm.js"),[]))},{id:"wenyan",name:"Wenyan",aliases:[""],import:(()=>$(()=>import("./wenyan.js"),[]))},{id:"wgsl",name:"WGSL",import:(()=>$(()=>import("./wgsl.js"),[]))},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:(()=>$(()=>import("./wikitext.js"),[]))},{id:"wit",name:"WebAssembly Interface Types",import:(()=>$(()=>import("./wit.js"),[]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:(()=>$(()=>import("./wolfram.js"),[]))},{id:"xml",name:"XML",import:(()=>$(()=>import("./xml.js"),__vite__mapDeps([7,8])))},{id:"xsl",name:"XSL",import:(()=>$(()=>import("./xsl.js"),__vite__mapDeps([94,7,8])))},{id:"yaml",name:"YAML",aliases:["yml"],import:(()=>$(()=>import("./yaml.js"),[]))},{id:"zenscript",name:"ZenScript",import:(()=>$(()=>import("./zenscript.js"),[]))},{id:"zig",name:"Zig",import:(()=>$(()=>import("./zig.js"),[]))}],MAe=Object.fromEntries(Qq.map(t=>[t.id,t.import])),OAe=Object.fromEntries(Qq.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),PAe={...MAe,...OAe},DAe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:(()=>$(()=>import("./andromeeda.js"),[]))},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:(()=>$(()=>import("./aurora-x.js"),[]))},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:(()=>$(()=>import("./ayu-dark.js"),[]))},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:(()=>$(()=>import("./catppuccin-frappe.js"),[]))},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:(()=>$(()=>import("./catppuccin-latte.js"),[]))},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:(()=>$(()=>import("./catppuccin-macchiato.js"),[]))},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:(()=>$(()=>import("./catppuccin-mocha.js"),[]))},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:(()=>$(()=>import("./dark-plus.js"),[]))},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:(()=>$(()=>import("./dracula.js"),[]))},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:(()=>$(()=>import("./dracula-soft.js"),[]))},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:(()=>$(()=>import("./everforest-dark.js"),[]))},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:(()=>$(()=>import("./everforest-light.js"),[]))},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:(()=>$(()=>import("./github-dark.js"),[]))},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:(()=>$(()=>import("./github-dark-default.js"),[]))},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:(()=>$(()=>import("./github-dark-dimmed.js"),[]))},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:(()=>$(()=>import("./github-dark-high-contrast.js"),[]))},{id:"github-light",displayName:"GitHub Light",type:"light",import:(()=>$(()=>import("./github-light.js"),[]))},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:(()=>$(()=>import("./github-light-default.js"),[]))},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:(()=>$(()=>import("./github-light-high-contrast.js"),[]))},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:(()=>$(()=>import("./gruvbox-dark-hard.js"),[]))},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:(()=>$(()=>import("./gruvbox-dark-medium.js"),[]))},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:(()=>$(()=>import("./gruvbox-dark-soft.js"),[]))},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:(()=>$(()=>import("./gruvbox-light-hard.js"),[]))},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:(()=>$(()=>import("./gruvbox-light-medium.js"),[]))},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:(()=>$(()=>import("./gruvbox-light-soft.js"),[]))},{id:"houston",displayName:"Houston",type:"dark",import:(()=>$(()=>import("./houston.js"),[]))},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:(()=>$(()=>import("./kanagawa-dragon.js"),[]))},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:(()=>$(()=>import("./kanagawa-lotus.js"),[]))},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:(()=>$(()=>import("./kanagawa-wave.js"),[]))},{id:"laserwave",displayName:"LaserWave",type:"dark",import:(()=>$(()=>import("./laserwave.js"),[]))},{id:"light-plus",displayName:"Light Plus",type:"light",import:(()=>$(()=>import("./light-plus.js"),[]))},{id:"material-theme",displayName:"Material Theme",type:"dark",import:(()=>$(()=>import("./material-theme.js"),[]))},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:(()=>$(()=>import("./material-theme-darker.js"),[]))},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:(()=>$(()=>import("./material-theme-lighter.js"),[]))},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:(()=>$(()=>import("./material-theme-ocean.js"),[]))},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:(()=>$(()=>import("./material-theme-palenight.js"),[]))},{id:"min-dark",displayName:"Min Dark",type:"dark",import:(()=>$(()=>import("./min-dark.js"),[]))},{id:"min-light",displayName:"Min Light",type:"light",import:(()=>$(()=>import("./min-light.js"),[]))},{id:"monokai",displayName:"Monokai",type:"dark",import:(()=>$(()=>import("./monokai.js"),[]))},{id:"night-owl",displayName:"Night Owl",type:"dark",import:(()=>$(()=>import("./night-owl.js"),[]))},{id:"nord",displayName:"Nord",type:"dark",import:(()=>$(()=>import("./nord.js"),[]))},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:(()=>$(()=>import("./one-dark-pro.js"),[]))},{id:"one-light",displayName:"One Light",type:"light",import:(()=>$(()=>import("./one-light.js"),[]))},{id:"plastic",displayName:"Plastic",type:"dark",import:(()=>$(()=>import("./plastic.js"),[]))},{id:"poimandres",displayName:"Poimandres",type:"dark",import:(()=>$(()=>import("./poimandres.js"),[]))},{id:"red",displayName:"Red",type:"dark",import:(()=>$(()=>import("./red.js"),[]))},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:(()=>$(()=>import("./rose-pine.js"),[]))},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:(()=>$(()=>import("./rose-pine-dawn.js"),[]))},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:(()=>$(()=>import("./rose-pine-moon.js"),[]))},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:(()=>$(()=>import("./slack-dark.js"),[]))},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:(()=>$(()=>import("./slack-ochin.js"),[]))},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:(()=>$(()=>import("./snazzy-light.js"),[]))},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:(()=>$(()=>import("./solarized-dark.js"),[]))},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:(()=>$(()=>import("./solarized-light.js"),[]))},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:(()=>$(()=>import("./synthwave-84.js"),[]))},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:(()=>$(()=>import("./tokyo-night.js"),[]))},{id:"vesper",displayName:"Vesper",type:"dark",import:(()=>$(()=>import("./vesper.js"),[]))},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:(()=>$(()=>import("./vitesse-black.js"),[]))},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:(()=>$(()=>import("./vitesse-dark.js"),[]))},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:(()=>$(()=>import("./vitesse-light.js"),[]))}],LAe=Object.fromEntries(DAe.map(t=>[t.id,t.import]));class ER extends Error{constructor(e){super(e),this.name="ShikiError"}}function IAe(){return 2147483648}function NAe(){return typeof performance<"u"?performance.now():Date.now()}const BAe=(t,e)=>t+(e-t%e)%e;async function jAe(t){let e,n;const r={};function i(y){n=y,r.HEAPU8=new Uint8Array(y),r.HEAPU32=new Uint32Array(y)}function s(y,v,w){r.HEAPU8.copyWithin(y,v,v+w)}function o(y){try{return e.grow(y-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(y){const v=r.HEAPU8.length;y=y>>>0;const w=IAe();if(y>w)return!1;for(let _=1;_<=4;_*=2){let S=v*(1+.2/_);S=Math.min(S,y+100663296);const A=Math.min(w,BAe(Math.max(y,S),65536));if(o(A))return!0}return!1}const c=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(y,v,w=1024){const _=v+w;let S=v;for(;y[S]&&!(S>=_);)++S;if(S-v>16&&y.buffer&&c)return c.decode(y.subarray(v,S));let A="";for(;v<S;){let k=y[v++];if(!(k&128)){A+=String.fromCharCode(k);continue}const P=y[v++]&63;if((k&224)===192){A+=String.fromCharCode((k&31)<<6|P);continue}const M=y[v++]&63;if((k&240)===224?k=(k&15)<<12|P<<6|M:k=(k&7)<<18|P<<12|M<<6|y[v++]&63,k<65536)A+=String.fromCharCode(k);else{const O=k-65536;A+=String.fromCharCode(55296|O>>10,56320|O&1023)}}return A}function f(y,v){return y?h(r.HEAPU8,y,v):""}const d={emscripten_get_now:NAe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function m(){const v=await t({env:d,wasi_snapshot_preview1:d});e=v.memory,i(e.buffer),Object.assign(r,v),r.UTF8ToString=f}return await m(),r}var $Ae=Object.defineProperty,VAe=(t,e,n)=>e in t?$Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cn=(t,e,n)=>VAe(t,typeof e!="symbol"?e+"":e,n);let In=null;function FAe(t){throw new ER(t.UTF8ToString(t.getLastOnigError()))}class pw{constructor(e){Cn(this,"utf16Length"),Cn(this,"utf8Length"),Cn(this,"utf16Value"),Cn(this,"utf8Value"),Cn(this,"utf16OffsetToUtf8"),Cn(this,"utf8OffsetToUtf16");const n=e.length,r=pw._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let c=0;for(let h=0;h<n;h++){const f=e.charCodeAt(h);let d=f,m=!1;if(f>=55296&&f<=56319&&h+1<n){const y=e.charCodeAt(h+1);y>=56320&&y<=57343&&(d=(f-55296<<10)+65536|y-56320,m=!0)}i&&(s[h]=c,m&&(s[h+1]=c),d<=127?o[c+0]=h:d<=2047?(o[c+0]=h,o[c+1]=h):d<=65535?(o[c+0]=h,o[c+1]=h,o[c+2]=h):(o[c+0]=h,o[c+1]=h,o[c+2]=h,o[c+3]=h)),d<=127?a[c++]=d:d<=2047?(a[c++]=192|(d&1984)>>>6,a[c++]=128|(d&63)>>>0):d<=65535?(a[c++]=224|(d&61440)>>>12,a[c++]=128|(d&4032)>>>6,a[c++]=128|(d&63)>>>0):(a[c++]=240|(d&1835008)>>>18,a[c++]=128|(d&258048)>>>12,a[c++]=128|(d&4032)>>>6,a[c++]=128|(d&63)>>>0),m&&h++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const c=e.charCodeAt(r+1);c>=56320&&c<=57343&&(o=(s-55296<<10)+65536|c-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const mw=class Gs{constructor(e){if(Cn(this,"id",++Gs.LAST_ID),Cn(this,"_onigBinding"),Cn(this,"content"),Cn(this,"utf16Length"),Cn(this,"utf8Length"),Cn(this,"utf16OffsetToUtf8"),Cn(this,"utf8OffsetToUtf16"),Cn(this,"ptr"),!In)throw new ER("Must invoke loadWasm first.");this._onigBinding=In,this.content=e;const n=new pw(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Gs._sharedPtrInUse?(Gs._sharedPtr||(Gs._sharedPtr=In.omalloc(1e4)),Gs._sharedPtrInUse=!0,In.HEAPU8.set(n.utf8Value,Gs._sharedPtr),this.ptr=Gs._sharedPtr):this.ptr=n.createString(In)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Gs._sharedPtr?Gs._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};Cn(mw,"LAST_ID",0);Cn(mw,"_sharedPtr",0);Cn(mw,"_sharedPtrInUse",!1);let Zq=mw;class zAe{constructor(e){if(Cn(this,"_onigBinding"),Cn(this,"_ptr"),!In)throw new ER("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,c=e.length;a<c;a++){const h=new pw(e[a]);n[a]=h.createString(In),r[a]=h.utf8Length}const i=In.omalloc(4*e.length);In.HEAPU32.set(n,i/4);const s=In.omalloc(4*e.length);In.HEAPU32.set(r,s/4);const o=In.createOnigScanner(i,s,e.length);for(let a=0,c=e.length;a<c;a++)In.ofree(n[a]);In.ofree(s),In.ofree(i),o===0&&FAe(In),this._onigBinding=In,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new Zq(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let c=o/4;const h=a[c++],f=a[c++],d=[];for(let m=0;m<f;m++){const y=e.convertUtf8OffsetToUtf16(a[c++]),v=e.convertUtf8OffsetToUtf16(a[c++]);d[m]={start:y,end:v,length:v-y}}return{index:h,captureIndices:d}}}function UAe(t){return typeof t.instantiator=="function"}function HAe(t){return typeof t.default=="function"}function qAe(t){return typeof t.data<"u"}function WAe(t){return typeof Response<"u"&&t instanceof Response}function GAe(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let qy;function KAe(t){if(qy)return qy;async function e(){In=await jAe(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),UAe(r)?r=await r.instantiator(n):HAe(r)?r=await r.default(n):(qAe(r)&&(r=r.data),WAe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await YAe(r)(n):r=await XAe(r)(n):GAe(r)?r=await M_(r)(n):r instanceof WebAssembly.Module?r=await M_(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await M_(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return qy=e(),qy}function M_(t){return e=>WebAssembly.instantiate(t,e)}function YAe(t){return e=>WebAssembly.instantiateStreaming(t,e)}function XAe(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}async function JAe(t){return t&&await KAe(t),{createScanner(e){return new zAe(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new Zq(e)}}}const QAe=EAe({langs:PAe,themes:LAe,engine:()=>JAe($(()=>import("./wasm2.js"),[]))}),{getSingletonHighlighter:Q5}=RAe(QAe,{guessEmbeddedLanguages:UCe});async function ZAe(t,e){try{return await Q5({langs:[t],themes:e})}catch(n){if(n instanceof Error&&n.message.includes("Language"))return await Q5({langs:["plaintext"],themes:e});throw n}}var eW=(t,e,n,r={})=>G2e(t,e,n,ZAe,r),eke=Y2e(eW),tke=eke;const tW=({code:t,language:e,theme:n={dark:"kanagawa-wave",light:"kanagawa-lotus"},className:r,addDefaultStyles:i=!0,showLanguage:s=!1,...o})=>{const a="aui-shiki-base [&_pre]:overflow-x-auto [&_pre]:rounded-b-lg [&_pre]:!bg-muted/75 [&_pre]:p-4";return eW(t,e,n)?C.jsx(tke,{...o,language:e,theme:n,addDefaultStyles:i,showLanguage:s,defaultColor:"light-dark()",className:Ye(a,r),children:t.trim()}):C.jsx("div",{className:"px-[12px] pb-[12px] bg-[var(--chat-message-code-block-background-color)] rounded-b-[12px]",children:C.jsx("pre",{className:Ye("overflow-x-auto bg-[var(--chat-message-code-block-pre-background-color)] border border-[var(--chat-message-code-block-border-color)] rounded-[4px] p-[6px]",r),children:t.trim()})})};tW.displayName="SyntaxHighlighter";const rx="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5%2010.0078C18.3284%2010.0078%2019%2010.6794%2019%2011.5078V17.5039C18.9999%2018.3323%2018.3284%2019.0039%2017.5%2019.0039H11.5C10.6716%2019.0039%2010.0001%2018.3323%2010%2017.5039V11.5078C10%2010.6794%2010.6716%2010.0078%2011.5%2010.0078H17.5ZM11.5%2011.0078C11.2239%2011.0078%2011%2011.2317%2011%2011.5078V17.5039C11.0001%2017.78%2011.2239%2018.0039%2011.5%2018.0039H17.5C17.7761%2018.0039%2017.9999%2017.78%2018%2017.5039V11.5078C18%2011.2317%2017.7761%2011.0078%2017.5%2011.0078H11.5ZM12.5%205.00781C13.3284%205.00781%2014%205.67939%2014%206.50781V8.50391C13.9999%208.77999%2013.7761%209.00391%2013.5%209.00391C13.2239%209.00391%2013.0001%208.77999%2013%208.50391V6.50781C13%206.23167%2012.7761%206.00781%2012.5%206.00781H6.5C6.22386%206.00781%206%206.23167%206%206.50781V12.5039C6.00006%2012.78%206.22389%2013.0039%206.5%2013.0039H8.5C8.77614%2013.0039%209%2013.2278%209%2013.5039C8.99993%2013.78%208.7761%2014.0039%208.5%2014.0039H6.5C5.67161%2014.0039%205.00006%2013.3323%205%2012.5039V6.50781C5%205.67939%205.67157%205.00781%206.5%205.00781H12.5Z'%20fill='%23383838'/%3e%3c/svg%3e";var nke=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rke="VisuallyHidden",nW=E.forwardRef((t,e)=>C.jsx(st.span,{...t,ref:e,style:{...nke,...t.style}}));nW.displayName=rke;var ike=nW,[gw]=ra("Tooltip",[vx]),yw=vx(),rW="TooltipProvider",ske=700,dk="tooltip.open",[oke,TR]=gw(rW),iW=t=>{const{__scopeTooltip:e,delayDuration:n=ske,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=E.useRef(!0),a=E.useRef(!1),c=E.useRef(0);return E.useEffect(()=>{const h=c.current;return()=>window.clearTimeout(h)},[]),C.jsx(oke,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:E.useCallback(h=>{a.current=h},[]),disableHoverableContent:i,children:s})};iW.displayName=rW;var km="Tooltip",[ake,tg]=gw(km),sW=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,c=TR(km,t.__scopeTooltip),h=yw(e),[f,d]=E.useState(null),m=ol(),y=E.useRef(0),v=o??c.disableHoverableContent,w=a??c.delayDuration,_=E.useRef(!1),[S,A]=Hh({prop:r,defaultProp:i??!1,onChange:L=>{L?(c.onOpen(),document.dispatchEvent(new CustomEvent(dk))):c.onClose(),s?.(L)},caller:km}),k=E.useMemo(()=>S?_.current?"delayed-open":"instant-open":"closed",[S]),P=E.useCallback(()=>{window.clearTimeout(y.current),y.current=0,_.current=!1,A(!0)},[A]),M=E.useCallback(()=>{window.clearTimeout(y.current),y.current=0,A(!1)},[A]),O=E.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{_.current=!0,A(!0),y.current=0},w)},[w,A]);return E.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),C.jsx(Rj,{...h,children:C.jsx(ake,{scope:e,contentId:m,open:S,stateAttribute:k,trigger:f,onTriggerChange:d,onTriggerEnter:E.useCallback(()=>{c.isOpenDelayedRef.current?O():P()},[c.isOpenDelayedRef,O,P]),onTriggerLeave:E.useCallback(()=>{v?M():(window.clearTimeout(y.current),y.current=0)},[M,v]),onOpen:P,onClose:M,disableHoverableContent:v,children:n})})};sW.displayName=km;var pk="TooltipTrigger",oW=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=tg(pk,n),s=TR(pk,n),o=yw(n),a=E.useRef(null),c=Bt(e,a,i.onTriggerChange),h=E.useRef(!1),f=E.useRef(!1),d=E.useCallback(()=>h.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),C.jsx(Mj,{asChild:!0,...o,children:C.jsx(st.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:Ie(t.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ie(t.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:Ie(t.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ie(t.onFocus,()=>{h.current||i.onOpen()}),onBlur:Ie(t.onBlur,i.onClose),onClick:Ie(t.onClick,i.onClose)})})});oW.displayName=pk;var RR="TooltipPortal",[lke,cke]=gw(RR,{forceMount:void 0}),aW=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=tg(RR,e);return C.jsx(lke,{scope:e,forceMount:n,children:C.jsx(ks,{present:n||s.open,children:C.jsx(xx,{asChild:!0,container:i,children:r})})})};aW.displayName=RR;var Fh="TooltipContent",lW=E.forwardRef((t,e)=>{const n=cke(Fh,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=tg(Fh,t.__scopeTooltip);return C.jsx(ks,{present:r||o.open,children:o.disableHoverableContent?C.jsx(cW,{side:i,...s,ref:e}):C.jsx(uke,{side:i,...s,ref:e})})}),uke=E.forwardRef((t,e)=>{const n=tg(Fh,t.__scopeTooltip),r=TR(Fh,t.__scopeTooltip),i=E.useRef(null),s=Bt(e,i),[o,a]=E.useState(null),{trigger:c,onClose:h}=n,f=i.current,{onPointerInTransitChange:d}=r,m=E.useCallback(()=>{a(null),d(!1)},[d]),y=E.useCallback((v,w)=>{const _=v.currentTarget,S={x:v.clientX,y:v.clientY},A=mke(S,_.getBoundingClientRect()),k=gke(S,A),P=yke(w.getBoundingClientRect()),M=vke([...k,...P]);a(M),d(!0)},[d]);return E.useEffect(()=>()=>m(),[m]),E.useEffect(()=>{if(c&&f){const v=_=>y(_,f),w=_=>y(_,c);return c.addEventListener("pointerleave",v),f.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",w)}}},[c,f,y,m]),E.useEffect(()=>{if(o){const v=w=>{const _=w.target,S={x:w.clientX,y:w.clientY},A=c?.contains(_)||f?.contains(_),k=!bke(S,o);A?m():k&&(m(),h())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,f,o,h,m]),C.jsx(cW,{...t,ref:s})}),[hke,fke]=gw(km,{isInside:!1}),dke=PX("TooltipContent"),cW=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=tg(Fh,n),h=yw(n),{onClose:f}=c;return E.useEffect(()=>(document.addEventListener(dk,f),()=>document.removeEventListener(dk,f)),[f]),E.useEffect(()=>{if(c.trigger){const d=m=>{m.target?.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),C.jsx(px,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:C.jsxs(Oj,{"data-state":c.stateAttribute,...h,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx(dke,{children:r}),C.jsx(hke,{scope:n,isInside:!0,children:C.jsx(ike,{id:c.contentId,role:"tooltip",children:i||r})})]})})});lW.displayName=Fh;var uW="TooltipArrow",pke=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=yw(n);return fke(uW,n).isInside?null:C.jsx(Pj,{...i,...r,ref:e})});pke.displayName=uW;function mke(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function gke(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function yke(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function bke(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],h=a.x,f=a.y,d=c.x,m=c.y;f>r!=m>r&&n<(d-h)*(r-f)/(m-f)+h&&(i=!i)}return i}function vke(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),xke(e)}function xke(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var wke=iW,Ske=sW,_ke=oW,Cke=aW,Ake=lW;const kke=({delayDuration:t=0,...e})=>C.jsx(wke,{"data-slot":"tooltip-provider",delayDuration:t,...e}),Eke=({...t})=>C.jsx(kke,{children:C.jsx(Ske,{"data-slot":"tooltip",...t})}),Tke=({...t})=>C.jsx(_ke,{"data-slot":"tooltip-trigger",...t}),Rke=({className:t,sideOffset:e=0,children:n,...r})=>C.jsx(Cke,{container:document.getElementById("app"),children:C.jsx(Ake,{"data-slot":"tooltip-content",sideOffset:e,className:Ye("mt-[4px]","bg-[var(--tooltip-background-color)] text-[var(--tooltip-text-color)] p-[4px] rounded-[4px] text-[12px] font-[400] leading-[16px]",t),...r,children:n})}),ta=E.forwardRef(({children:t,tooltip:e,side:n="bottom",visible:r=!0,className:i,...s},o)=>C.jsxs(Eke,{children:[C.jsx(Tke,{asChild:!0,children:C.jsx("div",{className:Ye("flex items-center gap-2",i),ref:o,...s,children:t})}),C.jsx(Rke,{className:r?"":"hidden",side:n,children:e})]}));ta.displayName="TooltipIconButton";const Mke=({copiedDuration:t=3e3}={})=>{const[e,n]=E.useState(!1);return{isCopied:e,copyToClipboard:i=>{i&&navigator.clipboard.writeText(i).then(()=>{n(!0),setTimeout(()=>n(!1),t)})}}},Oke=({language:t,code:e})=>{const{isCopied:n,copyToClipboard:r}=Mke(),i=()=>{!e||n||r(e)};return C.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 rounded-t-lg bg-[var(--chat-message-code-block-background-color)] text-[var(--chat-message-code-block-header-color)] text-[14px] leading-[20px] px-[12px] pt-[12px] pb-[8px]",children:[C.jsx("span",{className:"lowercase",children:t}),C.jsxs(ta,{tooltip:"Copy",onClick:i,visible:!n,children:[!n&&C.jsx(fn,{className:"cursor-pointer",src:rx}),n&&C.jsx(fn,{src:Rh})]})]})},Pke=E2e({SyntaxHighlighter:tW,h1:({className:t,...e})=>C.jsx("h1",{className:Ye("mb-8 scroll-m-20 text-[28px] leading-[36px] font-bold last:mb-0",t),...e}),h2:({className:t,...e})=>C.jsx("h2",{className:Ye("mb-4 mt-8 scroll-m-20 text-[24px] leading-[32px] font-bold first:mt-0 last:mb-0",t),...e}),h3:({className:t,...e})=>C.jsx("h3",{className:Ye("mb-4 mt-6 scroll-m-20 text-[20px] leading-[28px] font-bold first:mt-0 last:mb-0",t),...e}),h4:({className:t,...e})=>C.jsx("h4",{className:Ye("mb-4 mt-6 scroll-m-20 text-[18px] leading-[24px] font-bold first:mt-0 last:mb-0",t),...e}),h5:({className:t,...e})=>C.jsx("h5",{className:Ye("my-4 text-[16px] leading-[22px] font-bold first:mt-0 last:mb-0",t),...e}),h6:({className:t,...e})=>C.jsx("h6",{className:Ye("my-4 text-[14px] leading-[20px] font-bold first:mt-0 last:mb-0",t),...e}),p:({className:t,...e})=>C.jsx("p",{className:Ye("mb-5 mt-5 text-[14px] font-normal leading-[20px] first:mt-0 last:mb-0",t),...e}),a:({className:t,...e})=>C.jsx("a",{className:Ye("text-[var(--chat-link-color)] font-medium underline underline-offset-4",t),...e}),blockquote:({className:t,...e})=>C.jsx("blockquote",{className:Ye("border-l-2 pl-6 italic",t),...e}),ul:({className:t,...e})=>C.jsx("ul",{className:Ye("my-5 ml-6 list-disc [&>li]:mt-[4px]",t),...e}),ol:({className:t,...e})=>C.jsx("ol",{className:Ye("my-5 ml-6 list-decimal [&>li]:mt-[4px]",t),...e}),hr:({className:t,...e})=>C.jsx("hr",{className:Ye("my-5 border-b border-[var(--chat-message-divider-color)]",t),...e}),table:({className:t,...e})=>C.jsx("table",{className:Ye("my-5 w-full border-separate border-spacing-0 overflow-y-auto",t),...e}),th:({className:t,...e})=>C.jsx("th",{className:Ye("px-4 py-2 border-b border-[var(--chat-message-divider-color)] text-left text-[var(--chat-message-th-color)] text-[14px] leading-[20px] font-bold [&[align=center]]:text-center [&[align=right]]:text-right",t),...e}),td:({className:t,...e})=>C.jsx("td",{className:Ye("border-b border-[var(--chat-message-divider-color)] text-[var(--chat-message-td-color)] text-[14px] leading-[20px] px-4 py-2 text-left [&[align=center]]:text-center [&[align=right]]:text-right",t),...e}),tr:({className:t,...e})=>C.jsx("tr",{className:Ye("m-0 border-b border-[var(--chat-message-divider-color)]",t),...e}),sup:({className:t,...e})=>C.jsx("sup",{className:Ye("[&>a]:text-xs [&>a]:no-underline",t),...e}),pre:({className:t,...e})=>C.jsx("div",{className:"px-[12px] pb-[12px] bg-[var(--chat-message-code-block-background-color)] rounded-[12px]",children:C.jsx("pre",{className:Ye("overflow-x-auto bg-[var(--chat-message-code-block-pre-background-color)] border border-[var(--chat-message-code-block-border-color)] rounded-[4px] p-[6px]",t),...e})}),code:function({className:e,...n}){const r=vq();return C.jsx("code",{className:Ye(!r&&"font-bold italic",e),...n})},CodeHeader:Oke}),Dke=()=>C.jsx(U2e,{remarkPlugins:[Kwe],className:"aui-md",components:Pke}),hW=E.memo(Dke),Lke=()=>{const e=qB().content.filter(n=>n.type==="file").map(n=>({type:JSON.parse(n.mimeType).type,content:n.data,path:JSON.parse(n.mimeType).path}));return C.jsx(Nk,{asChild:!0,children:C.jsxs(ZT.div,{className:"mx-auto grid w-full max-w-[var(--thread-max-width)] auto-rows-auto grid-cols-[minmax(72px,1fr)_auto] gap-y-1 px-[var(--thread-padding-x)] py-4 [&:where(>*)]:col-start-2",initial:{y:5,opacity:0},animate:{y:0,opacity:1},"data-role":"user",children:[e.length>0?C.jsx("div",{className:"flex w-full flex-row gap-[8px] col-span-full col-start-1 row-start-1 justify-end mb-[8px]",children:e.map(n=>C.jsx(cH,{file:n,withoutClose:!0},n.path))}):null,C.jsx("div",{className:"bg-[var(--chat-user-message-background)] text-[var(--chat-user-message-color)] col-start-2 break-words rounded-[16px] rounded-br-[0px] px-[12px] py-[8px]",children:C.jsx(Bk,{components:{Text:hW}})})]})})},fW="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.5%2017.5V18.5C6.5%2019.0523%206.94772%2019.5%207.5%2019.5L17.5%2019.5C18.0523%2019.5%2018.5%2019.0523%2018.5%2018.5V17.5M12.5%2016.5L16.5%2012.5M12.5%2016.5L8.5%2012.5M12.5%2016.5L12.5%204.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Ike="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='8'%20cy='8'%20r='7'%20fill='%234A87E7'/%3e%3cpath%20d='M11.5%205.5L7.5%2010.5L5%208'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Nke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%208L3%2012L7%2016M17%208L21%2012L17%2016M14%204L10%2020'%20stroke='%23444444'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",dW=({toolName:t,argsText:e,result:n})=>{const{t:r}=Mt(),[i,s]=E.useState(!0),[o,a]=E.useState(!1),[c,h]=E.useState(!1);E.useEffect(()=>{o&&setTimeout(()=>{a(!1)},2e3)},[o]),E.useEffect(()=>{c&&setTimeout(()=>{h(!1)},2e3)},[c]);const f=t.split("_")[0],d=t.replace(f+"_",""),m=n===void 0,y=d==="web_search",v=d==="web_crawling",w=y?JSON.parse(e).query:v?JSON.parse(e).urls[0]:"";return C.jsxs("div",{className:"my-[16px] flex w-full flex-col gap-3",children:[C.jsxs("div",{className:"flex items-center gap-[10px] cursor-pointer",onClick:()=>{v||y&&n===void 0||s(!i)},children:[m?C.jsx(xT,{size:16}):C.jsx(fn,{src:Ike}),m?C.jsx("p",{className:"text-[var(--chat-message-tool-call-header-color)] text-[14px] font-normal leading-[16px]",children:r("ToolExecuted")}):null,C.jsxs("span",{className:"flex items-center gap-[8px] rounded-[4px] ps-[4px] pe-[8px] text-[14px] leading-[20px] font-normal text-[var(--chat-message-tool-call-name-color)] bg-[var(--chat-message-tool-call-name-background-color)] min-w-0 flex-grow",children:[!y&&!v?C.jsx(fn,{src:Nke}):null,C.jsxs("span",{className:"truncate",children:[d,y||v?` | ${w}`:null]})]}),v||y&&n===void 0?null:C.jsx(fn,{src:i?NE:DV})]}),i?null:C.jsxs("div",{className:"flex flex-col gap-[24px] mt-[8px] p-[12px] bg-[var(--chat-message-tool-call-body-background-color)] rounded-[12px]",children:[y?null:C.jsxs("div",{className:"",children:[C.jsxs("p",{className:"flex flex-row items-center justify-between text-[var(--chat-message-tool-call-header-color)] text-[14px] font-bold leading-[20px]",children:[r("ToolCallArguments"),C.jsx(fn,{src:o?Rh:rx,onClick:()=>a(!0)})]}),C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:e||"{}"})]}),n!==void 0&&C.jsx("div",{className:"",children:y?C.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:(()=>{try{const S=(typeof n=="string"?JSON.parse(n):n)?.data||[];return S.length>0?C.jsx("div",{className:"space-y-2",children:S.map((A,k)=>C.jsxs("div",{className:"p-3 border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] rounded-[4px] cursor-pointer hover:bg-[var(--drop-down-menu-item-hover-color)] transition-colors",onClick:()=>window.open(A.url,"_blank"),children:[C.jsx("h4",{className:"text-[14px] font-medium text-[var(--chat-message-tool-call-pre-color)] mb-1 line-clamp-2",children:A.title}),C.jsx("p",{className:"text-[12px] text-[var(--chat-message-tool-call-header-color)] opacity-70 truncate",children:A.url}),A.publishedDate&&C.jsx("p",{className:"text-[11px] text-[var(--chat-message-tool-call-header-color)] opacity-50 mt-1",children:new Date(A.publishedDate).toLocaleDateString()})]},k))}):C.jsx("p",{className:"text-[var(--chat-message-tool-call-pre-color)] text-[14px] p-3",children:"No search results found"})}catch{return C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:typeof n=="string"?n:JSON.stringify(n,null,2)})}})()}):C.jsxs(C.Fragment,{children:[C.jsxs("p",{className:"flex flex-row items-center justify-between text-[var(--chat-message-tool-call-header-color)] text-[14px] font-bold leading-[20px]",children:[r("ToolCallResult"),C.jsx(fn,{src:c?Rh:rx,onClick:()=>h(!0)})]}),C.jsx("pre",{className:"max-h-[200px] overflow-y-auto whitespace-pre-wrap text-[var(--chat-message-tool-call-pre-color)] border border-[var(--chat-message-tool-call-pre-border-color)] bg-[var(--chat-message-tool-call-pre-background-color)] px-[8px] py-[2px] rounded-[4px]",children:typeof n=="string"?n:JSON.stringify(n,null,2)})]})})]})]})},Bke=()=>C.jsx(Wj,{children:C.jsx(Qj,{className:"border border-[var(--chat-message-error-border-color)] rounded-[4px] p-[6px]",children:C.jsx(Zj,{className:"text-[var(--chat-message-error-color)] text-[14px] leading-[20px] font-normal"})})}),jke=()=>{const{isStreamRunning:t}=Gh(),n=qB(),r=m$([n]),i=()=>{window.AscDesktopEditor.SaveFilenameDialog("Message.docx",s=>{if(s){const o=s.split("/").pop()??"";window.AscDesktopEditor.openTemplate(s,o)}},r)};return C.jsxs(ZB,{hidden:t,className:"col-start-3 row-start-2 ml-3 mt-3 flex gap-[8px]",children:[C.jsx(ej,{asChild:!0,children:C.jsxs(ta,{tooltip:"Copy",children:[C.jsx(z_,{copied:!0,children:C.jsx(Ft,{iconName:Rh,size:24,isStroke:!0,disabled:!0})}),C.jsx(z_,{copied:!1,children:C.jsx(Ft,{iconName:rx,size:24})})]})}),C.jsx("div",{children:C.jsx(ta,{tooltip:"Download",children:C.jsx(Ft,{iconName:fW,size:20,onClick:i,isStroke:!0})})})]})},$ke=()=>C.jsx(Nk,{asChild:!0,children:C.jsxs(ZT.div,{className:"relative mx-auto grid w-full max-w-[var(--thread-max-width)] grid-cols-[auto_auto_1fr] grid-rows-[auto_1fr] px-[var(--thread-padding-x)] py-4",initial:{y:5,opacity:0},animate:{y:0,opacity:1},"data-role":"assistant",children:[C.jsxs("div",{className:"leading-[20px] text-[14px] col-span-2 col-start-2 row-start-1 ml-4 break-words leading-7",children:[C.jsx(Bk,{components:{Text:hW,tools:{Fallback:dW}}}),C.jsx(Bke,{})]}),C.jsx(jke,{})]})}),ng=na(t=>({currentModel:null,isInitLoading:!1,initCurrentModel:()=>{try{const e=localStorage.getItem(l2);if(!e)return;const n=JSON.parse(e);t({currentModel:n})}catch(e){console.error("Failed to initialize current model:",e)}},selectModel:e=>{t({currentModel:e}),$t.setCurrentProviderModel(e.id),localStorage.setItem(l2,JSON.stringify(e))},deleteSelectedModel:()=>{t({currentModel:null}),localStorage.removeItem(l2),$t.setCurrentProviderModel("")}})),Vke="data:image/svg+xml,%3csvg%20width='12'%20height='16'%20viewBox='0%200%2012%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.5%200C2.77614%201.40922e-07%203%200.223858%203%200.5V8C3%208.01656%202.99669%208.03268%202.99512%208.04883C4.13869%208.27856%205%209.28878%205%2010.5C5%2011.7112%204.13859%2012.7204%202.99512%2012.9502C2.99675%2012.9667%203%2012.9831%203%2013V15.5C3%2015.7761%202.77614%2016%202.5%2016C2.22386%2016%202%2015.7761%202%2015.5V13C2%2012.9831%202.00228%2012.9666%202.00391%2012.9502C0.860897%2012.72%20-2.86384e-08%2011.7108%200%2010.5C1.05859e-07%209.28911%200.860803%208.27892%202.00391%208.04883C2.00234%208.03271%202%208.01653%202%208V0.5C2%200.223858%202.22386%201.76916e-07%202.5%200ZM9.5%200C9.77614%202.41411e-08%2010%200.223858%2010%200.5V3C10%203.01656%209.99669%203.03268%209.99512%203.04883C11.1387%203.27856%2012%204.28878%2012%205.5C12%206.71115%2011.1386%207.72039%209.99512%207.9502C9.99675%207.96665%2010%207.98311%2010%208V15.5C10%2015.7761%209.77614%2016%209.5%2016C9.22386%2016%209%2015.7761%209%2015.5V8C9%207.98314%209.00228%207.96662%209.00391%207.9502C7.8609%207.72003%207%206.71082%207%205.5C7%204.28911%207.8608%203.27892%209.00391%203.04883C9.00234%203.03271%209%203.01653%209%203V0.5C9%200.223858%209.22386%20-5.17733e-10%209.5%200ZM2.5%209C1.67157%209%201%209.67157%201%2010.5C1%2011.3284%201.67157%2012%202.5%2012C3.32843%2012%204%2011.3284%204%2010.5C4%209.67157%203.32843%209%202.5%209ZM9.5%204C8.67157%204%208%204.67157%208%205.5C8%206.32843%208.67157%207%209.5%207C10.3284%207%2011%206.32843%2011%205.5C11%204.67157%2010.3284%204%209.5%204Z'%20fill='%23383838'/%3e%3c/svg%3e",Fke=()=>{const{servers:t,changeToolStatus:e}=vo(),[n,r]=E.useState(!1),{t:i}=Mt(),s=E.useMemo(()=>C.jsx(ta,{visible:!n,tooltip:i("MCPServers"),children:C.jsx(Ft,{iconName:Vke,size:24,color:"var(--chat-composer-action-servers-color)",isActive:n})}),[n,i]),o=E.useMemo(()=>Object.entries(t).map(([h,f])=>{const d=f.some(m=>m.enabled);return{text:h,onClick:()=>{},subMenu:[{text:"All tools",onClick:()=>{},withToggle:!0,toggleChecked:d,onToggleChange:()=>{d?f.forEach(m=>{e(h,m.name,!1)}):f.forEach(m=>{e(h,m.name,!0)})}},{text:"",onClick:()=>{},isSeparator:!0},...f.map(m=>({text:m.name,onClick:()=>{},withToggle:!0,toggleChecked:m.enabled,onToggleChange:y=>{e(h,m.name,y)}}))]}}).filter(h=>h.subMenu.length>2),[t,e]),a=E.useMemo(()=>[...o],[o]);if(!t||!o.length)return null;const c=h=>{r(h)};return C.jsx(Lc,{trigger:s,items:a,onOpenChange:c})},zke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.01953%2013.2344L12.1596%206.09434C12.5297%205.71639%2012.9711%205.41559%2013.4582%205.20932C13.9453%205.00305%2014.4684%204.89541%2014.9974%204.89263C15.5264%204.88986%2016.0506%204.99199%2016.5399%205.19314C17.0291%205.39428%2017.4736%205.69044%2017.8476%206.06448C18.2217%206.43852%2018.5178%206.88301%2018.719%207.37224C18.9201%207.86148%2019.0223%208.38574%2019.0195%208.9147C19.0167%209.44366%2018.9091%209.96683%2018.7028%2010.4539C18.4965%2010.941%2018.1957%2011.3824%2017.8178%2011.7525L11.1485%2018.4202C10.7353%2018.82%2010.1816%2019.0414%209.60671%2019.0367C9.03182%2019.0319%208.48182%2018.8014%208.07531%2018.3949C7.66879%2017.9884%207.43831%2017.4384%207.43358%2016.8635C7.42884%2016.2886%207.65022%2015.7349%208.04999%2015.3218L14.4487%208.92226'%20stroke='%23444444'%20stroke-width='1.14645'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Uke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%204C2%202.89543%202.89543%202%204%202H20C21.1046%202%2022%202.89543%2022%204V20C22%2021.1046%2021.1046%2022%2020%2022H4C2.89543%2022%202%2021.1046%202%2020V4Z'%20fill='%232D8DBF'/%3e%3cpath%20d='M7%207.66699H17C17.1841%207.66699%2017.333%207.8159%2017.333%208C17.333%208.18409%2017.1841%208.33301%2017%208.33301H7C6.81591%208.33301%206.66699%208.1841%206.66699%208C6.66699%207.81591%206.81591%207.66699%207%207.66699Z'%20stroke='white'%20stroke-width='1.33333'/%3e%3cpath%20d='M7%2015.667H13C13.1841%2015.667%2013.333%2015.8159%2013.333%2016C13.333%2016.1841%2013.1841%2016.333%2013%2016.333H7C6.81591%2016.333%206.66699%2016.1841%206.66699%2016C6.66699%2015.8159%206.81591%2015.667%207%2015.667Z'%20stroke='white'%20stroke-width='1.33333'/%3e%3cpath%20d='M7%2011.667H17C17.1841%2011.667%2017.333%2011.8159%2017.333%2012C17.333%2012.1841%2017.1841%2012.333%2017%2012.333H7C6.81591%2012.333%206.66699%2012.1841%206.66699%2012C6.66699%2011.8159%206.81591%2011.667%207%2011.667Z'%20stroke='white'%20stroke-width='1.33333'/%3e%3c/svg%3e",Hke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%204C2%202.89543%202.89543%202%204%202H20C21.1046%202%2022%202.89543%2022%204V20C22%2021.1046%2021.1046%2022%2020%2022H4C2.89543%2022%202%2021.1046%202%2020V4Z'%20fill='%235BB514'/%3e%3cpath%20d='M9%2014V16H7V14H9ZM17%2014V16H13V14H17ZM17%208V10H13V8H17ZM9%208V10H7V8H9Z'%20fill='white'%20stroke='white'%20stroke-width='2'/%3e%3c/svg%3e",qke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%204C2%202.89543%202.89543%202%204%202H20C21.1046%202%2022%202.89543%2022%204V20C22%2021.1046%2021.1046%2022%2020%2022H4C2.89543%2022%202%2021.1046%202%2020V4Z'%20fill='%23F36653'/%3e%3cpath%20d='M13%208C13%207.44772%2013.4477%207%2014%207H17C17.5523%207%2018%207.44772%2018%208C18%208.55228%2017.5523%209%2017%209H14C13.4477%209%2013%208.55228%2013%208Z'%20fill='white'/%3e%3cpath%20d='M6%2016C6%2015.4477%206.44772%2015%207%2015H17C17.5523%2015%2018%2015.4477%2018%2016C18%2016.5523%2017.5523%2017%2017%2017H7C6.44772%2017%206%2016.5523%206%2016Z'%20fill='white'/%3e%3cpath%20d='M13%2012C13%2011.4477%2013.4477%2011%2014%2011H17C17.5523%2011%2018%2011.4477%2018%2012C18%2012.5523%2017.5523%2013%2017%2013H14C13.4477%2013%2013%2012.5523%2013%2012Z'%20fill='white'/%3e%3cpath%20d='M6%2010C6%208.34315%207.34315%207%209%207C10.6569%207%2012%208.34315%2012%2010C12%2011.6569%2010.6569%2013%209%2013C7.34315%2013%206%2011.6569%206%2010Z'%20fill='white'/%3e%3c/svg%3e",Z5=[".docx",".pdf",".xlsx"],Wke=()=>{const[t,e]=xe.useState(!1),{addAttachmentFile:n}=sw(),r=f=>{e(f)},i=(f,d)=>{window.AscDesktopEditor.convertFileExternal(f,69,(m,y)=>{if(y){console.log("Error:",y);return}const v=new Uint8Array(m.content),_=new TextDecoder("utf-8").decode(v);n({path:f,content:_,type:d})})},s=()=>{window.AscDesktopEditor.OpenFilenameDialog([...Z5].join(" , "),!0,f=>{Array.isArray(f)&&f.forEach(d=>{const m=d.split(".").pop()??"";Z5.includes(`.${m}`)&&window.AscDesktopEditor.convertFileExternal(d,69,(y,v)=>{if(v){console.log("Error:",v);return}const w=new Uint8Array(y.content),S=new TextDecoder("utf-8").decode(w);n({path:d,content:S,type:m==="pdf"?87:m==="docx"?65:257})})})})},o=JSON.parse(window.AscDesktopEditor?.callToolFunction("recent_files_reader")??"{}")?.files?.filter(f=>!f.path.includes("http")).filter(f=>{const d=f.type===65,m=f.type===87,y=f.type===257;return d||m||y})?.map(f=>{let d=Uke;return f.type===87?d=qke:f.type===257&&(d=Hke),{text:f.path.split("/").pop()??"",key:f.path,id:f.path,icon:C.jsx(fn,{src:d}),onClick:()=>i(f.path,f.type)}}).filter(Boolean),{t:a}=Mt(),c=C.jsx(ta,{tooltip:a("Attachments"),visible:!t,children:C.jsx(Ft,{iconName:zke,size:24,className:"cursor-pointer rounded-[4px] outline-none",color:"var(--chat-composer-action-attachments-color)",isStroke:!0,isActive:t})}),h=[{text:a("AddLocalFile"),onClick:()=>s()},{text:"",onClick:()=>{},isSeparator:!0},{text:a("RecentFiles"),onClick:()=>{},subMenu:o}];return C.jsx(Lc,{trigger:c,items:h,onOpenChange:r})},Gke=()=>{const{currentModel:t,selectModel:e}=ng(),{providers:n,providersModels:r,currentProvider:i,setCurrentProvider:s}=ts(),{tools:o}=vo(),{messages:a}=Gh(),{t:c}=Mt(),h=xe.useCallback((d,m)=>{if(t?.id===m&&$t.currentProviderInfo?.name===d.name)return;const y=r.get(d.name)?.find(v=>v.id===m);y&&($t.currentProviderInfo?.name!==d.name&&(s(d),$t.setCurrentProviderModel(m),$t.setCurrentProviderTools(o),$t.setCurrentProviderPrevMessages(a)),e(y))},[r,a,o,t,e,s]),f=n.map(d=>({text:d.name,id:d.name,onClick:()=>{},subMenu:r.get(d.name)?.map(m=>({text:m.name,id:m.id,onClick:()=>h(d,m.id),isActive:!1,checked:m.id===t?.id&&d.name===$t.currentProviderInfo?.name}))||[]})).filter(d=>d.subMenu.length>0);return C.jsx(Fx,{placeholder:c("SelectModel"),value:i&&t?.name||"",items:f,withoutBg:!0})},Kke="data:image/svg+xml,%3csvg%20width='12'%20height='14'%20viewBox='0%200%2012%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.00092%2012.6467C5.00092%2013.1989%205.44863%2013.6467%206.00092%2013.6467C6.5532%2013.6467%207.00092%2013.1989%207.00092%2012.6467H6.00092H5.00092ZM9.52911%206.29494C9.91963%206.68546%2010.5528%206.68546%2010.9433%206.29494C11.3338%205.90442%2011.3338%205.27125%2010.9433%204.88073L10.2362%205.58783L9.52911%206.29494ZM1.05852%204.88073C0.667994%205.27125%200.667994%205.90442%201.05852%206.29494C1.44904%206.68546%202.08221%206.68546%202.47273%206.29494L1.76562%205.58783L1.05852%204.88073ZM6.25049%201.60211L6.95759%200.894999L6.25049%201.60211ZM5.75135%201.60211L5.04425%200.894999L5.75135%201.60211ZM6.25049%201.60211L5.54338%202.30921L9.52911%206.29494L10.2362%205.58783L10.9433%204.88073L6.95759%200.894999L6.25049%201.60211ZM5.75135%201.60211L5.04425%200.894999L1.05852%204.88073L1.76562%205.58783L2.47273%206.29494L6.45846%202.30921L5.75135%201.60211ZM6.00092%202.05842H5.00092V12.6467H6.00092H7.00092V2.05842H6.00092ZM6.25049%201.60211L6.95759%200.894999C6.42924%200.366643%205.5726%200.366643%205.04425%200.894999L5.75135%201.60211L6.45846%202.30921C6.20577%202.56191%205.79607%202.56191%205.54338%202.30921L6.25049%201.60211Z'%20fill='white'/%3e%3c/svg%3e",Yke="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='12'%20height='12'%20rx='4'%20fill='white'/%3e%3c/svg%3e",eB="rounded-[4px] cursor-pointer disabled:cursor-not-allowed flex items-center justify-center bg-[var(--chat-composer-action-send-background-color)] hover:enabled:bg-[var(--chat-composer-action-send-background-hover-color)] active:enabled:bg-[var(--chat-composer-action-send-background-pressed-color)] disabled:opacity-[0.5]",Xke=()=>{const{isStreamRunning:t}=Gh(),{currentModel:e}=ng(),{currentProvider:n}=ts();return t?C.jsx(HZ,{asChild:!0,children:C.jsx(Ft,{iconName:Yke,size:24,color:"var(--chat-composer-action-send-color)",className:eB})}):C.jsx(Ub,{running:!1,children:C.jsx(kZ,{asChild:!0,disabled:!e||!n,children:C.jsx(Ft,{iconName:Kke,size:24,color:"var(--chat-composer-action-send-color)",className:eB})})})},Jke=()=>C.jsx("div",{className:"relative flex flex-col",children:C.jsxs("div",{className:"relative flex items-center justify-between h-[24px]",children:[C.jsxs("div",{className:"flex items-center gap-[12px] flex-row",children:[C.jsx(Wke,{}),C.jsx(Fke,{})]}),C.jsxs("div",{className:"flex items-center gap-[12px] flex-row",children:[C.jsx(Gke,{}),C.jsx(Xke,{})]})]})}),tB=()=>{const{attachmentFiles:t}=sw(),{currentProvider:e}=ts(),{currentModel:n}=ng(),{t:r}=Mt();return C.jsx("div",{className:"relative mx-auto flex w-full max-w-[var(--thread-max-width)] flex-col gap-4 px-[var(--thread-padding-x)] pb-4 md:pb-6",children:C.jsxs(Kj,{className:"composer-root relative flex w-full flex-col gap-[16px] rounded-[16px] border px-[24px] py-[16px] box-border",children:[t.length?C.jsx("div",{className:"flex flex-row gap-[8px]",children:t.map(i=>C.jsx(cH,{file:i},i.path))}):null,C.jsx(Jj,{placeholder:r("AskAI"),className:"composer-input max-h-[calc(50dvh)] min-h-[16px] w-full resize-none outline-none",rows:1,autoFocus:!0,"aria-label":"Message input",disabled:!e||!n}),C.jsx(Jke,{})]})})},Qke=()=>{const{isStreamRunning:t,isRequestRunning:e}=Gh(),{t:n}=Mt();return C.jsxs(e6,{className:"flex h-full flex-col",style:{"--thread-max-width":"687px","--thread-padding-x":"1rem"},children:[C.jsx(Ub,{empty:!0,children:C.jsx(U_,{className:"relative flex min-w-0 flex-1 flex-col overflow-y-auto justify-center items-center",children:C.jsxs("div",{className:"flex flex-col gap-[24px] w-full",children:[C.jsx(tbe,{}),C.jsx(tB,{})]})})}),C.jsxs(Ub,{empty:!1,children:[C.jsxs(U_,{className:"relative flex min-w-0 flex-1 flex-col gap-6 overflow-y-auto",children:[C.jsx(JZ,{components:{UserMessage:Lke,AssistantMessage:$ke}}),!e&&t?C.jsx("div",{className:"flex items-center justify-center",children:C.jsxs("div",{className:"flex items-center gap-[8px] w-[var(--thread-max-width)] max-w-[var(--thread-max-width)] ps-[var(--thread-padding-x)]",children:[C.jsx(xT,{}),C.jsx("p",{className:"text-[14px] leading-[20px] font-normal text-[var(--chat-message-analyze-color)]",children:n("Analyzing")})]})}):null,C.jsx(ZT.div,{className:"min-h-6 min-w-6 shrink-0"})]}),C.jsx(tB,{})]})]})},Zke="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.5%2015.5C16.5%2014.3954%2015.6046%2013.5%2014.5%2013.5C13.3954%2013.5%2012.5%2014.3954%2012.5%2015.5M16.5%2015.5C16.5%2016.6046%2015.6046%2017.5%2014.5%2017.5C13.3954%2017.5%2012.5%2016.6046%2012.5%2015.5M16.5%2015.5L19.5%2015.5M12.5%2015.5L4.5%2015.5M11.5%208.5C11.5%207.39543%2010.6046%206.5%209.5%206.5C8.39543%206.5%207.5%207.39543%207.5%208.5M11.5%208.5C11.5%209.60457%2010.6046%2010.5%209.5%2010.5C8.39543%2010.5%207.5%209.60457%207.5%208.5M11.5%208.5L19.5%208.5M7.5%208.5H4.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",eEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.5%205.5V11.5M11.5%2011.5V17.5M11.5%2011.5H17.5M11.5%2011.5H5.5'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",tEe=async(t,e)=>{const n=bo.getDB(),r={threadId:t,title:e,lastEditDate:Date.now()};return new Promise((i,s)=>{const c=n.transaction(["threads"],"readwrite").objectStore("threads").put(r);c.onerror=()=>s(c.error),c.onsuccess=()=>i()})},nEe=async()=>{const t=bo.getDB();return new Promise((e,n)=>{const s=t.transaction(["threads"],"readonly").objectStore("threads").getAll();s.onerror=()=>n(s.error),s.onsuccess=()=>{const o=s.result.sort((a,c)=>c.lastEditDate-a.lastEditDate);e(o)}})},rEe=async(t,e)=>{const n=bo.getDB();return new Promise((r,i)=>{const o=n.transaction(["threads"],"readwrite").objectStore("threads"),a=o.get(t);a.onerror=()=>i(a.error),a.onsuccess=()=>{const c=a.result;if(!c){i(new Error("Thread not found"));return}const h={...c,...e&&{title:e},lastEditDate:Date.now()},f=o.put(h);f.onerror=()=>i(f.error),f.onsuccess=()=>r()}})},iEe=async t=>{const e=bo.getDB();return new Promise((n,r)=>{const s=e.transaction(["threads"],"readwrite").objectStore("threads"),o=s.get(t);o.onerror=()=>r(o.error),o.onsuccess=()=>{const a=o.result;if(!a){r(new Error("Thread not found"));return}const c={...a,lastEditDate:Date.now()},h=s.put(c);h.onerror=()=>r(h.error),h.onsuccess=()=>n()}})},sEe=async t=>{const e=bo.getDB();return new Promise((n,r)=>{const o=e.transaction(["threads"],"readwrite").objectStore("threads").delete(t);o.onerror=()=>r(o.error),o.onsuccess=()=>n()})},rg=na((t,e)=>({threadId:crypto.randomUUID(),threads:[],initThreads:async()=>{const n=await nEe();t({threads:n})},insertThread:n=>{const r=e();t({threads:[{threadId:r.threadId,title:n},...r.threads]}),tEe(r.threadId,n)},insertNewMessageToThread:()=>{const n=e();iEe(n.threadId),t({threads:n.threads.map(r=>r.threadId===n.threadId?{...r,lastEditDate:Date.now()}:r)})},onSwitchToNewThread:()=>{t({threadId:crypto.randomUUID()})},onSwitchToThread:n=>{t({threadId:n})},onDownloadThread:async n=>{const i=e().threads.find(c=>c.threadId===n),s=await e$(n),o=i?.title||"Chat Export";let a=`# ${o}

`;a+=`*Exported on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}*

`,a+=`---

`,a+=m$(s),window.AscDesktopEditor.SaveFilenameDialog(`${o}.docx`,c=>{if(c==="")return;const h=c.split("/").pop();h&&window.AscDesktopEditor.openTemplate(c,h)},a)},onRenameThread:(n,r)=>{const i=e();t({threads:i.threads.map(s=>s.threadId===n?{...s,title:r}:s)}),rEe(n,r)},onDeleteThread:n=>{const r=e();r.threadId===n&&r.onSwitchToNewThread(),t({threads:r.threads.filter(i=>i.threadId!==n)}),sEe(n)}})),oEe=()=>{const{t}=Mt(),{currentPage:e,setCurrentPage:n}=Dx(),{providers:r}=ts(),{onSwitchToNewThread:i}=rg();return C.jsxs("nav",{className:"w-full flex justify-between items-center h-[56px] min-h-[56px] box-border border-b-[1px] border-[var(--header-border-color)] bg-[var(--header-background-color)] px-[32px]",children:[C.jsxs("div",{className:"flex items-center gap-[12px]",children:[C.jsx("h3",{className:"text-[var(--header-color)] font-bold text-[16px] leading-[24px]",children:t("AIAgent")}),C.jsx(ta,{tooltip:t("NewChat"),children:C.jsx(Ft,{iconName:eEe,size:24,color:"var(--header-color)",isStroke:!0,disabled:!r.length,onClick:()=>{n("chat"),i()}})})]}),C.jsx(ta,{tooltip:t("Settings"),children:C.jsx(Ft,{iconName:Zke,size:24,color:"var(--header-color)",isStroke:!0,isActive:e==="settings",onClick:()=>n(e==="settings"?"chat":"settings")})})]})},aEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19.0315%2016.6276C18.2814%2017.3778%2017.264%2017.7992%2016.2031%2017.7992C15.1422%2017.7992%2014.1248%2017.3778%2013.3747%2016.6276C12.6245%2015.8775%2012.2031%2014.8601%2012.2031%2013.7992C12.2031%2012.7384%2012.6245%2011.7209%2013.3747%2010.9708C14.1248%2010.2206%2015.1422%209.79922%2016.2031%209.79922C17.264%209.79922%2018.2814%2010.2206%2019.0315%2010.9708C19.7817%2011.7209%2020.2031%2012.7384%2020.2031%2013.7992C20.2031%2014.8601%2019.7817%2015.8775%2019.0315%2016.6276ZM19.0315%2016.6276L22.2031%2019.7992M4.20312%204.19922H19.8029M4.20312%208.99922H9.0029M4.20312%2013.7992H9.00313M4.20312%2018.5992H9.00313'%20stroke='%23383838'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",lEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.57%206.42969L8%2011.9995L13.57%2017.5694'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",cEe="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.5002%2017.5002L13.881%2013.881M13.881%2013.881C14.5001%2013.2619%2014.9912%2012.527%2015.3262%2011.7181C15.6612%2010.9093%2015.8337%2010.0423%2015.8337%209.16684C15.8337%208.29134%2015.6612%207.42441%2015.3262%206.61555C14.9912%205.80669%2014.5001%205.07174%2013.881%204.45267C13.2619%203.8336%2012.527%203.34252%2011.7181%203.00748C10.9093%202.67244%2010.0423%202.5%209.16684%202.5C8.29134%202.5%207.42441%202.67244%206.61555%203.00748C5.80669%203.34252%205.07174%203.8336%204.45267%204.45267C3.2024%205.70295%202.5%207.39868%202.5%209.16684C2.5%2010.935%203.2024%2012.6307%204.45267%2013.881C5.70295%2015.1313%207.39868%2015.8337%209.16684%2015.8337C10.935%2015.8337%2012.6307%2015.1313%2013.881%2013.881Z'%20stroke='%23383838'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",uEe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.5%207C19.3284%207%2020%207.67157%2020%208.5V15.5C20%2016.3284%2019.3284%2017%2018.5%2017H5.5C4.67157%2017%204%2016.3284%204%2015.5V8.5C4%207.67157%204.67157%207%205.5%207H18.5ZM5.5%208C5.22386%208%205%208.22386%205%208.5V15.5C5%2015.7761%205.22386%2016%205.5%2016H18.5C18.7761%2016%2019%2015.7761%2019%2015.5V8.5C19%208.22386%2018.7761%208%2018.5%208H5.5Z'%20fill='%23383838'/%3e%3cpath%20d='M8.5%209C8.77614%209%209%209.22386%209%209.5C9%209.77614%208.77614%2010%208.5%2010H8V14H8.5C8.77614%2014%209%2014.2239%209%2014.5C9%2014.7761%208.77614%2015%208.5%2015H6.5C6.22386%2015%206%2014.7761%206%2014.5C6%2014.2239%206.22386%2014%206.5%2014H7V10H6.5C6.22386%2010%206%209.77614%206%209.5C6%209.22386%206.22386%209%206.5%209H8.5Z'%20fill='%23446ECA'/%3e%3c/svg%3e",hEe=({id:t,onClose:e})=>{const{onDeleteThread:n}=rg(),{t:r}=Mt(),i=xe.useCallback(async()=>{await n(t),e()},[t,n,e]);return xe.useEffect(()=>{const s=o=>{o.key==="Enter"&&(o.preventDefault(),i())};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[i]),C.jsx(Ic,{open:!0,children:C.jsx(Nc,{header:r("Warning"),onClose:e,withWarningIcon:!0,children:C.jsxs("div",{className:"flex flex-col justify-between h-full",children:[C.jsx("p",{className:"select-none h-[40px] flex items-center text-[12px] leading-[16px]",children:r("WantDeleteChat?")}),C.jsxs("div",{className:"flex flex-row justify-end items-center gap-[8px] h-[48px]",children:[C.jsx(mn,{size:"small",variant:"default",onClick:e,children:r("No")}),C.jsx(mn,{size:"small",onClick:i,children:r("Yes")})]})]})})})},fEe=()=>C.jsx(fn,{src:fW,beforeInjection:t=>{const e=t.querySelector("path");e&&e.setAttribute("stroke","var(--chat-list-item-icon-color)")}}),dEe=()=>C.jsx(fn,{src:uEe,beforeInjection:t=>{const e=t.querySelector("path");e&&e.setAttribute("fill","var(--chat-list-item-icon-color)")}}),pEe=()=>C.jsx(fn,{src:TE,beforeInjection:t=>{const e=t.querySelector("path");e&&e.setAttribute("fill","var(--chat-list-item-icon-color)")}}),mEe=({thread:t,isActive:e,onSwitchToThread:n,onRenameThread:r,onDownloadThread:i,setCurrentPage:s})=>{const[o,a]=xe.useState(!1),[c,h]=xe.useState(!1),[f,d]=xe.useState(!1),[m,y]=xe.useState(!1),[v,w]=xe.useState(t.title),_=xe.useRef(null),S=xe.useRef(null),{t:A}=Mt();xe.useEffect(()=>{const L=N=>{f&&(N.key==="Escape"?(N.preventDefault(),d(!1),w(t.title)):N.key==="Enter"&&(N.preventDefault(),S.current?.blur()))};return f&&document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[f,t.title]);const k=()=>{o||f||m||(n(t.threadId),s("chat"))},P=()=>{y(!0),a(!1)},M=()=>{d(!0),a(!1)},O=()=>{i(t.threadId),a(!1)};return C.jsxs("div",{ref:_,className:`cursor-pointer rounded-[4px] h-[36px] min-h-[36px] flex items-center justify-between ${f?"":`px-[12px] ${e||o?"bg-[var(--chat-list-item-active-background-color)]":"hover:bg-[var(--chat-list-item-hover-background-color)] active:bg-[var(--chat-list-item-active-background-color)]"}`}`,onMouseEnter:()=>h(!0),onMouseLeave:()=>{o||h(!1)},onClick:k,children:[f?C.jsx(oo,{ref:S,value:v,onChange:L=>w(L.target.value),onBlur:()=>{d(!1),v&&r(t.threadId,v)},autoFocus:!0,className:"w-full"}):C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-[var(--chat-list-item-color)] font-normal text-[14px] leading-[20px] truncate",children:t.title}),c&&!f?C.jsx(Lc,{open:o,onOpenChange:a,trigger:C.jsx(Ft,{iconName:EE,color:"var(--ai-provider-item-icon-color)",size:20,isActive:o}),items:[{icon:C.jsx(fEe,{}),text:A("Download"),onClick:O},{icon:C.jsx(dEe,{}),text:A("Rename"),onClick:M},{icon:C.jsx(pEe,{}),text:A("Delete"),onClick:P}],side:"right",align:"start",sideOffset:0,containerRef:_.current}):null]}),m?C.jsx(hEe,{id:t.threadId,onClose:()=>y(!1)}):null]},t.threadId)},gEe=()=>{const{threads:t,threadId:e,onSwitchToThread:n,onRenameThread:r,onDownloadThread:i}=rg(),{setCurrentPage:s}=Dx(),[o,a]=xe.useState(!1),[c,h]=xe.useState(""),[f,d]=xe.useState(t),{t:m}=Mt(),y=w=>{const _=w.target.value;h(_)};xe.useEffect(()=>{const w=t.filter(_=>_.title?.toLowerCase().includes(c.toLowerCase()));d(w)},[t,c]);const v=t.length===0;return o?C.jsxs("div",{className:`w-[264px] min-w-[264px] h-full max-h-full border-r-[1px] border-[var(--chat-list-border-right)] p-[24px] flex flex-col gap-[${v?24:32}px]`,style:{maxHeight:"calc(100% - 24px)"},children:[C.jsxs("div",{className:"flex items-center justify-between px-[8px]",children:[C.jsx("h4",{className:"text-[14px] leading-[20px] font-bold text-[var(--chat-list-color)]",children:m("ChatHistory")}),C.jsx(Ft,{iconName:lEe,size:24,color:"var(--chat-list-color)",isStroke:!0,onClick:()=>a(!1)})]}),C.jsx("div",{className:"flex flex-col",style:{maxHeight:"100%"},children:v?C.jsx("p",{className:"text-[var(--chat-list-empty-color)] font-normal text-[14px] leading-[20px] w-full text-center",children:m("NoChatYet")}):C.jsxs("div",{className:"flex flex-col mt-[24px]",style:{maxHeight:"calc(100% - 24px)"},children:[C.jsx(oo,{className:"w-full",type:"search",placeholder:m("Search"),icon:cEe,iconColor:"",value:c,onChange:y}),C.jsx("div",{className:"flex flex-col mt-[16px] overflow-y-scroll",style:{maxHeight:"calc(100% - 24px)"},children:f.length?f.map(w=>{const _=w.threadId===e;return C.jsx(mEe,{thread:w,isActive:_,onSwitchToThread:n,setCurrentPage:s,onRenameThread:r,onDownloadThread:i},w.threadId)}):C.jsx("p",{className:"text-[var(--chat-list-empty-color)] font-normal text-[14px] leading-[20px] w-full",children:m("NoChatYet")})})]})})]}):C.jsx("div",{className:"ml-[32px] mt-[24px]",children:C.jsx(ta,{tooltip:m("ChatHistory"),children:C.jsx(Ft,{iconName:aEe,size:24,color:"var(--chat-list-color)",isStroke:!0,onClick:()=>{s("chat"),a(!0)}})})})},nB=({children:t})=>{const[e,n]=xe.useState(()=>window.RendererProcessVariable?window.RendererProcessVariable.theme.id:"theme-light"),{currentPage:r}=Dx(),{i18n:i}=Mt();xe.useLayoutEffect(()=>{if(window.RendererProcessVariable){const o=window.RendererProcessVariable.lang??new URLSearchParams(window.location.search).get("lang");o?.includes("en")?i.changeLanguage("en"):o?.includes("ru")?i.changeLanguage("ru"):i.changeLanguage("en")}else i.changeLanguage("en");window.on_update_plugin_info=o=>{console.log(o),o.lang&&(o?.lang?.includes("en")?i.changeLanguage("en"):o?.lang?.includes("ru")?i.changeLanguage("ru"):i.changeLanguage("en")),o.theme&&(o.theme==="theme-system"?n(`theme-${window.RendererProcessVariable.theme.system}`):n(o.theme))}},[i]);const s=r==="settings";return C.jsx("div",{className:`h-dvh ${e}`,children:C.jsxs("main",{id:"app",className:"h-dvh bg-[var(--layout-background-color)] flex flex-col",children:[C.jsx(oEe,{}),C.jsxs("div",{className:"flex flex-row flex-1",style:{height:"calc(100dvh - 56px)"},children:[s?null:C.jsx(gEe,{}),C.jsx("div",{className:"w-full",children:t})]})]})})},yEe=({checked:t=!1,onChange:e,disabled:n=!1,id:r,className:i="","aria-label":s})=>{const o=a=>{e&&!n&&e(a.target.checked)};return C.jsxs("div",{className:`inline-flex items-center relative ${i}`,children:[C.jsx("input",{type:"checkbox",id:r,checked:t,onChange:o,disabled:n,className:"absolute opacity-0 cursor-pointer w-4 h-4 m-0 disabled:cursor-not-allowed","aria-label":s}),C.jsx("label",{htmlFor:r,className:"inline-flex items-center cursor-pointer select-none disabled:cursor-not-allowed disabled:opacity-60",children:C.jsx("div",{className:`w-4 h-4 rounded-[2px] flex items-center justify-center transition-all duration-200 box-border ${t?"bg-[var(--checkbox-active-color)]":"bg-transparent border border-[var(--checkbox-color)]"} focus-within:outline-none`,children:t&&C.jsx(fn,{src:Rh,className:"flex items-center justify-center",beforeInjection:a=>{const c=a.querySelector("path");c&&c.setAttribute("stroke","var(--heckbox-active-icon-color)")}})})})]})},bEe=({onAllow:t,onDeny:e,onClose:n})=>{const{t:r}=Mt(),{manageToolData:i}=vo(),[s,o]=E.useState(!1),a=()=>{t(s),n()},c=()=>{e(),n()},h=i?.message?.content[i.idx];if(!(!h||typeof h!="object"||!("type"in h)||h.type!=="tool-call"))return C.jsx(Ic,{open:!0,children:C.jsxs(Nc,{header:r("Confirmation"),onClose:e,isHuge:!0,children:[C.jsxs("div",{className:"flex flex-col justify-between h-full mb-[16px] text-[var(--tool-fallback-color)]",children:[C.jsx("p",{className:"mt-[8px] font-[14px] leading-[20px] font-normal text-[var(--tool-fallback-color)]",children:r("AIWouldLikeUseThisTool")}),C.jsx(dW,{type:"tool-call",toolCallId:h.toolCallId,args:h.args??{},toolName:h.toolName,argsText:h.argsText??"{}",result:h.result,status:{type:"running"},addResult:()=>{}}),C.jsx("p",{className:"font-[14px] leading-[20px] font-normal text-[var(--tool-fallback-color)]",children:r("ReviewEachAction")}),C.jsxs("p",{className:"flex items-center gap-[8px] mt-[24px] font-[14px] leading-[20px] font-normal text-[var(--tool-fallback-color)]",children:[C.jsx(yEe,{checked:s,onChange:o,id:"allow-always-checkbox"}),r("AlwaysAllow")]})]}),C.jsxs("div",{className:"flex flex-row justify-end items-center gap-[8px] h-[64px] border-t-[1px] border-[var(--border-divider)] mx-[-32px] px-[32px]",children:[C.jsx(mn,{variant:"default",onClick:c,children:r("Deny")}),C.jsx(mn,{onClick:a,children:r("Allow")})]})]})})},vEe=({isReady:t})=>{const{messages:e,setIsStreamRunning:n,setIsRequestRunning:r,addMessage:i,updateLastMessage:s,fetchPrevMessages:o}=Gh(),{threadId:a,insertThread:c,insertNewMessageToThread:h}=rg(),{manageToolData:f,callTools:d,checkAllowAlways:m,setAllowAlways:y,setManageToolData:v}=vo(),{attachmentFiles:w,clearAttachmentFiles:_}=sw(),{currentProvider:S}=ts(),{currentModel:A}=ng();E.useEffect(()=>{t&&(o(a),_())},[a,t,o,_]);const k=z=>z,P=z=>{if(!f)return;const j=f?.message?.content[f.idx];if(!j||typeof j!="object"||!("type"in j)||j.type!=="tool-call")return;const W=j.toolName.split("_")[0];z&&y(!0,W),O(f.message,f.idx,f.messageUID,!0,!1),v(void 0)},M=()=>{f&&(O(f.message,f.idx,f.messageUID,!1,!0),v(void 0))},O=async(z,j,H,W,X)=>{const G=z.content[j];if(!G||typeof G!="object"||!("type"in G)||G.type!=="tool-call")return;const F=G.toolName.split("_")[0];if(m(F)||W||X){const Y=X?"User deny tool call":await d(G.toolName,G.args),q=Array.isArray(z.content)?z.content.map((Z,ue)=>ue===j?{...G,result:Y}:Z):z.content,se={...z,content:q};if(s(se),!$t)return;const T=$t.sendMessageAfterToolCall(se);T&&L(T,!0,H)}else v({message:z,idx:j,messageUID:H})},L=async(z,j,H)=>{n(!0);let W=!!j;const X=j&&H?H:crypto.randomUUID();if(e)for await(const G of z){if("isEnd"in G){if(G.responseMessage.status?.type==="incomplete"){i(G.responseMessage),n(!1),r(!1);return}const ie=G.responseMessage;if(ie?.role==="assistant"&&Array.isArray(ie.content)){const F=ie.content.findIndex(Y=>Y.type==="tool-call"&&!Y.result);if(F!==-1){O(ie,F,X);return}}n(!1),r(!1);return}W?(yre(X,G),s(G)):(j||r(!0),i(G),fI(a,X,G),W=!0)}};return{convertMessage:k,onNew:async z=>{if(!$t||!S||!A||z.content[0].type!=="text")return;let j=[];w.length>0&&(j=w.map(G=>({type:"file",mimeType:JSON.stringify({path:G.path,type:G.type}),data:G.content})),_());const W={role:"user",content:[...j,{type:"text",text:z.content[0].text}],attachments:z.attachments};e.length===0?c(z.content[0].text.substring(0,25)):h(),fI(a,crypto.randomUUID(),W),i(W);const X=$t.sendMessage([W]);X&&L(X)},handleStream:L,approveToolCall:P,denyToolCall:M}},xEe=({isReady:t})=>{const{initThreads:e}=rg();return E.useEffect(()=>{t&&e()},[t,e]),{}},wEe=()=>{const{initCurrentModel:t,currentModel:e}=ng();return E.useEffect(()=>{e&&$t.setCurrentProviderModel(e.id)},[e]),E.useEffect(()=>{t()},[t]),{}},SEe=({isReady:t})=>{const{initServers:e,getTools:n,tools:r}=vo(),{currentProvider:i}=ts();return E.useEffect(()=>{t&&(e(),n(),setInterval(()=>{n()},1e3))},[t,e,n]),E.useEffect(()=>{!r||!i||$t.setCurrentProviderTools(r)},[r,i]),{}},Ge=t=>typeof t=="string",Vd=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},rB=t=>t==null?"":""+t,_Ee=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},CEe=/###/g,iB=t=>t&&t.indexOf("###")>-1?t.replace(CEe,"."):t,sB=t=>!t||Ge(t),Vp=(t,e,n)=>{const r=Ge(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(sB(t))return{};const s=iB(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return sB(t)?{}:{obj:t,k:iB(r[i])}},oB=(t,e,n)=>{const{obj:r,k:i}=Vp(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=Vp(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Vp(t,o,Object),a?.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},AEe=(t,e,n,r)=>{const{obj:i,k:s}=Vp(t,e,Object);i[s]=i[s]||[],i[s].push(n)},ix=(t,e)=>{const{obj:n,k:r}=Vp(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},kEe=(t,e,n)=>{const r=ix(t,n);return r!==void 0?r:ix(e,n)},pW=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Ge(t[r])||t[r]instanceof String||Ge(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):pW(t[r],e[r],n):t[r]=e[r]);return t},zu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var EEe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const TEe=t=>Ge(t)?t.replace(/[&<>"'\/]/g,e=>EEe[e]):t;class REe{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const MEe=[" ",",","?","!",";"],OEe=new REe(20),PEe=(t,e,n)=>{e=e||"",n=n||"";const r=MEe.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=OEe.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},mk=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let c=s;c<r.length;++c)if(c!==s&&(a+=n),a+=r[c],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;s+=c-s+1;break}i=o}return i},Em=t=>t?.replace("_","-"),DEe={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class sx{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||DEe,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(Ge(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new sx(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new sx(this.logger,e)}}var io=new sx;class bw{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i.apply(i,[e,...n])})}}class aB extends bw{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):Ge(r)&&s?a.push(...r.split(s)):a.push(r)));const c=ix(this.data,a);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),c||!o||!Ge(r)?c:mk(this.data?.[e]?.[n],r,s)}addResource(e,n,r,i,s={silent:!1}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),oB(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const s in r)(Ge(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let c=ix(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?pW(c,r,s):c={...c,...r},oB(this.data,a,c),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var mW={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{e=this.processors[s]?.process(e,n,r,i)??e}),e}};const gW=Symbol("i18next/PATH_KEY");function LEe(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>(n?.revoke?.(),i===gW?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function gk(t,e){const{[gW]:n}=t(LEe());return n.join(e?.keySeparator??".")}const lB={},cB=t=>!Ge(t)&&typeof t!="boolean"&&typeof t!="number";class ox extends bw{constructor(e,n={}){super(),_Ee(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=io.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};return e==null?!1:this.resolve(e,r)?.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!PEe(e,r,i);if(o&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:Ge(s)?[s]:s};const h=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(h[0])>-1)&&(s=h.shift()),e=h.join(i)}return{key:e,namespaces:Ge(s)?[s]:s}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=gk(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],i),h=c[c.length-1];let f=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const d=i.lng||this.language,m=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode")return m?s?{res:`${h}${f}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${f}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:a;const y=this.resolve(e,i);let v=y?.res;const w=y?.usedKey||a,_=y?.exactUsedKey||a,S=["[object Number]","[object Function]","[object RegExp]"],A=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,P=i.count!==void 0&&!Ge(i.count),M=ox.hasDefaultValue(i),O=P?this.pluralResolver.getSuffix(d,i.count,i):"",L=i.ordinal&&P?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):"",N=P&&!i.ordinal&&i.count===0,z=N&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${O}`]||i[`defaultValue${L}`]||i.defaultValue;let j=v;k&&!v&&M&&(j=z);const H=cB(j),W=Object.prototype.toString.apply(j);if(k&&j&&H&&S.indexOf(W)<0&&!(Ge(A)&&Array.isArray(j))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const X=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,j,{...i,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(y.res=X,y.usedParams=this.getUsedParamsDetails(i),y):X}if(o){const X=Array.isArray(j),G=X?[]:{},ie=X?_:w;for(const F in j)if(Object.prototype.hasOwnProperty.call(j,F)){const Y=`${ie}${o}${F}`;M&&!v?G[F]=this.translate(Y,{...i,defaultValue:cB(z)?z[F]:void 0,joinArrays:!1,ns:c}):G[F]=this.translate(Y,{...i,joinArrays:!1,ns:c}),G[F]===Y&&(G[F]=j[F])}v=G}}else if(k&&Ge(A)&&Array.isArray(v))v=v.join(A),v&&(v=this.extendTranslation(v,e,i,r));else{let X=!1,G=!1;!this.isValidLookup(v)&&M&&(X=!0,v=z),this.isValidLookup(v)||(G=!0,v=a);const F=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:v,Y=M&&z!==v&&this.options.updateMissing;if(G||X||Y){if(this.logger.log(Y?"updateKey":"missingKey",d,h,a,Y?z:v),o){const Z=this.resolve(a,{...i,keySeparator:!1});Z&&Z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&se&&se[0])for(let Z=0;Z<se.length;Z++)q.push(se[Z]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(i.lng||this.language):q.push(i.lng||this.language);const T=(Z,ue,I)=>{const pe=M&&I!==v?I:F;this.options.missingKeyHandler?this.options.missingKeyHandler(Z,h,ue,pe,Y,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Z,h,ue,pe,Y,i),this.emit("missingKey",Z,h,ue,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?q.forEach(Z=>{const ue=this.pluralResolver.getSuffixes(Z,i);N&&i[`defaultValue${this.options.pluralSeparator}zero`]&&ue.indexOf(`${this.options.pluralSeparator}zero`)<0&&ue.push(`${this.options.pluralSeparator}zero`),ue.forEach(I=>{T([Z],a+I,i[`defaultValue${I}`]||z)})}):T(q,a,z))}v=this.extendTranslation(v,e,i,y,r),G&&v===a&&this.options.appendNamespaceToMissingKey&&(v=`${h}${f}${a}`),(G||X)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${f}${a}`:a,X?v:void 0,i))}return s?(y.res=v,y.usedParams=this.getUsedParamsDetails(i),y):v}extendTranslation(e,n,r,i,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=Ge(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const d=e.match(this.interpolator.nestingRegexp);h=d&&d.length}let f=r.replace&&!Ge(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||i.usedLng,r),c){const d=e.match(this.interpolator.nestingRegexp),m=d&&d.length;h<m&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...d)=>s?.[0]===d[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${d[0]} in key: ${n[0]}`),null):this.translate(...d,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=Ge(o)?[o]:o;return e!=null&&a?.length&&r.applyPostProcessor!==!1&&(e=mW.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,s,o,a;return Ge(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const h=this.extractFromKey(c,n),f=h.key;i=f;let d=h.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const m=n.count!==void 0&&!Ge(n.count),y=m&&!n.ordinal&&n.count===0,v=n.context!==void 0&&(Ge(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(_=>{this.isValidLookup(r)||(a=_,!lB[`${w[0]}-${_}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(lB[`${w[0]}-${_}`]=!0,this.logger.warn(`key "${i}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(S=>{if(this.isValidLookup(r))return;o=S;const A=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(A,f,S,_,n);else{let P;m&&(P=this.pluralResolver.getSuffix(S,n.count,n));const M=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(n.ordinal&&P.indexOf(O)===0&&A.push(f+P.replace(O,this.options.pluralSeparator)),A.push(f+P),y&&A.push(f+M)),v){const L=`${f}${this.options.contextSeparator||"_"}${n.context}`;A.push(L),m&&(n.ordinal&&P.indexOf(O)===0&&A.push(L+P.replace(O,this.options.pluralSeparator)),A.push(L+P),y&&A.push(L+M))}}let k;for(;k=A.pop();)this.isValidLookup(r)||(s=k,r=this.getResource(S,_,k,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Ge(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class uB{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=io.create("languageUtils")}getScriptPartFromCode(e){if(e=Em(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Em(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Ge(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Ge(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ge(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Ge(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}const hB={zero:0,one:1,two:2,few:3,many:4,other:5},fB={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class IEe{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=io.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Em(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),fB;if(!e.match(/-|_/))return fB;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,n)}return this.pluralRulesCache[s]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>hB[i]-hB[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const dB=(t,e,n,r=".",i=!0)=>{let s=kEe(t,e,n);return!s&&i&&Ge(n)&&(s=mk(t,n,r),s===void 0&&(s=mk(e,n,r))),s},O_=t=>t.replace(/\$/g,"$$$$");class NEe{constructor(e={}){this.logger=io.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:c,formatSeparator:h,unescapeSuffix:f,unescapePrefix:d,nestingPrefix:m,nestingPrefixEscaped:y,nestingSuffix:v,nestingSuffixEscaped:w,nestingOptionsSeparator:_,maxReplaces:S,alwaysFormat:A}=e.interpolation;this.escape=n!==void 0?n:TEe,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?zu(s):o||"{{",this.suffix=a?zu(a):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=f?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=m?zu(m):y||zu("$t("),this.nestingSuffix=v?zu(v):w||zu(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=S||1e3,this.alwaysFormat=A!==void 0?A:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=y=>{if(y.indexOf(this.formatSeparator)<0){const S=dB(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,r,{...i,...n,interpolationkey:y}):S}const v=y.split(this.formatSeparator),w=v.shift().trim(),_=v.join(this.formatSeparator).trim();return this.format(dB(n,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...i,...n,interpolationkey:w})};this.resetRegExp();const f=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>O_(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?O_(this.escape(y)):O_(y)}].forEach(y=>{for(a=0;s=y.regex.exec(e);){const v=s[1].trim();if(o=h(v),o===void 0)if(typeof f=="function"){const _=f(e,s,i);o=Ge(_)?_:""}else if(i&&Object.prototype.hasOwnProperty.call(i,v))o="";else if(d){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),o="";else!Ge(o)&&!this.useRawValueToEscape&&(o=rB(o));const w=y.safeValue(o);if(e=e.replace(s[0],w),d?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,s,o;const a=(c,h)=>{const f=this.nestingOptionsSeparator;if(c.indexOf(f)<0)return c;const d=c.split(new RegExp(`${f}[ ]*{`));let m=`{${d[1]}`;c=d[0],m=this.interpolate(m,o);const y=m.match(/'/g),v=m.match(/"/g);((y?.length??0)%2===0&&!v||v.length%2!==0)&&(m=m.replace(/'/g,'"'));try{o=JSON.parse(m),h&&(o={...h,...o})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,w),`${c}${f}${m}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!Ge(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(c=i[1].slice(h).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&!Ge(s))return s;Ge(s)||(s=rB(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c.length&&(s=c.reduce((f,d)=>this.format(f,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const BEe=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...c]=o.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),f=a.trim();n[f]||(n[f]=h),h==="false"&&(n[f]=!1),h==="true"&&(n[f]=!0),isNaN(h)||(n[f]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},pB=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=e[o];return a||(a=t(Em(r),i),e[o]=a),a(n)}},jEe=t=>(e,n,r)=>t(Em(n),r)(e);class $Ee{constructor(e={}){this.logger=io.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?pB:jEe;this.formats={number:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s});return a=>o.format(a)}),currency:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s,style:"currency"});return a=>o.format(a)}),datetime:r((i,s)=>{const o=new Intl.DateTimeFormat(i,{...s});return a=>o.format(a)}),relativetime:r((i,s)=>{const o=new Intl.RelativeTimeFormat(i,{...s});return a=>o.format(a,s.range||"day")}),list:r((i,s)=>{const o=new Intl.ListFormat(i,{...s});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=pB(n)}format(e,n,r,i={}){const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,c)=>{const{formatName:h,formatOptions:f}=BEe(c);if(this.formats[h]){let d=a;try{const m=i?.formatParams?.[i.interpolationkey]||{},y=m.locale||m.lng||i.locale||i.lng||r;d=this.formats[h](a,y,{...f,...i,...m})}catch(m){this.logger.warn(m)}return d}else this.logger.warn(`there was no format function for ${h}`);return a},e)}}const VEe=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class FEe extends bw{constructor(e,n,r,i={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=io.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},c={};return e.forEach(h=>{let f=!0;n.forEach(d=>{const m=`${h}|${d}`;!r.reload&&this.store.hasResourceBundle(h,d)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?o[m]===void 0&&(o[m]=!0):(this.state[m]=1,f=!1,o[m]===void 0&&(o[m]=!0),s[m]===void 0&&(s[m]=!0),c[d]===void 0&&(c[d]=!0)))}),f||(a[h]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(c=>{AEe(c.loaded,[s],o),VEe(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{a[h]||(a[h]={});const f=c.loaded[h];f.length&&f.forEach(d=>{a[h][d]===void 0&&(a[h][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r,i=0,s=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(h,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(h&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(h,f)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const h=c(e,n);h&&typeof h.then=="function"?h.then(f=>a(null,f)).catch(a):a(null,h)}catch(h){a(h)}return}return c(e,n,a)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Ge(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ge(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s,o={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...o,isUpdate:s},h=this.backend.create.bind(this.backend);if(h.length<6)try{let f;h.length===5?f=h(e,n,r,i,c):f=h(e,n,r,i),f&&typeof f.then=="function"?f.then(d=>a(null,d)).catch(a):a(null,f)}catch(f){a(f)}else h(e,n,r,i,a,c)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const mB=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Ge(t[1])&&(e.defaultValue=t[1]),Ge(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),gB=t=>(Ge(t.ns)&&(t.ns=[t.ns]),Ge(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Ge(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Wy=()=>{},zEe=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Tm extends bw{constructor(e={},n){if(super(),this.options=gB(e),this.services={},this.logger=io,this.modules={external:[]},zEe(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Ge(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=mB();this.options={...r,...this.options,...gB(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?io.init(i(this.modules.logger),this.options):io.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=$Ee;const f=new uB(this.options);this.store=new aB(this.options.resources,this.options);const d=this.services;d.logger=io,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new IEe(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=i(h),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new NEe(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new FEe(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(y,...v)=>{this.emit(y,...v)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new ox(this.services,this.options),this.translator.on("*",(y,...v)=>{this.emit(y,...v)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Wy),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...f)=>this.store[h](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...f)=>(this.store[h](...f),this)});const a=Vd(),c=()=>{const h=(f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),n(f,d)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(e,n=Wy){let r=n;const i=Ge(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(h=>{h!=="cimode"&&s.indexOf(h)<0&&s.push(h)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload?.forEach?.(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=Vd();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Wy),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&mW.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Vd();this.emit("languageChanging",e);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},s=(a,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...h)=>this.t(...h)),n&&n(a,(...h)=>this.t(...h))},o=a=>{!e&&!a&&this.services.languageDetector&&(a=[]);const c=Ge(a)?a:a&&a[0],h=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(Ge(a)?[a]:a);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,f=>{s(f,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(s,o,...a)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([s,o].concat(a)):c={...o},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const h=this.options.keySeparator||".";let f;return c.keyPrefix&&Array.isArray(s)?f=s.map(d=>(typeof d=="function"&&(d=gk(d,{...this.options,...o})),`${c.keyPrefix}${h}${d}`)):(typeof s=="function"&&(s=gk(s,{...this.options,...o})),f=c.keyPrefix?`${c.keyPrefix}${h}${s}`:s),this.t(f,c)};return Ge(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const h=this.services.backendConnector.state[`${a}|${c}`];return h===-1||h===0||h===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=Vd();return this.options.ns?(Ge(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Vd();Ge(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const s=i.getTextInfo();if(s&&s.direction)return s.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new uB(mB());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Tm(e,n)}cloneInstance(e={},n=Wy){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Tm(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},c[h]=Object.keys(c[h]).reduce((f,d)=>(f[d]={...c[h][d]},f),c[h]),c),{});s.store=new aB(a,i),s.services.resourceStore=s.store}return s.translator=new ox(s.services,i),s.translator.on("*",(a,...c)=>{s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const wr=Tm.createInstance();wr.createInstance=Tm.createInstance;wr.createInstance;wr.dir;wr.init;wr.loadResources;wr.reloadResources;wr.use;wr.changeLanguage;wr.getFixedT;wr.t;wr.exists;wr.setDefaultNamespace;wr.hasLoadedNamespace;wr.loadNamespaces;wr.loadLanguages;const UEe="AI Agent",HEe="AI Agent Settings",qEe="Settings",WEe="Connect an AI Model to Get Started",GEe="No AI model is connected yet. Link a model to start interacting with it right here in the interface.",KEe="Connect an AI Model",YEe="Chat history",XEe="There is no chat history yet...",JEe="Choose how to connect AI",QEe="Select how you want to enable AI features in ONLYOFFICE.",ZEe="You can either use the built-in Wallet for a quick start or connect your own AI model using an API key or a locally hosted model.",eTe="ONLYOFFICE Wallet",tTe="Top up your balance with a card and instantly use all AI features.",nTe="Your AI provider",rTe="Connect your own AI source  either via API key from a provider or a locally hosted model.",iTe="Register & Connect Wallet",sTe="Add provider",oTe="Connection",aTe="MCP Servers",lTe="AI Provider",cTe="Edit AI Provider",uTe="Provider",hTe="Name",fTe="URL",dTe="Enter name",pTe="Enter URL",mTe="API key",gTe="Enter API key",yTe="Cancel",bTe="Save",vTe="Edit",xTe="Delete",wTe="Warning",STe="Yes",_Te="No",CTe="How can I help?",ATe="Free Al chat, writing assistant & idea generator",kTe="Rename",ETe="Download",TTe="Search...",RTe="Add local file...",MTe="Recent files",OTe="Attachments",PTe="API key",DTe="New chat",LTe="Ask AI",ITe="Analyzing...",NTe="Al would like to use this tool:",BTe=`Review each action carefully before approving
 We cannot guarantee the security or privacy practices of third-party integrations.`,jTe="Always allow this tool to perform this action without asking again",$Te="Deny",VTe="Allow",FTe="Tool call arguments",zTe="Tool call result",UTe="Tool executed",HTe="Confirmation",qTe="Select model",WTe=" This section allows you to configure MCP servers for use within the AI Agent. You can edit the configuration to add new MCP servers and enable tools as needed.",GTe="Edit configuration",KTe="Enter your JSON configuration:",YTe="Available tools",XTe="tools",JTe="tools enabled",QTe="Enable all tools",ZTe="Disable all tools",eRe="Restart",tRe="Logs",nRe="Copy to clipboard",rRe="Close",iRe="Web Search",sRe="Connect a web search engine to enhance AI chats with real-time information from the internet.",oRe="Reset settings",aRe="Web Search Engine",lRe="Select engine",cRe={AIAgent:UEe,AIAgentSettings:HEe,Settings:qEe,ConnectAIModel:WEe,ConnectAIModelDescription:GEe,ConnectAIModelBtn:KEe,ChatHistory:YEe,NoChatYet:XEe,ChooseHowConnect:JEe,SelectHowConnect:QEe,SelectHowConnectDescription:ZEe,ONLYOFFICEWallet:eTe,ONLYOFFICEWalletDescription:tTe,AIProviders:nTe,AIProvidersDescription:rTe,RegisterConnectWallet:iTe,AddProvider:sTe,Connection:oTe,MCPServers:aTe,AIProvider:lTe,EditAIProvider:cTe,Provider:uTe,Name:hTe,URL:fTe,EnterName:dTe,EnterURL:pTe,Key:mTe,EnterKey:gTe,Cancel:yTe,Save:bTe,Edit:vTe,Delete:xTe,Warning:wTe,"WantDeleteProvider?":"Are you sure you want to delete this provider?","WantDeleteChat?":"Are you sure you want to delete this chat?",Yes:STe,No:_Te,WelcomeTitle:CTe,WelcomeDescription:ATe,Rename:kTe,Download:ETe,Search:TTe,AddLocalFile:RTe,RecentFiles:MTe,Attachments:OTe,APIKey:PTe,NewChat:DTe,AskAI:LTe,Analyzing:ITe,AIWouldLikeUseThisTool:NTe,ReviewEachAction:BTe,AlwaysAllow:jTe,Deny:$Te,Allow:VTe,ToolCallArguments:FTe,ToolCallResult:zTe,ToolExecuted:UTe,Confirmation:HTe,SelectModel:qTe,CustomServersDescription:WTe,EditConfiguration:GTe,EnterYourJSONConfiguration:KTe,AvailableTools:YTe,Tools:XTe,ToolsEnabled:JTe,EnableAllTools:QTe,DisableAllTools:ZTe,Restart:eRe,Logs:tRe,CopyToClipboard:nRe,Close:rRe,WebSearch:iRe,WebSearchDescription:sRe,ResetSettings:oRe,WebSearchEngine:aRe,SelectEngine:lRe},uRe=" ",hRe="  ",fRe="",dRe="     ",pRe="    .  ,         .",mRe=" ",gRe=" ",yRe="   ",bRe=",   ",vRe=",         ONLYOFFICE.",xRe="        ,          API-    .",wRe="ONLYOFFICE ",SRe="           .",_Re="   ",CRe="         API-  ,    .",ARe="   ",kRe=" ",ERe="",TRe="MCP ",RRe=" ",MRe="  ",ORe="",PRe="",DRe="URL",LRe=" ",IRe=" URL",NRe="API ",BRe=" API ",jRe="",$Re="",VRe="",FRe="",zRe="",URe="",HRe="",qRe="",WRe="",GRe="...",KRe="API ",YRe="",XRe="   ?",JRe="    ,      ",QRe=" ",ZRe=" ",eMe="  ...",tMe=" ",nMe="...",rMe="    :",iMe=`    
          .`,sMe="         ",oMe="",aMe="",lMe="  ",cMe="  ",uMe=" ",hMe="",fMe=" ",dMe="    MCP     AI Agent.    ,    MCP       .",pMe=" ",mMe="   JSON:",gMe=" ",yMe="",bMe=" ",vMe="  ",xMe="  ",wMe="",SMe="",_Me="   ",CMe="",AMe="  ",kMe="            .",EMe=" ",TMe=" ",RMe=" ",MMe={AIAgent:uRe,AIAgentSettings:hRe,Settings:fRe,ConnectAIModel:dRe,ConnectAIModelDescription:pRe,ConnectAIModelBtn:mRe,ChatHistory:gRe,NoChatYet:yRe,ChooseHowConnect:bRe,SelectHowConnect:vRe,SelectHowConnectDescription:xRe,ONLYOFFICEWallet:wRe,ONLYOFFICEWalletDescription:SRe,AIProviders:_Re,AIProvidersDescription:CRe,RegisterConnectWallet:ARe,AddProvider:kRe,Connection:ERe,MCPServers:TRe,AIProvider:RRe,EditAIProvider:MRe,Provider:ORe,Name:PRe,URL:DRe,EnterName:LRe,EnterURL:IRe,Key:NRe,EnterKey:BRe,Cancel:jRe,Save:$Re,Edit:VRe,Delete:FRe,Warning:zRe,"WantDeleteProvider?":" ,     ?","WantDeleteChat?":" ,     ?",Rename:URe,Download:HRe,Yes:qRe,No:WRe,Search:GRe,APIKey:KRe,Attachments:YRe,WelcomeTitle:XRe,WelcomeDescription:JRe,NewChat:QRe,AskAI:ZRe,AddLocalFile:eMe,RecentFiles:tMe,Analyzing:nMe,AIWouldLikeUseThisTool:rMe,ReviewEachAction:iMe,AlwaysAllow:sMe,Deny:oMe,Allow:aMe,ToolCallArguments:lMe,ToolCallResult:cMe,ToolExecuted:uMe,Confirmation:hMe,SelectModel:fMe,CustomServersDescription:dMe,EditConfiguration:pMe,EnterYourJSONConfiguration:mMe,AvailableTools:gMe,Tools:yMe,ToolsEnabled:bMe,EnableAllTools:vMe,DisableAllTools:xMe,Restart:wMe,Logs:SMe,CopyToClipboard:_Me,Close:CMe,WebSearch:AMe,WebSearchDescription:kMe,ResetSettings:EMe,WebSearchEngine:TMe,SelectEngine:RMe};wr.use(Dre).init({resources:{en:{translation:cRe},ru:{translation:MMe}},fallbackLng:"en",interpolation:{escapeValue:!1}});const OMe=()=>{const[t,e]=E.useState(!1),[n,r]=E.useState(!1),{messages:i,stopMessage:s}=Gh(),{providers:o,fetchProvidersModels:a}=ts(),{currentPage:c,setCurrentPage:h}=Dx(),{manageToolData:f}=vo();xEe({isReady:t}),wEe(),SEe({isReady:t});const{onNew:d,convertMessage:m,approveToolCall:y,denyToolCall:v}=vEe({isReady:t});E.useEffect(()=>{o.length&&a()},[o,a]),E.useEffect(()=>{f&&r(!0)},[f]),E.useEffect(()=>(gre().then(()=>e(!0)),()=>{bo.close()}),[]);const w=gY({messages:i,onNew:d,onCancel:async()=>{s()},convertMessage:m,adapters:{attachments:new iY([new eY,new nY])}});return c!=="settings"&&!o.length?C.jsx(nB,{children:C.jsx(xie,{onConnect:()=>{h("settings")}})}):C.jsxs(nB,{children:[C.jsx(hX,{runtime:w,children:c==="settings"?C.jsx(Spe,{}):C.jsx(Qke,{})}),n?C.jsx(bEe,{onAllow:y,onDeny:v,onClose:()=>r(!1)}):null]})},yB=()=>{let t=document.getElementById("root");if(!t){const e=window.parent.document.querySelector('iframe[name="system_asc.{9DC93CDB-B576-4F0C-B55E-FCC9C48DD777}"]');e&&e.contentDocument&&(t=e.contentDocument.getElementById("root"))}t||(t=document.createElement("div"),t.id="root",document.body.appendChild(t)),t&&!t.hasAttribute("data-react-root")&&(t.setAttribute("data-react-root","true"),SK.createRoot(t).render(C.jsx(E.StrictMode,{children:C.jsx(OMe,{})})))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",yB):yB();
